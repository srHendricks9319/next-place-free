var E_=(e,o)=>()=>(o||e((o={exports:{}}).exports,o),o.exports);var S_=E_((exports,module)=>{function _mergeNamespaces(e,o){for(var h=0;h<o.length;h++){const d=o[h];if(typeof d!="string"&&!Array.isArray(d)){for(const g in d)if(g!=="default"&&!(g in e)){const _=Object.getOwnPropertyDescriptor(d,g);_&&Object.defineProperty(e,g,_.get?_:{enumerable:!0,get:()=>d[g]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))d(g);new MutationObserver(g=>{for(const _ of g)if(_.type==="childList")for(const $ of _.addedNodes)$.tagName==="LINK"&&$.rel==="modulepreload"&&d($)}).observe(document,{childList:!0,subtree:!0});function h(g){const _={};return g.integrity&&(_.integrity=g.integrity),g.referrerPolicy&&(_.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?_.credentials="include":g.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function d(g){if(g.ep)return;g.ep=!0;const _=h(g);fetch(g.href,_)}})();function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$2=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(e){return e===null||typeof e!="object"?null:(e=z$2&&e[z$2]||e["@@iterator"],typeof e=="function"?e:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$3(e,o,h){this.props=e,this.context=o,this.refs=D$2,this.updater=h||B$3}E$3.prototype.isReactComponent={};E$3.prototype.setState=function(e,o){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,o,"setState")};E$3.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function F$1(){}F$1.prototype=E$3.prototype;function G$2(e,o,h){this.props=e,this.context=o,this.refs=D$2,this.updater=h||B$3}var H$5=G$2.prototype=new F$1;H$5.constructor=G$2;C$2(H$5,E$3.prototype);H$5.isPureReactComponent=!0;var I$3=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$3={current:null},L$3={key:!0,ref:!0,__self:!0,__source:!0};function M$3(e,o,h){var d,g={},_=null,$=null;if(o!=null)for(d in o.ref!==void 0&&($=o.ref),o.key!==void 0&&(_=""+o.key),o)J$2.call(o,d)&&!L$3.hasOwnProperty(d)&&(g[d]=o[d]);var j=arguments.length-2;if(j===1)g.children=h;else if(1<j){for(var _t=Array(j),_e=0;_e<j;_e++)_t[_e]=arguments[_e+2];g.children=_t}if(e&&e.defaultProps)for(d in j=e.defaultProps,j)g[d]===void 0&&(g[d]=j[d]);return{$$typeof:l$4,type:e,key:_,ref:$,props:g,_owner:K$3.current}}function N$3(e,o){return{$$typeof:l$4,type:e.type,key:o,ref:e.ref,props:e.props,_owner:e._owner}}function O$3(e){return typeof e=="object"&&e!==null&&e.$$typeof===l$4}function escape(e){var o={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(h){return o[h]})}var P$3=/\/+/g;function Q$3(e,o){return typeof e=="object"&&e!==null&&e.key!=null?escape(""+e.key):o.toString(36)}function R$3(e,o,h,d,g){var _=typeof e;(_==="undefined"||_==="boolean")&&(e=null);var $=!1;if(e===null)$=!0;else switch(_){case"string":case"number":$=!0;break;case"object":switch(e.$$typeof){case l$4:case n$2:$=!0}}if($)return $=e,g=g($),e=d===""?"."+Q$3($,0):d,I$3(g)?(h="",e!=null&&(h=e.replace(P$3,"$&/")+"/"),R$3(g,o,h,"",function(_e){return _e})):g!=null&&(O$3(g)&&(g=N$3(g,h+(!g.key||$&&$.key===g.key?"":(""+g.key).replace(P$3,"$&/")+"/")+e)),o.push(g)),1;if($=0,d=d===""?".":d+":",I$3(e))for(var j=0;j<e.length;j++){_=e[j];var _t=d+Q$3(_,j);$+=R$3(_,o,h,_t,g)}else if(_t=A$2(e),typeof _t=="function")for(e=_t.call(e),j=0;!(_=e.next()).done;)_=_.value,_t=d+Q$3(_,j++),$+=R$3(_,o,h,_t,g);else if(_==="object")throw o=String(e),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return $}function S$3(e,o,h){if(e==null)return e;var d=[],g=0;return R$3(e,d,"","",function(_){return o.call(h,_,g++)}),d}function T$3(e){if(e._status===-1){var o=e._result;o=o(),o.then(function(h){(e._status===0||e._status===-1)&&(e._status=1,e._result=h)},function(h){(e._status===0||e._status===-1)&&(e._status=2,e._result=h)}),e._status===-1&&(e._status=0,e._result=o)}if(e._status===1)return e._result.default;throw e._result}var U$3={current:null},V$3={transition:null},W$3={ReactCurrentDispatcher:U$3,ReactCurrentBatchConfig:V$3,ReactCurrentOwner:K$3};react_production_min.Children={map:S$3,forEach:function(e,o,h){S$3(e,function(){o.apply(this,arguments)},h)},count:function(e){var o=0;return S$3(e,function(){o++}),o},toArray:function(e){return S$3(e,function(o){return o})||[]},only:function(e){if(!O$3(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};react_production_min.Component=E$3;react_production_min.Fragment=p$4;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$1;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$3;react_production_min.cloneElement=function(e,o,h){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var d=C$2({},e.props),g=e.key,_=e.ref,$=e._owner;if(o!=null){if(o.ref!==void 0&&(_=o.ref,$=K$3.current),o.key!==void 0&&(g=""+o.key),e.type&&e.type.defaultProps)var j=e.type.defaultProps;for(_t in o)J$2.call(o,_t)&&!L$3.hasOwnProperty(_t)&&(d[_t]=o[_t]===void 0&&j!==void 0?j[_t]:o[_t])}var _t=arguments.length-2;if(_t===1)d.children=h;else if(1<_t){j=Array(_t);for(var _e=0;_e<_t;_e++)j[_e]=arguments[_e+2];d.children=j}return{$$typeof:l$4,type:e.type,key:g,ref:_,props:d,_owner:$}};react_production_min.createContext=function(e){return e={$$typeof:u$2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t$2,_context:e},e.Consumer=e};react_production_min.createElement=M$3;react_production_min.createFactory=function(e){var o=M$3.bind(null,e);return o.type=e,o};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(e){return{$$typeof:v$2,render:e}};react_production_min.isValidElement=O$3;react_production_min.lazy=function(e){return{$$typeof:y$2,_payload:{_status:-1,_result:e},_init:T$3}};react_production_min.memo=function(e,o){return{$$typeof:x$2,type:e,compare:o===void 0?null:o}};react_production_min.startTransition=function(e){var o=V$3.transition;V$3.transition={};try{e()}finally{V$3.transition=o}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(e,o){return U$3.current.useCallback(e,o)};react_production_min.useContext=function(e){return U$3.current.useContext(e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(e){return U$3.current.useDeferredValue(e)};react_production_min.useEffect=function(e,o){return U$3.current.useEffect(e,o)};react_production_min.useId=function(){return U$3.current.useId()};react_production_min.useImperativeHandle=function(e,o,h){return U$3.current.useImperativeHandle(e,o,h)};react_production_min.useInsertionEffect=function(e,o){return U$3.current.useInsertionEffect(e,o)};react_production_min.useLayoutEffect=function(e,o){return U$3.current.useLayoutEffect(e,o)};react_production_min.useMemo=function(e,o){return U$3.current.useMemo(e,o)};react_production_min.useReducer=function(e,o,h){return U$3.current.useReducer(e,o,h)};react_production_min.useRef=function(e){return U$3.current.useRef(e)};react_production_min.useState=function(e){return U$3.current.useState(e)};react_production_min.useSyncExternalStore=function(e,o,h){return U$3.current.useSyncExternalStore(e,o,h)};react_production_min.useTransition=function(){return U$3.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k$1=Symbol.for("react.element"),l$3=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n$1=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q(e,o,h){var d,g={},_=null,$=null;h!==void 0&&(_=""+h),o.key!==void 0&&(_=""+o.key),o.ref!==void 0&&($=o.ref);for(d in o)m$1.call(o,d)&&!p$3.hasOwnProperty(d)&&(g[d]=o[d]);if(e&&e.defaultProps)for(d in o=e.defaultProps,o)g[d]===void 0&&(g[d]=o[d]);return{$$typeof:k$1,type:e,key:_,ref:$,props:g,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$3;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function o(Ay,$y){var Hy=Ay.length;Ay.push($y);t:for(;0<Hy;){var i0=Hy-1>>>1,m0=Ay[i0];if(0<g(m0,$y))Ay[i0]=$y,Ay[Hy]=m0,Hy=i0;else break t}}function h(Ay){return Ay.length===0?null:Ay[0]}function d(Ay){if(Ay.length===0)return null;var $y=Ay[0],Hy=Ay.pop();if(Hy!==$y){Ay[0]=Hy;t:for(var i0=0,m0=Ay.length,d0=m0>>>1;i0<d0;){var A0=2*(i0+1)-1,W0=Ay[A0],D0=A0+1,X0=Ay[D0];if(0>g(W0,Hy))D0<m0&&0>g(X0,W0)?(Ay[i0]=X0,Ay[D0]=Hy,i0=D0):(Ay[i0]=W0,Ay[A0]=Hy,i0=A0);else if(D0<m0&&0>g(X0,Hy))Ay[i0]=X0,Ay[D0]=Hy,i0=D0;else break t}}return $y}function g(Ay,$y){var Hy=Ay.sortIndex-$y.sortIndex;return Hy!==0?Hy:Ay.id-$y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var _=performance;e.unstable_now=function(){return _.now()}}else{var $=Date,j=$.now();e.unstable_now=function(){return $.now()-j}}var _t=[],_e=[],_r=1,_n=null,_i=3,_o=!1,_a=!1,_u=!1,_f=typeof setTimeout=="function"?setTimeout:null,_h=typeof clearTimeout=="function"?clearTimeout:null,_d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ty(Ay){for(var $y=h(_e);$y!==null;){if($y.callback===null)d(_e);else if($y.startTime<=Ay)d(_e),$y.sortIndex=$y.expirationTime,o(_t,$y);else break;$y=h(_e)}}function ey(Ay){if(_u=!1,ty(Ay),!_a)if(h(_t)!==null)_a=!0,a0(sy);else{var $y=h(_e);$y!==null&&e0(ey,$y.startTime-Ay)}}function sy(Ay,$y){_a=!1,_u&&(_u=!1,_h(fy),fy=-1),_o=!0;var Hy=_i;try{for(ty($y),_n=h(_t);_n!==null&&(!(_n.expirationTime>$y)||Ay&&!Ey());){var i0=_n.callback;if(typeof i0=="function"){_n.callback=null,_i=_n.priorityLevel;var m0=i0(_n.expirationTime<=$y);$y=e.unstable_now(),typeof m0=="function"?_n.callback=m0:_n===h(_t)&&d(_t),ty($y)}else d(_t);_n=h(_t)}if(_n!==null)var d0=!0;else{var A0=h(_e);A0!==null&&e0(ey,A0.startTime-$y),d0=!1}return d0}finally{_n=null,_i=Hy,_o=!1}}var ny=!1,uy=null,fy=-1,yy=5,xy=-1;function Ey(){return!(e.unstable_now()-xy<yy)}function Oy(){if(uy!==null){var Ay=e.unstable_now();xy=Ay;var $y=!0;try{$y=uy(!0,Ay)}finally{$y?Gy():(ny=!1,uy=null)}}else ny=!1}var Gy;if(typeof _d=="function")Gy=function(){_d(Oy)};else if(typeof MessageChannel<"u"){var Ly=new MessageChannel,g0=Ly.port2;Ly.port1.onmessage=Oy,Gy=function(){g0.postMessage(null)}}else Gy=function(){_f(Oy,0)};function a0(Ay){uy=Ay,ny||(ny=!0,Gy())}function e0(Ay,$y){fy=_f(function(){Ay(e.unstable_now())},$y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ay){Ay.callback=null},e.unstable_continueExecution=function(){_a||_o||(_a=!0,a0(sy))},e.unstable_forceFrameRate=function(Ay){0>Ay||125<Ay?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):yy=0<Ay?Math.floor(1e3/Ay):5},e.unstable_getCurrentPriorityLevel=function(){return _i},e.unstable_getFirstCallbackNode=function(){return h(_t)},e.unstable_next=function(Ay){switch(_i){case 1:case 2:case 3:var $y=3;break;default:$y=_i}var Hy=_i;_i=$y;try{return Ay()}finally{_i=Hy}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ay,$y){switch(Ay){case 1:case 2:case 3:case 4:case 5:break;default:Ay=3}var Hy=_i;_i=Ay;try{return $y()}finally{_i=Hy}},e.unstable_scheduleCallback=function(Ay,$y,Hy){var i0=e.unstable_now();switch(typeof Hy=="object"&&Hy!==null?(Hy=Hy.delay,Hy=typeof Hy=="number"&&0<Hy?i0+Hy:i0):Hy=i0,Ay){case 1:var m0=-1;break;case 2:m0=250;break;case 5:m0=1073741823;break;case 4:m0=1e4;break;default:m0=5e3}return m0=Hy+m0,Ay={id:_r++,callback:$y,priorityLevel:Ay,startTime:Hy,expirationTime:m0,sortIndex:-1},Hy>i0?(Ay.sortIndex=Hy,o(_e,Ay),h(_t)===null&&Ay===h(_e)&&(_u?(_h(fy),fy=-1):_u=!0,e0(ey,Hy-i0))):(Ay.sortIndex=m0,o(_t,Ay),_a||_o||(_a=!0,a0(sy))),Ay},e.unstable_shouldYield=Ey,e.unstable_wrapCallback=function(Ay){var $y=_i;return function(){var Hy=_i;_i=$y;try{return Ay.apply(this,arguments)}finally{_i=Hy}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$2=reactExports,ca$1=schedulerExports;function p$2(e){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+e,h=1;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+e+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$1=new Set,ea$1={};function fa$2(e,o){ha$2(e,o),ha$2(e+"Capture",o)}function ha$2(e,o){for(ea$1[e]=o,e=0;e<o.length;e++)da$1.add(o[e])}var ia$2=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja$2=Object.prototype.hasOwnProperty,ka$2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la$2={},ma$1={};function oa$2(e){return ja$2.call(ma$1,e)?!0:ja$2.call(la$2,e)?!1:ka$2.test(e)?ma$1[e]=!0:(la$2[e]=!0,!1)}function pa$2(e,o,h,d){if(h!==null&&h.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:h!==null?!h.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qa$2(e,o,h,d){if(o===null||typeof o>"u"||pa$2(e,o,h,d))return!0;if(d)return!1;if(h!==null)switch(h.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function v$1(e,o,h,d,g,_,$){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=g,this.mustUseProperty=h,this.propertyName=e,this.type=o,this.sanitizeURL=_,this.removeEmptyString=$}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){z$1[e]=new v$1(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var o=e[0];z$1[o]=new v$1(o,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){z$1[e]=new v$1(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){z$1[e]=new v$1(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){z$1[e]=new v$1(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){z$1[e]=new v$1(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){z$1[e]=new v$1(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){z$1[e]=new v$1(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){z$1[e]=new v$1(e,5,!1,e.toLowerCase(),null,!1,!1)});var ra$2=/[\-:]([a-z])/g;function sa$2(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var o=e.replace(ra$2,sa$2);z$1[o]=new v$1(o,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var o=e.replace(ra$2,sa$2);z$1[o]=new v$1(o,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var o=e.replace(ra$2,sa$2);z$1[o]=new v$1(o,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){z$1[e]=new v$1(e,1,!1,e.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){z$1[e]=new v$1(e,1,!1,e.toLowerCase(),null,!0,!0)});function ta$2(e,o,h,d){var g=z$1.hasOwnProperty(o)?z$1[o]:null;(g!==null?g.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(qa$2(o,h,g,d)&&(h=null),d||g===null?oa$2(o)&&(h===null?e.removeAttribute(o):e.setAttribute(o,""+h)):g.mustUseProperty?e[g.propertyName]=h===null?g.type===3?!1:"":h:(o=g.attributeName,d=g.attributeNamespace,h===null?e.removeAttribute(o):(g=g.type,h=g===3||g===4&&h===!0?"":""+h,d?e.setAttributeNS(d,o,h):e.setAttribute(o,h))))}var ua$2=aa$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$2=Symbol.for("react.element"),wa$2=Symbol.for("react.portal"),ya$2=Symbol.for("react.fragment"),za$2=Symbol.for("react.strict_mode"),Aa$2=Symbol.for("react.profiler"),Ba$2=Symbol.for("react.provider"),Ca$2=Symbol.for("react.context"),Da$2=Symbol.for("react.forward_ref"),Ea$2=Symbol.for("react.suspense"),Fa$2=Symbol.for("react.suspense_list"),Ga$2=Symbol.for("react.memo"),Ha$2=Symbol.for("react.lazy"),Ia$2=Symbol.for("react.offscreen"),Ja$2=Symbol.iterator;function Ka$2(e){return e===null||typeof e!="object"?null:(e=Ja$2&&e[Ja$2]||e["@@iterator"],typeof e=="function"?e:null)}var A$1=Object.assign,La$2;function Ma$2(e){if(La$2===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);La$2=o&&o[1]||""}return`
`+La$2+e}var Na$2=!1;function Oa$2(e,o){if(!e||Na$2)return"";Na$2=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(_e){var d=_e}Reflect.construct(e,[],o)}else{try{o.call()}catch(_e){d=_e}e.call(o.prototype)}else{try{throw Error()}catch(_e){d=_e}e()}}catch(_e){if(_e&&d&&typeof _e.stack=="string"){for(var g=_e.stack.split(`
`),_=d.stack.split(`
`),$=g.length-1,j=_.length-1;1<=$&&0<=j&&g[$]!==_[j];)j--;for(;1<=$&&0<=j;$--,j--)if(g[$]!==_[j]){if($!==1||j!==1)do if($--,j--,0>j||g[$]!==_[j]){var _t=`
`+g[$].replace(" at new "," at ");return e.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",e.displayName)),_t}while(1<=$&&0<=j);break}}}finally{Na$2=!1,Error.prepareStackTrace=h}return(e=e?e.displayName||e.name:"")?Ma$2(e):""}function Pa$2(e){switch(e.tag){case 5:return Ma$2(e.type);case 16:return Ma$2("Lazy");case 13:return Ma$2("Suspense");case 19:return Ma$2("SuspenseList");case 0:case 2:case 15:return e=Oa$2(e.type,!1),e;case 11:return e=Oa$2(e.type.render,!1),e;case 1:return e=Oa$2(e.type,!0),e;default:return""}}function Qa$2(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya$2:return"Fragment";case wa$2:return"Portal";case Aa$2:return"Profiler";case za$2:return"StrictMode";case Ea$2:return"Suspense";case Fa$2:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ca$2:return(e.displayName||"Context")+".Consumer";case Ba$2:return(e._context.displayName||"Context")+".Provider";case Da$2:var o=e.render;return e=e.displayName,e||(e=o.displayName||o.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga$2:return o=e.displayName||null,o!==null?o:Qa$2(e.type)||"Memo";case Ha$2:o=e._payload,e=e._init;try{return Qa$2(e(o))}catch{}}return null}function Ra$2(e){var o=e.type;switch(e.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=o.render,e=e.displayName||e.name||"",o.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$2(o);case 8:return o===za$2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Sa$2(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ta$2(e){var o=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ua$2(e){var o=Ta$2(e)?"checked":"value",h=Object.getOwnPropertyDescriptor(e.constructor.prototype,o),d=""+e[o];if(!e.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var g=h.get,_=h.set;return Object.defineProperty(e,o,{configurable:!0,get:function(){return g.call(this)},set:function($){d=""+$,_.call(this,$)}}),Object.defineProperty(e,o,{enumerable:h.enumerable}),{getValue:function(){return d},setValue:function($){d=""+$},stopTracking:function(){e._valueTracker=null,delete e[o]}}}}function Va$2(e){e._valueTracker||(e._valueTracker=Ua$2(e))}function Wa$2(e){if(!e)return!1;var o=e._valueTracker;if(!o)return!0;var h=o.getValue(),d="";return e&&(d=Ta$2(e)?e.checked?"true":"false":e.value),e=d,e!==h?(o.setValue(e),!0):!1}function Xa$2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ya$2(e,o){var h=o.checked;return A$1({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??e._wrapperState.initialChecked})}function Za$2(e,o){var h=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;h=Sa$2(o.value!=null?o.value:h),e._wrapperState={initialChecked:d,initialValue:h,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ab$2(e,o){o=o.checked,o!=null&&ta$2(e,"checked",o,!1)}function bb$2(e,o){ab$2(e,o);var h=Sa$2(o.value),d=o.type;if(h!=null)d==="number"?(h===0&&e.value===""||e.value!=h)&&(e.value=""+h):e.value!==""+h&&(e.value=""+h);else if(d==="submit"||d==="reset"){e.removeAttribute("value");return}o.hasOwnProperty("value")?cb$2(e,o.type,h):o.hasOwnProperty("defaultValue")&&cb$2(e,o.type,Sa$2(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(e.defaultChecked=!!o.defaultChecked)}function db$2(e,o,h){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+e._wrapperState.initialValue,h||o===e.value||(e.value=o),e.defaultValue=o}h=e.name,h!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,h!==""&&(e.name=h)}function cb$2(e,o,h){(o!=="number"||Xa$2(e.ownerDocument)!==e)&&(h==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+h&&(e.defaultValue=""+h))}var eb$2=Array.isArray;function fb$2(e,o,h,d){if(e=e.options,o){o={};for(var g=0;g<h.length;g++)o["$"+h[g]]=!0;for(h=0;h<e.length;h++)g=o.hasOwnProperty("$"+e[h].value),e[h].selected!==g&&(e[h].selected=g),g&&d&&(e[h].defaultSelected=!0)}else{for(h=""+Sa$2(h),o=null,g=0;g<e.length;g++){if(e[g].value===h){e[g].selected=!0,d&&(e[g].defaultSelected=!0);return}o!==null||e[g].disabled||(o=e[g])}o!==null&&(o.selected=!0)}}function gb$2(e,o){if(o.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A$1({},o,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb$2(e,o){var h=o.value;if(h==null){if(h=o.children,o=o.defaultValue,h!=null){if(o!=null)throw Error(p$2(92));if(eb$2(h)){if(1<h.length)throw Error(p$2(93));h=h[0]}o=h}o==null&&(o=""),h=o}e._wrapperState={initialValue:Sa$2(h)}}function ib$2(e,o){var h=Sa$2(o.value),d=Sa$2(o.defaultValue);h!=null&&(h=""+h,h!==e.value&&(e.value=h),o.defaultValue==null&&e.defaultValue!==h&&(e.defaultValue=h)),d!=null&&(e.defaultValue=""+d)}function jb$2(e){var o=e.textContent;o===e._wrapperState.initialValue&&o!==""&&o!==null&&(e.value=o)}function kb$2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb$2(e,o){return e==null||e==="http://www.w3.org/1999/xhtml"?kb$2(o):e==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mb$1,nb$1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,h,d,g){MSApp.execUnsafeLocalFunction(function(){return e(o,h,d,g)})}:e}(function(e,o){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=o;else{for(mb$1=mb$1||document.createElement("div"),mb$1.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=mb$1.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;o.firstChild;)e.appendChild(o.firstChild)}});function ob$2(e,o){if(o){var h=e.firstChild;if(h&&h===e.lastChild&&h.nodeType===3){h.nodeValue=o;return}}e.textContent=o}var pb$2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb$2=["Webkit","ms","Moz","O"];Object.keys(pb$2).forEach(function(e){qb$2.forEach(function(o){o=o+e.charAt(0).toUpperCase()+e.substring(1),pb$2[o]=pb$2[e]})});function rb$2(e,o,h){return o==null||typeof o=="boolean"||o===""?"":h||typeof o!="number"||o===0||pb$2.hasOwnProperty(e)&&pb$2[e]?(""+o).trim():o+"px"}function sb$2(e,o){e=e.style;for(var h in o)if(o.hasOwnProperty(h)){var d=h.indexOf("--")===0,g=rb$2(h,o[h],d);h==="float"&&(h="cssFloat"),d?e.setProperty(h,g):e[h]=g}}var tb$2=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub$2(e,o){if(o){if(tb$2[e]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(p$2(137,e));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(p$2(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(p$2(61))}if(o.style!=null&&typeof o.style!="object")throw Error(p$2(62))}}function vb$2(e,o){if(e.indexOf("-")===-1)return typeof o.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb$2=null;function xb$2(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yb$2=null,zb$2=null,Ab$2=null;function Bb$2(e){if(e=Cb$2(e)){if(typeof yb$2!="function")throw Error(p$2(280));var o=e.stateNode;o&&(o=Db$2(o),yb$2(e.stateNode,e.type,o))}}function Eb$2(e){zb$2?Ab$2?Ab$2.push(e):Ab$2=[e]:zb$2=e}function Fb$1(){if(zb$2){var e=zb$2,o=Ab$2;if(Ab$2=zb$2=null,Bb$2(e),o)for(e=0;e<o.length;e++)Bb$2(o[e])}}function Gb$2(e,o){return e(o)}function Hb$2(){}var Ib$2=!1;function Jb$2(e,o,h){if(Ib$2)return e(o,h);Ib$2=!0;try{return Gb$2(e,o,h)}finally{Ib$2=!1,(zb$2!==null||Ab$2!==null)&&(Hb$2(),Fb$1())}}function Kb$2(e,o){var h=e.stateNode;if(h===null)return null;var d=Db$2(h);if(d===null)return null;h=d[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(e=e.type,d=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!d;break t;default:e=!1}if(e)return null;if(h&&typeof h!="function")throw Error(p$2(231,o,typeof h));return h}var Lb$2=!1;if(ia$2)try{var Mb$2={};Object.defineProperty(Mb$2,"passive",{get:function(){Lb$2=!0}}),window.addEventListener("test",Mb$2,Mb$2),window.removeEventListener("test",Mb$2,Mb$2)}catch{Lb$2=!1}function Nb$2(e,o,h,d,g,_,$,j,_t){var _e=Array.prototype.slice.call(arguments,3);try{o.apply(h,_e)}catch(_r){this.onError(_r)}}var Ob$2=!1,Pb$2=null,Qb$2=!1,Rb$2=null,Sb$2={onError:function(e){Ob$2=!0,Pb$2=e}};function Tb$2(e,o,h,d,g,_,$,j,_t){Ob$2=!1,Pb$2=null,Nb$2.apply(Sb$2,arguments)}function Ub$1(e,o,h,d,g,_,$,j,_t){if(Tb$2.apply(this,arguments),Ob$2){if(Ob$2){var _e=Pb$2;Ob$2=!1,Pb$2=null}else throw Error(p$2(198));Qb$2||(Qb$2=!0,Rb$2=_e)}}function Vb$1(e){var o=e,h=e;if(e.alternate)for(;o.return;)o=o.return;else{e=o;do o=e,o.flags&4098&&(h=o.return),e=o.return;while(e)}return o.tag===3?h:null}function Wb$1(e){if(e.tag===13){var o=e.memoizedState;if(o===null&&(e=e.alternate,e!==null&&(o=e.memoizedState)),o!==null)return o.dehydrated}return null}function Xb$1(e){if(Vb$1(e)!==e)throw Error(p$2(188))}function Yb$1(e){var o=e.alternate;if(!o){if(o=Vb$1(e),o===null)throw Error(p$2(188));return o!==e?null:e}for(var h=e,d=o;;){var g=h.return;if(g===null)break;var _=g.alternate;if(_===null){if(d=g.return,d!==null){h=d;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===h)return Xb$1(g),e;if(_===d)return Xb$1(g),o;_=_.sibling}throw Error(p$2(188))}if(h.return!==d.return)h=g,d=_;else{for(var $=!1,j=g.child;j;){if(j===h){$=!0,h=g,d=_;break}if(j===d){$=!0,d=g,h=_;break}j=j.sibling}if(!$){for(j=_.child;j;){if(j===h){$=!0,h=_,d=g;break}if(j===d){$=!0,d=_,h=g;break}j=j.sibling}if(!$)throw Error(p$2(189))}}if(h.alternate!==d)throw Error(p$2(190))}if(h.tag!==3)throw Error(p$2(188));return h.stateNode.current===h?e:o}function Zb$1(e){return e=Yb$1(e),e!==null?$b$1(e):null}function $b$1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var o=$b$1(e);if(o!==null)return o;e=e.sibling}return null}var ac$1=ca$1.unstable_scheduleCallback,bc$1=ca$1.unstable_cancelCallback,cc$1=ca$1.unstable_shouldYield,dc$1=ca$1.unstable_requestPaint,B$2=ca$1.unstable_now,ec$1=ca$1.unstable_getCurrentPriorityLevel,fc$1=ca$1.unstable_ImmediatePriority,gc$1=ca$1.unstable_UserBlockingPriority,hc$1=ca$1.unstable_NormalPriority,ic$1=ca$1.unstable_LowPriority,jc$1=ca$1.unstable_IdlePriority,kc$1=null,lc$1=null;function mc$1(e){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc$1,e,void 0,(e.current.flags&128)===128)}catch{}}var oc$1=Math.clz32?Math.clz32:nc$1,pc$1=Math.log,qc$1=Math.LN2;function nc$1(e){return e>>>=0,e===0?32:31-(pc$1(e)/qc$1|0)|0}var rc$1=64,sc$1=4194304;function tc$1(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc$1(e,o){var h=e.pendingLanes;if(h===0)return 0;var d=0,g=e.suspendedLanes,_=e.pingedLanes,$=h&268435455;if($!==0){var j=$&~g;j!==0?d=tc$1(j):(_&=$,_!==0&&(d=tc$1(_)))}else $=h&~g,$!==0?d=tc$1($):_!==0&&(d=tc$1(_));if(d===0)return 0;if(o!==0&&o!==d&&!(o&g)&&(g=d&-d,_=o&-o,g>=_||g===16&&(_&4194240)!==0))return o;if(d&4&&(d|=h&16),o=e.entangledLanes,o!==0)for(e=e.entanglements,o&=d;0<o;)h=31-oc$1(o),g=1<<h,d|=e[h],o&=~g;return d}function vc$1(e,o){switch(e){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc$1(e,o){for(var h=e.suspendedLanes,d=e.pingedLanes,g=e.expirationTimes,_=e.pendingLanes;0<_;){var $=31-oc$1(_),j=1<<$,_t=g[$];_t===-1?(!(j&h)||j&d)&&(g[$]=vc$1(j,o)):_t<=o&&(e.expiredLanes|=j),_&=~j}}function xc$1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yc$1(){var e=rc$1;return rc$1<<=1,!(rc$1&4194240)&&(rc$1=64),e}function zc$1(e){for(var o=[],h=0;31>h;h++)o.push(e);return o}function Ac$1(e,o,h){e.pendingLanes|=o,o!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,o=31-oc$1(o),e[o]=h}function Bc$1(e,o){var h=e.pendingLanes&~o;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=o,e.mutableReadLanes&=o,e.entangledLanes&=o,o=e.entanglements;var d=e.eventTimes;for(e=e.expirationTimes;0<h;){var g=31-oc$1(h),_=1<<g;o[g]=0,d[g]=-1,e[g]=-1,h&=~_}}function Cc$1(e,o){var h=e.entangledLanes|=o;for(e=e.entanglements;h;){var d=31-oc$1(h),g=1<<d;g&o|e[d]&o&&(e[d]|=o),h&=~g}}var C$1=0;function Dc$1(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ec$1,Fc$1,Gc$1,Hc$1,Ic$1,Jc$1=!1,Kc$1=[],Lc$1=null,Mc$1=null,Nc$1=null,Oc$1=new Map,Pc$1=new Map,Qc$1=[],Rc$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$1(e,o){switch(e){case"focusin":case"focusout":Lc$1=null;break;case"dragenter":case"dragleave":Mc$1=null;break;case"mouseover":case"mouseout":Nc$1=null;break;case"pointerover":case"pointerout":Oc$1.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$1.delete(o.pointerId)}}function Tc$1(e,o,h,d,g,_){return e===null||e.nativeEvent!==_?(e={blockedOn:o,domEventName:h,eventSystemFlags:d,nativeEvent:_,targetContainers:[g]},o!==null&&(o=Cb$2(o),o!==null&&Fc$1(o)),e):(e.eventSystemFlags|=d,o=e.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),e)}function Uc$1(e,o,h,d,g){switch(o){case"focusin":return Lc$1=Tc$1(Lc$1,e,o,h,d,g),!0;case"dragenter":return Mc$1=Tc$1(Mc$1,e,o,h,d,g),!0;case"mouseover":return Nc$1=Tc$1(Nc$1,e,o,h,d,g),!0;case"pointerover":var _=g.pointerId;return Oc$1.set(_,Tc$1(Oc$1.get(_)||null,e,o,h,d,g)),!0;case"gotpointercapture":return _=g.pointerId,Pc$1.set(_,Tc$1(Pc$1.get(_)||null,e,o,h,d,g)),!0}return!1}function Vc$1(e){var o=Wc$1(e.target);if(o!==null){var h=Vb$1(o);if(h!==null){if(o=h.tag,o===13){if(o=Wb$1(h),o!==null){e.blockedOn=o,Ic$1(e.priority,function(){Gc$1(h)});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){e.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc$1(e){if(e.blockedOn!==null)return!1;for(var o=e.targetContainers;0<o.length;){var h=Yc$1(e.domEventName,e.eventSystemFlags,o[0],e.nativeEvent);if(h===null){h=e.nativeEvent;var d=new h.constructor(h.type,h);wb$2=d,h.target.dispatchEvent(d),wb$2=null}else return o=Cb$2(h),o!==null&&Fc$1(o),e.blockedOn=h,!1;o.shift()}return!0}function Zc$1(e,o,h){Xc$1(e)&&h.delete(o)}function $c$1(){Jc$1=!1,Lc$1!==null&&Xc$1(Lc$1)&&(Lc$1=null),Mc$1!==null&&Xc$1(Mc$1)&&(Mc$1=null),Nc$1!==null&&Xc$1(Nc$1)&&(Nc$1=null),Oc$1.forEach(Zc$1),Pc$1.forEach(Zc$1)}function ad$1(e,o){e.blockedOn===o&&(e.blockedOn=null,Jc$1||(Jc$1=!0,ca$1.unstable_scheduleCallback(ca$1.unstable_NormalPriority,$c$1)))}function bd$1(e){function o(g){return ad$1(g,e)}if(0<Kc$1.length){ad$1(Kc$1[0],e);for(var h=1;h<Kc$1.length;h++){var d=Kc$1[h];d.blockedOn===e&&(d.blockedOn=null)}}for(Lc$1!==null&&ad$1(Lc$1,e),Mc$1!==null&&ad$1(Mc$1,e),Nc$1!==null&&ad$1(Nc$1,e),Oc$1.forEach(o),Pc$1.forEach(o),h=0;h<Qc$1.length;h++)d=Qc$1[h],d.blockedOn===e&&(d.blockedOn=null);for(;0<Qc$1.length&&(h=Qc$1[0],h.blockedOn===null);)Vc$1(h),h.blockedOn===null&&Qc$1.shift()}var cd$1=ua$2.ReactCurrentBatchConfig,dd$1=!0;function ed$1(e,o,h,d){var g=C$1,_=cd$1.transition;cd$1.transition=null;try{C$1=1,fd$1(e,o,h,d)}finally{C$1=g,cd$1.transition=_}}function gd$1(e,o,h,d){var g=C$1,_=cd$1.transition;cd$1.transition=null;try{C$1=4,fd$1(e,o,h,d)}finally{C$1=g,cd$1.transition=_}}function fd$1(e,o,h,d){if(dd$1){var g=Yc$1(e,o,h,d);if(g===null)hd$1(e,o,d,id$1,h),Sc$1(e,d);else if(Uc$1(g,e,o,h,d))d.stopPropagation();else if(Sc$1(e,d),o&4&&-1<Rc$1.indexOf(e)){for(;g!==null;){var _=Cb$2(g);if(_!==null&&Ec$1(_),_=Yc$1(e,o,h,d),_===null&&hd$1(e,o,d,id$1,h),_===g)break;g=_}g!==null&&d.stopPropagation()}else hd$1(e,o,d,null,h)}}var id$1=null;function Yc$1(e,o,h,d){if(id$1=null,e=xb$2(d),e=Wc$1(e),e!==null)if(o=Vb$1(e),o===null)e=null;else if(h=o.tag,h===13){if(e=Wb$1(o),e!==null)return e;e=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;e=null}else o!==e&&(e=null);return id$1=e,null}function jd$1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc$1:return 1;case gc$1:return 4;case hc$1:case ic$1:return 16;case jc$1:return 536870912;default:return 16}default:return 16}}var kd$1=null,ld$1=null,md=null;function nd(){if(md)return md;var e,o=ld$1,h=o.length,d,g="value"in kd$1?kd$1.value:kd$1.textContent,_=g.length;for(e=0;e<h&&o[e]===g[e];e++);var $=h-e;for(d=1;d<=$&&o[h-d]===g[_-d];d++);return md=g.slice(e,1<d?1-d:void 0)}function od(e){var o=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&o===13&&(e=13)):e=o,e===10&&(e=13),32<=e||e===13?e:0}function pd(){return!0}function qd(){return!1}function rd(e){function o(h,d,g,_,$){this._reactName=h,this._targetInst=g,this.type=d,this.nativeEvent=_,this.target=$,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(h=e[j],this[j]=h?h(_):_[j]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),o}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yd&&(yd&&e.type==="mousemove"?(wd=e.screenX-yd.screenX,xd=e.screenY-yd.screenY):xd=wd=0,yd=e),wd)},movementY:function(e){return"movementY"in e?e.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(e){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(e):(e=Od[e])?!!o[e]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(e){if(e.key){var o=Md[e.key]||e.key;if(o!=="Unidentified")return o}return e.type==="keypress"?(e=od(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(e){return e.type==="keypress"?od(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?od(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia$2&&"CompositionEvent"in window,be=null;ia$2&&"documentMode"in document&&(be=document.documentMode);var ce=ia$2&&"TextEvent"in window&&!be,de=ia$2&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(e,o){switch(e){case"keyup":return $d.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ie=!1;function je(e,o){switch(e){case"compositionend":return he(o);case"keypress":return o.which!==32?null:(fe=!0,ee);case"textInput":return e=o.data,e===ee&&fe?null:e;default:return null}}function ke(e,o){if(ie)return e==="compositionend"||!ae&&ge(e,o)?(e=nd(),md=ld$1=kd$1=null,ie=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return de&&o.locale!=="ko"?null:o.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(e){var o=e&&e.nodeName&&e.nodeName.toLowerCase();return o==="input"?!!le[e.type]:o==="textarea"}function ne(e,o,h,d){Eb$2(d),o=oe(o,"onChange"),0<o.length&&(h=new td("onChange","change",null,h,d),e.push({event:h,listeners:o}))}var pe=null,qe=null;function re(e){se(e,0)}function te(e){var o=ue(e);if(Wa$2(o))return e}function ve(e,o){if(e==="change")return o}var we=!1;if(ia$2){var xe;if(ia$2){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(e){if(e.propertyName==="value"&&te(qe)){var o=[];ne(o,qe,e,xb$2(e)),Jb$2(re,o)}}function Ce(e,o,h){e==="focusin"?(Ae(),pe=o,qe=h,pe.attachEvent("onpropertychange",Be)):e==="focusout"&&Ae()}function De(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return te(qe)}function Ee(e,o){if(e==="click")return te(o)}function Fe(e,o){if(e==="input"||e==="change")return te(o)}function Ge(e,o){return e===o&&(e!==0||1/e===1/o)||e!==e&&o!==o}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(e,o){if(He(e,o))return!0;if(typeof e!="object"||e===null||typeof o!="object"||o===null)return!1;var h=Object.keys(e),d=Object.keys(o);if(h.length!==d.length)return!1;for(d=0;d<h.length;d++){var g=h[d];if(!ja$2.call(o,g)||!He(e[g],o[g]))return!1}return!0}function Je(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ke(e,o){var h=Je(e);e=0;for(var d;h;){if(h.nodeType===3){if(d=e+h.textContent.length,e<=o&&d>=o)return{node:h,offset:o-e};e=d}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=Je(h)}}function Le(e,o){return e&&o?e===o?!0:e&&e.nodeType===3?!1:o&&o.nodeType===3?Le(e,o.parentNode):"contains"in e?e.contains(o):e.compareDocumentPosition?!!(e.compareDocumentPosition(o)&16):!1:!1}function Me(){for(var e=window,o=Xa$2();o instanceof e.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)e=o.contentWindow;else break;o=Xa$2(e.document)}return o}function Ne(e){var o=e&&e.nodeName&&e.nodeName.toLowerCase();return o&&(o==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||o==="textarea"||e.contentEditable==="true")}function Oe(e){var o=Me(),h=e.focusedElem,d=e.selectionRange;if(o!==h&&h&&h.ownerDocument&&Le(h.ownerDocument.documentElement,h)){if(d!==null&&Ne(h)){if(o=d.start,e=d.end,e===void 0&&(e=o),"selectionStart"in h)h.selectionStart=o,h.selectionEnd=Math.min(e,h.value.length);else if(e=(o=h.ownerDocument||document)&&o.defaultView||window,e.getSelection){e=e.getSelection();var g=h.textContent.length,_=Math.min(d.start,g);d=d.end===void 0?_:Math.min(d.end,g),!e.extend&&_>d&&(g=d,d=_,_=g),g=Ke(h,_);var $=Ke(h,d);g&&$&&(e.rangeCount!==1||e.anchorNode!==g.node||e.anchorOffset!==g.offset||e.focusNode!==$.node||e.focusOffset!==$.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),e.removeAllRanges(),_>d?(e.addRange(o),e.extend($.node,$.offset)):(o.setEnd($.node,$.offset),e.addRange(o)))}}for(o=[],e=h;e=e.parentNode;)e.nodeType===1&&o.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<o.length;h++)e=o[h],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pe=ia$2&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(e,o,h){var d=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Te||Qe==null||Qe!==Xa$2(d)||(d=Qe,"selectionStart"in d&&Ne(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Ie(Se,d)||(Se=d,d=oe(Re,"onSelect"),0<d.length&&(o=new td("onSelect","select",null,o,h),e.push({event:o,listeners:d}),o.target=Qe)))}function Ve(e,o){var h={};return h[e.toLowerCase()]=o.toLowerCase(),h["Webkit"+e]="webkit"+o,h["Moz"+e]="moz"+o,h}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia$2&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(e){if(Xe[e])return Xe[e];if(!We[e])return e;var o=We[e],h;for(h in o)if(o.hasOwnProperty(h)&&h in Ye)return Xe[e]=o[h];return e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(e,o){df.set(e,o),fa$2(o,[e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha$2("onMouseEnter",["mouseout","mouseover"]);ha$2("onMouseLeave",["mouseout","mouseover"]);ha$2("onPointerEnter",["pointerout","pointerover"]);ha$2("onPointerLeave",["pointerout","pointerover"]);fa$2("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$2("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$2("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$2("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$2("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$2("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(e,o,h){var d=e.type||"unknown-event";e.currentTarget=h,Ub$1(d,o,void 0,e),e.currentTarget=null}function se(e,o){o=(o&4)!==0;for(var h=0;h<e.length;h++){var d=e[h],g=d.event;d=d.listeners;t:{var _=void 0;if(o)for(var $=d.length-1;0<=$;$--){var j=d[$],_t=j.instance,_e=j.currentTarget;if(j=j.listener,_t!==_&&g.isPropagationStopped())break t;nf(g,j,_e),_=_t}else for($=0;$<d.length;$++){if(j=d[$],_t=j.instance,_e=j.currentTarget,j=j.listener,_t!==_&&g.isPropagationStopped())break t;nf(g,j,_e),_=_t}}}if(Qb$2)throw e=Rb$2,Qb$2=!1,Rb$2=null,e}function D$1(e,o){var h=o[of];h===void 0&&(h=o[of]=new Set);var d=e+"__bubble";h.has(d)||(pf(o,e,2,!1),h.add(d))}function qf(e,o,h){var d=0;o&&(d|=4),pf(h,e,d,o)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(e){if(!e[rf]){e[rf]=!0,da$1.forEach(function(h){h!=="selectionchange"&&(mf.has(h)||qf(h,!1,e),qf(h,!0,e))});var o=e.nodeType===9?e:e.ownerDocument;o===null||o[rf]||(o[rf]=!0,qf("selectionchange",!1,o))}}function pf(e,o,h,d){switch(jd$1(o)){case 1:var g=ed$1;break;case 4:g=gd$1;break;default:g=fd$1}h=g.bind(null,o,h,e),g=void 0,!Lb$2||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),d?g!==void 0?e.addEventListener(o,h,{capture:!0,passive:g}):e.addEventListener(o,h,!0):g!==void 0?e.addEventListener(o,h,{passive:g}):e.addEventListener(o,h,!1)}function hd$1(e,o,h,d,g){var _=d;if(!(o&1)&&!(o&2)&&d!==null)t:for(;;){if(d===null)return;var $=d.tag;if($===3||$===4){var j=d.stateNode.containerInfo;if(j===g||j.nodeType===8&&j.parentNode===g)break;if($===4)for($=d.return;$!==null;){var _t=$.tag;if((_t===3||_t===4)&&(_t=$.stateNode.containerInfo,_t===g||_t.nodeType===8&&_t.parentNode===g))return;$=$.return}for(;j!==null;){if($=Wc$1(j),$===null)return;if(_t=$.tag,_t===5||_t===6){d=_=$;continue t}j=j.parentNode}}d=d.return}Jb$2(function(){var _e=_,_r=xb$2(h),_n=[];t:{var _i=df.get(e);if(_i!==void 0){var _o=td,_a=e;switch(e){case"keypress":if(od(h)===0)break t;case"keydown":case"keyup":_o=Rd;break;case"focusin":_a="focus",_o=Fd;break;case"focusout":_a="blur",_o=Fd;break;case"beforeblur":case"afterblur":_o=Fd;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_o=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_o=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_o=Vd;break;case $e:case af:case bf:_o=Hd;break;case cf:_o=Xd;break;case"scroll":_o=vd;break;case"wheel":_o=Zd;break;case"copy":case"cut":case"paste":_o=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_o=Td}var _u=(o&4)!==0,_f=!_u&&e==="scroll",_h=_u?_i!==null?_i+"Capture":null:_i;_u=[];for(var _d=_e,ty;_d!==null;){ty=_d;var ey=ty.stateNode;if(ty.tag===5&&ey!==null&&(ty=ey,_h!==null&&(ey=Kb$2(_d,_h),ey!=null&&_u.push(tf(_d,ey,ty)))),_f)break;_d=_d.return}0<_u.length&&(_i=new _o(_i,_a,null,h,_r),_n.push({event:_i,listeners:_u}))}}if(!(o&7)){t:{if(_i=e==="mouseover"||e==="pointerover",_o=e==="mouseout"||e==="pointerout",_i&&h!==wb$2&&(_a=h.relatedTarget||h.fromElement)&&(Wc$1(_a)||_a[uf]))break t;if((_o||_i)&&(_i=_r.window===_r?_r:(_i=_r.ownerDocument)?_i.defaultView||_i.parentWindow:window,_o?(_a=h.relatedTarget||h.toElement,_o=_e,_a=_a?Wc$1(_a):null,_a!==null&&(_f=Vb$1(_a),_a!==_f||_a.tag!==5&&_a.tag!==6)&&(_a=null)):(_o=null,_a=_e),_o!==_a)){if(_u=Bd,ey="onMouseLeave",_h="onMouseEnter",_d="mouse",(e==="pointerout"||e==="pointerover")&&(_u=Td,ey="onPointerLeave",_h="onPointerEnter",_d="pointer"),_f=_o==null?_i:ue(_o),ty=_a==null?_i:ue(_a),_i=new _u(ey,_d+"leave",_o,h,_r),_i.target=_f,_i.relatedTarget=ty,ey=null,Wc$1(_r)===_e&&(_u=new _u(_h,_d+"enter",_a,h,_r),_u.target=ty,_u.relatedTarget=_f,ey=_u),_f=ey,_o&&_a)e:{for(_u=_o,_h=_a,_d=0,ty=_u;ty;ty=vf(ty))_d++;for(ty=0,ey=_h;ey;ey=vf(ey))ty++;for(;0<_d-ty;)_u=vf(_u),_d--;for(;0<ty-_d;)_h=vf(_h),ty--;for(;_d--;){if(_u===_h||_h!==null&&_u===_h.alternate)break e;_u=vf(_u),_h=vf(_h)}_u=null}else _u=null;_o!==null&&wf(_n,_i,_o,_u,!1),_a!==null&&_f!==null&&wf(_n,_f,_a,_u,!0)}}t:{if(_i=_e?ue(_e):window,_o=_i.nodeName&&_i.nodeName.toLowerCase(),_o==="select"||_o==="input"&&_i.type==="file")var sy=ve;else if(me(_i))if(we)sy=Fe;else{sy=De;var ny=Ce}else(_o=_i.nodeName)&&_o.toLowerCase()==="input"&&(_i.type==="checkbox"||_i.type==="radio")&&(sy=Ee);if(sy&&(sy=sy(e,_e))){ne(_n,sy,h,_r);break t}ny&&ny(e,_i,_e),e==="focusout"&&(ny=_i._wrapperState)&&ny.controlled&&_i.type==="number"&&cb$2(_i,"number",_i.value)}switch(ny=_e?ue(_e):window,e){case"focusin":(me(ny)||ny.contentEditable==="true")&&(Qe=ny,Re=_e,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(_n,h,_r);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(_n,h,_r)}var uy;if(ae)t:{switch(e){case"compositionstart":var fy="onCompositionStart";break t;case"compositionend":fy="onCompositionEnd";break t;case"compositionupdate":fy="onCompositionUpdate";break t}fy=void 0}else ie?ge(e,h)&&(fy="onCompositionEnd"):e==="keydown"&&h.keyCode===229&&(fy="onCompositionStart");fy&&(de&&h.locale!=="ko"&&(ie||fy!=="onCompositionStart"?fy==="onCompositionEnd"&&ie&&(uy=nd()):(kd$1=_r,ld$1="value"in kd$1?kd$1.value:kd$1.textContent,ie=!0)),ny=oe(_e,fy),0<ny.length&&(fy=new Ld(fy,e,null,h,_r),_n.push({event:fy,listeners:ny}),uy?fy.data=uy:(uy=he(h),uy!==null&&(fy.data=uy)))),(uy=ce?je(e,h):ke(e,h))&&(_e=oe(_e,"onBeforeInput"),0<_e.length&&(_r=new Ld("onBeforeInput","beforeinput",null,h,_r),_n.push({event:_r,listeners:_e}),_r.data=uy))}se(_n,o)})}function tf(e,o,h){return{instance:e,listener:o,currentTarget:h}}function oe(e,o){for(var h=o+"Capture",d=[];e!==null;){var g=e,_=g.stateNode;g.tag===5&&_!==null&&(g=_,_=Kb$2(e,h),_!=null&&d.unshift(tf(e,_,g)),_=Kb$2(e,o),_!=null&&d.push(tf(e,_,g))),e=e.return}return d}function vf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wf(e,o,h,d,g){for(var _=o._reactName,$=[];h!==null&&h!==d;){var j=h,_t=j.alternate,_e=j.stateNode;if(_t!==null&&_t===d)break;j.tag===5&&_e!==null&&(j=_e,g?(_t=Kb$2(h,_),_t!=null&&$.unshift(tf(h,_t,j))):g||(_t=Kb$2(h,_),_t!=null&&$.push(tf(h,_t,j)))),h=h.return}$.length!==0&&e.push({event:o,listeners:$})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(e){return(typeof e=="string"?e:""+e).replace(xf,`
`).replace(yf,"")}function Af(e,o,h){if(o=zf(o),zf(e)!==o&&h)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(e,o){return e==="textarea"||e==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(e){return Hf.resolve(null).then(e).catch(If)}:Ff;function If(e){setTimeout(function(){throw e})}function Kf(e,o){var h=o,d=0;do{var g=h.nextSibling;if(e.removeChild(h),g&&g.nodeType===8)if(h=g.data,h==="/$"){if(d===0){e.removeChild(g),bd$1(o);return}d--}else h!=="$"&&h!=="$?"&&h!=="$!"||d++;h=g}while(h);bd$1(o)}function Lf(e){for(;e!=null;e=e.nextSibling){var o=e.nodeType;if(o===1||o===3)break;if(o===8){if(o=e.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return e}function Mf(e){e=e.previousSibling;for(var o=0;e;){if(e.nodeType===8){var h=e.data;if(h==="$"||h==="$!"||h==="$?"){if(o===0)return e;o--}else h==="/$"&&o++}e=e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc$1(e){var o=e[Of];if(o)return o;for(var h=e.parentNode;h;){if(o=h[uf]||h[Of]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(e=Mf(e);e!==null;){if(h=e[Of])return h;e=Mf(e)}return o}e=h,h=e.parentNode}return null}function Cb$2(e){return e=e[Of]||e[uf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ue(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(p$2(33))}function Db$2(e){return e[Pf]||null}var Sf=[],Tf=-1;function Uf(e){return{current:e}}function E$2(e){0>Tf||(e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(e,o){Tf++,Sf[Tf]=e.current,e.current=o}var Vf={},H$4=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(e,o){var h=e.type.contextTypes;if(!h)return Vf;var d=e.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var g={},_;for(_ in h)g[_]=o[_];return d&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=g),g}function Zf(e){return e=e.childContextTypes,e!=null}function $f(){E$2(Wf),E$2(H$4)}function ag(e,o,h){if(H$4.current!==Vf)throw Error(p$2(168));G$1(H$4,o),G$1(Wf,h)}function bg(e,o,h){var d=e.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return h;d=d.getChildContext();for(var g in d)if(!(g in o))throw Error(p$2(108,Ra$2(e)||"Unknown",g));return A$1({},h,d)}function cg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$4.current,G$1(H$4,e),G$1(Wf,Wf.current),!0}function dg(e,o,h){var d=e.stateNode;if(!d)throw Error(p$2(169));h?(e=bg(e,o,Xf),d.__reactInternalMemoizedMergedChildContext=e,E$2(Wf),E$2(H$4),G$1(H$4,e)):E$2(Wf),G$1(Wf,h)}var eg=null,fg=!1,gg=!1;function hg(e){eg===null?eg=[e]:eg.push(e)}function ig(e){fg=!0,hg(e)}function jg(){if(!gg&&eg!==null){gg=!0;var e=0,o=C$1;try{var h=eg;for(C$1=1;e<h.length;e++){var d=h[e];do d=d(!0);while(d!==null)}eg=null,fg=!1}catch(g){throw eg!==null&&(eg=eg.slice(e+1)),ac$1(fc$1,jg),g}finally{C$1=o,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(e,o){kg[lg++]=ng,kg[lg++]=mg,mg=e,ng=o}function ug(e,o,h){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=e;var d=rg;e=sg;var g=32-oc$1(d)-1;d&=~(1<<g),h+=1;var _=32-oc$1(o)+g;if(30<_){var $=g-g%5;_=(d&(1<<$)-1).toString(32),d>>=$,g-=$,rg=1<<32-oc$1(o)+g|h<<g|d,sg=_+e}else rg=1<<_|h<<g|d,sg=e}function vg(e){e.return!==null&&(tg(e,1),ug(e,1,0))}function wg(e){for(;e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$2=!1,zg=null;function Ag(e,o){var h=Bg(5,null,null,0);h.elementType="DELETED",h.stateNode=o,h.return=e,o=e.deletions,o===null?(e.deletions=[h],e.flags|=16):o.push(h)}function Cg(e,o){switch(e.tag){case 5:var h=e.type;return o=o.nodeType!==1||h.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(e.stateNode=o,xg=e,yg=Lf(o.firstChild),!0):!1;case 6:return o=e.pendingProps===""||o.nodeType!==3?null:o,o!==null?(e.stateNode=o,xg=e,yg=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(h=qg!==null?{id:rg,overflow:sg}:null,e.memoizedState={dehydrated:o,treeContext:h,retryLane:1073741824},h=Bg(18,null,null,0),h.stateNode=o,h.return=e,e.child=h,xg=e,yg=null,!0):!1;default:return!1}}function Dg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eg(e){if(I$2){var o=yg;if(o){var h=o;if(!Cg(e,o)){if(Dg(e))throw Error(p$2(418));o=Lf(h.nextSibling);var d=xg;o&&Cg(e,o)?Ag(d,h):(e.flags=e.flags&-4097|2,I$2=!1,xg=e)}}else{if(Dg(e))throw Error(p$2(418));e.flags=e.flags&-4097|2,I$2=!1,xg=e}}}function Fg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xg=e}function Gg(e){if(e!==xg)return!1;if(!I$2)return Fg(e),I$2=!0,!1;var o;if((o=e.tag!==3)&&!(o=e.tag!==5)&&(o=e.type,o=o!=="head"&&o!=="body"&&!Ef(e.type,e.memoizedProps)),o&&(o=yg)){if(Dg(e))throw Hg(),Error(p$2(418));for(;o;)Ag(e,o),o=Lf(o.nextSibling)}if(Fg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p$2(317));t:{for(e=e.nextSibling,o=0;e;){if(e.nodeType===8){var h=e.data;if(h==="/$"){if(o===0){yg=Lf(e.nextSibling);break t}o--}else h!=="$"&&h!=="$!"&&h!=="$?"||o++}e=e.nextSibling}yg=null}}else yg=xg?Lf(e.stateNode.nextSibling):null;return!0}function Hg(){for(var e=yg;e;)e=Lf(e.nextSibling)}function Ig(){yg=xg=null,I$2=!1}function Jg(e){zg===null?zg=[e]:zg.push(e)}var Kg=ua$2.ReactCurrentBatchConfig;function Lg(e,o){if(e&&e.defaultProps){o=A$1({},o),e=e.defaultProps;for(var h in e)o[h]===void 0&&(o[h]=e[h]);return o}return o}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(e){var o=Mg.current;E$2(Mg),e._currentValue=o}function Sg(e,o,h){for(;e!==null;){var d=e.alternate;if((e.childLanes&o)!==o?(e.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),e===h)break;e=e.return}}function Tg(e,o){Ng=e,Pg=Og=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&o&&(Ug=!0),e.firstContext=null)}function Vg(e){var o=e._currentValue;if(Pg!==e)if(e={context:e,memoizedValue:o,next:null},Og===null){if(Ng===null)throw Error(p$2(308));Og=e,Ng.dependencies={lanes:0,firstContext:e}}else Og=Og.next=e;return o}var Wg=null;function Xg(e){Wg===null?Wg=[e]:Wg.push(e)}function Yg(e,o,h,d){var g=o.interleaved;return g===null?(h.next=h,Xg(o)):(h.next=g.next,g.next=h),o.interleaved=h,Zg(e,d)}function Zg(e,o){e.lanes|=o;var h=e.alternate;for(h!==null&&(h.lanes|=o),h=e,e=e.return;e!==null;)e.childLanes|=o,h=e.alternate,h!==null&&(h.childLanes|=o),h=e,e=e.return;return h.tag===3?h.stateNode:null}var $g=!1;function ah(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(e,o){e=e.updateQueue,o.updateQueue===e&&(o.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ch(e,o){return{eventTime:e,lane:o,tag:0,payload:null,callback:null,next:null}}function dh(e,o,h){var d=e.updateQueue;if(d===null)return null;if(d=d.shared,K$2&2){var g=d.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),d.pending=o,Zg(e,h)}return g=d.interleaved,g===null?(o.next=o,Xg(d)):(o.next=g.next,g.next=o),d.interleaved=o,Zg(e,h)}function eh(e,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194240)!==0)){var d=o.lanes;d&=e.pendingLanes,h|=d,o.lanes=h,Cc$1(e,h)}}function fh(e,o){var h=e.updateQueue,d=e.alternate;if(d!==null&&(d=d.updateQueue,h===d)){var g=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var $={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};_===null?g=_=$:_=_.next=$,h=h.next}while(h!==null);_===null?g=_=o:_=_.next=o}else g=_=o;h={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:d.shared,effects:d.effects},e.updateQueue=h;return}e=h.lastBaseUpdate,e===null?h.firstBaseUpdate=o:e.next=o,h.lastBaseUpdate=o}function gh(e,o,h,d){var g=e.updateQueue;$g=!1;var _=g.firstBaseUpdate,$=g.lastBaseUpdate,j=g.shared.pending;if(j!==null){g.shared.pending=null;var _t=j,_e=_t.next;_t.next=null,$===null?_=_e:$.next=_e,$=_t;var _r=e.alternate;_r!==null&&(_r=_r.updateQueue,j=_r.lastBaseUpdate,j!==$&&(j===null?_r.firstBaseUpdate=_e:j.next=_e,_r.lastBaseUpdate=_t))}if(_!==null){var _n=g.baseState;$=0,_r=_e=_t=null,j=_;do{var _i=j.lane,_o=j.eventTime;if((d&_i)===_i){_r!==null&&(_r=_r.next={eventTime:_o,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});t:{var _a=e,_u=j;switch(_i=o,_o=h,_u.tag){case 1:if(_a=_u.payload,typeof _a=="function"){_n=_a.call(_o,_n,_i);break t}_n=_a;break t;case 3:_a.flags=_a.flags&-65537|128;case 0:if(_a=_u.payload,_i=typeof _a=="function"?_a.call(_o,_n,_i):_a,_i==null)break t;_n=A$1({},_n,_i);break t;case 2:$g=!0}}j.callback!==null&&j.lane!==0&&(e.flags|=64,_i=g.effects,_i===null?g.effects=[j]:_i.push(j))}else _o={eventTime:_o,lane:_i,tag:j.tag,payload:j.payload,callback:j.callback,next:null},_r===null?(_e=_r=_o,_t=_n):_r=_r.next=_o,$|=_i;if(j=j.next,j===null){if(j=g.shared.pending,j===null)break;_i=j,j=_i.next,_i.next=null,g.lastBaseUpdate=_i,g.shared.pending=null}}while(!0);if(_r===null&&(_t=_n),g.baseState=_t,g.firstBaseUpdate=_e,g.lastBaseUpdate=_r,o=g.shared.interleaved,o!==null){g=o;do $|=g.lane,g=g.next;while(g!==o)}else _===null&&(g.shared.lanes=0);hh|=$,e.lanes=$,e.memoizedState=_n}}function ih(e,o,h){if(e=o.effects,o.effects=null,e!==null)for(o=0;o<e.length;o++){var d=e[o],g=d.callback;if(g!==null){if(d.callback=null,d=h,typeof g!="function")throw Error(p$2(191,g));g.call(d)}}}var jh=new aa$2.Component().refs;function kh(e,o,h,d){o=e.memoizedState,h=h(d,o),h=h==null?o:A$1({},o,h),e.memoizedState=h,e.lanes===0&&(e.updateQueue.baseState=h)}var nh={isMounted:function(e){return(e=e._reactInternals)?Vb$1(e)===e:!1},enqueueSetState:function(e,o,h){e=e._reactInternals;var d=L$2(),g=lh(e),_=ch(d,g);_.payload=o,h!=null&&(_.callback=h),o=dh(e,_,g),o!==null&&(mh(o,e,g,d),eh(o,e,g))},enqueueReplaceState:function(e,o,h){e=e._reactInternals;var d=L$2(),g=lh(e),_=ch(d,g);_.tag=1,_.payload=o,h!=null&&(_.callback=h),o=dh(e,_,g),o!==null&&(mh(o,e,g,d),eh(o,e,g))},enqueueForceUpdate:function(e,o){e=e._reactInternals;var h=L$2(),d=lh(e),g=ch(h,d);g.tag=2,o!=null&&(g.callback=o),o=dh(e,g,d),o!==null&&(mh(o,e,d,h),eh(o,e,d))}};function oh(e,o,h,d,g,_,$){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(d,_,$):o.prototype&&o.prototype.isPureReactComponent?!Ie(h,d)||!Ie(g,_):!0}function ph(e,o,h){var d=!1,g=Vf,_=o.contextType;return typeof _=="object"&&_!==null?_=Vg(_):(g=Zf(o)?Xf:H$4.current,d=o.contextTypes,_=(d=d!=null)?Yf(e,g):Vf),o=new o(h,_),e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=nh,e.stateNode=o,o._reactInternals=e,d&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=g,e.__reactInternalMemoizedMaskedChildContext=_),o}function qh(e,o,h,d){e=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,d),o.state!==e&&nh.enqueueReplaceState(o,o.state,null)}function rh(e,o,h,d){var g=e.stateNode;g.props=h,g.state=e.memoizedState,g.refs=jh,ah(e);var _=o.contextType;typeof _=="object"&&_!==null?g.context=Vg(_):(_=Zf(o)?Xf:H$4.current,g.context=Yf(e,_)),g.state=e.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(kh(e,o,_,h),g.state=e.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&nh.enqueueReplaceState(g,g.state,null),gh(e,h,g,d),g.state=e.memoizedState),typeof g.componentDidMount=="function"&&(e.flags|=4194308)}function sh(e,o,h){if(e=h.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(p$2(309));var d=h.stateNode}if(!d)throw Error(p$2(147,e));var g=d,_=""+e;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===_?o.ref:(o=function($){var j=g.refs;j===jh&&(j=g.refs={}),$===null?delete j[_]:j[_]=$},o._stringRef=_,o)}if(typeof e!="string")throw Error(p$2(284));if(!h._owner)throw Error(p$2(290,e))}return e}function th(e,o){throw e=Object.prototype.toString.call(o),Error(p$2(31,e==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":e))}function uh(e){var o=e._init;return o(e._payload)}function vh(e){function o(_h,_d){if(e){var ty=_h.deletions;ty===null?(_h.deletions=[_d],_h.flags|=16):ty.push(_d)}}function h(_h,_d){if(!e)return null;for(;_d!==null;)o(_h,_d),_d=_d.sibling;return null}function d(_h,_d){for(_h=new Map;_d!==null;)_d.key!==null?_h.set(_d.key,_d):_h.set(_d.index,_d),_d=_d.sibling;return _h}function g(_h,_d){return _h=wh(_h,_d),_h.index=0,_h.sibling=null,_h}function _(_h,_d,ty){return _h.index=ty,e?(ty=_h.alternate,ty!==null?(ty=ty.index,ty<_d?(_h.flags|=2,_d):ty):(_h.flags|=2,_d)):(_h.flags|=1048576,_d)}function $(_h){return e&&_h.alternate===null&&(_h.flags|=2),_h}function j(_h,_d,ty,ey){return _d===null||_d.tag!==6?(_d=xh(ty,_h.mode,ey),_d.return=_h,_d):(_d=g(_d,ty),_d.return=_h,_d)}function _t(_h,_d,ty,ey){var sy=ty.type;return sy===ya$2?_r(_h,_d,ty.props.children,ey,ty.key):_d!==null&&(_d.elementType===sy||typeof sy=="object"&&sy!==null&&sy.$$typeof===Ha$2&&uh(sy)===_d.type)?(ey=g(_d,ty.props),ey.ref=sh(_h,_d,ty),ey.return=_h,ey):(ey=yh(ty.type,ty.key,ty.props,null,_h.mode,ey),ey.ref=sh(_h,_d,ty),ey.return=_h,ey)}function _e(_h,_d,ty,ey){return _d===null||_d.tag!==4||_d.stateNode.containerInfo!==ty.containerInfo||_d.stateNode.implementation!==ty.implementation?(_d=zh(ty,_h.mode,ey),_d.return=_h,_d):(_d=g(_d,ty.children||[]),_d.return=_h,_d)}function _r(_h,_d,ty,ey,sy){return _d===null||_d.tag!==7?(_d=Ah(ty,_h.mode,ey,sy),_d.return=_h,_d):(_d=g(_d,ty),_d.return=_h,_d)}function _n(_h,_d,ty){if(typeof _d=="string"&&_d!==""||typeof _d=="number")return _d=xh(""+_d,_h.mode,ty),_d.return=_h,_d;if(typeof _d=="object"&&_d!==null){switch(_d.$$typeof){case va$2:return ty=yh(_d.type,_d.key,_d.props,null,_h.mode,ty),ty.ref=sh(_h,null,_d),ty.return=_h,ty;case wa$2:return _d=zh(_d,_h.mode,ty),_d.return=_h,_d;case Ha$2:var ey=_d._init;return _n(_h,ey(_d._payload),ty)}if(eb$2(_d)||Ka$2(_d))return _d=Ah(_d,_h.mode,ty,null),_d.return=_h,_d;th(_h,_d)}return null}function _i(_h,_d,ty,ey){var sy=_d!==null?_d.key:null;if(typeof ty=="string"&&ty!==""||typeof ty=="number")return sy!==null?null:j(_h,_d,""+ty,ey);if(typeof ty=="object"&&ty!==null){switch(ty.$$typeof){case va$2:return ty.key===sy?_t(_h,_d,ty,ey):null;case wa$2:return ty.key===sy?_e(_h,_d,ty,ey):null;case Ha$2:return sy=ty._init,_i(_h,_d,sy(ty._payload),ey)}if(eb$2(ty)||Ka$2(ty))return sy!==null?null:_r(_h,_d,ty,ey,null);th(_h,ty)}return null}function _o(_h,_d,ty,ey,sy){if(typeof ey=="string"&&ey!==""||typeof ey=="number")return _h=_h.get(ty)||null,j(_d,_h,""+ey,sy);if(typeof ey=="object"&&ey!==null){switch(ey.$$typeof){case va$2:return _h=_h.get(ey.key===null?ty:ey.key)||null,_t(_d,_h,ey,sy);case wa$2:return _h=_h.get(ey.key===null?ty:ey.key)||null,_e(_d,_h,ey,sy);case Ha$2:var ny=ey._init;return _o(_h,_d,ty,ny(ey._payload),sy)}if(eb$2(ey)||Ka$2(ey))return _h=_h.get(ty)||null,_r(_d,_h,ey,sy,null);th(_d,ey)}return null}function _a(_h,_d,ty,ey){for(var sy=null,ny=null,uy=_d,fy=_d=0,yy=null;uy!==null&&fy<ty.length;fy++){uy.index>fy?(yy=uy,uy=null):yy=uy.sibling;var xy=_i(_h,uy,ty[fy],ey);if(xy===null){uy===null&&(uy=yy);break}e&&uy&&xy.alternate===null&&o(_h,uy),_d=_(xy,_d,fy),ny===null?sy=xy:ny.sibling=xy,ny=xy,uy=yy}if(fy===ty.length)return h(_h,uy),I$2&&tg(_h,fy),sy;if(uy===null){for(;fy<ty.length;fy++)uy=_n(_h,ty[fy],ey),uy!==null&&(_d=_(uy,_d,fy),ny===null?sy=uy:ny.sibling=uy,ny=uy);return I$2&&tg(_h,fy),sy}for(uy=d(_h,uy);fy<ty.length;fy++)yy=_o(uy,_h,fy,ty[fy],ey),yy!==null&&(e&&yy.alternate!==null&&uy.delete(yy.key===null?fy:yy.key),_d=_(yy,_d,fy),ny===null?sy=yy:ny.sibling=yy,ny=yy);return e&&uy.forEach(function(Ey){return o(_h,Ey)}),I$2&&tg(_h,fy),sy}function _u(_h,_d,ty,ey){var sy=Ka$2(ty);if(typeof sy!="function")throw Error(p$2(150));if(ty=sy.call(ty),ty==null)throw Error(p$2(151));for(var ny=sy=null,uy=_d,fy=_d=0,yy=null,xy=ty.next();uy!==null&&!xy.done;fy++,xy=ty.next()){uy.index>fy?(yy=uy,uy=null):yy=uy.sibling;var Ey=_i(_h,uy,xy.value,ey);if(Ey===null){uy===null&&(uy=yy);break}e&&uy&&Ey.alternate===null&&o(_h,uy),_d=_(Ey,_d,fy),ny===null?sy=Ey:ny.sibling=Ey,ny=Ey,uy=yy}if(xy.done)return h(_h,uy),I$2&&tg(_h,fy),sy;if(uy===null){for(;!xy.done;fy++,xy=ty.next())xy=_n(_h,xy.value,ey),xy!==null&&(_d=_(xy,_d,fy),ny===null?sy=xy:ny.sibling=xy,ny=xy);return I$2&&tg(_h,fy),sy}for(uy=d(_h,uy);!xy.done;fy++,xy=ty.next())xy=_o(uy,_h,fy,xy.value,ey),xy!==null&&(e&&xy.alternate!==null&&uy.delete(xy.key===null?fy:xy.key),_d=_(xy,_d,fy),ny===null?sy=xy:ny.sibling=xy,ny=xy);return e&&uy.forEach(function(Oy){return o(_h,Oy)}),I$2&&tg(_h,fy),sy}function _f(_h,_d,ty,ey){if(typeof ty=="object"&&ty!==null&&ty.type===ya$2&&ty.key===null&&(ty=ty.props.children),typeof ty=="object"&&ty!==null){switch(ty.$$typeof){case va$2:t:{for(var sy=ty.key,ny=_d;ny!==null;){if(ny.key===sy){if(sy=ty.type,sy===ya$2){if(ny.tag===7){h(_h,ny.sibling),_d=g(ny,ty.props.children),_d.return=_h,_h=_d;break t}}else if(ny.elementType===sy||typeof sy=="object"&&sy!==null&&sy.$$typeof===Ha$2&&uh(sy)===ny.type){h(_h,ny.sibling),_d=g(ny,ty.props),_d.ref=sh(_h,ny,ty),_d.return=_h,_h=_d;break t}h(_h,ny);break}else o(_h,ny);ny=ny.sibling}ty.type===ya$2?(_d=Ah(ty.props.children,_h.mode,ey,ty.key),_d.return=_h,_h=_d):(ey=yh(ty.type,ty.key,ty.props,null,_h.mode,ey),ey.ref=sh(_h,_d,ty),ey.return=_h,_h=ey)}return $(_h);case wa$2:t:{for(ny=ty.key;_d!==null;){if(_d.key===ny)if(_d.tag===4&&_d.stateNode.containerInfo===ty.containerInfo&&_d.stateNode.implementation===ty.implementation){h(_h,_d.sibling),_d=g(_d,ty.children||[]),_d.return=_h,_h=_d;break t}else{h(_h,_d);break}else o(_h,_d);_d=_d.sibling}_d=zh(ty,_h.mode,ey),_d.return=_h,_h=_d}return $(_h);case Ha$2:return ny=ty._init,_f(_h,_d,ny(ty._payload),ey)}if(eb$2(ty))return _a(_h,_d,ty,ey);if(Ka$2(ty))return _u(_h,_d,ty,ey);th(_h,ty)}return typeof ty=="string"&&ty!==""||typeof ty=="number"?(ty=""+ty,_d!==null&&_d.tag===6?(h(_h,_d.sibling),_d=g(_d,ty),_d.return=_h,_h=_d):(h(_h,_d),_d=xh(ty,_h.mode,ey),_d.return=_h,_h=_d),$(_h)):h(_h,_d)}return _f}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(e){if(e===Dh)throw Error(p$2(174));return e}function Ih(e,o){switch(G$1(Gh,o),G$1(Fh,e),G$1(Eh,Dh),e=o.nodeType,e){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:lb$2(null,"");break;default:e=e===8?o.parentNode:o,o=e.namespaceURI||null,e=e.tagName,o=lb$2(o,e)}E$2(Eh),G$1(Eh,o)}function Jh(){E$2(Eh),E$2(Fh),E$2(Gh)}function Kh(e){Hh(Gh.current);var o=Hh(Eh.current),h=lb$2(o,e.type);o!==h&&(G$1(Fh,e),G$1(Eh,h))}function Lh(e){Fh.current===e&&(E$2(Eh),E$2(Fh))}var M$2=Uf(0);function Mh(e){for(var o=e;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break;for(;o.sibling===null;){if(o.return===null||o.return===e)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Nh=[];function Oh(){for(var e=0;e<Nh.length;e++)Nh[e]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua$2.ReactCurrentDispatcher,Qh=ua$2.ReactCurrentBatchConfig,Rh=0,N$2=null,O$2=null,P$2=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$2(){throw Error(p$2(321))}function Wh(e,o){if(o===null)return!1;for(var h=0;h<o.length&&h<e.length;h++)if(!He(e[h],o[h]))return!1;return!0}function Xh(e,o,h,d,g,_){if(Rh=_,N$2=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ph.current=e===null||e.memoizedState===null?Yh:Zh,e=h(d,g),Th){_=0;do{if(Th=!1,Uh=0,25<=_)throw Error(p$2(301));_+=1,P$2=O$2=null,o.updateQueue=null,Ph.current=$h,e=h(d,g)}while(Th)}if(Ph.current=ai,o=O$2!==null&&O$2.next!==null,Rh=0,P$2=O$2=N$2=null,Sh=!1,o)throw Error(p$2(300));return e}function bi(){var e=Uh!==0;return Uh=0,e}function ci(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$2===null?N$2.memoizedState=P$2=e:P$2=P$2.next=e,P$2}function di(){if(O$2===null){var e=N$2.alternate;e=e!==null?e.memoizedState:null}else e=O$2.next;var o=P$2===null?N$2.memoizedState:P$2.next;if(o!==null)P$2=o,O$2=e;else{if(e===null)throw Error(p$2(310));O$2=e,e={memoizedState:O$2.memoizedState,baseState:O$2.baseState,baseQueue:O$2.baseQueue,queue:O$2.queue,next:null},P$2===null?N$2.memoizedState=P$2=e:P$2=P$2.next=e}return P$2}function ei(e,o){return typeof o=="function"?o(e):o}function fi(e){var o=di(),h=o.queue;if(h===null)throw Error(p$2(311));h.lastRenderedReducer=e;var d=O$2,g=d.baseQueue,_=h.pending;if(_!==null){if(g!==null){var $=g.next;g.next=_.next,_.next=$}d.baseQueue=g=_,h.pending=null}if(g!==null){_=g.next,d=d.baseState;var j=$=null,_t=null,_e=_;do{var _r=_e.lane;if((Rh&_r)===_r)_t!==null&&(_t=_t.next={lane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),d=_e.hasEagerState?_e.eagerState:e(d,_e.action);else{var _n={lane:_r,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null};_t===null?(j=_t=_n,$=d):_t=_t.next=_n,N$2.lanes|=_r,hh|=_r}_e=_e.next}while(_e!==null&&_e!==_);_t===null?$=d:_t.next=j,He(d,o.memoizedState)||(Ug=!0),o.memoizedState=d,o.baseState=$,o.baseQueue=_t,h.lastRenderedState=d}if(e=h.interleaved,e!==null){g=e;do _=g.lane,N$2.lanes|=_,hh|=_,g=g.next;while(g!==e)}else g===null&&(h.lanes=0);return[o.memoizedState,h.dispatch]}function gi(e){var o=di(),h=o.queue;if(h===null)throw Error(p$2(311));h.lastRenderedReducer=e;var d=h.dispatch,g=h.pending,_=o.memoizedState;if(g!==null){h.pending=null;var $=g=g.next;do _=e(_,$.action),$=$.next;while($!==g);He(_,o.memoizedState)||(Ug=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),h.lastRenderedState=_}return[_,d]}function hi(){}function ii(e,o){var h=N$2,d=di(),g=o(),_=!He(d.memoizedState,g);if(_&&(d.memoizedState=g,Ug=!0),d=d.queue,ji(ki.bind(null,h,d,e),[e]),d.getSnapshot!==o||_||P$2!==null&&P$2.memoizedState.tag&1){if(h.flags|=2048,li(9,mi.bind(null,h,d,g,o),void 0,null),R$2===null)throw Error(p$2(349));Rh&30||ni(h,o,g)}return g}function ni(e,o,h){e.flags|=16384,e={getSnapshot:o,value:h},o=N$2.updateQueue,o===null?(o={lastEffect:null,stores:null},N$2.updateQueue=o,o.stores=[e]):(h=o.stores,h===null?o.stores=[e]:h.push(e))}function mi(e,o,h,d){o.value=h,o.getSnapshot=d,oi(o)&&pi(e)}function ki(e,o,h){return h(function(){oi(o)&&pi(e)})}function oi(e){var o=e.getSnapshot;e=e.value;try{var h=o();return!He(e,h)}catch{return!0}}function pi(e){var o=Zg(e,1);o!==null&&mh(o,e,1,-1)}function qi(e){var o=ci();return typeof e=="function"&&(e=e()),o.memoizedState=o.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:e},o.queue=e,e=e.dispatch=ri.bind(null,N$2,e),[o.memoizedState,e]}function li(e,o,h,d){return e={tag:e,create:o,destroy:h,deps:d,next:null},o=N$2.updateQueue,o===null?(o={lastEffect:null,stores:null},N$2.updateQueue=o,o.lastEffect=e.next=e):(h=o.lastEffect,h===null?o.lastEffect=e.next=e:(d=h.next,h.next=e,e.next=d,o.lastEffect=e)),e}function si(){return di().memoizedState}function ti(e,o,h,d){var g=ci();N$2.flags|=e,g.memoizedState=li(1|o,h,void 0,d===void 0?null:d)}function ui(e,o,h,d){var g=di();d=d===void 0?null:d;var _=void 0;if(O$2!==null){var $=O$2.memoizedState;if(_=$.destroy,d!==null&&Wh(d,$.deps)){g.memoizedState=li(o,h,_,d);return}}N$2.flags|=e,g.memoizedState=li(1|o,h,_,d)}function vi(e,o){return ti(8390656,8,e,o)}function ji(e,o){return ui(2048,8,e,o)}function wi(e,o){return ui(4,2,e,o)}function xi(e,o){return ui(4,4,e,o)}function yi(e,o){if(typeof o=="function")return e=e(),o(e),function(){o(null)};if(o!=null)return e=e(),o.current=e,function(){o.current=null}}function zi(e,o,h){return h=h!=null?h.concat([e]):null,ui(4,4,yi.bind(null,o,e),h)}function Ai(){}function Bi(e,o){var h=di();o=o===void 0?null:o;var d=h.memoizedState;return d!==null&&o!==null&&Wh(o,d[1])?d[0]:(h.memoizedState=[e,o],e)}function Ci(e,o){var h=di();o=o===void 0?null:o;var d=h.memoizedState;return d!==null&&o!==null&&Wh(o,d[1])?d[0]:(e=e(),h.memoizedState=[e,o],e)}function Di(e,o,h){return Rh&21?(He(h,o)||(h=yc$1(),N$2.lanes|=h,hh|=h,e.baseState=!0),o):(e.baseState&&(e.baseState=!1,Ug=!0),e.memoizedState=h)}function Ei(e,o){var h=C$1;C$1=h!==0&&4>h?h:4,e(!0);var d=Qh.transition;Qh.transition={};try{e(!1),o()}finally{C$1=h,Qh.transition=d}}function Fi(){return di().memoizedState}function Gi(e,o,h){var d=lh(e);if(h={lane:d,action:h,hasEagerState:!1,eagerState:null,next:null},Hi(e))Ii(o,h);else if(h=Yg(e,o,h,d),h!==null){var g=L$2();mh(h,e,d,g),Ji(h,o,d)}}function ri(e,o,h){var d=lh(e),g={lane:d,action:h,hasEagerState:!1,eagerState:null,next:null};if(Hi(e))Ii(o,g);else{var _=e.alternate;if(e.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var $=o.lastRenderedState,j=_($,h);if(g.hasEagerState=!0,g.eagerState=j,He(j,$)){var _t=o.interleaved;_t===null?(g.next=g,Xg(o)):(g.next=_t.next,_t.next=g),o.interleaved=g;return}}catch{}finally{}h=Yg(e,o,g,d),h!==null&&(g=L$2(),mh(h,e,d,g),Ji(h,o,d))}}function Hi(e){var o=e.alternate;return e===N$2||o!==null&&o===N$2}function Ii(e,o){Th=Sh=!0;var h=e.pending;h===null?o.next=o:(o.next=h.next,h.next=o),e.pending=o}function Ji(e,o,h){if(h&4194240){var d=o.lanes;d&=e.pendingLanes,h|=d,o.lanes=h,Cc$1(e,h)}}var ai={readContext:Vg,useCallback:Q$2,useContext:Q$2,useEffect:Q$2,useImperativeHandle:Q$2,useInsertionEffect:Q$2,useLayoutEffect:Q$2,useMemo:Q$2,useReducer:Q$2,useRef:Q$2,useState:Q$2,useDebugValue:Q$2,useDeferredValue:Q$2,useTransition:Q$2,useMutableSource:Q$2,useSyncExternalStore:Q$2,useId:Q$2,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(e,o){return ci().memoizedState=[e,o===void 0?null:o],e},useContext:Vg,useEffect:vi,useImperativeHandle:function(e,o,h){return h=h!=null?h.concat([e]):null,ti(4194308,4,yi.bind(null,o,e),h)},useLayoutEffect:function(e,o){return ti(4194308,4,e,o)},useInsertionEffect:function(e,o){return ti(4,2,e,o)},useMemo:function(e,o){var h=ci();return o=o===void 0?null:o,e=e(),h.memoizedState=[e,o],e},useReducer:function(e,o,h){var d=ci();return o=h!==void 0?h(o):o,d.memoizedState=d.baseState=o,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},d.queue=e,e=e.dispatch=Gi.bind(null,N$2,e),[d.memoizedState,e]},useRef:function(e){var o=ci();return e={current:e},o.memoizedState=e},useState:qi,useDebugValue:Ai,useDeferredValue:function(e){return ci().memoizedState=e},useTransition:function(){var e=qi(!1),o=e[0];return e=Ei.bind(null,e[1]),ci().memoizedState=e,[o,e]},useMutableSource:function(){},useSyncExternalStore:function(e,o,h){var d=N$2,g=ci();if(I$2){if(h===void 0)throw Error(p$2(407));h=h()}else{if(h=o(),R$2===null)throw Error(p$2(349));Rh&30||ni(d,o,h)}g.memoizedState=h;var _={value:h,getSnapshot:o};return g.queue=_,vi(ki.bind(null,d,_,e),[e]),d.flags|=2048,li(9,mi.bind(null,d,_,h,o),void 0,null),h},useId:function(){var e=ci(),o=R$2.identifierPrefix;if(I$2){var h=sg,d=rg;h=(d&~(1<<32-oc$1(d)-1)).toString(32)+h,o=":"+o+"R"+h,h=Uh++,0<h&&(o+="H"+h.toString(32)),o+=":"}else h=Vh++,o=":"+o+"r"+h.toString(32)+":";return e.memoizedState=o},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(e){var o=di();return Di(o,O$2.memoizedState,e)},useTransition:function(){var e=fi(ei)[0],o=di().memoizedState;return[e,o]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(e){var o=di();return O$2===null?o.memoizedState=e:Di(o,O$2.memoizedState,e)},useTransition:function(){var e=gi(ei)[0],o=di().memoizedState;return[e,o]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(e,o){try{var h="",d=o;do h+=Pa$2(d),d=d.return;while(d);var g=h}catch(_){g=`
Error generating stack: `+_.message+`
`+_.stack}return{value:e,source:o,stack:g,digest:null}}function Li(e,o,h){return{value:e,source:null,stack:h??null,digest:o??null}}function Mi(e,o){try{console.error(o.value)}catch(h){setTimeout(function(){throw h})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(e,o,h){h=ch(-1,h),h.tag=3,h.payload={element:null};var d=o.value;return h.callback=function(){Pi||(Pi=!0,Qi=d),Mi(e,o)},h}function Ri(e,o,h){h=ch(-1,h),h.tag=3;var d=e.type.getDerivedStateFromError;if(typeof d=="function"){var g=o.value;h.payload=function(){return d(g)},h.callback=function(){Mi(e,o)}}var _=e.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(h.callback=function(){Mi(e,o),typeof d!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var $=o.stack;this.componentDidCatch(o.value,{componentStack:$!==null?$:""})}),h}function Ti(e,o,h){var d=e.pingCache;if(d===null){d=e.pingCache=new Ni;var g=new Set;d.set(o,g)}else g=d.get(o),g===void 0&&(g=new Set,d.set(o,g));g.has(h)||(g.add(h),e=Ui.bind(null,e,o,h),o.then(e,e))}function Vi(e){do{var o;if((o=e.tag===13)&&(o=e.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return e;e=e.return}while(e!==null);return null}function Wi(e,o,h,d,g){return e.mode&1?(e.flags|=65536,e.lanes=g,e):(e===o?e.flags|=65536:(e.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(o=ch(-1,1),o.tag=2,dh(h,o,1))),h.lanes|=1),e)}var Xi=ua$2.ReactCurrentOwner,Ug=!1;function Yi(e,o,h,d){o.child=e===null?Ch(o,null,h,d):Bh(o,e.child,h,d)}function Zi(e,o,h,d,g){h=h.render;var _=o.ref;return Tg(o,g),d=Xh(e,o,h,d,_,g),h=bi(),e!==null&&!Ug?(o.updateQueue=e.updateQueue,o.flags&=-2053,e.lanes&=~g,$i(e,o,g)):(I$2&&h&&vg(o),o.flags|=1,Yi(e,o,d,g),o.child)}function aj(e,o,h,d,g){if(e===null){var _=h.type;return typeof _=="function"&&!bj(_)&&_.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(o.tag=15,o.type=_,cj(e,o,_,d,g)):(e=yh(h.type,null,d,o,o.mode,g),e.ref=o.ref,e.return=o,o.child=e)}if(_=e.child,!(e.lanes&g)){var $=_.memoizedProps;if(h=h.compare,h=h!==null?h:Ie,h($,d)&&e.ref===o.ref)return $i(e,o,g)}return o.flags|=1,e=wh(_,d),e.ref=o.ref,e.return=o,o.child=e}function cj(e,o,h,d,g){if(e!==null){var _=e.memoizedProps;if(Ie(_,d)&&e.ref===o.ref)if(Ug=!1,o.pendingProps=d=_,(e.lanes&g)!==0)e.flags&131072&&(Ug=!0);else return o.lanes=e.lanes,$i(e,o,g)}return dj(e,o,h,d,g)}function ej(e,o,h){var d=o.pendingProps,g=d.children,_=e!==null?e.memoizedState:null;if(d.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=h;else{if(!(h&1073741824))return e=_!==null?_.baseLanes|h:h,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:e,cachePool:null,transitions:null},o.updateQueue=null,G$1(fj,gj),gj|=e,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=_!==null?_.baseLanes:h,G$1(fj,gj),gj|=d}else _!==null?(d=_.baseLanes|h,o.memoizedState=null):d=h,G$1(fj,gj),gj|=d;return Yi(e,o,g,h),o.child}function hj(e,o){var h=o.ref;(e===null&&h!==null||e!==null&&e.ref!==h)&&(o.flags|=512,o.flags|=2097152)}function dj(e,o,h,d,g){var _=Zf(h)?Xf:H$4.current;return _=Yf(o,_),Tg(o,g),h=Xh(e,o,h,d,_,g),d=bi(),e!==null&&!Ug?(o.updateQueue=e.updateQueue,o.flags&=-2053,e.lanes&=~g,$i(e,o,g)):(I$2&&d&&vg(o),o.flags|=1,Yi(e,o,h,g),o.child)}function ij(e,o,h,d,g){if(Zf(h)){var _=!0;cg(o)}else _=!1;if(Tg(o,g),o.stateNode===null)jj(e,o),ph(o,h,d),rh(o,h,d,g),d=!0;else if(e===null){var $=o.stateNode,j=o.memoizedProps;$.props=j;var _t=$.context,_e=h.contextType;typeof _e=="object"&&_e!==null?_e=Vg(_e):(_e=Zf(h)?Xf:H$4.current,_e=Yf(o,_e));var _r=h.getDerivedStateFromProps,_n=typeof _r=="function"||typeof $.getSnapshotBeforeUpdate=="function";_n||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(j!==d||_t!==_e)&&qh(o,$,d,_e),$g=!1;var _i=o.memoizedState;$.state=_i,gh(o,d,$,g),_t=o.memoizedState,j!==d||_i!==_t||Wf.current||$g?(typeof _r=="function"&&(kh(o,h,_r,d),_t=o.memoizedState),(j=$g||oh(o,h,j,d,_i,_t,_e))?(_n||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(o.flags|=4194308)):(typeof $.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=_t),$.props=d,$.state=_t,$.context=_e,d=j):(typeof $.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{$=o.stateNode,bh(e,o),j=o.memoizedProps,_e=o.type===o.elementType?j:Lg(o.type,j),$.props=_e,_n=o.pendingProps,_i=$.context,_t=h.contextType,typeof _t=="object"&&_t!==null?_t=Vg(_t):(_t=Zf(h)?Xf:H$4.current,_t=Yf(o,_t));var _o=h.getDerivedStateFromProps;(_r=typeof _o=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(j!==_n||_i!==_t)&&qh(o,$,d,_t),$g=!1,_i=o.memoizedState,$.state=_i,gh(o,d,$,g);var _a=o.memoizedState;j!==_n||_i!==_a||Wf.current||$g?(typeof _o=="function"&&(kh(o,h,_o,d),_a=o.memoizedState),(_e=$g||oh(o,h,_e,d,_i,_a,_t)||!1)?(_r||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(d,_a,_t),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(d,_a,_t)),typeof $.componentDidUpdate=="function"&&(o.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof $.componentDidUpdate!="function"||j===e.memoizedProps&&_i===e.memoizedState||(o.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&_i===e.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=_a),$.props=d,$.state=_a,$.context=_t,d=_e):(typeof $.componentDidUpdate!="function"||j===e.memoizedProps&&_i===e.memoizedState||(o.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&_i===e.memoizedState||(o.flags|=1024),d=!1)}return kj(e,o,h,d,_,g)}function kj(e,o,h,d,g,_){hj(e,o);var $=(o.flags&128)!==0;if(!d&&!$)return g&&dg(o,h,!1),$i(e,o,_);d=o.stateNode,Xi.current=o;var j=$&&typeof h.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,e!==null&&$?(o.child=Bh(o,e.child,null,_),o.child=Bh(o,null,j,_)):Yi(e,o,j,_),o.memoizedState=d.state,g&&dg(o,h,!0),o.child}function lj(e){var o=e.stateNode;o.pendingContext?ag(e,o.pendingContext,o.pendingContext!==o.context):o.context&&ag(e,o.context,!1),Ih(e,o.containerInfo)}function mj(e,o,h,d,g){return Ig(),Jg(g),o.flags|=256,Yi(e,o,h,d),o.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(e){return{baseLanes:e,cachePool:null,transitions:null}}function pj(e,o,h){var d=o.pendingProps,g=M$2.current,_=!1,$=(o.flags&128)!==0,j;if((j=$)||(j=e!==null&&e.memoizedState===null?!1:(g&2)!==0),j?(_=!0,o.flags&=-129):(e===null||e.memoizedState!==null)&&(g|=1),G$1(M$2,g&1),e===null)return Eg(o),e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(o.mode&1?e.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):($=d.children,e=d.fallback,_?(d=o.mode,_=o.child,$={mode:"hidden",children:$},!(d&1)&&_!==null?(_.childLanes=0,_.pendingProps=$):_=qj($,d,0,null),e=Ah(e,d,h,null),_.return=o,e.return=o,_.sibling=e,o.child=_,o.child.memoizedState=oj(h),o.memoizedState=nj,e):rj(o,$));if(g=e.memoizedState,g!==null&&(j=g.dehydrated,j!==null))return sj(e,o,$,d,j,g,h);if(_){_=d.fallback,$=o.mode,g=e.child,j=g.sibling;var _t={mode:"hidden",children:d.children};return!($&1)&&o.child!==g?(d=o.child,d.childLanes=0,d.pendingProps=_t,o.deletions=null):(d=wh(g,_t),d.subtreeFlags=g.subtreeFlags&14680064),j!==null?_=wh(j,_):(_=Ah(_,$,h,null),_.flags|=2),_.return=o,d.return=o,d.sibling=_,o.child=d,d=_,_=o.child,$=e.child.memoizedState,$=$===null?oj(h):{baseLanes:$.baseLanes|h,cachePool:null,transitions:$.transitions},_.memoizedState=$,_.childLanes=e.childLanes&~h,o.memoizedState=nj,d}return _=e.child,e=_.sibling,d=wh(_,{mode:"visible",children:d.children}),!(o.mode&1)&&(d.lanes=h),d.return=o,d.sibling=null,e!==null&&(h=o.deletions,h===null?(o.deletions=[e],o.flags|=16):h.push(e)),o.child=d,o.memoizedState=null,d}function rj(e,o){return o=qj({mode:"visible",children:o},e.mode,0,null),o.return=e,e.child=o}function tj(e,o,h,d){return d!==null&&Jg(d),Bh(o,e.child,null,h),e=rj(o,o.pendingProps.children),e.flags|=2,o.memoizedState=null,e}function sj(e,o,h,d,g,_,$){if(h)return o.flags&256?(o.flags&=-257,d=Li(Error(p$2(422))),tj(e,o,$,d)):o.memoizedState!==null?(o.child=e.child,o.flags|=128,null):(_=d.fallback,g=o.mode,d=qj({mode:"visible",children:d.children},g,0,null),_=Ah(_,g,$,null),_.flags|=2,d.return=o,_.return=o,d.sibling=_,o.child=d,o.mode&1&&Bh(o,e.child,null,$),o.child.memoizedState=oj($),o.memoizedState=nj,_);if(!(o.mode&1))return tj(e,o,$,null);if(g.data==="$!"){if(d=g.nextSibling&&g.nextSibling.dataset,d)var j=d.dgst;return d=j,_=Error(p$2(419)),d=Li(_,d,void 0),tj(e,o,$,d)}if(j=($&e.childLanes)!==0,Ug||j){if(d=R$2,d!==null){switch($&-$){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(d.suspendedLanes|$)?0:g,g!==0&&g!==_.retryLane&&(_.retryLane=g,Zg(e,g),mh(d,e,g,-1))}return uj(),d=Li(Error(p$2(421))),tj(e,o,$,d)}return g.data==="$?"?(o.flags|=128,o.child=e.child,o=vj.bind(null,e),g._reactRetry=o,null):(e=_.treeContext,yg=Lf(g.nextSibling),xg=o,I$2=!0,zg=null,e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=e.id,sg=e.overflow,qg=o),o=rj(o,d.children),o.flags|=4096,o)}function wj(e,o,h){e.lanes|=o;var d=e.alternate;d!==null&&(d.lanes|=o),Sg(e.return,o,h)}function xj(e,o,h,d,g){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:h,tailMode:g}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=h,_.tailMode=g)}function yj(e,o,h){var d=o.pendingProps,g=d.revealOrder,_=d.tail;if(Yi(e,o,d.children,h),d=M$2.current,d&2)d=d&1|2,o.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=o.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wj(e,h,o);else if(e.tag===19)wj(e,h,o);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===o)break t;for(;e.sibling===null;){if(e.return===null||e.return===o)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}d&=1}if(G$1(M$2,d),!(o.mode&1))o.memoizedState=null;else switch(g){case"forwards":for(h=o.child,g=null;h!==null;)e=h.alternate,e!==null&&Mh(e)===null&&(g=h),h=h.sibling;h=g,h===null?(g=o.child,o.child=null):(g=h.sibling,h.sibling=null),xj(o,!1,g,h,_);break;case"backwards":for(h=null,g=o.child,o.child=null;g!==null;){if(e=g.alternate,e!==null&&Mh(e)===null){o.child=g;break}e=g.sibling,g.sibling=h,h=g,g=e}xj(o,!0,h,null,_);break;case"together":xj(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function jj(e,o){!(o.mode&1)&&e!==null&&(e.alternate=null,o.alternate=null,o.flags|=2)}function $i(e,o,h){if(e!==null&&(o.dependencies=e.dependencies),hh|=o.lanes,!(h&o.childLanes))return null;if(e!==null&&o.child!==e.child)throw Error(p$2(153));if(o.child!==null){for(e=o.child,h=wh(e,e.pendingProps),o.child=h,h.return=o;e.sibling!==null;)e=e.sibling,h=h.sibling=wh(e,e.pendingProps),h.return=o;h.sibling=null}return o.child}function zj(e,o,h){switch(o.tag){case 3:lj(o),Ig();break;case 5:Kh(o);break;case 1:Zf(o.type)&&cg(o);break;case 4:Ih(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,g=o.memoizedProps.value;G$1(Mg,d._currentValue),d._currentValue=g;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(G$1(M$2,M$2.current&1),o.flags|=128,null):h&o.child.childLanes?pj(e,o,h):(G$1(M$2,M$2.current&1),e=$i(e,o,h),e!==null?e.sibling:null);G$1(M$2,M$2.current&1);break;case 19:if(d=(h&o.childLanes)!==0,e.flags&128){if(d)return yj(e,o,h);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),G$1(M$2,M$2.current),d)break;return null;case 22:case 23:return o.lanes=0,ej(e,o,h)}return $i(e,o,h)}var Aj,Bj,Cj,Dj;Aj=function(e,o){for(var h=o.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return;h=h.return}h.sibling.return=h.return,h=h.sibling}};Bj=function(){};Cj=function(e,o,h,d){var g=e.memoizedProps;if(g!==d){e=o.stateNode,Hh(Eh.current);var _=null;switch(h){case"input":g=Ya$2(e,g),d=Ya$2(e,d),_=[];break;case"select":g=A$1({},g,{value:void 0}),d=A$1({},d,{value:void 0}),_=[];break;case"textarea":g=gb$2(e,g),d=gb$2(e,d),_=[];break;default:typeof g.onClick!="function"&&typeof d.onClick=="function"&&(e.onclick=Bf)}ub$2(h,d);var $;h=null;for(_e in g)if(!d.hasOwnProperty(_e)&&g.hasOwnProperty(_e)&&g[_e]!=null)if(_e==="style"){var j=g[_e];for($ in j)j.hasOwnProperty($)&&(h||(h={}),h[$]="")}else _e!=="dangerouslySetInnerHTML"&&_e!=="children"&&_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&_e!=="autoFocus"&&(ea$1.hasOwnProperty(_e)?_||(_=[]):(_=_||[]).push(_e,null));for(_e in d){var _t=d[_e];if(j=g!=null?g[_e]:void 0,d.hasOwnProperty(_e)&&_t!==j&&(_t!=null||j!=null))if(_e==="style")if(j){for($ in j)!j.hasOwnProperty($)||_t&&_t.hasOwnProperty($)||(h||(h={}),h[$]="");for($ in _t)_t.hasOwnProperty($)&&j[$]!==_t[$]&&(h||(h={}),h[$]=_t[$])}else h||(_||(_=[]),_.push(_e,h)),h=_t;else _e==="dangerouslySetInnerHTML"?(_t=_t?_t.__html:void 0,j=j?j.__html:void 0,_t!=null&&j!==_t&&(_=_||[]).push(_e,_t)):_e==="children"?typeof _t!="string"&&typeof _t!="number"||(_=_||[]).push(_e,""+_t):_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty(_e)?(_t!=null&&_e==="onScroll"&&D$1("scroll",e),_||j===_t||(_=[])):(_=_||[]).push(_e,_t))}h&&(_=_||[]).push("style",h);var _e=_;(o.updateQueue=_e)&&(o.flags|=4)}};Dj=function(e,o,h,d){h!==d&&(o.flags|=4)};function Ej(e,o){if(!I$2)switch(e.tailMode){case"hidden":o=e.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?e.tail=null:h.sibling=null;break;case"collapsed":h=e.tail;for(var d=null;h!==null;)h.alternate!==null&&(d=h),h=h.sibling;d===null?o||e.tail===null?e.tail=null:e.tail.sibling=null:d.sibling=null}}function S$2(e){var o=e.alternate!==null&&e.alternate.child===e.child,h=0,d=0;if(o)for(var g=e.child;g!==null;)h|=g.lanes|g.childLanes,d|=g.subtreeFlags&14680064,d|=g.flags&14680064,g.return=e,g=g.sibling;else for(g=e.child;g!==null;)h|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=e,g=g.sibling;return e.subtreeFlags|=d,e.childLanes=h,o}function Fj(e,o,h){var d=o.pendingProps;switch(wg(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$2(o),null;case 1:return Zf(o.type)&&$f(),S$2(o),null;case 3:return d=o.stateNode,Jh(),E$2(Wf),E$2(H$4),Oh(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(e===null||e.child===null)&&(Gg(o)?o.flags|=4:e===null||e.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(e,o),S$2(o),null;case 5:Lh(o);var g=Hh(Gh.current);if(h=o.type,e!==null&&o.stateNode!=null)Cj(e,o,h,d,g),e.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(p$2(166));return S$2(o),null}if(e=Hh(Eh.current),Gg(o)){d=o.stateNode,h=o.type;var _=o.memoizedProps;switch(d[Of]=o,d[Pf]=_,e=(o.mode&1)!==0,h){case"dialog":D$1("cancel",d),D$1("close",d);break;case"iframe":case"object":case"embed":D$1("load",d);break;case"video":case"audio":for(g=0;g<lf.length;g++)D$1(lf[g],d);break;case"source":D$1("error",d);break;case"img":case"image":case"link":D$1("error",d),D$1("load",d);break;case"details":D$1("toggle",d);break;case"input":Za$2(d,_),D$1("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!_.multiple},D$1("invalid",d);break;case"textarea":hb$2(d,_),D$1("invalid",d)}ub$2(h,_),g=null;for(var $ in _)if(_.hasOwnProperty($)){var j=_[$];$==="children"?typeof j=="string"?d.textContent!==j&&(_.suppressHydrationWarning!==!0&&Af(d.textContent,j,e),g=["children",j]):typeof j=="number"&&d.textContent!==""+j&&(_.suppressHydrationWarning!==!0&&Af(d.textContent,j,e),g=["children",""+j]):ea$1.hasOwnProperty($)&&j!=null&&$==="onScroll"&&D$1("scroll",d)}switch(h){case"input":Va$2(d),db$2(d,_,!0);break;case"textarea":Va$2(d),jb$2(d);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(d.onclick=Bf)}d=g,o.updateQueue=d,d!==null&&(o.flags|=4)}else{$=g.nodeType===9?g:g.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kb$2(h)),e==="http://www.w3.org/1999/xhtml"?h==="script"?(e=$.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof d.is=="string"?e=$.createElement(h,{is:d.is}):(e=$.createElement(h),h==="select"&&($=e,d.multiple?$.multiple=!0:d.size&&($.size=d.size))):e=$.createElementNS(e,h),e[Of]=o,e[Pf]=d,Aj(e,o,!1,!1),o.stateNode=e;t:{switch($=vb$2(h,d),h){case"dialog":D$1("cancel",e),D$1("close",e),g=d;break;case"iframe":case"object":case"embed":D$1("load",e),g=d;break;case"video":case"audio":for(g=0;g<lf.length;g++)D$1(lf[g],e);g=d;break;case"source":D$1("error",e),g=d;break;case"img":case"image":case"link":D$1("error",e),D$1("load",e),g=d;break;case"details":D$1("toggle",e),g=d;break;case"input":Za$2(e,d),g=Ya$2(e,d),D$1("invalid",e);break;case"option":g=d;break;case"select":e._wrapperState={wasMultiple:!!d.multiple},g=A$1({},d,{value:void 0}),D$1("invalid",e);break;case"textarea":hb$2(e,d),g=gb$2(e,d),D$1("invalid",e);break;default:g=d}ub$2(h,g),j=g;for(_ in j)if(j.hasOwnProperty(_)){var _t=j[_];_==="style"?sb$2(e,_t):_==="dangerouslySetInnerHTML"?(_t=_t?_t.__html:void 0,_t!=null&&nb$1(e,_t)):_==="children"?typeof _t=="string"?(h!=="textarea"||_t!=="")&&ob$2(e,_t):typeof _t=="number"&&ob$2(e,""+_t):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(ea$1.hasOwnProperty(_)?_t!=null&&_==="onScroll"&&D$1("scroll",e):_t!=null&&ta$2(e,_,_t,$))}switch(h){case"input":Va$2(e),db$2(e,d,!1);break;case"textarea":Va$2(e),jb$2(e);break;case"option":d.value!=null&&e.setAttribute("value",""+Sa$2(d.value));break;case"select":e.multiple=!!d.multiple,_=d.value,_!=null?fb$2(e,!!d.multiple,_,!1):d.defaultValue!=null&&fb$2(e,!!d.multiple,d.defaultValue,!0);break;default:typeof g.onClick=="function"&&(e.onclick=Bf)}switch(h){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return S$2(o),null;case 6:if(e&&o.stateNode!=null)Dj(e,o,e.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(p$2(166));if(h=Hh(Gh.current),Hh(Eh.current),Gg(o)){if(d=o.stateNode,h=o.memoizedProps,d[Of]=o,(_=d.nodeValue!==h)&&(e=xg,e!==null))switch(e.tag){case 3:Af(d.nodeValue,h,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Af(d.nodeValue,h,(e.mode&1)!==0)}_&&(o.flags|=4)}else d=(h.nodeType===9?h:h.ownerDocument).createTextNode(d),d[Of]=o,o.stateNode=d}return S$2(o),null;case 13:if(E$2(M$2),d=o.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(I$2&&yg!==null&&o.mode&1&&!(o.flags&128))Hg(),Ig(),o.flags|=98560,_=!1;else if(_=Gg(o),d!==null&&d.dehydrated!==null){if(e===null){if(!_)throw Error(p$2(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(p$2(317));_[Of]=o}else Ig(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;S$2(o),_=!1}else zg!==null&&(Gj(zg),zg=null),_=!0;if(!_)return o.flags&65536?o:null}return o.flags&128?(o.lanes=h,o):(d=d!==null,d!==(e!==null&&e.memoizedState!==null)&&d&&(o.child.flags|=8192,o.mode&1&&(e===null||M$2.current&1?T$2===0&&(T$2=3):uj())),o.updateQueue!==null&&(o.flags|=4),S$2(o),null);case 4:return Jh(),Bj(e,o),e===null&&sf(o.stateNode.containerInfo),S$2(o),null;case 10:return Rg(o.type._context),S$2(o),null;case 17:return Zf(o.type)&&$f(),S$2(o),null;case 19:if(E$2(M$2),_=o.memoizedState,_===null)return S$2(o),null;if(d=(o.flags&128)!==0,$=_.rendering,$===null)if(d)Ej(_,!1);else{if(T$2!==0||e!==null&&e.flags&128)for(e=o.child;e!==null;){if($=Mh(e),$!==null){for(o.flags|=128,Ej(_,!1),d=$.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=h,h=o.child;h!==null;)_=h,e=d,_.flags&=14680066,$=_.alternate,$===null?(_.childLanes=0,_.lanes=e,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=$.childLanes,_.lanes=$.lanes,_.child=$.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=$.memoizedProps,_.memoizedState=$.memoizedState,_.updateQueue=$.updateQueue,_.type=$.type,e=$.dependencies,_.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),h=h.sibling;return G$1(M$2,M$2.current&1|2),o.child}e=e.sibling}_.tail!==null&&B$2()>Hj&&(o.flags|=128,d=!0,Ej(_,!1),o.lanes=4194304)}else{if(!d)if(e=Mh($),e!==null){if(o.flags|=128,d=!0,h=e.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),Ej(_,!0),_.tail===null&&_.tailMode==="hidden"&&!$.alternate&&!I$2)return S$2(o),null}else 2*B$2()-_.renderingStartTime>Hj&&h!==1073741824&&(o.flags|=128,d=!0,Ej(_,!1),o.lanes=4194304);_.isBackwards?($.sibling=o.child,o.child=$):(h=_.last,h!==null?h.sibling=$:o.child=$,_.last=$)}return _.tail!==null?(o=_.tail,_.rendering=o,_.tail=o.sibling,_.renderingStartTime=B$2(),o.sibling=null,h=M$2.current,G$1(M$2,d?h&1|2:h&1),o):(S$2(o),null);case 22:case 23:return Ij(),d=o.memoizedState!==null,e!==null&&e.memoizedState!==null!==d&&(o.flags|=8192),d&&o.mode&1?gj&1073741824&&(S$2(o),o.subtreeFlags&6&&(o.flags|=8192)):S$2(o),null;case 24:return null;case 25:return null}throw Error(p$2(156,o.tag))}function Jj(e,o){switch(wg(o),o.tag){case 1:return Zf(o.type)&&$f(),e=o.flags,e&65536?(o.flags=e&-65537|128,o):null;case 3:return Jh(),E$2(Wf),E$2(H$4),Oh(),e=o.flags,e&65536&&!(e&128)?(o.flags=e&-65537|128,o):null;case 5:return Lh(o),null;case 13:if(E$2(M$2),e=o.memoizedState,e!==null&&e.dehydrated!==null){if(o.alternate===null)throw Error(p$2(340));Ig()}return e=o.flags,e&65536?(o.flags=e&-65537|128,o):null;case 19:return E$2(M$2),null;case 4:return Jh(),null;case 10:return Rg(o.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$2=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$2=null;function Mj(e,o){var h=e.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(d){W$2(e,o,d)}else h.current=null}function Nj(e,o,h){try{h()}catch(d){W$2(e,o,d)}}var Oj=!1;function Pj(e,o){if(Cf=dd$1,e=Me(),Ne(e)){if("selectionStart"in e)var h={start:e.selectionStart,end:e.selectionEnd};else t:{h=(h=e.ownerDocument)&&h.defaultView||window;var d=h.getSelection&&h.getSelection();if(d&&d.rangeCount!==0){h=d.anchorNode;var g=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{h.nodeType,_.nodeType}catch{h=null;break t}var $=0,j=-1,_t=-1,_e=0,_r=0,_n=e,_i=null;e:for(;;){for(var _o;_n!==h||g!==0&&_n.nodeType!==3||(j=$+g),_n!==_||d!==0&&_n.nodeType!==3||(_t=$+d),_n.nodeType===3&&($+=_n.nodeValue.length),(_o=_n.firstChild)!==null;)_i=_n,_n=_o;for(;;){if(_n===e)break e;if(_i===h&&++_e===g&&(j=$),_i===_&&++_r===d&&(_t=$),(_o=_n.nextSibling)!==null)break;_n=_i,_i=_n.parentNode}_n=_o}h=j===-1||_t===-1?null:{start:j,end:_t}}else h=null}h=h||{start:0,end:0}}else h=null;for(Df={focusedElem:e,selectionRange:h},dd$1=!1,V$2=o;V$2!==null;)if(o=V$2,e=o.child,(o.subtreeFlags&1028)!==0&&e!==null)e.return=o,V$2=e;else for(;V$2!==null;){o=V$2;try{var _a=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(_a!==null){var _u=_a.memoizedProps,_f=_a.memoizedState,_h=o.stateNode,_d=_h.getSnapshotBeforeUpdate(o.elementType===o.type?_u:Lg(o.type,_u),_f);_h.__reactInternalSnapshotBeforeUpdate=_d}break;case 3:var ty=o.stateNode.containerInfo;ty.nodeType===1?ty.textContent="":ty.nodeType===9&&ty.documentElement&&ty.removeChild(ty.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(ey){W$2(o,o.return,ey)}if(e=o.sibling,e!==null){e.return=o.return,V$2=e;break}V$2=o.return}return _a=Oj,Oj=!1,_a}function Qj(e,o,h){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&e)===e){var _=g.destroy;g.destroy=void 0,_!==void 0&&Nj(o,h,_)}g=g.next}while(g!==d)}}function Rj(e,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var h=o=o.next;do{if((h.tag&e)===e){var d=h.create;h.destroy=d()}h=h.next}while(h!==o)}}function Sj(e){var o=e.ref;if(o!==null){var h=e.stateNode;switch(e.tag){case 5:e=h;break;default:e=h}typeof o=="function"?o(e):o.current=e}}function Tj(e){var o=e.alternate;o!==null&&(e.alternate=null,Tj(o)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(o=e.stateNode,o!==null&&(delete o[Of],delete o[Pf],delete o[of],delete o[Qf],delete o[Rf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Uj(e){return e.tag===5||e.tag===3||e.tag===4}function Vj(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Uj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wj(e,o,h){var d=e.tag;if(d===5||d===6)e=e.stateNode,o?h.nodeType===8?h.parentNode.insertBefore(e,o):h.insertBefore(e,o):(h.nodeType===8?(o=h.parentNode,o.insertBefore(e,h)):(o=h,o.appendChild(e)),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=Bf));else if(d!==4&&(e=e.child,e!==null))for(Wj(e,o,h),e=e.sibling;e!==null;)Wj(e,o,h),e=e.sibling}function Xj(e,o,h){var d=e.tag;if(d===5||d===6)e=e.stateNode,o?h.insertBefore(e,o):h.appendChild(e);else if(d!==4&&(e=e.child,e!==null))for(Xj(e,o,h),e=e.sibling;e!==null;)Xj(e,o,h),e=e.sibling}var X$2=null,Yj=!1;function Zj(e,o,h){for(h=h.child;h!==null;)ak(e,o,h),h=h.sibling}function ak(e,o,h){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc$1,h)}catch{}switch(h.tag){case 5:U$2||Mj(h,o);case 6:var d=X$2,g=Yj;X$2=null,Zj(e,o,h),X$2=d,Yj=g,X$2!==null&&(Yj?(e=X$2,h=h.stateNode,e.nodeType===8?e.parentNode.removeChild(h):e.removeChild(h)):X$2.removeChild(h.stateNode));break;case 18:X$2!==null&&(Yj?(e=X$2,h=h.stateNode,e.nodeType===8?Kf(e.parentNode,h):e.nodeType===1&&Kf(e,h),bd$1(e)):Kf(X$2,h.stateNode));break;case 4:d=X$2,g=Yj,X$2=h.stateNode.containerInfo,Yj=!0,Zj(e,o,h),X$2=d,Yj=g;break;case 0:case 11:case 14:case 15:if(!U$2&&(d=h.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){g=d=d.next;do{var _=g,$=_.destroy;_=_.tag,$!==void 0&&(_&2||_&4)&&Nj(h,o,$),g=g.next}while(g!==d)}Zj(e,o,h);break;case 1:if(!U$2&&(Mj(h,o),d=h.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=h.memoizedProps,d.state=h.memoizedState,d.componentWillUnmount()}catch(j){W$2(h,o,j)}Zj(e,o,h);break;case 21:Zj(e,o,h);break;case 22:h.mode&1?(U$2=(d=U$2)||h.memoizedState!==null,Zj(e,o,h),U$2=d):Zj(e,o,h);break;default:Zj(e,o,h)}}function bk(e){var o=e.updateQueue;if(o!==null){e.updateQueue=null;var h=e.stateNode;h===null&&(h=e.stateNode=new Lj),o.forEach(function(d){var g=ck.bind(null,e,d);h.has(d)||(h.add(d),d.then(g,g))})}}function dk(e,o){var h=o.deletions;if(h!==null)for(var d=0;d<h.length;d++){var g=h[d];try{var _=e,$=o,j=$;t:for(;j!==null;){switch(j.tag){case 5:X$2=j.stateNode,Yj=!1;break t;case 3:X$2=j.stateNode.containerInfo,Yj=!0;break t;case 4:X$2=j.stateNode.containerInfo,Yj=!0;break t}j=j.return}if(X$2===null)throw Error(p$2(160));ak(_,$,g),X$2=null,Yj=!1;var _t=g.alternate;_t!==null&&(_t.return=null),g.return=null}catch(_e){W$2(g,o,_e)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)ek(o,e),o=o.sibling}function ek(e,o){var h=e.alternate,d=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dk(o,e),fk(e),d&4){try{Qj(3,e,e.return),Rj(3,e)}catch(_u){W$2(e,e.return,_u)}try{Qj(5,e,e.return)}catch(_u){W$2(e,e.return,_u)}}break;case 1:dk(o,e),fk(e),d&512&&h!==null&&Mj(h,h.return);break;case 5:if(dk(o,e),fk(e),d&512&&h!==null&&Mj(h,h.return),e.flags&32){var g=e.stateNode;try{ob$2(g,"")}catch(_u){W$2(e,e.return,_u)}}if(d&4&&(g=e.stateNode,g!=null)){var _=e.memoizedProps,$=h!==null?h.memoizedProps:_,j=e.type,_t=e.updateQueue;if(e.updateQueue=null,_t!==null)try{j==="input"&&_.type==="radio"&&_.name!=null&&ab$2(g,_),vb$2(j,$);var _e=vb$2(j,_);for($=0;$<_t.length;$+=2){var _r=_t[$],_n=_t[$+1];_r==="style"?sb$2(g,_n):_r==="dangerouslySetInnerHTML"?nb$1(g,_n):_r==="children"?ob$2(g,_n):ta$2(g,_r,_n,_e)}switch(j){case"input":bb$2(g,_);break;case"textarea":ib$2(g,_);break;case"select":var _i=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!_.multiple;var _o=_.value;_o!=null?fb$2(g,!!_.multiple,_o,!1):_i!==!!_.multiple&&(_.defaultValue!=null?fb$2(g,!!_.multiple,_.defaultValue,!0):fb$2(g,!!_.multiple,_.multiple?[]:"",!1))}g[Pf]=_}catch(_u){W$2(e,e.return,_u)}}break;case 6:if(dk(o,e),fk(e),d&4){if(e.stateNode===null)throw Error(p$2(162));g=e.stateNode,_=e.memoizedProps;try{g.nodeValue=_}catch(_u){W$2(e,e.return,_u)}}break;case 3:if(dk(o,e),fk(e),d&4&&h!==null&&h.memoizedState.isDehydrated)try{bd$1(o.containerInfo)}catch(_u){W$2(e,e.return,_u)}break;case 4:dk(o,e),fk(e);break;case 13:dk(o,e),fk(e),g=e.child,g.flags&8192&&(_=g.memoizedState!==null,g.stateNode.isHidden=_,!_||g.alternate!==null&&g.alternate.memoizedState!==null||(gk=B$2())),d&4&&bk(e);break;case 22:if(_r=h!==null&&h.memoizedState!==null,e.mode&1?(U$2=(_e=U$2)||_r,dk(o,e),U$2=_e):dk(o,e),fk(e),d&8192){if(_e=e.memoizedState!==null,(e.stateNode.isHidden=_e)&&!_r&&e.mode&1)for(V$2=e,_r=e.child;_r!==null;){for(_n=V$2=_r;V$2!==null;){switch(_i=V$2,_o=_i.child,_i.tag){case 0:case 11:case 14:case 15:Qj(4,_i,_i.return);break;case 1:Mj(_i,_i.return);var _a=_i.stateNode;if(typeof _a.componentWillUnmount=="function"){d=_i,h=_i.return;try{o=d,_a.props=o.memoizedProps,_a.state=o.memoizedState,_a.componentWillUnmount()}catch(_u){W$2(d,h,_u)}}break;case 5:Mj(_i,_i.return);break;case 22:if(_i.memoizedState!==null){hk(_n);continue}}_o!==null?(_o.return=_i,V$2=_o):hk(_n)}_r=_r.sibling}t:for(_r=null,_n=e;;){if(_n.tag===5){if(_r===null){_r=_n;try{g=_n.stateNode,_e?(_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(j=_n.stateNode,_t=_n.memoizedProps.style,$=_t!=null&&_t.hasOwnProperty("display")?_t.display:null,j.style.display=rb$2("display",$))}catch(_u){W$2(e,e.return,_u)}}}else if(_n.tag===6){if(_r===null)try{_n.stateNode.nodeValue=_e?"":_n.memoizedProps}catch(_u){W$2(e,e.return,_u)}}else if((_n.tag!==22&&_n.tag!==23||_n.memoizedState===null||_n===e)&&_n.child!==null){_n.child.return=_n,_n=_n.child;continue}if(_n===e)break t;for(;_n.sibling===null;){if(_n.return===null||_n.return===e)break t;_r===_n&&(_r=null),_n=_n.return}_r===_n&&(_r=null),_n.sibling.return=_n.return,_n=_n.sibling}}break;case 19:dk(o,e),fk(e),d&4&&bk(e);break;case 21:break;default:dk(o,e),fk(e)}}function fk(e){var o=e.flags;if(o&2){try{t:{for(var h=e.return;h!==null;){if(Uj(h)){var d=h;break t}h=h.return}throw Error(p$2(160))}switch(d.tag){case 5:var g=d.stateNode;d.flags&32&&(ob$2(g,""),d.flags&=-33);var _=Vj(e);Xj(e,_,g);break;case 3:case 4:var $=d.stateNode.containerInfo,j=Vj(e);Wj(e,j,$);break;default:throw Error(p$2(161))}}catch(_t){W$2(e,e.return,_t)}e.flags&=-3}o&4096&&(e.flags&=-4097)}function ik(e,o,h){V$2=e,jk(e)}function jk(e,o,h){for(var d=(e.mode&1)!==0;V$2!==null;){var g=V$2,_=g.child;if(g.tag===22&&d){var $=g.memoizedState!==null||Kj;if(!$){var j=g.alternate,_t=j!==null&&j.memoizedState!==null||U$2;j=Kj;var _e=U$2;if(Kj=$,(U$2=_t)&&!_e)for(V$2=g;V$2!==null;)$=V$2,_t=$.child,$.tag===22&&$.memoizedState!==null?kk(g):_t!==null?(_t.return=$,V$2=_t):kk(g);for(;_!==null;)V$2=_,jk(_),_=_.sibling;V$2=g,Kj=j,U$2=_e}lk(e)}else g.subtreeFlags&8772&&_!==null?(_.return=g,V$2=_):lk(e)}}function lk(e){for(;V$2!==null;){var o=V$2;if(o.flags&8772){var h=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:U$2||Rj(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!U$2)if(h===null)d.componentDidMount();else{var g=o.elementType===o.type?h.memoizedProps:Lg(o.type,h.memoizedProps);d.componentDidUpdate(g,h.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var _=o.updateQueue;_!==null&&ih(o,_,d);break;case 3:var $=o.updateQueue;if($!==null){if(h=null,o.child!==null)switch(o.child.tag){case 5:h=o.child.stateNode;break;case 1:h=o.child.stateNode}ih(o,$,h)}break;case 5:var j=o.stateNode;if(h===null&&o.flags&4){h=j;var _t=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":_t.autoFocus&&h.focus();break;case"img":_t.src&&(h.src=_t.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var _e=o.alternate;if(_e!==null){var _r=_e.memoizedState;if(_r!==null){var _n=_r.dehydrated;_n!==null&&bd$1(_n)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U$2||o.flags&512&&Sj(o)}catch(_i){W$2(o,o.return,_i)}}if(o===e){V$2=null;break}if(h=o.sibling,h!==null){h.return=o.return,V$2=h;break}V$2=o.return}}function hk(e){for(;V$2!==null;){var o=V$2;if(o===e){V$2=null;break}var h=o.sibling;if(h!==null){h.return=o.return,V$2=h;break}V$2=o.return}}function kk(e){for(;V$2!==null;){var o=V$2;try{switch(o.tag){case 0:case 11:case 15:var h=o.return;try{Rj(4,o)}catch(_t){W$2(o,h,_t)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var g=o.return;try{d.componentDidMount()}catch(_t){W$2(o,g,_t)}}var _=o.return;try{Sj(o)}catch(_t){W$2(o,_,_t)}break;case 5:var $=o.return;try{Sj(o)}catch(_t){W$2(o,$,_t)}}}catch(_t){W$2(o,o.return,_t)}if(o===e){V$2=null;break}var j=o.sibling;if(j!==null){j.return=o.return,V$2=j;break}V$2=o.return}}var mk=Math.ceil,nk=ua$2.ReactCurrentDispatcher,ok=ua$2.ReactCurrentOwner,pk=ua$2.ReactCurrentBatchConfig,K$2=0,R$2=null,Y$2=null,Z$2=0,gj=0,fj=Uf(0),T$2=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$2(){return K$2&6?B$2():Bk!==-1?Bk:Bk=B$2()}function lh(e){return e.mode&1?K$2&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Ck===0&&(Ck=yc$1()),Ck):(e=C$1,e!==0||(e=window.event,e=e===void 0?16:jd$1(e.type)),e):1}function mh(e,o,h,d){if(50<zk)throw zk=0,Ak=null,Error(p$2(185));Ac$1(e,h,d),(!(K$2&2)||e!==R$2)&&(e===R$2&&(!(K$2&2)&&(rk|=h),T$2===4&&Dk(e,Z$2)),Ek(e,d),h===1&&K$2===0&&!(o.mode&1)&&(Hj=B$2()+500,fg&&jg()))}function Ek(e,o){var h=e.callbackNode;wc$1(e,o);var d=uc$1(e,e===R$2?Z$2:0);if(d===0)h!==null&&bc$1(h),e.callbackNode=null,e.callbackPriority=0;else if(o=d&-d,e.callbackPriority!==o){if(h!=null&&bc$1(h),o===1)e.tag===0?ig(Fk.bind(null,e)):hg(Fk.bind(null,e)),Jf(function(){!(K$2&6)&&jg()}),h=null;else{switch(Dc$1(d)){case 1:h=fc$1;break;case 4:h=gc$1;break;case 16:h=hc$1;break;case 536870912:h=jc$1;break;default:h=hc$1}h=Gk(h,Hk.bind(null,e))}e.callbackPriority=o,e.callbackNode=h}}function Hk(e,o){if(Bk=-1,Ck=0,K$2&6)throw Error(p$2(327));var h=e.callbackNode;if(Ik()&&e.callbackNode!==h)return null;var d=uc$1(e,e===R$2?Z$2:0);if(d===0)return null;if(d&30||d&e.expiredLanes||o)o=Jk(e,d);else{o=d;var g=K$2;K$2|=2;var _=Kk();(R$2!==e||Z$2!==o)&&(vk=null,Hj=B$2()+500,Lk(e,o));do try{Mk();break}catch(j){Nk(e,j)}while(!0);Qg(),nk.current=_,K$2=g,Y$2!==null?o=0:(R$2=null,Z$2=0,o=T$2)}if(o!==0){if(o===2&&(g=xc$1(e),g!==0&&(d=g,o=Ok(e,g))),o===1)throw h=qk,Lk(e,0),Dk(e,d),Ek(e,B$2()),h;if(o===6)Dk(e,d);else{if(g=e.current.alternate,!(d&30)&&!Pk(g)&&(o=Jk(e,d),o===2&&(_=xc$1(e),_!==0&&(d=_,o=Ok(e,_))),o===1))throw h=qk,Lk(e,0),Dk(e,d),Ek(e,B$2()),h;switch(e.finishedWork=g,e.finishedLanes=d,o){case 0:case 1:throw Error(p$2(345));case 2:Qk(e,uk,vk);break;case 3:if(Dk(e,d),(d&130023424)===d&&(o=gk+500-B$2(),10<o)){if(uc$1(e,0)!==0)break;if(g=e.suspendedLanes,(g&d)!==d){L$2(),e.pingedLanes|=e.suspendedLanes&g;break}e.timeoutHandle=Ff(Qk.bind(null,e,uk,vk),o);break}Qk(e,uk,vk);break;case 4:if(Dk(e,d),(d&4194240)===d)break;for(o=e.eventTimes,g=-1;0<d;){var $=31-oc$1(d);_=1<<$,$=o[$],$>g&&(g=$),d&=~_}if(d=g,d=B$2()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*mk(d/1960))-d,10<d){e.timeoutHandle=Ff(Qk.bind(null,e,uk,vk),d);break}Qk(e,uk,vk);break;case 5:Qk(e,uk,vk);break;default:throw Error(p$2(329))}}}return Ek(e,B$2()),e.callbackNode===h?Hk.bind(null,e):null}function Ok(e,o){var h=tk;return e.current.memoizedState.isDehydrated&&(Lk(e,o).flags|=256),e=Jk(e,o),e!==2&&(o=uk,uk=h,o!==null&&Gj(o)),e}function Gj(e){uk===null?uk=e:uk.push.apply(uk,e)}function Pk(e){for(var o=e;;){if(o.flags&16384){var h=o.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var d=0;d<h.length;d++){var g=h[d],_=g.getSnapshot;g=g.value;try{if(!He(_(),g))return!1}catch{return!1}}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===e)break;for(;o.sibling===null;){if(o.return===null||o.return===e)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Dk(e,o){for(o&=~sk,o&=~rk,e.suspendedLanes|=o,e.pingedLanes&=~o,e=e.expirationTimes;0<o;){var h=31-oc$1(o),d=1<<h;e[h]=-1,o&=~d}}function Fk(e){if(K$2&6)throw Error(p$2(327));Ik();var o=uc$1(e,0);if(!(o&1))return Ek(e,B$2()),null;var h=Jk(e,o);if(e.tag!==0&&h===2){var d=xc$1(e);d!==0&&(o=d,h=Ok(e,d))}if(h===1)throw h=qk,Lk(e,0),Dk(e,o),Ek(e,B$2()),h;if(h===6)throw Error(p$2(345));return e.finishedWork=e.current.alternate,e.finishedLanes=o,Qk(e,uk,vk),Ek(e,B$2()),null}function Rk(e,o){var h=K$2;K$2|=1;try{return e(o)}finally{K$2=h,K$2===0&&(Hj=B$2()+500,fg&&jg())}}function Sk(e){xk!==null&&xk.tag===0&&!(K$2&6)&&Ik();var o=K$2;K$2|=1;var h=pk.transition,d=C$1;try{if(pk.transition=null,C$1=1,e)return e()}finally{C$1=d,pk.transition=h,K$2=o,!(K$2&6)&&jg()}}function Ij(){gj=fj.current,E$2(fj)}function Lk(e,o){e.finishedWork=null,e.finishedLanes=0;var h=e.timeoutHandle;if(h!==-1&&(e.timeoutHandle=-1,Gf(h)),Y$2!==null)for(h=Y$2.return;h!==null;){var d=h;switch(wg(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&$f();break;case 3:Jh(),E$2(Wf),E$2(H$4),Oh();break;case 5:Lh(d);break;case 4:Jh();break;case 13:E$2(M$2);break;case 19:E$2(M$2);break;case 10:Rg(d.type._context);break;case 22:case 23:Ij()}h=h.return}if(R$2=e,Y$2=e=wh(e.current,null),Z$2=gj=o,T$2=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(o=0;o<Wg.length;o++)if(h=Wg[o],d=h.interleaved,d!==null){h.interleaved=null;var g=d.next,_=h.pending;if(_!==null){var $=_.next;_.next=g,d.next=$}h.pending=d}Wg=null}return e}function Nk(e,o){do{var h=Y$2;try{if(Qg(),Ph.current=ai,Sh){for(var d=N$2.memoizedState;d!==null;){var g=d.queue;g!==null&&(g.pending=null),d=d.next}Sh=!1}if(Rh=0,P$2=O$2=N$2=null,Th=!1,Uh=0,ok.current=null,h===null||h.return===null){T$2=1,qk=o,Y$2=null;break}t:{var _=e,$=h.return,j=h,_t=o;if(o=Z$2,j.flags|=32768,_t!==null&&typeof _t=="object"&&typeof _t.then=="function"){var _e=_t,_r=j,_n=_r.tag;if(!(_r.mode&1)&&(_n===0||_n===11||_n===15)){var _i=_r.alternate;_i?(_r.updateQueue=_i.updateQueue,_r.memoizedState=_i.memoizedState,_r.lanes=_i.lanes):(_r.updateQueue=null,_r.memoizedState=null)}var _o=Vi($);if(_o!==null){_o.flags&=-257,Wi(_o,$,j,_,o),_o.mode&1&&Ti(_,_e,o),o=_o,_t=_e;var _a=o.updateQueue;if(_a===null){var _u=new Set;_u.add(_t),o.updateQueue=_u}else _a.add(_t);break t}else{if(!(o&1)){Ti(_,_e,o),uj();break t}_t=Error(p$2(426))}}else if(I$2&&j.mode&1){var _f=Vi($);if(_f!==null){!(_f.flags&65536)&&(_f.flags|=256),Wi(_f,$,j,_,o),Jg(Ki(_t,j));break t}}_=_t=Ki(_t,j),T$2!==4&&(T$2=2),tk===null?tk=[_]:tk.push(_),_=$;do{switch(_.tag){case 3:_.flags|=65536,o&=-o,_.lanes|=o;var _h=Oi(_,_t,o);fh(_,_h);break t;case 1:j=_t;var _d=_.type,ty=_.stateNode;if(!(_.flags&128)&&(typeof _d.getDerivedStateFromError=="function"||ty!==null&&typeof ty.componentDidCatch=="function"&&(Si===null||!Si.has(ty)))){_.flags|=65536,o&=-o,_.lanes|=o;var ey=Ri(_,j,o);fh(_,ey);break t}}_=_.return}while(_!==null)}Tk(h)}catch(sy){o=sy,Y$2===h&&h!==null&&(Y$2=h=h.return);continue}break}while(!0)}function Kk(){var e=nk.current;return nk.current=ai,e===null?ai:e}function uj(){(T$2===0||T$2===3||T$2===2)&&(T$2=4),R$2===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$2,Z$2)}function Jk(e,o){var h=K$2;K$2|=2;var d=Kk();(R$2!==e||Z$2!==o)&&(vk=null,Lk(e,o));do try{Uk();break}catch(g){Nk(e,g)}while(!0);if(Qg(),K$2=h,nk.current=d,Y$2!==null)throw Error(p$2(261));return R$2=null,Z$2=0,T$2}function Uk(){for(;Y$2!==null;)Vk(Y$2)}function Mk(){for(;Y$2!==null&&!cc$1();)Vk(Y$2)}function Vk(e){var o=Wk(e.alternate,e,gj);e.memoizedProps=e.pendingProps,o===null?Tk(e):Y$2=o,ok.current=null}function Tk(e){var o=e;do{var h=o.alternate;if(e=o.return,o.flags&32768){if(h=Jj(h,o),h!==null){h.flags&=32767,Y$2=h;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{T$2=6,Y$2=null;return}}else if(h=Fj(h,o,gj),h!==null){Y$2=h;return}if(o=o.sibling,o!==null){Y$2=o;return}Y$2=o=e}while(o!==null);T$2===0&&(T$2=5)}function Qk(e,o,h){var d=C$1,g=pk.transition;try{pk.transition=null,C$1=1,Xk(e,o,h,d)}finally{pk.transition=g,C$1=d}return null}function Xk(e,o,h,d){do Ik();while(xk!==null);if(K$2&6)throw Error(p$2(327));h=e.finishedWork;var g=e.finishedLanes;if(h===null)return null;if(e.finishedWork=null,e.finishedLanes=0,h===e.current)throw Error(p$2(177));e.callbackNode=null,e.callbackPriority=0;var _=h.lanes|h.childLanes;if(Bc$1(e,_),e===R$2&&(Y$2=R$2=null,Z$2=0),!(h.subtreeFlags&2064)&&!(h.flags&2064)||wk||(wk=!0,Gk(hc$1,function(){return Ik(),null})),_=(h.flags&15990)!==0,h.subtreeFlags&15990||_){_=pk.transition,pk.transition=null;var $=C$1;C$1=1;var j=K$2;K$2|=4,ok.current=null,Pj(e,h),ek(h,e),Oe(Df),dd$1=!!Cf,Df=Cf=null,e.current=h,ik(h),dc$1(),K$2=j,C$1=$,pk.transition=_}else e.current=h;if(wk&&(wk=!1,xk=e,yk=g),_=e.pendingLanes,_===0&&(Si=null),mc$1(h.stateNode),Ek(e,B$2()),o!==null)for(d=e.onRecoverableError,h=0;h<o.length;h++)g=o[h],d(g.value,{componentStack:g.stack,digest:g.digest});if(Pi)throw Pi=!1,e=Qi,Qi=null,e;return yk&1&&e.tag!==0&&Ik(),_=e.pendingLanes,_&1?e===Ak?zk++:(zk=0,Ak=e):zk=0,jg(),null}function Ik(){if(xk!==null){var e=Dc$1(yk),o=pk.transition,h=C$1;try{if(pk.transition=null,C$1=16>e?16:e,xk===null)var d=!1;else{if(e=xk,xk=null,yk=0,K$2&6)throw Error(p$2(331));var g=K$2;for(K$2|=4,V$2=e.current;V$2!==null;){var _=V$2,$=_.child;if(V$2.flags&16){var j=_.deletions;if(j!==null){for(var _t=0;_t<j.length;_t++){var _e=j[_t];for(V$2=_e;V$2!==null;){var _r=V$2;switch(_r.tag){case 0:case 11:case 15:Qj(8,_r,_)}var _n=_r.child;if(_n!==null)_n.return=_r,V$2=_n;else for(;V$2!==null;){_r=V$2;var _i=_r.sibling,_o=_r.return;if(Tj(_r),_r===_e){V$2=null;break}if(_i!==null){_i.return=_o,V$2=_i;break}V$2=_o}}}var _a=_.alternate;if(_a!==null){var _u=_a.child;if(_u!==null){_a.child=null;do{var _f=_u.sibling;_u.sibling=null,_u=_f}while(_u!==null)}}V$2=_}}if(_.subtreeFlags&2064&&$!==null)$.return=_,V$2=$;else t:for(;V$2!==null;){if(_=V$2,_.flags&2048)switch(_.tag){case 0:case 11:case 15:Qj(9,_,_.return)}var _h=_.sibling;if(_h!==null){_h.return=_.return,V$2=_h;break t}V$2=_.return}}var _d=e.current;for(V$2=_d;V$2!==null;){$=V$2;var ty=$.child;if($.subtreeFlags&2064&&ty!==null)ty.return=$,V$2=ty;else t:for($=_d;V$2!==null;){if(j=V$2,j.flags&2048)try{switch(j.tag){case 0:case 11:case 15:Rj(9,j)}}catch(sy){W$2(j,j.return,sy)}if(j===$){V$2=null;break t}var ey=j.sibling;if(ey!==null){ey.return=j.return,V$2=ey;break t}V$2=j.return}}if(K$2=g,jg(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc$1,e)}catch{}d=!0}return d}finally{C$1=h,pk.transition=o}}return!1}function Yk(e,o,h){o=Ki(h,o),o=Oi(e,o,1),e=dh(e,o,1),o=L$2(),e!==null&&(Ac$1(e,1,o),Ek(e,o))}function W$2(e,o,h){if(e.tag===3)Yk(e,e,h);else for(;o!==null;){if(o.tag===3){Yk(o,e,h);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Si===null||!Si.has(d))){e=Ki(h,e),e=Ri(o,e,1),o=dh(o,e,1),e=L$2(),o!==null&&(Ac$1(o,1,e),Ek(o,e));break}}o=o.return}}function Ui(e,o,h){var d=e.pingCache;d!==null&&d.delete(o),o=L$2(),e.pingedLanes|=e.suspendedLanes&h,R$2===e&&(Z$2&h)===h&&(T$2===4||T$2===3&&(Z$2&130023424)===Z$2&&500>B$2()-gk?Lk(e,0):sk|=h),Ek(e,o)}function Zk(e,o){o===0&&(e.mode&1?(o=sc$1,sc$1<<=1,!(sc$1&130023424)&&(sc$1=4194304)):o=1);var h=L$2();e=Zg(e,o),e!==null&&(Ac$1(e,o,h),Ek(e,h))}function vj(e){var o=e.memoizedState,h=0;o!==null&&(h=o.retryLane),Zk(e,h)}function ck(e,o){var h=0;switch(e.tag){case 13:var d=e.stateNode,g=e.memoizedState;g!==null&&(h=g.retryLane);break;case 19:d=e.stateNode;break;default:throw Error(p$2(314))}d!==null&&d.delete(o),Zk(e,h)}var Wk;Wk=function(e,o,h){if(e!==null)if(e.memoizedProps!==o.pendingProps||Wf.current)Ug=!0;else{if(!(e.lanes&h)&&!(o.flags&128))return Ug=!1,zj(e,o,h);Ug=!!(e.flags&131072)}else Ug=!1,I$2&&o.flags&1048576&&ug(o,ng,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;jj(e,o),e=o.pendingProps;var g=Yf(o,H$4.current);Tg(o,h),g=Xh(null,o,d,e,g,h);var _=bi();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Zf(d)?(_=!0,cg(o)):_=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,ah(o),g.updater=nh,o.stateNode=g,g._reactInternals=o,rh(o,d,e,h),o=kj(null,o,d,!0,_,h)):(o.tag=0,I$2&&_&&vg(o),Yi(null,o,g,h),o=o.child),o;case 16:d=o.elementType;t:{switch(jj(e,o),e=o.pendingProps,g=d._init,d=g(d._payload),o.type=d,g=o.tag=$k(d),e=Lg(d,e),g){case 0:o=dj(null,o,d,e,h);break t;case 1:o=ij(null,o,d,e,h);break t;case 11:o=Zi(null,o,d,e,h);break t;case 14:o=aj(null,o,d,Lg(d.type,e),h);break t}throw Error(p$2(306,d,""))}return o;case 0:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:Lg(d,g),dj(e,o,d,g,h);case 1:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:Lg(d,g),ij(e,o,d,g,h);case 3:t:{if(lj(o),e===null)throw Error(p$2(387));d=o.pendingProps,_=o.memoizedState,g=_.element,bh(e,o),gh(o,d,null,h);var $=o.memoizedState;if(d=$.element,_.isDehydrated)if(_={element:d,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){g=Ki(Error(p$2(423)),o),o=mj(e,o,d,h,g);break t}else if(d!==g){g=Ki(Error(p$2(424)),o),o=mj(e,o,d,h,g);break t}else for(yg=Lf(o.stateNode.containerInfo.firstChild),xg=o,I$2=!0,zg=null,h=Ch(o,null,d,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Ig(),d===g){o=$i(e,o,h);break t}Yi(e,o,d,h)}o=o.child}return o;case 5:return Kh(o),e===null&&Eg(o),d=o.type,g=o.pendingProps,_=e!==null?e.memoizedProps:null,$=g.children,Ef(d,g)?$=null:_!==null&&Ef(d,_)&&(o.flags|=32),hj(e,o),Yi(e,o,$,h),o.child;case 6:return e===null&&Eg(o),null;case 13:return pj(e,o,h);case 4:return Ih(o,o.stateNode.containerInfo),d=o.pendingProps,e===null?o.child=Bh(o,null,d,h):Yi(e,o,d,h),o.child;case 11:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:Lg(d,g),Zi(e,o,d,g,h);case 7:return Yi(e,o,o.pendingProps,h),o.child;case 8:return Yi(e,o,o.pendingProps.children,h),o.child;case 12:return Yi(e,o,o.pendingProps.children,h),o.child;case 10:t:{if(d=o.type._context,g=o.pendingProps,_=o.memoizedProps,$=g.value,G$1(Mg,d._currentValue),d._currentValue=$,_!==null)if(He(_.value,$)){if(_.children===g.children&&!Wf.current){o=$i(e,o,h);break t}}else for(_=o.child,_!==null&&(_.return=o);_!==null;){var j=_.dependencies;if(j!==null){$=_.child;for(var _t=j.firstContext;_t!==null;){if(_t.context===d){if(_.tag===1){_t=ch(-1,h&-h),_t.tag=2;var _e=_.updateQueue;if(_e!==null){_e=_e.shared;var _r=_e.pending;_r===null?_t.next=_t:(_t.next=_r.next,_r.next=_t),_e.pending=_t}}_.lanes|=h,_t=_.alternate,_t!==null&&(_t.lanes|=h),Sg(_.return,h,o),j.lanes|=h;break}_t=_t.next}}else if(_.tag===10)$=_.type===o.type?null:_.child;else if(_.tag===18){if($=_.return,$===null)throw Error(p$2(341));$.lanes|=h,j=$.alternate,j!==null&&(j.lanes|=h),Sg($,h,o),$=_.sibling}else $=_.child;if($!==null)$.return=_;else for($=_;$!==null;){if($===o){$=null;break}if(_=$.sibling,_!==null){_.return=$.return,$=_;break}$=$.return}_=$}Yi(e,o,g.children,h),o=o.child}return o;case 9:return g=o.type,d=o.pendingProps.children,Tg(o,h),g=Vg(g),d=d(g),o.flags|=1,Yi(e,o,d,h),o.child;case 14:return d=o.type,g=Lg(d,o.pendingProps),g=Lg(d.type,g),aj(e,o,d,g,h);case 15:return cj(e,o,o.type,o.pendingProps,h);case 17:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:Lg(d,g),jj(e,o),o.tag=1,Zf(d)?(e=!0,cg(o)):e=!1,Tg(o,h),ph(o,d,g),rh(o,d,g,h),kj(null,o,d,!0,e,h);case 19:return yj(e,o,h);case 22:return ej(e,o,h)}throw Error(p$2(156,o.tag))};function Gk(e,o){return ac$1(e,o)}function al(e,o,h,d){this.tag=e,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(e,o,h,d){return new al(e,o,h,d)}function bj(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $k(e){if(typeof e=="function")return bj(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Da$2)return 11;if(e===Ga$2)return 14}return 2}function wh(e,o){var h=e.alternate;return h===null?(h=Bg(e.tag,o,e.key,e.mode),h.elementType=e.elementType,h.type=e.type,h.stateNode=e.stateNode,h.alternate=e,e.alternate=h):(h.pendingProps=o,h.type=e.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=e.flags&14680064,h.childLanes=e.childLanes,h.lanes=e.lanes,h.child=e.child,h.memoizedProps=e.memoizedProps,h.memoizedState=e.memoizedState,h.updateQueue=e.updateQueue,o=e.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=e.sibling,h.index=e.index,h.ref=e.ref,h}function yh(e,o,h,d,g,_){var $=2;if(d=e,typeof e=="function")bj(e)&&($=1);else if(typeof e=="string")$=5;else t:switch(e){case ya$2:return Ah(h.children,g,_,o);case za$2:$=8,g|=8;break;case Aa$2:return e=Bg(12,h,o,g|2),e.elementType=Aa$2,e.lanes=_,e;case Ea$2:return e=Bg(13,h,o,g),e.elementType=Ea$2,e.lanes=_,e;case Fa$2:return e=Bg(19,h,o,g),e.elementType=Fa$2,e.lanes=_,e;case Ia$2:return qj(h,g,_,o);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ba$2:$=10;break t;case Ca$2:$=9;break t;case Da$2:$=11;break t;case Ga$2:$=14;break t;case Ha$2:$=16,d=null;break t}throw Error(p$2(130,e==null?e:typeof e,""))}return o=Bg($,h,o,g),o.elementType=e,o.type=d,o.lanes=_,o}function Ah(e,o,h,d){return e=Bg(7,e,d,o),e.lanes=h,e}function qj(e,o,h,d){return e=Bg(22,e,d,o),e.elementType=Ia$2,e.lanes=h,e.stateNode={isHidden:!1},e}function xh(e,o,h){return e=Bg(6,e,null,o),e.lanes=h,e}function zh(e,o,h){return o=Bg(4,e.children!==null?e.children:[],e.key,o),o.lanes=h,o.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},o}function bl(e,o,h,d,g){this.tag=o,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$1(0),this.expirationTimes=zc$1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$1(0),this.identifierPrefix=d,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function cl(e,o,h,d,g,_,$,j,_t){return e=new bl(e,o,h,j,_t),o===1?(o=1,_===!0&&(o|=8)):o=0,_=Bg(3,null,null,o),e.current=_,_.stateNode=e,_.memoizedState={element:d,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(_),e}function dl(e,o,h){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$2,key:d==null?null:""+d,children:e,containerInfo:o,implementation:h}}function el(e){if(!e)return Vf;e=e._reactInternals;t:{if(Vb$1(e)!==e||e.tag!==1)throw Error(p$2(170));var o=e;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(Zf(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(o!==null);throw Error(p$2(171))}if(e.tag===1){var h=e.type;if(Zf(h))return bg(e,h,o)}return o}function fl(e,o,h,d,g,_,$,j,_t){return e=cl(h,d,!0,e,g,_,$,j,_t),e.context=el(null),h=e.current,d=L$2(),g=lh(h),_=ch(d,g),_.callback=o??null,dh(h,_,g),e.current.lanes=g,Ac$1(e,g,d),Ek(e,d),e}function gl(e,o,h,d){var g=o.current,_=L$2(),$=lh(g);return h=el(h),o.context===null?o.context=h:o.pendingContext=h,o=ch(_,$),o.payload={element:e},d=d===void 0?null:d,d!==null&&(o.callback=d),e=dh(g,o,$),e!==null&&(mh(e,g,$,_),eh(e,g,$)),$}function hl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function il(e,o){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var h=e.retryLane;e.retryLane=h!==0&&h<o?h:o}}function jl(e,o){il(e,o),(e=e.alternate)&&il(e,o)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(e){console.error(e)};function ml(e){this._internalRoot=e}nl.prototype.render=ml.prototype.render=function(e){var o=this._internalRoot;if(o===null)throw Error(p$2(409));gl(e,o,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var o=e.containerInfo;Sk(function(){gl(null,e,null,null)}),o[uf]=null}};function nl(e){this._internalRoot=e}nl.prototype.unstable_scheduleHydration=function(e){if(e){var o=Hc$1();e={blockedOn:null,target:e,priority:o};for(var h=0;h<Qc$1.length&&o!==0&&o<Qc$1[h].priority;h++);Qc$1.splice(h,0,e),h===0&&Vc$1(e)}};function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function pl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(e,o,h,d,g){if(g){if(typeof d=="function"){var _=d;d=function(){var _e=hl($);_.call(_e)}}var $=fl(o,d,e,0,null,!1,!1,"",ql);return e._reactRootContainer=$,e[uf]=$.current,sf(e.nodeType===8?e.parentNode:e),Sk(),$}for(;g=e.lastChild;)e.removeChild(g);if(typeof d=="function"){var j=d;d=function(){var _e=hl(_t);j.call(_e)}}var _t=cl(e,0,!1,null,null,!1,!1,"",ql);return e._reactRootContainer=_t,e[uf]=_t.current,sf(e.nodeType===8?e.parentNode:e),Sk(function(){gl(o,_t,h,d)}),_t}function sl(e,o,h,d,g){var _=h._reactRootContainer;if(_){var $=_;if(typeof g=="function"){var j=g;g=function(){var _t=hl($);j.call(_t)}}gl(o,$,e,g)}else $=rl(h,o,e,g,d);return hl($)}Ec$1=function(e){switch(e.tag){case 3:var o=e.stateNode;if(o.current.memoizedState.isDehydrated){var h=tc$1(o.pendingLanes);h!==0&&(Cc$1(o,h|1),Ek(o,B$2()),!(K$2&6)&&(Hj=B$2()+500,jg()))}break;case 13:Sk(function(){var d=Zg(e,1);if(d!==null){var g=L$2();mh(d,e,1,g)}}),jl(e,1)}};Fc$1=function(e){if(e.tag===13){var o=Zg(e,134217728);if(o!==null){var h=L$2();mh(o,e,134217728,h)}jl(e,134217728)}};Gc$1=function(e){if(e.tag===13){var o=lh(e),h=Zg(e,o);if(h!==null){var d=L$2();mh(h,e,o,d)}jl(e,o)}};Hc$1=function(){return C$1};Ic$1=function(e,o){var h=C$1;try{return C$1=e,o()}finally{C$1=h}};yb$2=function(e,o,h){switch(o){case"input":if(bb$2(e,h),o=h.name,h.type==="radio"&&o!=null){for(h=e;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<h.length;o++){var d=h[o];if(d!==e&&d.form===e.form){var g=Db$2(d);if(!g)throw Error(p$2(90));Wa$2(d),bb$2(d,g)}}}break;case"textarea":ib$2(e,h);break;case"select":o=h.value,o!=null&&fb$2(e,!!h.multiple,o,!1)}};Gb$2=Rk;Hb$2=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb$2,ue,Db$2,Eb$2,Fb$1,Rk]},ul={findFiberByHostInstance:Wc$1,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$2.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zb$1(e),e===null?null:e.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc$1=wl.inject(vl),lc$1=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(e,o){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(o))throw Error(p$2(200));return dl(e,o,null,h)};reactDom_production_min.createRoot=function(e,o){if(!ol(e))throw Error(p$2(299));var h=!1,d="",g=ll;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=cl(e,1,!1,null,null,h,!1,d,g),e[uf]=o.current,sf(e.nodeType===8?e.parentNode:e),new ml(o)};reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var o=e._reactInternals;if(o===void 0)throw typeof e.render=="function"?Error(p$2(188)):(e=Object.keys(e).join(","),Error(p$2(268,e)));return e=Zb$1(o),e=e===null?null:e.stateNode,e};reactDom_production_min.flushSync=function(e){return Sk(e)};reactDom_production_min.hydrate=function(e,o,h){if(!pl(o))throw Error(p$2(200));return sl(null,e,o,!0,h)};reactDom_production_min.hydrateRoot=function(e,o,h){if(!ol(e))throw Error(p$2(405));var d=h!=null&&h.hydratedSources||null,g=!1,_="",$=ll;if(h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onRecoverableError!==void 0&&($=h.onRecoverableError)),o=fl(o,null,e,1,h??null,g,!1,_,$),e[uf]=o.current,sf(e),d)for(e=0;e<d.length;e++)h=d[e],g=h._getVersion,g=g(h._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[h,g]:o.mutableSourceEagerHydrationData.push(h,g);return new nl(o)};reactDom_production_min.render=function(e,o,h){if(!pl(o))throw Error(p$2(200));return sl(null,e,o,!1,h)};reactDom_production_min.unmountComponentAtNode=function(e){if(!pl(e))throw Error(p$2(40));return e._reactRootContainer?(Sk(function(){sl(null,null,e,!1,function(){e._reactRootContainer=null,e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,o,h,d){if(!pl(h))throw Error(p$2(200));if(e==null||e._reactInternals===void 0)throw Error(p$2(38));return sl(e,o,h,!1,d)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const index=getDefaultExportFromCjs(reactDomExports),ReactDOM=_mergeNamespaces({__proto__:null,default:index},[reactDomExports]);var m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var h=arguments[o];for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(e[d]=h[d])}return e},_extends$3.apply(this,arguments)}var Action;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createHashHistory(e){e===void 0&&(e={});function o(g,_){let{pathname:$="/",search:j="",hash:_t=""}=parsePath(g.location.hash.substr(1));return!$.startsWith("/")&&!$.startsWith(".")&&($="/"+$),createLocation("",{pathname:$,search:j,hash:_t},_.state&&_.state.usr||null,_.state&&_.state.key||"default")}function h(g,_){let $=g.document.querySelector("base"),j="";if($&&$.getAttribute("href")){let _t=g.location.href,_e=_t.indexOf("#");j=_e===-1?_t:_t.slice(0,_e)}return j+"#"+(typeof _=="string"?_:createPath(_))}function d(g,_){warning(g.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(_)+")")}return getUrlBasedHistory(o,h,d,e)}function invariant(e,o){if(e===!1||e===null||typeof e>"u")throw new Error(o)}function warning(e,o){if(!e){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(e,o){return{usr:e.state,key:e.key,idx:o}}function createLocation(e,o,h,d){return h===void 0&&(h=null),_extends$3({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof o=="string"?parsePath(o):o,{state:h,key:o&&o.key||d||createKey()})}function createPath(e){let{pathname:o="/",search:h="",hash:d=""}=e;return h&&h!=="?"&&(o+=h.charAt(0)==="?"?h:"?"+h),d&&d!=="#"&&(o+=d.charAt(0)==="#"?d:"#"+d),o}function parsePath(e){let o={};if(e){let h=e.indexOf("#");h>=0&&(o.hash=e.substr(h),e=e.substr(0,h));let d=e.indexOf("?");d>=0&&(o.search=e.substr(d),e=e.substr(0,d)),e&&(o.pathname=e)}return o}function getUrlBasedHistory(e,o,h,d){d===void 0&&(d={});let{window:g=document.defaultView,v5Compat:_=!1}=d,$=g.history,j=Action.Pop,_t=null,_e=_r();_e==null&&(_e=0,$.replaceState(_extends$3({},$.state,{idx:_e}),""));function _r(){return($.state||{idx:null}).idx}function _n(){j=Action.Pop;let _f=_r(),_h=_f==null?null:_f-_e;_e=_f,_t&&_t({action:j,location:_u.location,delta:_h})}function _i(_f,_h){j=Action.Push;let _d=createLocation(_u.location,_f,_h);h&&h(_d,_f),_e=_r()+1;let ty=getHistoryState(_d,_e),ey=_u.createHref(_d);try{$.pushState(ty,"",ey)}catch(sy){if(sy instanceof DOMException&&sy.name==="DataCloneError")throw sy;g.location.assign(ey)}_&&_t&&_t({action:j,location:_u.location,delta:1})}function _o(_f,_h){j=Action.Replace;let _d=createLocation(_u.location,_f,_h);h&&h(_d,_f),_e=_r();let ty=getHistoryState(_d,_e),ey=_u.createHref(_d);$.replaceState(ty,"",ey),_&&_t&&_t({action:j,location:_u.location,delta:0})}function _a(_f){let _h=g.location.origin!=="null"?g.location.origin:g.location.href,_d=typeof _f=="string"?_f:createPath(_f);return invariant(_h,"No window.location.(origin|href) available to create URL for href: "+_d),new URL(_d,_h)}let _u={get action(){return j},get location(){return e(g,$)},listen(_f){if(_t)throw new Error("A history only accepts one active listener");return g.addEventListener(PopStateEventType,_n),_t=_f,()=>{g.removeEventListener(PopStateEventType,_n),_t=null}},createHref(_f){return o(g,_f)},createURL:_a,encodeLocation(_f){let _h=_a(_f);return{pathname:_h.pathname,search:_h.search,hash:_h.hash}},push:_i,replace:_o,go(_f){return $.go(_f)}};return _u}var ResultType;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ResultType||(ResultType={}));const immutableRouteKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isIndexRoute(e){return e.index===!0}function convertRoutesToDataRoutes(e,o,h,d){return h===void 0&&(h=[]),d===void 0&&(d={}),e.map((g,_)=>{let $=[...h,_],j=typeof g.id=="string"?g.id:$.join("-");if(invariant(g.index!==!0||!g.children,"Cannot specify children on an index route"),invariant(!d[j],'Found a route id collision on id "'+j+`".  Route id's must be globally unique within Data Router usages`),isIndexRoute(g)){let _t=_extends$3({},g,o(g),{id:j});return d[j]=_t,_t}else{let _t=_extends$3({},g,o(g),{id:j,children:void 0});return d[j]=_t,g.children&&(_t.children=convertRoutesToDataRoutes(g.children,o,$,d)),_t}})}function matchRoutes(e,o,h){h===void 0&&(h="/");let d=typeof o=="string"?parsePath(o):o,g=stripBasename(d.pathname||"/",h);if(g==null)return null;let _=flattenRoutes(e);rankRouteBranches(_);let $=null;for(let j=0;$==null&&j<_.length;++j)$=matchRouteBranch(_[j],safelyDecodeURI(g));return $}function convertRouteMatchToUiMatch(e,o){let{route:h,pathname:d,params:g}=e;return{id:h.id,pathname:d,params:g,data:o[h.id],handle:h.handle}}function flattenRoutes(e,o,h,d){o===void 0&&(o=[]),h===void 0&&(h=[]),d===void 0&&(d="");let g=(_,$,j)=>{let _t={relativePath:j===void 0?_.path||"":j,caseSensitive:_.caseSensitive===!0,childrenIndex:$,route:_};_t.relativePath.startsWith("/")&&(invariant(_t.relativePath.startsWith(d),'Absolute route path "'+_t.relativePath+'" nested under path '+('"'+d+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),_t.relativePath=_t.relativePath.slice(d.length));let _e=joinPaths([d,_t.relativePath]),_r=h.concat(_t);_.children&&_.children.length>0&&(invariant(_.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+_e+'".')),flattenRoutes(_.children,o,_r,_e)),!(_.path==null&&!_.index)&&o.push({path:_e,score:computeScore(_e,_.index),routesMeta:_r})};return e.forEach((_,$)=>{var j;if(_.path===""||!((j=_.path)!=null&&j.includes("?")))g(_,$);else for(let _t of explodeOptionalSegments(_.path))g(_,$,_t)}),o}function explodeOptionalSegments(e){let o=e.split("/");if(o.length===0)return[];let[h,...d]=o,g=h.endsWith("?"),_=h.replace(/\?$/,"");if(d.length===0)return g?[_,""]:[_];let $=explodeOptionalSegments(d.join("/")),j=[];return j.push(...$.map(_t=>_t===""?_:[_,_t].join("/"))),g&&j.push(...$),j.map(_t=>e.startsWith("/")&&_t===""?"/":_t)}function rankRouteBranches(e){e.sort((o,h)=>o.score!==h.score?h.score-o.score:compareIndexes(o.routesMeta.map(d=>d.childrenIndex),h.routesMeta.map(d=>d.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,o){let h=e.split("/"),d=h.length;return h.some(isSplat)&&(d+=splatPenalty),o&&(d+=indexRouteValue),h.filter(g=>!isSplat(g)).reduce((g,_)=>g+(paramRe.test(_)?dynamicSegmentValue:_===""?emptySegmentValue:staticSegmentValue),d)}function compareIndexes(e,o){return e.length===o.length&&e.slice(0,-1).every((d,g)=>d===o[g])?e[e.length-1]-o[o.length-1]:0}function matchRouteBranch(e,o){let{routesMeta:h}=e,d={},g="/",_=[];for(let $=0;$<h.length;++$){let j=h[$],_t=$===h.length-1,_e=g==="/"?o:o.slice(g.length)||"/",_r=matchPath({path:j.relativePath,caseSensitive:j.caseSensitive,end:_t},_e);if(!_r)return null;Object.assign(d,_r.params);let _n=j.route;_.push({params:d,pathname:joinPaths([g,_r.pathname]),pathnameBase:normalizePathname(joinPaths([g,_r.pathnameBase])),route:_n}),_r.pathnameBase!=="/"&&(g=joinPaths([g,_r.pathnameBase]))}return _}function matchPath(e,o){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[h,d]=compilePath(e.path,e.caseSensitive,e.end),g=o.match(h);if(!g)return null;let _=g[0],$=_.replace(/(.)\/+$/,"$1"),j=g.slice(1);return{params:d.reduce((_e,_r,_n)=>{let{paramName:_i,isOptional:_o}=_r;if(_i==="*"){let _u=j[_n]||"";$=_.slice(0,_.length-_u.length).replace(/(.)\/+$/,"$1")}const _a=j[_n];return _o&&!_a?_e[_i]=void 0:_e[_i]=safelyDecodeURIComponent(_a||"",_i),_e},{}),pathname:_,pathnameBase:$,pattern:e}}function compilePath(e,o,h){o===void 0&&(o=!1),h===void 0&&(h=!0),warning(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let d=[],g="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,($,j,_t)=>(d.push({paramName:j,isOptional:_t!=null}),_t?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(d.push({paramName:"*"}),g+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):h?g+="\\/*$":e!==""&&e!=="/"&&(g+="(?:(?=\\/|$))"),[new RegExp(g,o?void 0:"i"),d]}function safelyDecodeURI(e){try{return decodeURI(e)}catch(o){return warning(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+o+").")),e}}function safelyDecodeURIComponent(e,o){try{return decodeURIComponent(e)}catch(h){return warning(!1,'The value for the URL param "'+o+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+h+").")),e}}function stripBasename(e,o){if(o==="/")return e;if(!e.toLowerCase().startsWith(o.toLowerCase()))return null;let h=o.endsWith("/")?o.length-1:o.length,d=e.charAt(h);return d&&d!=="/"?null:e.slice(h)||"/"}function resolvePath(e,o){o===void 0&&(o="/");let{pathname:h,search:d="",hash:g=""}=typeof e=="string"?parsePath(e):e;return{pathname:h?h.startsWith("/")?h:resolvePathname(h,o):o,search:normalizeSearch(d),hash:normalizeHash(g)}}function resolvePathname(e,o){let h=o.replace(/\/+$/,"").split("/");return e.split("/").forEach(g=>{g===".."?h.length>1&&h.pop():g!=="."&&h.push(g)}),h.length>1?h.join("/"):"/"}function getInvalidPathError(e,o,h,d){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+o+"` field ["+JSON.stringify(d)+"].  Please separate it out to the ")+("`to."+h+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(e){return e.filter((o,h)=>h===0||o.route.path&&o.route.path.length>0)}function getResolveToMatches(e,o){let h=getPathContributingMatches(e);return o?h.map((d,g)=>g===e.length-1?d.pathname:d.pathnameBase):h.map(d=>d.pathnameBase)}function resolveTo(e,o,h,d){d===void 0&&(d=!1);let g;typeof e=="string"?g=parsePath(e):(g=_extends$3({},e),invariant(!g.pathname||!g.pathname.includes("?"),getInvalidPathError("?","pathname","search",g)),invariant(!g.pathname||!g.pathname.includes("#"),getInvalidPathError("#","pathname","hash",g)),invariant(!g.search||!g.search.includes("#"),getInvalidPathError("#","search","hash",g)));let _=e===""||g.pathname==="",$=_?"/":g.pathname,j;if($==null)j=h;else{let _n=o.length-1;if(!d&&$.startsWith("..")){let _i=$.split("/");for(;_i[0]==="..";)_i.shift(),_n-=1;g.pathname=_i.join("/")}j=_n>=0?o[_n]:"/"}let _t=resolvePath(g,j),_e=$&&$!=="/"&&$.endsWith("/"),_r=(_||$===".")&&h.endsWith("/");return!_t.pathname.endsWith("/")&&(_e||_r)&&(_t.pathname+="/"),_t}const joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,normalizeHash=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class ErrorResponseImpl{constructor(o,h,d,g){g===void 0&&(g=!1),this.status=o,this.statusText=h||"",this.internal=g,d instanceof Error?(this.data=d.toString(),this.error=d):this.data=d}}function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const validMutationMethodsArr=["post","put","patch","delete"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["get",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX$1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,defaultMapRouteProperties=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),TRANSITIONS_STORAGE_KEY="remix-router-transitions";function createRouter(e){const o=e.window?e.window:typeof window<"u"?window:void 0,h=typeof o<"u"&&typeof o.document<"u"&&typeof o.document.createElement<"u",d=!h;invariant(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let g;if(e.mapRouteProperties)g=e.mapRouteProperties;else if(e.detectErrorBoundary){let vy=e.detectErrorBoundary;g=wy=>({hasErrorBoundary:vy(wy)})}else g=defaultMapRouteProperties;let _={},$=convertRoutesToDataRoutes(e.routes,g,void 0,_),j,_t=e.basename||"/",_e=_extends$3({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},e.future),_r=null,_n=new Set,_i=null,_o=null,_a=null,_u=e.hydrationData!=null,_f=matchRoutes($,e.history.location,_t),_h=null;if(_f==null){let vy=getInternalRouterError(404,{pathname:e.history.location.pathname}),{matches:wy,route:Ty}=getShortCircuitMatches($);_f=wy,_h={[Ty.id]:vy}}let _d,ty=_f.some(vy=>vy.route.lazy),ey=_f.some(vy=>vy.route.loader);if(ty)_d=!1;else if(!ey)_d=!0;else if(_e.v7_partialHydration){let vy=e.hydrationData?e.hydrationData.loaderData:null,wy=e.hydrationData?e.hydrationData.errors:null;_d=_f.every(Ty=>Ty.route.loader&&Ty.route.loader.hydrate!==!0&&(vy&&vy[Ty.route.id]!==void 0||wy&&wy[Ty.route.id]!==void 0))}else _d=e.hydrationData!=null;let sy,ny={historyAction:e.history.action,location:e.history.location,matches:_f,initialized:_d,navigation:IDLE_NAVIGATION,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||_h,fetchers:new Map,blockers:new Map},uy=Action.Pop,fy=!1,yy,xy=!1,Ey=new Map,Oy=null,Gy=!1,Ly=!1,g0=[],a0=[],e0=new Map,Ay=0,$y=-1,Hy=new Map,i0=new Set,m0=new Map,d0=new Map,A0=new Set,W0=new Map,D0=new Map,X0=!1;function l1(){if(_r=e.history.listen(vy=>{let{action:wy,location:Ty,delta:Yy}=vy;if(X0){X0=!1;return}warning(D0.size===0||Yy!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let _m=h1({currentLocation:ny.location,nextLocation:Ty,historyAction:wy});if(_m&&Yy!=null){X0=!0,e.history.go(Yy*-1),T1(_m,{state:"blocked",location:Ty,proceed(){T1(_m,{state:"proceeding",proceed:void 0,reset:void 0,location:Ty}),e.history.go(Yy)},reset(){let f0=new Map(ny.blockers);f0.set(_m,IDLE_BLOCKER),H0({blockers:f0})}});return}return p1(wy,Ty)}),h){restoreAppliedTransitions(o,Ey);let vy=()=>persistAppliedTransitions(o,Ey);o.addEventListener("pagehide",vy),Oy=()=>o.removeEventListener("pagehide",vy)}return ny.initialized||p1(Action.Pop,ny.location,{initialHydration:!0}),sy}function Q0(){_r&&_r(),Oy&&Oy(),_n.clear(),yy&&yy.abort(),ny.fetchers.forEach((vy,wy)=>F0(wy)),ny.blockers.forEach((vy,wy)=>Wy(wy))}function O0(vy){return _n.add(vy),()=>_n.delete(vy)}function H0(vy,wy){wy===void 0&&(wy={}),ny=_extends$3({},ny,vy);let Ty=[],Yy=[];_e.v7_fetcherPersist&&ny.fetchers.forEach((_m,f0)=>{_m.state==="idle"&&(A0.has(f0)?Yy.push(f0):Ty.push(f0))}),[..._n].forEach(_m=>_m(ny,{deletedFetchers:Yy,unstable_viewTransitionOpts:wy.viewTransitionOpts,unstable_flushSync:wy.flushSync===!0})),_e.v7_fetcherPersist&&(Ty.forEach(_m=>ny.fetchers.delete(_m)),Yy.forEach(_m=>F0(_m)))}function c1(vy,wy,Ty){var Yy,_m;let{flushSync:f0}=Ty===void 0?{}:Ty,h0=ny.actionData!=null&&ny.navigation.formMethod!=null&&isMutationMethod(ny.navigation.formMethod)&&ny.navigation.state==="loading"&&((Yy=vy.state)==null?void 0:Yy._isRedirect)!==!0,s0;wy.actionData?Object.keys(wy.actionData).length>0?s0=wy.actionData:s0=null:h0?s0=ny.actionData:s0=null;let t0=wy.loaderData?mergeLoaderData(ny.loaderData,wy.loaderData,wy.matches||[],wy.errors):ny.loaderData,y0=ny.blockers;y0.size>0&&(y0=new Map(y0),y0.forEach((P0,q0)=>y0.set(q0,IDLE_BLOCKER)));let R0=fy===!0||ny.navigation.formMethod!=null&&isMutationMethod(ny.navigation.formMethod)&&((_m=vy.state)==null?void 0:_m._isRedirect)!==!0;j&&($=j,j=void 0),Gy||uy===Action.Pop||(uy===Action.Push?e.history.push(vy,vy.state):uy===Action.Replace&&e.history.replace(vy,vy.state));let _v;if(uy===Action.Pop){let P0=Ey.get(ny.location.pathname);P0&&P0.has(vy.pathname)?_v={currentLocation:ny.location,nextLocation:vy}:Ey.has(vy.pathname)&&(_v={currentLocation:vy,nextLocation:ny.location})}else if(xy){let P0=Ey.get(ny.location.pathname);P0?P0.add(vy.pathname):(P0=new Set([vy.pathname]),Ey.set(ny.location.pathname,P0)),_v={currentLocation:ny.location,nextLocation:vy}}H0(_extends$3({},wy,{actionData:s0,loaderData:t0,historyAction:uy,location:vy,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:I1(vy,wy.matches||ny.matches),preventScrollReset:R0,blockers:y0}),{viewTransitionOpts:_v,flushSync:f0===!0}),uy=Action.Pop,fy=!1,xy=!1,Gy=!1,Ly=!1,g0=[],a0=[]}async function e1(vy,wy){if(typeof vy=="number"){e.history.go(vy);return}let Ty=normalizeTo(ny.location,ny.matches,_t,_e.v7_prependBasename,vy,_e.v7_relativeSplatPath,wy==null?void 0:wy.fromRouteId,wy==null?void 0:wy.relative),{path:Yy,submission:_m,error:f0}=normalizeNavigateOptions(_e.v7_normalizeFormMethod,!1,Ty,wy),h0=ny.location,s0=createLocation(ny.location,Yy,wy&&wy.state);s0=_extends$3({},s0,e.history.encodeLocation(s0));let t0=wy&&wy.replace!=null?wy.replace:void 0,y0=Action.Push;t0===!0?y0=Action.Replace:t0===!1||_m!=null&&isMutationMethod(_m.formMethod)&&_m.formAction===ny.location.pathname+ny.location.search&&(y0=Action.Replace);let R0=wy&&"preventScrollReset"in wy?wy.preventScrollReset===!0:void 0,_v=(wy&&wy.unstable_flushSync)===!0,P0=h1({currentLocation:h0,nextLocation:s0,historyAction:y0});if(P0){T1(P0,{state:"blocked",location:s0,proceed(){T1(P0,{state:"proceeding",proceed:void 0,reset:void 0,location:s0}),e1(vy,wy)},reset(){let q0=new Map(ny.blockers);q0.set(P0,IDLE_BLOCKER),H0({blockers:q0})}});return}return await p1(y0,s0,{submission:_m,pendingError:f0,preventScrollReset:R0,replace:wy&&wy.replace,enableViewTransition:wy&&wy.unstable_viewTransition,flushSync:_v})}function i1(){if(P1(),H0({revalidation:"loading"}),ny.navigation.state!=="submitting"){if(ny.navigation.state==="idle"){p1(ny.historyAction,ny.location,{startUninterruptedRevalidation:!0});return}p1(uy||ny.historyAction,ny.navigation.location,{overrideNavigation:ny.navigation})}}async function p1(vy,wy,Ty){yy&&yy.abort(),yy=null,uy=vy,Gy=(Ty&&Ty.startUninterruptedRevalidation)===!0,A1(ny.location,ny.matches),fy=(Ty&&Ty.preventScrollReset)===!0,xy=(Ty&&Ty.enableViewTransition)===!0;let Yy=j||$,_m=Ty&&Ty.overrideNavigation,f0=matchRoutes(Yy,wy,_t),h0=(Ty&&Ty.flushSync)===!0;if(!f0){let q0=getInternalRouterError(404,{pathname:wy.pathname}),{matches:n1,route:B0}=getShortCircuitMatches(Yy);m1(),c1(wy,{matches:n1,loaderData:{},errors:{[B0.id]:q0}},{flushSync:h0});return}if(ny.initialized&&!Ly&&isHashChangeOnly(ny.location,wy)&&!(Ty&&Ty.submission&&isMutationMethod(Ty.submission.formMethod))){c1(wy,{matches:f0},{flushSync:h0});return}yy=new AbortController;let s0=createClientSideRequest(e.history,wy,yy.signal,Ty&&Ty.submission),t0,y0;if(Ty&&Ty.pendingError)y0={[findNearestBoundary(f0).route.id]:Ty.pendingError};else if(Ty&&Ty.submission&&isMutationMethod(Ty.submission.formMethod)){let q0=await a1(s0,wy,Ty.submission,f0,{replace:Ty.replace,flushSync:h0});if(q0.shortCircuited)return;t0=q0.pendingActionData,y0=q0.pendingActionError,_m=getLoadingNavigation(wy,Ty.submission),h0=!1,s0=new Request(s0.url,{signal:s0.signal})}let{shortCircuited:R0,loaderData:_v,errors:P0}=await Y0(s0,wy,f0,_m,Ty&&Ty.submission,Ty&&Ty.fetcherSubmission,Ty&&Ty.replace,Ty&&Ty.initialHydration===!0,h0,t0,y0);R0||(yy=null,c1(wy,_extends$3({matches:f0},t0?{actionData:t0}:{},{loaderData:_v,errors:P0})))}async function a1(vy,wy,Ty,Yy,_m){_m===void 0&&(_m={}),P1();let f0=getSubmittingNavigation(wy,Ty);H0({navigation:f0},{flushSync:_m.flushSync===!0});let h0,s0=getTargetMatch(Yy,wy);if(!s0.route.action&&!s0.route.lazy)h0={type:ResultType.error,error:getInternalRouterError(405,{method:vy.method,pathname:wy.pathname,routeId:s0.route.id})};else if(h0=await callLoaderOrAction("action",vy,s0,Yy,_,g,_t,_e.v7_relativeSplatPath),vy.signal.aborted)return{shortCircuited:!0};if(isRedirectResult(h0)){let t0;return _m&&_m.replace!=null?t0=_m.replace:t0=h0.location===ny.location.pathname+ny.location.search,await Z0(ny,h0,{submission:Ty,replace:t0}),{shortCircuited:!0}}if(isErrorResult(h0)){let t0=findNearestBoundary(Yy,s0.route.id);return(_m&&_m.replace)!==!0&&(uy=Action.Push),{pendingActionData:{},pendingActionError:{[t0.route.id]:h0.error}}}if(isDeferredResult(h0))throw getInternalRouterError(400,{type:"defer-action"});return{pendingActionData:{[s0.route.id]:h0.data}}}async function Y0(vy,wy,Ty,Yy,_m,f0,h0,s0,t0,y0,R0){let _v=Yy||getLoadingNavigation(wy,_m),P0=_m||f0||getSubmissionFromNavigation(_v),q0=j||$,[n1,B0]=getMatchesToLoad(e.history,ny,Ty,P0,wy,_e.v7_partialHydration&&s0===!0,Ly,g0,a0,A0,m0,i0,q0,_t,y0,R0);if(m1(Fy=>!(Ty&&Ty.some(qy=>qy.route.id===Fy))||n1&&n1.some(qy=>qy.route.id===Fy)),$y=++Ay,n1.length===0&&B0.length===0){let Fy=t1();return c1(wy,_extends$3({matches:Ty,loaderData:{},errors:R0||null},y0?{actionData:y0}:{},Fy?{fetchers:new Map(ny.fetchers)}:{}),{flushSync:t0}),{shortCircuited:!0}}if(!Gy&&(!_e.v7_partialHydration||!s0)){B0.forEach(qy=>{let Jy=ny.fetchers.get(qy.key),v0=getLoadingFetcher(void 0,Jy?Jy.data:void 0);ny.fetchers.set(qy.key,v0)});let Fy=y0||ny.actionData;H0(_extends$3({navigation:_v},Fy?Object.keys(Fy).length===0?{actionData:null}:{actionData:Fy}:{},B0.length>0?{fetchers:new Map(ny.fetchers)}:{}),{flushSync:t0})}B0.forEach(Fy=>{e0.has(Fy.key)&&r1(Fy.key),Fy.controller&&e0.set(Fy.key,Fy.controller)});let g1=()=>B0.forEach(Fy=>r1(Fy.key));yy&&yy.signal.addEventListener("abort",g1);let{results:_p,loaderResults:oy,fetcherResults:hy}=await u1(ny.matches,Ty,n1,B0,vy);if(vy.signal.aborted)return{shortCircuited:!0};yy&&yy.signal.removeEventListener("abort",g1),B0.forEach(Fy=>e0.delete(Fy.key));let py=findRedirect(_p);if(py){if(py.idx>=n1.length){let Fy=B0[py.idx-n1.length].key;i0.add(Fy)}return await Z0(ny,py.result,{replace:h0}),{shortCircuited:!0}}let{loaderData:dy,errors:my}=processLoaderData(ny,Ty,n1,oy,R0,B0,hy,W0);W0.forEach((Fy,qy)=>{Fy.subscribe(Jy=>{(Jy||Fy.done)&&W0.delete(qy)})});let Py=t1(),Sy=I0($y),Ny=Py||Sy||B0.length>0;return _extends$3({loaderData:dy,errors:my},Ny?{fetchers:new Map(ny.fetchers)}:{})}function o1(vy,wy,Ty,Yy){if(d)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");e0.has(vy)&&r1(vy);let _m=(Yy&&Yy.unstable_flushSync)===!0,f0=j||$,h0=normalizeTo(ny.location,ny.matches,_t,_e.v7_prependBasename,Ty,_e.v7_relativeSplatPath,wy,Yy==null?void 0:Yy.relative),s0=matchRoutes(f0,h0,_t);if(!s0){S1(vy,wy,getInternalRouterError(404,{pathname:h0}),{flushSync:_m});return}let{path:t0,submission:y0,error:R0}=normalizeNavigateOptions(_e.v7_normalizeFormMethod,!0,h0,Yy);if(R0){S1(vy,wy,R0,{flushSync:_m});return}let _v=getTargetMatch(s0,t0);if(fy=(Yy&&Yy.preventScrollReset)===!0,y0&&isMutationMethod(y0.formMethod)){E1(vy,wy,t0,_v,s0,_m,y0);return}m0.set(vy,{routeId:wy,path:t0}),R1(vy,wy,t0,_v,s0,_m,y0)}async function E1(vy,wy,Ty,Yy,_m,f0,h0){if(P1(),m0.delete(vy),!Yy.route.action&&!Yy.route.lazy){let qy=getInternalRouterError(405,{method:h0.formMethod,pathname:Ty,routeId:wy});S1(vy,wy,qy,{flushSync:f0});return}let s0=ny.fetchers.get(vy);T0(vy,getSubmittingFetcher(h0,s0),{flushSync:f0});let t0=new AbortController,y0=createClientSideRequest(e.history,Ty,t0.signal,h0);e0.set(vy,t0);let R0=Ay,_v=await callLoaderOrAction("action",y0,Yy,_m,_,g,_t,_e.v7_relativeSplatPath);if(y0.signal.aborted){e0.get(vy)===t0&&e0.delete(vy);return}if(_e.v7_fetcherPersist&&A0.has(vy)){if(isRedirectResult(_v)||isErrorResult(_v)){T0(vy,getDoneFetcher(void 0));return}}else{if(isRedirectResult(_v))if(e0.delete(vy),$y>R0){T0(vy,getDoneFetcher(void 0));return}else return i0.add(vy),T0(vy,getLoadingFetcher(h0)),Z0(ny,_v,{fetcherSubmission:h0});if(isErrorResult(_v)){S1(vy,wy,_v.error);return}}if(isDeferredResult(_v))throw getInternalRouterError(400,{type:"defer-action"});let P0=ny.navigation.location||ny.location,q0=createClientSideRequest(e.history,P0,t0.signal),n1=j||$,B0=ny.navigation.state!=="idle"?matchRoutes(n1,ny.navigation.location,_t):ny.matches;invariant(B0,"Didn't find any matches after fetcher action");let g1=++Ay;Hy.set(vy,g1);let _p=getLoadingFetcher(h0,_v.data);ny.fetchers.set(vy,_p);let[oy,hy]=getMatchesToLoad(e.history,ny,B0,h0,P0,!1,Ly,g0,a0,A0,m0,i0,n1,_t,{[Yy.route.id]:_v.data},void 0);hy.filter(qy=>qy.key!==vy).forEach(qy=>{let Jy=qy.key,v0=ny.fetchers.get(Jy),k0=getLoadingFetcher(void 0,v0?v0.data:void 0);ny.fetchers.set(Jy,k0),e0.has(Jy)&&r1(Jy),qy.controller&&e0.set(Jy,qy.controller)}),H0({fetchers:new Map(ny.fetchers)});let py=()=>hy.forEach(qy=>r1(qy.key));t0.signal.addEventListener("abort",py);let{results:dy,loaderResults:my,fetcherResults:Py}=await u1(ny.matches,B0,oy,hy,q0);if(t0.signal.aborted)return;t0.signal.removeEventListener("abort",py),Hy.delete(vy),e0.delete(vy),hy.forEach(qy=>e0.delete(qy.key));let Sy=findRedirect(dy);if(Sy){if(Sy.idx>=oy.length){let qy=hy[Sy.idx-oy.length].key;i0.add(qy)}return Z0(ny,Sy.result)}let{loaderData:Ny,errors:Fy}=processLoaderData(ny,ny.matches,oy,my,void 0,hy,Py,W0);if(ny.fetchers.has(vy)){let qy=getDoneFetcher(_v.data);ny.fetchers.set(vy,qy)}I0(g1),ny.navigation.state==="loading"&&g1>$y?(invariant(uy,"Expected pending action"),yy&&yy.abort(),c1(ny.navigation.location,{matches:B0,loaderData:Ny,errors:Fy,fetchers:new Map(ny.fetchers)})):(H0({errors:Fy,loaderData:mergeLoaderData(ny.loaderData,Ny,B0,Fy),fetchers:new Map(ny.fetchers)}),Ly=!1)}async function R1(vy,wy,Ty,Yy,_m,f0,h0){let s0=ny.fetchers.get(vy);T0(vy,getLoadingFetcher(h0,s0?s0.data:void 0),{flushSync:f0});let t0=new AbortController,y0=createClientSideRequest(e.history,Ty,t0.signal);e0.set(vy,t0);let R0=Ay,_v=await callLoaderOrAction("loader",y0,Yy,_m,_,g,_t,_e.v7_relativeSplatPath);if(isDeferredResult(_v)&&(_v=await resolveDeferredData(_v,y0.signal,!0)||_v),e0.get(vy)===t0&&e0.delete(vy),!y0.signal.aborted){if(A0.has(vy)){T0(vy,getDoneFetcher(void 0));return}if(isRedirectResult(_v))if($y>R0){T0(vy,getDoneFetcher(void 0));return}else{i0.add(vy),await Z0(ny,_v);return}if(isErrorResult(_v)){S1(vy,wy,_v.error);return}invariant(!isDeferredResult(_v),"Unhandled fetcher deferred data"),T0(vy,getDoneFetcher(_v.data))}}async function Z0(vy,wy,Ty){let{submission:Yy,fetcherSubmission:_m,replace:f0}=Ty===void 0?{}:Ty;wy.revalidate&&(Ly=!0);let h0=createLocation(vy.location,wy.location,{_isRedirect:!0});if(invariant(h0,"Expected a location on the redirect navigation"),h){let P0=!1;if(wy.reloadDocument)P0=!0;else if(ABSOLUTE_URL_REGEX$1.test(wy.location)){const q0=e.history.createURL(wy.location);P0=q0.origin!==o.location.origin||stripBasename(q0.pathname,_t)==null}if(P0){f0?o.location.replace(wy.location):o.location.assign(wy.location);return}}yy=null;let s0=f0===!0?Action.Replace:Action.Push,{formMethod:t0,formAction:y0,formEncType:R0}=vy.navigation;!Yy&&!_m&&t0&&y0&&R0&&(Yy=getSubmissionFromNavigation(vy.navigation));let _v=Yy||_m;if(redirectPreserveMethodStatusCodes.has(wy.status)&&_v&&isMutationMethod(_v.formMethod))await p1(s0,h0,{submission:_extends$3({},_v,{formAction:wy.location}),preventScrollReset:fy});else{let P0=getLoadingNavigation(h0,Yy);await p1(s0,h0,{overrideNavigation:P0,fetcherSubmission:_m,preventScrollReset:fy})}}async function u1(vy,wy,Ty,Yy,_m){let f0=await Promise.all([...Ty.map(t0=>callLoaderOrAction("loader",_m,t0,wy,_,g,_t,_e.v7_relativeSplatPath)),...Yy.map(t0=>t0.matches&&t0.match&&t0.controller?callLoaderOrAction("loader",createClientSideRequest(e.history,t0.path,t0.controller.signal),t0.match,t0.matches,_,g,_t,_e.v7_relativeSplatPath):{type:ResultType.error,error:getInternalRouterError(404,{pathname:t0.path})})]),h0=f0.slice(0,Ty.length),s0=f0.slice(Ty.length);return await Promise.all([resolveDeferredResults(vy,Ty,h0,h0.map(()=>_m.signal),!1,ny.loaderData),resolveDeferredResults(vy,Yy.map(t0=>t0.match),s0,Yy.map(t0=>t0.controller?t0.controller.signal:null),!0)]),{results:f0,loaderResults:h0,fetcherResults:s0}}function P1(){Ly=!0,g0.push(...m1()),m0.forEach((vy,wy)=>{e0.has(wy)&&(a0.push(wy),r1(wy))})}function T0(vy,wy,Ty){Ty===void 0&&(Ty={}),ny.fetchers.set(vy,wy),H0({fetchers:new Map(ny.fetchers)},{flushSync:(Ty&&Ty.flushSync)===!0})}function S1(vy,wy,Ty,Yy){Yy===void 0&&(Yy={});let _m=findNearestBoundary(ny.matches,wy);F0(vy),H0({errors:{[_m.route.id]:Ty},fetchers:new Map(ny.fetchers)},{flushSync:(Yy&&Yy.flushSync)===!0})}function N1(vy){return _e.v7_fetcherPersist&&(d0.set(vy,(d0.get(vy)||0)+1),A0.has(vy)&&A0.delete(vy)),ny.fetchers.get(vy)||IDLE_FETCHER}function F0(vy){let wy=ny.fetchers.get(vy);e0.has(vy)&&!(wy&&wy.state==="loading"&&Hy.has(vy))&&r1(vy),m0.delete(vy),Hy.delete(vy),i0.delete(vy),A0.delete(vy),ny.fetchers.delete(vy)}function f1(vy){if(_e.v7_fetcherPersist){let wy=(d0.get(vy)||0)-1;wy<=0?(d0.delete(vy),A0.add(vy)):d0.set(vy,wy)}else F0(vy);H0({fetchers:new Map(ny.fetchers)})}function r1(vy){let wy=e0.get(vy);invariant(wy,"Expected fetch controller: "+vy),wy.abort(),e0.delete(vy)}function O1(vy){for(let wy of vy){let Ty=N1(wy),Yy=getDoneFetcher(Ty.data);ny.fetchers.set(wy,Yy)}}function t1(){let vy=[],wy=!1;for(let Ty of i0){let Yy=ny.fetchers.get(Ty);invariant(Yy,"Expected fetcher: "+Ty),Yy.state==="loading"&&(i0.delete(Ty),vy.push(Ty),wy=!0)}return O1(vy),wy}function I0(vy){let wy=[];for(let[Ty,Yy]of Hy)if(Yy<vy){let _m=ny.fetchers.get(Ty);invariant(_m,"Expected fetcher: "+Ty),_m.state==="loading"&&(r1(Ty),Hy.delete(Ty),wy.push(Ty))}return O1(wy),wy.length>0}function v1(vy,wy){let Ty=ny.blockers.get(vy)||IDLE_BLOCKER;return D0.get(vy)!==wy&&D0.set(vy,wy),Ty}function Wy(vy){ny.blockers.delete(vy),D0.delete(vy)}function T1(vy,wy){let Ty=ny.blockers.get(vy)||IDLE_BLOCKER;invariant(Ty.state==="unblocked"&&wy.state==="blocked"||Ty.state==="blocked"&&wy.state==="blocked"||Ty.state==="blocked"&&wy.state==="proceeding"||Ty.state==="blocked"&&wy.state==="unblocked"||Ty.state==="proceeding"&&wy.state==="unblocked","Invalid blocker state transition: "+Ty.state+" -> "+wy.state);let Yy=new Map(ny.blockers);Yy.set(vy,wy),H0({blockers:Yy})}function h1(vy){let{currentLocation:wy,nextLocation:Ty,historyAction:Yy}=vy;if(D0.size===0)return;D0.size>1&&warning(!1,"A router only supports one blocker at a time");let _m=Array.from(D0.entries()),[f0,h0]=_m[_m.length-1],s0=ny.blockers.get(f0);if(!(s0&&s0.state==="proceeding")&&h0({currentLocation:wy,nextLocation:Ty,historyAction:Yy}))return f0}function m1(vy){let wy=[];return W0.forEach((Ty,Yy)=>{(!vy||vy(Yy))&&(Ty.cancel(),wy.push(Yy),W0.delete(Yy))}),wy}function L1(vy,wy,Ty){if(_i=vy,_a=wy,_o=Ty||null,!_u&&ny.navigation===IDLE_NAVIGATION){_u=!0;let Yy=I1(ny.location,ny.matches);Yy!=null&&H0({restoreScrollPosition:Yy})}return()=>{_i=null,_a=null,_o=null}}function k1(vy,wy){return _o&&_o(vy,wy.map(Yy=>convertRouteMatchToUiMatch(Yy,ny.loaderData)))||vy.key}function A1(vy,wy){if(_i&&_a){let Ty=k1(vy,wy);_i[Ty]=_a()}}function I1(vy,wy){if(_i){let Ty=k1(vy,wy),Yy=_i[Ty];if(typeof Yy=="number")return Yy}return null}function M1(vy){_={},j=convertRoutesToDataRoutes(vy,g,void 0,_)}return sy={get basename(){return _t},get future(){return _e},get state(){return ny},get routes(){return $},get window(){return o},initialize:l1,subscribe:O0,enableScrollRestoration:L1,navigate:e1,fetch:o1,revalidate:i1,createHref:vy=>e.history.createHref(vy),encodeLocation:vy=>e.history.encodeLocation(vy),getFetcher:N1,deleteFetcher:f1,dispose:Q0,getBlocker:v1,deleteBlocker:Wy,_internalFetchControllers:e0,_internalActiveDeferreds:W0,_internalSetRoutes:M1},sy}function isSubmissionNavigation(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function normalizeTo(e,o,h,d,g,_,$,j){let _t,_e;if($){_t=[];for(let _n of o)if(_t.push(_n),_n.route.id===$){_e=_n;break}}else _t=o,_e=o[o.length-1];let _r=resolveTo(g||".",getResolveToMatches(_t,_),stripBasename(e.pathname,h)||e.pathname,j==="path");return g==null&&(_r.search=e.search,_r.hash=e.hash),(g==null||g===""||g===".")&&_e&&_e.route.index&&!hasNakedIndexQuery(_r.search)&&(_r.search=_r.search?_r.search.replace(/^\?/,"?index&"):"?index"),d&&h!=="/"&&(_r.pathname=_r.pathname==="/"?h:joinPaths([h,_r.pathname])),createPath(_r)}function normalizeNavigateOptions(e,o,h,d){if(!d||!isSubmissionNavigation(d))return{path:h};if(d.formMethod&&!isValidMethod(d.formMethod))return{path:h,error:getInternalRouterError(405,{method:d.formMethod})};let g=()=>({path:h,error:getInternalRouterError(400,{type:"invalid-body"})}),_=d.formMethod||"get",$=e?_.toUpperCase():_.toLowerCase(),j=stripHashFromPath(h);if(d.body!==void 0){if(d.formEncType==="text/plain"){if(!isMutationMethod($))return g();let _i=typeof d.body=="string"?d.body:d.body instanceof FormData||d.body instanceof URLSearchParams?Array.from(d.body.entries()).reduce((_o,_a)=>{let[_u,_f]=_a;return""+_o+_u+"="+_f+`
`},""):String(d.body);return{path:h,submission:{formMethod:$,formAction:j,formEncType:d.formEncType,formData:void 0,json:void 0,text:_i}}}else if(d.formEncType==="application/json"){if(!isMutationMethod($))return g();try{let _i=typeof d.body=="string"?JSON.parse(d.body):d.body;return{path:h,submission:{formMethod:$,formAction:j,formEncType:d.formEncType,formData:void 0,json:_i,text:void 0}}}catch{return g()}}}invariant(typeof FormData=="function","FormData is not available in this environment");let _t,_e;if(d.formData)_t=convertFormDataToSearchParams(d.formData),_e=d.formData;else if(d.body instanceof FormData)_t=convertFormDataToSearchParams(d.body),_e=d.body;else if(d.body instanceof URLSearchParams)_t=d.body,_e=convertSearchParamsToFormData(_t);else if(d.body==null)_t=new URLSearchParams,_e=new FormData;else try{_t=new URLSearchParams(d.body),_e=convertSearchParamsToFormData(_t)}catch{return g()}let _r={formMethod:$,formAction:j,formEncType:d&&d.formEncType||"application/x-www-form-urlencoded",formData:_e,json:void 0,text:void 0};if(isMutationMethod(_r.formMethod))return{path:h,submission:_r};let _n=parsePath(h);return o&&_n.search&&hasNakedIndexQuery(_n.search)&&_t.append("index",""),_n.search="?"+_t,{path:createPath(_n),submission:_r}}function getLoaderMatchesUntilBoundary(e,o){let h=e;if(o){let d=e.findIndex(g=>g.route.id===o);d>=0&&(h=e.slice(0,d))}return h}function getMatchesToLoad(e,o,h,d,g,_,$,j,_t,_e,_r,_n,_i,_o,_a,_u){let _f=_u?Object.values(_u)[0]:_a?Object.values(_a)[0]:void 0,_h=e.createURL(o.location),_d=e.createURL(g),ty=_u?Object.keys(_u)[0]:void 0,sy=getLoaderMatchesUntilBoundary(h,ty).filter((uy,fy)=>{let{route:yy}=uy;if(yy.lazy)return!0;if(yy.loader==null)return!1;if(_)return yy.loader.hydrate?!0:o.loaderData[yy.id]===void 0&&(!o.errors||o.errors[yy.id]===void 0);if(isNewLoader(o.loaderData,o.matches[fy],uy)||j.some(Oy=>Oy===uy.route.id))return!0;let xy=o.matches[fy],Ey=uy;return shouldRevalidateLoader(uy,_extends$3({currentUrl:_h,currentParams:xy.params,nextUrl:_d,nextParams:Ey.params},d,{actionResult:_f,defaultShouldRevalidate:$||_h.pathname+_h.search===_d.pathname+_d.search||_h.search!==_d.search||isNewRouteInstance(xy,Ey)}))}),ny=[];return _r.forEach((uy,fy)=>{if(_||!h.some(Gy=>Gy.route.id===uy.routeId)||_e.has(fy))return;let yy=matchRoutes(_i,uy.path,_o);if(!yy){ny.push({key:fy,routeId:uy.routeId,path:uy.path,matches:null,match:null,controller:null});return}let xy=o.fetchers.get(fy),Ey=getTargetMatch(yy,uy.path),Oy=!1;_n.has(fy)?Oy=!1:_t.includes(fy)?Oy=!0:xy&&xy.state!=="idle"&&xy.data===void 0?Oy=$:Oy=shouldRevalidateLoader(Ey,_extends$3({currentUrl:_h,currentParams:o.matches[o.matches.length-1].params,nextUrl:_d,nextParams:h[h.length-1].params},d,{actionResult:_f,defaultShouldRevalidate:$})),Oy&&ny.push({key:fy,routeId:uy.routeId,path:uy.path,matches:yy,match:Ey,controller:new AbortController})}),[sy,ny]}function isNewLoader(e,o,h){let d=!o||h.route.id!==o.route.id,g=e[h.route.id]===void 0;return d||g}function isNewRouteInstance(e,o){let h=e.route.path;return e.pathname!==o.pathname||h!=null&&h.endsWith("*")&&e.params["*"]!==o.params["*"]}function shouldRevalidateLoader(e,o){if(e.route.shouldRevalidate){let h=e.route.shouldRevalidate(o);if(typeof h=="boolean")return h}return o.defaultShouldRevalidate}async function loadLazyRouteModule(e,o,h){if(!e.lazy)return;let d=await e.lazy();if(!e.lazy)return;let g=h[e.id];invariant(g,"No route found in manifest");let _={};for(let $ in d){let _t=g[$]!==void 0&&$!=="hasErrorBoundary";warning(!_t,'Route "'+g.id+'" has a static property "'+$+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+$+'" will be ignored.')),!_t&&!immutableRouteKeys.has($)&&(_[$]=d[$])}Object.assign(g,_),Object.assign(g,_extends$3({},o(g),{lazy:void 0}))}async function callLoaderOrAction(e,o,h,d,g,_,$,j,_t){_t===void 0&&(_t={});let _e,_r,_n,_i=_u=>{let _f,_h=new Promise((_d,ty)=>_f=ty);return _n=()=>_f(),o.signal.addEventListener("abort",_n),Promise.race([_u({request:o,params:h.params,context:_t.requestContext}),_h])};try{let _u=h.route[e];if(h.route.lazy)if(_u){let _f,_h=await Promise.all([_i(_u).catch(_d=>{_f=_d}),loadLazyRouteModule(h.route,_,g)]);if(_f)throw _f;_r=_h[0]}else if(await loadLazyRouteModule(h.route,_,g),_u=h.route[e],_u)_r=await _i(_u);else if(e==="action"){let _f=new URL(o.url),_h=_f.pathname+_f.search;throw getInternalRouterError(405,{method:o.method,pathname:_h,routeId:h.route.id})}else return{type:ResultType.data,data:void 0};else if(_u)_r=await _i(_u);else{let _f=new URL(o.url),_h=_f.pathname+_f.search;throw getInternalRouterError(404,{pathname:_h})}invariant(_r!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+h.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(_u){_e=ResultType.error,_r=_u}finally{_n&&o.signal.removeEventListener("abort",_n)}if(isResponse(_r)){let _u=_r.status;if(redirectStatusCodes.has(_u)){let _h=_r.headers.get("Location");if(invariant(_h,"Redirects returned/thrown from loaders/actions must have a Location header"),!ABSOLUTE_URL_REGEX$1.test(_h))_h=normalizeTo(new URL(o.url),d.slice(0,d.indexOf(h)+1),$,!0,_h,j);else if(!_t.isStaticRequest){let _d=new URL(o.url),ty=_h.startsWith("//")?new URL(_d.protocol+_h):new URL(_h),ey=stripBasename(ty.pathname,$)!=null;ty.origin===_d.origin&&ey&&(_h=ty.pathname+ty.search+ty.hash)}if(_t.isStaticRequest)throw _r.headers.set("Location",_h),_r;return{type:ResultType.redirect,status:_u,location:_h,revalidate:_r.headers.get("X-Remix-Revalidate")!==null,reloadDocument:_r.headers.get("X-Remix-Reload-Document")!==null}}if(_t.isRouteRequest)throw{type:_e===ResultType.error?ResultType.error:ResultType.data,response:_r};let _f;try{let _h=_r.headers.get("Content-Type");_h&&/\bapplication\/json\b/.test(_h)?_r.body==null?_f=null:_f=await _r.json():_f=await _r.text()}catch(_h){return{type:ResultType.error,error:_h}}return _e===ResultType.error?{type:_e,error:new ErrorResponseImpl(_u,_r.statusText,_f),headers:_r.headers}:{type:ResultType.data,data:_f,statusCode:_r.status,headers:_r.headers}}if(_e===ResultType.error)return{type:_e,error:_r};if(isDeferredData(_r)){var _o,_a;return{type:ResultType.deferred,deferredData:_r,statusCode:(_o=_r.init)==null?void 0:_o.status,headers:((_a=_r.init)==null?void 0:_a.headers)&&new Headers(_r.init.headers)}}return{type:ResultType.data,data:_r}}function createClientSideRequest(e,o,h,d){let g=e.createURL(stripHashFromPath(o)).toString(),_={signal:h};if(d&&isMutationMethod(d.formMethod)){let{formMethod:$,formEncType:j}=d;_.method=$.toUpperCase(),j==="application/json"?(_.headers=new Headers({"Content-Type":j}),_.body=JSON.stringify(d.json)):j==="text/plain"?_.body=d.text:j==="application/x-www-form-urlencoded"&&d.formData?_.body=convertFormDataToSearchParams(d.formData):_.body=d.formData}return new Request(g,_)}function convertFormDataToSearchParams(e){let o=new URLSearchParams;for(let[h,d]of e.entries())o.append(h,typeof d=="string"?d:d.name);return o}function convertSearchParamsToFormData(e){let o=new FormData;for(let[h,d]of e.entries())o.append(h,d);return o}function processRouteLoaderData(e,o,h,d,g){let _={},$=null,j,_t=!1,_e={};return h.forEach((_r,_n)=>{let _i=o[_n].route.id;if(invariant(!isRedirectResult(_r),"Cannot handle redirect results in processLoaderData"),isErrorResult(_r)){let _o=findNearestBoundary(e,_i),_a=_r.error;d&&(_a=Object.values(d)[0],d=void 0),$=$||{},$[_o.route.id]==null&&($[_o.route.id]=_a),_[_i]=void 0,_t||(_t=!0,j=isRouteErrorResponse(_r.error)?_r.error.status:500),_r.headers&&(_e[_i]=_r.headers)}else isDeferredResult(_r)?(g.set(_i,_r.deferredData),_[_i]=_r.deferredData.data):_[_i]=_r.data,_r.statusCode!=null&&_r.statusCode!==200&&!_t&&(j=_r.statusCode),_r.headers&&(_e[_i]=_r.headers)}),d&&($=d,_[Object.keys(d)[0]]=void 0),{loaderData:_,errors:$,statusCode:j||200,loaderHeaders:_e}}function processLoaderData(e,o,h,d,g,_,$,j){let{loaderData:_t,errors:_e}=processRouteLoaderData(o,h,d,g,j);for(let _r=0;_r<_.length;_r++){let{key:_n,match:_i,controller:_o}=_[_r];invariant($!==void 0&&$[_r]!==void 0,"Did not find corresponding fetcher result");let _a=$[_r];if(!(_o&&_o.signal.aborted))if(isErrorResult(_a)){let _u=findNearestBoundary(e.matches,_i==null?void 0:_i.route.id);_e&&_e[_u.route.id]||(_e=_extends$3({},_e,{[_u.route.id]:_a.error})),e.fetchers.delete(_n)}else if(isRedirectResult(_a))invariant(!1,"Unhandled fetcher revalidation redirect");else if(isDeferredResult(_a))invariant(!1,"Unhandled fetcher deferred data");else{let _u=getDoneFetcher(_a.data);e.fetchers.set(_n,_u)}}return{loaderData:_t,errors:_e}}function mergeLoaderData(e,o,h,d){let g=_extends$3({},o);for(let _ of h){let $=_.route.id;if(o.hasOwnProperty($)?o[$]!==void 0&&(g[$]=o[$]):e[$]!==void 0&&_.route.loader&&(g[$]=e[$]),d&&d.hasOwnProperty($))break}return g}function findNearestBoundary(e,o){return(o?e.slice(0,e.findIndex(d=>d.route.id===o)+1):[...e]).reverse().find(d=>d.route.hasErrorBoundary===!0)||e[0]}function getShortCircuitMatches(e){let o=e.length===1?e[0]:e.find(h=>h.index||!h.path||h.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:o}],route:o}}function getInternalRouterError(e,o){let{pathname:h,routeId:d,method:g,type:_}=o===void 0?{}:o,$="Unknown Server Error",j="Unknown @remix-run/router error";return e===400?($="Bad Request",g&&h&&d?j="You made a "+g+' request to "'+h+'" but '+('did not provide a `loader` for route "'+d+'", ')+"so there is no way to handle the request.":_==="defer-action"?j="defer() is not supported in actions":_==="invalid-body"&&(j="Unable to encode submission body")):e===403?($="Forbidden",j='Route "'+d+'" does not match URL "'+h+'"'):e===404?($="Not Found",j='No route matches URL "'+h+'"'):e===405&&($="Method Not Allowed",g&&h&&d?j="You made a "+g.toUpperCase()+' request to "'+h+'" but '+('did not provide an `action` for route "'+d+'", ')+"so there is no way to handle the request.":g&&(j='Invalid request method "'+g.toUpperCase()+'"')),new ErrorResponseImpl(e||500,$,new Error(j),!0)}function findRedirect(e){for(let o=e.length-1;o>=0;o--){let h=e[o];if(isRedirectResult(h))return{result:h,idx:o}}}function stripHashFromPath(e){let o=typeof e=="string"?parsePath(e):e;return createPath(_extends$3({},o,{hash:""}))}function isHashChangeOnly(e,o){return e.pathname!==o.pathname||e.search!==o.search?!1:e.hash===""?o.hash!=="":e.hash===o.hash?!0:o.hash!==""}function isDeferredResult(e){return e.type===ResultType.deferred}function isErrorResult(e){return e.type===ResultType.error}function isRedirectResult(e){return(e&&e.type)===ResultType.redirect}function isDeferredData(e){let o=e;return o&&typeof o=="object"&&typeof o.data=="object"&&typeof o.subscribe=="function"&&typeof o.cancel=="function"&&typeof o.resolveData=="function"}function isResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function isValidMethod(e){return validRequestMethods.has(e.toLowerCase())}function isMutationMethod(e){return validMutationMethods.has(e.toLowerCase())}async function resolveDeferredResults(e,o,h,d,g,_){for(let $=0;$<h.length;$++){let j=h[$],_t=o[$];if(!_t)continue;let _e=e.find(_n=>_n.route.id===_t.route.id),_r=_e!=null&&!isNewRouteInstance(_e,_t)&&(_&&_[_t.route.id])!==void 0;if(isDeferredResult(j)&&(g||_r)){let _n=d[$];invariant(_n,"Expected an AbortSignal for revalidating fetcher deferred result"),await resolveDeferredData(j,_n,g).then(_i=>{_i&&(h[$]=_i||h[$])})}}}async function resolveDeferredData(e,o,h){if(h===void 0&&(h=!1),!await e.deferredData.resolveData(o)){if(h)try{return{type:ResultType.data,data:e.deferredData.unwrappedData}}catch(g){return{type:ResultType.error,error:g}}return{type:ResultType.data,data:e.deferredData.data}}}function hasNakedIndexQuery(e){return new URLSearchParams(e).getAll("index").some(o=>o==="")}function getTargetMatch(e,o){let h=typeof o=="string"?parsePath(o).search:o.search;if(e[e.length-1].route.index&&hasNakedIndexQuery(h||""))return e[e.length-1];let d=getPathContributingMatches(e);return d[d.length-1]}function getSubmissionFromNavigation(e){let{formMethod:o,formAction:h,formEncType:d,text:g,formData:_,json:$}=e;if(!(!o||!h||!d)){if(g!=null)return{formMethod:o,formAction:h,formEncType:d,formData:void 0,json:void 0,text:g};if(_!=null)return{formMethod:o,formAction:h,formEncType:d,formData:_,json:void 0,text:void 0};if($!==void 0)return{formMethod:o,formAction:h,formEncType:d,formData:void 0,json:$,text:void 0}}}function getLoadingNavigation(e,o){return o?{state:"loading",location:e,formMethod:o.formMethod,formAction:o.formAction,formEncType:o.formEncType,formData:o.formData,json:o.json,text:o.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(e,o){return{state:"submitting",location:e,formMethod:o.formMethod,formAction:o.formAction,formEncType:o.formEncType,formData:o.formData,json:o.json,text:o.text}}function getLoadingFetcher(e,o){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:o}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:o}}function getSubmittingFetcher(e,o){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:o?o.data:void 0}}function getDoneFetcher(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function restoreAppliedTransitions(e,o){try{let h=e.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);if(h){let d=JSON.parse(h);for(let[g,_]of Object.entries(d||{}))_&&Array.isArray(_)&&o.set(g,new Set(_||[]))}}catch{}}function persistAppliedTransitions(e,o){if(o.size>0){let h={};for(let[d,g]of o)h[d]=[...g];try{e.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY,JSON.stringify(h))}catch(d){warning(!1,"Failed to save applied view transitions in sessionStorage ("+d+").")}}}/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var h=arguments[o];for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(e[d]=h[d])}return e},_extends$2.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(e,o){let{relative:h}=o===void 0?{}:o;useInRouterContext()||invariant(!1);let{basename:d,navigator:g}=reactExports.useContext(NavigationContext),{hash:_,pathname:$,search:j}=useResolvedPath(e,{relative:h}),_t=$;return d!=="/"&&(_t=$==="/"?d:joinPaths([d,$])),g.createHref({pathname:_t,search:j,hash:_})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect(e){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(e)}function useNavigate(){let{isDataRoute:e}=reactExports.useContext(RouteContext);return e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let e=reactExports.useContext(DataRouterContext),{basename:o,future:h,navigator:d}=reactExports.useContext(NavigationContext),{matches:g}=reactExports.useContext(RouteContext),{pathname:_}=useLocation(),$=JSON.stringify(getResolveToMatches(g,h.v7_relativeSplatPath)),j=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{j.current=!0}),reactExports.useCallback(function(_e,_r){if(_r===void 0&&(_r={}),!j.current)return;if(typeof _e=="number"){d.go(_e);return}let _n=resolveTo(_e,JSON.parse($),_,_r.relative==="path");e==null&&o!=="/"&&(_n.pathname=_n.pathname==="/"?o:joinPaths([o,_n.pathname])),(_r.replace?d.replace:d.push)(_n,_r.state,_r)},[o,d,$,_,e])}const OutletContext=reactExports.createContext(null);function useOutlet(e){let o=reactExports.useContext(RouteContext).outlet;return o&&reactExports.createElement(OutletContext.Provider,{value:e},o)}function useResolvedPath(e,o){let{relative:h}=o===void 0?{}:o,{future:d}=reactExports.useContext(NavigationContext),{matches:g}=reactExports.useContext(RouteContext),{pathname:_}=useLocation(),$=JSON.stringify(getResolveToMatches(g,d.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(e,JSON.parse($),_,h==="path"),[e,$,_,h])}function useRoutesImpl(e,o,h,d){useInRouterContext()||invariant(!1);let{navigator:g}=reactExports.useContext(NavigationContext),{matches:_}=reactExports.useContext(RouteContext),$=_[_.length-1],j=$?$.params:{};$&&$.pathname;let _t=$?$.pathnameBase:"/";$&&$.route;let _e=useLocation(),_r;if(o){var _n;let _f=typeof o=="string"?parsePath(o):o;_t==="/"||(_n=_f.pathname)!=null&&_n.startsWith(_t)||invariant(!1),_r=_f}else _r=_e;let _i=_r.pathname||"/",_o=_t==="/"?_i:_i.slice(_t.length)||"/",_a=matchRoutes(e,{pathname:_o}),_u=_renderMatches(_a&&_a.map(_f=>Object.assign({},_f,{params:Object.assign({},j,_f.params),pathname:joinPaths([_t,g.encodeLocation?g.encodeLocation(_f.pathname).pathname:_f.pathname]),pathnameBase:_f.pathnameBase==="/"?_t:joinPaths([_t,g.encodeLocation?g.encodeLocation(_f.pathnameBase).pathname:_f.pathnameBase])})),_,h,d);return o&&_u?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$2({pathname:"/",search:"",hash:"",state:null,key:"default"},_r),navigationType:Action.Pop}},_u):_u}function DefaultErrorComponent(){let e=useRouteError(),o=isRouteErrorResponse(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),h=e instanceof Error?e.stack:null,g={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},o),h?reactExports.createElement("pre",{style:g},h):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,h){return h.location!==o.location||h.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:h.error,location:h.location,revalidation:o.revalidation||h.revalidation}}componentDidCatch(o,h){console.error("React Router caught the following error during render",o,h)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(e){let{routeContext:o,match:h,children:d}=e,g=reactExports.useContext(DataRouterContext);return g&&g.static&&g.staticContext&&(h.route.errorElement||h.route.ErrorBoundary)&&(g.staticContext._deepestRenderedBoundaryId=h.route.id),reactExports.createElement(RouteContext.Provider,{value:o},d)}function _renderMatches(e,o,h,d){var g;if(o===void 0&&(o=[]),h===void 0&&(h=null),d===void 0&&(d=null),e==null){var _;if((_=h)!=null&&_.errors)e=h.matches;else return null}let $=e,j=(g=h)==null?void 0:g.errors;if(j!=null){let _r=$.findIndex(_n=>_n.route.id&&(j==null?void 0:j[_n.route.id]));_r>=0||invariant(!1),$=$.slice(0,Math.min($.length,_r+1))}let _t=!1,_e=-1;if(h&&d&&d.v7_partialHydration)for(let _r=0;_r<$.length;_r++){let _n=$[_r];if((_n.route.HydrateFallback||_n.route.hydrateFallbackElement)&&(_e=_r),_n.route.id){let{loaderData:_i,errors:_o}=h,_a=_n.route.loader&&_i[_n.route.id]===void 0&&(!_o||_o[_n.route.id]===void 0);if(_n.route.lazy||_a){_t=!0,_e>=0?$=$.slice(0,_e+1):$=[$[0]];break}}}return $.reduceRight((_r,_n,_i)=>{let _o,_a=!1,_u=null,_f=null;h&&(_o=j&&_n.route.id?j[_n.route.id]:void 0,_u=_n.route.errorElement||defaultErrorElement,_t&&(_e<0&&_i===0?(warningOnce("route-fallback",!1),_a=!0,_f=null):_e===_i&&(_a=!0,_f=_n.route.hydrateFallbackElement||null)));let _h=o.concat($.slice(0,_i+1)),_d=()=>{let ty;return _o?ty=_u:_a?ty=_f:_n.route.Component?ty=reactExports.createElement(_n.route.Component,null):_n.route.element?ty=_n.route.element:ty=_r,reactExports.createElement(RenderedRoute,{match:_n,routeContext:{outlet:_r,matches:_h,isDataRoute:h!=null},children:ty})};return h&&(_n.route.ErrorBoundary||_n.route.errorElement||_i===0)?reactExports.createElement(RenderErrorBoundary,{location:h.location,revalidation:h.revalidation,component:_u,error:_o,children:_d(),routeContext:{outlet:null,matches:_h,isDataRoute:!0}}):_d()},null)}var DataRouterHook$1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(DataRouterHook$1||{}),DataRouterStateHook$1=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(DataRouterStateHook$1||{});function useDataRouterContext(e){let o=reactExports.useContext(DataRouterContext);return o||invariant(!1),o}function useDataRouterState(e){let o=reactExports.useContext(DataRouterStateContext);return o||invariant(!1),o}function useRouteContext(e){let o=reactExports.useContext(RouteContext);return o||invariant(!1),o}function useCurrentRouteId(e){let o=useRouteContext(),h=o.matches[o.matches.length-1];return h.route.id||invariant(!1),h.route.id}function useRouteError(){var e;let o=reactExports.useContext(RouteErrorContext),h=useDataRouterState(DataRouterStateHook$1.UseRouteError),d=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return o!==void 0?o:(e=h.errors)==null?void 0:e[d]}function useNavigateStable(){let{router:e}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),o=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),h=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{h.current=!0}),reactExports.useCallback(function(g,_){_===void 0&&(_={}),h.current&&(typeof g=="number"?e.navigate(g):e.navigate(g,_extends$2({fromRouteId:o},_)))},[e,o])}const alreadyWarned={};function warningOnce(e,o,h){!o&&!alreadyWarned[e]&&(alreadyWarned[e]=!0)}function Outlet(e){return useOutlet(e.context)}function Router(e){let{basename:o="/",children:h=null,location:d,navigationType:g=Action.Pop,navigator:_,static:$=!1,future:j}=e;useInRouterContext()&&invariant(!1);let _t=o.replace(/^\/*/,"/"),_e=reactExports.useMemo(()=>({basename:_t,navigator:_,static:$,future:_extends$2({v7_relativeSplatPath:!1},j)}),[_t,j,_,$]);typeof d=="string"&&(d=parsePath(d));let{pathname:_r="/",search:_n="",hash:_i="",state:_o=null,key:_a="default"}=d,_u=reactExports.useMemo(()=>{let _f=stripBasename(_r,_t);return _f==null?null:{location:{pathname:_f,search:_n,hash:_i,state:_o,key:_a},navigationType:g}},[_t,_r,_n,_i,_o,_a,g]);return _u==null?null:reactExports.createElement(NavigationContext.Provider,{value:_e},reactExports.createElement(LocationContext.Provider,{children:h,value:_u}))}new Promise(()=>{});function mapRouteProperties(e){let o={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(o,{element:reactExports.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(o,{hydrateFallbackElement:reactExports.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(o,{errorElement:reactExports.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),o}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var h=arguments[o];for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(e[d]=h[d])}return e},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(e,o){if(e==null)return{};var h={},d=Object.keys(e),g,_;for(_=0;_<d.length;_++)g=d[_],!(o.indexOf(g)>=0)&&(h[g]=e[g]);return h}function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function shouldProcessLinkClick(e,o){return e.button===0&&(!o||o==="_self")&&!isModifiedEvent(e)}const _excluded$1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];function createHashRouter(e,o){return createRouter({basename:o==null?void 0:o.basename,future:_extends$1({},o==null?void 0:o.future,{v7_prependBasename:!0}),history:createHashHistory({window:o==null?void 0:o.window}),hydrationData:(o==null?void 0:o.hydrationData)||parseHydrationData(),routes:e,mapRouteProperties,window:o==null?void 0:o.window}).initialize()}function parseHydrationData(){var e;let o=(e=window)==null?void 0:e.__staticRouterHydrationData;return o&&o.errors&&(o=_extends$1({},o,{errors:deserializeErrors(o.errors)})),o}function deserializeErrors(e){if(!e)return null;let o=Object.entries(e),h={};for(let[d,g]of o)if(g&&g.__type==="RouteErrorResponse")h[d]=new ErrorResponseImpl(g.status,g.statusText,g.data,g.internal===!0);else if(g&&g.__type==="Error"){if(g.__subType){let _=window[g.__subType];if(typeof _=="function")try{let $=new _(g.message);$.stack="",h[d]=$}catch{}}if(h[d]==null){let _=new Error(g.message);_.stack="",h[d]=_}}else h[d]=g;return h}const ViewTransitionContext=reactExports.createContext({isTransitioning:!1}),FetchersContext=reactExports.createContext(new Map),START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION],FLUSH_SYNC="flushSync",flushSyncImpl=ReactDOM[FLUSH_SYNC];function startTransitionSafe(e){startTransitionImpl?startTransitionImpl(e):e()}function flushSyncSafe(e){flushSyncImpl?flushSyncImpl(e):e()}class Deferred{constructor(){this.status="pending",this.promise=new Promise((o,h)=>{this.resolve=d=>{this.status==="pending"&&(this.status="resolved",o(d))},this.reject=d=>{this.status==="pending"&&(this.status="rejected",h(d))}})}}function RouterProvider(e){let{fallbackElement:o,router:h,future:d}=e,[g,_]=reactExports.useState(h.state),[$,j]=reactExports.useState(),[_t,_e]=reactExports.useState({isTransitioning:!1}),[_r,_n]=reactExports.useState(),[_i,_o]=reactExports.useState(),[_a,_u]=reactExports.useState(),_f=reactExports.useRef(new Map),{v7_startTransition:_h}=d||{},_d=reactExports.useCallback(uy=>{_h?startTransitionSafe(uy):uy()},[_h]),ty=reactExports.useCallback((uy,fy)=>{let{deletedFetchers:yy,unstable_flushSync:xy,unstable_viewTransitionOpts:Ey}=fy;yy.forEach(Gy=>_f.current.delete(Gy)),uy.fetchers.forEach((Gy,Ly)=>{Gy.data!==void 0&&_f.current.set(Ly,Gy.data)});let Oy=h.window==null||typeof h.window.document.startViewTransition!="function";if(!Ey||Oy){xy?flushSyncSafe(()=>_(uy)):_d(()=>_(uy));return}if(xy){flushSyncSafe(()=>{_i&&(_r&&_r.resolve(),_i.skipTransition()),_e({isTransitioning:!0,flushSync:!0,currentLocation:Ey.currentLocation,nextLocation:Ey.nextLocation})});let Gy=h.window.document.startViewTransition(()=>{flushSyncSafe(()=>_(uy))});Gy.finished.finally(()=>{flushSyncSafe(()=>{_n(void 0),_o(void 0),j(void 0),_e({isTransitioning:!1})})}),flushSyncSafe(()=>_o(Gy));return}_i?(_r&&_r.resolve(),_i.skipTransition(),_u({state:uy,currentLocation:Ey.currentLocation,nextLocation:Ey.nextLocation})):(j(uy),_e({isTransitioning:!0,flushSync:!1,currentLocation:Ey.currentLocation,nextLocation:Ey.nextLocation}))},[h.window,_i,_r,_f,_d]);reactExports.useLayoutEffect(()=>h.subscribe(ty),[h,ty]),reactExports.useEffect(()=>{_t.isTransitioning&&!_t.flushSync&&_n(new Deferred)},[_t]),reactExports.useEffect(()=>{if(_r&&$&&h.window){let uy=$,fy=_r.promise,yy=h.window.document.startViewTransition(async()=>{_d(()=>_(uy)),await fy});yy.finished.finally(()=>{_n(void 0),_o(void 0),j(void 0),_e({isTransitioning:!1})}),_o(yy)}},[_d,$,_r,h.window]),reactExports.useEffect(()=>{_r&&$&&g.location.key===$.location.key&&_r.resolve()},[_r,_i,g.location,$]),reactExports.useEffect(()=>{!_t.isTransitioning&&_a&&(j(_a.state),_e({isTransitioning:!0,flushSync:!1,currentLocation:_a.currentLocation,nextLocation:_a.nextLocation}),_u(void 0))},[_t.isTransitioning,_a]),reactExports.useEffect(()=>{},[]);let ey=reactExports.useMemo(()=>({createHref:h.createHref,encodeLocation:h.encodeLocation,go:uy=>h.navigate(uy),push:(uy,fy,yy)=>h.navigate(uy,{state:fy,preventScrollReset:yy==null?void 0:yy.preventScrollReset}),replace:(uy,fy,yy)=>h.navigate(uy,{replace:!0,state:fy,preventScrollReset:yy==null?void 0:yy.preventScrollReset})}),[h]),sy=h.basename||"/",ny=reactExports.useMemo(()=>({router:h,navigator:ey,static:!1,basename:sy}),[h,ey,sy]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:ny},reactExports.createElement(DataRouterStateContext.Provider,{value:g},reactExports.createElement(FetchersContext.Provider,{value:_f.current},reactExports.createElement(ViewTransitionContext.Provider,{value:_t},reactExports.createElement(Router,{basename:sy,location:g.location,navigationType:g.historyAction,navigator:ey,future:{v7_relativeSplatPath:h.future.v7_relativeSplatPath}},g.initialized||h.future.v7_partialHydration?reactExports.createElement(DataRoutes,{routes:h.routes,future:h.future,state:g}):o))))),null)}function DataRoutes(e){let{routes:o,future:h,state:d}=e;return useRoutesImpl(o,void 0,d,h)}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(o,h){let{onClick:d,relative:g,reloadDocument:_,replace:$,state:j,target:_t,to:_e,preventScrollReset:_r,unstable_viewTransition:_n}=o,_i=_objectWithoutPropertiesLoose$1(o,_excluded$1),{basename:_o}=reactExports.useContext(NavigationContext),_a,_u=!1;if(typeof _e=="string"&&ABSOLUTE_URL_REGEX.test(_e)&&(_a=_e,isBrowser))try{let ty=new URL(window.location.href),ey=_e.startsWith("//")?new URL(ty.protocol+_e):new URL(_e),sy=stripBasename(ey.pathname,_o);ey.origin===ty.origin&&sy!=null?_e=sy+ey.search+ey.hash:_u=!0}catch{}let _f=useHref(_e,{relative:g}),_h=useLinkClickHandler(_e,{replace:$,state:j,target:_t,preventScrollReset:_r,relative:g,unstable_viewTransition:_n});function _d(ty){d&&d(ty),ty.defaultPrevented||_h(ty)}return reactExports.createElement("a",_extends$1({},_i,{href:_a||_f,onClick:_u||_?d:_d,ref:h,target:_t}))});var DataRouterHook;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(e,o){let{target:h,replace:d,state:g,preventScrollReset:_,relative:$,unstable_viewTransition:j}=o===void 0?{}:o,_t=useNavigate(),_e=useLocation(),_r=useResolvedPath(e,{relative:$});return reactExports.useCallback(_n=>{if(shouldProcessLinkClick(_n,h)){_n.preventDefault();let _i=d!==void 0?d:createPath(_e)===createPath(_r);_t(e,{replace:_i,state:g,preventScrollReset:_,relative:$,unstable_viewTransition:j})}},[_e,_t,_r,d,g,h,e,_,$,j])}var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(e,o){if(e==null)return{};var h=_objectWithoutPropertiesLoose(e,o),d,g;if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(e);for(g=0;g<_.length;g++)d=_[g],!(o.indexOf(d)>=0)&&Object.prototype.propertyIsEnumerable.call(e,d)&&(h[d]=e[d])}return h}function _objectWithoutPropertiesLoose(e,o){if(e==null)return{};var h={},d=Object.keys(e),g,_;for(_=0;_<d.length;_++)g=d[_],!(o.indexOf(g)>=0)&&(h[g]=e[g]);return h}function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var h=arguments[o];for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(e[d]=h[d])}return e},_extends.apply(this,arguments)}function ownKeys(e,o){var h=Object.keys(e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);o&&(d=d.filter(function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable})),h.push.apply(h,d)}return h}function _objectSpread(e){for(var o=1;o<arguments.length;o++){var h=arguments[o]!=null?arguments[o]:{};o%2?ownKeys(Object(h),!0).forEach(function(d){_defineProperty(e,d,h[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(h)):ownKeys(Object(h)).forEach(function(d){Object.defineProperty(e,d,Object.getOwnPropertyDescriptor(h,d))})}return e}function _defineProperty(e,o,h){return o=_toPropertyKey(o),o in e?Object.defineProperty(e,o,{value:h,enumerable:!0,configurable:!0,writable:!0}):e[o]=h,e}function _toPropertyKey(e){var o=_toPrimitive(e,"string");return typeof o=="symbol"?o:String(o)}function _toPrimitive(e,o){if(typeof e!="object"||e===null)return e;var h=e[Symbol.toPrimitive];if(h!==void 0){var d=h.call(e,o||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(e)}function Tree2Element(e){return e&&e.map((o,h)=>React.createElement(o.tag,_objectSpread({key:h},o.attr),Tree2Element(o.child)))}function GenIcon(e){return o=>React.createElement(IconBase,_extends({attr:_objectSpread({},e.attr)},o),Tree2Element(e.child))}function IconBase(e){var o=h=>{var{attr:d,size:g,title:_}=e,$=_objectWithoutProperties(e,_excluded),j=g||h.size||"1em",_t;return h.className&&(_t=h.className),e.className&&(_t=(_t?_t+" ":"")+e.className),React.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},h.attr,d,$,{className:_t,style:_objectSpread(_objectSpread({color:e.color||h.color},h.style),e.style),height:j,width:j,xmlns:"http://www.w3.org/2000/svg"}),_&&React.createElement("title",null,_),e.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,h=>o(h)):o(DefaultContext)}function PiGearLight(e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M128,82a46,46,0,1,0,46,46A46.06,46.06,0,0,0,128,82Zm0,80a34,34,0,1,1,34-34A34,34,0,0,1,128,162ZM214,130.84c.06-1.89.06-3.79,0-5.68L229.33,106a6,6,0,0,0,1.11-5.29A105.34,105.34,0,0,0,219.76,74.9a6,6,0,0,0-4.53-3l-24.45-2.71q-1.93-2.07-4-4l-2.72-24.46a6,6,0,0,0-3-4.53,105.65,105.65,0,0,0-25.77-10.66A6,6,0,0,0,150,26.68l-19.2,15.37c-1.89-.06-3.79-.06-5.68,0L106,26.67a6,6,0,0,0-5.29-1.11A105.34,105.34,0,0,0,74.9,36.24a6,6,0,0,0-3,4.53L69.23,65.22q-2.07,1.94-4,4L40.76,72a6,6,0,0,0-4.53,3,105.65,105.65,0,0,0-10.66,25.77A6,6,0,0,0,26.68,106l15.37,19.2c-.06,1.89-.06,3.79,0,5.68L26.67,150.05a6,6,0,0,0-1.11,5.29A105.34,105.34,0,0,0,36.24,181.1a6,6,0,0,0,4.53,3l24.45,2.71q1.94,2.07,4,4L72,215.24a6,6,0,0,0,3,4.53,105.65,105.65,0,0,0,25.77,10.66,6,6,0,0,0,5.29-1.11L125.16,214c1.89.06,3.79.06,5.68,0l19.21,15.38a6,6,0,0,0,3.75,1.31,6.2,6.2,0,0,0,1.54-.2,105.34,105.34,0,0,0,25.76-10.68,6,6,0,0,0,3-4.53l2.71-24.45q2.07-1.93,4-4l24.46-2.72a6,6,0,0,0,4.53-3,105.49,105.49,0,0,0,10.66-25.77,6,6,0,0,0-1.11-5.29Zm-3.1,41.63-23.64,2.63a6,6,0,0,0-3.82,2,75.14,75.14,0,0,1-6.31,6.31,6,6,0,0,0-2,3.82l-2.63,23.63A94.28,94.28,0,0,1,155.14,218l-18.57-14.86a6,6,0,0,0-3.75-1.31h-.36a78.07,78.07,0,0,1-8.92,0,6,6,0,0,0-4.11,1.3L100.87,218a94.13,94.13,0,0,1-17.34-7.17L80.9,187.21a6,6,0,0,0-2-3.82,75.14,75.14,0,0,1-6.31-6.31,6,6,0,0,0-3.82-2l-23.63-2.63A94.28,94.28,0,0,1,38,155.14l14.86-18.57a6,6,0,0,0,1.3-4.11,78.07,78.07,0,0,1,0-8.92,6,6,0,0,0-1.3-4.11L38,100.87a94.13,94.13,0,0,1,7.17-17.34L68.79,80.9a6,6,0,0,0,3.82-2,75.14,75.14,0,0,1,6.31-6.31,6,6,0,0,0,2-3.82l2.63-23.63A94.28,94.28,0,0,1,100.86,38l18.57,14.86a6,6,0,0,0,4.11,1.3,78.07,78.07,0,0,1,8.92,0,6,6,0,0,0,4.11-1.3L155.13,38a94.13,94.13,0,0,1,17.34,7.17l2.63,23.64a6,6,0,0,0,2,3.82,75.14,75.14,0,0,1,6.31,6.31,6,6,0,0,0,3.82,2l23.63,2.63A94.28,94.28,0,0,1,218,100.86l-14.86,18.57a6,6,0,0,0-1.3,4.11,78.07,78.07,0,0,1,0,8.92,6,6,0,0,0,1.3,4.11L218,155.13A94.13,94.13,0,0,1,210.85,172.47Z"},child:[]}]})(e)}function PiHouseSimpleLight(e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M217.47,105.23l-80-75.49-.09-.08a13.94,13.94,0,0,0-18.83,0l-.09.08-80,75.5A14,14,0,0,0,34,115.55V208a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V115.55A14.06,14.06,0,0,0,217.47,105.23ZM210,208a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V115.55a2,2,0,0,1,.65-1.48l.09-.08,79.94-75.48a2,2,0,0,1,2.63,0L209.26,114l.08.08a2,2,0,0,1,.66,1.48Z"},child:[]}]})(e)}function PiSmileySadLight(e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218ZM82,108a10,10,0,1,1,10,10A10,10,0,0,1,82,108Zm92,0a10,10,0,1,1-10-10A10,10,0,0,1,174,108Zm-.81,65a6,6,0,0,1-10.38,6c-7.84-13.54-20.2-21-34.81-21s-27,7.46-34.81,21a6,6,0,0,1-5.2,3,5.9,5.9,0,0,1-3-.81A6,6,0,0,1,82.81,173c9.92-17.16,26.39-27,45.19-27S163.27,155.84,173.19,173Z"},child:[]}]})(e)}function Header(){return jsxRuntimeExports.jsxs("header",{className:"py-4 px-8 bg-[#026fca] flex flex-row justify-between items-center h-[7%]",children:[jsxRuntimeExports.jsx(Link,{to:"",children:jsxRuntimeExports.jsxs("div",{id:"left",className:"flex gap-1 items-center",children:[jsxRuntimeExports.jsx(PiHouseSimpleLight,{size:24}),jsxRuntimeExports.jsx("h1",{className:"text-lg",children:"Next Place"})]})}),jsxRuntimeExports.jsx("div",{id:"right",children:jsxRuntimeExports.jsx(Link,{to:"settings",children:jsxRuntimeExports.jsx(PiGearLight,{size:24})})})]})}const SearchContext=reactExports.createContext({addresses:void 0,setAddresses:e=>null}),SearchProvider=({children:e})=>{const[o,h]=reactExports.useState(void 0);return jsxRuntimeExports.jsx(SearchContext.Provider,{value:{addresses:o,setAddresses:h},children:e})},SettingsContext=reactExports.createContext({hereKey:void 0,setHereKey:e=>null,openRouteServiceKey:void 0,setOpenRouteServiceKey:e=>null,rapidKey:void 0,setRapidKey:e=>null}),SettingsProvider=({children:e})=>{const[o,h]=reactExports.useState("fAxJxj6az4RZNjTM-7aVF_UmqgMxYKV86wIHmZvRRtM"),[d,g]=reactExports.useState("5b3ce3597851110001cf624811b8ed45cb8c4d67bdd2a35acd6daca7"),[_,$]=reactExports.useState("d9621c30afmsh3ad9c33b658afb1p12e4d1jsn4d0f806892e3");return jsxRuntimeExports.jsx(SettingsContext.Provider,{value:{hereKey:o,setHereKey:h,openRouteServiceKey:d,setOpenRouteServiceKey:g,rapidKey:_,setRapidKey:$},children:e})};function RootLayout(){return jsxRuntimeExports.jsx(SettingsProvider,{children:jsxRuntimeExports.jsxs(SearchProvider,{children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx("main",{className:"h-[93%]",children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx("div",{children:"Loading..."}),children:jsxRuntimeExports.jsx(Outlet,{})})})]})})}function Hero(){return jsxRuntimeExports.jsxs("div",{id:"hero",className:"h-3/6 text-white flex flex-col justify-end px-8 pb-4 bg-[url('/assets/background.jpg')]",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl",children:"Next Place"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Find homes and rentals around you and what matters most"})]})}function InputBox({inputType:e,placeholder:o,labelText:h,value:d,inputUpdate:g}){return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx("input",{type:e,placeholder:o,value:d,onChange:_=>g(_.target.value),className:"bg-transparent border-b-2 border-white text-ellipsis"}),jsxRuntimeExports.jsx("label",{className:"text-xs",children:h})]})}class MissingKeyError extends Error{constructor(o){super(),this.message=o}}class InvalidParameterError extends Error{constructor(o){super(),this.message=o}}async function decodeGeolocation(e,o){var d,g,_,$,j,_t,_e,_r;if(!o)throw new MissingKeyError("API key not provided. Go to settings to save your keys");if(!e)throw new InvalidParameterError("Enter in a valid address");const h=`https://geocoder.ls.hereapi.com/6.2/geocode.json?apiKey=${o}&searchtext=${e}`;try{const _n=await fetch(h),_i=await _n.json();if(($=(_=(g=(d=_i==null?void 0:_i.Response)==null?void 0:d.View[0])==null?void 0:g.Result[0])==null?void 0:_.Location)!=null&&$.NavigationPosition[0]&&((_r=(_e=(_t=(j=_i==null?void 0:_i.Response)==null?void 0:j.View[0])==null?void 0:_t.Result[0])==null?void 0:_e.Location)!=null&&_r.Address))return{label:_i.Response.View[0].Result[0].Location.Address.Label,position:{lat:_i.Response.View[0].Result[0].Location.NavigationPosition[0].Latitude,lng:_i.Response.View[0].Result[0].Location.NavigationPosition[0].Longitude}};throw new Error(`Response did not send location data: ${JSON.stringify(_n)}`)}catch(_n){throw new Error(`Here request at 'decodeGeolocation' with url: ${h} and return an error: ${_n}`)}}const inputStyles={container:"flex flex-col gap-1",input:"px-2 py-1 text-black",label:"text-xs"};function Home(){const e=useNavigate(),{setAddresses:o}=reactExports.useContext(SearchContext),{hereKey:h}=reactExports.useContext(SettingsContext),[d,g]=reactExports.useState();let _,$;async function j(){g(void 0);try{const _t=await decodeGeolocation(_,h);o([{label:_t.label,position:{lat:_t.position.lat,lng:_t.position.lng},distance:$||10}]),e("/search")}catch(_t){(_t instanceof MissingKeyError||_t instanceof InvalidParameterError)&&g(_t.message)}}return jsxRuntimeExports.jsxs("div",{className:"h-full",children:[jsxRuntimeExports.jsx(Hero,{}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-4 my-12",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx("div",{id:"address",className:inputStyles.container+" w-5/6",children:jsxRuntimeExports.jsx(InputBox,{inputType:"text",labelText:"Address",placeholder:"City, ZIP, Address",inputUpdate:_t=>_=_t})}),jsxRuntimeExports.jsx("div",{id:"distance",className:inputStyles.container+" w-1/6",children:jsxRuntimeExports.jsx(InputBox,{inputType:"text",labelText:"Distance (time)",placeholder:"10",inputUpdate:_t=>$=Number(_t)})})]}),d&&jsxRuntimeExports.jsx("p",{className:"text-xs text-red-600",children:d}),jsxRuntimeExports.jsx("button",{className:"w-fit py-1 px-2 border",onClick:()=>j(),children:"Search"})]})]})}function TbError404(e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M3 7v4a1 1 0 0 0 1 1h3"},child:[]},{tag:"path",attr:{d:"M7 7v10"},child:[]},{tag:"path",attr:{d:"M10 8v8a1 1 0 0 0 1 1h2a1 1 0 0 0 1 -1v-8a1 1 0 0 0 -1 -1h-2a1 1 0 0 0 -1 1z"},child:[]},{tag:"path",attr:{d:"M17 7v4a1 1 0 0 0 1 1h3"},child:[]},{tag:"path",attr:{d:"M21 7v10"},child:[]}]})(e)}function NotFound(){return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col gap-4 justify-center items-center",children:[jsxRuntimeExports.jsx(TbError404,{size:64}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"Page Not Found"})]})}function FaCamera(e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(e)}function FaDotCircle(e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm80 248c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80z"},child:[]}]})(e)}function FaFilter(e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"},child:[]}]})(e)}function formatPrice(e){return e?"$"+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"N/A"}function ListingTile({listing:e}){var h;const o=e.location.address;return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap",id:"listing_"+e.property_id,children:[(h=e.primary_photo)!=null&&h.href?jsxRuntimeExports.jsx("img",{src:e.primary_photo.href,className:"mb-2 max-h-40"}):jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center bg-slate-200 h-40 mb-2",children:jsxRuntimeExports.jsx(FaCamera,{size:48})}),jsxRuntimeExports.jsxs("div",{id:"price",className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-bold",children:formatPrice(e.list_price)}),e.flags.is_price_reduced&&jsxRuntimeExports.jsx("p",{className:"text-red-400 text-sm",children:"Reduced price"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsxs("p",{children:[e.description.beds," bds"]}),jsxRuntimeExports.jsxs("p",{children:[e.description.baths," ba"]}),jsxRuntimeExports.jsxs("p",{children:[e.description.sqft," sqft"]}),jsxRuntimeExports.jsxs("p",{children:[(e.description.lot_sqft/43560).toFixed(2)," acr"]})]}),jsxRuntimeExports.jsxs("a",{target:"_blank",href:e.href,children:[jsxRuntimeExports.jsxs("p",{children:[o.street_number," ",o.street_name]}),jsxRuntimeExports.jsxs("p",{children:[o.city,", ",o.state," ",o.postal_code]})]}),jsxRuntimeExports.jsxs("span",{className:"text-xs",children:["Source: ",e.source.__typename]})]})}(function(){var p,aa=[];function ba(e){return function(){return aa[e].apply(this,arguments)}}function ca(e,o){return aa[e]=o}function da(e){var o=0;return function(){return o<e.length?{done:!1,value:e[o++]}:{done:!0}}}function ea(e){var o=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return o?o.call(e):{next:da(e)}}function fa(e){for(var o,h=[];!(o=e.next()).done;)h.push(o.value);return h}var ia=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,o,h){e!=Array.prototype&&e!=Object.prototype&&(e[o]=h.value)},ja=typeof window<"u"&&window===this?this:typeof global<"u"&&global!=null?global:this;function ka(e,o){if(o){var h=ja;e=e.split(".");for(var d=0;d<e.length-1;d++){var g=e[d];g in h||(h[g]={}),h=h[g]}e=e[e.length-1],d=h[e],o=o(d),o!=d&&o!=null&&ia(h,e,{configurable:!0,writable:!0,value:o})}}ka("Array.prototype.find",function(e){return e||function(o,h){t:{var d=this;d instanceof String&&(d=String(d));for(var g=d.length,_=0;_<g;_++){var $=d[_];if(o.call(h,$,_,d)){o=$;break t}}o=void 0}return o}});function la(){la=function(){},ja.Symbol||(ja.Symbol=ma)}function na(e,o){this.a=e,ia(this,"description",{configurable:!0,writable:!0,value:o})}na.prototype.toString=function(){return this.a};var ma=function(){function e(h){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new na("jscomp_symbol_"+(h||"")+"_"+o++,h)}var o=0;return e}();function oa(){la();var e=ja.Symbol.iterator;e||(e=ja.Symbol.iterator=ja.Symbol("Symbol.iterator")),typeof Array.prototype[e]!="function"&&ia(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return pa(da(this))}}),oa=function(){}}function pa(e){return oa(),e={next:e},e[ja.Symbol.iterator]=function(){return this},e}function qa(e,o){oa(),e instanceof String&&(e+="");var h=0,d={next:function(){if(h<e.length){var g=h++;return{value:o(g,e[g]),done:!1}}return d.next=function(){return{done:!0,value:void 0}},d.next()}};return d[Symbol.iterator]=function(){return d},d}ka("Array.prototype.keys",function(e){return e||function(){return qa(this,function(o){return o})}});var ra;if(typeof Object.setPrototypeOf=="function")ra=Object.setPrototypeOf;else{var sa;t:{var ta={Fg:!0},ua={};try{ua.__proto__=ta,sa=ua.Fg;break t}catch{}sa=!1}ra=sa?function(e,o){if(e.__proto__=o,e.__proto__!==o)throw new TypeError(e+" is not extensible");return e}:null}var va=ra;ka("Object.setPrototypeOf",function(e){return e||va}),ka("Object.values",function(e){return e||function(o){var h=[],d;for(d in o)Object.prototype.hasOwnProperty.call(o,d)&&h.push(o[d]);return h}}),ka("Object.is",function(e){return e||function(o,h){return o===h?o!==0||1/o===1/h:o!==o&&h!==h}}),ka("Array.prototype.includes",function(e){return e||function(o,h){var d=this;d instanceof String&&(d=String(d));var g=d.length;for(h=h||0,0>h&&(h=Math.max(h+g,0));h<g;h++){var _=d[h];if(_===o||Object.is(_,o))return!0}return!1}}),ka("Promise",function(e){function o($){this.C=0,this.b=void 0,this.a=[];var j=this.c();try{$(j.resolve,j.reject)}catch(_t){j.reject(_t)}}function h(){this.a=null}function d($){return $ instanceof o?$:new o(function(j){j($)})}if(e)return e;h.prototype.b=function($){if(this.a==null){this.a=[];var j=this;this.c(function(){j.g()})}this.a.push($)};var g=ja.setTimeout;h.prototype.c=function($){g($,0)},h.prototype.g=function(){for(;this.a&&this.a.length;){var $=this.a;this.a=[];for(var j=0;j<$.length;++j){var _t=$[j];$[j]=null;try{_t()}catch(_e){this.f(_e)}}}this.a=null},h.prototype.f=function($){this.c(function(){throw $})},o.prototype.c=function(){function $(_e){return function(_r){_t||(_t=!0,_e.call(j,_r))}}var j=this,_t=!1;return{resolve:$(this.m),reject:$(this.f)}},o.prototype.m=function($){if($===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if($ instanceof o)this.U($);else{t:switch(typeof $){case"object":var j=$!=null;break t;case"function":j=!0;break t;default:j=!1}j?this.s($):this.g($)}},o.prototype.s=function($){var j=void 0;try{j=$.then}catch(_t){this.f(_t);return}typeof j=="function"?this.u(j,$):this.g($)},o.prototype.f=function($){this.i(2,$)},o.prototype.g=function($){this.i(1,$)},o.prototype.i=function($,j){if(this.C!=0)throw Error("Cannot settle("+$+", "+j+"): Promise already settled in state"+this.C);this.C=$,this.b=j,this.l()},o.prototype.l=function(){if(this.a!=null){for(var $=0;$<this.a.length;++$)_.b(this.a[$]);this.a=null}};var _=new h;return o.prototype.U=function($){var j=this.c();$.sf(j.resolve,j.reject)},o.prototype.u=function($,j){var _t=this.c();try{$.call(j,_t.resolve,_t.reject)}catch(_e){_t.reject(_e)}},o.prototype.then=function($,j){function _t(_i,_o){return typeof _i=="function"?function(_a){try{_e(_i(_a))}catch(_u){_r(_u)}}:_o}var _e,_r,_n=new o(function(_i,_o){_e=_i,_r=_o});return this.sf(_t($,_e),_t(j,_r)),_n},o.prototype.catch=function($){return this.then(void 0,$)},o.prototype.sf=function($,j){function _t(){switch(_e.C){case 1:$(_e.b);break;case 2:j(_e.b);break;default:throw Error("Unexpected state: "+_e.C)}}var _e=this;this.a==null?_.b(_t):this.a.push(_t)},o.resolve=d,o.reject=function($){return new o(function(j,_t){_t($)})},o.race=function($){return new o(function(j,_t){for(var _e=ea($),_r=_e.next();!_r.done;_r=_e.next())d(_r.value).sf(j,_t)})},o.all=function($){var j=ea($),_t=j.next();return _t.done?d([]):new o(function(_e,_r){function _n(_a){return function(_u){_i[_a]=_u,_o--,_o==0&&_e(_i)}}var _i=[],_o=0;do _i.push(void 0),_o++,d(_t.value).sf(_n(_i.length-1),_r),_t=j.next();while(!_t.done)})},o}),ka("Object.entries",function(e){return e||function(o){var h=[],d;for(d in o)Object.prototype.hasOwnProperty.call(o,d)&&h.push([d,o[d]]);return h}});var wa=typeof Object.assign=="function"?Object.assign:function(e,o){for(var h=1;h<arguments.length;h++){var d=arguments[h];if(d)for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(e[g]=d[g])}return e};ka("Object.assign",function(e){return e||wa}),ka("Math.log2",function(e){return e||function(o){return Math.log(o)/Math.LN2}});var xa=this||self;function ya(e,o,h){e=e.split("."),h=h||xa,e[0]in h||typeof h.execScript>"u"||h.execScript("var "+e[0]);for(var d;e.length&&(d=e.shift());)e.length||o===void 0?h[d]&&h[d]!==Object.prototype[d]?h=h[d]:h=h[d]={}:h[d]=o}function za(){}function Aa(e){var o=typeof e;if(o=="object")if(e){if(e instanceof Array)return"array";if(e instanceof Object)return o;var h=Object.prototype.toString.call(e);if(h=="[object Window]")return"object";if(h=="[object Array]"||typeof e.length=="number"&&typeof e.splice<"u"&&typeof e.propertyIsEnumerable<"u"&&!e.propertyIsEnumerable("splice"))return"array";if(h=="[object Function]"||typeof e.call<"u"&&typeof e.propertyIsEnumerable<"u"&&!e.propertyIsEnumerable("call"))return"function"}else return"null";else if(o=="function"&&typeof e.call>"u")return"object";return o}function Ca(e){var o=Aa(e);return o=="array"||o=="object"&&typeof e.length=="number"}function Da(e){return Aa(e)=="function"}function Ea(e){var o=typeof e;return o=="object"&&e!=null||o=="function"}var Ga="closure_uid_"+(1e9*Math.random()>>>0),Ha=0;function Ia(e,o,h){return e.call.apply(e.bind,arguments)}function Ja(e,o,h){if(!e)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var g=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(g,d),e.apply(o,g)}}return function(){return e.apply(o,arguments)}}function Ka(e,o,h){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ka=Ia:Ka=Ja,Ka.apply(null,arguments)}function La(e,o){var h=Array.prototype.slice.call(arguments,1);return function(){var d=h.slice();return d.push.apply(d,arguments),e.apply(this,d)}}function t(e,o){ya(e,o,void 0)}function u(e,o){function h(){}h.prototype=o.prototype,e.j=o.prototype,e.prototype=new h,e.prototype.constructor=e,e.ap=function(d,g,_){for(var $=Array(arguments.length-2),j=2;j<arguments.length;j++)$[j-2]=arguments[j];return o.prototype[g].apply(d,$)}}function Ma(e){if(Error.captureStackTrace)Error.captureStackTrace(this,Ma);else{var o=Error().stack;o&&(this.stack=o)}e&&(this.message=String(e))}u(Ma,Error),Ma.prototype.name="CustomError";function Na(e,o){this.c=e,this.f=o,this.b=0,this.a=null}Na.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e},Na.prototype.put=function(e){this.f(e),100>this.b&&(this.b++,e.next=this.a,this.a=e)};function Oa(){this.b=this.a=null}var Qa=new Na(function(){return new Pa},function(e){e.reset()});Oa.prototype.add=function(e,o){var h=Qa.get();h.set(e,o),this.b?this.b.next=h:this.a=h,this.b=h},Oa.prototype.remove=function(){var e=null;return this.a&&(e=this.a,this.a=this.a.next,this.a||(this.b=null),e.next=null),e};function Pa(){this.next=this.b=this.a=null}Pa.prototype.set=function(e,o){this.a=e,this.b=o,this.next=null},Pa.prototype.reset=function(){this.next=this.b=this.a=null};var Ra=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Sa(e,o){return e.indexOf(o)!=-1}function Ta(e,o){return e<o?-1:e>o?1:0}function Ua(e,o){for(var h in e)if(o.call(void 0,e[h],h,e))return!0;return!1}function Va(e){for(var o in e)return!1;return!0}function Wa(e){var o={},h;for(h in e)o[h]=e[h];return o}var Xa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ya(e,o){for(var h,d,g=1;g<arguments.length;g++){d=arguments[g];for(h in d)e[h]=d[h];for(var _=0;_<Xa.length;_++)h=Xa[_],Object.prototype.hasOwnProperty.call(d,h)&&(e[h]=d[h])}}var Za;t:{var $a=xa.navigator;if($a){var ab=$a.userAgent;if(ab){Za=ab;break t}}Za=""}function bb(e){return Sa(Za,e)}var cb=Array.prototype.indexOf?function(e,o){return Array.prototype.indexOf.call(e,o,void 0)}:function(e,o){if(typeof e=="string")return typeof o!="string"||o.length!=1?-1:e.indexOf(o,0);for(var h=0;h<e.length;h++)if(h in e&&e[h]===o)return h;return-1};function db(e,o){this.b=e===eb&&o||"",this.a=fb}var fb={},eb={},gb=new db(eb,"");function hb(e,o){this.b=e===ib&&o||"",this.a=jb}hb.prototype.rc=function(){return 1};var jb={},ib={};function kb(){this.b="",this.c=lb,this.a=null}kb.prototype.rc=function(){return this.a};function mb(){var e=nb;return e instanceof kb&&e.constructor===kb&&e.c===lb?e.b:(Aa(e),"type_error:SafeHtml")}var lb={};function ob(e){var o=new kb;return o.b=e,o.a=0,o}ob("<!DOCTYPE html>");var nb=ob("");ob("<br>");function pb(e){var o=new hb(ib,gb instanceof db&&gb.constructor===db&&gb.a===fb?gb.b:"type_error:Const");o instanceof hb&&o.constructor===hb&&o.a===jb?o=o.b:(Aa(o),o="type_error:TrustedResourceUrl"),e.src=o.toString()}function qb(e){return qb[" "](e),e}qb[" "]=za;function sb(e,o){var h=tb;return Object.prototype.hasOwnProperty.call(h,e)?h[e]:h[e]=o(e)}var ub=bb("Opera"),vb=bb("Trident")||bb("MSIE"),wb=bb("Edge"),xb=bb("Gecko")&&!(Sa(Za.toLowerCase(),"webkit")&&!bb("Edge"))&&!(bb("Trident")||bb("MSIE"))&&!bb("Edge"),yb=Sa(Za.toLowerCase(),"webkit")&&!bb("Edge");function zb(){var e=xa.document;return e?e.documentMode:void 0}var Ab;t:{var Bb="",Cb=function(){var e=Za;if(xb)return/rv:([^\);]+)(\)|;)/.exec(e);if(wb)return/Edge\/([\d\.]+)/.exec(e);if(vb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(yb)return/WebKit\/(\S+)/.exec(e);if(ub)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(Cb&&(Bb=Cb?Cb[1]:""),vb){var Db=zb();if(Db!=null&&Db>parseFloat(Bb)){Ab=String(Db);break t}}Ab=Bb}var tb={};function Eb(e){return sb(e,function(){for(var o=0,h=Ra(String(Ab)).split("."),d=Ra(String(e)).split("."),g=Math.max(h.length,d.length),_=0;o==0&&_<g;_++){var $=h[_]||"",j=d[_]||"";do{if($=/(\d*)(\D*)(.*)/.exec($)||["","","",""],j=/(\d*)(\D*)(.*)/.exec(j)||["","","",""],$[0].length==0&&j[0].length==0)break;o=$[1].length==0?0:parseInt($[1],10);var _t=j[1].length==0?0:parseInt(j[1],10);o=Ta(o,_t)||Ta($[2].length==0,j[2].length==0)||Ta($[2],j[2]),$=$[3],j=j[3]}while(o==0)}return 0<=o})}var Fb;Fb=xa.document&&vb?zb():void 0,!xb&&!vb||vb&&9<=Number(Fb)||xb&&Eb("1.9.1"),vb&&Eb("9");function Gb(e){var o=document;return e=String(e),o.contentType==="application/xhtml+xml"&&(e=e.toLowerCase()),o.createElement(e)}function Hb(e){xa.setTimeout(function(){throw e},0)}var Ib;function Kb(){var e=xa.MessageChannel;if(typeof e>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!bb("Presto")&&(e=function(){var g=Gb("IFRAME");g.style.display="none",pb(g),document.documentElement.appendChild(g);var _=g.contentWindow;g=_.document,g.open(),g.write(mb()),g.close();var $="callImmediate"+Math.random(),j=_.location.protocol=="file:"?"*":_.location.protocol+"//"+_.location.host;g=Ka(function(_t){(j=="*"||_t.origin==j)&&_t.data==$&&this.port1.onmessage()},this),_.addEventListener("message",g,!1),this.port1={},this.port2={postMessage:function(){_.postMessage($,j)}}}),typeof e<"u"&&!bb("Trident")&&!bb("MSIE")){var o=new e,h={},d=h;return o.port1.onmessage=function(){if(h.next!==void 0){h=h.next;var g=h.bj;h.bj=null,g()}},function(g){d.next={bj:g},d=d.next,o.port2.postMessage(0)}}return typeof document<"u"&&"onreadystatechange"in Gb("SCRIPT")?function(g){var _=Gb("SCRIPT");_.onreadystatechange=function(){_.onreadystatechange=null,_.parentNode.removeChild(_),_=null,g(),g=null},document.documentElement.appendChild(_)}:function(g){xa.setTimeout(g,0)}}function Lb(e,o){Mb||Nb(),Ob||(Mb(),Ob=!0),Pb.add(e,o)}var Mb;function Nb(){if(xa.Promise&&xa.Promise.resolve){var e=xa.Promise.resolve(void 0);Mb=function(){e.then(Qb)}}else Mb=function(){var o=Qb;!Da(xa.setImmediate)||xa.Window&&xa.Window.prototype&&!bb("Edge")&&xa.Window.prototype.setImmediate==xa.setImmediate?(Ib||(Ib=Kb()),Ib(o)):xa.setImmediate(o)}}var Ob=!1,Pb=new Oa;function Qb(){for(var e;e=Pb.remove();){try{e.a.call(e.b)}catch(o){Hb(o)}Qa.put(e)}Ob=!1}function Rb(e){if(this.C=Sb,this.i=void 0,this.c=this.a=this.b=null,this.f=this.g=!1,e!=za)try{var o=this;e.call(void 0,function(h){Tb(o,Ub,h)},function(h){Tb(o,Vb,h)})}catch(h){Tb(this,Vb,h)}}var Sb=0,Ub=2,Vb=3;function Wb(){this.next=this.c=this.b=this.f=this.a=null,this.g=!1}Wb.prototype.reset=function(){this.c=this.b=this.f=this.a=null,this.g=!1};var Xb=new Na(function(){return new Wb},function(e){e.reset()});function Yb(e,o,h){var d=Xb.get();return d.f=e,d.b=o,d.c=h,d}function Zb(e){if(e instanceof Rb)return e;var o=new Rb(za);return Tb(o,Ub,e),o}function $b(e){return new Rb(function(o,h){h(e)})}function ac(){var e,o,h=new Rb(function(d,g){e=d,o=g});return new cc(h,e,o)}Rb.prototype.then=function(e,o,h){return dc(this,Da(e)?e:null,Da(o)?o:null,h)},Rb.prototype.$goog_Thenable=!0,Rb.prototype.cancel=function(e){if(this.C==Sb){var o=new ec(e);Lb(function(){fc(this,o)},this)}};function fc(e,o){if(e.C==Sb)if(e.b){var h=e.b;if(h.a){for(var d=0,g=null,_=null,$=h.a;$&&($.g||(d++,$.a==e&&(g=$),!(g&&1<d)));$=$.next)g||(_=$);g&&(h.C==Sb&&d==1?fc(h,o):(_?(d=_,d.next==h.c&&(h.c=d),d.next=d.next.next):gc(h),hc(h,g,Vb,o)))}e.b=null}else Tb(e,Vb,o)}function ic(e,o){e.a||e.C!=Ub&&e.C!=Vb||jc(e),e.c?e.c.next=o:e.a=o,e.c=o}function dc(e,o,h,d){var g=Yb(null,null,null);return g.a=new Rb(function(_,$){g.f=o?function(j){try{var _t=o.call(d,j);_(_t)}catch(_e){$(_e)}}:_,g.b=h?function(j){try{var _t=h.call(d,j);_t===void 0&&j instanceof ec?$(j):_(_t)}catch(_e){$(_e)}}:$}),g.a.b=e,ic(e,g),g.a}Rb.prototype.s=function(e){this.C=Sb,Tb(this,Ub,e)},Rb.prototype.m=function(e){this.C=Sb,Tb(this,Vb,e)};function Tb(e,o,h){if(e.C==Sb){e===h&&(o=Vb,h=new TypeError("Promise cannot resolve to itself")),e.C=1;t:{var d=h,g=e.s,_=e.m;if(d instanceof Rb){ic(d,Yb(g||za,_||null,e));var $=!0}else{if(d)try{var j=!!d.$goog_Thenable}catch{j=!1}else j=!1;if(j)d.then(g,_,e),$=!0;else{if(Ea(d))try{var _t=d.then;if(Da(_t)){kc(d,_t,g,_,e),$=!0;break t}}catch(_e){_.call(e,_e),$=!0;break t}$=!1}}}$||(e.i=h,e.C=o,e.b=null,jc(e),o!=Vb||h instanceof ec||lc(e,h))}}function kc(e,o,h,d,g){function _(_t){j||(j=!0,d.call(g,_t))}function $(_t){j||(j=!0,h.call(g,_t))}var j=!1;try{o.call(e,$,_)}catch(_t){_(_t)}}function jc(e){e.g||(e.g=!0,Lb(e.l,e))}function gc(e){var o=null;return e.a&&(o=e.a,e.a=o.next,o.next=null),e.a||(e.c=null),o}Rb.prototype.l=function(){for(var e;e=gc(this);)hc(this,e,this.C,this.i);this.g=!1};function hc(e,o,h,d){if(h==Vb&&o.b&&!o.g)for(;e&&e.f;e=e.b)e.f=!1;if(o.a)o.a.b=null,mc(o,h,d);else try{o.g?o.f.call(o.c):mc(o,h,d)}catch(g){nc.call(null,g)}Xb.put(o)}function mc(e,o,h){o==Ub?e.f.call(e.c,h):e.b&&e.b.call(e.c,h)}function lc(e,o){e.f=!0,Lb(function(){e.f&&nc.call(null,o)})}var nc=Hb;function ec(e){Ma.call(this,e)}u(ec,Ma),ec.prototype.name="cancel";function cc(e,o,h){this.Ak=e,this.resolve=o,this.reject=h}var x=this;function oc(){return Object.create(z,void 0)}var A=Ka,pc=String,qc=x.Object.freeze||function(e){return e};function rc(e){for(var o=Object.keys(e),h=o.length,d;h--;)d=e[o[h]],Ea(d)&&rc(d);return qc(e)}function sc(e){var o=Aa(e);if(o=="object"||o=="array"){if(Da(e.clone))return e.clone();o=o=="array"?[]:{};for(var h in e)e.hasOwnProperty(h)&&(o[h]=sc(e[h]));return o}return e}var B=[].pop(),z=/x/.exec("");function tc(e,o){return pc(e).split(o!==B?o:" ")}var uc="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(e,o,h,d,g){if(!(o=e instanceof o)&&h)throw new D(h,d,vc(g)?g:e);return o}function xc(e,o){if((C(e,o)&&e.constructor===o)===!0)throw new TypeError("Illegal constructor "+yc(o))}function zc(e,o,h,d,g){if(!(o=Ac(e)===o)&&h)throw new D(h,d,vc(g)?g:e);return o}function Bc(e,o,h,d){return zc(e,"Array",o,h,d)}t("H.lang.isArray",Bc);function vc(e){return e!==B}function Cc(e){return typeof e=="string"}t("H.lang.isString",Cc);var Dc=parseInt,Ec=parseFloat,E=isNaN;function Fc(e){return e===+e}t("H.lang.isNumber",Fc),t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(e){return typeof e=="number"&&e%1===0});function Gc(e){return!E(+e)}function Ac(e){var o=Object[uc[0]][uc[6]].call(e).match(/^\[object (\w+)\]$/);return o?o[1]:typeof e}var Hc=[];function Ic(e){0>Hc.indexOf(e)&&Hc.push(e)}Ic(Hc);function yc(e,o,h,d){var g="",_=2>arguments.length,$;return _&&(o={H:x.H},h="",d=Hc.slice()),Jc(o,!0,function(j,_t){try{if($=j[_t],_t=Kc(j,$),!(Ea($)&&$.window===$&&$.self===$||Ea($)&&0<$.nodeType&&Da($.cloneNode))&&Ea($)){if($===e)return g=h+"."+_t,!0;if(0>d.indexOf($)&&(d.push($),g=yc(e,$,h+"."+_t,d)))return!0}}catch{}}),_&&(g=g?g.substr(1).replace("."+uc[0]+".","#"):"~"+(Da(e)?Lc(e)+"()":Ac(e))),g}function Kc(e,o){var h=[];return Jc(e,!1,function(d,g){d[g]===o&&h.push(g)}),h.sort(Mc)[0]}function Mc(e,o){return o.length-e.length}var Nc=Object[uc[0]][uc[2]];function Jc(e,o,h){var d;if(e){for(g in e)if((!o||Nc.call(e,g))&&h(e,g,!0))return;for(d=uc.length;d--;){var g=uc[d];if((!o||Nc.call(e,g))&&h(e,g,!1))break}}}function Lc(e){return(e=/^\s*function ([^\( ]+)/.exec(e))?e[1]:"anonymous"}function Oc(e,o,h){h[o]="#"+o}var Pc=!!x.__karma__;function Qc(){throw Error("unimplemented method")}function Rc(e,o){o=o||{},"status"in o&&(this.status=+o.status),"statusText"in o&&(this.statusText=o.statusText),this.ok=200<=this.status&&300>this.status,this.f=!1,e?typeof e=="string"?this.c=e:(o=x.ArrayBuffer)&&o.prototype.isPrototypeOf(e)?this.a=e:o&&e.buffer?this.a=e.buffer:x.Blob.prototype.isPrototypeOf(e)&&(this.b=e):this.c=""}t("H.net.Response",Rc),Rc.prototype.type="default",Rc.prototype.type=Rc.prototype.type,Rc.prototype.status=200,Rc.prototype.status=Rc.prototype.status,Rc.prototype.statusText="OK",Rc.prototype.statusText=Rc.prototype.statusText;function Sc(e){if(e.f)return $b(new TypeError("Already read"));e.f=!0}Rc.error=function(){return Rc.a||(Rc.a=new Rc(null,{status:0,statusText:""}),Rc.a.type="error"),Rc.a},Rc.error=Rc.error,Rc.prototype.text=function(){var e=Sc(this);if(!e)if(this.c)e=Zb(this.c);else if(this.a){e=new Uint8Array(this.a);var o=e.length,h=Array(o),d;for(d=0;d<o;d++)h[d]=String.fromCharCode(e[d]);e=Zb(h.join(""))}else this.b?e=Tc(this.b):e=$b("Unsupported response body");return e},Rc.prototype.json=function(){return this.text().then(x.JSON.parse)},Rc.prototype.blob=function(){var e,o=Sc(this);return o||(this.b?e=this.b:this.a&&(e=new Blob([this.a],{type:"application/octet-stream"}))),o||Zb(e)},Rc.prototype.arrayBuffer=function(){return this.a?Sc(this)||Zb(this.a.slice(0)):this.blob().then(Rc.b)},Rc.b=function(e){var o=new FileReader;return o.readAsArrayBuffer(e),new Rb(function(h,d){o.onload=function(){h(o.result)},o.onerror=function(){d(o.error)}})};function Tc(e){var o=new FileReader;return o.readAsText(e),new Rb(function(h,d){o.onload=function(){h(o.result)},o.onerror=function(){d(o.error)}})}!Pc&&x.Response&&x.Response.error&&(Rc=x.Response,Ic(Rc.prototype));function D(e,o,h){var d=arguments.length;if(o=o!==B?+o:o,o!==B){var g=(g=/^.*?\(([^\)]+)/.exec((""+e).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?tc(g[1].replace(/\s+/g,""),","):[];g.forEach(Oc),g=g[o]||"#"+o}var _=e?yc(e):"";return d=2<d?pc(h):"",(g||d)&&(_+=" (Argument "+(g||"")+(d?" "+d:"")+")"),d=Error(_),Object.setPrototypeOf(d,D.prototype),d}u(D,Error),t("H.lang.InvalidArgumentError",D),D.prototype.name="InvalidArgumentError";function Uc(e,o,h){function d(){var _r=A(_e.b,_e),_n=+_t.timeout||0;Vc?(Wc(_e,"timeout",_r),g.timeout=_n):_n&&(_e.f=setTimeout(function(){g.abort(),_e.b({type:"timeout"})},_n)),Wc(_e,"error",_r),Wc(_e,"load",_r),g.send(_t.data)}var g,_,$,j=h&&h.headers||{},_t={},_e=this;if(!Da(o))throw new D(Uc,1,"function required");Ya(j,Xc.headers,j),Ya(_t,Xc,h||{}),_t.headers=j,this.c=o,this.a=g=new XMLHttpRequest,o=_t.method;try{g.open(o,e,!0);for(_ in j)j.hasOwnProperty(_)&&($=j[_])&&g.setRequestHeader(_,$);g.withCredentials=!!_t.withCredentials,d()}catch{this.b({type:"cors"})}}t("H.net.Xhr",Uc);var Xc={method:"GET",headers:{},data:null},Yc="withCredentials"in new XMLHttpRequest,Vc="timeout"in new XMLHttpRequest;function Wc(e,o,h){Yc?e.a.addEventListener(o,h):e.a["on"+o]=h}function Zc(e,o,h){Yc?e.a.removeEventListener(o,h):e.a["on"+o]=null}Uc.prototype.abort=function(){this.a&&(this.a.abort(),this.a&&this.b({type:"abort"}))},Uc.prototype.abort=Uc.prototype.abort,Uc.prototype.b=function(e){var o=e.type;e=this.a;var h;this.f&&clearTimeout(this.f),o==="load"?e instanceof XMLHttpRequest&&e.status!==200&&(h="network"):h=e.readyState===4&&e.status===0&&o=="error"?"cors":o!="error"?o:"network",o=this.b,Zc(this,"timeout",o),Zc(this,"error",o),Zc(this,"load",o),e=e.status===0||h&&h!=="network"?Rc.error():new Rc(e.responseText||null,e),h=this.c,delete this.b,delete this.c,delete this.a,h(e)};function $c(e,o){var h=[];return e&&h.push(yc(e)),1<arguments.length&&h.push(""+o),h=Error(h.join(" ")),Object.setPrototypeOf(h,$c.prototype),h}u($c,Error),t("H.lang.IllegalOperationError",$c),$c.prototype.name="IllegalOperationError";var bd,cd,dd;function ed(){if(this.constructor=this.constructor,!Cc("STATIC_DB"))throw new D(this.constructor,0);if(this.g=fd(),!this.g)throw new $c(this.constructor,"This browser does not support IndexedDB");this.a=[],this.c=[],this.Zh=A(this.Zh,this)}var gd,hd;p=ed.prototype,p.put=function(e,o,h,d){if(!Cc(e)&&!Fc(e))throw new D(this.put,0);if(!id(o))throw new D(this.put,1);jd(this,function(g){kd(g.put(o,e),h,d)},d)},p.get=function(e,o,h){var d;if(!Cc(e)&&!Fc(e))throw new D(this.get,0);if(!Da(o))throw new D(this.get,1);return jd(this,function(g){d=g.get(e),kd(d,o,h)},h),{cancel:function(){d&&(d.onsuccess=ld)}}},p.remove=function(e,o,h){if(!Cc(e)&&!Fc(e))throw new D(this.remove,0);jd(this,function(d){kd(d.delete(e),o,h)},h)},p.clear=function(e,o){jd(this,function(h){kd(h.clear(),e,o)},o)},p.Zh=function(){var e=this.b.result;e.objectStoreNames.contains("data")||e.createObjectStore("data")};function md(e,o,h){if(e.b)e.a?(e.a.push(o),h&&e.c.push(h)):e.f?h&&h(e.f):o(e.b.result);else{e.b=e.g.open("H_STATIC_DB",1),e.b.onupgradeneeded=e.Zh;var d=e.b.onerror=function(){clearTimeout(e.i),e.f=this.error,e.c.forEach(function(g){g(e.f)}),delete e.a,delete e.c};e.i=setTimeout(function(){d.call({error:Error("DbOpenTimeoutError")})},500),e.b.onsuccess=function(){clearTimeout(e.i),e.a?(e.a.forEach(function(g){g(this.result)},this),delete e.a,delete e.c):(delete e.b,delete e.f,e.a=[],e.c=[])},e.a.push(o),h&&e.c.push(h)}}function jd(e,o,h){md(e,function(d){d=d.transaction(["data"],"readwrite"),o(d.objectStore("data"))},h)}function kd(e,o,h){o&&(e.onsuccess=function(){o(this.result)}),h&&(e.onerror=function(){h(this.error)})}function id(e){var o=Object.prototype.toString.call(e);return o==="[object Blob]"||o==="[object ArrayBuffer]"||Cc(e)||Ea(e)}function nd(){return gd||(gd=new ed),gd}t("H.util.IndexedDBStorage.getInstance",nd);function fd(){return x.indexedDB||x.webkitIndexedDB||x.mozIndexedDB||x.msIndexedDB}function od(){var e="";if(!vc(hd))if(window.location.protocol==="file:"&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)hd=!1;else{try{var o=fd();e="H_TEST_DB";var h=o&&o.open(e,1)}catch{}hd=!!h&&h.onupgradeneeded===null,h&&o.deleteDatabase&&o.deleteDatabase(e)}return hd}t("H.util.IndexedDBStorage.isSupported",od);function qd(){this.zd=this.zd,this.mb=this.mb}var rd=0;qd.prototype.zd=!1,qd.prototype.F=function(){!this.zd&&(this.zd=!0,this.o(),rd!=0)&&(this[Ga]||(this[Ga]=++Ha))},qd.prototype.tb=function(e,o){this.zd?o!==void 0?e.call(o):e():(this.mb||(this.mb=[]),this.mb.push(o!==void 0?Ka(e,o):e))},qd.prototype.o=function(){if(this.mb)for(;this.mb.length;)this.mb.shift()()};function td(e){e&&typeof e.F=="function"&&e.F()}function ud(e,o){this.type=e,this.currentTarget=this.target=o,this.c=this.a=!1,this.Ik=!0}ud.prototype.stopPropagation=function(){this.a=!0},ud.prototype.preventDefault=function(){this.c=!0,this.Ik=!1},t("H.util.Event",ud),ud.prototype.stopPropagation=ud.prototype.stopPropagation,ud.prototype.stopPropagation=ud.prototype.stopPropagation,ud.prototype.CAPTURING_PHASE=1,ud.prototype.CAPTURING_PHASE=ud.prototype.CAPTURING_PHASE,ud.prototype.AT_TARGET=2,ud.prototype.AT_TARGET=ud.prototype.AT_TARGET,ud.prototype.BUBBLING_PHASE=3,ud.prototype.BUBBLING_PHASE=ud.prototype.BUBBLING_PHASE,ud.prototype.eventPhase=0,ud.prototype.eventPhase=ud.prototype.eventPhase;function vd(e,o,h){vd.j.constructor.call(this,e,h),this.data=o}u(vd,ud),t("H.util.DataEvent",vd);function wd(e,o,h){wd.j.constructor.call(this,e,h),this.message=o}u(wd,ud),t("H.util.ErrorEvent",wd);var xd=Math,yd=xd.min,zd=xd.max,Ad=xd.round,Bd=xd.floor,Cd=xd.ceil,Dd=xd.abs,Ed=xd.log,Fd=xd.sqrt,Gd=xd.pow,Hd=xd.exp,Id=xd.sin,Jd=xd.asin,Kd=xd.cos,Ld=xd.tan,Md=xd.atan,Nd=xd.atan2,Od=xd.LN2,Pd=xd.PI,Qd=Pd/2,Rd=Pd/4,Sd=2*Pd,Td=3*Pd,Ud=Pd/180,Vd=180/Pd,Wd=1/0,Xd=Gd(-2,53),Yd=Yd||function(e){return Ed(e)/Od};function Zd(e,o){var h;return 0>(h=e%o)==0>o?h:h+o}function $d(e,o,h){return o-=h=h||0,e-=h,e-Bd(e/o)*o+h}t("H.math.normalize",$d);function ae(e,o,h){return e>h?h:e<o?o:e}t("H.math.clamp",ae);function be(e,o,h,d){return d||(d=0),o<h?e>=o-d&&e<=h+d:e>=h-d&&e<=o+d}function ce(e,o,h,d,g,_){return Fd(Gd((e-g)*(d-_)-(o-_)*(h-g),2)/(Gd(h-g,2)+Gd(d-_,2)))}var de={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};t("H.math.CoverType",de);function ee(e,o,h,d,g,_){var $=h.length,j=$,_t=h[0],_e=0,_r=0,_n=0;d=d/2||0;var _i=_||2;_=_i*(g?0:1)+1;for(var _o=_i-2;_e!=1&&j>_;){j-=_o;var _a=h[--j];_i=h[--j];var _u=h[j?j-_o-1:($+(j-_o-1))%$],_f=h[j?j-_o-2:($+(j-_o-2))%$];_i>=e-d&&_i<=e+d&&_a>=o-d&&_a<=o+d||_f>=e-d&&_f<=e+d&&_u>=o-d&&_u<=o+d?_e=1:!_e&&_i===e?(_f===e&&(_a<o&&_u>o||_a>o&&_u<o)||(_t<=e&&_f>e||_t>=e&&_f<e)&&(_a>=o?++_r:++_n),_e=be(o,_a,_u,d)&&ce(e,o,_i,_a,_f,_u)<=d?2:0):!_e&&be(e,_i,_f,d)&&((_i<e&&_f>e||_i>e&&_f<e)&&(_t=_a+(e-_i)/(_f-_i)*(_u-_a),_r+=_t>o,_n+=_t<o),_e=be(o,_a,_u,d)&&ce(e,o,_i,_a,_f,_u)<=d?2:0),_t=_i}return!_e&&g&&_n!==0&&_r%2!==0&&(_e=3),_e}function fe(e,o){return ee(e.x,e.y,o,0,!0)!==de.NONE}t("H.math.isPointInsidePolygon",fe);function ge(e){for(var o=e.length,h=new Float64Array(2*o),d=o&&vc(e[0].x);o--;){var g=e[o],_=o<<1;h[_]=d?g.x:g[0],h[_+1]=d?g.y:g[1]}return h}t("H.math.flatten",ge);function he(){}t("H.util.ICancelable",he),he.prototype.cancel=function(){},he.prototype.cancel=he.prototype.cancel;function ie(e,o,h){this.type=e,this.data=o,this.c=ac(),this.resolve=A(this.resolve,this),this.reject=A(this.reject,this),this.priority=je,h!==B&&(this.priority=h),this.fh().add(this)}var je=1,ke={Vo:0,Yo:je,To:2};p=ie.prototype,p.then=function(e,o,h){return this.c.Ak.then(e,o,h)},p.resolve=function(e){this.Yd=3,this.c.resolve(e)},p.reject=function(e){this.Yd=5,this.c.reject(e)},p.Yd=0,p.cancel=function(){3>this.Yd&&(this.oe(),this.fh().remove(this),this.Yd=4)},ie.prototype.cancel=ie.prototype.cancel;function le(e){var o;this.a={};for(o in ke)this.a[ke[o]]=[];this.Ze=e,this.Ze.addEventListener("allocatable",A(this.b,this))}t("H.util.JobManager",le);var me=Object.keys(ke).map(function(e){return ke[e]}).sort().reverse();le.prototype.add=function(e){C(e,ie,this.add,0),this.a[e.priority].push(e),this.b()},le.prototype.contains=function(e){return-1<this.a[e.priority].indexOf(e)},le.prototype.remove=function(e){var o=e.priority,h=this.a[o].indexOf(e);return-1<h?(this.a[o].splice(h,1),!0):(e.Li&&this.Ze.yf(e.Li),!1)},le.prototype.b=function(){me.forEach(function(e){this.a[e]=this.a[e].filter(function(o){var h;if((h=this.Ze.Jg(o))!==z){var d=A(this.Ze.yf,this.Ze,h,o);o.Li=h,o.then(d,d),o.Yd=o.qj(h)?1:5}else return!0},this)},this)};function ne(e,o,h){var d=[],g=arguments.length;return e&&d.push(yc(e)),1<g&&(g=2<g&&Bc(h)?" out of ["+h[0]+"..."+h[1]+"]":"",d.push("("+o+g+")")),d=Error(d.join(" ")),Object.setPrototypeOf(d,ne.prototype),d}u(ne,Error),t("H.lang.OutOfRangeError",ne),ne.prototype.name="OutOfRangeError";var oe="closure_listenable_"+(1e6*Math.random()|0);function pe(e){return!(!e||!e[oe])}var qe=0;function re(e,o,h,d,g){this.listener=e,this.proxy=null,this.src=o,this.type=h,this.capture=!!d,this.Mf=g,this.key=++qe,this.be=this.rf=!1}function se(e){e.be=!0,e.listener=null,e.proxy=null,e.src=null,e.Mf=null}function te(e){this.src=e,this.a={},this.b=0}te.prototype.add=function(e,o,h,d,g){var _=e.toString();e=this.a[_],e||(e=this.a[_]=[],this.b++);var $=ue(e,o,d,g);return-1<$?(o=e[$],h||(o.rf=!1)):(o=new re(o,this.src,_,!!d,g),o.rf=h,e.push(o)),o},te.prototype.remove=function(e,o,h,d){if(e=e.toString(),!(e in this.a))return!1;var g=this.a[e];return o=ue(g,o,h,d),-1<o?(se(g[o]),Array.prototype.splice.call(g,o,1),g.length==0&&(delete this.a[e],this.b--),!0):!1};function ve(e,o){var h=o.type;if(!(h in e.a))return!1;var d=e.a[h],g=cb(d,o),_;return(_=0<=g)&&Array.prototype.splice.call(d,g,1),_&&(se(o),e.a[h].length==0&&(delete e.a[h],e.b--)),_}te.prototype.na=function(e){e=e&&e.toString();var o=0,h;for(h in this.a)if(!e||h==e){for(var d=this.a[h],g=0;g<d.length;g++)++o,se(d[g]);delete this.a[h],this.b--}return o},te.prototype.sh=function(e,o){var h=e!==void 0,d=h?e.toString():"",g=o!==void 0;return Ua(this.a,function(_){for(var $=0;$<_.length;++$)if(!(h&&_[$].type!=d||g&&_[$].capture!=o))return!0;return!1})};function ue(e,o,h,d){for(var g=0;g<e.length;++g){var _=e[g];if(!_.be&&_.listener==o&&_.capture==!!h&&_.Mf==d)return g}return-1}var we=!vb||9<=Number(Fb),xe=vb&&!Eb("9");!yb||Eb("528"),xb&&Eb("1.9b")||vb&&Eb("8")||ub&&Eb("9.5")||yb&&Eb("528"),xb&&!Eb("8")||vb&&Eb("9");var ye=function(){if(!xa.addEventListener||!Object.defineProperty)return!1;var e=!1,o=Object.defineProperty({},"passive",{get:function(){e=!0}});try{xa.addEventListener("test",za,o),xa.removeEventListener("test",za,o)}catch{}return e}();function ze(e,o){if(ud.call(this,e?e.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.b=null,e){var h=this.type=e.type,d=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.currentTarget=o,o=e.relatedTarget){if(xb){t:{try{qb(o.nodeName);var g=!0;break t}catch{}g=!1}g||(o=null)}}else h=="mouseover"?o=e.fromElement:h=="mouseout"&&(o=e.toElement);this.relatedTarget=o,d?(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:Ae[e.pointerType]||"",this.b=e,e.defaultPrevented&&this.preventDefault()}}u(ze,ud);var Ae={2:"touch",3:"pen",4:"mouse"};ze.prototype.stopPropagation=function(){ze.j.stopPropagation.call(this),this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0},ze.prototype.preventDefault=function(){ze.j.preventDefault.call(this);var e=this.b;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,xe)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch{}};var Be="closure_lm_"+(1e6*Math.random()|0),Ce={};function Ee(e,o,h,d,g){if(d&&d.once)return Fe(e,o,h,d,g);if(Aa(o)=="array"){for(var _=0;_<o.length;_++)Ee(e,o[_],h,d,g);return null}return h=Ge(h),pe(e)?e.U.add(String(o),h,!1,Ea(d)?!!d.capture:!!d,g):He(e,o,h,!1,d,g)}function He(e,o,h,d,g,_){if(!o)throw Error("Invalid event type");var $=Ea(g)?!!g.capture:!!g,j=Ie(e);if(j||(e[Be]=j=new te(e)),h=j.add(o,h,d,$,_),h.proxy)return h;if(d=Je(),h.proxy=d,d.src=e,d.listener=h,e.addEventListener)ye||(g=$),g===void 0&&(g=!1),e.addEventListener(o.toString(),d,g);else if(e.attachEvent)e.attachEvent(Ke(o.toString()),d);else if(e.addListener&&e.removeListener)e.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");return h}function Je(){var e=Le,o=we?function(h){return e.call(o.src,o.listener,h)}:function(h){if(h=e.call(o.src,o.listener,h),!h)return h};return o}function Fe(e,o,h,d,g){if(Aa(o)=="array"){for(var _=0;_<o.length;_++)Fe(e,o[_],h,d,g);return null}return h=Ge(h),pe(e)?e.U.add(String(o),h,!0,Ea(d)?!!d.capture:!!d,g):He(e,o,h,!0,d,g)}function Me(e,o,h,d,g){if(Aa(o)=="array"){for(var _=0;_<o.length;_++)Me(e,o[_],h,d,g);return null}return d=Ea(d)?!!d.capture:!!d,h=Ge(h),pe(e)?e.U.remove(String(o),h,d,g):e&&(e=Ie(e))&&(o=e.a[o.toString()],e=-1,o&&(e=ue(o,h,d,g)),h=-1<e?o[e]:null)?Ne(h):!1}function Ne(e){if(typeof e=="number"||!e||e.be)return!1;var o=e.src;if(pe(o))return ve(o.U,e);var h=e.type,d=e.proxy;return o.removeEventListener?o.removeEventListener(h,d,e.capture):o.detachEvent?o.detachEvent(Ke(h),d):o.addListener&&o.removeListener&&o.removeListener(d),(h=Ie(o))?(ve(h,e),h.b==0&&(h.src=null,o[Be]=null)):se(e),!0}function Ke(e){return e in Ce?Ce[e]:Ce[e]="on"+e}function Oe(e,o,h,d){var g=!0;if((e=Ie(e))&&(o=e.a[o.toString()]))for(o=o.concat(),e=0;e<o.length;e++){var _=o[e];_&&_.capture==h&&!_.be&&(_=Pe(_,d),g=g&&_!==!1)}return g}function Pe(e,o){var h=e.listener,d=e.Mf||e.src;return e.rf&&Ne(e),h.call(d,o)}function Le(e,o){if(e.be)return!0;if(!we){if(!o)t:{o=["window","event"];for(var h=xa,d=0;d<o.length;d++)if(h=h[o[d]],h==null){o=null;break t}o=h}if(d=o,o=new ze(d,this),h=!0,!(0>d.keyCode||d.returnValue!=null)){t:{var g=!1;if(d.keyCode==0)try{d.keyCode=-1;break t}catch{g=!0}(g||d.returnValue==null)&&(d.returnValue=!0)}for(d=[],g=o.currentTarget;g;g=g.parentNode)d.push(g);for(e=e.type,g=d.length-1;!o.a&&0<=g;g--){o.currentTarget=d[g];var _=Oe(d[g],e,!0,o);h=h&&_}for(g=0;!o.a&&g<d.length;g++)o.currentTarget=d[g],_=Oe(d[g],e,!1,o),h=h&&_}return h}return Pe(e,new ze(o,this))}function Ie(e){return e=e[Be],e instanceof te?e:null}var Qe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ge(e){return Da(e)?e:(e[Qe]||(e[Qe]=function(o){return e.handleEvent(o)}),e[Qe])}function F(){qd.call(this),this.U=new te(this),this.wn=this,this.Mg=null}u(F,qd),F.prototype[oe]=!0,p=F.prototype,p.Mb=function(){return this.Mg},p.ka=function(e){this.Mg=e},p.addEventListener=function(e,o,h,d){Ee(this,e,o,h,d)},p.removeEventListener=function(e,o,h,d){Me(this,e,o,h,d)},p.dispatchEvent=function(e){var o,h=this.Mb();if(h)for(o=[];h;h=h.Mb())o.push(h);h=this.wn;var d=e.type||e;if(typeof e=="string")e=new ud(e,h);else if(e instanceof ud)e.target=e.target||h;else{var g=e;e=new ud(d,h),Ya(e,g)}if(g=!0,o)for(var _=o.length-1;!e.a&&0<=_;_--){var $=e.currentTarget=o[_];g=$.jd(d,!0,e)&&g}if(e.a||($=e.currentTarget=h,g=$.jd(d,!0,e)&&g,e.a||(g=$.jd(d,!1,e)&&g)),o)for(_=0;!e.a&&_<o.length;_++)$=e.currentTarget=o[_],g=$.jd(d,!1,e)&&g;return g},p.o=function(){F.j.o.call(this),this.U&&this.U.na(void 0),this.Mg=null},p.jd=function(e,o,h){if(e=this.U.a[String(e)],!e)return!0;e=e.concat();for(var d=!0,g=0;g<e.length;++g){var _=e[g];if(_&&!_.be&&_.capture==o){var $=_.listener,j=_.Mf||_.src;_.rf&&ve(this.U,_),d=$.call(j,h)!==!1&&d}}return d&&h.Ik!=0},p.sh=function(e,o){return this.U.sh(e!==void 0?String(e):void 0,o)},t("H.util.EventTarget",F),F.prototype.ka=F.prototype.ka,F.prototype.setParentEventTarget=F.prototype.ka,F.prototype.Mb=F.prototype.Mb,F.prototype.getParentEventTarget=F.prototype.Mb,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.F=F.prototype.F,F.prototype.dispose=F.prototype.F,F.prototype.tb=F.prototype.tb,F.prototype.addOnDisposeCallback=F.prototype.tb,F.prototype.xn=F.prototype.jd,F.prototype.jd=function(e,o,h){var d,g,_=!0,$=h[h.currentTarget===h.target?"AT_TARGET":o?"CAPTURING_PHASE":(d=!0,"BUBBLING_PHASE")];return(!d||(g=h.type)!=="pointerenter"&&g!=="pointerleave")&&(h.eventPhase=$,_=F.prototype.xn.apply(this,arguments),d&&this.Mb&&this.Mb()===null&&delete h.eventPhase),_},F.prototype.Tk=function(e){for(var o,h=this;h&&(o=h.Mb())&&o!==e;)h=o;o||h.ka(e)},F.prototype.setRootParentEventTarget=F.prototype.Tk;function Re(e){e=e||{};var o=e.callback;this.b=e.label,Da(o)&&(this.callback=o),this.a=!!e.disabled,Re.j.constructor.call(this)}u(Re,F),t("H.util.ContextItem",Re),Re.prototype.Ge=function(){return this.b},Re.prototype.getLabel=Re.prototype.Ge,Re.prototype.Jc=function(e){return this.b!==e&&(this.b=e,this.dispatchEvent("update")),this},Re.prototype.setLabel=Re.prototype.Jc,Re.prototype.dc=function(){return this.a},Re.prototype.isDisabled=Re.prototype.dc,Re.prototype.va=function(e){return e!==this.a&&(this.a=e,this.dispatchEvent("update")),this},Re.prototype.setDisabled=Re.prototype.va;var Se=new Re;Re.SEPARATOR=Se;function Te(e){if(x.document){var o=document.createElement("canvas");return o.width=o.height=1,o.getContext("2d",{fp:e})}return null}function Ue(){return window.devicePixelRatio||1}t("H.util.getPixelRatio",Ue);var Ve=/^rgba\(([^,]+),([^,]+),([^,]+),([^)]+)\)$/;function We(e){var o=Xe[e],h=x.RegExp;return o||(x.Uint8ClampedArray||(x.Uint8ClampedArray=function(d){return d instanceof Number?Array(d):d.map(function(g){return ae(Ad(g),0,255)})}),e==="none"?o=new Uint8ClampedArray([0,0,0,0]):(Ye.fillStyle="black",Ye.fillStyle=e,Ve.test(Ye.fillStyle)?o=new Uint8ClampedArray([h.$1,h.$2,h.$3,255*h.$4]):(Ye.clearRect(0,0,1,1),Ye.fillRect(0,0,1,1),o=Ye.getImageData(0,0,1,1).data)),Xe[e]=o),o}function Ze(e){return e!=="none"&&0<We(e)[3]}var Xe=oc(),$e=!!x.VBArray;t("H.util.eval",function(a){return eval(a)});function af(e,o){return e!==B?e:o}function bf(e){return/^<svg/.test(e)?"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e):e}t("H.util.provide",function(e){var o=xa.$jscomp;if(o&&(typeof o.Vl=="function"&&o.Vl()))throw Error("goog.provide cannot be used within a module.");ya(e,void 0)});function cf(e){this.fc=0<+e?xd.round(e):0}cf.prototype.next=function(e){if(this.fc===9007199254740992)throw new ne(e,this.fc,[0,9007199254740991]);return this.fc++};var df=new cf,ef=A(df.next,df);function ff(){return!0}function gf(){return!1}function ld(){}var hf=qc([]),jf=qc({});function kf(e){return e.tagName==="CANVAS"?[e]:e.getElementsByTagName("CANVAS")}function lf(e,o,h){var d;if(o=e.ownerDocument===o?e.cloneNode(!0):o.importNode(e,!0),h)for(e=kf(e),h=kf(o),d=h.length;d--;)h[d].getContext("2d").drawImage(e[d],0,0);return o}var Ye=Te(!0),mf=Te(!1);function nf(e){var o=e.complete,h=0<e.naturalWidth;if(o&&!h&&$e)try{mf.drawImage(e,0,0),h=!0}catch{}return o&&h}var of=x.BlobBuilder||x.WebKitBlobBuilder||x.MozBlobBuilder;function pf(e,o){if(o=o||"",of){var h=new of;h.append(e),e=h.getBlob(o)}else e=new Blob([e],{type:o});return e}var qf=x.navigator;cd=/Edge\/\d+/.test(qf.appVersion),dd=/(A|a)ndroid/.test(qf.appVersion);function rf(){var e=rf.a;return e||(e=this,rf.a=e,Ic(rf.a),F.call(e),sf(this)),e}u(rf,F),rf.prototype.o=function(){rf.j.o.call(this),sf(this)};function sf(e){e.g=10,e.i=6,e.a=oc(),e.b=oc(),e.c=0}rf.prototype.Jg=function(e){e=e.type;var o=this.a[e]||0;if(this.c<this.g&&o<this.i){var h=++this.f;return this.c++,this.a[e]=o+1,this.b[h+""]=e,h}return z},rf.prototype.yf=function(e){var o=this.b[e];if(!vc(o)||!this.a[o])throw new $c(this.yf,"Unknown requestId");this.c--,this.a[o]--,this.a[o]||delete this.a[o],delete this.b[e],this.dispatchEvent("allocatable")},rf.prototype.f=-1;function tf(e,o,h,d){if(!uf[e])throw new D(tf,0,"Mime type is not supported");this.f=e,e=d?Wa(d):{},"crossOrigin"in e||(e.crossOrigin="anonymous"),this.a=e,vf.href=o.toString(),ie.call(this,vf.protocol+"//"+vf.hostname,o,h)}u(tf,ie),tf.prototype.qj=function(){return this.b=uf[this.f].call(this),!0},tf.prototype.oe=function(){this.b&&(this.b.abort(),delete this.b)};var uf={"application/json":function(){var e=this,o=wf(this.a),h=o.headers;return o.headers=h=h?Wa(h):{},h.Accept="application/json",new Uc(this.data,function(d){200<=d.status&&300>d.status?e.resolve(d.json()):e.reject(d)},o)},"text/plain":function(){var e=this;return new Uc(this.data,function(o){200<=o.status&&300>o.status?e.resolve(o.text()):e.reject(o)},wf(this.a))},image:function(){var e=x.document.createElement("img"),o=this,h=this.data;return e.onload=A(this.resolve,this,e),e.onerror=function(){o.reject(Rc.error())},e.crossOrigin=this.a.crossOrigin,e.src=h,{abort:function(){e.onerror=e.onload=null,$e&&nf(e)||e.removeAttribute("src")}}}};(function(){try{var e=new XMLHttpRequest;e.open("get","/",!0)}catch{e={}}"response"in e&&(uf.arraybuffer=function(){var o=new XMLHttpRequest,h=this,d=this.a,g=d.headers,_;if(o.open("GET",this.data),xf(o,d),o.responseType="arraybuffer",g)for(_ in g)o.setRequestHeader(_,g[_]);return o.onerror=o.ontimeout=function(){h.reject(Rc.error())},o.onload=function(){h.resolve(new Rc(o.response))},o.send(),o})})();var yf=new le(new rf);tf.prototype.fh=function(){return yf};var vf=x.document.createElement("a");function wf(e){var o=Wa(e);return delete o.crossOrigin,xf(o,e),o}function xf(e,o){e.withCredentials=o.crossOrigin==="use-credentials"}function J(e,o){this.x=+e,this.y=+o}t("H.math.Point",J),J.prototype.set=J,J.prototype.set=J.prototype.set,J.prototype.clone=function(e){return e?(e.x=this.x,e.y=this.y):e=new J(this.x,this.y),e},J.prototype.clone=J.prototype.clone,J.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},J.prototype.add=J.prototype.add,J.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},J.prototype.sub=J.prototype.sub,J.prototype.scale=function(e,o){return this.x*=e,this.y*=o===void 0?e:o,this},J.prototype.scale=J.prototype.scale,J.prototype.round=function(){return this.x=Ad(this.x),this.y=Ad(this.y),this},J.prototype.round=J.prototype.round,J.prototype.floor=function(){return this.x=Bd(this.x),this.y=Bd(this.y),this},J.prototype.floor=J.prototype.floor,J.prototype.ceil=function(){return this.x=Cd(this.x),this.y=Cd(this.y),this},J.prototype.ceil=J.prototype.ceil,J.prototype.ia=function(e){return!(!e||this.x!==e.x||this.y!==e.y)},J.prototype.equals=J.prototype.ia,J.prototype.Cj=function(e,o){var h=o.x-e.x,d=o.y-e.y,g=e;if(h||d){var _=((this.x-e.x)*h+(this.y-e.y)*d)/(h*h+d*d);0>=_?g=e:1<=_?g=o:g=new J(e.x+_*h,e.y+_*d)}return g},J.prototype.getNearest=J.prototype.Cj,J.prototype.Wa=function(e){return Fd(Gd(this.x-e.x,2)+Gd(this.y-e.y,2))},J.prototype.distance=J.prototype.Wa;function zf(e){if(!e)throw Error("invalid argument");return e instanceof J?e:new J(e.x,e.y)}J.fromIPoint=zf;function Af(e){var o=Bf[e];if(!o)if(e in Cf)o=Bf[e]=e;else{o=Df.length;var h="",d=e.charAt(0).toUpperCase()+e.substr(1),g="",_=!1;for(Ef&&(g=Ef+d,_=g in Cf);o--&&!_;)h=Df[o],g=h+d,_=g in Cf;if(_&&(Ef=h),o=_?g:null)Bf[e]=o;else throw Error("Could not find any variant of CSS property ["+e+"]")}return o}t("H.dom.cssPrefixer.prefix",Af);var Df=["O","Ms","ms","Moz","Webkit"],Bf={},Ef="",Cf=document.createElement("span").style;function Ff(e,o,h,d){if(!e||!o||!h)throw new D(Ff,B,"Must specify name, version and revision parameter");this.name=e,this.version=o,this.revision=h,d&&Ya(this,d)}t("H.util.BuildInfo",Ff),Ff.prototype.toString=function(){var e,o=[];for(e in this)Cc(this[e])&&o.push(this[e]);return o.join(";")};var Gf={};function Hf(e,o,h,d){if(!e)throw new D(Hf,1,"Must specify a name parameter");return Gf[e]||(Gf[e]=new Ff(e,o,h,d))}Ff.get=Hf;function If(){If.j.constructor.call(this),this.a=Jf(this),this.f=oc(),this.c=A(this.c,this),this.a.addEventListener("message",this.c),this.b={}}u(If,F),If.prototype.o=function(){this.a.terminate()},If.prototype.g=function(e){var o=e.type,h=!!this.f[o],d=e.data,g=Kf++,_=d&&d.Mo?d.Mo:B,$=!0;return h?(this.b[g]=e,Lf(this,o,g,d&&d.message,_)):(e.reject(new D(this.g,0,"processor_not_found")),$=!1),$},If.prototype.c=function(e){e=e.data;var o=this.b[e.taskId],h=e.taskId,d=e.data,g=this;if(e.type===2)new tf("arraybuffer",d).then(function(_){return _.arrayBuffer()}).then(function(_){g.a.postMessage(["3",h,[_]],[_])},function(){g.a.postMessage(["3",h,[null,"ERROR"]])});else{if(o){switch(e.type){case 1:o.resolve(d);break;case 0:o.reject(d)}delete this.b[h]}this.dispatchEvent(new ud(this.A.IDLE))}};var Kf=0;function Mf(e,o,h){var d=Kf++,g;return e.b[d]=g=ac(),Lf(e,o,d,h),g.Ak}function Lf(e,o,h,d,g){d===B||Ca(d)||(d=[d]);try{e.a.postMessage([o,h,d],g)}catch(_){e=e.b[h],e.reject(_.message)}}If.prototype.A={IDLE:"idle",Ni:"error"},If.prototype.i=function(e,o){var h=this.l||(this.l=new ud(this.A.Ni));h.data=o,delete this.f[e],this.dispatchEvent(h)};function Jf(a){var b=x.H.__bootstrap__;if(b=Da(b)?(""+b).replace(/^[^{]+{((.|[\r\n])+?)}\s*$/,"$1"):""+b,x.Worker&&x.URL)try{var c=new x.Worker(x.URL.createObjectURL(pf(b,"application/javascript")))}catch{}return c||(a=new Nf(a),function(){eval("var self = arguments[0];"+b)}(),c=new Of(a)),c}function Of(e){F.call(this),this.a=e}u(Of,F),Of.prototype.postMessage=function(e){x.setTimeout(A(this.b,this,e),0)},Of.prototype.b=function(e){var o=new ud("message");o.data=e,this.a.dispatchEvent(o)},Of.prototype.terminate=function(){this.a.F(),this.F()};function Nf(e){F.call(this),this.a=e,this.addEventListener=A(this.addEventListener,this),this.removeEventListener=A(this.removeEventListener,this),this.postMessage=A(this.postMessage,this),this.eval=A(eval,this)}u(Nf,F),Nf.prototype.postMessage=function(e){var o=new ud("message");o.data=e,x.setTimeout(A(this.a.c,this.a,o),0)};function Pf(){var e=Qf;return e||(e=Qf=this,F.call(e),Rf(this)),e}var Qf;u(Pf,F),Pf.prototype.o=function(){Pf.j.o.call(this),Rf(this)};function Rf(e){var o=e.b,h;if(o)for(h=o.length;h--;)o[h].F();e.b=[],Ic(e.b),e.c={},e.f=oc()}Pf.prototype.Jg=function(e){var o;if(e=e.type,o=this.f[e]){var h=this.b,d=h[0];d||(d=h[0]=new If,this.tb(La(td,d)),Va(this.c)||(h=x.Object.keys(this.c),Mf(d,"0",h))),h=d,h.f[e]||(h.f[e]=o,Mf(h,"1",[e,Da(o)?o+"":o]).then(ld,A(h.i,h,e)))}else throw new $c(this.Jg,'Unknown type "'+e+'"');return d},Pf.prototype.yf=function(){},Pf.prototype.a=function(e,o){var h=this.f,d=h[e];if(d){if(o!==d)throw new $c(this.a,'Type "'+e+'" is already registered')}else h[e]=o};function Sf(e,o,h){ie.call(this,e,o,h)}var Tf;u(Sf,ie),Sf.prototype.fh=function(){return Tf||(Tf=new le(new Pf)),Tf},Sf.prototype.oe=function(){},Sf.prototype.qj=function(e){return e.g(this)};function Uf(e,o,h,d,g,_){var $,j,_t=e.length,_e,_r;if(_t)for($=[];_t--;){var _n=e[_t],_i=_n.length,_o=0;for(_e=1;_e<_i;_e++)if(_r=Vf(_n[_e-1],_n[_e],h,o,d,g)){var _a=_r[0],_u=_r[1];_o&&_o.ia(_a)?j.push(_u):$.push(j=_r),_o=_u,_&&(_e=_i,_t=0)}}else $=e;return $}t("H.math.clipping.clipStrips",Uf);function Vf(e,o,h,d,g,_){var $=e.x;e=-e.y;var j=o.x;if(o=-o.y,h=-h,_=-_,$>j){if(j>g||$<d)return;var _t=$,_e=e;$=j,e=o,j=_t,o=_e,_t=1}else if($>g||j<d)return;if(e>o){if(o>h||e<_)return;var _r=1;e=-e,o=-o,_e=_,_=-h,h=-_e}else if(e>h||o<_)return;if($<d){if((e+=(d-$)*(o-e)/(j-$))>h)return;$=d}if(e<_){if(($+=(_-e)*(j-$)/(o-e))>g)return;e=_}return j>g&&(o=e+(g-$)*(o-e)/(j-$),j=g),o>h&&(j=$+(h-e)*(j-$)/(o-e),o=h),_r&&(e=-e,o=-o),_t?[new J(j,-o),new J($,-e)]:[new J($,-e),new J(j,-o)]}function Wf(e,o,h){e=Xf(e,!0),o=Xf(o,!1);var d,g,_={},$=d=1;switch(~~(h||0)){case 1:$=d=0;break;case 2:d=0,$=1;break;case 3:d=1,$=0}h=d;var j=$;if(o&&e){for(o.se=new Yf(o.x,o.y,null,Zf(o)),e.se=new Yf(e.x,e.y,null,Zf(e)),$=o;$.next;$=$.next)if(!$.Za){for(d=e;d.next;d=d.next)if(!d.Za){var _t=$f($.next),_e=$f(d.next);if(g=ag($,_t,d,_e,_)){g=_.pl;var _r=_.ql,_n=_.Po,_i=_.Qo;g=new Yf(_n,_i,null,null,null,null,!0,0,0,g),bg(g,$,_t),_t=new Yf(_n,_i,null,null,null,null,!0,0,0,_r),bg(_t,d,_e),g.Th=_t,_t.Th=g}}}for(_=fe(o,cg(e)),h&&(_=!_),$=o;$;$=$.next)$.Za&&($.vh=_,_=!_);for(_=fe(e,cg(o)),j&&(_=!_),d=e;d.next;d=d.next)d.Za&&(d.vh=_,_=!_);for(dg(o),dg(e);(e=eg(o))!=o;){for(h=null;!e.yg;e=e.Th){for(_=e.vh;h=new Yf(e.x,e.y,h),h.artificial=e.Za||e.Sj,e.yg=1,e=_?e.next:e.gc,!!e;)if(e.Za){e.yg=1;break}if(!e)break}h.Uh=_o||null;var _o=h}return _o}}t("H.math.clipping.clipPolygon",Wf);function Yf(e,o,h,d,g,_,$,j,_t,_e){this.x=e,this.y=o,this.next=h||null,this.gc=d||null,this.Uh=g||null,this.Th=_||null,this.Za=!!$,this.vh=!!j,this.yg=_t||0,this.alpha=_e||0,d&&(d.next=this),h&&(h.gc=this),this.Sj=!1,this.se=null}function $f(e){for(;e&&e.Za;)e=e.next;return e}function Zf(e){if(e)for(;e.next;)e=e.next;return e}function eg(e){var o=e;if(o)do o=o.next;while(o!=e&&(!o.Za||o.Za&&o.yg));return o}function dg(e){var o=Zf(e);o.gc.next=e,e.gc=o.gc}function ag(e,o,h,d,g,_){var $,j=o.x-e.x,_t=o.y-e.y,_e=d.x-h.x,_r=d.y-h.y,_n=j*_r-_t*_e;return!_n||(_e=((h.x-e.x)*_r-(h.y-e.y)*_e)/_n,_n=(_t*(h.x-e.x)-j*(h.y-e.y))/_n,0>_e||1<_e||0>_n||1<_n)?0:(_e===0?$=e:_e===1?$=o:_n===0?$=h:_n===1&&($=d),$&&!_?($.x+=2480549651603763e-20,$.y+=7321997314118067e-20,$.se&&($.se.x=$.x,$.se.y=$.y),ag(e,o,h,d,g)):(g.Po=e.x+_e*j,g.Qo=e.y+_e*_t,g.pl=_e,g.ql=_n,1))}function cg(e){for(var o=[];e;)o.push(e.x,e.y),e=e.next;return o}function bg(e,o,h){for(o=o.next;o!==h&&o.alpha<=e.alpha;)o=o.next;e.next=o,e.gc=o.gc,e.next.gc=e,e.gc.next=e}function Xf(e,o){for(var h,d=null,g=0,_=e.length;g<_;g++)h=new Yf(e[g].x,e[g].y,d),h.Sj=o,(h.next=d)&&(d.gc=h),d=h;return d}function fg(e,o,h){var d=ae(+e,-90,90);if(o&&E(d))throw new D(o,h,e);return d}function gg(e,o,h){var d=+e;if((-180>d||180<d)&&(d=Zd(d+180,360)-180),o&&E(d))throw new D(o,h,e);return d}function hg(e,o,h){var d;if(e!==B&&E(d=+e)&&o)throw new D(o,h,e);return d}function ig(e,o){return 0>e!=0>o&&180<Dd(o-e)}t("H.geo.isDBC",ig);function jg(){xc(this,jg)}t("H.geo.AbstractGeometry",jg),jg.prototype.getBoundingBox=jg.prototype.K,jg.prototype.equals=jg.prototype.ia,jg.prototype.rb="",jg.prototype.Hb="",jg.prototype.toString=function(){return this.cd([this.rb.toUpperCase()," "]).join("")},jg.prototype.toString=jg.prototype.toString,jg.prototype.Kc=function(){return{type:this.Hb,coordinates:this.bd()}},jg.prototype.toGeoJSON=jg.prototype.Kc,jg.prototype.Y=function(){return{type:this.rb,coordinates:this.pc(),boundingBox:this.K().Y()}},jg.prototype.forWorkerMessage=jg.prototype.Y;function kg(e,o,h){this.lat=fg(e,kg,0),this.lng=gg(o,kg,1),h!==B&&(this.alt=hg(h,kg,2))}u(kg,jg),t("H.geo.Point",kg),kg.prototype.ia=function(e){return this===e||!!e&&this.lat===e.lat&&this.lng===e.lng&&(this.alt||0)===(e.alt||0)},kg.prototype.equals=kg.prototype.ia,kg.prototype.Wa=function(e){if(this===e||this.lat===e.lat&&this.lng===e.lng)e=0;else{var o=this.lat*Ud,h=e.lat*Ud;e=1274200158e-2*Jd(yd(1,Fd(Gd(Id((o-h)/2),2)+Kd(o)*Kd(h)*Gd(Id((this.lng*Ud-e.lng*Ud)/2),2))))}return e},kg.prototype.distance=kg.prototype.Wa,kg.prototype.zg=function(e,o,h){var d;if(h){if(d=o/637100079e-2){o=e*Ud,e=Ud*this.lat;var g=Id(e);h=Id(d);var _=Kd(d);d=Ud*this.lng;var $=Kd(e);e=Jd($*Kd(o)*h+g*_),o=Nd(Id(o)*$*h,_-g*Id(e)),o=(d+o+Pd)%(2*Pd)-Pd,o*=Vd,g=new kg(e*Vd,(o+540)%360-180)}return g||this}return e=(e%360+360)%360,(e+90)%180===0?(e=this.lng+o/(637100079e-2*Sd*Kd(this.lat*Ud))*(e===270?-360:360),new kg(this.lat,(e+540)%360-180)):((o/=637100079e-2)&&(e*=Ud,g=this.lat*Ud,h=this.lng*Ud,d=g+o*Kd(e),_=d-g,$=Ed(Ld(d/2+Rd)/Ld(g/2+Rd)),$=E(_/$)?Kd(g):_/$,e=o*Id(e)/$,Dd(d)>Qd&&(d=0<d?Pd-d:-(Pd+d)),d=new kg(d*Vd,((h+e+Td+(Dd(g+_)>Qd?Pd:0))%Sd-Pd)*Vd)),d||this)},kg.prototype.walk=kg.prototype.zg,kg.prototype.K=function(){return new K(this.lat,this.lng,this.lat,this.lng)},kg.prototype.getBoundingBox=kg.prototype.K;function lg(e,o,h){var d=Ea(e)&&!(E(e.lat=fg(e.lat))||E(e.lng=gg(e.lng))||e.alt!==B&&E(e.alt=hg(e.alt)));if(!d&&o)throw new D(o,h,e);return d}kg.validate=lg;function ng(e){if(!e)throw new D(ng,0,e);return new kg(e.lat,e.lng,e.alt)}kg.fromIPoint=ng,p=kg.prototype,p.rb="Point",p.cd=function(e){return e.push("(",this.lng," ",this.lat,")"),e},p.Hb="Point",p.bd=function(){return[this.lng,this.lat,this.alt||0]},p.pc=function(){return[this.lat,this.lng,this.alt||0]};function K(e,o,h,d){og(this,fg(e,K,0),gg(o,K,1),fg(h,K,2),gg(d,K,3))}u(K,jg),t("H.geo.Rect",K),K.prototype.rb="Polygon",K.prototype.cd=function(e){var o=this.c,h=this.a,d=this.f,g=this.b;return e.push("(","(",h," ",o,",",g," ",o,",",g," ",d,",",h," ",d,",",h," ",o,")",")"),e},K.prototype.ia=function(e){var o=this===e;return!o&&C(e,K)&&(o=this.c===e.c&&this.a===e.a&&this.f===e.f&&this.b===e.b),o},K.prototype.equals=K.prototype.ia,K.prototype.clone=function(){return new K(this.c,this.a,this.f,this.b)},K.prototype.clone=K.prototype.clone;function og(e,o,h,d,g){return e.a=h,e.b=g,o<d&&(h=o,o=d,d=h),e.c=o,e.f=d,e.l=e.g=e.i=null,e}K.prototype.Nb=function(){return this.l||(this.l=new kg(this.c,this.a)),this.l},K.prototype.getTopLeft=K.prototype.Nb,K.prototype.Jb=function(){return this.g||(this.g=new kg(this.f,this.b)),this.g},K.prototype.getBottomRight=K.prototype.Jb,K.prototype.bn=function(){return this.c},K.prototype.getTop=K.prototype.bn,K.prototype.Pl=function(){return this.f},K.prototype.getBottom=K.prototype.Pl,K.prototype.xm=function(){return this.a},K.prototype.getLeft=K.prototype.xm,K.prototype.Sm=function(){return this.b},K.prototype.getRight=K.prototype.Sm,K.prototype.bb=function(){return this.i||(this.i=new kg(this.f+(this.c-this.f)/2,pg(this.a,this.Ab()))),this.i},K.prototype.getCenter=K.prototype.bb,K.prototype.Ab=function(){return qg(this.a,this.b)},K.prototype.getWidth=K.prototype.Ab,K.prototype.Ld=function(){return this.c-this.f},K.prototype.getHeight=K.prototype.Ld,K.prototype.Bb=function(){return this.a>this.b},K.prototype.isCDB=K.prototype.Bb,K.prototype.Rf=function(){return!this.Ab()&&!this.Ld()},K.prototype.isEmpty=K.prototype.Rf,K.prototype.K=function(){return new K(this.c,this.a,this.f,this.b)},K.prototype.getBoundingBox=K.prototype.K,K.prototype.uf=function(e,o,h){var d=this.bb();return h||(e=fg(e,this.uf,0),o=gg(o,this.uf,1)),o=this.Xc(e,o,h),e=o.bb(),e.lat===d.lat&&e.lng===d.lng&&this.Ld()===o.Ld()&&this.Ab()===o.Ab()},K.prototype.containsLatLng=K.prototype.uf,K.prototype.gd=function(e,o){return o||lg(e,this.gd,0),this.uf(e.lat,e.lng,o)},K.prototype.containsPoint=K.prototype.gd,K.prototype.Qg=function(e,o){var h=this.bb();if(!o&&!C(e,K))throw new D(this.Qg,0,e);return o=this.ec(e,o),e=o.bb(),e.lat===h.lat&&e.lng===h.lng&&this.Ld()===o.Ld()&&this.Ab()===o.Ab()},K.prototype.containsRect=K.prototype.Qg,K.prototype.Xc=function(e,o,h,d){if(!h){if(E(e=fg(e)))throw new D(this.Xc,0,e);if(E(o=gg(o)))throw new D(this.Xc,1,o)}return rg(this.c,this.a,this.f,this.b,e,o,e,o,d)},K.prototype.mergeLatLng=K.prototype.Xc,K.prototype.jk=function(e,o,h){return o||lg(e,this.jk,0),this.Xc(e.lat,e.lng,o,h)},K.prototype.mergePoint=K.prototype.jk,K.prototype.ec=function(e,o,h){if(!o&&!C(e,K))throw new D(this.ec,0,e);return rg(this.c,this.a,this.f,this.b,e.c,e.a,e.f,e.b,h)},K.prototype.mergeRect=K.prototype.ec,K.prototype.Bc=function(e,o,h,d,g,_){return g||(e=fg(e,this.Bc,0),o=gg(o,this.Bc,1),h=fg(h,this.Bc,2),d=gg(d,this.Bc,3)),rg(this.c,this.a,this.f,this.b,e,o,h,d,_)},K.prototype.mergeTopLeftBottomRight=K.prototype.Bc,K.prototype.nd=function(e,o){var h=this.a<=this.b,d=e.a<=e.b,g=this.a<e.b,_=e.a<this.b;if(!o&&!C(e,K))throw new D(this.nd,0,e);return this.f<=e.c&&e.f<=this.c&&(!h&&(!d||g||_)||!d&&(g||_)||g&&_)},K.prototype.intersects=K.prototype.nd;function qg(e,o){return e=o-e,e+(0>e?360:0)}function pg(e,o){return e+=o/2,e-(180<e?360:0)}function rg(e,o,h,d,g,_,$,j,_t){h=yd(h,$),e=zd(e,g),g=qg(o,d);var _e=pg(o,g);$=qg(_,j);var _r=pg(_,$)-_e;if(_r+=0>_r-1e-6?360:0,180>_r-1e-6){_e=o;var _n=j}else _r=360-_r,_e=_,_n=d;return _r=_r+g/2+$/2,360<=_r+5e-7?(_e=-180,_n=180):_r-5e-7<g?(_e=o,_n=d):_r-5e-7<$&&(_e=_,_n=j),_t?og(_t,e,_e,h,_n):new K(e,_e,h,_n)}K.merge=rg;function sg(e,o,h){return h||(lg(e,sg,0),lg(o,sg,1)),new K(e.lat,e.lng,o.lat,o.lng)}K.fromPoints=sg;function tg(e,o){var h=1,d=e.length,g=null;if(!Ca(e))throw new D(tg,0,e);if(0<d){var _=e[0];for(g=sg(_,_,o);h<d;h++)_=e[h],g.Xc(_.lat,_.lng,o,g)}return g}K.coverPoints=tg;function ug(e,o){var h=3,d=e.length,g;if(!(o||e&&e.length!=null))throw new D(ug,0,e);if(0<d)for(g=new K(e[0],e[1],e[0],e[1]);h<d;h+=3)g.Xc(e[h],e[h+1],o,g);return g}K.coverLatLngAlts=ug;function vg(e,o){var h=1,d=e.length,g;if(o&&(!e||e.length==null))throw new D(vg,0,e);if(0<d)for(g=new K(e[0].c,e[0].a,e[0].f,e[0].b);h<d;h++)g.ec(e[h],o,g);return g}K.coverRects=vg,K.prototype.Hk=function(e,o){var h=this.a,d=this.c,g=this.b,_=this.f,$=this.bb().lng;lg(e,this.Hk,0);var j=e.lat-_-(d-_)/2,_t=e.lng-$;return _t=180<_t||-180>_t?-($+e.lng):_t,e=h+(0>_t?2*_t:0),e=-180>e?360+e:e,g+=0<_t?2*_t:0,g=180<g?g-360:g,d=0<j?d+2*j:d,90<=d&&(d=90),_=0>j?_+2*j:_,-90>=_&&(_=-90),o?og(o,d,e,_,g):new K(d,e,_,g)},K.prototype.resizeToCenter=K.prototype.Hk,K.prototype.Hb="Polygon",K.prototype.bd=function(){return[[this.a,this.c,0],[this.b,this.c,0],[this.b,this.f,0],[this.a,this.f,0],[this.a,this.c,0]]},K.prototype.Y=function(){return this.pc()},K.prototype.pc=function(){return[this.c,this.a,this.f,this.b]};function wg(e,o,h,d,g,_){xc(this,wg),this.c=e||10,this.b=null,this.f=d||0,this.g=g||0,this.i=o||1,this.l=h||1,this.m=!!_,this.flush()}function xg(e){var o=e.b;if(e.m&&!o){var h=e.head;(h.entries||h[0]||h[1]||h[2]||h[3])&&(o=[h],o=yg([o,o,o,o],[h[6],h[7],h[4],h[5]]),e.b=o)}return o}function yg(e,o){var h,d,g,_,$=0;for(h=3;0<=h;h--){var j=h+4,_t=0<h%3,_e=[],_r=o[h],_n=e[h];for(d=_n.length;d--;){var _i=_n[d];if(g=_i.entries)for(_=g.length;_--;){var _o=g[_].a(h);(_t?_o>_r:_o<_r)&&(_r=_o)}for(_=4;_--;)(g=_i[_])&&(_t?g[j]>_r:g[j]<_r)&&_e.push(g)}$+=_e.length,o[h]=_r,e[h]=_e}return $&&(o=yg(e,o)),o}function zg(e,o,h){var d,g;if(e.m&&(d=e.b))for(g=3;0<=g;g--){var _=o.a(g);if(g%3?_>=d[g]:_<=d[g])if(h)d[g]=_;else{e.b=null;break}}}wg.prototype.remove=function(e){var o,h,d,g=!1;return e&&(o=e.node)&&o.b===this&&(h=o.entries)&&0<=(d=h.indexOf(e))&&(h.splice(d,1),this.s(o),zg(this,e,!1),g=!0),g},wg.prototype.flush=function(){var e=new Ag(B,NaN,this.f-this.i,this.g-this.l,this.f+this.i,this.g+this.l);e.b=this,this.head=this.a=e,this.b=null};function Bg(e,o){var h=e.head,d;if(o){var g=o;if(g!==h)for(h=g;g=g.parent;)(g.entries||1<g.a)&&(h=g)}else for(;!h.entries&&2>(d=h.a)&&d;)h=g;e.head=h}wg.prototype.Za=function(e,o,h,d,g,_){var $=[],j=this.head,_t=this.a;return e<=j[5]&&o<=j[6]&&(g?h>=j[7]:h>j[7])&&(_?d>=j[4]:d>j[4])&&Cg(this,j,$,e,o,h,d,_||d>=_t[6],g||h>=_t[5]),$};function Cg(e,o,h,d,g,_,$,j,_t){var _e=o.entries,_r=o[7],_n=o[4],_i=o[5],_o=o[6],_a=o[8],_u=o[9],_f;if(_e){var _h=_e.length;if(g>_n||d>_r||$<_o||_<_i)for(;_h--;){_r=_e[_h],_n=_r.a(3),_i=_r.a(0),_o=_r.a(1);var _d=_r.a(2);_d>=g&&_o>=d&&(_i<$||j&&_i==$)&&(_n<_||_t&&_n==_)&&h.push(_r)}else for(;_h--;)h.push(_e[_h])}(_>_a||_t&&_==_a)&&(g<_u&&(_f=o[1])&&Cg(e,_f,h,d,g,_,$,j,_t),($>_u||j&&$==_u)&&(_f=o[3])&&Cg(e,_f,h,d,g,_,$,j,_t)),d<_a&&(g<_u&&(_f=o[0])&&Cg(e,_f,h,d,g,_,$,j,_t),($>_u||j&&$==_u)&&(_f=o[2])&&Cg(e,_f,h,d,g,_,$,j,_t))}wg.prototype.Lc=ba(1);var Dg=0;function Ag(e,o,h,d,g,_){this.c=o,e&&(this.parent=e,this.b=e.b,o&1?(h=e[8],g=e[5]):(h=e[7],g=e[8]),o&2?(d=e[9],_=e[6]):(d=e[4],_=e[9])),this[7]=h,this[5]=g,this[8]=(h+g)/2,this[4]=d,this[6]=_,this[9]=(d+_)/2}Ag.prototype.a=0;function Eg(e,o){return e[o]||(++e.a,e[o]=new Ag(e,o))}Ag.prototype.removeChild=function(e){var o=e.c;this[o]===e&&(delete this[o],delete e.parent,--this.a)},Ag.prototype.Lc=ba(0);function Fg(e,o){(e.entries||(e.entries=[])).push(o),o.node=e}function Gg(e,o,h,d,g){var _=e[5],$=e[6];return e[7]<=o&&e[4]<=h&&(_>d||_===d&&_===e.b.a[5])&&($>g||$===g&&$===e.b.a[6])}function Hg(e,o,h,d,g,_){Hg.j.constructor.apply(this,arguments)}u(Hg,wg),Hg.prototype.s=function(e){for(var o,h,d=this.head;e;){if((!(o=e.entries)||!o.length)&&(o&&delete e.entries,!e.a&&(h=e.parent))){h.removeChild(e),d===e&&(d=h),e=h;continue}break}this.head!==d&&(this.head=d,Bg(this))};function Ig(e,o,h,d,g){if(Gg(e.a,o,h,d,g))return Jg(e,e.a,o,h,d,g,e.c);throw Error("Coordinates out of bounds")}Hg.prototype.yc=function(e,o){return Ig(this,e,o,e,o)};function Jg(e,o,h,d,g,_,$){var j=o[8],_t=o[9],_e=0,_r=0;return $&&(g<j||(_e=+(h>=j)))&&(_<_t||(_r=+(d>=_t)))?h=Jg(e,Eg(o,_e|_r<<1),h,d,g,_,$-1):(Fg(o,h=new Kg(h,d,g,_)),zg(e,h,!0),Bg(e,o)),h}function Kg(e,o,h,d){this.id=Dg++,this[0]=o,this[1]=h,this[2]=d,this[3]=e}Kg.prototype.a=function(e){return this[e]};function Lg(e){this.g=new Hg(+e||10,180,90,0,0,!0),this.f=[],this.i=!1,this.a=this.b=this.c=null}t("H.geo.QuadTree",Lg),p=Lg.prototype,p.Eh=0,p.Rc=function(){return this.Eh},p.Bb=function(){return this.i},p.K=function(){var e,o;if(!this.c){var h=[];!this.b&&(e=xg(this.g))&&(this.b=new K(-e[0],e[3],-e[2],e[1])),(o=this.b)&&h.push(o);var d,g,_;if(!this.a&&(_=(g=this.f).length)){e=90;var $=360,j=-90;for(d=0;_--;){var _t=g[_];e=yd(e,_t[0]),$=yd($,_t[3]),j=zd(j,_t[2]),d=zd(d,_t[1])}this.a=new K(-e,$,-j,d-360)}(o=this.a)&&h.push(o),(o=h[0])&&(h[1]&&(o=o.ec(h[1],!0)),this.c=o)}return this.c};function Mg(e,o,h,d,g,_){return _?(_=new Kg(g,-o,h+360,-d),e.f.push(_),e.i=!0,e.a&&e.a.Bc(o,h,d,g,!0,e.a)):(_=Ig(e.g,h,-o,g,-d),e.b&&e.b.Bc(o,h,d,g,!0,e.b)),++e.Eh,e.c=null,_}p.yc=function(e){var o=e.lng;return e=e.lat,Mg(this,e,o,e,o,!1)},p.Pj=function(e){var o=e.Nb(),h=e.Jb();return(e=e.Bb())?Mg(this,o.lat,h.lng,h.lat,o.lng,e):Mg(this,o.lat,o.lng,h.lat,h.lng,e)},Lg.prototype.insertBoundingBox=Lg.prototype.Pj,Lg.prototype.remove=function(e){var o;if(e.node){var h=this.g.remove(e);this.b=null}else e=(o=this.f).indexOf(e),(h=0<=e)&&(o.splice(e,1),this.i=0<o.length,this.a=null);return h&&(--this.Eh,this.c=null),h},Lg.prototype.remove=Lg.prototype.remove;function Ng(e,o,h,d,g,_,$){e=e.f;var j=e.length,_t=[],_e;if(j){var _r=h+360;for(_e=g+360;j--;){var _n=e[j];(Og(_n,o,h,d,g,_,$)||Og(_n,o,_r,d,_e,_,$))&&_t.push(_n)}}return _t}function Og(e,o,h,d,g,_,$){var j=e[3],_t=e[0],_e=e[1];return e=e[2],(_?_t<=d:_t<d)&&($?j<=g:j<g)&&e>=o&&_e>=h}function Pg(e,o){var h,d,g;if(h=o.length){var _=e.length;for(d={};_--;)d[e[_].id]=1;for(;h--;)(g=o[h]).id in d||e.push(g)}}Lg.prototype.Pf=function(e,o,h){var d=this.g,g=e.Nb(),_=e.Jb(),$=-g.lat;g=g.lng;var j=-_.lat;return _=_.lng,!o&&$===j||!h&&g===_?e=[]:e.Bb()?(e=d.Za(-180,$,_,j,h,o),Pg(e,d.Za(g,$,180,j,!1,o)),Pg(e,Ng(this,$,_,j,g+360,o,h))):(e=d.Za(g,$,_,j,h,o),Pg(e,Ng(this,$,g,j,_,o,h))),e},Lg.prototype.intersectBoundingBox=Lg.prototype.Pf;var Qg=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Rg=typeof BigInt<"u"?BigInt:Number;function Sg(e){var o=Rg(0),h=Rg(0),d=[];if(e.split("").forEach(function(g){g=Rg(Qg[g.charCodeAt(0)-45]),o|=(g&Rg(31))<<h,(g&Rg(32))===Rg(0)?(d.push(o),o=Rg(0),h=Rg(0)):h+=Rg(5)}),0<h)throw Error("Invalid encoding");return d}function Tg(e){return e&Rg(1)&&(e=~e),e>>=Rg(1),+e.toString()}function Ug(e){var o=e.precision===void 0?5:e.precision,h=e.hf===void 0?0:e.hf,d=e.jf===void 0?0:e.jf;e=e.ci;var g=Math.pow(10,o),_=Math.pow(10,d);o=Vg(o,h,d);var $=[],j=Rg(0),_t=Rg(0),_e=Rg(0);return e.forEach(function(_r){var _n=Rg(Math.round(_r[0]*g));$.push(Wg(_n-j)),j=_n,_n=Rg(Math.round(_r[1]*g)),$.push(Wg(_n-_t)),_t=_n,h&&(_r=Rg(Math.round(_r[2]*_)),$.push(Wg(_r-_e)),_e=_r)}),(o instanceof Array?o:fa(ea(o))).concat($ instanceof Array?$:fa(ea($))).join("")}function Vg(e,o,h){if(0>e||15<e)throw Error("precision out of range. Should be between 0 and 15");if(0>h||15<h)throw Error("thirdDimPrecision out of range. Should be between 0 and 15");if(0>o||7<o||o===4||o===5)throw Error("thirdDim should be between 0, 1, 2, 3, 6 or 7");return e|=h<<7|o<<4,Xg(1)+Xg(e)}function Xg(e){var o="";for(e=Rg(e);31<e;){var h=e&Rg(31)|Rg(32);o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[h],e>>=Rg(5)}return o+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[e]}function Wg(e){e=Rg(e);var o=0>e;return e<<=Rg(1),o&&(e=~e),Xg(e)}function Yg(e){return Ug({ci:e.polyline,precision:e.precision,hf:e.thirdDim,jf:e.thirdDimPrecision})}t("H.util.flexiblePolyline.encode",Yg);function Zg(e){if(e=Sg(e),+e[0].toString()!=1)throw Error("Invalid format version");var o=+e[1].toString();o={precision:o&15,hf:o>>4&7,jf:o>>7&15};for(var h=Math.pow(10,o.precision),d=Math.pow(10,o.jf),g=o.hf,_=0,$=0,j=0,_t=[],_e=2;_e<e.length;){var _r=Tg(e[_e])/h,_n=Tg(e[_e+1])/h;_+=_r,$+=_n,g?(_r=Tg(e[_e+2])/d,j+=_r,_t.push([_,$,j]),_e+=3):(_t.push([_,$]),_e+=2)}if(_e!==e.length)throw Error("Invalid encoding. Premature ending reached");return e=Object.assign({},o,{ci:_t}),{polyline:e.ci,precision:e.precision,thirdDim:e.hf,thirdDimPrecision:e.jf}}t("H.util.flexiblePolyline.decode",Zg);function L(e){L.j.constructor.call(this),e&&$g(e,L,0),this.$=e||[],this.a=ah(this,0,this.$.length)}u(L,jg),t("H.geo.LineString",L);function ah(e,o,h){e=e.$;var d=0;for(o=zd(o,0),h=yd(h,e.length),h-=2,o+=1;o<h;)d+=ig(e[o],e[o+=3]);return d}L.prototype.gi=function(e,o,h){bh(this,e,o,h,this.gi)},L.prototype.pushLatLngAlt=L.prototype.gi;function bh(e,o,h,d,g){var _=e.$.length;o=fg(o,g),h=gg(h,g),e.$.push(fg(o,g),gg(h,g),d===B?0:hg(d,g)),_&&(e.a+=ig(e.$[_-2],h)),delete e.b,delete e.c}L.prototype.ff=function(e,o,h){h&&$g(h,this.ff,2),o===void 0&&(o=this.$.length),o&&(this.a-=ah(this,e-3,e+o+3));var d=h?this.$.splice.apply(this.$,[e,o].concat(h)):this.$.splice(e,o);return h&&(this.a+=ah(this,e-3,e+h.length+3)),o&&!h&&(this.a+=ah(this,e-3,e-3)),delete this.b,delete this.c,d},L.prototype.spliceLatLngAlts=L.prototype.ff,L.prototype.Qj=function(e,o,h,d){this.ff(e,0,[o,h,d])},L.prototype.insertLatLngAlt=L.prototype.Qj,L.prototype.Dk=function(e){this.ff(e,3)},L.prototype.removeLatLngAlt=L.prototype.Dk,L.prototype.qd=function(e){bh(this,e.lat,e.lng,e.alt,this.qd)},L.prototype.pushPoint=L.prototype.qd,L.prototype.yc=function(e,o){this.Qj(3*e,o.lat,o.lng,o.alt)},L.prototype.insertPoint=L.prototype.yc,L.prototype.Xe=function(e){this.Dk(3*e)},L.prototype.removePoint=L.prototype.Xe,L.prototype.ye=function(e,o){var h=this.$,d=3*e;e=h[d];var g=h[d+1];return h=h[d+2],o&&(o.lat=e,o.lng=g,o.alt=h),o||new kg(e,g,h)},L.prototype.extractPoint=L.prototype.ye,L.prototype.El=function(e,o,h){var d=this.$;o=o||0,h=af(h,d.length/3);for(var g=3*o;o<h;)e(d[g++],d[g++],d[g++],o++)},L.prototype.eachLatLngAlt=L.prototype.El,L.isDBC=ig,L.prototype.eh=function(e){var o=this.a;return e&&(e=this.$,o+=ig(e[e.length-2],e[1])),o},L.prototype.getDBCs=L.prototype.eh,L.prototype.Ie=function(){return this.$.length/3},L.prototype.getPointCount=L.prototype.Ie,L.prototype.um=function(){return this.$},L.prototype.getLatLngAltArray=L.prototype.um,L.prototype.b=z,L.prototype.K=function(){var e;if(!(e=this.b)){e=this.$;var o=e.length,h=3,d,g,_=z;if(3<=o){var $=d=e[0],j=g=e[1];for(_=new K($,j,d,g);h<o;h+=3){if($=e[h-3],j=e[h-2],d=e[h],g=e[h+1],j>g&&180<g-j||j<g&&-180>j-g||g<j&&180>Dd(g-j)){var _t=j;j=g,g=_t}$<d&&(_t=$,$=d,d=_t),rg(_.c,_.a,_.f,_.b,$,j,d,g,_)}}e=this.b=_}return e},L.prototype.getBoundingBox=L.prototype.K,L.prototype.nn=function(){return this.b!==z},L.prototype.hasBoundingBox=L.prototype.nn;function $g(e,o,h){for(var d=e.length,g=!(d%3),_;g&&d;)g=!(E(e[--d]=hg((_=e[d])===B?0:_))||E(e[--d]=gg(e[d]))||E(e[--d]=fg(e[d])));if(!g&&o)throw new D(o,h,e)}function ch(e){var o=new L,h=0,d=e.length;if(d%2)throw new D(ch,0,e);for(;h<d;)bh(o,e[h++],e[h++],0,ch);return o}L.fromLatLngArray=ch,L.prototype.ia=function(e){var o=this===e,h;if(!o&&(o=C(e,L))){var d=this.$;for(e=e.$,o=(h=d.length)===e.length;o&&h--;)o=d[h]==e[h]}return o},L.prototype.equals=L.prototype.ia;function dh(e,o){return e.b-o.b}function eh(e,o){var h=e.$,d=-2,g=[],_,$=e.c;if(!$){$=e.c=new Lg;var j=0,_t=e.$,_e=_t.length;for(_=0;_<_e;_+=3){var _r=_t[_],_n=_t[_+1];if(_){if(_o<_n)var _i=_o,_o=_n;else _i=_n;if(_u<_r)var _a=_r;else{_a=_u;var _u=_r}_i=Mg($,_a,_i,_u,_o,180<_o-_i),_i.b=j++}_u=_r,_o=_n}}for($=$.Pf(o).sort(dh),_t=$.length,o=0;o<_t;o++){if(j=$[o],j=j.b,_e=3*j,j>d+1){var _f=[h[_e],h[_e+1]];g.push(_f)}d=j,_f.push(h[_e+3],h[_e+4])}if(e.a){for(h=[],d=g.length,o=0;o<d;o++)if(_f=g[o],$=_f.length){for(_t=[],e=0;e<$;e+=2)j=_f[e],_e=_f[e+1],_t.push(j,_e),_=_f[e-1],e&&ig(_e,_)&&(h.push(_t),_t=[],_+=0>_?360:-360,_t.push(_f[e-2],_,j,_e));h.push(_t)}g=h}return g}p=L.prototype,p.rb="LineString",p.cd=function(e,o){var h=this.$,d=h.length,g;if(d){for(e.push("("),g=0;g<d;g+=3)g&&e.push(","),e.push(h[g+1]," ",h[g]);o&&(h[0]!==h[d-3]||h[1]!==h[d-2])&&e.push(",",h[1]," ",h[0]),e.push(")")}else e.push("EMPTY");return e},p.Hb="LineString",p.bd=function(){var e=[],o=this.$,h=o.length,d;for(d=0;d<h;d+=3)e.push([o[d+1],o[d],o[d+2]]);return e},p.pc=function(){var e=this.$,o;if(this.K().Bb()){e=e.slice();var h=1;for(o=e.length;h<o;h+=3)0>e[h]&&(e[h]+=360)}return e},p.Ko=function(e){e=e===void 0?5:e;for(var o=this.$,h=o.length,d=[],g=0;g<h;g+=3)d.push([o[g],o[g+1],o[g+2]]);return Yg({polyline:d,precision:e,thirdDim:2,thirdDimPrecision:e})},L.prototype.toFlexiblePolyline=L.prototype.Ko;function fh(e){var o=Zg(e);e=o.polyline;var h=o.thirdDim;if(o=h===2||h===3,h=h===0,!e)throw new D(fh,0,"data");if(o||h){h=e.length;for(var d=Array(3*h),g=0,_=0;g<h;g++){var $=e[g];d[_++]=$[0],d[_++]=$[1],d[_++]=o?$[2]:0}}if(!d)throw new D(fh,0,"only ABSENT, ALTITUDE or ELEVATION are supported as type of the 3rd dimension");return new L(d)}L.fromFlexiblePolyline=fh;function gh(e){xc(this,gh),gh.j.constructor.call(this),this.la=hh(this,e,this.constructor,0)}u(gh,jg),t("H.geo.MultiGeometry",gh),gh.prototype.splice=function(e,o,h){return e=[e],o!==B&&e.push(o),h&&(o=hh(this,h,this.splice,2),e=e.concat(o)),this.a=z,this.la.splice.apply(this.la,e)},gh.prototype.splice=gh.prototype.splice,gh.prototype.hc=function(e){var o=this.la.length;if(!(0<=e&&e<o))throw new ne(this.hc,e,[0,o-1]);return this.a=z,this.la.splice(e,1)[0]},gh.prototype.removeAt=gh.prototype.hc,gh.prototype.remove=function(e){if(e=this.la.indexOf(e),0<=e){var o=this.la.splice(e,1)[0];this.a=z}return o||z},gh.prototype.remove=gh.prototype.remove,gh.prototype.mm=function(){return this.la},gh.prototype.getGeometries=gh.prototype.mm,gh.prototype.push=function(e){var o=hh(this,[e],this.push,0)[0];this.a&&(this.a=this.a.ec(e.K())),this.la.push(o)},gh.prototype.push=gh.prototype.push,gh.prototype.K=function(){var e;if(!(e=this.a)){e=z;var o,h;if(this.la.length)for(e=this.la[0].K(),h=1;h<this.la.length;h++)(o=this.la[h].K())&&(e=e?e.ec(o):o)}return this.a=e},gh.prototype.getBoundingBox=gh.prototype.K,gh.prototype.a=z;function hh(e,o,h,d){var g,_=[];if(!Bc(o))throw new D(h,d);for(g=0;g<o.length;g++)if(e.b(o[g]))_.push(e.c(o[g]));else throw new D(h,d);return _}gh.prototype.c=function(e){return e},gh.prototype.ia=function(e){var o=this===e,h;if(!o&&(o=C(e,this.constructor))){var d=this.la;for(e=e.la,o=(h=d.length)===e.length;o&&h--;)o=d[h].ia(e[h])}return o},gh.prototype.equals=gh.prototype.ia,gh.prototype.cd=function(e){var o=this.la,h=o.length,d,g,_=!1;if(h){for(e.push("("),d=0;d<h;d++)(g=0<d&&_)&&e.push(","),o[d].cd(e),e[e.length-1]==="EMPTY"?e.splice(-1-+g,1+ +g):_=!0;_?e.push(")"):e.splice(-1,1,"EMPTY")}else e.push("EMPTY");return e},gh.prototype.pc=function(){for(var e=[],o=this.la,h=o.length;h--;)e[h]=o[h].pc();return e},gh.prototype.Y=function(){var e=gh.j.Y.call(this);return e.type=this.rb,e},gh.prototype.bd=function(){for(var e=[],o=this.la,h=o.length;h--;)e[h]=o[h].bd();return e};function ih(e){ih.j.constructor.call(this,e)}u(ih,gh),t("H.geo.MultiLineString",ih),ih.prototype.b=function(e){return C(e,L)},ih.prototype.rb="Multi"+L.prototype.rb,ih.prototype.Hb="Multi"+L.prototype.Hb;function jh(){}t("H.map.provider.Invalidations",jh),jh.MARK_INITIAL=Xd,jh.prototype.update=function(e,o){o!==kh.NONE&&(this.a=e,o&kh.SPATIAL&&(this.f=e),o&kh.VISUAL&&(this.g=e),o&kh.ADD&&(this.b=e),o&kh.REMOVE&&(this.c=e),o&kh.Z_ORDER&&(this.l=e),o&kh.VOLATILITY&&(this.i=e))},jh.prototype.update=jh.prototype.update,jh.prototype.Bm=function(){return this.a},jh.prototype.getMark=jh.prototype.Bm,jh.prototype.a=Xd,jh.prototype.rn=function(e){return this.a>e},jh.prototype.isAny=jh.prototype.rn,jh.prototype.g=Xd,jh.prototype.Vd=function(e){return this.g>e},jh.prototype.isVisual=jh.prototype.Vd,jh.prototype.f=Xd,jh.prototype.yh=function(e){return this.f>e},jh.prototype.isSpatial=jh.prototype.yh,jh.prototype.b=Xd,jh.prototype.Rj=function(e){return this.b>e},jh.prototype.isAdd=jh.prototype.Rj,jh.prototype.c=Xd,jh.prototype.Sf=function(e){return this.c>e},jh.prototype.isRemove=jh.prototype.Sf,jh.prototype.l=Xd,jh.prototype.zh=function(e){return this.l>e},jh.prototype.isZOrder=jh.prototype.zh,jh.prototype.i=Xd,jh.prototype.vn=function(e){return this.i>e},jh.prototype.isVolatility=jh.prototype.vn;var kh={NONE:0,VISUAL:1,SPATIAL:2,ADD:4,REMOVE:8,Z_ORDER:16,VOLATILITY:32};jh.Flag=kh;function lh(e){lh.j.constructor.call(this),e!==void 0&&(this.data=e)}u(lh,F),t("H.map.Feature",lh),lh.prototype.getData=function(){return this.data},lh.prototype.getData=lh.prototype.getData,lh.prototype.o=function(){lh.j.o.call(this),delete this.data};function M(e){if(xc(this,M),M.j.constructor.call(this,e?e.data:B),this.ea=mh.next(),e){var o="min";Fc(e[o])&&(this.m=e[o]),o="max",Fc(e[o])&&(this.s=e[o]),o="visibility",o in e&&(this.u=!!e[o]),o="volatility",o in e&&(this.P=!!e[o]),o="zIndex",o in e&&(this.l=+e[o]||0),o="provider",o in e&&!C(e[o],N)&&(this.ma=e[o],this.ra(kh.ADD))}}u(M,lh),t("H.map.Object",M);var mh=new cf(1),nh={ANY:31,OVERLAY:1,SPATIAL:2,MARKER:4,DOM_MARKER:8,GROUP:16};M.Type=nh,M.prototype.cb=function(){return this.ea},M.prototype.getId=M.prototype.cb,M.prototype.Ai=function(e){if(!Fc(e)&&!Cc(e))throw new D(this.Ai,0,"id must be a number or a string");return this.i=e,this},M.prototype.setRemoteId=M.prototype.Ai,M.prototype.Rm=function(){return this.i},M.prototype.getRemoteId=M.prototype.Rm,M.prototype.m=-1/0,M.prototype.s=1/0,M.prototype.zj=function(e){var o=this.s;if(e)for(e=this;e=e.Fa;)o=yd(o,e.s);return o},M.prototype.getMax=M.prototype.zj,M.prototype.Bj=function(e){var o=this.m;if(e)for(e=this;e=e.Fa;)o=zd(o,e.m);return o},M.prototype.getMin=M.prototype.Bj,M.prototype.u=!0,M.prototype.qb=function(e){var o=this.u;return(e=!!e)!==o&&(this.u=e,this.invalidate(kh.VISUAL)),this},M.prototype.setVisibility=M.prototype.qb,M.prototype.wc=function(e){for(var o=this,h;(h=o.u)&&e&&(o=o.Fa););return h},M.prototype.getVisibility=M.prototype.wc,M.prototype.P=!1,M.prototype.Lf=function(e){for(var o=this,h;!(h=o.P)&&e&&(o=o.Fa););return h},M.prototype.getVolatility=M.prototype.Lf,M.prototype.Vk=function(e){var o=this.P;return o!==!!e&&(this.P=!o,this.invalidate(kh.VOLATILITY)),this},M.prototype.setVolatility=M.prototype.Vk,M.prototype.l=B,M.prototype.Ij=function(){return this.l},M.prototype.getZIndex=M.prototype.Ij,M.prototype.fe=function(e){return e!==this.l&&(this.Ye(),this.l=e,this.invalidate(kh.Z_ORDER)),this},M.prototype.setZIndex=M.prototype.fe,M.prototype.L=B,M.prototype.Uc=function(){var e=this.L,o,h;if(!e){var d=+((o=this.l)!==B);(e=this.Fa)?(e=e.Uc().slice(),e[0]|=d):e=[d],e.push(o||0,0>(h=this.Di)?this.ea:h),this.L=e}return e},M.prototype.getZInfo=M.prototype.Uc,M.prototype.Ye=function(){this.L=B};function oh(e,o,h){var d,g;if(!h||e[0]|o[0]){var _=e.length,$=o.length,j=yd(_,$),_t=1;for(g=1+ +h;_t<j;_t+=g)if(d=e[_t]-o[_t])return d}return h?0:_-$}M.compareZInfo=oh;function ph(e,o){return e.cj(o)}M.compareZOrder=ph,M.prototype.cj=function(e){return this.T-e.T||oh(this.Uc(),e.Uc(),!1)},M.prototype.compareZOrder=M.prototype.cj,p=M.prototype,p.previousSibling=z,p.nextSibling=z,p.Di=-1,p.Fa=z,p.Fm=function(){return this.Fa},M.prototype.getParentGroup=M.prototype.Fm,M.prototype.bc=function(){for(var e=this,o;o=e.Fa;)e=o;return e},M.prototype.getRootGroup=M.prototype.bc,M.prototype.contains=function(e){return this===e},M.prototype.contains=M.prototype.contains,M.prototype.ka=function(e){if(this.Fa)throw new $c(this.ka,"Not allowed for a child of a group");M.j.ka.call(this,e)},M.prototype.setParentEventTarget=M.prototype.ka,M.prototype.draggable=!1,M.prototype.ma=z,M.prototype.ca=function(){return this.ma},M.prototype.getProvider=M.prototype.ca,M.prototype.ee=function(e,o){var h=this.ma,d;if(d=h!==e){if(o&&(h&&!C(h,N)||e&&!C(e,N)))throw new $c(o,"Only LocalObjectProvider allows an object transfers");o=this.type!==nh.GROUP,h&&(this.invalidate(kh.REMOVE),o&&h.Ga(this)),(this.ma=e)&&(o&&e.fa(this),this.ta=z,this.invalidate(kh.ADD))}return d},M.prototype.ta=z,M.prototype.Kb=function(){return this.ta||(this.ta=new jh)},M.prototype.getInvalidations=M.prototype.Kb,M.prototype.ra=function(e){var o=this.ca(),h;return(h=!!o)&&o.invalidateObject(this,e),h},M.prototype.invalidate=M.prototype.ra,M.prototype.o=function(){this.Fa&&this.Fa.Ga(this),M.j.o.call(this)},M.prototype.setData=function(e){return this.data=e,this},M.prototype.setData=M.prototype.setData,M.prototype.Kc=function(e){var o;if(e&&!Da(e))throw new D(M.prototype.Kc,0,"opt_callback must be a function");return e=qh(this,e?e(this.data):this.data,!!e),this instanceof rh||this instanceof sh||this instanceof th||this instanceof uh?o={type:"Feature",properties:e,geometry:this.ga().Kc()}:o={type:"FeatureCollection",features:hf},this.i&&(o.id=this.i),o},M.prototype.toGeoJSON=M.prototype.Kc;function qh(e,o,h){if(o===null||o===B)return null;if(0<=Object.keys(o).length&&Object.prototype.toString.call(o)!=="[object Object]")throw Error(vh(e,h));try{return JSON.stringify(o),o}catch{throw Error(vh(e,h))}}function vh(e,o){return"Object Remote-Id: "+e.i+" - "+(o?"The value returned by the callback is not a valid JSON object and cannot be set as Feature properties.":"The given object data is not a valid JSON object and cannot be set as Feature properties.")}M.prototype.Y=function(){return{id:this.ea,properties:{min:this.Bj(),max:this.zj(),zIdx:this.l,sIdx:this.Di,parent:this.Fa?this.Fa.cb():0,visible:this.wc(),volatile:this.Lf()},type:"Feature"}},M.prototype.forWorkerMessage=M.prototype.Y;function wh(e){var o;if(e){var h=xh;for(o=C(e,wh);h--;){var d=yh[h];if(e.hasOwnProperty(d)){var g=e[d];if(o)this[d]=g;else{if((g=zh[h](g))===Ah)throw new D(wh,0,d+": "+e[d]);g!==this[d]&&g!==B&&(this[d]=g)}}}h=o?e.b:this.lineWidth&&Ze(this.strokeColor),h||(this.b=h),h=o?e.Ob:Ze(this.fillColor),h||(this.Ob=h),h=o?e.a:this.strokeColor!=="none"&&this.lineWidth,h||(this.a=h)}qc(this)}t("H.map.SpatialStyle",wh),wh.prototype.Ob=!0,wh.prototype.b=!0,wh.prototype.a=!0;var yh="strokeColor fillColor lineWidth lineCap lineJoin miterLimit lineDash lineDashOffset lineDashImage lineHeadCap lineTailCap".split(" ");wh.prototype.strokeColor="rgba(0,85,170,.6)",wh.prototype.strokeColor=wh.prototype.strokeColor,wh.prototype.fillColor="rgba(0,85,170,.4)",wh.prototype.fillColor=wh.prototype.fillColor,wh.prototype.lineWidth=2,wh.prototype.lineWidth=wh.prototype.lineWidth,wh.prototype.lineCap="round",wh.prototype.lineCap=wh.prototype.lineCap,wh.prototype.lineJoin="miter",wh.prototype.lineJoin=wh.prototype.lineJoin,wh.prototype.miterLimit=1,wh.prototype.miterLimit=wh.prototype.miterLimit,wh.prototype.Bn=hf,wh.prototype.lineDash=wh.prototype.Bn,wh.prototype.lineDashOffset=0,wh.prototype.lineDashOffset=wh.prototype.lineDashOffset,wh.prototype.Cn=B,wh.prototype.lineDashImage=wh.prototype.Cn,wh.prototype.Dn=B,wh.prototype.lineHeadCap=wh.prototype.Dn,wh.prototype.En=B,wh.prototype.lineTailCap=wh.prototype.En;var xh=yh.length;wh.prototype.ia=function(e){var o=this===e;if(!o&&e){for(o=0;o<xh;o++){var h=yh[o];if(this[h]!==e[h])break}o=o===xh}return o},wh.prototype.equals=wh.prototype.ia,wh.prototype.vj=function(e){if(e){var o={};Ya(o,this,e)}else o=this;return new wh(o)},wh.prototype.getCopy=wh.prototype.vj;var Ah=qc({}),zh=[function(e){return e?pc(e):Ah},function(e){return e?pc(e):Ah},function(e){return 0<=e&&100>=e?+e:Ah},function(e){return e=pc(e),e==="butt"||e==="square"||e==="round"||e==="arrow-head"||e==="arrow-tail"?e:Ah},function(e){return e==="round"||e==="bevel"||e==="miter"?e:Ah},function(e){return 0<e&&100>=e?+e:Ah},function(e){return e&&e.every&&e.every(Gc)?e:Ah},function(e){return E(+e)?Ah:+e},function(e){return e===B||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||Object.values(Bh).includes(e)?e:Ah},function(e){return vc(e)?zh[3](e):B},function(e){return vc(e)?zh[3](e):B}],Ch=new Image().src="data:image/svg+xml;base64,"+btoa('<svg width="128" height="128" viewBox="0 0 128 128" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><g id="arrow"><path style="fill:#ff0000" d="M 0,0 32,64 2,128 128,64 Z"/></g></svg> '),Dh=new Image().src="data:image/svg+xml;base64,"+btoa('<svg width="128" height="128" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg"><circle style="fill:#ffffff" cx="64" cy="64" r="64" /></svg>'),Bh={ARROW:Ch,CIRCLE:Dh};wh.DashImage=Bh,wh.MAX_LINE_WIDTH=100;var Eh=new wh;wh.DEFAULT_STYLE=Eh;var Fh="fillColor strokeColor lineWidth lineCap lineJoin miterLimit lineDashOffset lineDash lineTailCap lineHeadCap".split(" ");wh.prototype.Y=function(){for(var e={},o=Fh.length,h;o--;)h=Fh[o],e[h]=this[h];return e},wh.prototype.forWorkerMessage=wh.prototype.Y;function Gh(e){var o;if(e){var h=C(e,Gh);for(o in e)if(o in this){var d=e[o];d!==this[o]&&(o==="fillColor"||0<(d=+d))&&(this[o]=d)}e=h?e.Ob:!!(Ze(this.fillColor)&&this.width&&this.width),e||(this.Ob=e)}qc(this)}t("H.map.ArrowStyle",Gh),Gh.prototype.Ob=!0,Gh.prototype.fillColor="rgba(255,255,255,.75)",Gh.prototype.width=1.2,Gh.prototype.length=1.6,Gh.prototype.frequency=5,Gh.prototype.uj=function(){return new Gh(this)},Gh.prototype.ia=function(e){var o=this===e;return!o&&e&&(o=e.width===this.width&&e.fillColor===this.fillColor&&e.length===this.length&&e.frequency===this.frequency),o},Gh.prototype.equals=Gh.prototype.ia;function Hh(e,o){var h;Hh.j.constructor.call(this,o),o&&this.gb(o.style),e&&(this.g=!0),o&&(h=o.arrows)&&this.Mk(h)}u(Hh,M),t("H.map.Spatial",Hh),Hh.prototype.type=nh.SPATIAL,Hh.prototype.T=0,Hh.prototype.style=Eh,Hh.prototype.V=function(){return this.style},Hh.prototype.getStyle=Hh.prototype.V,Hh.prototype.gb=function(e){var o=!0;return e?this.style=C(e,wh)?e:new wh(e):this.style?delete this.style:o=!1,o&&this.invalidate(kh.VISUAL),this},Hh.prototype.setStyle=Hh.prototype.gb,Hh.prototype.Ml=function(){return this.c},Hh.prototype.getArrows=Hh.prototype.Ml,Hh.prototype.Mk=function(e){var o=this.c,h=!1;return!e&&o?(delete this.c,h=!0):!e||o&&o.ia(e)||(this.c=new Gh(e),h=!0),h&&this.style.strokeColor!=="none"&&this.ra(1),this},Hh.prototype.setArrows=Hh.prototype.Mk;function Ih(e,o){var h=!1,d=!1,g;if(o.length){for(h=0;h<o.length;h++)if(o[h]!==Jh){d=!0;break}o=e.style,h=d?o.b||o.Ob&&e.g||(g=e.c||!1)&&o.a&&g.Ob:o.Ob}return h&&e.wc(!0)}Hh.prototype.g=!1,Hh.prototype.sn=function(){return this.g},Hh.prototype.isClosed=Hh.prototype.sn,Hh.prototype.getGeometriesForTile=Hh.prototype.Kd,Hh.prototype.gh=function(){return B},Hh.prototype.getLabels=Hh.prototype.gh;function Kh(e,o){Kh.j.constructor.call(this,e,o)}u(Kh,Hh),t("H.map.GeoShape",Kh),Kh.prototype.getBoundingBox=Kh.prototype.K;function Lh(e,o,h,d){var g=[],_=o.length,$;for($=0;$<_;$++){var j=o[$];j.length&&g.push(Mh(e,j,h,d))}return g}function Mh(e,o,h,d){var g,_=[],$=o.length,j=0;for(e.xa=0,g=g||0;j<$;)_.push(Nh(e,o[j++],o[j++],g,d));return h&&_.push(Nh(e,o[0],o[1],g,d)),_}function Nh(e,o,h,d,g){var _=e.xa;return _&&180<Dd(_-h)&&(h+=0>_?-360:360),e.xa=h,g.Ah(o,h+d)}function Oh(e,o,h){for(var d=o,g,_=e.length+o,$,j;d--;){for(o=e[d],$=o.length,g=Array($);$--;)j=o[$],g[$]=new J(j.x+h,j.y);e[--_]=g}}function Ph(e,o,h){this.paths=this.a=e,o!==B&&(this.interiorsIndex=this.b=o),h!==B&&(this.outlinesIndex=this.c=h)}Ph.prototype.b=Wd,Ph.prototype.interiorsIndex=Ph.prototype.b,Ph.prototype.c=Wd,Ph.prototype.outlinesIndex=Ph.prototype.c;var Jh=rc(new Ph([])),Qh=qc([]);function th(e,o){th.j.constructor.call(this,!1,o),this.da(e)}u(th,Kh),t("H.map.Polyline",th),th.prototype.K=function(){return this.a.K()},th.prototype.getBoundingBox=th.prototype.K,th.prototype.da=function(e){var o=this.da,h,d;if(C(e,ih)){var g=e.la;if(h=g.length)for(d=0;d<h;d++)Rh(g[d],o);else throw new D(o,0)}else Rh(e,o);return this.b=!!g,this.a=e,this.ra(kh.SPATIAL),this},th.prototype.setGeometry=th.prototype.da,th.prototype.ga=function(){return this.a},th.prototype.getGeometry=th.prototype.ga,th.prototype.clip=function(e){var o=this.a;return eh(this.b?o.la[0]:o,e)},th.prototype.clip=th.prototype.clip,th.prototype.Kd=function(e){var o=this.a,h,d=[];if(this.b)for(o=o.la,h=o.length;h--;)Sh(this,o[h],e,d);else Sh(this,o,e,d);return d.length?d:B},th.prototype.getGeometriesForTile=th.prototype.Kd;function Rh(e,o){if(!C(e,L)||2>e.Ie())throw new D(o,0)}function Sh(e,o,h,d){var g=eh(o,h.Hf());if(g.length&&(o=h.Jf(),e=Lh(e,g,!1,o),g=e.length)){var _=h.Le();o=o.w,h.x||Oh(e,g,-o),h.x===(1<<h.z)-1&&Oh(e,g,o),h=Uf(e,_.left,_.top,_.right,_.bottom,!1),h.length&&d.push(new Ph(h))}}th.prototype.Y=function(){var e=th.j.Y.call(this),o=e.properties;return e.geometry=this.ga().Y(),o.style=this.V().Y(),o.height=0,e},th.prototype.forWorkerMessage=th.prototype.Y;var Th;function Uh(e,o){if(x.URL)return new x.URL(e,o).toString();if(!e||!Vh(e))return e;if(!o||Vh(o))throw new TypeError("Failed to construct 'URL': Invalid base URL");Th||(Th=document.createElement("a"),Ic(Th));var h=Th;return h.href=o,e[0]!=="/"?e=h.href.replace(/\/[^\/]*$/,"/")+e:((o=h.origin)||(o=h.protocol+"//"+h.host),e=o+e),e}function Vh(e){var o=!1;return typeof e=="string"&&(o=!(-1<e.search(/^(http|https|data|blob):/)||e.substr(0,2)==="//")),o}function Wh(e,o){if(Wh.j.constructor.call(this),o&&Vh(o))throw new D(Wh,1,"Base URL must be absolute");this.C=Xh.INIT,this.Ca=null,this.Yb=o}u(Wh,F),t("H.map.render.Style",Wh),Wh.prototype.load=Wh.prototype.load,Wh.prototype.getState=function(){return this.C},Wh.prototype.getState=Wh.prototype.getState,Wh.prototype.O=function(e){this.C=e},Wh.prototype.setState=Wh.prototype.O,Wh.prototype.Ib=function(){return this.Yb},Wh.prototype.getBaseUrl=Wh.prototype.Ib,Wh.prototype.qc=function(){return sc(this.Ca)},Wh.prototype.getConfig=Wh.prototype.qc,Wh.prototype.Tl=function(){return this.Ca},Wh.prototype.getConfigReference=Wh.prototype.Tl,Wh.prototype.vd=function(e){this.Ca=e},Wh.prototype.setConfig=Wh.prototype.vd,Wh.prototype.Gb=function(e){this.Ca=null,this.O(Xh.ERROR),this.sh(Yh)?this.dispatchEvent(new wd(Yh,e,this)):console.error(e)},Wh.prototype.dispatchError=Wh.prototype.Gb,Wh.prototype.o=function(){Wh.j.o.call(this),this.Ca=null};var Yh="error",Zh={ed:"change",Ni:Yh},Xh={ERROR:-1,INIT:0,LOADING:1,READY:2};Wh.State=Xh;function $h(e,o){var h,d=arguments.length,g,_;for(h=1;h<d;h++)if((g=arguments[h])&&g!==e&&g!==$){var $=g;for(_ in g){var j=g[_];e[_]!==j&&(ai(j)?ai(e[_])?e[_]=$h(e[_],j):e[_]=sc(j):j!==void 0&&(e[_]=sc(j)))}}return e}t("H.util.webgl.mergeObjects",$h);var bi=oc();function ci(e,o,h){var d=h[e];return o&&d in o&&0>uc.indexOf(d)?(o=o[d],++e<h.length?ci(e,o,h):o):bi}var di=ci.bind(null,0),ei={polygons:1,lines:1,"pattern-lines":1,points:1,text:1,raster:1,custom_icons:1,overlays:1},fi={data:1,draw:1,enabled:1,filter:1,properties:1},gi=Object.keys(fi);function hi(e,o,h,d,g,_){var $=d[e],j=h[$];if(++e<d.length){var _t=o[$]||{};for(h=gi.length;h--;){var _e=gi[h];if(_e!=="draw"||!_){var _r=j[_e];_r!==B&&(_t[_e]=sc(_r))}}hi(e,_t,j,d,g,_)}else g?_t=sc(j):(_t=j,delete h[$]);o[$]=o[$]?$h(o[$],_t):_t}var ii=hi.bind(null,0);function ji(e,o){e in ei&&(o[e]=1)}function ki(e,o,h){var d,g,_;for(d in e)if(fi[d]){if(d==="draw"){var $=e[d];for(g in $){var j=$[g];(_=j.style)?(j.style=o+_,ji(_,h)):(delete $[g],$[o+g]=j,ji(g,h))}}}else ki(e[d],o,h)}function li(e,o){var h={},d,g,_,$;if(o+="_",e=$h({},e),d=e.styles)for(g in d){var j=d[g];if(delete d[g],d[o+g]=j,_=j.mix)for(Cc(_)&&(_=[_]),$=_.length;$--;)ji(_[$],h),_[$]=o+_[$];($=j.base)&&(_||(_=j.mix=[]),_.unshift(o+$),delete j.base,ji($,h)),ji(g,h)}else d=e.styles={};if(j=e.layers)for(g in j)_=j[g],delete j[g],($=_.data)&&!$.layer&&($.layer=g),j[o+g]=_,ki(_,o,h);for(g in h)d[o+g]={base:g};return e}function mi(e,o){var h=e.sources,d=Object.keys(h)[0],g=$h(h[d],{uid:o});h=e.layers;var _;e.sources={},e.sources[o]=g;for(_ in h)e=h[_],e.data?e.data.source===d&&(e.data.source=o):e.data={source:o}}function ni(e,o){var h,d=e.textures;e=e.fonts;for(h in d){var g=d[h];g.url&&(g.url=Uh(g.url,o))}for(h in e)if(g=e[h],Bc(g))for(d=0;d<g.length;d++){var _=g[d];_.url=_.url&&Uh(_.url,o)}else _=g,_.url=_.url&&Uh(_.url,o)}function oi(e,o){return"function(){return "+("feature."+e+(o||""))+";}"}function pi(e){return oi("style."+e,void 0)}function qi(e,o,h,d){return e={base:e,blend:o,blend_order:h},d&&(e.clean_depth=!!d),e}function ri(e){var o={};return o["translucent-"+(e?"extruded-":"")+"polygons"]={color:pi("fillColor"),order:1,interactive:!0,extrude:e},o}function si(e,o,h,d){return e={data:{source:e,layer:o}},h&&(e.draw=h),d&&(e.filter=d),e}function ai(e){return Ea(e)&&!Bc(e)}function ti(e,o){if(ti.j.constructor.call(this,e,o),Cc(e))ui.test(e)&&e.indexOf("import:")===-1?(this.b=e,o||(this.g=Vh(this.b)?B:this.b)):this.c=e;else if(Ea(e))this.vd(sc(e));else throw new D(ti,0,"invalid style configuration")}u(ti,Wh),t("H.map.render.webgl.Style",ti),ti.prototype.load=function(){var e=this,o=this.Ib();this.b?(this.O(Xh.LOADING),new tf("text/plain",this.b).then(function(h){var d={};return vi(h,o,!1,(d[o]=!0,d))}).then(function(h){return e.vd(h)},function(h){return e.Gb(h.message)}),delete this.b):this.c&&(this.O(Xh.LOADING),vi(this.c,o).then(function(h){return e.vd(h)},function(h){return e.Gb(h.message)}),delete this.c)},ti.prototype.load=ti.prototype.load,ti.prototype.Rk=function(e,o,h){var d;for(wi(this),e=xi(this,e,this.Rk,h),h=0;h<e.length;h++){var g=e[h].eb.draw;for(d in g){var _=g[d];ai(_)&&(_.interactive=!!o)}}yi(this)},ti.prototype.setInteractive=ti.prototype.Rk,ti.prototype.setProperty=function(e,o,h){var d,g=e.split("."),_=0,$=g.length;if(wi(this),!vc(o))throw new D(this.setProperty,1,"value");if(d=zi(this.Ca,g)){if(!(d.parent instanceof Object)||d.parent instanceof Array)if(h)g.pop(),g=zi(this.Ca,g),d.parent=g.parent[g.fg]={};else throw new D(this.setProperty,0,e+" property is not primitive type");d.parent[d.fg]=o}else{for(d=this.Ca;_!==$-1;)d[g[_]]={},d=d[g[_++]];d[g[_]]=o}Ai(this)&&yi(this)},ti.prototype.setProperty=ti.prototype.setProperty,ti.prototype.kh=function(e){return wi(this),(e=zi(this.Ca,e.split(".")))?sc(e.node):void 0},ti.prototype.getProperty=ti.prototype.kh,ti.prototype.removeProperty=function(e){wi(this),(e=zi(this.Ca,e.split(".")))&&e.parent&&e.parent.hasOwnProperty(e.fg)&&(delete e.parent[e.fg],Ai(this)&&yi(this))},ti.prototype.removeProperty=ti.prototype.removeProperty,ti.prototype.xe=function(e,o,h){var d;wi(this);var g=this.Ca,_=g.layers,$=xi(this,e,this.xe,!1);for(e=$.length,d={};e--;)ii(d,_,$[e].id,!!o,!!h);for(h={},$=Object.keys(g),e=$.length;e--;){var j=$[e],_t=g[j];h[j]=_t===_?d:sc(_t)}return o||yi(this),h},ti.prototype.extractConfig=ti.prototype.xe,ti.prototype.Oe=function(e){if(wi(this),!Ea(e))throw new D(this.Oe,0,"config");this.vd($h(this.Ca,e))},ti.prototype.mergeConfig=ti.prototype.Oe,ti.prototype.a=ba(2),ti.prototype.toString=function(){return this.getState()===Xh.READY?x.H.gl.yaml.safeDump(this.Ca,{lineWidth:120}):""},ti.prototype.o=function(){ti.j.o.call(this),delete this.c,delete this.b};function Ai(e){var o=e.Ca,h;if(Ea(o)){var d;if(d=e.f){o=o&&o.sources,d=!1;for(var g in o)if(o[g].type===e.f){d=!0;break}d=!(!o||d)}d&&(h="invalid source, the only valid type is "+e.f)}else h="invalid style configuration";return h&&e.Gb(h),!h}function yi(e){e.dispatchEvent(new ud("change",e))}function wi(e){if(e.getState()!==Xh.READY)throw new $c(e.Oe,"style is not ready yet")}function xi(e,o,h,d){var g=[],_=Bc(o)?o:[o],$,j;for(d===void 0&&(d=!0),_=_.sort().reverse();$=_.pop();){o=String($).split(".");t:{for(var _t=e.Ca,_e=o.length;_e--&&!fi[o[_e]];);if(_t&&0>_e&&(_t=di(_t.layers,o),ai(_t)))break t;_t=bi}if(_t===bi)throw new D(h,0,'Unresolvable layer ID "'+$+'"');if(g.push({id:o,eb:_t}),d)for(j in _t)!fi[j]&&ai(_t[j])&&_.push($+"."+j)}return g}function zi(e,o){var h=0,d;for(d=o.length;h!==d;){var g=o[h++],_=e;if(e=_[g],!e)break}return h===d?{node:e,parent:_,fg:g}:void 0}var ui=/^(http[s]?)?.*\.ya?ml/i;function vi(e,o,h,d){h=h===void 0?!1:h,d=d===void 0?{}:d;try{var g=x.H.gl.yaml.safeLoad(e,{json:!0})}catch(_){return Promise.reject(_)}return g&&(e=g.import,Cc(e)&&(e=[e]),h&&o&&Bi(g,o),delete g.import,Bc(e)&&e.length)?(h=e.reduce(function(_,$){var j=o?Uh($,o):$;return d[j]||(d[j]=!0,_.push(new tf("text/plain",j).then(function(_t){return vi(_t,j,!0,d)}))),_},[]),Promise.all(h).then(function(_){var $={};return _.forEach(function(j){return j&&$h($,j)}),$h($,g),$})):Promise.resolve(g)}function Bi(e,o){function h($){$.url&&($.url=Uh($.url,o))}var d=e&&e.fonts;if(d)for(var g in d)Bc(d[g])?d[g].forEach(h):h(d[g]);if(e=e&&e.textures)for(var _ in e)h(e[_])}ti.normalize=Bi,ti.prototype.vd=function(e){ti.j.vd.call(this,e),Ai(this)&&(this.O(Xh.READY),yi(this))},ti.prototype.qc=function(){return ti.j.qc.call(this)},ti.prototype.getConfig=ti.prototype.qc,ti.prototype.Ib=function(){return this.g||ti.j.Ib.call(this)},ti.prototype.getBaseUrl=ti.prototype.Ib,t("H.map.Style",ti),ti.State=Xh;function O(e,o){var h;if(O.j.constructor.call(this),C(e,L,O,0),o!==B&&Bc(o,O,1)){for(h=0;h<o.length;h++)C(o[h],L,O,1,"index "+h);this.a=o}else this.a=[];this.b=e,this.c=[]}u(O,jg),t("H.geo.Polygon",O);function Ci(e){var o=O,h=L,d=e.c,g=e.a,_=e.f,$=e.b;return g=[d,g,B,d,$,B,_,$,B,_,g,B],180<=e.Ab()&&(g.splice(9,0,_,e=e.bb().lng,B),g.splice(3,0,d,e,B)),new o(new h(g))}O.fromRect=Ci;var Di={NORTH:90,SOUTH:-90};O.Direction=Di,O.prototype.pd=Di.NORTH,O.prototype.Sk=function(e){return this.pd!==e&&(this.f=z,this.c.length=0,this.pd=e),this},O.prototype.setPoleCovering=O.prototype.Sk,O.prototype.Km=function(){return this.pd},O.prototype.getPoleCovering=O.prototype.Km,O.prototype.fm=function(){return this.b},O.prototype.getExterior=O.prototype.fm,O.prototype.Pk=function(e){if(!C(e,L))throw new D(this.Pk,0,e);this.b=e,this.f=z},O.prototype.setExterior=O.prototype.Pk,O.prototype.rm=function(){return this.a},O.prototype.getInteriors=O.prototype.rm,O.prototype.xg=function(e,o,h){var d=arguments.length,g;for(g=2;g<d;g++)C(arguments[g],L,this.xg,g);var _=this.a.splice.apply(this.a,arguments);for(g=2;g<d;g++)arguments[g]=B;return this.c.splice.apply(this.c,arguments),_},O.prototype.spliceInteriors=O.prototype.xg,O.prototype.no=function(e){return this.xg(e,1)[0]},O.prototype.removeInteriorAt=O.prototype.no,O.prototype.mo=function(e){return e=this.a.indexOf(e),0>e?B:this.xg(e,1)[0]},O.prototype.removeInterior=O.prototype.mo,O.prototype.Bk=function(e){if(!C(e,L))throw new D(this.Bk,0,e);this.a.push(e)},O.prototype.pushInterior=O.prototype.Bk,O.prototype.K=function(){var e=this.f;return e||(this.f=e=Ei(this.b,this.pd)),e},O.prototype.getBoundingBox=O.prototype.K,p=O.prototype,p.tj=function(e){var o=this.a.length;if(0>e||e>=o)throw new ne(this.tj,e,[0,o-1]);return(o=this.c[e])||(this.c[e]=o=Ei(this.a[e],this.pd)),o};function Ei(e,o){var h,d,g;return(g=e.K())&&((h=e.eh(!0))&&(d=e.Ie())&&(g=g.ec(tg([e.ye(0),e.ye(d-1)],!0),!0)),g.Ab()===360&&h%2===1&&(g=g.Xc(o,0))),g}p.rb="Polygon",p.cd=function(e){var o=this.a,h=o.length,d;if(this.b.Ie()){for(e.push("("),this.b.cd(e,!0),d=0;d<h;d++)o[d].Ie()&&(e.push(","),o[d].cd(e,!0));e.push(")")}else e.push("EMPTY");return e},p.Hb="Polygon",p.bd=function(){var e,o=[],h=this.a,d=this.b.bd();for(d[0].toString()!==d[d.length-1].toString()&&d.push(d[0]),o.push(d),e=0;e<h.length;e++)d=h[e].bd(),d[0].toString()!==d[d.length-1].toString()&&d.push(d[0]),o.push(d);return o},p.Y=function(){var e=O.j.Y.call(this);return this.K().Bb()&&(e.type="Multi"+e.type),e},p.pc=function(){var e=[],o=this.a,h=o.length;for(e.push(this.b.pc());h--;)e[h+1]=o[h].pc();return this.K().Bb()?[e]:e},p.ia=function(e){var o=!1;if(C(e,O)){var h=e.a,d=this.a.length;o=h.length;var g=0;for(o=this.b.ia(e.b)&&d===o;o&&g<d;)o=o&&this.a[g].ia(h[g]),g++}return o},O.prototype.equals=O.prototype.ia;function Fi(e,o,h,d){d=d===void 0?!0:d;var g=e.a,_=Gi.bind(null,o,h);return ee(o,h,e.b.$,0,!0,3)!==de.NONE?d?!g.some(_):!0:!1}function Gi(e,o,h){return ee(e,o,h.$,0,!0,3)===de.SURFACE}function Hi(e,o){o=o.$,e=e.b.$;var h,d,g=o.length-3,_=e.length-3,$={};for(h=0;h<g;h+=3){var j=o[h],_t=o[h+1],_e=o[h+3],_r=o[h+4];for(d=0;d<_;d+=3){var _n=e[d],_i=e[d+1],_o=e[d+3],_a=e[d+4];if(ag(new Yf(_t,j),new Yf(_r,_e),new Yf(_i,_n),new Yf(_a,_o),$,!0))return!0}}return!1}function Ii(e,o){var h=o.b,d=o.a,g=d.length,_=h.$,$=_.length,j=e.b.$,_t=j.length;if(Hi(e,h))return!0;for(h=0;h<$;h+=3)if(Fi(e,_[h],_[h+1]))return!0;for(h=0;h<_t;h+=3)if(Fi(o,j[h],j[h+1]))return!0;for(h=0;h<g;h++)if(Hi(e,d[h]))return!0;return!1}function Ji(e){Ji.j.constructor.call(this,e)}u(Ji,gh),t("H.geo.MultiPolygon",Ji),Ji.prototype.b=function(e){return C(e,O)},Ji.prototype.rb="Multi"+O.prototype.rb,Ji.prototype.Hb="Multi"+O.prototype.Hb;function uh(e,o){var h=o&&(+o.extrusion||+o.extrude)||0,d=o&&+o.elevation||0,g=0;if(uh.j.constructor.call(this,!0,o),0<d&&(g+=d,this.b=d),0<h&&(g+=h,this.f=h),2047<g)throw new ne(uh,g,[0,2047]);C(e,L)?this.da(new O(e)):this.da(e)}u(uh,Kh),t("H.map.Polygon",uh);var Ki=new O(new L([0,0,0,0,0,0,0,0,0]));uh.prototype.f=0,uh.prototype.b=0,uh.prototype.a=Ki,uh.MAX_EXTRUDE_HEIGHT=2047,uh.prototype.pi=function(e){var o=+e;if(o!==e)throw new D(this.pi,0,e);if(0>o||2047<this.b+o)throw new ne(this.pi,this.b+o,[0,2047]);this.f=o,this.ra(kh.SPATIAL)},uh.prototype.setExtrusion=uh.prototype.pi,uh.prototype.gm=function(){return this.f},uh.prototype.getExtrusion=uh.prototype.gm,uh.prototype.oi=function(e){var o=+e;if(o!==e)throw new D(this.oi,0,e);if(0>o||2047<this.f+o)throw new ne(this.oi,this.f+o,[0,2047]);this.b=o,this.ra(kh.SPATIAL)},uh.prototype.setElevation=uh.prototype.oi,uh.prototype.bm=function(){return this.b},uh.prototype.getElevation=uh.prototype.bm,uh.prototype.ga=function(){return this.a},uh.prototype.getGeometry=uh.prototype.ga,uh.prototype.da=function(e){if(C(e,O))var o=!1;else C(e,Ji,this.da,0),o=!0;return this.J=o,o=this.a,this.a=e,o!==Ki&&this.ra(kh.SPATIAL),this},uh.prototype.setGeometry=uh.prototype.da,uh.prototype.K=function(){return this.ga().K()},uh.prototype.getBoundingBox=uh.prototype.K,uh.prototype.Kd=function(e){var o,h=this.ga(),d,g;if(this.J){h=h.la;var _=0;for(g=h.length;_<g;_++)(d=Li(this,h[_],e,h[_].pd))&&(o||(o=[]),o.push(d))}else d=this.ab,d===B&&(d=this.J?Di.NORTH:this.ga().pd),(d=Li(this,h,e,d))&&(o=[d]);return o},uh.prototype.getGeometriesForTile=uh.prototype.Kd;function Li(e,o,h,d){var g,_,$=0,j=!0;if(g=Mi(e,o.b,h,d,o.K())){var _t=new Ph(g),_e=o.a;if(_=_e.length)for(_t.b=_t.a.length;$<_;$++)(g=Mi(e,_e[$],h,d,o.tj($)))&&(_t.a=_t.a.concat(g));for(_=_t.a.length,$=0;$<_;$++)if(_t.a[$]!==Qh){j=!1;break}j&&(_t=$%2?Jh:B)}return _t}function Mi(e,o,h,d,g){var _=h.Le(),$=g,j=$.Ab(),_t=[[]],_e=o.$,_r=[],_n=_e.length,_i,_o=!1;for(_i=0;_i<_n;_i+=3){var _a=_e[_i],_u=_e[_i+1];_o||Dd(_u)!=180||(_r.push(_a),_r.push(_u),_r.push(_a),_r.push(-_u),_o=!0),_r.push(_a),_r.push(_u)}if(_e=_r,360>j&&$.a==-180&&($=new K($.c,180,$.f,$.b)),360>j&&$.b==180&&($=new K($.c,$.a,$.f,-180)),$.Bb()){for(j=_e,_a=j.length,_e=-1,_r=0;_r<_a-2;_r+=2)if(ig(j[_r+1],j[_r+3])){_e=_r+2;break}_e===-1&&ig(j[_a-1],j[1])&&(_e=_a),_e!==-1&&(_n=j[_e-2],_r=j[_e-1],_i=j[_e%_a],_o=j[(_e+1)%_a],Dd(_n)!==180&&Dd(_i)!==180&&(_u=Dd(_i-_n),_a=Dd(_o-_r),_a+=180<_a?-360:0,_o=Dd(180-_o),_o+=180<_o?-360:0,_a&&_o&&(_u/=Dd(_a)/Dd(_o),_n=_i+(_i>_n?-_u:_u),_r=0<_r?180:-180,j.splice(_e,0,_n,_r,_n,-_r)))),_e=j}if(_t[0]=Ni(_e.concat(),$.a),360>$.Ab()&&$.gd(new kg($.c,180))&&(_e=Ni(_e.concat(),$.b),_t.push(_e)),$=h.Jf(),e=Lh(e,_t,!0,$),g.Ab()===360&&o.eh(!0)%2===1){for(o=e,e=h.Le(),o[0][1].x>o[0][o[0].length-1].x&&(o[0]=o[0].reverse()),_e=[],j=o[0].length-1,_t=0;_t<j;_t++)_r=o[0][_t],_e[_t]=new J(_r.x-2*$.w,_r.y),_e[_t+j]=new J(_r.x-$.w,_r.y),_e[_t+2*j]=new J(_r.x,_r.y),_e[_t+3*j]=new J(_r.x+$.w,_r.y),_e[_t+4*j]=new J(_r.x+2*$.w,_r.y);o[0]=_e,_t=$.Ah(d,0),_t.y=2*e[d===Di.NORTH?"top":"bottom"],d=_t.clone(),_t.x=o[0][o[0].length-1].x+1,d.x=o[0][0].x-1,o[0].push(_t,d),e=o}if(d=_.left,o=_.top,_t=_.right,_=_.bottom,Uf(e,d,o,_t,_,!0).length){if(!h.Hf().Qg(g)){for(h=e,g=[new J(d,o),new J(_t,o),new J(_t,_),new J(d,_)],_=[],e=h.length;e--;)if(d=Wf(g,h[e]))for(o=Oi(d),_.push(o);d.Uh;)d=d.Uh,o=Oi(d),_.push(o);e=_}}else h=Pi(d,o,e[0]),e[1]&&(h=h!==Pi(d,o,e[1])),e=h?[Qh]:B;return e}function Pi(e,o,h){var d,g,_,$=d=h[0].x,j=g=h[0].y,_t=1;for(_=h.length;_t<_;_t++){var _e=h[_t].x,_r=h[_t].y;_e>d?d=_e:_e<$&&($=_e),_r>g?g=_r:_r<j&&(j=_r)}return $<=e&&e<=d&&j<=o&&o<=g&&fe({x:e,y:o},ge(h.concat(h[0])))}function Oi(e){var o=[],h=e;do{var d=Ad(100*(h.eo?h.eo:h.x))/100,g=Ad(100*(h.fo?h.fo:h.y))/100;if(!_||.01<Fd(Gd(_.x-d,2)+Gd(_.y-g,2))){var _=new J(d,g);o.push(_)}h=h.next}while(h&&h!==e);return o}uh.prototype.aa=z;function Ni(e,o){var h,d=Number.POSITIVE_INFINITY,g=-1,_=e.length;for(h=0;h<_;h+=2){var $=Dd(e[h+1]-o);$+=180<$?360-$:$,$<d&&(d=$,g=h)}return 0<h?(o=e.splice(g,e.length-g),o.concat(e)):e}uh.prototype.Y=function(){var e=uh.j.Y.call(this),o=this.ga(),h=this.J?o.la:[o],d,g=e.properties,_=e.geometry=o.Y();if(g.style=this.V().Y(),g.height=this.f+this.b,g.min_height=this.b,this.K().Bb()&&(_.type="MultiPolygon",this.J)){var $=[];h.forEach(function(j,_t){d=_.coordinates[_t],j.K().Bb()?$=$.concat(d):$.push(d)}),_.coordinates=$}return e},uh.prototype.forWorkerMessage=uh.prototype.Y;function Qi(e,o,h){Qi.j.constructor.call(this,Ki,h),this.tg(e),this.zi(o),h&&"precision"in h&&this.yi(h.precision)}u(Qi,uh),t("H.map.Circle",Qi),Qi.prototype.tg=function(e){(e=ng(e)).ia(this.R)||(this.R=e,Ri(this))},Qi.prototype.setCenter=Qi.prototype.tg,Qi.prototype.bb=function(){return this.R},Qi.prototype.getCenter=Qi.prototype.bb,Qi.prototype.zi=function(e){if(E(e=ae(e,0,637100079e-2*Pd/2)))throw new D(this.zi,0,e);this.wa!==e&&(this.wa=e,Ri(this))},Qi.prototype.setRadius=Qi.prototype.zi,Qi.prototype.Qm=function(){return this.wa},Qi.prototype.getRadius=Qi.prototype.Qm,Qi.prototype.D=60,Qi.prototype.yi=function(e){if(!Fc(e))throw new D(this.yi,0,e);this.D!==(e=ae(Ad(e),4,360))&&(this.D=e,Ri(this))},Qi.prototype.setPrecision=Qi.prototype.yi,Qi.prototype.Nm=function(){return this.D},Qi.prototype.getPrecision=Qi.prototype.Nm,Qi.prototype.da=function(){return this},Qi.prototype.setGeometry=Qi.prototype.da,Qi.prototype.ga=function(){return this.a===Ki&&Qi.j.da.call(this,Si(this)),this.a},Qi.prototype.getGeometry=Qi.prototype.ga;function Ri(e){e.a!==z&&Qi.j.da.call(e,Si(e))}function Si(e){var o=e.R,h=o.lat,d=e.wa,g=0,_=new L;if(Dd(h)===90)for(h=o.zg(0,d,!0).lat;360>g;g+=120)_.gi(h,g-180,B);else for(e=e.D,e=360/e;360>g;g+=e)_.qd(o.zg(g,d,!0));return o=new O(_),0>h&&o.Sk(Di.SOUTH),o}function Ti(e,o){if(!C(e,Element)){if(Ui.innerHTML=e,e=Ui.firstElementChild,!e)throw new D(Ti,0,"No element data");Ui.removeChild(e);var h=!0;Ui.innerHTML=""}this.a=kf(e).length!==0,this.f=h?e:lf(e,x.document,this.a),o&&(h="onAttach",h in o&&zc(e=o[h],"Function",Ti,1,h)&&(this.Vh=e),h="onDetach",h in o&&zc(e=o[h],"Function",Ti,1,h)&&(this.b=e))}t("H.map.DomIcon",Ti);var Ui=document.createElement("DIV");Ti.prototype.Vh=null,Ti.prototype.b=null,Ti.prototype.uj=function(e){return lf(this.f,e,this.a)},Ti.prototype.a=!1;function Vi(e){Vi.j.constructor.call(this,e)}u(Vi,gh),t("H.geo.MultiPoint",Vi),Vi.prototype.b=function(e){return lg(e)},Vi.prototype.c=function(e){return C(e,kg)?e:ng(e)},Vi.prototype.rb="Multi"+kg.prototype.rb,Vi.prototype.Hb="Multi"+kg.prototype.Hb;function Wi(e,o){this.w=+e,this.h=+o}t("H.math.Size",Wi);function Xi(e,o){var h,d=e,g=o||[];if(e!==Yi.NONE){if(o=h=g.length,Zi.indexOf(d)===-1)throw new D(Xi,0,e);if(!g)throw new D(Xi,1,g);for(;h--;)if(E(g[h]))throw new D(Xi,1,g);if(d===Yi.RECT&&3<o&&(g=[g[0],g[1],g[2],g[1],g[2],g[3],g[0],g[3]],d=Yi.POLYGON),d===Yi.CIRCLE&&2<o&&(e=g[2],0<e)){d=g[0];var _=g[1];h=yd(2*Cd(e),40);var $=360/h;for(g=[];h--;){var j=$*h*Ud;g.push(d+Id(j)*e,_+Kd(j)*e)}d=Yi.POLYGON}if(d!==Yi.POLYGON||!o||g.length%2)throw new D(Xi,1,g);this.a=g}}t("H.map.HitArea",Xi);var Yi={NONE:0,RECT:1,CIRCLE:2,POLYGON:3};Xi.ShapeType=Yi;var Zi=[Yi.RECT,Yi.CIRCLE,Yi.POLYGON];Xi.prototype.Of=function(e,o,h){return this.a?ee(e,o,this.a,h,!0):de.NONE},Xi.prototype.hitTest=Xi.prototype.Of;function rh(e,o){var h;xc(this,rh),rh.j.constructor.call(this,o),this.da(e),o&&"icon"in o&&(h=o.icon),this.Ic(h||$i(this))}u(rh,M),t("H.map.AbstractMarker",rh),rh.prototype.ga=function(){return this.a},rh.prototype.getGeometry=rh.prototype.ga,rh.prototype.da=function(e){var o=this.a;return C(e,kg)||C(e,Vi)?this.a=e:(lg(e,this.da,0),this.a=ng(e)),o&&this.ra(kh.SPATIAL),this},rh.prototype.setGeometry=rh.prototype.da,rh.prototype.K=function(){return this.a.K()},rh.prototype.xb=function(){return this.icon},rh.prototype.getIcon=rh.prototype.xb,rh.prototype.Ic=function(e){var o=this.icon,h=!o;if(o!==e){if(!this.Uj(e))throw h?new D(this.constructor,1,e):new D(this.Ic,0,e);this.icon=e,h||this.ra(kh.VISUAL)}return this},rh.prototype.setIcon=rh.prototype.Ic;function $i(e){var o=e.c;return o||(o=e.constructor.prototype.c=e.b(aj)),o}var aj={svg:'<svg xmlns="http://www.w3.org/2000/svg" width="38" height="47" viewBox="0 0 38 47"><g fill="none"><path fill="#0F1621" fill-opacity=".4" d="M15 46c0 .317 1.79.574 4 .574s4-.257 4-.574c0-.317-1.79-.574-4-.574s-4 .257-4 .574z"></path><path fill="#01b6b2" d="M33.25 31.652A19.015 19.015 0 0 0 38 19.06C38 8.549 29.478 0 19 0S0 8.55 0 19.059c0 4.823 1.795 9.233 4.75 12.593L18.975 46 33.25 31.652z"></path><path fill="#6A6D74" fill-opacity=".5" d="M26.862 37.5l4.714-4.77c3.822-3.576 5.924-8.411 5.924-13.62C37.5 8.847 29.2.5 19 .5S.5 8.848.5 19.11c0 5.209 2.102 10.044 5.919 13.614l4.719 4.776h15.724zM19 0c10.493 0 19 8.525 19 19.041 0 5.507-2.348 10.454-6.079 13.932L19 46 6.079 32.973C2.348 29.495 0 24.548 0 19.04 0 8.525 8.507 0 19 0z"></path></g></svg>',size:new Wi(38,47),anchor:new J(19,45),hitArea:new Xi(Yi.POLYGON,[19,46,2,27,0,18,5,6,19,0,32,5,38,15,36,27,19,47])};rh.prototype.Y=function(){var e=rh.j.Y.call(this),o=this.xb(),h=o.yb(),d=o.kd();return e.geometry=this.ga().Y(),h&&(o=e.properties.icon={id:o.uid},o.size={w:h.w,h:h.h},o.offset=[h.w/2-(d?d.x:0),h.h/2-(d?d.y:0)]),e},rh.prototype.forWorkerMessage=rh.prototype.Y;function bj(e,o){bj.j.constructor.call(this,e,o)}u(bj,rh),t("H.map.DomMarker",bj),bj.prototype.type=nh.DOM_MARKER,bj.prototype.T=2,bj.prototype.b=function(e){var o=new Ti(e.svg,e);return e=e.anchor,o.f.style.margin=-e.y+"px 0 0 -"+e.x+"px",o},bj.prototype.Uj=function(e){return C(e,Ti)};function cj(e,o,h){cj.j.constructor.call(this,e),this.oldValue=h,this.newValue=o}u(cj,ud),t("H.util.ChangeEvent",cj);function dj(e,o,h,d){dj.j.constructor.call(this,e,o,h),this.modifiers=d}u(dj,cj),t("H.map.ChangeEvent",dj);var ej={SIZE:1,POSITION:2,HEADING:4,TILT:8,INCLINE:16,ZOOM:32,BOUNDS:64};dj.Type=ej,dj.prototype.ll=ej.SIZE,dj.prototype.SIZE=dj.prototype.ll,dj.prototype.Ui=ej.POSITION,dj.prototype.POSITION=dj.prototype.Ui,dj.prototype.Oi=ej.HEADING,dj.prototype.HEADING=dj.prototype.Oi,dj.prototype.Wi=ej.TILT,dj.prototype.TILT=dj.prototype.Wi,dj.prototype.Pi=ej.INCLINE,dj.prototype.INCLINE=dj.prototype.Pi,dj.prototype.Xi=ej.ZOOM,dj.prototype.ZOOM=dj.prototype.Xi,dj.prototype.Mi=ej.BOUNDS,dj.prototype.BOUNDS=dj.prototype.Mi;function fj(){this.a=[],fj.j.constructor.call(this)}u(fj,F),t("H.util.OList",fj);function gj(e,o,h){if(e=e.a.length,h)var d=e;else if(E(d=0>(d=+o)?zd(0,e+d):yd(e,d)))throw new ne(fj,o,[0,e-1]);return d}fj.prototype.add=function(e,o){o=gj(this,o,E(o)),this.a.splice(o,0,e),this.dispatchEvent(new hj(this,this.A.he,o,e,null,null))},fj.prototype.add=fj.prototype.add;function ij(e,o){var h=e.a.splice(o,1)[0];return e.dispatchEvent(new hj(e,e.A.je,o,null,h,null)),h}fj.prototype.hc=function(e){return this.get(e),ij(this,e)},fj.prototype.removeAt=fj.prototype.hc,fj.prototype.remove=function(e){return e=this.indexOf(e),0<=e?(ij(this,e),!0):!1},fj.prototype.remove=fj.prototype.remove,fj.prototype.set=function(e,o){if(this.a.length!==0||e!==0){this.get(e),e=gj(this,e,!1);var h=this.a[e]}return this.a[e]=o,this.dispatchEvent(new hj(this,this.A.ke,e,o,h,null)),h},fj.prototype.set=fj.prototype.set,fj.prototype.indexOf=function(e){return this.a.indexOf(e)},fj.prototype.indexOf=fj.prototype.indexOf,fj.prototype.get=function(e){var o=gj(this,e,!1),h=this.a;if(o>=h.length)throw new ne(this.get,e,[0,h.length-1]);return h[o]},fj.prototype.get=fj.prototype.get,fj.prototype.ym=function(){return this.a.length},fj.prototype.getLength=fj.prototype.ym,fj.prototype.La=function(){return this.a.concat()},fj.prototype.asArray=fj.prototype.La,fj.prototype.flush=function(){for(var e=this.a.length;e--;)ij(this,e)},fj.prototype.flush=fj.prototype.flush,fj.prototype.o=function(){this.flush(),fj.j.o.call(this)},fj.prototype.A={he:"add",je:"remove",ke:"set",Xo:"move"};function hj(e,o,h,d,g,_){hj.j.constructor.call(this,o,e),this.idx=h,this.added=d,this.removed=g,this.moved=_}u(hj,ud),fj.Event=hj;function jj(){}function kj(e){return yd(1,zd(0,.5-Ed(Ld(Rd+Qd*e/180))/Pd/2))}jj.prototype.Tf=function(e,o,h){return h?(h.x=o/360+.5,h.y=kj(e)):h=new J(o/360+.5,kj(e)),h},jj.prototype.latLngToPoint=jj.prototype.Tf,jj.prototype.Pc=function(e,o){return this.Tf(e.lat,e.lng,o)},jj.prototype.geoToPoint=jj.prototype.Pc;function lj(e){return 0>=e?90:1<=e?-90:Vd*(2*Md(Hd(Pd*(1-2*e)))-Qd)}jj.prototype.Ra=function(e,o,h){return h?(h.lat=lj(o),h.lng=360*(e===1?1:Zd(e,1))-180):h=new kg(lj(o),360*(e===1?1:Zd(e,1))-180),h},jj.prototype.xyToGeo=jj.prototype.Ra,jj.prototype.dg=function(e,o){return this.Ra(e.x,e.y,o)},jj.prototype.pointToGeo=jj.prototype.dg;var mj=new jj;t("H.geo.mercator",mj),t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0),t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22);function nj(e,o){this.projection=e||mj,this.b=0,this.a=this.exp=Ed(o||256)/Od,oj(this),this.y=this.x=0}t("H.geo.PixelProjection",nj);var pj=Dd(24)+Dd(-8);nj.prototype.eg=mj,nj.prototype.projection=nj.prototype.eg,nj.prototype.x=0,nj.prototype.x=nj.prototype.x,nj.prototype.y=0,nj.prototype.y=nj.prototype.y,nj.prototype.Oo=Gd(2,pj),nj.prototype.w=nj.prototype.Oo,nj.prototype.ln=Gd(2,pj),nj.prototype.h=nj.prototype.ln,nj.prototype.Oa=function(e){if(E(e))throw new D(this.Oa,0,e);var o=this.x/this.w,h=this.y/this.h;this.b=e,this.a=this.exp+e,oj(this),this.x=o*this.w,this.y=h*this.h},nj.prototype.rescale=nj.prototype.Oa;function oj(e){e.a>pj&&(e.a=pj),e.w=Gd(2,e.a),e.h=Gd(2,e.a)}nj.prototype.Jj=function(){return this.b||0},nj.prototype.getZoomScale=nj.prototype.Jj,nj.prototype.ib=function(e,o){return e=this.projection.Tf(e.lat,e.lng,o),e.x=e.x*this.w-this.x,e.y=e.y*this.h-this.y,e},nj.prototype.geoToPixel=nj.prototype.ib,nj.prototype.Re=function(e,o){return this.projection.Ra((e.x+this.x)/this.w,(e.y+this.y)/this.h,o)},nj.prototype.pixelToGeo=nj.prototype.Re,nj.prototype.Ra=function(e,o,h){return this.projection.Ra((e+this.x)/this.w,(o+this.y)/this.h,h)},nj.prototype.xyToGeo=nj.prototype.Ra,nj.prototype.Ah=function(e,o,h){return e=this.projection.Tf(e,o,h),e.x=e.x*this.w-this.x,e.y=e.y*this.h-this.y,e},nj.prototype.latLngToPixel=nj.prototype.Ah,nj.prototype.Zd=function(e){return new J(e.x*this.w-this.x,e.y*this.h-this.y)},nj.prototype.pointToPixel=nj.prototype.Zd;function qj(e){e=e||{},qj.j.constructor.call(this),this.min=0,this.max=22,this.yl=this.dark=!!e.dark,e.min&&this.ui(e.min),e.max&&this.si(e.max),this.pixelProjection=new nj(e.projection,e.minWorldSize),e.provider&&(this.ma=e.provider,this.Va=A(this.Va,this),this.ma.addEventListener(P.prototype.A.za,this.Va,!1,this),this.hb=A(this.hb,this),this.ma.addEventListener(P.prototype.A.ie,this.hb,!1,this))}u(qj,F),t("H.map.layer.Layer",qj),qj.prototype.min=0,qj.prototype.min=qj.prototype.min,qj.prototype.max=22,qj.prototype.max=qj.prototype.max,qj.prototype.A={za:"update",ie:"configchange",Ti:"minchange",Si:"maxchange"},qj.prototype.ca=function(){return this.ma},qj.prototype.getProvider=qj.prototype.ca,qj.prototype.un=function(e){return this.min<=e&&e<=this.max},qj.prototype.isValid=qj.prototype.un;function rj(e,o,h){var d=e[o],g=o==="min",_=g?e.ui:e.si;if(h!==d)if(g?h<=e.max:h>=e.min)e[o]=h,e.Va(),e.hb(),e.dispatchEvent(new cj(g?e.A.Ti:e.A.Si,h,d));else throw new D(_,0,"Invalid condition min <= max");return e}qj.prototype.ui=function(e){return rj(this,"min",+e)},qj.prototype.setMin=qj.prototype.ui,qj.prototype.si=function(e){return rj(this,"max",+e)},qj.prototype.setMax=qj.prototype.si,qj.prototype.Va=function(){this.dispatchEvent(this.A.za)},qj.prototype.hb=function(e){e=new cj(this.A.ie,e&&e.newValue,e&&e.oldValue),this.dispatchEvent(e)},qj.prototype.o=function(){qj.j.o.call(this)},qj.prototype.ba=function(){return null},qj.prototype.getCopyrights=qj.prototype.ba;function sj(e){var o;if(sj.j.constructor.call(this),this.dispatchEvent=A(this.dispatchEvent,this),e){var h=e.length;for(o=0;o<h;o++)this.add(e[o])}}u(sj,fj),t("H.map.DataModel",sj);function tj(e,o){var h=o.getProvider&&o.getProvider();h&&(uj[h.uid]=h),o.ka(e)}function vj(e){var o=e.getProvider&&e.getProvider();o&&delete uj[o.uid],e.ka(null)}sj.prototype.add=function(e,o){C(e,qj,this.add,0),tj(this,e),sj.j.add.call(this,e,o)},sj.prototype.add=sj.prototype.add,sj.prototype.set=function(e,o){return C(o,qj,this.set,0),tj(this,o),(e=sj.j.set.call(this,e,o))&&vj(e),e},sj.prototype.set=sj.prototype.set,sj.prototype.hc=function(e){var o;return(o=sj.j.hc.call(this,e))&&vj(o),o},sj.prototype.removeAt=sj.prototype.hc,sj.prototype.remove=function(e){var o;return(o=sj.j.remove.call(this,e))&&vj(e),o},sj.prototype.remove=sj.prototype.remove,sj.prototype.flush=function(){for(var e=this.a.length;e--;)this.hc(e);sj.j.flush.call(this)},sj.prototype.flush=sj.prototype.flush;var uj={};Ic(uj);function wj(e,o,h){if(e=uj[e])return C(e[o],Function,wj,1,"invalid method"),e[o].apply(e,h)}sj.invoke=wj;function xj(e,o){Da(e)&&(this.i=e),Fc(o)&&(this.a=o)}t("H.util.Request",xj),xj.State={PENDING:0,PROCESSING:1,COMPLETE:2,CANCELLED:3,ERROR:4};var yj=[0,1,2,3,4];xj.prototype.C=0,xj.prototype.getState=function(){return this.C},xj.prototype.getState=xj.prototype.getState,xj.prototype.O=function(e){if(0>yj.indexOf(e))throw new D(this.O,0,e);(this.C!==e||e===1&&1<this.a)&&(this.C=e,this.i&&this.i(this))},xj.prototype.a=1,xj.prototype.cn=function(){return this.a},xj.prototype.getTotal=xj.prototype.cn,xj.prototype.b=0,xj.prototype.Om=function(){return this.b},xj.prototype.getProcessed=xj.prototype.Om,xj.prototype.g=0,xj.prototype.hm=function(){return this.g},xj.prototype.getFailed=xj.prototype.hm;function zj(e,o){e.b<e.a&&(vc(o)||(o=2),o===0||o===1||e.C!==0&&e.C!==1||(e.b++,o!==2&&e.g++,e.O(e.b<e.a?1:2)))}xj.prototype.oe=function(){},xj.prototype.cancel=function(){this.C!==3&&(this.oe(),this.O(3))},xj.prototype.cancel=xj.prototype.cancel;function Aj(){}t("H.util.ICapturable",Aj),Aj.prototype.capture=function(){},Aj.prototype.capture=Aj.prototype.capture,t("H.util.Disposable",qd),qd.prototype.tb=qd.prototype.tb,qd.prototype.addOnDisposeCallback=qd.prototype.tb,t("H.util.dispose",td),qd.prototype.F=qd.prototype.F,qd.prototype.dispose=qd.prototype.F,qd.prototype.o=qd.prototype.o,qd.prototype.disposeInternal=qd.prototype.o;function Bj(e,o){var h=e.N(),d=h.ownerDocument;Bj.j.constructor.call(this),this.a=e,this.S=h=h.appendChild(Cj(d,"DIV","position:absolute;bottom:0;right:0;left:0px;z-index:1;direction:ltr;pointer-events:none;height:40px-webkit-touch-callout: none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select:none;",null,"H_imprint")),this.qf=Cj(d,"DIV","margin: 0 0 16px 16px;display:inline-block;",'<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>',"H_logo"),h.appendChild(this.qf),h=h.appendChild(Cj(d,"DIV","right:0;bottom:0;position:absolute;background-color:rgba(255,255,255,.8);color:#0F1621;padding:2px 16px",null,"H_copyright")),this.i=h.appendChild(Cj(d,"A","color:inherit; margin:0px 8px; text-decoration:none; pointer-events:all;","Terms of use")),this.i.target="_blank",this.g=h.appendChild(Cj(d,"SPAN","margin:0px 8px")),this.c=h.appendChild(Cj(d,"SPAN")),this.s=Wa(Dj),this.vi(o),this.f=A(this.f,this),this.b=A(this.b,this),this.a.addEventListener(this.a.A.Ri,this.f),this.a.a.addEventListener("add",this.b),this.a.a.addEventListener("remove",this.b),this.a.a.addEventListener("set",this.b),this.b()}var Ej;u(Bj,qd),t("H.map.Imprint",Bj);var Dj={font:'11px "Lucida Grande", Arial, Helvetica, sans-serif',href:"https://legal.here.com/{LN}/terms/serviceterms/{CN}",invert:!1,reportHref:"https://wego.here.com/",locale:"en-US",mark:""};Bj.prototype.vi=function(e){var o,h=this.qf.firstElementChild.firstElementChild.children;e||(this.s=Wa(Dj));var d=this.s;for(o in d)e&&o in e&&(d[o]=e[o]);e=(this.wh=e=d.invert)?Fj:Gj,h[0].style.fill=e.Wk,h[0].style.fillOpacity=""+e.Xk,h[1].style.fill=e.al,h[1].style.fillOpacity=""+e.bl,e=d.locale,Hj[e]||(e="en-US",d.locale=e),this.i.innerHTML=Hj[e],e=e.split("-"),this.i.href=d.href.replace("{LN}",e[0]).replace("{CN}",e[1].toLowerCase()),d.mark?(this.c.innerHTML=d.mark,this.c.style.margin="0px 8px"):(this.c.innerHTML="",this.c.style.margin="0px"),this.S.style.font=d.font},Bj.prototype.setOptions=Bj.prototype.vi;function Cj(e,o,h,d,g){return e=e.createElement(o),h&&(e.style.cssText=h),d&&(e.innerHTML=d),g&&(e.className=g),e}Bj.prototype.N=function(){return this.S},Bj.prototype.f=function(){this.g.innerHTML=this.l+" "+this.ba()},Bj.prototype.b=function(){this.f(),setTimeout(this.f,5e3)};var Gj={al:"#0F1621",bl:.3,Wk:"#fff",Xk:.6},Fj={al:"#fff",bl:1,Wk:"#0F1621",Xk:.7},Ij="1987&ndash;"+zd(2015,new Date().getFullYear())+" HERE";Bj.prototype.ba=function(){var e=this.a,o=e.pb(),h=e.c.jb().bounds;e=e.a;var d=e.a.length,g={},_=0,$,j,_t,_e=[Ij];if(h){for(;_<d;_++)if(j=e.get(_).getCopyrights(h.K(),o))for($=0;$<j.length;$++)g[_t=j[$].label]||(_e.push(_t),g[_t]=1)}return _e.join(", ")},Bj.prototype.getCopyrights=Bj.prototype.ba,Bj.prototype.V=function(){return this.S.style},Bj.prototype.l="©",Bj.prototype.o=function(){if(this.a.removeEventListener(this.a.A.Ri,this.f),this.a.a.removeEventListener("add",this.b),this.a.a.removeEventListener("remove",this.b),this.a.a.removeEventListener("set",this.b),this.S.parentNode){var e=this.S;e.parentNode.removeChild(e)}},Bj.prototype.disposeInternal=Bj.prototype.o,Bj.prototype.capture=function(e,o,h,d){var g=e.getContext("2d"),_=window.getComputedStyle(this.g.parentElement),$=2*Dc(_.paddingLeft,10),j=(this.g.offsetWidth+2*$)*o,_t=this.g.offsetHeight*o,_e=this.c.innerHTML.length!==0?this.c.offsetWidth*o:0,_r=Ec(_.getPropertyValue("font-size")),_n=this.S.ownerDocument,_i=+e.width,_o=+e.height,_a=16*o,_u=this.qf.childNodes[0].getBoundingClientRect(),_f=_u.width*o,_h=_u.height*o,_d=ld;Da(d)&&(_d=function(){d("capture_error")}),g.fillStyle=_.backgroundColor,g.fillRect(_i-j-_e,_o-_t,j+_e,_t),j=this.c.innerHTML,j=this.l+" "+function(ty){return ty=Cj(_n,"div",null,ty),ty.textContent||ty.innerText||""}(this.ba())+(j?" "+j:""),g.font=_r*o+"px "+_.getPropertyValue("font-family"),g.fillStyle=_.getPropertyValue("color"),g.textBaseline="bottom",g.textAlign="right",g.fillText(j,_i-$*o,_o),Jj(this,g.font,function(ty){new tf("image",ty).then(function(ey){g.drawImage(ey,_a,_o-(_h+_a),_f,_h),h(e)},_d)},_d)},Bj.prototype.capture=Bj.prototype.capture;function Jj(e,o,h,d){Kj(A(function(g){g?this.wh?h("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAADNklEQVRYR82XW6hVVRSGv7+rmJfSMKSnSkMEfY7EogcJC7tilGRopBAiSaI+SBARQSCIIqgFISih2YW0oAgLCsKXojA0RB+81VugZEFZv/yHuWTt7d7Hfc4+6+h4OWefNfcc3xlj/v+YS1zjoab5bE8DZgGngB8keSg5GwO0PQ54F3i2BnQIWCLpx14hGwG0fT3wOfBwB5DzwOOSDvQC2RTgM8Ae4D/gaeA3YDdwN5AWvyxp+6gD2r4OmAq8AbwInAMmA/OAT4CbgBWStvYClzUjWkHbrwHLgF8LVHJ8DDxah7P9JHCil7M40oA/A7OBC8ANtSqlrQOVs30/8CWQat8r6cxg1RwRQNvPA88Bk4D7gJzBV4A5teSp5MlS4VuA/ZIeu1Kr+wa0/QTwIRDlRhT5eTswBvi2CKOd42AULilndNAYCcA7gK+BmbVMiyXtsh3Qt4FFBTgW8w6wXtLfV4LrSyS2FwAvAWOBX+JtwF0laUDmS/oun23fDNwJnJb0Ty9g1ZphVdB2qrK2LdFfBbb685/AIxXkUKDqa4cMaDs2kjalRe8Fola57J3qRQSJviGHA3gMuAdYI2lDUfDOArQLWAd8VTuTOW9vjUoFy6TIGYpS9wKfAjuK5wVuSfn91iKcvZJeHy5ci0hsZwzNk5Qh3xIFbLyks7aPAtPLgv+L4VZwDwLvA6uKz6XdfcVAi22PBz4q4+lVSRurXW2vKYKIZfwEHCmmXC35HngAyITYD0ys2t8XWflyBfhmvKm24QCk7aVFCPVc7WMszzKucknI+NoHPCUppt13VICZm2nNwjoksByY0SXL72Vi3FieZ97mgrpyqF432H9xScW2O0H+W6oSE/4D2FYuA9kzlUzVTwO3Ad9IOtx3ydo2aLGZLpABm5KW2Z4AfAbMLfsEcpGkKLqRuMwHu0CukrSpCCrvGlF6hBEVL5MUw24kOhp1B8gc+FTqgxpkFLuzSbjk6jpJOkC2tDPeKCkVbDRkO67fDTTC2VK7vgfyBUlfNEpV2zyAK4HNXRLmZfshScdHC6g9T+WDGU2XpkdZdNXhWs6g7dXAhmsJ7jKR2M77bG4kV7Wt9TZfBLgYEC7PSpcIAAAAAElFTkSuQmCC"):h("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIMSURBVFiFzdZPiE1RGADwXzPTTPIMQoodVpbKgpoUG5qExUi8DSVJQv4slJJsbNjYWFhNETWLUUosRDRLUVLCYhIiojFojHkW997uvefNGIuZc99Xp/fOO6/Or++c75xDi0d7hDlWYQNqeB9hvv+OGq6jUWjPsKZKVBbtuKOMy9p3bKqOlsROCWYc27AWr9PfJnCgKlgbluNqivmGDmzBrxR3sCocnMEw7sqXdEAzboeK9uLTFPVbed8VcesxglFJtqNEHbcxlIL68ChADuCSpEgauBULt11SDI3C5yJJdrLCCNsQumMBl+J5AKinY4slBfNTfsRcxJwYsK0YxD3J0r1RPut6Cv/twgp0xoDBBc3LNhr0RwJktNifAn7gsnLmsuxVinyVTn4i7dcLoH4sU96Tp2Pi2uSVehN75Gdev+QO7pIXztmZnLwTvf+AzU+/v5Rn50+A24gP2IW5M4mbJ7+ejgVjJ/EpHXuCa8p77nGK68FX5eWfsTgfTJoh92qu1vAaa+CtPJuDZuEh3CHZUyHyxSSYrL3DWKE/gStm8aybDDkmKYperJM/BrJMnsJuHMLq2YJNh/wsX7JuPAyQfTFg0yGPFMZreCCv4n2xgTQjxyXP+CxquK8iXBYhMlzOtliQBVg4RVuCG/iSto/YHAuWxWFTHyXDWBkbNFkc1cK4LI5rYVwW57QY7i/pZeJv8QQJRQAAAABJRU5ErkJggg=="):(g=this.qf.cloneNode(!0),g.firstChild.setAttribute("style","font:"+o),h(bf(g.innerHTML)))},e),d)}Bj.prototype.wh=!1;function Kj(e,o){var h="data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>'),d=Ej;vc(d)?e(d):new tf("image",h).then(function(g){Ye.drawImage(g,0,0);try{Ye.getImageData(0,0,1,1),d=!1}catch(_){d=_.code===18}finally{Ej=d,e(d)}},o)}Bj.prototype.nl=function(e,o){Hj[e]=o},Bj.prototype.addL11NString=Bj.prototype.nl;var Hj={"de-DE":"Nutzungsbedingungen","en-US":"Terms of use","en-GB":"Terms of use","es-ES":"Condiciones de uso","fi-FI":"Palveluehdot","fr-FR":"Conditions d'utilisation","it-IT":"Condizioni di utilizzo","nl-NL":"Dienstvoorwaarden","pl-PL":"Warunki świadczenia usługi","pt-BR":"Termos de serviço","pt-PT":"Termos do serviço","ru-RU":"Условия использования","tr-TR":"Servis Koşulları","zh-CN":"使用条款"};function R(e){var o={};this.f=o.previousSibling=o.nextSibling=o,this.g=new cf,R.j.constructor.call(this,e),e&&"objects"in e&&this.Xb(e.objects)}u(R,M),t("H.map.Group",R),R.prototype.type=nh.GROUP,R.prototype.ee=function(e,o){return this.b=!0,e=R.j.ee.call(this,e,o),this.b=!1,e&&this.forEach(Lj,!0),e},R.prototype.setProvider=R.prototype.ee;function Lj(e,o,h){e.ee(h.ma)}R.prototype.contains=function(e){var o=this===e;if(!o&&this.a&&C(e,M))for(;!o&&e;)e===this?o=!0:e=e.Fa;return o},R.prototype.contains=R.prototype.contains,R.prototype.Ye=function(){this.L=B,this.forEach(Mj,!0)},R.prototype.resetZInfo=R.prototype.Ye;function Mj(e){e.Ye()}R.prototype.b=!1,R.prototype.ra=function(e){var o=R.j.ra.call(this,e);return o&&!this.b&&(this.c=e,this.forEach(Nj,!0),delete this.c),o},R.prototype.invalidate=R.prototype.ra;function Nj(e,o,h){e.ra(h.c)}R.prototype.forEach=function(e,o,h){var d;if(this.a){var g=this.f,_=g.nextSibling;for(d=0;_!==g;){var $=_.nextSibling;e.call(h,_,d++,this),o&&C(_,R)&&_.forEach(e,o,h),_=$}}},R.prototype.forEach=R.prototype.forEach,R.prototype.Ua=function(e){var o=[];return this.forEach(Oj,e,o),o},R.prototype.getObjects=R.prototype.Ua,R.prototype.K=function(){var e=null;return this.a&&this.forEach(function(o){o.K&&(o=o.K())&&(e?e=e.ec(o):e=o)}),e},R.prototype.getBoundingBox=R.prototype.K;function Oj(e){this.push(e)}R.prototype.a=0,R.prototype.Rl=function(){return this.a},R.prototype.getChildCount=R.prototype.Rl,R.prototype.fa=function(e){var o=this.f,h=o.previousSibling;if(C(e,M,this.fa,0),e.contains(this))throw new $c(this.fa,"The new object contains the parent group");var d=e.Lf(!0),g=e.Fa;if(g!==this){if(g){g=e.previousSibling;var _=e.nextSibling;g.nextSibling=_,_.previousSibling=g}e.Fa=this,M.j.ka.call(e,this),h.nextSibling=e,e.previousSibling=h,e.nextSibling=o,o.previousSibling=e,this.a++}return e.Di=this.g.next(),e.Ye(),o=e.ee(this.ma,this.fa),e.Lf(!0)!==d&&e.ra(kh.VOLATILITY),o||e.ra(kh.Z_ORDER),e},R.prototype.addObject=R.prototype.fa,R.prototype.Xb=function(e){var o;Bc(e,this.Xb,0);var h=e.length;for(o=0;o<h;o++)this.fa(e[o])},R.prototype.addObjects=R.prototype.Xb,R.prototype.Ga=function(e){if(!e||e.Fa!==this)throw new $c(this.Ga,"object not found");var o=e.previousSibling,h=e.nextSibling;return o.nextSibling=h,h.previousSibling=o,e.Fa=null,M.j.ka.call(e,null),delete e.previousSibling,delete e.nextSibling,C(e.ma,N)&&e.ee(null,this.Ga),this.a--,e},R.prototype.removeObject=R.prototype.Ga,R.prototype.rd=function(e){var o;Bc(e,this.rd,0);var h=e.length;for(o=0;o<h;o++)this.Ga(e[o])},R.prototype.removeObjects=R.prototype.rd,R.prototype.na=function(){var e=this.Ua();this.rd(e)},R.prototype.removeAll=R.prototype.na,R.prototype.Kc=function(e){for(var o=this.Ua(),h=0,d=o.length,g=[],_,$,j;h<d;h++)j=o[h],j instanceof R?(_=e?e(j.getData()):j.getData(),$=qh(this,_,!!e),_={type:"Feature"},_.properties=$,j.i&&(_.id=j.i),_.geometry={},_.geometry.type="GeometryCollection",_.geometry.geometries=Pj(this,j.Ua()),g.push(_)):g.push(j.Kc(e));return{type:"FeatureCollection",features:g}},R.prototype.toGeoJSON=R.prototype.Kc;function Pj(e,o){for(var h=0,d=o.length,g,_,$=[];h<d;h++)g=o[h],g instanceof R?_={type:"GeometryCollection",geometries:Pj(e,g.Ua())}:g instanceof rh||g instanceof sh||g instanceof th||g instanceof uh?_=g.ga().Kc():_={type:"FeatureCollection",features:hf},$.push(_);return $}R.prototype.Y=function(){var e=R.j.Y.call(this);return e.type="Group",e},R.prototype.forWorkerMessage=R.prototype.Y;var Qj={PROVIDES_BY_VIEWPORT:1,PROVIDES_RASTERS:2,PROVIDES_SPATIALS:4,PROVIDES_OVERLAYS:8,PROVIDES_MARKERS:16,PROVIDES_DOM_MARKERS:32,PROVIDES_GEOJSON:64,PROVIDES_OMV:128,CROP_LINES_BY_TILE:256,CROP_POLYGONS_BY_TILE:512,HAS_VOLATILE_DATA:1024};t("H.map.provider.Capabilities",Qj),Qj.PROVIDES_WEBGL_RENDERABLE_OBJECTS=Qj.PROVIDES_SPATIALS|Qj.PROVIDES_OVERLAYS|Qj.PROVIDES_MARKERS;function Rj(e,o,h,d,g){switch(o&&(this.f=o),vc(h)&&(this.c=!!h),this.c&&d&&(this.Lg=new Wi(d.w,d.h)),vc(g)&&(this.g={crossOrigin:g}),Sj[Ac(e)]){case 2:this.a=e,Tj(this,1);break;case 1:if(nf(e)){this.a=e,Uj(this),Tj(this,1);break}e=e.src;case 0:if(e){e=bf(e),this.b=new tf("image",e,B,this.g),this.b.then(A(this.$n,this),A(this.Zn,this));break}default:throw Tj(this,-1),new D(Rj,0,"No image data")}}Rj.prototype.C=0,Rj.prototype.getState=function(){return this.C};function Tj(e,o){e.C=o,delete e.b,e.f&&e.f(o,e)}Rj.prototype.c=!0;function Uj(e){if(e.c){var o=e.a,h=Vj(e),d=h&&h.w||+o.width,g=h&&h.h||+o.height,_=Ue();if(C(o,x.HTMLCanvasElement))h=o;else{h=o.ownerDocument.createElement("canvas"),h.width=Cd(d*_),h.height=Cd(g*_);var $=h.getContext("2d");$.scale(_,_),$.drawImage(o,0,0,d,g),cd&&($.clearRect(0,0,d,g),$.drawImage(o,0,0,d,g))}e.a=h}}Rj.prototype.getData=function(){return this.a||z};var Sj={String:0,HTMLImageElement:1,HTMLCanvasElement:2};p=Rj.prototype,p.Lg=z,p.yb=function(){return this.C===1?Vj(this):z};function Vj(e){var o=e.Lg,h;if(!o){var d=e.a;if(o=d.naturalWidth||d.width,o===0&&$e&&Sj[Ac(d)]===1){var g=!0;if(h=d.parentNode)var _=d.nextSibling;document.body.appendChild(d)}e.Lg=o=new Wi(d.naturalWidth||d.width,d.naturalHeight||d.height),g&&(h?h.insertBefore(d,_):document.body.removeChild(d))}return o}p.$n=function(e){this.a=e,Uj(this),Tj(this,1)},p.Zn=function(){Tj(this,-1)},p.cancel=function(){this.b&&this.b.cancel()};function Wj(e,o){var h,d="anonymous";if(this.uid=Xj.next(),Wj.j.constructor.call(this),o){var g="size";if(g in o){var _=o[g];if(!_||isNaN(_.w)||isNaN(_.h))throw new D(Wj,1,g);this.g=new Wi(_.w,_.h)}if(g="anchor",g in o){if(_=o[g],!_||isNaN(_.x)||isNaN(_.y))throw new D(Wj,1,g);this.f=new J(_.x,_.y)}g="hitArea",g in o&&(_=o[g],C(_,Xi,Wj,1),this.c=o[g]),g="asCanvas",g in o&&(h=o[g]),g="crossOrigin",g in o&&(d=o[g]),_=o.stickHeight,_===+_&&0<_&&(this.Fo=_),g="stickColor",_=o[g],g in o&&Cc(_)&&(this.Eo=_)}e=new Rj(e,A(this.i,this),h,this.g,d),o=this.C=e.getState(),o!==0?this.i(o,e):this.b=e}u(Wj,F),t("H.map.Icon",Wj);var Xj=new cf;Wj.State={ERROR:-1,LOADING:0,READY:1},Wj.prototype.getState=function(){return this.C},Wj.prototype.getState=Wj.prototype.getState,Wj.prototype.i=function(e,o){if(this.a=o.getData(),e===1){var h=this.g;h||(h=this.g=o.yb()),this.f||(this.f=new J(h.w/2|0,h.h))}this.b&&(this.C=e,delete this.b,this.dispatchEvent("statechange"))},Wj.prototype.a=z,Wj.prototype.Qc=function(){return this.a},Wj.prototype.getBitmap=Wj.prototype.Qc,Wj.prototype.yb=function(){return this.g||z},Wj.prototype.getSize=Wj.prototype.yb,Wj.prototype.f=z,Wj.prototype.kd=function(){return this.f},Wj.prototype.getAnchor=Wj.prototype.kd,Wj.prototype.c=z,Wj.prototype.nm=function(){return this.c},Wj.prototype.getHitArea=Wj.prototype.nm,Wj.prototype.o=function(){Wj.j.o.call(this),this.a?(this.a.removeAttribute("src"),delete this.a):(this.b.cancel(),delete this.b)};function Yj(e,o,h,d,g,_){Yj.j.constructor.call(this,isNaN(e)?15:e,o,h,d,g,_)}u(Yj,wg),Yj.prototype.s=function(e){for(var o,h,d=this.head,g=e;g;){if(e=g.entries){if(o=e.length){if(2>o&&(h=g.parent)&&h.a===1){h.removeChild(g),d===g&&(d=h),h.entries=e,g=e[0].node=h;continue}}else if(delete g.entries,(h=g.parent)&&(h.removeChild(g),d===g&&(d=h),h.a===1)){g=h.a?h[0]||h[1]||h[2]||h[3]:null;continue}}break}this.head!==d&&(this.head=d,Bg(this))},Yj.prototype.yc=function(e,o){if(Gg(this.a,e,o,e,o))return Zj(this,this.a,e,o,this.c);throw Error("Coordinates out of bounds")};function Zj(e,o,h,d,g){var _=o.entries;if(g)if(o.a)_=ak(e,o,h,d,g);else if(_){_=_[0];var $=Eg(o,+(_[1]>=o[8])|+(_[0]>=o[9])<<1);$.entries=o.entries,delete o.entries,_.node=$,Bg(e,$),_=ak(e,o,h,d,g)}else Fg(o,_=new bk(h,d)),Bg(e,o),zg(e,_,!0);else _||Bg(e,o),Fg(o,_=new bk(h,d)),zg(e,_,!0);return _}function ak(e,o,h,d,g){return Zj(e,Eg(o,+(h>=o[8])|+(d>=o[9])<<1),h,d,g-1)}function bk(e,o){this.id=Dg++,this[0]=o,this[1]=e}bk.prototype.a=function(e){return this[e%2]};function ck(){this.a=new Yj(10,180,90,0,0,!0)}p=ck.prototype,p.Dh=0,p.Rc=function(){return this.Dh},p.Uf=null,p.K=function(){var e=this.Uf,o;return!e&&(o=xg(this.a))&&(this.Uf=e=new K(-o[0],o[3],-o[2],o[1])),e},p.yc=function(e){return++this.Dh,this.Uf=null,this.a.yc(e.lng,-e.lat)},p.remove=function(e){return(e=this.a.remove(e))&&(--this.Dh,this.Uf=null),e},p.Pf=function(e,o,h){var d=this.a,g=e.Nb(),_=e.Jb(),$=-g.lat;g=g.lng;var j=-_.lat;_=_.lng;var _t;return e.Bb()?_t=d.Za(-180,$,_,j,h,o).concat(d.Za(g,$,180,j,h,o)):_t=d.Za(g,$,_,j,h,o),_t};function dk(e){this.a=e}function ek(e,o,h){this.c=e,this.a=o,this.g=h,this.f=this.c&Qj.PROVIDES_BY_VIEWPORT?"function(){return sources[$source].isInMinMaxRange(feature, $zoom) && feature.ref.effectiveVisibility;}":B,this.b={}}function fk(e,o,h,d){this.a=e,this.b=o,this.c=h,this.kf=d}function gk(e,o,h,d){return e={type:o,uid:e.b,tiled:h,max_zoom:e.c},d&&Ya(e,d),e}function hk(e,o,h,d,g){this.a=e,this.b=o,this.c=h,this.f=d,this.kf=g}function ik(e){if(e.a&Qj.PROVIDES_DOM_MARKERS&&!(e.a&Qj.PROVIDES_MARKERS))return{};var o=new fk(e.a,e.b,e.c,e.kf),h=new dk(e.a);e=new ek(e.a,e.b,e.f);var d={},g=o.b;if(o=o.a&Qj.PROVIDES_BY_VIEWPORT?gk(o,"ObjectSource",!1,{progressiveUpdate:!0,has_volatile_data:!!(o.a&Qj.HAS_VOLATILE_DATA)}):o.a&Qj.PROVIDES_RASTERS?gk(o,"RemoteRasterTileSource",!0,{url:""}):gk(o,"ObjectTileSource",!0,{tile_size:o.kf}),d[g]=o,o={},h.a&Qj.PROVIDES_RASTERS&&(o={"translucent-raster":qi("raster","inlay",1)}),h.a&Qj.PROVIDES_WEBGL_RENDERABLE_OBJECTS){g=!!(h.a&Qj.CROP_LINES_BY_TILE);var _={"translucent-polygons":qi("polygons","inlay",2),"translucent-extruded-polygons":qi("polygons","translucent",3),"translucent-pattern-lines":qi("pattern-lines","translucent",4),"translucent-overlays":qi("overlays","inlay",5),markers:qi("custom_icons","overlay",6,!1)};_["translucent-polygons"].crop_by_tile=!!(h.a&Qj.CROP_POLYGONS_BY_TILE),_["translucent-pattern-lines"].crop_by_tile=g,_.markers.suppress_fade=!0,_.markers.stick=!0,Ya(o,_)}if(e.c&Qj.PROVIDES_RASTERS&&(e.b["tile_layer_"+e.a]=si(e.a,"_default",{"translucent-raster":{color:[1,1,1,e.g],order:0}})),e.c&Qj.PROVIDES_SPATIALS){h={"translucent-pattern-lines":{color:pi("strokeColor"),width:pi("lineWidth * $meters_per_pixel"),join:pi("lineJoin"),cap:pi("lineCap"),tail_cap:pi("lineTailCap"),head_cap:pi("lineHeadCap"),miter_limit:pi("miterLimit"),order:"function() { return 2 + feature.effectiveZIdx / 2; }",interactive:!0,dash:pi("lineDash"),extrude:!0,dash_phase:pi("lineDashOffset")}},g=e.b,_="polygon_layer_"+e.a;var $=si(e.a,"polygons",void 0,e.f);$.flat={filter:"function(){return !feature.height && !feature.min_height;}",draw:ri(!1)},$.extruded={filter:"function(){return feature.height || feature.min_height;}",draw:ri(!0)},g[_]=$,e.b["outline_layer_"+e.a]=si(e.a,"outlines",h,e.f),e.b["polyline_layer_"+e.a]=si(e.a,"polylines",h,e.f)}return e.c&Qj.PROVIDES_OVERLAYS&&(e.b["overlay_layer_"+e.a]=si(e.a,"overlays",{"translucent-overlays":{color:[1,1,1,e.g],order:8190,interactive:!0}})),e.c&Qj.PROVIDES_MARKERS&&(e.b["marker_layer_"+e.a]=si(e.a,"markers",{markers:{sprite:oi("icon.id"),offset:oi("icon.offset"),collide:!1,priority:8191,elevate_by_altitude:!0,interactive:!0,stick:{color:oi("icon.stick_color"),height:oi("icon.stick_height")}}},e.f)),{sources:d,styles:o,layers:e.b}}function P(e){var o=""+ef(),h;if(P.j.constructor.call(this),e=e||{},this.min=e.min||0,this.max=e.max||22,h=e.uri){if(/_/.test(h))throw new D(P,0,"uri "+h)}else h=o;if(this.uri=h||o,this.uid=o,e.getCopyrights&&zc(e.getCopyrights,"Function",P)&&(this.getCopyrights=e.getCopyrights),this.hb=this.hb.bind(this),this.ta=!0,this.b=e.engineType||jk,this.b===kk.HARP&&!H.map.render.harp)throw new D(P,0,"HARP engine is not supported, module not found")}u(P,F),t("H.map.provider.Provider",P),p=P.prototype,p.A={ie:"configchange",za:"update"},p.Va=function(e,o){this.dispatchEvent(new vd(this.A.za,o,e))},p.hb=function(e){e=new cj(this.A.ie,e&&e.newValue,e&&e.oldValue),this.dispatchEvent(e)},p.o=function(){F.prototype.o.call(this),this.a&&(this.a.removeEventListener("change",this.hb),this.a.F(),delete this.a)},p.ba=function(){return null},P.prototype.getCopyrights=P.prototype.ba,P.prototype.getCapabilities=function(){var e=0;return this.di()&&(e|=Qj.PROVIDES_BY_VIEWPORT),this.providesRasters()&&(e|=Qj.PROVIDES_RASTERS),this.providesSpatials()&&(e|=Qj.PROVIDES_SPATIALS),this.providesOverlays()&&(e|=Qj.PROVIDES_OVERLAYS),this.providesMarkers()&&(e|=Qj.PROVIDES_MARKERS),this.providesDomMarkers()&&(e|=Qj.PROVIDES_DOM_MARKERS),this.providesGeoJSON()&&(e|=Qj.PROVIDES_GEOJSON),this.providesOMV()&&(e|=Qj.PROVIDES_OMV),e},P.prototype.getCapabilities=P.prototype.getCapabilities,P.prototype.di=gf,P.prototype.Ve=gf,P.prototype.providesRasters=P.prototype.Ve,P.prototype.Cc=gf,P.prototype.providesSpatials=P.prototype.Cc,P.prototype.fi=gf,P.prototype.providesOverlays=P.prototype.fi,P.prototype.Rb=gf,P.prototype.providesMarkers=P.prototype.Rb,P.prototype.Qb=gf,P.prototype.providesDomMarkers=P.prototype.Qb,P.prototype.ei=gf,P.prototype.providesGeoJSON=P.prototype.ei,P.prototype.Sb=gf,P.prototype.providesOMV=P.prototype.Sb,P.prototype.dm=function(){return this.b},P.prototype.getEngineType=P.prototype.dm,P.prototype.wo=function(e){this.b=e},P.prototype.setEngineType=P.prototype.wo,P.prototype.Ue=ld,P.prototype.preprocessData=P.prototype.Ue,P.prototype.g=1;function lk(e,o){o=ae(o,0,1),E(o)&&(o=1),e.g!==o&&(e.g=o,e.ta&&mk(e),e.hb(),e.Va())}P.prototype.Em=function(){return this.g},P.prototype.getOpacityInternal=P.prototype.Em,P.prototype.Qa=function(e,o){var h=this;if(this.b===kk.WEBGL&&!C(e,ti)||this.b===kk.HARP&&!C(e,H.map.render.harp.Style))throw e=Object.entries(kk).find(function(d){return d[1]===h.b}),new D(this.Qa,0,"Invalid style for engineType "+e);this.a&&(this.a.removeEventListener("change",this.hb),this.a.removeEventListener(Yh,this.hb),this.a.F()),this.a=e,this.a.addEventListener("change",this.hb),this.a.addEventListener(Yh,this.hb),o||this.hb(),this.ta=!1},P.prototype.setStyleInternal=P.prototype.Qa,P.prototype.Ya=function(){return this.a||mk(this),this.a},P.prototype.getStyleInternal=P.prototype.Ya;function mk(e){if(e.b===kk.WEBGL){var o=new hk(e.getCapabilities(),e.uid,e.max,e.g,e.tileSize);e.a=new ti(ik(o))}else e.b===kk.HARP&&H.map.render.harp&&(e.a=new H.map.render.harp.Style({}));e.ta=!0}P.prototype.Ej=function(){var e=this.getCapabilities(),o=nk.FEATURE;return e&Qj.PROVIDES_BY_VIEWPORT?o=nk.SOURCE:e&Qj.PROVIDES_RASTERS?o=null:e&Qj.PROVIDES_WEBGL_RENDERABLE_OBJECTS&&(o=nk.PROVIDER),o},P.prototype.getPickingMode=P.prototype.Ej,P.prototype.im=function(){return!1},P.prototype.getFeatureProxy=P.prototype.im;function ok(e){var o;xc(this,ok),ok.j.constructor.call(this,e),this.wa=e=[];for(o in nh)e[nh[o]]=new jh}u(ok,P),t("H.map.provider.ObjectProvider",ok),ok.prototype.di=ff,ok.prototype.providesByViewport=ok.prototype.di,ok.prototype.Kb=function(e){return this.wa[e||nh.ANY]},ok.prototype.getInvalidations=ok.prototype.Kb,ok.prototype.Td=function(e,o){if(o!==kh.NONE){var h=this.wa[nh.ANY],d=h.a+1;h.update(d,o),h=this.wa[e.type],h.update(d,o),e.Kb().update(d,o),this.Va(e)}},ok.prototype.invalidateObject=ok.prototype.Td,ok.prototype.requestOverlays=ok.prototype.sd,ok.prototype.requestSpatials=ok.prototype.kg,ok.prototype.requestSpatialsByTile=ok.prototype.mg,ok.prototype.qa=!1,ok.prototype.requestMarkers=ok.prototype.Ec,ok.prototype.requestDomMarkers=ok.prototype.Dc;function N(e){e=e||{},N.j.constructor.call(this,e),this.f=e=new R({min:e.min,max:e.max}),e.ma=this,e.ka(this),e.ra(kh.ADD),this.J=new Lg,this.i=new Lg,this.m=new ck,this.u=new Lg,this.P=new ck,this.T=new Lg}u(N,ok),t("H.map.provider.LocalObjectProvider",N),N.prototype.getCapabilities=function(){return Qj.PROVIDES_BY_VIEWPORT|Qj.PROVIDES_WEBGL_RENDERABLE_OBJECTS|Qj.PROVIDES_DOM_MARKERS|Qj.CROP_LINES_BY_TILE},N.prototype.Ya=function(){if(!this.l&&(this.l=N.j.Ya.call(this),this.l instanceof ti)){var e=new hk(this.getCapabilities()|Qj.HAS_VOLATILE_DATA,this.uid+"_vol",this.max,this.g,this.tileSize);this.l.Oe(ik(e))}return this.l},N.prototype.getStyleInternal=N.prototype.Ya,N.prototype.Qa=function(e,o){N.j.Qa.call(this,e,o),this.l=null},N.prototype.setStyleInternal=N.prototype.Qa,N.prototype.bc=function(){return this.f},N.prototype.getRootGroup=N.prototype.bc,N.prototype.Td=function(e,o){o&kh.SPATIAL&&this.fa(e),N.j.Td.call(this,e,o)},N.prototype.invalidateObject=N.prototype.Td,N.prototype.fa=function(e){var o;if(C(e,M,this.fa,0),e.ma!==this)throw new $c(this.fa,"foreign object");this.Ga(e);var h=e.type;if(h===nh.MARKER)if((o=e.ga())instanceof kg){var d=!0;h=this.m}else h=this.u;else h===nh.DOM_MARKER?(o=e.ga())instanceof kg?(d=!0,h=this.P):h=this.T:h=h===nh.OVERLAY?this.J:this.i;d=d?h.yc(o):h.Pj(e.K()),d.c=e,e.qa=d},N.prototype.Ga=function(e){var o;if(e){if(e.ma!==this){if(C(e,M))throw new $c(this.Ga,"foreign object")}else if(o=e.qa){var h=e.type;h===nh.MARKER?this.m.remove(o)||this.u.remove(o):h===nh.DOM_MARKER?this.P.remove(o)||this.T.remove(o):h===nh.OVERLAY?this.J.remove(o):this.i.remove(o),delete o.c,delete e.qa}}},N.prototype.removeObject=N.prototype.Ga;function pk(e,o,h,d,g,_,$){if($=$||[],o.Rc())for(e=o!==e.m&&o!==e.u,g=!g,o=o.Pf(h,_,_),h=o.length,_=0;_<h;_++){var j=o[_].c,_t;if(_t=d!==void 0){for(var _e=Bd(d),_r=j;(_t=_r.m<=_e&&_r.s>=_e)&&(_r=_r.Fa););_t=!_t}_t||!g&&!j.wc(!0)||(e||j.xb().getState()===1)&&$.push(j)}return $}N.prototype.fi=function(){return 0<this.J.Rc()},N.prototype.providesOverlays=N.prototype.fi,N.prototype.sd=function(e,o,h){return pk(this,this.J,e,o,h,!1).filter(function(d){return d.Qc()})},N.prototype.requestOverlays=N.prototype.sd,N.prototype.Cc=function(){return 0<this.i.Rc()},N.prototype.providesSpatials=N.prototype.Cc,N.prototype.kg=function(e,o,h){return pk(this,this.i,e,o,h,!1)},N.prototype.requestSpatials=N.prototype.kg,N.prototype.mg=function(e,o){return pk(this,this.i,e.Hf(),e.zL,o,!1)},N.prototype.requestSpatialsByTile=N.prototype.mg,N.prototype.Rb=function(){return 0<this.m.Rc()+this.u.Rc()},N.prototype.providesMarkers=N.prototype.Rb,N.prototype.Ec=function(e,o,h){return qk(this,e,o,h,!1)},N.prototype.requestMarkers=N.prototype.Ec;function qk(e,o,h,d,g){var _=pk(e,e.m,o,h,d,g);return pk(e,e.u,o,h,d,g,_),_}N.prototype.Qb=function(){return 0<this.P.Rc()+this.T.Rc()},N.prototype.providesDomMarkers=N.prototype.Qb,N.prototype.Dc=function(e,o,h){return rk(this,e,o,h,!1)},N.prototype.requestDomMarkers=N.prototype.Dc;function rk(e,o,h,d,g){var _=pk(e,e.P,o,h,d,g);return pk(e,e.T,o,h,d,g,_),_}function sk(e,o,h){var d=h.ga(),g,_=tk.bind(null,e);e=uk.bind(null,e),C(h,th)?g=C(d,L)?_(d):d.la.some(_):C(h,uh)?g=C(d,O)?e(d):d.la.some(e):C(h,sh)&&(g=e(Ci(d))),g&&o.push(h)}function tk(e,o){t:{var h=o.$,d=Hi(e,o);if(!d){o=o.$.length;for(var g=0;g<o;g+=3)if(Fi(e,h[g],h[g+1])){e=!0;break t}}e=d}return e}function uk(e,o){return Ii(e,o)}function vk(e,o,h){for(var d=e.length;d--;){var g=e[d],_=g.ga();if(C(_,Vi)){_=_.la;for(var $=_.length,j;$--;)if(j=_[$],Fi(o,j.lat,j.lng)){h.push(g);break}}else Fi(o,_.lat,_.lng)&&h.push(g)}}N.prototype.Ua=function(e,o,h,d,g){var _=this,$=e.K(),j=[],_t=Zb(),_e=1;if($)for(;_e&nh.ANY;){if(_e&d)switch(_e){case nh.MARKER:_t=_t.then(function(){return qk(_,$,h,o,!0)}).then(function(_r){return vk(_r,e,j)});break;case nh.DOM_MARKER:_t=_t.then(function(){return rk(_,$,h,o,!0)}).then(function(_r){return vk(_r,e,j)});break;case nh.SPATIAL:_t=_t.then(function(){return pk(_,_.i,$,h,o,!0)}).then(function(_r){_r.forEach(sk.bind(null,e,j))});break;case nh.OVERLAY:_t=_t.then(function(){return pk(_,_.J,$,h,o,!0)}).then(function(_r){_r.forEach(sk.bind(null,e,j))})}_e<<=1}_t.then(function(){return g(j)})},N.prototype.ld=function(e,o,h){h=h||jf;var d=h.zoom,g=h.visiblesOnly;h=h.types;var _=nh.ANY;C(e,O,this.ld,0,"area"),zc(o,"Function",this.ld,1,"callback"),zc(d,"Number",this.ld,2,"options"),this.Ua(e,vc(g)?!!g:!0,d,vc(h)?h&_:_,o)},N.prototype.getObjectsWithin=N.prototype.ld,N.prototype.o=function(){N.j.o.call(this),this.f.na()};var wk={PENDING:0,ACTIVE:1,DONE:2};t("H.map.render.RenderState",wk);function xk(e,o){o=o||{};var h;if(!C(e,Element))throw new D(xk,0,e);var d=e.ownerDocument.createElement("div");this.S=e,xk.j.constructor.call(this),this.padding=new yk(0,0,0,0),this.center=new J(0,0),this.margin=0,this.element=d,d.style.zIndex=0,d.style.height=d.style.width="100%",d.style.direction="ltr",d.style.position=e.style.position==="relative"?"absolute":"relative",this.resize(),e.appendChild(d),(h=o.padding)!==B&&this.wi(h.top,h.right,h.bottom,h.left),this.ri((h=o.margin)!==B?h:0)}u(xk,F),t("H.map.ViewPort",xk),xk.prototype.A={za:"update",le:"sync"},xk.prototype.ri=function(e){if(this.margin!==+e){if(E(this.margin=+e))throw new D(this.ri,0,e);zk(this),this.dispatchEvent(this.A.za)}},xk.prototype.setMargin=xk.prototype.ri,xk.prototype.wi=function(e,o,h,d){var g=this.padding;if(g.top!==e||g.right!==o||g.bottom!==h||g.left!==d){if(E(e+o+h+d))throw new D(this.wi);g.top=e,g.right=o,g.bottom=h,g.left=d,zk(this),this.dispatchEvent(this.A.za)}},xk.prototype.setPadding=xk.prototype.wi;function zk(e){var o=e.padding;e.center.set((e.width+o.left-o.right)/2<<0,(e.height+o.top-o.bottom)/2<<0)}xk.prototype.resize=function(){var e=this.S.offsetWidth,o=this.S.offsetHeight;(this.width!==e||this.height!==o)&&(this.a=new Wi(this.width,this.height),this.width=e,this.height=o,zk(this),this.dispatchEvent(this.A.za))},xk.prototype.resize=xk.prototype.resize,xk.prototype.$a=function(e){this.dispatchEvent(new dj(this.A.le,this.a,e,ej.SIZE))},xk.prototype.synchronize=xk.prototype.$a,xk.prototype.o=function(){this.S.removeChild(this.element),delete this.S,delete this.element,xk.j.o.call(this)},xk.prototype.lc=Qc,xk.prototype.startInteraction=xk.prototype.lc,xk.prototype.cc=Qc,xk.prototype.interaction=xk.prototype.cc,xk.prototype.wb=Qc,xk.prototype.endInteraction=xk.prototype.wb;function Ak(e,o,h,d,g,_){var $;for($=[];d<=g;d++)$=$.concat(Bk(e,h,d));for(e=$.length,xj.call(this,_,e),this.l=h=[],this.f=A(this.f,this),this.c=A(this.c,this),this.O(1);e--;)_=$[e],h.push(Ck(o,_[0],_[1],_[2],this.f,this.c))}u(Ak,xj),Ak.prototype.f=function(){zj(this,2)},Ak.prototype.c=function(){zj(this,4)},Ak.prototype.oe=function(){for(var e=this.l,o=e.length;o--;)e[o].cancel();delete this.l};function Dk(e,o){var h=this;if(!Da(o))throw new D(Ek,1,o);if(!Da(e.next||Da(e.cycle)))throw new D(Dk,2,'Argument "mode" must implement H.util.AsyncQueue.Mode');this.b=[],this.c=[],this.g=e,this.i=o,this.l=function(){Fk(h)},this.a=null,this.f=function(){h.a||(h.a=x.setTimeout(h.l,1))}}t("H.util.AsyncQueue",Dk),Dk.prototype.push=function(e,o){if(!Da(o))throw new D(this.push,1,o);return e=Gk(new Hk,e,this.f,o),this.b.push(e),this.f(),e},Dk.prototype.push=Dk.prototype.push;function Fk(e){var o=e.c,h=0,d=e.g;for(d.a(),e.a=null;h<o.length;){var g=o[h];g.Tj?o.splice(h,1):h++}for(;g=d.next(e.b,e.c);)g.cancelled?g.done(null,"cancelled"):(o.push(g),e.i(g,g.data))}function Hk(){Gk(this,null,null,null)}Dk.Task=Hk;function Gk(e,o,h,d){return e.data=o,e.cancelled=!1,e.Tj=!1,e.b=h,e.c=d,e.a=null,e}Hk.prototype.done=function(e,o){this.Tj=!0,this.b(),this.c(this,e,o)},Hk.prototype.done=Hk.prototype.done,Hk.prototype.cancel=function(){this.a&&this.a(),this.cancelled=!0},Hk.prototype.cancel=Hk.prototype.cancel,Hk.prototype.vo=function(e){return this.a=e,this},Hk.prototype.setCancelFn=Hk.prototype.vo;function Ik(){}Dk.Mode=Ik,Ik.prototype.next=function(){},Ik.prototype.a=function(){};var Jk,Kk=function(){function e(){}for(var o,h,d,g=tc("o ms moz webkit "),_=5;_--&&!o;)o=g[_],o=(h=x[o+(o?"R":"r")+"equestAnimationFrame"])&&!E(h.call(window,e))&&(d=x[o+(o?"C":"c")+"ancelAnimationFrame"]);return Jk=o?function($){return h.call(x,$)}:function($){return x.setTimeout($,25)},o?function($){return d.call(x,$)}:function($){return x.clearTimeout($)}}(),Lk=x.performance&&x.performance.now?function(){return x.performance.now()}:function(){return x.Date.now()};function Mk(e,o){Mk.j.constructor.call(this,new Nk(e),o)}u(Mk,Dk),t("H.util.SequentialQueue",Mk);function Nk(e){if(isNaN(e)||0>e)throw new D(Mk,1,'Argument "maxTime" must be a positive number');this.c=e,this.b=Lk()}Nk.prototype.next=function(e){return e.length&&Lk()-this.b<this.c?e=e.shift():null},Nk.prototype.a=function(){this.b=Lk()};function Ok(e){if(xc(this,Ok),Ok.j.constructor.call(this,e),e&&"tileSize"in e){var o=Ed(+e.tileSize)/Od;if(isNaN(o)||o%1||0>o||30<o)throw new D(Ok,0,"tileSize: "+e.tileSize);this.tileSize=+e.tileSize}}u(Ok,P),t("H.map.provider.TileProvider",Ok);function Pk(e,o){return Yd(e)-8-Ad(Yd(o))}Ok.getZoomLevelOffset=Pk,Ok.prototype.requestTile=Ok.prototype.Ha,Ok.prototype.cancelTile=Ok.prototype.mc,Ok.prototype.cancelTileByKey=Ok.prototype.pe,Ok.prototype.createTileInternal=Ok.prototype.ac,Ok.prototype.uc=function(e,o,h){return this.uri.concat("_",e,"_",o,"_",h)},Ok.prototype.getTileKey=Ok.prototype.uc,Ok.prototype.kf=256,Ok.prototype.tileSize=Ok.prototype.kf;function Qk(){}t("H.util.ICache",Qk),Qk.prototype.add=function(){},Qk.prototype.add=Qk.prototype.add,Qk.prototype.get=function(){},Qk.prototype.get=Qk.prototype.get,Qk.prototype.zf=function(){},Qk.prototype.drop=Qk.prototype.zf,Qk.prototype.forEach=function(){},Qk.prototype.forEach=Qk.prototype.forEach,Qk.prototype.na=function(){},Qk.prototype.removeAll=Qk.prototype.na,Qk.prototype.$d=function(){},Qk.prototype.registerOnDrop=Qk.prototype.$d,Qk.prototype.Ug=function(){},Qk.prototype.deRegisterOnDrop=Qk.prototype.Ug;function Rk(e,o,h){if(this.g=[],o&&this.$d(o),h&&!Da(h))throw new D(Rk,2,h);this.b=0,this.filter=h,this.a={},this.f=this.c=null,this.ti(e)}t("H.util.Cache",Rk),Rk.prototype.add=function(e,o,h){var d,g;if(h=+h,!Fc(h)||0>h)throw new D(this.add,2,h);return e=String(e),(g=this.filter?this.filter(e,o,h):!0)&&((d=this.a[e])?(d.data!==o&&Sk(this,d),this.b+=h-d.size,d.size=h,d.data=o,Tk(this,d)):this.a[e]=Uk(this,{id:e,data:o,size:h,fc:null,Zc:null},this.c),Vk(this)),g},Rk.prototype.add=Rk.prototype.add,Rk.prototype.$d=function(e){if(!Da(e))throw new D(this.$d,0,e);this.g.push(e)},Rk.prototype.registerOnDrop=Rk.prototype.$d,Rk.prototype.Ug=function(e){this.g=this.g.filter(function(o){return o!==e})},Rk.prototype.deRegisterOnDrop=Rk.prototype.Ug,Rk.prototype.get=function(e,o){return(e=o?this.a[e]:Tk(this,this.a[e]))&&e.data},Rk.prototype.get=Rk.prototype.get,Rk.prototype.zf=function(e){var o;(o=this.a[e])&&Wk(this,o,!0)},Rk.prototype.drop=Rk.prototype.zf,Rk.prototype.forEach=function(e,o,h){var d;for(d in this.a){var g=this.a[d];(!h||h(d,g.data,g.size))&&e.call(o,d,g.data,g.size)}},Rk.prototype.forEach=Rk.prototype.forEach,Rk.prototype.na=function(e){var o;for(o in this.a){var h=this.a[o];(!e||e(o,h.data,h.size))&&Wk(this,this.a[o],!0)}},Rk.prototype.removeAll=Rk.prototype.na,Rk.prototype.ti=function(e){if(!(0<+e))throw new D(Rk.prototype.ti,0,e);return this.i=+e,Vk(this),this},Rk.prototype.setMaxSize=Rk.prototype.ti,Rk.prototype.Cm=function(){return this.i},Rk.prototype.getMaxSize=Rk.prototype.Cm,Rk.prototype.Xl=function(){return this.b},Rk.prototype.getCurrentSize=Rk.prototype.Xl;function Tk(e,o){return o&&(e.c=Uk(e,o,e.c)),o}function Vk(e){for(;e.b>e.i&&e.f;)Wk(e,e.f,!0)}function Uk(e,o,h){return h!==o&&((o.fc||o.Zc)&&Wk(e,o,!1),(o.fc=h)&&(o.Zc=h.Zc,h.Zc=o),o.Zc||(e.c=o),o.fc||(e.f=o),e.b+=o.size),o}function Wk(e,o,h){var d=o.Zc,g=o.fc;(d||g||o==e.c&&o==e.f)&&(d?d.fc=g:e.c=g,g?g.Zc=d:e.f=d,e.b-=o.size,h&&(delete e.a[o.id],Sk(e,o))),o.fc=o.Zc=null}function Sk(e,o){for(var h=e.g.length;h--;)e.g[h].call(e,o.id,o.data,o.size)}function Xk(e,o,h,d){this.key="",this.x=e,this.y=o,this.z=h,this.data=d,this.valid=!0}t("H.map.provider.Tile",Xk);function Yk(e,o,h,d){return e-=h,o-=d,e*e+o*o}function Zk(e,o,h){return $k(e,o*o,h||0,0,e.length-1)}t("H.math.simplifyDP",Zk);function $k(e,o,h,d,g){var _=0,$=d,j=e[d].x,_t=e[d].y,_e=e[g].x,_r=e[g].y,_n=d+1,_i=Yk(j,_t,_e,_r);if(_i)for(;_n<g;){var _o=e[_n++],_a=_o.x;_o=_o.y;var _u=((_a-j)*(_e-j)+(_o-_t)*(_r-_t))/_i;_a=0>_u?Yk(_a,_o,j,_t):1<_u?Yk(_a,_o,_e,_r):Yk(_a,_o,j+_u*(_e-j),_t+_u*(_r-_t)),_a>_&&(_=_a,$=_n-1)}else for(;_n<g;)_o=e[_n++],_a=_o.x,_o=_o.y,_a=Yk(_a,_o,j,_t),_a>_&&(_=_a,$=_n-1);return _>=o||0<h&&$-d?(--h,1<$-d?(d=$k(e,o,h,d,$),d.splice(d.length-1,1)):d=[e[d]],d=1<g-$?d.concat($k(e,o,h,$,g)):d.concat(e.slice($,g+1))):d=[e[d],e[g]],d}function al(e,o,h,d,g,_,$,j){al.j.constructor.call(this,o,h,d,null),this.key=e,this.U=j,this.a=g,this.g=_,this.i={},this.zL=$,this.m=Cd(wh.MAX_LINE_WIDTH/2*this.g+1)}u(al,Xk),t("H.map.provider.SpatialTile",al),al.prototype.c=Xd,al.prototype.u=Xd,al.prototype.b=Xd;function bl(e){return e.U.getInvalidations(nh.SPATIAL)}function cl(e){var o=bl(e),h=o.a,d=e.c,g=d===h,_;if(!(g||o.Rj(d)||o.yh(d))){g=e.f;var $=e.i;if(o.Sf(d))for(_=g.length;_--;){var j=g[_];if(j.Kb().Sf(d)){g.splice(_,1);var _t=_t||dl(e,j.cb())}}if(o.zh(d)){for(_=g.length;_--;)if(j=g[_],j.Kb().zh(d)){var _e=1;if((j=$[j.cb()])&&j.a){_t=1;break}}_e&&g.sort(el)}if(!_t&&o.Vd(d)){for(_=g.length;_--;)if(g[_].Kb().Vd(d)){var _r=1;break}}e.u!==d||_r||(e.u=h,e.b!==d||_t||(e.b=h)),e.c=h,g=!0}return g}al.prototype.Ud=function(){var e=bl(this),o=e.a,h=this.b,d=h===o;return d||(this.U.qa&&!e.Vd(h)?d=!0:cl(this)&&(d=this.b===o)),d},al.prototype.isCanvasValid=al.prototype.Ud,Object.defineProperty(al.prototype,"valid",{get:function(){return this.Ud()},set:ld,configurable:!0});function fl(e,o){this.b=e,this.a=o}function dl(e,o){e=e.i;var h=e[o];if(h)return delete e[o],h.a}al.prototype.f=hf;function gl(e){var o=bl(e),h=e.c,d=e.f,g;if(!cl(e)){for(g=d.length;g--;){var _=d[g],$=_.Kb();($.Sf(h)||$.yh(h))&&dl(e,_.cb())}e.f=e.U.requestSpatialsByTile(e,!1,!1).sort(el),e.c=o.a}}function el(e,o){return oh(e.Uc(),o.Uc(),!1)}al.prototype.Ua=function(){return this.f},al.prototype.getObjects=al.prototype.Ua,al.prototype.$m=function(){return this.a},al.prototype.getTileSize=al.prototype.$m;var hl={};al.prototype.Le=function(){var e=this.a+"_"+this.g,o=hl[e];if(!o){o=-this.m;var h=this.a-o;o=hl[e]=new yk(o,o,h,h)}return o},al.prototype.getPxClipRect=al.prototype.Le,al.prototype.Hf=function(){var e=this.mb;if(!e){var o=this.Jf();e=0;var h=this.a;this.z&&(h-=e+=this.Le().top),e=this.mb=sg(o.Re(new J(e,e)),o.Re(new J(h,h)))}return e},al.prototype.getGeoClipRect=al.prototype.Hf,al.prototype.Jf=function(){var e=this.J;if(!e){var o=this.a;e=this.J=new nj(B,o),e.Oa(this.z),e.x=this.x*o,e.y=this.y*o}return e},al.prototype.getPxProj=al.prototype.Jf,al.prototype.Xa=function(){return this.g},al.prototype.getPixelRatio=al.prototype.Xa,al.prototype.gg=function(){var e=this.data;return e&&(this.data=null,this.b=Xd),e},al.prototype.releaseCanvas=al.prototype.gg,al.prototype.hg=function(){this.i={},delete this.f,this.c=Xd},al.prototype.releaseData=al.prototype.hg,al.prototype.W=function(e){var o=e.getContext("2d"),h,d,g,_,$=0;if(gl(this),this.b<this.c){var j=this.f;if(h=j.length){e.width=e.height=this.a,o.clearRect(0,0,this.a,this.a);var _t=this.i;for(d=0;d<h;d++){var _e=j[d],_r=_e.cb();if(_=(g=_t[_r])?g.b:_e.getGeometriesForTile(this)){if(g)_e.Kb().Vd(this.b)&&(g.a=Ih(_e,_)),g=g.a;else{g=Ih(_e,_);for(var _n,_i=_,_o=_e.g?2:0,_a=_i.length;_a--;){var _u=_i[_a];if(_u!==Jh){var _f=_u.a;for(_n=_f.length;_n--;)_u=_f[_n],4<_u.length&&(_f[_n]=Zk(_u,.6,_o))}}this.i[_r]=new fl(_,g)}if(g){for(o.save(),_i=_e.g?this.D:this.P,_r=0;_r<_.length;_r++)_i.call(this,_e,_[_r],_e.V(),o);if(_=_e.getLabels(this))for(_e=o,_r=_.length;_r--;)for(_o=_[_r],_i=_o.size,_e.font=_i+"px "+_o.font,_e.fillStyle=_o.color,_e.textAlign="center",_e.translate(_o.x,_o.y),_e.rotate(_o.angle),_i=_o.lineHeight||1.375*_i,_a=_o.lines,_o=_a.length;_o--;)_e.fillText(_a[_o],0,_o*_i);o.restore()}$|=+g}}}this.data=$?e:null,this.u=this.b=this.c}else this.data&&($=1);return 0<$},al.prototype.render=al.prototype.W,al.prototype.data=null,al.prototype.P=function(e,o,h,d){var g;h.b&&(il(d,h,this.g),jl(o,d,!1,!0,!1,this.a,this.m)),h.a&&(g=e.c)&&g.Ob&&(kl(d,g),ll(this,d,o,g,h.lineWidth))},al.prototype.D=function(e,o,h,d){var g=h.Ob,_=h.b,$,j=this.a,_t=this.m;if(o===Jh)g&&(kl(d,h),d.fillRect(0,0,j,j));else{if(_&&il(d,h,this.g),h.a&&($=e.c)){var _e=h.lineWidth;$.Ob||($=null)}e=o.c,e===Wd?((_||g)&&(kl(d,h),jl(o,d,!0,_,g,j,this.m)),$&&(kl(d,$),ll(this,d,o,$,_e,0))):(g&&(kl(d,h),jl(o,d,!0,!1,g,j,_t,0,e)),_&&jl(o,d,!1,_,!1,j,_t,e),$&&(kl(d,$),ll(this,d,o,$,_e,e)))}};function jl(e,o,h,d,g,_,$,j,_t){var _e=e.a,_r=-$;if($=_+$,j=j||0,_t===B&&(_t=_e.length),g&&e===Jh)o.fillRect(0,0,_,_);else if(_t>j){for(o.beginPath(),_=j;_<_t;_++){var _n=_e[_],_i=_n.length;if(_n===Qh)o.moveTo(_r,_r),o.lineTo(_r,$),o.lineTo($,$),o.lineTo($,_r);else{var _o=_n[0];for(o.moveTo(_o.x,_o.y),j=1;j<_i;j++)_o=_n[j],o.lineTo(_o.x,_o.y)}h&&o.closePath()}h&&g&&o.fill(e.b!==Wd?"evenodd":"nonzero"),d&&o.stroke()}}function il(e,o,h){var d;e.strokeStyle=o.strokeColor,e.lineWidth=o.lineWidth*h,e.lineCap=o.lineCap,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.setLineDash&&(d=o.lineDash)!==hf&&(e.setLineDash(d),e.lineDashOffset=o.lineDashOffset)}function kl(e,o){e.fillStyle=o.fillColor}function ll(e,o,h,d,g,_){var $=g*d.width/2;g=g*d.length/2;var j=g/2;d=2*g*d.frequency;var _t=Fd(Gd(g,2)+Gd($,2));e=e.a-_t,e=new yk(_t,_t,e,e),h=h.a;var _e,_r,_n,_i,_o,_a,_u,_f=Pd/2;for(_=_||0,_t=h.length;_t-- >_;){var _h=0,_d=h[_t];if(_r=_e=_d.length){var ty=_d;for(_r=ty.length,_n=0;--_r;)_n+=ty[_r].Wa(ty[_r-1]);_r=(ty=_n)>=d}if(_r)for(_r=yd(Bd(ty/d),1e3),_r=ty/(_r+1),_n=_r/2;--_e;){for(_i=(_o=_d[_e]).Wa(_a=_d[_e-1]);_n<=_h+_i;){var ey=_o.x+(_a.x-_o.x)*(_u=(_n-_h)/_i);_u=_o.y+(_a.y-_o.y)*_u,e.vf(ey,_u)&&(o.save(),o.translate(ey,_u),o.rotate(-Md((_a.y-_o.y)/(_o.x-_a.x))+(_o.x<_a.x?_f:-_f)),o.beginPath(),o.moveTo(-$,-g),o.lineTo(0,g),o.lineTo($,-g),o.lineTo(0,-j),o.closePath(),o.fill(),o.restore()),_n+=_r}_h+=_i}}}var ml=[];al.prototype.Ea=function(e,o,h){for(var d=this.f,g=d.length,_,$,j,_t,_e,_r,_n=hf,_i,_o=this.g;g--;)if($=d[g],$.wc(!0)&&(j=this.i[$.cb()])&&(_t=j.b)){for(_=$.V(),_r=_.fillColor!=="none"&&$.g,_i=_.strokeColor==="none"?0:_.lineWidth*_o,_=_t.length;_--;){_e=_t[_];var _a;if(!(_a=_r&&_e===Jh)&&(_a=_r||_i)){var _u;_a=e;var _f=o,_h=_r,_d=_i,ty=_e.b,ey=_e.c,sy=ey!==Wd,ny=_e.a,uy=ny.length,fy=0,yy=0,xy=!1;for(_e=0;_e<uy;_e++){var Ey=ny[_e],Oy=_e>=ey,Gy=!Oy&&_e>=ty;if(Ey===Qh&&_h)Gy?fy++:yy++;else{var Ly=Ey.length;for(ml.length=2*Ly,_u=0;_u<Ly;_u++){var g0=Ey[_u];ml[2*_u]=g0.x,ml[2*_u+1]=g0.y}if(_u=_h&&!Oy,Oy=sy&&!Oy?0:_d,_u||Oy){if(Oy=ee(_a,_f,ml,Oy,_u),Oy===de.EDGE||Oy===de.VERTEX){xy=!0;break}else if(Oy===de.SURFACE){if(Gy)fy++;else if(yy++,ty===Wd)break}}}}_a=xy||0<yy&&!(fy%2)}if(_a){_n===hf&&(_n=[]),_n.push($);break}}if(h&&_n.length)break}return _n};function nl(e,o){var h;nl.j.constructor.call(this,o),this.D=e,this.P=e=o.pixelRatio,this.tileSize=h=1<<Ad(Yd((o.tileSize||256)*e)),this.L=Pk(h,e),this.Gh=A(this.Gh,this),this.Wh=A(this.Wh,this),this.Hh=A(this.Hh,this),this.Fh=A(this.Fh,this),this.m=A(this.m,this),this.D.addEventListener(P.prototype.A.za,this.m,!1,this),this.f=[],this.i=new Rk(o.tileCacheSize||256,this.Gh),this.l=new Rk(o.dataCacheSize||512,this.Wh),this.J=new Mk(20,this.Hh),this.c={},this.u=Lk()}u(nl,Ok),nl.prototype.m=function(e){e=e.target,e.type===nh.SPATIAL&&this.Va(e)},nl.prototype.Ha=function(e,o,h,d){var g=this.getTileKey(e,o,h),_;if(_=this.i.get(g,d)){if(d||_.Ud())return _;d||this.i.zf(g)}if((_=this.l.get(g,d))&&(d||cl(_)))return e=this.f.pop()||document.createElement("canvas"),_.W(e)||this.f.push(e),this.i.add(g,_,1),_;d||((_=this.c[g])?_.count++:(_=this.J.push([g,e,o,h],this.Fh),_.count=1,this.c[g]=_))},nl.prototype.requestTile=nl.prototype.Ha,nl.prototype.ac=function(){},nl.prototype.createTileInternal=nl.prototype.ac,nl.prototype.mc=function(e,o,h){this.pe(this.getTileKey(e,o,h))},nl.prototype.cancelTile=nl.prototype.mc,nl.prototype.pe=function(e){var o;(o=this.c[e])&&(o.count--,o.count||(o.cancel(),delete this.c[e]))},nl.prototype.cancelTileByKey=nl.prototype.pe,p=nl.prototype,p.Hh=function(e,o){var h=o[0],d=o[1],g=o[2],_=o[3];h=this.i.get(h)||new al(h,d,g,_,this.tileSize,this.P,_+this.L,this.D),d=h.data||this.f.pop()||document.createElement("canvas"),h.W(d)||this.f.push(d),o.push(h),e.done(h)},p.Fh=function(e,o){e=e.data[0],o&&this.i.add(e,o,1),delete this.c[e],this.Va()},p.Gh=function(e,o){o.data&&this.f.push(o.gg()),this.l.add(e,o,1)},p.Wh=function(e,o){o.hg()},p.o=function(){for(var e in this.c)this.c[e].cancel();this.i.na(),this.l.na(),this.f.length=0,nl.j.o.call(this)};function yk(e,o,h,d){this.left=+e,this.top=+o,this.right=+h,this.bottom=+d}t("H.math.Rect",yk),yk.prototype.set=yk,yk.prototype.set=yk.prototype.set,yk.prototype.Nb=function(){return this.b||(this.b=new J(this.left,this.top))},yk.prototype.getTopLeft=yk.prototype.Nb,yk.prototype.Jb=function(){return this.a||(this.a=new J(this.right,this.bottom))},yk.prototype.getBottomRight=yk.prototype.Jb,yk.prototype.vf=function(e,o){return this.left<=e&&this.right>=e&&this.top<=o&&this.bottom>=o},yk.prototype.containsXY=yk.prototype.vf;function ol(e,o){return new yk(e.x,e.y,o.x,o.y)}yk.fromPoints=ol,yk.prototype.clone=function(){return new yk(this.left,this.top,this.right,this.bottom)},yk.prototype.clone=yk.prototype.clone;function pl(e,o){if(o=o||{},!e)throw new D(pl,0,e);this.tileSize=e.tileSize,this.a={},qj.call(this,{min:o.min!==void 0?o.min:e.min,max:o.max!==void 0?o.max:e.max,minWorldSize:this.tileSize,projection:o.eg,dark:o.dark,provider:e})}u(pl,qj),t("H.map.layer.BaseTileLayer",pl),pl.prototype.Ae=function(e,o){var h=this.pixelProjection;if(!C(e,K))throw new D(this.Ae,0,e);if(!E(o)){var d=h.Jj();h.Oa(o)}return e=ol(h.ib(e.Nb()),h.ib(e.Jb())),!E(d)&&h.Oa(d),e},pl.prototype.geoRectToRect=pl.prototype.Ae,pl.prototype.Sd=function(e,o){var h=Gd(2,Bd(o)),d=this.tileSize;if(!C(e,yk))throw new D(this.Sd,0,e);if(E(o=+o))throw new D(this.Sd,1,o);o=Bd(e.left/d),o===h&&--o;var g=Bd(e.right/d);return g===h&&--g,new yk(o,ae(Bd(e.top/d),0,h-1),g,ae(Bd(e.bottom/d),0,h-1))},pl.prototype.getTileBounds=pl.prototype.Sd,pl.prototype.Ha=function(e,o,h,d){return this.ma.requestTile(e,o,h,d)},pl.prototype.requestTile=pl.prototype.Ha,pl.prototype.mc=function(e,o,h){this.ma.cancelTile(e,o,h)},pl.prototype.cancelTile=pl.prototype.mc,pl.prototype.ba=function(e,o){return this.ma.getCopyrights?this.ma.getCopyrights(e,o):null},pl.prototype.getCopyrights=pl.prototype.ba;function ql(e,o,h,d,g){d=Bd(d);var _=Gd(2,d),$=o.left,j=o.top,_t=o.right;h=_t+(h?_+(_t===o.left?0:1):1);var _e=o.bottom,_r=[];if(g)var _n=$+(1+_t-$)/2+g.x/e.tileSize-.5,_i=j+(1+_e-j)/2+g.y/e.tileSize-.5;for(;$<h;){for(j=o.top;j<=_e;)e=$%_,_r.push([e,j,d,g?Dd(_n-$)+Dd(_i-j):0]),j++;$++}return _r}function Bk(e,o,h){h=Bd(h),e.pixelProjection.Oa(h),o=e.Ae(o);var d=e.Sd(o,h);return ql(e,d,o.left>o.right,h)}pl.prototype.Ke=function(e,o,h,d,g,_){var $,j=[],_t,_e=this.ma;_=_??"__default__";var _r=_e.requestTile;if(!C(e,yk))throw new D(this.Ke,0,e);if(E(h=+h))throw new D(this.Ke,1,h);if(d||($={}),o=ql(this,e,o,h,g),e=o.length)for(d||o.sort(rl),h=e;h--;)g=o[h],d||($[_e.uc.apply(_e,g)]=!0),g[3]=+d,(_t=_r.apply(_e,g))&&j.push(_t);if(!d){d=$;var _n;$=this.a[_]||{};for(_n in $)$.hasOwnProperty(_n)&&$[_n]&&!d[_n]&&this.ma.cancelTileByKey(_n);this.a[_]=d}return{total:e,tiles:j}},pl.prototype.getProviderTiles=pl.prototype.Ke;function rl(e,o){return o[3]-e[3]}function sl(e,o){pl.call(this,e,o)}u(sl,pl),t("H.map.layer.TileLayer",sl),sl.prototype.td=function(e,o,h,d,g){if(!C(e,K))throw new D(this.td,0,e);if(E(o=+o))throw new D(this.td,1,o);o=Bd(o),this.pixelProjection.Oa(o),e=this.Ae(e);var _=this.Sd(e,o);return this.Ke(_,e.left>e.right,o,h,d,g)},sl.prototype.requestTiles=sl.prototype.td;function tl(e,o){o=o?Wa(o):{},o.tileSize=o.tileSize||256,o.pixelRatio=o.pixelRatio||Ue(),o.max=24,this.a=new nl(e,o),this.b=new sl(this.a),o.minWorldSize=this.a.tileSize,o.provider=e,tl.j.constructor.call(this,o),this.tileSize=this.b.tileSize,this.c=A(this.c,this),this.a.addEventListener(this.a.A.za,this.c),e.addEventListener(e.A.za,this.c)}u(tl,qj),t("H.map.layer.ObjectLayer",tl),tl.prototype.c=function(e){e.currentTarget!==this.a&&e.target.type===nh.SPATIAL||this.Va()};var ul={markers:hf,total:0};tl.prototype.Ec=function(e,o,h){var d=this.ma,g;return d.providesMarkers()&&(g=d.requestMarkers(e,o,!0,h)).length?{markers:g,total:g.length}:ul},tl.prototype.requestMarkers=tl.prototype.Ec,tl.prototype.Dc=function(e,o,h){var d=this.ma,g;return d.providesDomMarkers()&&(g=d.requestDomMarkers(e,o,!0,h)).length?{markers:g,total:g.length}:ul},tl.prototype.requestDomMarkers=tl.prototype.Dc;var vl={tiles:hf,total:0};tl.prototype.td=function(e,o,h,d){if(this.ma.providesSpatials()){var g=this.b.td(e,o,h,d);h||(h=this.a,g=Lk(),33<g-h.u&&(Fk(h.J),h.u=g),g=this.b.td(e,o,!0,d))}else g=vl;return g},tl.prototype.requestTiles=tl.prototype.td,tl.prototype.Ha=function(e,o,h,d){return this.b.Ha(e,o,h,d)},tl.prototype.requestTile=tl.prototype.Ha,tl.prototype.mc=function(e,o,h){this.b.mc(e,o,h)},tl.prototype.cancelTile=tl.prototype.mc;var wl={overlays:hf,total:0};tl.prototype.sd=function(e,o,h){var d=this.ma,g=wl;return d.providesOverlays&&d.providesOverlays()&&(e=d.requestOverlays(e,o,!0,h),o=e.length)&&(g={overlays:e,total:o}),g},tl.prototype.requestOverlays=tl.prototype.sd,tl.prototype.o=function(){this.a.F(),this.b.F(),this.ma.dispose(),tl.j.o.call(this)};function S(e){xc(this,S),S.j.constructor.call(this,e),this.sb=new xl,this.ub=A(this.ub,this),this.P=yl,this.createTileInternal=this.ac.bind(this)}u(S,Ok),t("H.map.provider.RemoteTileProvider",S),S.prototype.em=function(){return 1},S.prototype.getEntryWeight=S.prototype.em;var yl,zl=screen.width,Al=screen.height,Bl=Ue();Bl=zd(Bl,1);var Cl=Cd(zl*Bl*Al*Bl/1e6);yl=new Rk(Gd(2,zd(8,yd(12,7+Cl))));var Dl={},El={};S.prototype.nb=function(){return this.P},S.prototype.getCache=S.prototype.nb,S.prototype.J=ba(3),S.prototype.ub=function(e){var o=this.uri;return!e.indexOf(o)&&e.charAt(o.length)==="_"},S.prototype.cacheFilter=S.prototype.ub,S.prototype.wa=function(e,o){o.valid=!1},S.prototype.reload=function(e){var o=this.getCache();e?o.na(this.ub):o.forEach(this.wa,this,this.ub),Fl(this),this.Va(this,{isReload:!0})},S.prototype.reload=S.prototype.reload,S.prototype.l=function(){return!1},S.prototype.MAX_STORE_TIME=1/0,S.prototype.c=function(){return this.sb},S.prototype.ea=function(e,o){o(e)};function Ck(e,o,h,d,g,_){return d=~~d,e.requestInternal(o,h,d,function($,j){e.c().put(e.uc(o,h,d),{raw:j&&j.raw||$,timestamp:x.Date.now()},g,_)},_,0)}S.prototype.requestInternal=S.prototype.B,S.prototype.Ha=function(e,o,h,d){var g=this,_=this.getCache();if(E(e=+e))throw new D(this.Ha,0,e);if(E(o=+o))throw new D(this.Ha,0,o);if(E(h=+h))throw new D(this.Ha,0,h);h=~~h;var $=this.getTileKey(e,o,h);return _=_.get($),_&&_.valid||d||Dl[$]||(_=B,this.requestTileAsPromise(e,o,h,d).then(function(j){g.Va(j)},ld)),_},S.prototype.requestTile=S.prototype.Ha,S.prototype.Gk=function(e,o,h,d){var g=this,_=this.getCache(),$=this.getTileKey(e,o,h),j,_t,_e=this.c();return El[$]?El[$]:(El[$]=j=new Rb(function(_r,_n){function _i(_o){var _a=0,_u,_f=function(_h,_d){_u=g.createTileInternal(e,o,h,_h,_d),_u.key=$,_.add($,_u,1),_r(_u),Gl($)};_o&&(_a=x.Date.now()-_o.timestamp),_o&&_a<g.MAX_STORE_TIME?g.ea(_o.raw,_f):(0<_a&&_e.remove($),(_u=_.get($))&&_u.valid||d?_r(_u||null):Dl[$]=g.requestInternal(e,o,h,_f,_n))}_t=_e.get($,_i,_i)}),Dl[$]||(Dl[$]=_t),j.then(function(){Gl($)},function(){Gl($)}),j)},S.prototype.requestTileAsPromise=S.prototype.Gk,S.prototype.Fk=function(e,o){var h=this,d=e.id,g=e.tile.coords;return new Rb(function(_,$){h.Gk(g.x,g.y,g.z,o).then(function(j){var _t=z;j=j.Ua?j.Ua():j.data;for(var _e=j.length,_r;_e--;)if(_r=j[_e],_r.cb()===d){_t=_r;break}_(_t)},$)})},S.prototype.requestObjectAsPromise=S.prototype.Fk;function Gl(e){delete Dl[e],delete El[e]}function Fl(e){for(var o in Dl)e.ub(o)&&e.cancelTileByKey(o)}var Hl={cancel:ld};S.prototype.ac=function(e,o,h,d){return new Xk(e,o,h,d)},S.prototype.createTileInternal=S.prototype.ac,S.prototype.pe=function(e){var o=Dl[e];o&&(o.cancel(),Gl(e))},S.prototype.cancelTileByKey=S.prototype.pe,S.prototype.mc=function(e,o,h){this.cancelTileByKey(this.getTileKey(e,o,h))},S.prototype.cancelTile=S.prototype.mc,S.prototype.o=function(){S.j.o.call(this),this.getCache().na(this.ub),Fl(this)};function xl(){}S.NullStorage=xl,xl.prototype.get=function(e,o){return o(),Hl},xl.prototype.get=xl.prototype.get,xl.prototype.put=function(e,o,h){h&&h()},xl.prototype.put=xl.prototype.put,xl.prototype.clear=function(e){e&&e()},xl.prototype.clear=xl.prototype.clear,xl.prototype.remove=function(e,o){o&&o()},xl.prototype.remove=xl.prototype.remove;function Ek(e){if(Ek.j.constructor.call(this,e),e&&(this.u={crossOrigin:e.crossOrigin||"anonymous",headers:e.headers||{}},this.m=e.getURL),this.b===kk.HARP&&H.map.render.harp){var o;e&&e.style&&e.style instanceof H.map.render.harp.Style?o=e.style:o=new H.map.render.harp.Style({styles:[{technique:"raster",attr:{gamma:1,brightness:1}}]}),this.Qa(o)}if(!Da(this.m))throw new D(Ek,0,"getURL");if(lk(this,e.opacity),this.f=x.URL||x.webkitURL,e=this.u.crossOrigin,!(e=e==="anonymous"||e==="use-credentials")){e=this.m(0,0,0),o=window.location;var h=document.createElement("a");h.href=e,e=h.hostname===o.hostname&&h.port===o.port&&h.protocol===o.protocol}(this.T=e&&!!uf.arraybuffer&&!!this.f)&&this.nb().$d(A(this.aa,this))}u(Ek,S),t("H.map.provider.ImageTileProvider",Ek),Ek.prototype.ic=function(e){lk(this,e)},Ek.prototype.setOpacity=Ek.prototype.ic,Ek.prototype.Tc=function(){return this.g},Ek.prototype.getOpacity=Ek.prototype.Tc,Ek.prototype.Ve=ff,Ek.prototype.providesRasters=Ek.prototype.Ve,Ek.prototype.B=function(e,o,h,d,g,_){var $=this,j=this.m(e,o,h),_t;if(e=Hl,j){var _e=x.setTimeout(function(){$.T?(_t=new tf("arraybuffer",j,_,$.u),_t.then(function(_r){return _r.blob()}).then(function(_r){var _n=new Image;_n.onload=A(d,null,_n,{raw:_r}),_n.onerror=A(g,null,"bad url");try{_n.src=$.f.createObjectURL(_r)}catch{}},g)):(_t=new tf("image",j,_,$.u),_t.then(d,g))},150);e={cancel:function(){_t?_t.cancel():x.clearTimeout(_e)}}}else d(null);return e},Ek.prototype.requestInternal=Ek.prototype.B,Ek.prototype.ea=function(e,o){var h=new Image;h.onload=function(){o(this)},h.src=this.f.createObjectURL(e)},Ek.prototype.aa=function(e,o){(e=o.data)&&e instanceof HTMLImageElement&&this.f.revokeObjectURL(e.src)},Ek.prototype.V=function(){return this.Ya()},Ek.prototype.getStyle=Ek.prototype.V,Ek.prototype.gb=function(e){H.map.render.harp&&this.b===kk.HARP&&e instanceof H.map.render.harp.Style&&this.Qa(e)},Ek.prototype.setStyle=Ek.prototype.gb,t("H.util.events.listenOnce",Fe),t("H.util.events.dispatchEvent",function(e,o){return e.dispatchEvent(o)}),t("H.util.events.fireListeners",function(e,o,h,d){return pe(e)?e.jd(o,h,d):Oe(e,o,h,d)}),t("H.util.events.listen",Ee),t("H.util.events.unlisten",Me);var Il=Pe;Pe=function(e,o){var h,d,g=!0,_=o[o.currentTarget===o.target?"AT_TARGET":e.capture?"CAPTURING_PHASE":(h=!0,"BUBBLING_PHASE")];return(!h||(d=o.type)!=="pointerenter"&&d!=="pointerleave")&&(o.eventPhase=_,g=Il(e,o),h&&e.src&&e.src.Mb&&e.src.Mb()===null&&delete o.eventPhase),g};function Jl(e,o,h,d){var g=new yk(0,0,0,0);if(Jl.j.constructor.call(this),!e)throw new D(Jl,0,e);if(!o)throw new D(Jl,1,o);if(!h)throw new D(Jl,2,h);if(typeof d!="object")throw new D(Jl,3,d+" is not an object");if(typeof d.pixelRatio!="number")throw new D(Jl,3,d.pixelRatio+" is not a number");this.oa=d.pixelRatio,this.zoom=0,this.fb=Ed(this.oa)/Od,this.b=new nj,this.wa={1:g.clone(),2:g.clone(),4:g.clone()},this.s=new J(.5,.5),this.f=e,Kl(this,this.oa),this.lc=A(this.lc,this),this.cc=A(this.cc,this),this.wb=A(this.wb,this),e.startInteraction=this.lc,e.interaction=this.cc,e.endInteraction=this.wb,e.addEventListener(e.A.za,this.T,!1,this),this.getCapabilities=this.getCapabilities,this.capture=this.capture,this.zoomAt=this.xd,this.relaunch=this.ha,this.dispose=this.F,this.screenToGeo=this.Pa,this.geoToScreen=this.Da,this.screenToLookAtData=this.qg,this.J=o,this.kc=A(this.kc,this),this.control=A(this.control,this),this.vb=A(this.vb,this),o.startControl=this.kc,o.control=this.control,o.endControl=this.vb,o.addEventListener(o.A.za,this.Kg,!1,this),this.c=h,this.Zf=A(this.Zf,this),this.Me=A(this.Me,this),this.Ne=A(this.Ne,this),this.Yf=A(this.Yf,this),h.addEventListener(qj.prototype.A.za,this.Zf,!1,this),h.addEventListener(h.A.he,this.Me,!1,this),h.addEventListener(h.A.je,this.Ne,!1,this),h.addEventListener(h.A.ke,this.Yf,!1,this)}u(Jl,F),t("H.map.render.RenderEngine",Jl),Jl.prototype.xd=function(){};function Kl(e,o){var h=e.f,d=h.width,g=h.height,_=h.padding,$=_.top,j=_.left,_t=_.bottom;_=_.right,h=h.margin;var _e=-(d+j-_)/2<<0,_r=-(g+$-_t)/2<<0;d+=_e,g+=_r,e=e.wa,e[1].set((_e-h)*o,(_r-h)*o,(d+h)*o,(g+h)*o),e[2].set(_e*o,_r*o,d*o,g*o),e[4].set((_e+j)*o,(_r+$)*o,(d-_)*o,(g-_t)*o)}Jl.prototype.T=function(){Kl(this,this.oa)},Jl.prototype.o=function(){var e=this.f,o=this.J,h=this.c;e.removeEventListener(e.A.za,this.T,!1,this),e.startInteraction===this.lc&&(e.startInteraction=xk.prototype.lc),e.interaction===this.cc&&(e.interaction=xk.prototype.cc),e.endInteraction===this.wb&&(e.endInteraction=xk.prototype.wb),o.removeEventListener(o.A.za,this.Kg,!1,this),o.startControl===this.kc&&(o.startControl=Ll.prototype.kc),o.control===this.control&&(o.control=Ll.prototype.control),o.endControl===this.vb&&(o.endControl=Ll.prototype.vb),h.removeEventListener(qj.prototype.A.za,this.Zf,!1,this),h.removeEventListener(h.A.he,this.Me,!1,this),h.removeEventListener(h.A.je,this.Ne,!1,this),h.removeEventListener(h.A.ke,this.Yf,!1,this)},Jl.prototype.mi=function(e){this.me=e},Jl.prototype.setAnimationCallback=Jl.prototype.mi,Jl.prototype.hi=function(){this.me=void 0},Jl.prototype.resetAnimationCallback=Jl.prototype.hi,Jl.prototype.control=function(){},Jl.prototype.capture=function(){return $b(Error("not implemented"))};function Ml(e,o){e.style.transition="opacity 1.5s",Fe(e,"transitionend",o,!1),e.style.opacity=0}var Nl={ZOOM:1,HEADING:2,TILT:4,INCLINE:8,COORD:16};Jl.InteractionModifiers=Nl,p=Jl.prototype,p.A={Vi:"render"},p.Zf=function(e){this.nk(e),this.ha()},p.Me=function(e){this.Pe(e.idx,e.added)},p.Ne=function(e){this.Xh(e.idx,e.removed,e.type===this.c.A.ke)},p.Yf=function(e){e.removed&&this.Ne(e),this.Me(e)},p.nk=ld,p.Pe=function(e,o){this.th(e,o),e===0&&this.Eb(),C(o,qj)&&Ol(this,o,!0),this.ce(),this.ha()},p.Eb=function(){var e=this.c.La();if(0<e.length){var o=e[0].max;this.Eg=e[0].min,this.Dg=o}else e=this.getCapabilities().lookAt.zoom,o=e.max,this.Eg=e.min,this.Dg=o;e=Pl(this,this.zoom),e!==this.zoom&&(this.zoom=e,this.b.Oa(e),this.$a())},p.$a=function(e){this.P=this.jb(),e&&(this.P.position=e),this.P.zoom=this.zoom-this.fb,this.P.position.alt=0},p.dl=0,p.heading=180,p.jb=function(){return Ql(this,{position:this.b.projection.dg(this.s),zoom:this.zoom,tilt:this.dl,heading:this.heading})};function Ql(e,o){return o.tilt=Rl(e,o.tilt),o.heading=Sl(e,o.heading),o.incline=e.getCapabilities().lookAt.incline.min,o}function Pl(e,o){var h=e.getCapabilities().lookAt.zoom;return ae(o,zd(h.min,e.Eg),yd(h.max,e.Dg))}function Rl(e,o){return e=e.getCapabilities().lookAt.tilt,ae(o,e.min,e.max)}function Sl(e,o){return e=e.getCapabilities().lookAt.heading,ae((o%360+360)%360,e.min,e.max)}function Ol(e,o,h){h=h?o.addEventListener:o.removeEventListener,h.call(o,o.A.Ti,e.Yh,!1,e),h.call(o,o.A.Si,e.Yh,!1,e)}p.th=ld,p.Xh=ld,p.xo=function(e,o){this.D={before:e,after:o}},Jl.prototype.setOnRenderCallbacks=Jl.prototype.xo;var Tl={P2D:0,WEBGL:1,HARP:2};Jl.EngineType=Tl;var Ul={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:85},incline:{min:0,max:0},heading:{min:0,max:360}},interaction:{ZOOM:Nl.ZOOM,COORD:Nl.COORD},capture:!0};t("H.map.render.webgl.capabilities",Ul);function Vl(e){var o,h=this,d=x.H.gl;Vl.j.constructor.call(this),this.a=o=d.Scene.create(x.URL.createObjectURL(pf(JSON.stringify(Wl))),{viewport:e.viewport,container:e.Zb,disableRenderLoop:!0,devicePixelRatio:e.devicePixelRatio,logLevel:"error"}),e.ao&&o.subscribe({load:e.ao}),o.subscribe({view_complete:function(){h.ji=!0,e.qk()}});var g=o.requestRedraw;o.requestRedraw=function(){g.apply(o),e.qk()},this.ki=A(this.ki,this),this.jg=A(this.jg,this),this.f=0,this.c={},this.b={}}u(Vl,qd),p=Vl.prototype,p.ji=!1;function Xl(e){e=e.a.sources;var o;for(o in e){var h=e[o];if(h.hasPendingCommands&&h.hasPendingCommands())return!0}return x.H.gl.Task.hasPendingTasks()}p.W=function(){var e=x.H.gl.Task;return this.a.immediateRedraw(),e.setState({user_moving_view:this.a.view.user_input_active}),e.processAll(),this.ji&&!this.a.dirty&&!this.a.building&&!Xl(this)&&!Object.keys(this.b).length};function Yl(e){e.ji=!1,e.a.resetViewComplete()}function Zl(e){return e.a.view}function $l(e,o){function h(){var g=o.La(),_={},$={},j,_t,_e,_r=++e.f,_n,_i;for($h($,Wl),_t=0;_t<g.length;_t++){var _o=g[_t];if(j=_o.ca()){var _a=j.Ya();if(_a.getState()===Xh.READY){var _u=_a.qc();if(!Va(_u)){delete _u.cameras,delete _u.camera,_[_t]=_u=li(_u,_t),!C(_o,tl)&&_u.sources&&mi(_u,j.uid);for(_e in _u.sources){var _f=_u.sources[_e];_f.max_zoom=yd(j.max,Ul.lookAt.zoom.max),_f.max_display_zoom=_o.max,_f.min_display_zoom=_o.min,(_i=j.tileSize)&&(2<=d&&256<_i&&j instanceof Ek&&(_i/=2),_f.tile_size=_i)}(_n=_a.Ib())&&ni(_u,_n),$h($,_u)}}}}return $h($.layers.skybox.draw.skybox.color,$.scene.sky),e.a.config=$,e.a.updateConfig().then(function(){var _h={},_d,ty;if(_r!==e.f)return!1;e.f=0;for(ty in _){_o=g[+ty];var ey=_[ty].sources;for(_d in ey)(ey=e.a.sources[_d])&&(_h[_d]=ey,ey.initialize&&_o.getProvider()&&ey.initialize(_o.getProvider(),e.ki,e.a.getWorkers().length,ey.tiled?B:e.a.tile_manager.getWorkerForTile(z,ey)))}for(_d in e.c)!_h[_d]&&e.c[_d].dispose&&e.c[_d].dispose();return e.c=_h,!0})}var d=e.a.pixelRatio();e.a.initialized?h():e.a.load(z,{blocking:!1}).then(h)}p.ki=function(e,o,h){var d=this,g=this.a.sources[e],_=h&&h.isReload;o?this.b[e]!==!0&&(this.b[e]||(this.b[e]={cl:{},aj:[]}),C(o,Xk)?this.b[e].cl[o.x+"/"+o.y+"/"+o.z]=!0:(o=o.boundingBox,this.b[e].aj.push(new K(o[0],o[1],o[2],o[3])))):this.b[e]=!0,g&&g.has_volatile_data?am(this,_):(x.clearTimeout(this.g),this.g=x.setTimeout(function(){return am(d,_)},100))},p.jg=function(e){var o=!1,h=this.b[e.source.name],d=x.H.gl;if(h)if(h===!0)o=!0;else{var g=d.Tile.coord(d.Geo.wrapTile(e.coords));if(o=!!h.cl[g.key],!o){var _=d.Geo.getTileBoundingBox(g,e.source.tile_size,wh.MAX_LINE_WIDTH/2);_=sg(_.getTopLeft(),_.getBottomRight()),o=h.aj.some(function($){return $.nd(_,!0)||_.gd($.bb(),!0)})}}return o};function am(e,o){var h=e.a.tile_manager;h.removeTiles(e.jg),h.updateTilesForView(),o&&h.removeCachedTiles(e.jg),Yl(e),e.b={}}p.qc=function(){return this.a.config};function bm(e,o,h,d){e.a.getFeatureAt(o,h,d),e.a.update()}function cm(e){return e.a.screenshot(void 0).then(function(o){return new Rb(function(h,d){new Rj(URL.createObjectURL(o.blob),function(g,_){g===1?h(_.getData()):d()},!1)})})}p.Xa=function(){return this.a.pixelRatio()},p.o=function(){var e=this.c;Vl.j.o.call(this),this.a.destroy(),this.b={},e&&Object.keys(e).forEach(function(o){e[o].dispose()}),x.clearTimeout(this.g),delete this.c,delete this.a},Vl.prototype.disposeInternal=Vl.prototype.o;var Wl={scene:{background:{color:"#FFFFFF"},sky:{zenith:"#347BC0",horizon:"#EDF2F9",fog:"#FFFFFF"}},lights:{default_light:{type:"directional",name:"default_light",visible:!0}},camera:{type:"perspective"},styles:{},fonts:{},sources:{skybox:{type:"SkyBox"}},layers:{skybox:{data:{source:"skybox"},draw:{skybox:{color:{}}}}},global:{}},nk={FEATURE:1,SOURCE:2,PROVIDER:3};t("H.map.provider.PickingMode",nk);function dm(e){return e}t("H.util.animation.ease.LINEAR",dm),t("H.util.animation.ease.EASE_IN_QUAD",function(e){return e*e});function em(e){return-e*(e-2)}t("H.util.animation.ease.EASE_OUT_QUAD",em),t("H.util.animation.ease.EASE_IN_OUT_QUINT",function(e){return e*=2,1>e?Gd(e,5)/2:(e-=2,Gd(e,5)/2+1)});function fm(e){return 1-Math.sqrt(1-e*e)}function gm(e){return Fd(2*e-e*e)}t("H.util.animation.ease.EASE_OUT_CIRC",gm);function hm(e){return 1-Math.cos(e*Math.PI/2)}function im(e){return Math.sin(e*Math.PI/2)}function jm(e,o){this.a={tilt:km(e.tilt,o.tilt),heading:km(e.heading,o.heading),zoom:o.zoom-e.zoom};var h=this.b=ng(e.position),d=o.position;e=d.lat*Ud;var g=h.lat*Ud;d=d.lng*Ud-h.lng*Ud,h=Id(d)*Kd(e),e=Kd(g)*Id(e)-Id(g)*Kd(e)*Kd(d),e=Math.atan2(h,e),this.i=(0<=e?e:Sd+e)*Vd,this.c=this.b.Wa(o.position),o=this.a.zoom,this.g=o===0?lm:Object.assign({},lm,{zoom:0>o?gm:fm,position:0>o?hm:im}),this.f=Object.assign({},{tilt:0,heading:0,zoom:0})}function km(e,o){return e=o-e,-180<e&&180>=e?e:180<e?e-360:e+360}var lm={tilt:dm,heading:dm,zoom:dm,position:dm};function mm(e,o){if(E(this.x=+e))throw new D(mm,0,e);if(E(this.y=+o))throw new D(mm,1,o)}mm.prototype.add=function(e){return new mm(this.x+e.x,this.y+e.y)},mm.prototype.a=function(e){if(!C(e,mm))throw new D(this.a,0,e);return e=this.b(e),e.x+e.y},mm.prototype.b=function(e){if(!C(e,mm))throw new D(this.b,0,e);return new mm(this.x*e.x,this.y*e.y)},mm.prototype.Oa=function(e){return new mm(this.x*e,this.y*e)};function nm(e){return Fd(e.a(e))}function om(e){e=e||jf,this.mb=vc(e.Wn)?e.Wn:3,this.U=vc(e.Un)?e.Un:300,this.u=vc(e.No)?e.No:3,this.J=vc(e.Io)?e.Io:50,this.c=[],this.clear()}t("H.map.render.InteractionUtils",om),om.prototype.tn=function(){return this.b},om.prototype.isGestureDetected=om.prototype.tn,om.prototype.start=function(e,o){var h=Nl.HEADING,d=Nl.TILT;this.s&&this.clear(),this.g=e,this.l=!!o,this.s=!0,this.b=!(e&(h|d))||e===h||e===d},om.prototype.start=om.prototype.start,om.prototype.store=function(e,o,h,d,g){var _=!1;if(this.s){if(e=new pm(e,o,h,d,g),_=e.c,this.m=this.a,this.a=e,this.f){if(this.i=!0,_){o=this.g;var $=this.b;if(!$&&this.i){g=Nl.HEADING;var j=Nl.TILT;h=Nl.COORD,d=Nl.ZOOM;var _t=o&(h|j)?this.Nd(!0):qm,_e=o&d?this.Cf(!0):1,_r=o&g?Dd(this.bh(!0)):0,_n=Dd(_t.x),_i=Dd(_t.y);_t=10<_n||10<_i,_n=10<_i&&_i>3*_n,_e=.8>_e||1.2<_e,_r=7<_r,o&j&&(_r||_e||_t&&!_n?rm(this,j):_n&&(rm(this,~j>>>0),$=!0)),!$&&o&g&&o&(h|d)&&(_e||_t?(rm(this,g),$=!0):_r&&(rm(this,j),$=!0)),this.b=$}}}else this.f=e,_||(this.b=!0);this.l&&this.c.push(e)}return _},om.prototype.store=om.prototype.store,om.prototype.clear=function(){this.c.length=0,this.s=this.l=this.i=this.b=!1,this.f=this.m=this.a=void 0},om.prototype.clear=om.prototype.clear,om.prototype.Ac=function(e){return 0<(this.g&e)},om.prototype.isModifierEnabled=om.prototype.Ac;function rm(e,o){e.g^=e.g&o}om.prototype.sa=function(){return this.s},om.prototype.isRunning=om.prototype.sa;var qm=qc(new mm(0,0));om.prototype.rc=function(){var e;if(this.l){var o=this.c,h=o.length,d=0;for(e=new mm(0,0);--h&&d<this.u;)e=e.add(sm(o[h-1],o[h])),d++}else e=this.Nd();return o=e,h=nm(o),h!==0?new mm(o.x/h,o.y/h):o},om.prototype.getDirection=om.prototype.rc,om.prototype.zb=function(e){e=e||Lk();var o,h;if(this.l){var d=this.c,g=this.c.length,_=this.c[g-1];for(h=o=0;--g&&o<this.u;)h+=nm(sm(d[g],d[g-1])),o++;d=h/o}else _=this.a,d=nm(this.Nd());return d=d>=this.mb&&e-_.timestamp<=this.J?d>this.U?this.U:d:0},om.prototype.getSpeed=om.prototype.zb,om.prototype.Bf=function(){return this.a?tm(this.a):B},om.prototype.getBifocalCenter=om.prototype.Bf,om.prototype.Nd=function(e){return(e=e?this.f:this.m)?sm(e,this.a):new mm(0,0)},om.prototype.getMoveVector=om.prototype.Nd,om.prototype.Cf=function(e){var o=1;if(this.i){var h=this.a;e=e?this.f:this.m,(e=um(e))&&(h=um(h))&&(o=h/e)}return o},om.prototype.getBifocalScaling=om.prototype.Cf,om.prototype.bh=function(e){if(this.i){var o=e?this.f:this.m,h=this.a;e=o.b;var d=h.b,g=0;e&&d&&(o=o.a,h=h.a,g-=Nd(d.y-h.y,d.x-h.x)*Vd-Nd(e.y-o.y,e.x-o.x)*Vd),e=g}else e=0;return e},om.prototype.getBifocalRotation=om.prototype.bh;function pm(e,o,h,d,g){this.a=new J(e,o),h!==B&&(this.b=new J(h,d),this.c=!0),this.timestamp=g!==B?g:Lk()}pm.prototype.c=!1;function tm(e){var o=e.a;return(e=e.b)?new J(o.x-(o.x-e.x)/2,o.y-(o.y-e.y)/2):B}function vm(e,o){var h=e.a;return(e=e.b)&&e.Wa(o)<h.Wa(o)?e:h}function sm(e,o){var h=e.b,d=o.b;return d&&h?(o=tm(o),e=tm(e)):h?(o=o.a,e=vm(e,o)):d?(e=e.a,o=vm(o,e)):(o=o.a,e=e.a),new mm(o.x-e.x,o.y-e.y)}function um(e){var o=e.b;return o?e.a.Wa(o):0}function wm(){F.call(this),this.reset()}u(wm,F),wm.prototype.start=function(e,o){this.c&&this.reset(),E(e-o)||(this.a=+e,this.b=+o),this.c=!0},wm.prototype.reset=function(){this.c=!1,this.a=this.b=B,this.f=new xm(0,0,0,0,0,0)},wm.prototype.sa=function(){return this.c},wm.prototype.A={Cg:"animationupdate"};function ym(e){ym.j.constructor.call(this,wm.prototype.A.Cg),this.b=e}u(ym,ud),wm.prototype.set=function(e,o,h,d,g,_){var $=this.f;this.c&&(e=new xm(e/1e3,o/1e3,h/1e3,d/1e3,g/1e3,_/1e3),$.ia(e)||(this.f=e,this.dispatchEvent(new ym(zm(this)))))};function zm(e){return x.Object.create(e.f)}wm.prototype.zb=function(){return zm(this).zb()},wm.prototype.rc=function(){var e=zm(this),o=this.zb()||1;return new xm(e.a/o,e.b/o,e.c/o,e.f,e.g,e.i)},wm.prototype.o=function(){this.reset(),wm.j.o.call(this)};function xm(e,o,h,d,g,_){this.a=e,this.b=o,this.c=h,this.f=d,this.g=g,this.i=_}xm.prototype.zb=function(){return Fd(this.a*this.a+this.b*this.b+this.c*this.c)},xm.prototype.rc=function(){var e=this.zb()||1;return new xm(this.a/e,this.b/e,this.c/e,this.f,this.g,this.i)},xm.prototype.ia=function(e){var o=e===this;return!o&&(o=C(e,xm))&&(o=this.a===e.a&&this.b===e.b&&this.c===e.c&&this.f===e.f&&this.g===e.g&&this.i===e.i),o};function Am(e,o,h,d){Am.j.constructor.call(this),this.Zb=e,this.oa=d,this.a=e.appendChild(this.createElement(e.ownerDocument)),this.cf(o,h)}u(Am,qd),Am.prototype.N=function(){return this.a},Am.prototype.cf=function(e,o){this.size?(this.size.w=e,this.size.h=o):this.size=new Wi(e,o),this.Uk(this.a,this.a.style,e,o,this.oa)},Am.prototype.setSize=Am.prototype.cf,p=Am.prototype,p.yb=function(){return this.size},p.Xa=function(){return this.oa},p.Vj=!0,p.qb=function(e){e!==this.Vj&&(this.a.style.display=e?"block":"none",this.Vj=e)},p.Ih=1,p.ic=function(e){this.Ih!==e&&(this.Yj(e),this.Ih=e)},p.Tc=function(){return this.Ih},p.fe=function(e){this.a.style.zIndex=e},Am.prototype.setZIndex=Am.prototype.fe,Am.prototype.Ij=function(){return+this.a.style.zIndex},Am.prototype.Oc=function(){},Am.prototype.clear=function(){},Am.prototype.o=function(){this.clear(),this.Zb.removeChild(this.a),this.cf(0,0),delete this.a,delete this.Zb,Am.j.o.call(this)},Am.prototype.disposeInternal=Am.prototype.o,Am.prototype.f=0,Am.prototype.pg=function(){++this.f},Am.prototype.release=function(){--this.f||this.F()};function Bm(e,o,h,d,g,_){var $=g||"2d";Bm.j.constructor.apply(this,arguments),this.b=this.a.getContext($,_),this.c=$==="2d",this.g=$,this.In=_}u(Bm,Am),p=Bm.prototype,p.createElement=function(e){e=e.createElement("canvas");var o=e.style;return o.position="absolute",o.top=o.left="0",e},p.Uk=function(e,o,h,d,g){e.width=zd(h,1),e.height=zd(d,1),o.width=Ad(h/g)+"px",o.height=Ad(d/g)+"px"},p.Yj=function(e){this.b.globalAlpha=e},p.Oc=function(e,o,h,d,g){this.c&&this.b.drawImage(e,o,h,d,g)},p.Id=function(){return this.g},p.clear=function(e){var o,h;this.c&&(e?this.b.clearRect(o=e.left,h=e.top,e.right-o,e.bottom-h):this.a.width=this.size.w)},p.o=function(){var e=this.a;e.width=e.height=0,delete this.b,Bm.j.o.call(this)},Bm.prototype.disposeInternal=Bm.prototype.o;function Cm(e){this.eb=e}u(Cm,qd),Cm.prototype.ob=function(){return this.eb},Cm.prototype.getLayer=Cm.prototype.ob,Cm.prototype.Ym=function(){return this.lb},Cm.prototype.getSurface=Cm.prototype.Ym,Cm.prototype.ad=function(e){var o=this.lb;e!==o&&(this.lb=e,e.pg(),o&&o.release())},Cm.prototype.setSurface=Cm.prototype.ad,Cm.prototype.o=function(){this.lb.release()},Cm.prototype.disposeInternal=Cm.prototype.o,Cm.prototype.Rd=function(){},Cm.prototype.render=Cm.prototype.W;function Dm(e){var o="dom";Dm.j.constructor.call(this,e),C(this.eb,Em)&&(o=e.Id()==="2d"?"2d":"webgl"),this.a=o}u(Dm,Cm),Dm.prototype.W=function(e,o,h,d,g,_,$,j){$=this.eb;var _t=this.lb,_e=!(C(_t,Bm)&&_t.Id()==="2d");return d>=$.min&&d<=$.max?(_e&&_t.qb(!0),$.W(_t.N(),{boundingBox:e,zoom:d,screenCenter:o,priorityCenter:_,projection:h,cacheOnly:g,size:_t.yb(),pixelRatio:_t.Xa(),cameraMatrix:j})):(_e&&_t.qb(!1),wk.DONE)},Dm.prototype.Rd=function(){return this.a};function Fm(e,o,h,d,g){if(!Da(e.mi)||!Da(e.hi))throw new D(Fm,0,e);if(this.b=e,!Da(this.l=o))throw new D(Fm,1,o);if(E(this.i=+h))throw new D(Fm,2,h);if(!Da(this.g=d)&&d!=null)throw new D(Fm,3,d);if(!Da(this.c=g)&&g!=null)throw new D(Fm,4,g);this.id=new cf().next(),this.a=!1}t("H.util.animation.Animation",Fm),Fm.prototype.start=function(){var e=this;this.f=Lk(),this.a=!0;var o=this.f;this.b.mi(function(){if(e.a){var h=Lk(),d=h-e.f,g=d/e.i,_=!1;1<=g&&(g=1,_=!0),e.l(e.c?e.c(g):g,d,h-o,h),o=h,_&&e.stop()}else e.stop()})},Fm.prototype.start=Fm.prototype.start,Fm.prototype.stop=function(e){this.a=!1,this.b.hi(),e||this.g&&this.g(this)},Fm.prototype.stop=Fm.prototype.stop,Fm.prototype.sa=function(){return this.a},Fm.prototype.isRunning=Fm.prototype.sa;function Gm(e,o){Gm.j.constructor.call(this,e),this.oc=!(!o||!o.oc),this.f={}}u(Gm,Cm),Gm.prototype.ad=function(e){Gm.j.ad.call(this,e),this.l=e.Zb.ownerDocument},Gm.prototype.setSurface=Gm.prototype.ad;var Hm=(function(e,o){return o=o.ga(),C(o,gh)?o.la:(e[0]=o,e)}).bind(null,[]);Gm.prototype.W=function(e,o,h,d,g,_,$){var j=this.eb,_t,_e,_r,_n;if(this.s=o=this.f,this.f=h={},d>=j.min&&d<=j.max){var _i=this.rj(e,d,g,_),_o=_i.markers;if(e=_o.length){for(d=[],g=this.lb,_=0;_<e;_++){j=_o[_];var _a=Hm(j);for(_t=_a.length;_t--;)(_e=$(_a[_t]))&&((_n=o[_r=j.cb()+"_"+_t])?delete o[_r]:_n={ik:j},h[_r]=_n,d.push([_n,j,j.xb(),g,_e.x,_e.y]))}for(d.sort(Im),e=d.length,_=0;_<e;_++)this.Ek.apply(this,d[_])}}return!_i||_i.requested&&_i.requested===_i.total||!_i.requested&&_o.length===_i.total?wk.DONE:wk.PENDING},Gm.prototype.render=Gm.prototype.W;function Im(e,o){var h=e[1].Uc(),d=o[1].Uc();return oh(h,d,!0)||e[5]-o[5]||oh(h,d,!1)}Gm.prototype.Ea=function(){},Gm.prototype.getObjectsAt=Gm.prototype.Ea;function Jm(e,o){Jm.j.constructor.apply(this,arguments),this.c=0,this.a=[],this.b=A(this.b,this)}u(Jm,Gm),t("H.map.render.dom.MarkerRenderer",Jm),Jm.prototype.rj=function(){return this.eb.Dc.apply(this.eb,arguments)},Jm.prototype.W=function(e,o,h,d,g,_,$){this.b(),this.i=0;var j=Jm.j.W.apply(this,arguments),_t=this.lb,_e=this.s,_r;for(_r in _e)Km(this,_t,_e[_r]);return this.a.length===0&&j?wk.DONE:wk.PENDING},Jm.prototype.render=Jm.prototype.W,Jm.prototype.ad=function(e){Jm.j.ad.call(this,e),this.g=e.Xa()},Jm.prototype.setSurface=Jm.prototype.ad,Jm.prototype.b=function(){for(var e=this.a.length,o,h,d;e--;)d=this.a[e],o=d.Ag,h=o.xb(),h.Vh(d,h,o);this.a.length=0},Jm.prototype.Ek=function(e,o,h,d,g,_){var $,j=d.Xa(),_t=o.Kb();g*=j,_*=j,this.oc||(g=Ad(g),_=Ad(_)),e.detail&&(_t.Vd(e.qn)?Km(this,d,e):$=e.detail),$||(e.detail=$=h.uj(this.l),this.c++,Da(h.Vh)&&this.a.push($)),e.qn=_t.a,$.style.zIndex=this.i++,$.Ag=o,d.Oc($,g,_,0,0)};var Lm,Mm="pointer-events",Nm;if($e){var Om;$e&&bd!==z&&(bd=(Om=/(MSIE\s+|rv:)([^\);]+)(\)|;)/.exec(navigator.userAgent))?+Om[2]:z),Nm=bd,Nm===9?Mm="display":Nm===10&&(Mm="visibility")}Lm=Mm,Jm.prototype.Ea=function(e,o,h){var d=this.g,g=hf,_,$,j,_t,_e;if(this.c){e/=d,o/=d,d=this.lb.Zb.getRootNode();var _r=d.documentElement,_n=this.lb.N(),_i=_n.getBoundingClientRect();for(e+=_i.left,o+=_i.top;($=j=d.elementFromPoint(e,o))&&$!==_n&&$!==_r&&$!==d.host&&j!==_o;){for(;(_t=$.parentNode)&&(!Da(_t.contains)||!_t.contains(_n));)$=_t;if(_t===_n&&($!==j||$.nodeName!=="svg")&&0>g.indexOf(_e=$.Ag)&&(g===hf&&(g=[]),g.push(_e),h))break;_||(_=[]);var _o=$.style;_.push({fj:_o.getPropertyValue(Lm),pn:_o.getPropertyPriority(Lm),style:_o}),_o.setProperty(Lm,Lm==="visibility"?"hidden":"none","important"),_o=j}if(_)for(o=_.length;o--;)e=_[o],e.style.removeProperty(Lm),Cc(e.fj)&&e.style.setProperty(Lm,e.fj,e.pn)}return g},Jm.prototype.getObjectsAt=Jm.prototype.Ea,Jm.prototype.Rd=function(){return"dom"};function Km(e,o,h){o.clear(o=h.detail),delete o.Ag,e.c--,h=(e=h.ik).xb(),h.b&&h.b(o,h,e)}Jm.prototype.o=function(){this.a.length=0;var e=this.lb,o=this.f,h;for(h in o)Km(this,e,o[h]);this.lb.F(),Jm.j.o.call(this)},Jm.prototype.disposeInternal=Jm.prototype.o;function Em(e,o){var h=o||{},d=h.contextType;if(h=h.contextAttributes,Em.j.constructor.call(this,o),zc(e,"Function",Em,0,"invalid render callback"),d){if(Pm.indexOf(d)===-1)throw new D(Em,1,"invalid context type");this.b=d}h&&(this.c=h),this.f=e}u(Em,qj),t("H.map.layer.CanvasLayer",Em);var Pm=["2d","webgl","webgl2","experimental-webgl"];Em.prototype.b="2d",Em.prototype.Id=function(){return this.b},Em.prototype.W=function(e,o){return this.a&&this.a.canvas===e||(this.a=e.getContext(this.b,this.c)),this.f(this.a,o)},Em.prototype.o=function(){Em.j.o.call(this),delete this.a};function Qm(e,o){Qm.j.constructor.call(this,o),zc(e,"Function",Qm,0,"invalid render callback"),this.a=e}u(Qm,qj),t("H.map.layer.DomLayer",Qm),Qm.prototype.W=function(e,o){return this.a(e,o)};function Rm(e,o){if(E(this.b=+e))throw new D(Rm,0,e);this.a=0,o&&this.Qk(o)}t("H.util.kinetics.KineticMove",Rm),Rm.prototype.Qk=function(e){return this.a=e,this},Rm.prototype.setInitialSpeed=Rm.prototype.Qk,Rm.prototype.am=function(){return Math.abs(this.a/this.b)},Rm.prototype.getDuration=Rm.prototype.am,Rm.prototype.De=function(e){return this.a+this.b*e},Rm.prototype.getCurrentSpeed=Rm.prototype.De,Rm.prototype.Wl=function(e){return this.a*e+this.b*e*e/2},Rm.prototype.getCurrentPath=Rm.prototype.Wl;function Sm(e,o,h,d){Sm.j.constructor.apply(this,arguments)}u(Sm,Am),t("H.map.render.dom.Surface",Sm),p=Sm.prototype,p.Id=function(){return"dom"},p.createElement=function(e){return e=e.createElement("DIV"),e.style.position="absolute",e.style.pointerEvents="none",e},p.Uk=function(e,o,h,d){o.width=h+"px",o.height=d+"px"},p.Yj=function(e){this.a.style.opacity=e},p.Oc=function(e,o,h){var d=this.oa,g=e.style;g[Af("transform")]="matrix(1,0,0,1,"+o/d+","+h/d+")",e.parentNode!==this.a&&(g.position="absolute",this.a.appendChild(e),this.a.style.pointerEvents="auto",getComputedStyle(e).pointerEvents==="auto"&&(e.style.pointerEvents="all"),this.a.style.pointerEvents="none")},p.clear=function(e){e?this.a.removeChild(e):this.a.innerHTML=""};function Tm(e,o){this.a=e,this.b=o}function Um(e,o,h){var d=[],g={Zb:e.a,width:o.w,height:o.h,oa:e.b};for(e=0;e<h.length;e++){o=h[e];var _=o.Rd(),$={};Ya($,g);var j=o.lb;switch(_){case"2d":if(C(o.ob(),Em)&&($.Rg=o.ob().c),_=_r&&_r.Id()==="2d"){_=$.Rg;var _t=_r.In;_=_t===_?!0:_t&&!_?!_t.alpha&&!_t.willReadFrequently:_&&!_t?!_.alpha&&!_.willReadFrequently:!_.alpha==!_.alpha&&!_t.willReadFrequently==!_.willReadFrequently}if(_)var _e=!1;else if(j&&!_e){var _r=j;_e=!1}else _r=new Bm($.Zb,$.width,$.height,$.oa,"2d",$.Rg),_e=!0;break;case"dom":_r=j||new Sm($.Zb,$.width,$.height,$.oa),_e=!j;break;default:_r=j||new Bm($.Zb,$.width,$.height,$.oa,o.ob().Id(),$.Rg),_e=!j}d[d.length-1]!==_r&&(_r.fe(d.length),d.push(_r)),o.ad(_r)}return d}function Ll(){Ll.j.constructor.call(this),this.b={},this.a={position:new kg(0,0),zoom:0,heading:180,incline:0,tilt:0,bounds:new O(ch([90,-180,90,0,90,180,-90,180,-90,-180]))}}u(Ll,F),t("H.map.ViewModel",Ll),Ll.prototype.A={za:"update",le:"sync"},Ll.prototype.Wb=function(e,o){if(!e)throw new D(this.Wb,0,e);var h=e[Vm];if(vc(h)&&!lg(h))throw new D(this.Wb,0,Vm);if(h=e[Wm],vc(h)&&E(+h))throw new D(this.Wb,0,Wm);if(h=e[Xm],vc(h)&&!C(h,jg))throw new D(this.Wb,0,Xm);return e=x.Object.assign({},e),h=Ym(e,this.b,this.a),Zm(this,this.b,e),this.dispatchEvent(new $m(this.b,h,o)),this},Ll.prototype.setLookAtData=Ll.prototype.Wb,Ll.prototype.jb=function(){var e={};return e[Vm]=ng(this.a[Vm]),Zm(this,e,this.a,!0),e},Ll.prototype.getLookAtData=Ll.prototype.jb;var Vm="position",Wm="zoom",Xm="bounds",an={Ui:Vm,Xi:Wm,Oi:"heading",Wi:"tilt",Pi:"incline",Mi:Xm},bn=Object.keys(an).map(function(e){return an[e]});function Zm(e,o,h,d){e.g={},e.f={},e.c=[];for(var g=e.l,_=e.i,$=bn.length,j,_t,_e;$--;)if(j=bn[$],_e=h[j],_t=o[j],_t==null||!d)if(_e!=null){vc(g)&&g.call(e,j,_t,_e);var _r=j,_n;if((_n=j!=="position")||(_n=_e,_n=!(!_n||E(_n.lat)||E(_n.lng))),o[_r]=_n?_e:ng(_e),vc(_)){switch(j){case"position":_t=_e&&_t&&(_e.lat!==_t.lat||_e.lng!==_t.lng);break;case"bounds":_t=_e&&_t&&!_e.ia(_t);break;default:_t=_e!==_t}_t&&_.call(e,j)}}else delete o[j]}Ll.prototype.l=function(e,o,h){this.g[e]=o,this.f[e]=h},Ll.prototype.i=function(e){this.c.push(cn[e])};var cn=bn.reduce(function(e,o){return e[o]=ej[o.toUpperCase()],e},{});function Ym(e,o,h){var d=0;return["tilt","incline","heading",Wm].forEach(function(g){if(E(e[g])){var _=E(o[g])?h[g]:o[g];e[g]=_}else d|=cn[g]}),[Vm,Xm].forEach(function(g){e[g]?d|=cn[g]:e[g]=o[g]||h[g]}),d}Ll.prototype.$a=function(e){var o={},h={};Zm(this,this.a,e),this.b={},o.lookAt=this.f,h.lookAt=this.g,e=this.c,e=e.length?e.reduce(dn):0,this.dispatchEvent(new dj(this.A.le,o,h,e))},Ll.prototype.synchronize=Ll.prototype.$a;function dn(e,o){return e|o}Ll.prototype.df=function(e,o){if(E(e=+e))throw new D(this.df,0,Wm);this.Wb({zoom:e},o)},Ll.prototype.pb=function(){return this.a.zoom},Ll.prototype.kc=Qc,Ll.prototype.startControl=Ll.prototype.kc,Ll.prototype.control=Qc,Ll.prototype.control=Ll.prototype.control,Ll.prototype.vb=Qc,Ll.prototype.endControl=Ll.prototype.vb;function $m(e,o,h){$m.j.constructor.call(this,Ll.prototype.A.za,e,null,o),this.b=this.animate=Fc(h)&&0<h&&1/0>h?h:!!h}u($m,dj);function T(e,o,h,d){if(T.j.constructor.call(this,e,o,h,d),this.qa=new Rk(100),this.R=new J(0,0),this.Af=!!d.enableSubpixelRendering,this.ab=en,this.m=new om,this.g=d=new wm,this.sb=A(this.sb,this),d.addEventListener(d.A.Cg,this.sb),d=e.element,this.L=e=d.ownerDocument.createElement("div"),e.style.position="absolute",e.style.width=e.style.height="100%",e.style.zIndex=0,d.insertBefore(e,d.firstChild),this.Ad=new Tm(this.L,this.oa),this.ta=o.jb().position,o=x.H.gl,!o)throw new $c(T,'"H-webgl" module is missing');for(this.a=new Vl({viewport:this.f,Zb:this.L,devicePixelRatio:this.oa,qk:A(this.ha,this)}),o.WorkerBroker.addTarget("model",sj),o=this.c.La(),e=0,d=o.length,this.l={Nc:[],ja:[]},this.xa=o;e<d;e++){var g=o[e];this.Pe(e,g),Ol(this,g,!0)}this.Eb(),this.fd=A(this.fd,this),this.Kh=A(this.Kh,this),this.Da=A(this.Da,this),h.addEventListener(qj.prototype.A.ie,this.fd),this.C=fn,this.zoom=Pl(this,this.J.pb()),this.Eb(),this.T()}u(T,Jl),t("H.map.render.webgl.RenderEngine",T),T.prototype.jb=function(){var e=this.ta;return Ql(this,{position:{An:e.An,Fn:e.Fn},zoom:this.zoom,tilt:this.dl,heading:this.heading})},T.prototype.fd=function(e){e=(e=e.target.ca())&&e.Ya(),(e&&e.getState())===Xh.INIT?e.load():(Yl(this.a),$l(this.a,this.c),this.ha())},T.prototype.type=Tl.WEBGL;var fn=2;T.prototype.getState=function(){return this.C},T.prototype.getState=T.prototype.getState;function gn(e,o,h){return o=h-o,e=Gd(2,8+e.zoom),o<e/2?o:o-e*h/Dd(h)}function hn(e,o,h){function d(j){return g[j]+km(g[j],o[j])/2}if(!(h&ej.POSITION||h&ej.BOUNDS))return null;var g=Zl(e.a).getLookAtData();h=g.position;var _=o.position,$=o.bounds;return Fi(g.bounds,_.lat,_.lng,!1)||$&&Fi($,h.lat,h.lng,!1)?null:(h=jn(e,{tilt:d("tilt"),heading:d("heading"),incline:0,bounds:tg([h,_])}),h.zoom=Pl(e,h.zoom-.5),delete h.bounds,h)}T.prototype.dd=!1;function kn(e,o,h,d){return e=e.getCapabilities().lookAt[d],e=e.max-e.min,Dd(d==="zoom"?h[d]-o[d]:km(o[d],h[d]))/e||0}function ln(e,o,h){return e=zd(8*kn(e,o,h,"zoom"),kn(e,o,h,"heading"),kn(e,o,h,"tilt")/2),ae(3e3*e,300,4e3)}T.prototype.Kg=function(e){var o=this,h=e.newValue,d=e.modifiers,g=Zl(this.a);mn(this),this.R.set(0,0);var _=nn(this,h);if(bn.forEach(function(_r){d&e[_r.toUpperCase()]||delete _[_r]}),e.b){g=Zl(this.a).getLookAtData();var $=jn(this,_);h=hn(this,$,d);var j=1;Fc(e.b)&&(j=1/e.b);var _t=function(){return o.dd=!1};if(delete $.bounds,this.dd=!0,h){g=ln(this,g,h);var _e=ln(this,h,$);on(this,h,g*j,function(){return on(o,$,_e*j,_t)})}else h=ln(this,g,$),on(this,$,h*j,_t)}else pn(_),g.setLookAtData(_);qn(this),Yl(this.a),this.ha()};function jn(e,o){return pn(o),Zl(e.a).getBestLookAtData(o)}function pn(e){var o=e.bounds;!o||o instanceof O||(e.bounds=Ci(o.K()))}function rn(e,o,h){Zl(e.a).setLookAtData(o),Yl(e.a),qn(e),e.ha(),h&&setTimeout(h,0)}function on(e,o,h,d){var g=Zl(e.a).getLookAtData(),_=new jm(g,o);_.a.tilt+_.a.heading+_.a.zoom+_.c!==0?sn(e,function($){for(var j in _.a)if(_.a[j]!==0){var _t=_.g[j]($);g[j]+=_.a[j]*(_t-_.f[j]),_.f[j]=_t}return _.c!==0&&(g.position=_.b.zg(_.i,_.c*_.g.position($),!0)),rn(e,g)},h,function(){return rn(e,o,d)}):rn(e,o,d)}T.prototype.rg=function(){},T.prototype.setAnimationDuration=T.prototype.rg,T.prototype.$g=function(){},T.prototype.getAnimationDuration=T.prototype.$g,T.prototype.sg=function(){},T.prototype.setAnimationEase=T.prototype.sg,T.prototype.ah=function(){},T.prototype.getAnimationEase=T.prototype.ah,T.prototype.ng=function(){},T.prototype.resetAnimationDefaults=T.prototype.ng;function tn(e,o){e.qa.na(function(h,d){return d.Mb()===o})}p=T.prototype,p.nk=function(e){tn(this,e.target.ca()),Yl(this.a),this.ha()},p.Pe=function(e,o){T.j.Pe.call(this,e,o),un(o)&&(Yl(this.a),(e=(e=o.ca())&&e.Ya())&&e.getState()===Xh.INIT&&e.load())},p.Xh=function(e,o,h){var d;if(this.ve=Lk(),tn(this,o.ca()),o.requestDomMarkers||C(o,Em)||C(o,Qm)){var g=this.l.ja;for(d=g.length;d--;){var _=g[d];if(_.ob()===o){g.splice(d,1),_.F();break}}}un(o)&&$l(this.a,this.c),this.xa=this.c.La(),e===0&&(Ol(this,o,!1),this.Eb()),Um(this.Ad,vn(this),this.l.ja.filter(vc)),this.ce(),h||this.ha()};function un(e){return!(C(e,Qm)||C(e,Em))}p.Yh=function(){this.Eb()},p.Eb=function(){T.j.Eb.call(this);var e=this.getCapabilities().lookAt.zoom;Zl(this.a).setZoomConstraints(zd(e.min,this.Eg),yd(e.max,this.Dg))},p.th=function(e,o){var h;if(o){if(e={oc:this.Af,fb:this.fb},o.W?C(o,Em)?h=new Dm(o):C(o,Qm)&&(h=new Dm(o)):o.requestDomMarkers&&(h=new Jm(o,e)),h){this.l.ja.push(h);var d=this.c.La();this.l.ja.sort(function(g,_){return d.indexOf(g.eb)-d.indexOf(_.eb)}),Um(this.Ad,vn(this),this.l.ja.filter(vc))}un(o)&&$l(this.a,this.c)}this.xa=this.c.La()};function nn(e,o){var h=o.position;return Ql(e,{zoom:Pl(e,o.zoom),position:new kg(h.lat,h.lng),tilt:o.tilt,heading:o.heading,bounds:o.bounds})}function qn(e){var o=Zl(e.a).getLookAtData();e.zoom=o.zoom,e.ta=o.position}function wn(e,o){return e=Zl(e.a).geoToMeters(o),new J(e.x/4007501668557849e-8+.5,1-(e.y/4007501668557849e-8+.5))}function xn(e,o){return o.sub(wn(e,e.ta)).scale(Gd(2,8+e.zoom))}p.Da=function(e){return Zl(this.a).geoToPixel(e)},T.prototype.geoToScreen=T.prototype.Da,T.prototype.Pa=function(e,o){return Zl(this.a).xyToGeo(e,o)},T.prototype.screenToGeo=T.prototype.Pa,T.prototype.qg=function(e,o){return e=this.Pa(e,o),o=this.J.jb(),o.position=e,o};function yn(e,o,h,d,g,_,$,j){var _t,_e,_r=0,_n,_i=function(){--_r===0&&_(g)};if(j&&j.features)for(_r=_e=j.features.length,_n=0;_n<_e;_n++){var _o=j.features[_n],_a=_o.id;if(_t=e.a.a.sources[_o.source_name]){var _u=_t.provider,_f=_u.Ej();if(_f===nk.SOURCE){var _h=_o.source_layer;if(_h==="overlays")zn(e,o,h,d,g,_t,_o.properties.overlays_config);else if(_t=_t.getMapObjectById(_a)){if(_h!=="markers")g.push(_t);else if(An(e,o,h,_t))g.push(_t);else if(d&&!$){var _d=!0;bm(e.a,{x:o,y:h},{radius:3.5,top_most_only:!1},function(ty){yn(e,o,h,d,g,_,!0,ty)})}}_r--}else _f===nk.FEATURE?(_h=_o.tile.coords,_d=_u.getFeatureProxy(_o.properties,_h,function(ty){ty&&(ty.Tk(_u),g.push(ty)),_i()}),_d||(_t=e.qa.get(_a),_t||(_t=new lh(_o),_t.ka(_u),e.qa.add(_a,_t,1)),g.push(_t),_r--)):_f===nk.PROVIDER&&(_d=!0,_u.Fk(_o,!1).then(function(ty){ty&&(!(ty instanceof rh)||An(this,o,h,ty))&&g.push(ty),_i()},function(){_i()},e))}}_f&&(_d||_r!==0)||_(g)}function zn(e,o,h,d,g,_,$){var j;for(e=e.Pa(o,h),o=$.length;o--&&(!(j=_.getMapObjectById($[o].id))||0<=g.indexOf(j)||!j.ga().gd(e)||(g.push(j),!d)););}function An(e,o,h,d){var g=d.xb(),_=g.c,$,j=!_;if(_)if(g=g.kd(),o+=g.x,h+=g.y,g=d.ga(),C(g,Vi))for(d=g.la,$=d.length;$--&&!j;)g=e.Da(d[$]),j=_.Of(o-g.x,h-g.y,0)!==de.NONE;else g=e.Da(g),j=_.Of(o-g.x,h-g.y,0)!==de.NONE;return j}T.prototype.Ea=function(e,o,h,d){var g=this,_=[];_=Bn(_,this.l.ja,e*this.oa,o*this.oa,h),h&&_.length?d(_):this.a.a.initialized?bm(this.a,{x:e,y:o},{radius:3.5,top_most_only:h},function($){yn(g,e,o,h,_,d,!1,$)}):d(_)},T.prototype.getObjectsAt=T.prototype.Ea;function Bn(e,o,h,d,g){for(var _=o.length,$;_--&&!(($=o[_])&&$.Ea&&(e=e.concat($.Ea(h,d,g)),e.length&&g)););return e}T.prototype.aa=z;function vn(e){return e=e.wa[2],{w:e.right-e.left,h:e.bottom-e.top}}T.prototype.T=function(){var e=this.l.ja.length;Kl(this,this.oa),this.R.set(0,0);var o=vn(this),h=o.w,d=o.h;for(this.a.a.handleViewportUpdate();e--;){o=this.l.ja[e].lb;var g=o.yb();g.w===h&&g.h===d||o.cf(h,d)}this.aa=new Wi(h,d),Yl(this.a),this.ha()},T.prototype.getCapabilities=function(){return Ul},T.prototype.getCapabilities=T.prototype.getCapabilities;function Cn(e){e.i&&e.i.sa()||(Xl(e.a)||Lk()-e.ve<e.ab)&&!e.ea?e.Vf||(e.Vf=Jk(e.Kh)):(e.ea&&(e.ce(),Dn(e)),e.C=fn)}p=T.prototype,p.Vf=0,p.ce=function(){this.l.Nc.length=0},p.Kh=function(){this.Vf=0,this.D&&this.D.before();var e=Zl(this.a),o=e.getLookAtData(!1),h=e.getLookAtData(!0);e=this.f.center.clone(),h=h.bounds.K();var d=this.zoom,g=this.R,_=this.xa,$=_.length;for(this.ab=en;$--;){var j=_[$];C(j,qj)&&j.ca()&&j.ca().Ue(h,d)}this.ea=this.a.W(),this.J.$a(o),o=this.l,_=o.ja.length;var _t=!0,_e;for(_e=0;_e<_;_e++){$=o.ja[_e];var _r=o.Nc;$&&(j=$.W(h,e,void 0,d,!1,g,this.Da,this.a.a.getCameraMatrix()),j===wk.ACTIVE&&(this.ab=1/0),j!==wk.DONE||_r[_e]||(Dn(this,$.ob()),_r[_e]=!0),_r[_e]||(_t=!1))}this.ea=_t&&this.ea,this.aa&&(this.f.$a(this.aa),this.aa=z),this.i&&this.i.sa()&&this.me(),this.D&&this.D.after(),Cn(this)};function Dn(e,o){e.dd||setTimeout(A(e.dispatchEvent,e,{type:e.A.Vi,target:o||e}),1)}p.o=function(){var e=this.c.La()[0],o=this.f;Kk(this.Vf),En(this),e&&Ol(this,e,!1),this.l.ja.filter(vc).forEach(function(h){h.F()}),o.element&&o.element.removeChild(this.L),delete this.L,this.C=3,this.a.F(),T.j.o.call(this)},p.ha=function(){this.ve=Lk(),this.C===fn&&(this.ea=!1,this.C=1,Cn(this))};function Fn(e,o,h){Zl(e.a).applyPxOffset([o,h]),qn(e),e.R.set(0,0),Yl(e.a),e.ha()}p.xd=function(e,o,h){e=Pl(this,Pl(this,e)),Gn(this,e,o,h)},T.prototype.zoomAt=T.prototype.xd;function Gn(e,o,h,d){Zl(e.a).setLookAtData({zoom:o},Fc(h)&&Fc(h)?[h,d]:B),qn(e),Yl(e.a),e.ha()}function mn(e){En(e),e.g.sa()&&e.vb(!0),e.m.sa()&&e.wb(!0)}function Hn(e,o){if(o){var h={};h.Te=o.power,h.we=o.ease,h.duration=o.duration,e.u=h}}T.prototype.lc=function(e,o){var h=!!(o||e&(Nl.HEADING|Nl.TILT));mn(this),Hn(this,o),this.m.start(e,h),Zl(this.a).setPanning(!0)},T.prototype.startInteraction=T.prototype.lc,T.prototype.cc=function(e,o,h,d,g){var _=this.m,$=!1;if(_.sa()){var j=Zl(this.a),_t=j.getLookAtData(),_e=this.f.center;_e=[_e.x,_e.y],o=_.store(e,o,h,d,g),h=_.Bf(),e=_.Nd(),g=this.m.Cf(),d=this.m.bh(),_.b&&(_.Ac(Nl.TILT)&&(j.setLookAtData({tilt:Rl(this,_t.tilt+e.y/this.f.height*-180)},_e),$=!0),o&&g!==1&&_.Ac(Nl.ZOOM)&&($=_.Bf(),g=Ed(Gd(2,this.zoom)*g)/Od,Gn(this,Pl(this,g),$.x,$.y),$=!0),_.Ac(Nl.COORD)&&0<nm(e)&&(Fn(this,-e.x,-e.y),$=!0),_.Ac(Nl.HEADING)&&(o?j.setLookAtData({heading:_t.heading+Sl(this,d)},[h.x,h.y]):e.x&&j.setLookAtData({heading:Sl(this,_t.heading+e.x/this.f.width*360)},_e),$=!0),$&&(Yl(this.a),this.ha()))}},T.prototype.interaction=T.prototype.cc,T.prototype.wb=function(e){var o=this;if(this.m.sa()&&!e){if(this.u){e=this.m.zb();var h=this.m.rc(),d=this.u.duration,g=(this.u.Te||1)*e,_=new Rm(-g/(0<d?d:1),g);!E(h.x)&&!E(h.y)&&0<g&&o.m.Ac(Nl.COORD)&&sn(this,function($){g=_.De($*d),E(g)||Fn(o,Ad(-h.x*g),Ad(-h.y*g))},d,void 0,this.u.we)}delete this.u,this.m.clear()}Zl(this.a).setPanning(!1),this.ha()},T.prototype.endInteraction=T.prototype.wb,T.prototype.kc=function(e,o,h){mn(this),this.g.start(o,h),Hn(this,e),Zl(this.a).setPanning(!0)},T.prototype.startControl=T.prototype.kc,T.prototype.control=function(e,o,h,d,g,_){for(var $=0,j;$<arguments.length;$++)if(j=+arguments[$],j!==j)throw new D(this.control,$,j);this.g.sa()&&this.g.set(e,o,h,d,g,_)},T.prototype.control=T.prototype.control,T.prototype.vb=function(e,o){var h=this,d;if(this.g.sa()){En(this);var g=Lk(),_=g-this.Ed;if(1<=_){var $=zm(this.g);In(this,$,_)}if(!this.u||e||o)typeof o=="function"&&(e=Zl(this.a),e=e.getLookAtData(),o(e),Jn(this,e));else{o=this.g.zb();var j=this.g.rc(),_t=this.u.duration,_e=(this.u.Te||1)*o,_r=new Rm(-_e/(0<_t?_t:1),_e);!E(j.a)&&!E(j.b)&&0<_e&&sn(this,function(_n,_i,_o,_a){g&&(_o=_a-g,g=0),_e=_r.De(_n*_t)*_o,E(_e)||((d=j.c*_e)&&Gn(h,Pl(h,h.zoom+d),h.g.a,h.g.b),Fn(h,Ad(j.a*_e),Ad(j.b*_e)))},_t,void 0,this.u.we)}this.g.reset(),Zl(this.a).setPanning(!1),this.ha()}},T.prototype.endControl=T.prototype.vb;function Jn(e,o){var h=xn(e,wn(e,o.position)),d=h.y;h=h.x;var g=o.zoom,_=xn(e,wn(e,e.ta));o=_.y;var $=_.x;_=e.zoom;var j=e.g.zb(),_t=e.g.a,_e=e.g.b,_r=0;if(h=gn(e,$,h),h-=$,d-=o,_=g-_,o=Fd(h*h+d*d+_*_),j!==0&&o!==0){var _n=h/o,_i=d/o,_o=_/o,_a=j*j/(2*o);sn(e,function(_u,_f){var _h;_u!==1?(_u=j*_f-_a*_f*_f/2,_f=_u-_r,(_h=_o*_f)&&(_h=Pl(e,e.zoom+_h),Gn(e,_h,_t,_e)),Fn(e,Ad(_n*_f),Ad(_i*_f)),_r=_u):(Gn(e,Pl(e,g),_t,_e),e.ha())},2*o/j)}}T.prototype.sb=function(e){var o=this,h=e.b;this.R.set(0,0),h.a||h.b||h.c||h.f||h.g||h.i?(this.Ed=Lk(),sn(this,function(d,g,_,$){o.Ed=$,In(o,h,_)},Wd),this.ha()):En(this)};function In(e,o,h){h=h||0;var d=e.g,g=Zl(e.a),_=g.getLookAtData();o.c&&Gn(e,Pl(e,_.zoom+o.c*h),d.a,d.b),g.setLookAtData({heading:Sl(e,_.heading+o.g*h),tilt:Rl(e,_.tilt+o.f*h)}),qn(e),Fn(e,o.a*h,o.b*h)}function sn(e,o,h,d,g){e.i&&e.i.sa()&&e.i.stop(!0),e.i=new Fm(e,o,h,d,g),e.i.start()}function En(e){e.i&&e.i.sa()&&e.i.stop(!0)}T.prototype.Wg=function(){},T.prototype.enter=T.prototype.Wg,T.prototype.Xg=function(e){Ml(this.L,e)},T.prototype.exit=T.prototype.Xg,T.prototype.capture=function(e,o,h,d){var g=this;return cm(g.a).then(function(_){var $=g.L.ownerDocument.createElement("canvas"),j=g.oa,_t=$.getContext("2d"),_e=g.a.Xa()/j,_r=(h-e)*j;return j*=d-o,$.width=_r,$.height=j,_t.drawImage(_,e*_e,o*_e,_r*_e,j*_e,0,0,_r,j),$})},T.prototype.Il=function(e){return Zl(this.a).geoToMeters(e)},T.prototype.geoToMeters=T.prototype.Il,T.prototype.Vn=function(e){return Zl(this.a).metersToGeo(e)},T.prototype.metersToGeo=T.prototype.Vn;var en=5e3;function U(e,o,h){var d={};if(!(e instanceof HTMLElement))throw new D(U,0);if(U.j.constructor.call(this),this.i=Kn(h,U),this.c=h=new Ll,this.D=!1,h.addEventListener(h.A.le,this.R,!1,this),!C(e,Element))throw new D(U,0,e);h=this.S=e.ownerDocument.createElement("div");var g=h.style;if(g.position="relative",g.height=h.style.width="100%",g.overflow="hidden",g.webkitTapHighlightColor="transparent",g.webkitTapHighlightColor!=="transparent"&&(g.webkitTapHighlightColor="rgba(0,0,0,0)"),e.appendChild(h),this.b=new xk(this.S,this.i),this.b.addEventListener(this.b.A.le,this.R,!1,this),e=this.a=new sj(this.i.layers),e.addEventListener(e.A.ke,this.P,!1,this),e.addEventListener(e.A.he,this.P,!1,this),e.addEventListener(e.A.je,this.P,!1,this),!this.l&&Ln(this),this.g=null,this.a.add(o,0),this.f=this.u(this.i.engineType!=null?this.i.engineType:jk,this.i),this.J=A(this.J,this),o=this.i.imprint,o!==B&&typeof o!="object")throw new D(U,1,"imprint");Mn&&(o||(o={}),o.mark=o.mark||"GS (2022) 5659"),this.s=o===null?o:new Bj(this,o),o=this.i.autoColor,this.L=o===B||!!o,Nn(this),(o=this.i.zoom)&&(d.zoom=o),(o=this.i.bounds)&&(d.bounds=o),(o=this.i.center)&&(d.position=o),this.c.Wb(d)}u(U,F),t("H.Map",U),U.prototype.draggable=!1;function Kn(e,o){if(e){var h=e.pixelRatio;if(h===B)e.pixelRatio=Ue();else if(!(0<h))throw new D(o,0,"pixelRatio: "+h)}else e={},e.pixelRatio=Ue();return e.renderBaseBackground||(e.renderBaseBackground={lower:3,higher:2}),e}U.prototype.o=function(){this.L=!1,this.s&&this.s.F(),this.f.dispose(),this.c.F(),this.b.F(),this.l.F(),this.m.F(),this.a.F();var e=this.S;e.parentNode.removeChild(e),delete this.S,F.prototype.o.call(this)},U.prototype.N=function(){return this.S},U.prototype.getElement=U.prototype.N,U.prototype.Xa=function(){return this.i.pixelRatio},U.prototype.getPixelRatio=U.prototype.Xa;function Nn(e){e.s&&e.L&&e.s.vi({invert:e.g&&e.g.yl})}U.prototype.P=function(e){var o=e.added,h=e.removed;o&&o.ca()&&o.ca().ka(this),h&&h.ca()&&h.ca().ka(null),h===this.l&&(delete this.l,delete this.m),h===this.g&&(this.g=null),e.idx===0&&(this.dispatchEvent(new cj(this.A.lf,this.g=e.type!==this.a.A.je?o:0<this.a.a.length?this.a.get(0):z,e.type!==this.a.A.he?h:1<this.a.a.length?this.a.get(1):z)),Nn(this))},U.prototype.R=function(e){e.modifiers&&(this.D||(On(this,"start"),this.D=!0),On(this,"",e),this.T&&x.clearTimeout(this.T),this.T=x.setTimeout(this.J,333))};function On(e,o,h){e.dispatchEvent(h?new dj(e.A.Qi,h.newValue,h.oldValue,h.modifiers):e.A.Qi+o)}U.prototype.J=function(){On(this,"end"),this.D=!1},U.prototype.tg=function(e,o){return this.f.getCapabilities().lookAt&&this.c.Wb({position:e},!!o),this},U.prototype.setCenter=U.prototype.tg,U.prototype.bb=function(){var e=this.c.jb();return e?e.position:z},U.prototype.getCenter=U.prototype.bb,U.prototype.df=function(e,o){return this.c.df(e,!!o),this},U.prototype.setZoom=U.prototype.df,U.prototype.pb=function(){return this.c.pb()},U.prototype.getZoom=U.prototype.pb,U.prototype.xd=function(e,o,h){this.f.zoomAt(e,o,h)},U.prototype.zoomAt=U.prototype.xd,U.prototype.hn=function(){return this.b},U.prototype.getViewPort=U.prototype.hn,U.prototype.gn=function(){return this.c},U.prototype.getViewModel=U.prototype.gn,U.prototype.wm=function(){return this.a},U.prototype.getLayers=U.prototype.wm,U.prototype.qm=function(){return this.s},U.prototype.getImprint=U.prototype.qm,U.prototype.capture=function(e,o,h,d,g,_){function $(_d,ty){_i?_d.cancel():(_u.save(),ty.capture(_a,_r,function(ey){_u.restore(),_d.done(ey)},function(ey){_d.done(null,ey),j(null)}))}function j(_d){_i||(_i=!0,e(_d))}var _t=this.f,_e=_t.getCapabilities(),_r=this.i.pixelRatio,_n=this.b,_i=!1,_o=this,_a,_u;if(!Da(e))throw new D(this.capture,0,e);h=h||0,d=d||0,g=g||_n.width,_=_||_n.height;var _f=zd(0,yd(h,g)),_h=zd(0,yd(d,_));h=yd(_n.width,zd(h,g)),d=yd(_n.height,zd(d,_)),_e.capture?_t.capture(_f,_h,h,d).then(function(_d){var ty=_o.s,ey=o||[];_a=_d,_u=_a.getContext("2d"),_a.style.width=_a.width/_r+"px",_a.style.height=_a.height/_r+"px";var sy=new Mk(10,$);ey=ey.concat(ty).filter(function(ny){return Da(ny&&ny.capture)}),ey.length?(_d=ey.pop(),ey.forEach(function(ny){sy.push(ny,ld)}),sy.push(_d,A(j,_o,_a)),Fk(sy)):j(_a)},function(){j(z)}):e(null)},U.prototype.capture=U.prototype.capture,U.prototype.cm=function(){return this.f},U.prototype.getEngine=U.prototype.cm,U.prototype.u=function(e,o){if(o=o?Kn(o,this.u):this.i,Nn(this),e===kk.P2D)return new x.H.map.render.p2d.RenderEngine(this.b,this.c,this.a,o);if(e===kk.WEBGL)return new T(this.b,this.c,this.a,o);if(e===kk.HARP)return new x.H.map.render.harp.RenderEngine(this.b,this.c,this.a,o);throw new D(this.u,0,e)},U.prototype.gf=function(e,o,h,d,g){if(o=vc(o)?C(o,K,this.gf,1,o)&&o:this.c.jb().bounds.K(),g=g||this.g,!C(g,pl))throw new D(this.gf,4);var _=g.ca(),$=this.Xa(),j=g.tileSize;if(2<=$&&256<j&&_ instanceof Ek&&(j/=2),$=this.pb(),j=Math.log2(j)-8,h=vc(h)?+h:$,d=vc(d)?+d:$,!(h<=d))throw new D(this.gf,B,"!(min <= max)");$=_.min;var _t=_.max,_e=this.f.type===kk.WEBGL?Bd:Ad;if(h=ae(_e(h)-j,$,_t),d=ae(_e(d)-j,$,_t),!(_&&C(_,S)&&od()&&_.l()))throw new $c(this.gf,"Storing is not supported");return new Ak(g,_,o,h,d,e)},U.prototype.storeContent=U.prototype.gf;function Pn(e){xj.call(this,e)}u(Pn,xj),Pn.prototype.f=function(){zj(this,2)},Pn.prototype.c=function(){zj(this,4)},U.prototype.xl=function(e){return e=new Pn(e),nd().clear(A(e.f,e),A(e.c,e)),e},U.prototype.clearContent=U.prototype.xl,U.prototype.nf=function(e,o){var h=this.a,d=h.indexOf(e),g=o!==+o;return o=g?h.a.length-1:o,0>d?h.add(e,o):d-o&&(h.hc(d),h.add(e,g?o-1:o)),this},U.prototype.addLayer=U.prototype.nf,U.prototype.ae=function(e){var o=this.a.indexOf(e);return e!==this.g&&e!==this.l&&o!==-1&&this.a.hc(o),this},U.prototype.removeLayer=U.prototype.ae,U.prototype.ud=function(e){return this.g!==e&&(this.a.a.length&&this.a.get(0)!==this.l?this.a.set(0,e):this.a.add(e,0),this.g=e),this},U.prototype.setBaseLayer=U.prototype.ud,U.prototype.Ol=function(){return this.g},U.prototype.getBaseLayer=U.prototype.Ol,U.prototype.Da=function(e){if(!lg(e))throw new D(this.Da,0,e);return(e=this.f.geoToScreen(e))?zf(e):z},U.prototype.geoToScreen=U.prototype.Da,U.prototype.Pa=function(e,o){var h;if(h=+E(e)||2*+E(o))throw new D(this.Pa,h-1,arguments[h-1]);return(h=this.f.screenToGeo(e,o))?ng(h):z},U.prototype.screenToGeo=U.prototype.Pa,U.prototype.qg=function(e,o){return this.f.screenToLookAtData(e,o)},U.prototype.screenToLookAtData=U.prototype.qg,U.prototype.fa=function(e){if(!C(e,M))throw new D(this.fa,0,e);return!this.l&&Ln(this),this.m.bc().fa(e),e},U.prototype.addObject=U.prototype.fa,U.prototype.Ga=function(e){if(!C(e,M))throw new D(this.Ga,0,e);return!this.l&&Ln(this),this.m.bc().Ga(e),e},U.prototype.removeObject=U.prototype.Ga,U.prototype.Ua=function(e){return!this.l&&Ln(this),this.m.bc().Ua(e)},U.prototype.getObjects=U.prototype.Ua,U.prototype.Xb=function(e){var o;Bc(e,this.Xb,0,e),!this.l&&Ln(this);var h=e.length;for(o=0;o<h;o++)this.fa(e[o]);return this},U.prototype.addObjects=U.prototype.Xb,U.prototype.rd=function(e){var o;Bc(e,this.rd,0,e),!this.l&&Ln(this);var h=e.length;for(o=0;o<h;o++)this.Ga(e[o]);return this},U.prototype.removeObjects=U.prototype.rd,U.prototype.Od=function(e,o,h){var d;if(d=+E(e)||2*+E(o))throw new D(this.Od,d-1,arguments[d-1]);this.f.getObjectsAt(e,o,!0,function(g){h(g[0])})},U.prototype.getObjectAt=U.prototype.Od,U.prototype.Ea=function(e,o,h,d){var g;if(g=+E(e)||2*+E(o))throw new D(this.Od,g-1,arguments[g-1]);this.f.getObjectsAt(e,o,!1,h,!!d)},U.prototype.getObjectsAt=U.prototype.Ea,U.prototype.ld=function(e,o,h){h=h||{};var d=h.zoom;h.zoom=vc(d)?d:this.c.pb(),this.m.ld(e,o,h)},U.prototype.getObjectsWithin=U.prototype.ld;function Ln(e){e.m=new N({max:24,engineType:e.i.engineType}),e.l=new tl(e.m,e.i),e.a.add(e.l)}var Qn=Tl.HARP,kk={P2D:Tl.P2D,WEBGL:Tl.WEBGL,HARP:Qn};U.EngineType=kk,U.prototype.A={Wo:"mapviewchangestart",Qi:"mapviewchange",Ri:"mapviewchangeend",lf:"baselayerchange"};function Rn(e,o){Rn.j.constructor.call(this,e,o)}u(Rn,rh),t("H.map.Marker",Rn),Rn.prototype.type=nh.MARKER,Rn.prototype.T=1,Rn.prototype.ra=function(e){if(e!==kh.VISUAL||this.zk===1||this.icon.getState()===1)var o=Rn.j.ra.call(this,e);return o||!1},Rn.prototype.invalidate=Rn.prototype.ra,p=Rn.prototype,p.zk=0,p.Uj=function(e){return C(e,Wj)},p.xh=!1,p.mk=function(){this.ra(kh.VISUAL)},p.Ic=function(e){var o=this.icon;return this.xh&&(o.removeEventListener("statechange",this.mk,!1,this),delete this.xh),o&&(this.zk=o.getState()),Rn.j.Ic.call(this,e),e.getState()===0&&(this.xh=!0,Fe(e,"statechange",this.mk,!1,this)),this},Rn.prototype.setIcon=Rn.prototype.Ic,Rn.prototype.b=function(e){return new Wj(e.svg,e)},Rn.prototype.Y=function(){var e=this.getIcon(),o=e.Fo||0,h=Rn.j.forWorkerMessage.call(this),d=h.properties.icon;return d&&0<o&&Ya(d,{stick_color:e.Eo,stick_height:o}),h},Rn.prototype.forWorkerMessage=Rn.prototype.Y;function sh(e,o,h){var d="anonymous",g=1;this.c=A(this.c,this),M.call(this,h),this.da(e),h&&(e="crossOrigin",e in h&&(d=h[e]),e="opacity",e in h&&(g=h[e])),this.Ok(o,d),this.ic(g)}u(sh,M),t("H.map.Overlay",sh),sh.prototype.type=nh.OVERLAY,sh.prototype.K=function(){return this.a},sh.prototype.getBoundingBox=sh.prototype.K,sh.prototype.de=function(e){return C(e,K,this.de,0,e),this.da(e)},sh.prototype.setBoundingBox=sh.prototype.de,sh.prototype.ga=function(){return this.a},sh.prototype.getGeometry=sh.prototype.ga,sh.prototype.da=function(e){var o=this.a,h=!o;return C(e,K,this.da,0,e),(h||!o.ia(e))&&(this.a=e,h||this.ra(kh.SPATIAL)),this},sh.prototype.setGeometry=sh.prototype.da,sh.prototype.Qc=function(){return this.b.getData()},sh.prototype.getBitmap=sh.prototype.Qc,sh.prototype.Ok=function(e,o){var h=this.b;return h&&h.getState()!==1&&h.cancel(),this.b=new Rj(e,this.c,!0,B,o),this},sh.prototype.setBitmap=sh.prototype.Ok,sh.prototype.c=function(e,o){this.b=o,e===1&&this.ra(kh.VISUAL)},sh.prototype.Tc=function(){return this.f},sh.prototype.getOpacity=sh.prototype.Tc,sh.prototype.ic=function(e){var o=this.f,h=2>o;if(0<=e&&1>=e)e!==o&&(this.f=e,h&&this.ra(kh.VISUAL));else throw new D(this.ic,0);return this},sh.prototype.setOpacity=sh.prototype.ic,sh.prototype.Y=function(){var e=sh.j.Y.call(this);return e.geometry=Ci(this.a).Y(),e.properties.overlay=!0,e},sh.prototype.forWorkerMessage=sh.prototype.Y;function Sn(e,o){Sn.j.constructor.call(this,e,o)}u(Sn,pl),t("H.map.layer.MarkerTileLayer",Sn);var Tn={markers:[],total:0,requested:0};function Un(e,o,h,d,g){var _=Bd(h);e.pixelProjection.Oa(_),o=e.Sd(e.Ae(o),_),h=e.Ke(o,o.left>o.right,~~h,d,g),e=h.tiles,h=h.total,d=e.length,g=[];var $;for($=0;$<d;$++)for(o=e[$],_=o.data.length;_--;)g.push(o.data[_]);return{markers:g,total:e.length,requested:h}}Sn.prototype.Ec=function(e,o,h,d){return this.ma.providesDomMarkers()?Tn:Un(this,e,o,h,d)},Sn.prototype.requestMarkers=Sn.prototype.Ec,Sn.prototype.Dc=function(e,o,h,d){return this.ma.providesDomMarkers()?Un(this,e,o,h,d):Tn},Sn.prototype.requestDomMarkers=Sn.prototype.Dc;function Vn(e,o,h){var d,g=6;if(o){for(d=' expected close to: "'+o;g--;)o=e.a.next(),o!==-1&&(d+=String.fromCharCode(o));d+='"'}throw new D(Wn,0,"- Malformed WKT: "+(d?h+d:"unexpected end of stream"))}function Xn(e,o){var h=e.next();o=o?")":"(",h!==o&&Vn(e,h,'"'+o+'"')}function Yn(e){return Zn(e)===","?(e.next(),!0):!1}function $n(e,o,h,d,g){var _,$,j=2+o+h;for($=1;$<=j;$++)(h=e.next())?(_=+h)!==_?Vn(e,h,"number"):$===1?d[g+1]=_:$===2?d[g]=_:$===3&&(d[g+2]=_):Vn(e,h);o||(d[g+2]=0)}var ao=[];function bo(e,o,h,d){return d||Xn(e,0),$n(e,o,h,ao,0),d||Xn(e,1),new kg(ao[0],ao[1],o?ao[2]:B)}function co(e,o,h){var d=[];Xn(e,0);do $n(e,o,h,d,d.length);while(Yn(e));return Xn(e,1),new L(d)}function eo(e,o,h){Xn(e,0);var d=co(e,o,h);if(Yn(e)){var g=[];do g.push(co(e,o,h));while(Yn(e))}return Xn(e,1),new O(d,g)}var fo=[],go=[eo],ho=[bo],io={POINT:ho,LINESTRING:[co],POLYGON:go,MULTIPOINT:[bo,Vi],MULTILINESTRING:[co,ih],MULTIPOLYGON:[eo,Ji],GEOMETRY:fo,GEOMETRYCOLLECTION:fo,CIRCULARSTRING:fo,COMPOUNDCURVE:fo,CURVEPOLYGON:fo,MULTICURVE:fo,MULTISURFACE:fo,CURVE:fo,SURFACE:fo,POLYHEDRALSURFACE:fo,TIN:fo,TRIANGLE:fo},jo={Z:1,M:2,ZM:3};function Wn(e){e=new ko(e);var o,h=e.next();if((o=io[h.toUpperCase()])||Vn(e,h,"type name"),o!==fo){h=Zn(e),h=jo[h.toUpperCase()];var d=h&1,g=h>>1;if(d|g&&e.next(),h=Zn(e),h==="EMPTY")if(e.next(),d=o[1])var _=new d([]);else o!==ho&&(_=new L([]),o===go&&(_=new O(_)));else if(h==="("){if(_=o[0],o=o[1],o){var $=[];if(Xn(e,0),_===bo){var j=Zn(e)!=="(";do $.push(_(e,d,g,j));while(Yn(e))}else do $.push(_(e,d,g));while(Yn(e));Xn(e,1),d=new o($)}else d=_(e,d,g);_=d}else Vn(e,h,'"Z", "M", "ZM", "(" or "EMPTY"');e.next()&&Vn(e,h,"end of stream")}return _||z}function ko(e){this.a=e}function Zn(e){var o=e.b;if(o===B){for(o=e.a;o.Pb()===lo;)o.next();if(mo[o.Pb()])o=o.next(),o=o===no?"":String.fromCharCode(o);else{o.ge();do o.next();while(!mo[o.Pb()]);o=String.fromCharCode.apply(null,o.Gd())}e.b=o}return o}ko.prototype.next=function(){var e=Zn(this);return e!==""&&delete this.b,e};var lo=32,no=-1,oo={$o:lo,Uo:40,Zo:41,Ro:44,So:no},mo=Object.keys(oo).reduce(function(e,o){return e[oo[o]]=!0,e},oc());function po(){}t("H.util.ICharStream",po),po.prototype.next=function(){},po.prototype.ge=function(){},po.prototype.Gd=function(){},po.prototype.Pb=function(){};function qo(e){this.c=String(e),this.f=0,this.a=[],this.b=!1}t("H.util.CharStream",qo),qo.prototype.next=function(){var e=this.c.charCodeAt(this.f++);return e=isNaN(e)?-1:e,this.b&&this.a.push(e),e},qo.prototype.ge=function(){this.b=!0,this.a=[]},qo.prototype.Gd=function(){var e=this.a.slice();return this.b=!1,this.a=[],e},qo.prototype.Pb=function(){var e=this.c.charCodeAt(this.f);return isNaN(e)?-1:e},t("H.util.wkt.toGeometry",function(e){return Wn(new qo(e))});function ro(e,o){ro.j.constructor.call(this,Ki,o),this.de(e)}u(ro,uh),t("H.map.Rect",ro),ro.prototype.de=function(e){if(!C(e,K))throw new D(this.de,0,e);e.ia(this.aa)||(this.aa=this.D=e,this.a!==z&&ro.j.da.call(this,Ci(e)))},ro.prototype.setBoundingBox=ro.prototype.de,ro.prototype.K=function(){return this.D},ro.prototype.getBoundingBox=ro.prototype.K,ro.prototype.da=function(){return this},ro.prototype.setGeometry=ro.prototype.da,ro.prototype.ga=function(){return this.a===Ki&&ro.j.da.call(this,Ci(this.aa)),this.a},ro.prototype.getGeometry=ro.prototype.ga;function so(){return Hf("H-core","1.49.1","74e5afb",{region:"row"})}t("H.buildInfo",so);var Mn=so().region==="cn",jk=kk[Mn?"HARP":"WEBGL"],to,uo="maps".concat("js-"),vo,wo,xo,yo,zo;if(vo=x.document.querySelector('script[src*="'+uo+'"]'),!vo){for(wo=x.document.getElementsByTagName("script"),yo=new RegExp("^.*"+uo),zo=0,xo=wo.length;zo<xo;zo++)if(yo.test(wo[zo].src)){vo=wo[zo];break}}to=vo?vo.src.replace(/\/[^\/]*$/,"/"):"",t("H.getScriptPath",function(){return to});function Ao(){var e=decodeURIComponent(to);if(e){e=e[e.length-1]==="/"?e.substring(0,e.length-1):e;var o=x.document,h="";o?(o=o.createElement("a"),o.href=e,h=o.href):/[\w]+:\/\//.test(e)&&(h=e),e=new URL(h),e.pathname+=e.pathname[e.pathname.length-1]==="/"?"styles":"/styles",e=e.toString()}else e="https://js.api.here.com/v3/3.1.49.1/styles";return e}t("H.getStylePath",Ao);function Bo(e){var o=e.ownerDocument;o=o.documentElement||o.body.parentNode||o.body;try{var h=e.getBoundingClientRect()}catch{h={top:0,right:0,bottom:0,left:0,height:0,width:0}}return{x:h.left+(typeof window.pageXOffset=="number"?window.pageXOffset:o.scrollLeft),y:h.top+(typeof window.pageYOffset=="number"?window.pageYOffset:o.scrollTop)}}var Co=(function(){return this}).apply(null);function Do(e,o,h,d,g,_){if(isNaN(e))throw Error("x needs to be a number");if(isNaN(o))throw Error("y needs to be a number");if(isNaN(h))throw Error("pointer must have an id");this.viewportX=e,this.viewportY=o,this.target=null,this.id=h,this.type=d,this.dragTarget=null,this.button=vc(g)?g:-1,this.buttons=vc(_)?_:0,this.a=this.button}t("H.mapevents.Pointer",Do);function Eo(e,o,h){if(isNaN(o))throw Error("x needs to be a number");if(isNaN(h))throw Error("y needs to be a number");e.viewportX=o,e.viewportY=h}Do.prototype.tm=function(){return this.a},Do.prototype.getLastChangedButton=Do.prototype.tm;function Fo(e,o){e.a=o,e.buttons|=Go[+o]||0}function Ho(e,o){e.a=o,e.buttons&=~(Go[+o]||0)}var Go=[1,4,2],Io={NONE:-1,LEFT:0,MIDDLE:1,RIGHT:2};Do.Button=Io;function Jo(e,o,h,d,g,_,$){Jo.j.constructor.call(this,e),this.pointers=o,this.changedPointers=h,this.targetPointers=d,this.currentPointer=g,this.originalEvent=$,this.target=_}u(Jo,ud),t("H.mapevents.Event",Jo);function Ko(e){this.a=e instanceof Array?e.slice(0):[]}p=Ko.prototype,p.clear=function(){this.a.splice(0,this.a.length)},p.length=function(){return this.a.length},p.indexOf=function(e){for(var o=this.a.length;o--;)if(this.a[o].id===e)return o;return-1};function Lo(e,o){return o=e.indexOf(o),o!==-1?e.a[o]:null}p.remove=function(e){return e=this.indexOf(e),e!==-1?this.a.splice(e,1)[0]:null};function Mo(e,o){for(var h=e.a.length,d=[];h--;)e.a[h].type!==o&&d.push(e.a[h]);e.a=d}function No(e,o){for(var h=e.a.length;h--;)if(e.a[h].dragTarget===o)return!0;return!1}p.push=function(e){if(e instanceof Do)return this.a.push(e);throw Error("list needs a pointer")},p.La=function(){return this.a},p.clone=function(){return new Ko(this.a)};function Oo(e,o,h){if(h=h||{},!(e instanceof U))throw Error("events: map instance required");if(!(o instanceof Array))throw Error("events: map array required");qd.call(this),this.Tg=h.Tg||300,this.gj=h.gj||50,this.Zk=h.Zk||50,this.$k=h.$k||500,this.Ch=h.Ch||900,this.Bh=h.Bh||8,this.map=e,this.m=this.map.b,this.f=this.m.element,this.D=o,this.a=new Ko,this.b=new Ko,this.l={},this.c=null,this.u=!0,this.U={},this.g={},this.s=null,this.te=A(this.te,this),this.P={pointerdown:this.Bl,pointermove:this.Cl,pointerup:this.Dl,pointercancel:this.Al},Po(this)}u(Oo,qd);function Po(e,o){var h,d=e.D.length;for(h=0;h<d;h++){var g=e.D[h],_=g.listener;typeof _=="function"&&(o?(g.target||e.f).removeEventListener(g.Sa,_):(g.target||e.f).addEventListener(g.Sa,_))}}function Qo(e,o,h){var d;if(typeof e.P[o]=="function"){o!=="pointermove"&&(e.u=!0);var g=0;for(d=e.b.length();g<d;g++){var _=e.b.a[g]||null;e.f.contains(h.composedPath()[0])?Ro(e,_,e.nj.bind(e,h,o,_)):e.nj(h,o,_,null)}}e.b.clear()}p=Oo.prototype,p.nj=function(e,o,h,d){So(h.id,this.U),this.P[o].call(this,h,d,e)};function Ro(e,o,h){if(e.c===o)h(o.target);else{var d=e.m,g=o.viewportX;if(o=o.viewportY,0>g||0>o||g>=d.width||o>=d.height)h(z);else{var _=e.map;_.Od(g,o,function($){h($||_)})}}}p.Dl=function(e,o,h){var d=e.id;e.target=o,To(this,e,h),Uo(this,o,"pointerup",h,e),e.type!=="mouse"&&Uo(this,o,"pointerleave",h,e),o=this.l[e.id];var g={x:e.viewportX,y:e.viewportY},_=h.timeStamp,$=e.target,j=this.s;o&&o.target===$&&o.Se.Wa(g)<this.Zk&&_-o.Hi<this.$k?(Uo(this,$,"tap",h,e),j&&j.target===$&&_-j.Hi<this.Tg?j.Se.Wa({x:e.viewportX,y:e.viewportY})<this.gj&&(Uo(this,$,"dbltap",h,e),this.s=null):this.s={target:$,Se:new J(e.viewportX,e.viewportY),Hi:h.timeStamp}):this.s=null,this.l={},So(d,this.g)};function To(e,o,h){o===e.c&&(Uo(e,o.dragTarget,"dragend",h,o),e.c=null,So(o.id,e.U)),o.dragTarget=null}p.te=function(e,o){var h=this;Uo(this,e.dragTarget,"drag",o,e),So(e.id,this.U),this.U[e.id]=setTimeout(function(){h.te(e,o)},150)};function So(e,o){o[e]&&(o[e].timeout?clearTimeout(o[e].timeout):clearTimeout(o[e]),delete o[e])}function Vo(e,o,h){var d=o.target,g=new J(o.viewportX,o.viewportY),_=o.id;So(_,e.g);var $=setTimeout(function(){d&&d===o.target&&g.Wa({x:o.viewportX,y:o.viewportY})<e.Bh&&(Uo(e,d,"longpress",h,o),delete e.l[o.id])},e.Ch);e.g[_]={timeout:$,Se:g}}p.Cl=function(e,o,h){var d=e.dragTarget,g=e.id,_=e.target;e.target=o,_!==o&&(Uo(this,_,"pointerleave",h,e),Uo(this,o,"pointerenter",h,e)),d?this.c?(this.te(e,h),this.g[g]&&this.g[g].Se.Wa({x:e.viewportX,y:e.viewportY})>this.Bh&&So(g,this.g)):this.u?this.u=!1:(this.c=e,Uo(this,d,"dragstart",h,e),this.te(e,h),delete this.l[g],this.u=!0):(!this.c||this.c&&this.c.dragTarget!==o&&this.c.dragTarget!==this.map)&&Uo(this,o,"pointermove",h,e)},p.Bl=function(e,o,h){var d=!(/^(?:mouse|pen)$/.test(e.type)&&h.button!==0);if(o){e.target=o,this.l[e.id]={Se:new J(e.viewportX,e.viewportY),target:e.target,Hi:h.timeStamp},e.type!=="mouse"&&Uo(this,o,"pointerenter",h,e);var g=Uo(this,o,"pointerdown",h,e);!this.c&&d&&(o.draggable&&!No(this.a,o)?e.dragTarget=o:!this.map.draggable||g.defaultPrevented||No(this.a,this.map)||(e.dragTarget=this.map)),Vo(this,e,h)}},p.Al=function(e,o,h){var d=e.id;e.target=null,o?(Uo(this,o,"pointerleave",h,e),Uo(this,o,"pointercancel",h,e)):Uo(this,this.map,"pointercancel",h,e),To(this,e,h),this.l={},So(d,this.g)};function Uo(e,o,h,d,g){if(o&&typeof o.dispatchEvent=="function"){var _=Jo,$=e.a.La(),j=e.b.La();e=e.a;var _t,_e=e.a.length,_r=[];for(_t=0;_t<_e;_t++)e.a[_t].target===o&&_r.push(e.a[_t]);_=new _(h,$,j,_r,g,o,d),g.button=/^(?:longpress|(?:dbl)?tap|pointer(?:down|up))$/.test(h)?g.a:Io.NONE,o.dispatchEvent(_)}return _}p.o=function(){Po(this,!0),this.a.clear(),this.b.clear();var e=this.U,o;for(o in e)So(o,e);e=this.g;for(var h in e)So(h,e);delete this.f,delete this.D,delete this.a,delete this.b,delete this.map,this.s=null,delete this.l,this.c=null,qd.prototype.o.call(this)};function Wo(e){this.i=A(this.i,this),Oo.call(this,e,[{Sa:"touchstart",listener:this.i},{Sa:"touchmove",listener:this.i},{Sa:"touchend",listener:this.i},{Sa:"touchcancel",listener:this.i}]),this.L={touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",touchcancel:"pointercancel"},this.J=(e=(e=e.s)?e.N():null)?Array.prototype.slice.call(e.querySelectorAll("a"),0):[]}u(Wo,Oo),Wo.prototype.i=function(e){var o=e.touches,h=this.a.length(),d;if(e.type==="touchstart"&&h>=o.length){for(h=this.a.clone(),d=o.length;d--;)h.remove(o[d].identifier);for(d=h.length();d--;)this.a.remove((h.a[d]||null).id);this.b=h,Qo(this,"pointercancel",e),this.b.clear()}if(this.L[e.type]){o=Bo(this.m.element),h=e.type,d=e.changedTouches;var g=d.length,_;for(this.b.clear(),_=0;_<g;_++){var $=d[_],j=Lo(this.a,$.identifier),_t=$.pageX-o.x,_e=$.pageY-o.y;if(j)if(h==="touchmove"){$=Math.abs(j.viewportX-_t);var _r=Math.abs(j.viewportY-_e);(1<$||1<_r||$===1&&_r===1)&&(Eo(j,_t,_e),this.b.push(j))}else h==="touchend"&&(this.a.remove(j.id),this.b.push(j),Ho(j,Io.LEFT));else j=new Do(_t,_e,$.identifier,"touch",Io.LEFT,1),this.a.push(j),this.b.push(j)}Qo(this,this.L[e.type],e),this.J.indexOf(e.target)===-1&&e.preventDefault()}},Wo.prototype.o=function(){this.J=null,Oo.prototype.o.call(this)};function Xo(e){var o=Yo(this);(window.PointerEvent||window.MSPointerEvent)&&o.push({Sa:"MSHoldVisual",listener:"prevent"}),Oo.call(this,e,o)}u(Xo,Oo);function Yo(e){var o=!!window.PointerEvent,h,d,g=[];return e.i=A(e.i,e),"MSPointerDown MSPointerMove MSPointerUp MSPointerCancel MSPointerOut MSPointerOver".split(" ").forEach(function(_){h=_.toLowerCase().replace(/ms/g,""),d=o?h:_,g.push({Sa:d,listener:e.i,target:/^pointer(up|move)$/.test(h)?window:null})}),g}var Zo={2:"touch",3:"pen",4:"mouse"};Xo.prototype.i=function(e){var o=window.PointerEvent?e.type:e.type.toLowerCase().replace(/ms/g,""),h=Bo(this.f),d=Lo(this.a,e.pointerId),g=e.pageX-h.x;h=e.pageY-h.y;var _=Zo[e.pointerType]||e.pointerType;if(cd&&x.getComputedStyle(this.m.element).direction==="rtl"&&(g-=(x.devicePixelRatio-1)*this.m.width),!(d||/^pointer(up|out|cancel)$/.test(o)||_==="touch"&&o!=="pointerdown")){d={x:g,y:h};var $=e.pointerType;typeof $=="number"&&($=Zo[$]),d=new Do(d.x,d.y,e.pointerId,$,e.button,e.buttons),this.a.push(d)}d&&(/^pointer(up|cancel)$/.test(o)?(_==="touch"&&this.a.remove(d.id),Ho(d,e.button)):o==="pointerdown"&&(e.pointerType==="touch"&&(Mo(this.a,"mouse"),Mo(this.a,"pen")),Fo(d,e.button)),this.b.push(d),o!=="pointermove"?(Eo(d,g,h),Qo(this,/^pointer(over|out)$/.test(o)?"pointermove":o,e)):(d.viewportX!==g||d.viewportY!==h)&&(Eo(d,g,h),Qo(this,o,e))),this.b.clear()};function $o(e,o,h,d){$o.j.constructor.call(this,"contextmenu"),this.items=[],this.viewportX=e,this.viewportY=o,this.target=h,this.originalEvent=d}u($o,ud),t("H.mapevents.ContextMenuEvent",$o);function ap(e){this.ph=A(this.ph,this),this.rh=A(this.rh,this),this.qh=A(this.qh,this),this.J=!1,this.i=-1,this.L=0,ap.j.constructor.call(this,e,[{Sa:"contextmenu",listener:this.ph},{target:e,Sa:"longpress",listener:this.rh},{target:e,Sa:"dbltap",listener:this.qh}])}u(ap,Oo),p=ap.prototype,p.rh=function(e){var o=e.currentPointer;o.type==="touch"&&e.pointers.length===1&&bp(this,o.viewportX,o.viewportY,e.originalEvent,e.target)},p.qh=function(e){e.currentPointer.type==="touch"&&(this.L=Date.now())},p.ph=function(e){var o=this;this.i===-1?this.i=setTimeout(function(){var h=Bo(o.f),d=e.pageX-h.x;h=e.pageY-h.y,o.i=-1,bp(o,d,h,e)},this.Tg):(clearInterval(this.i),this.i=-1),e.preventDefault()};function bp(e,o,h,d,g){var _=e.map,$=Date.now()-e.L;g?!e.J&&$>e.Ch&&(e.J=!0,g.dispatchEvent(new $o(o,h,g,d)),Fe(_.N(),cp,e.mj,!1,e)):_.Od(o,h,e.Jn.bind(e,o,h,d))}p.Jn=function(e,o,h,d){d=d&&Da(d.dispatchEvent)?d:this.map,bp(this,e,o,h,d)},p.mj=function(){this.J&&(this.J=!1,this.map.dispatchEvent(new ud("contextmenuclose",this.map)))},p.o=function(){var e=this.map.N();clearInterval(this.i),e&&Me(e,cp,this.mj,!1,this),Oo.prototype.o.call(this)};var cp=["mousedown","touchstart","pointerdown","wheel"];function dp(e,o,h,d,g){dp.j.constructor.call(this,"wheel"),this.delta=e,this.viewportX=o,this.viewportY=h,this.target=d,this.originalEvent=g}u(dp,ud),t("H.mapevents.WheelEvent",dp);function ep(e){var o="onwheel"in document;this.T=o,this.L=(o?"d":"wheelD")+"elta",this.i=A(this.i,this),ep.j.constructor.call(this,e,[{Sa:(o?"":"mouse")+"wheel",listener:this.i}]),this.J=this.map.b}u(ep,Oo),ep.prototype.i=function(e){if(!e.kl){var o=Bo(this.f),h=e.pageX-o.x;o=e.pageY-o.y;var d=this.L,g=e[d+(d+"Y"in e?"Y":"")],_;if(cd&&x.getComputedStyle(this.J.element).direction==="rtl"&&(h-=(x.devicePixelRatio-1)*this.J.width),g){var $=Math.abs,j=$(g);g=(!(_=e[d+"X"])||3<=j/$(_))&&(!(_=e[d+"Z"])||3<=j/$(_))?(+(0<g)-+(0>g))*(this.T?1:-1):0}h=new dp(g,h,o,null,e),h.delta&&(e.stopImmediatePropagation(),e.preventDefault(),this.map.Od(h.viewportX,h.viewportY,this.R.bind(this,h)))}},ep.prototype.R=function(e,o){var h=e.target=o||this.map,d,g;setTimeout(function(){h.dispatchEvent(e),e.c||(d=e.originalEvent,g=new x.WheelEvent("wheel",d),g.kl=!0,d.target.dispatchEvent(g))},0)};function fp(e){this.i=A(this.i,this),Oo.call(this,e,[{Sa:"mousedown",listener:this.i},{Sa:"mousemove",listener:this.i,target:window},{Sa:"mouseup",listener:this.i,target:window},{Sa:"mouseover",listener:this.i},{Sa:"mouseout",listener:this.i},{Sa:"dragstart",listener:this.J}])}u(fp,Oo),fp.prototype.i=function(e){var o=e.type,h=Bo(this.f);h={x:e.pageX-h.x,y:e.pageY-h.y};var d;(d=this.a.a[0]||null)||(d=new Do(h.x,h.y,1,"mouse"),this.a.push(d)),this.b.push(d),Eo(d,h.x,h.y),/^mouse(?:move|over|out)$/.test(o)?Qo(this,"pointermove",e):(/^mouse(down|up)$/.test(o)&&(h=e.which-1,Co.RegExp.$1==="up"?Ho(d,h):Fo(d,h)),Qo(this,o.replace("mouse","pointer"),e)),this.b.clear()},fp.prototype.J=function(e){e.preventDefault()};function gp(e){var o=e.b.element.style;if(hp.indexOf(e)!==-1)throw Error("InvalidArgument: map is already in use");this.a=e,hp.push(e),o.msTouchAction=o.touchAction="none",dd||!window.PointerEvent&&!window.MSPointerEvent?(this.c=new Wo(this.a),this.b=new fp(this.a)):this.c=new Xo(this.a),this.g=new ep(this.a),this.f=new ap(this.a),this.a.tb(this.F,this),qd.call(this)}u(gp,qd),t("H.mapevents.MapEvents",gp);var hp=[];Ic(hp),gp.prototype.F=function(){delete this.a,this.c.F(),this.g.F(),this.f.F(),this.b&&this.b.F(),hp.splice(hp.indexOf(this.a),1),qd.prototype.F.call(this)},gp.prototype.dispose=gp.prototype.F,gp.prototype.Nl=function(){return this.a},gp.prototype.getAttachedMap=gp.prototype.Nl;function ip(e,o){o=o===void 0?{}:o;var h;if(ip.j.constructor.call(this),jp.indexOf(e)!==-1)throw new D(ip,0,"events are already used");this.b=h=e.a,this.l=e,jp.push(e),h.draggable=!0,this.i=o.kinetics||{duration:600,ease:em},this.s=o.modifierKey||"Alt",this.enable(o.enabled),this.c=h.b,this.f=this.c.element,this.g=0,h.addEventListener("dragstart",this.Mh,!1,this),h.addEventListener("drag",this.bk,!1,this),h.addEventListener("dragend",this.Lh,!0,this),h.addEventListener("wheel",this.rk,!1,this),h.addEventListener("dbltap",this.lk,!1,this),h.addEventListener("pointermove",this.ck,!1,this),Ee(this.f,"contextmenu",this.ak,!1,this),e.tb(this.F,this)}u(ip,qd),t("H.mapevents.Behavior",ip);var jp=[];Ic(jp),ip.prototype.a=0;var kp={PANNING:1,PINCH_ZOOM:2,WHEEL_ZOOM:4,DBL_TAP_ZOOM:8,FRACTIONAL_ZOOM:16,TILT:32,HEADING:64};ip.Feature=kp;var lp=kp.PANNING,mp=kp.PINCH_ZOOM,np=kp.WHEEL_ZOOM,op=kp.DBL_TAP_ZOOM,pp=kp.FRACTIONAL_ZOOM,qp=kp.TILT,rp=kp.HEADING,sp=lp|mp|np|op|pp|qp|rp;ip.DRAGGING=lp,ip.WHEELZOOM=np,ip.DBLTAPZOOM=op,ip.FRACTIONALZOOM=pp;function tp(e,o){if(e!==+e||e%1||0>e||2147483647<e)throw new D(o,0,"integer in range [0...0x7FFFFFFF] required")}ip.prototype.disable=function(e){var o=this.a;e!==B?(tp(e,this.disable),o^=o&e):o=0,this.c.endInteraction(!0),this.a=o,this.b.draggable=0<(o&(lp|qp|rp|mp))},ip.prototype.disable=ip.prototype.disable,ip.prototype.enable=function(e){var o=this.a;e!==B?(tp(e,this.enable),o|=e&sp):o=sp,this.a=o,this.b.draggable=0<(o&(lp|qp|rp|mp))},ip.prototype.enable=ip.prototype.enable,ip.prototype.isEnabled=function(e){return tp(e,this.isEnabled),e===(this.a&e)},ip.prototype.isEnabled=ip.prototype.isEnabled;function up(e,o,h){var d=o.currentPointer.type==="touch",g=0,_;if(_=!d){_=e.s;var $,j=o.originalEvent;j.getModifierState?$=j.getModifierState(_):$=!!j[_.replace(/^Control$/,"ctrl").toLowerCase()+"Key"],_=$}return _?g|=qp|rp:(g|=lp,d&&(o=o.pointers,o.length===2&&(g|=mp|rp,h?55>Dd(o[0].viewportY-o[1].viewportY)&&(g|=qp):e.uh&Nl.TILT&&(g|=qp)))),g&=e.a,(g&qp?Nl.TILT:0)|(g&rp?Nl.HEADING:0)|(g&mp?Nl.ZOOM:0)|(g&lp?Nl.COORD:0)}function vp(e){var o=e.pointers;return e=o[0],o=o[1],e=[e.viewportX,e.viewportY],o&&e.push(o.viewportX,o.viewportY),e}p=ip.prototype,p.uh=0,p.Mh=function(e){var o=up(this,e,!0);if(this.uh=o){var h=this.c;if(e=vp(e),h.startInteraction(o,this.i),h.interaction.apply(h,e),this.a&np&&!(this.a&pp)&&(o=e[0],h=e[1],this.g)){e=this.b.pb();var d=(0>this.g?Cd:Bd)(e);e!==d&&(this.g=0,wp(this,e,d,o,h))}}},p.bk=function(e){var o=up(this,e,!1);if(o!==this.uh)e.originalEvent.type!=="pointerout"&&e.originalEvent.type!=="pointerover"&&(this.Lh(e),this.Mh(e));else if(o){o=this.c;var h=vp(e);o.interaction.apply(o,h),e.originalEvent.preventDefault()}},p.Lh=function(e){up(this,e,!1)&&this.c.endInteraction(!this.i)};function wp(e,o,h,d,g){var _=+h-+o;if(e=e.b.c,isNaN(+o))throw Error("start zoom needs to be a number");if(isNaN(+h))throw Error("to zoom needs to be a number");_!==0&&(e.startControl(null,d,g),e.control(0,0,6,0,0,0),e.endControl(!0,function($){$.zoom=h}))}p.rk=function(e){if(!e.defaultPrevented&&this.a&np){var o=e.delta,h=this.b.pb(),d=this.b,g=d.f.type;d=this.a&pp?h-o:(0>-o?Cd:Bd)(h)-o,(g===kk.P2D||g===kk.WEBGL||g===kk.HARP)&&(wp(this,h,d,e.viewportX,e.viewportY),this.g=o),e.preventDefault()}},p.ck=function(){},p.lk=function(e){var o=e.currentPointer,h=this.b.pb(),d=e.currentPointer.type,g=this.b.f.type;(g===kk.P2D||g===kk.WEBGL||g===kk.HARP)&&this.a&op&&(e=d==="mouse"?e.originalEvent.button===0?-1:1:0<e.pointers.length?1:-1,e=this.a&pp?h-e:(0>-e?Cd:Bd)(h)-e,wp(this,h,e,o.viewportX,o.viewportY))},p.ak=function(e){return this.a&op?(e.preventDefault(),!1):!0},p.F=function(){var e=this.b;e&&(e.draggable=!1,e.removeEventListener("dragstart",this.Mh,!1,this),e.removeEventListener("drag",this.bk,!1,this),e.removeEventListener("dragend",this.Lh,!0,this),e.removeEventListener("wheel",this.rk,!1,this),e.removeEventListener("dbltap",this.lk,!1,this),e.removeEventListener("pointermove",this.ck,!1,this),delete this.b),this.f&&(this.f.style.msTouchAction="",Me(this.f,"contextmenu",this.ak,!1,this),delete this.f),delete this.c,delete this.i,jp.splice(jp.indexOf(this.l),1),delete this.l,qd.prototype.F.call(this)},ip.prototype.dispose=ip.prototype.F,t("H.mapevents.buildInfo",function(){return Hf("H-mapevents","1.49.1","74e5afb",{region:"row"})}),S.prototype.J=ca(3,function(e){var o=this.getCache(),h=this;if(e!==z){C(e,Rk,S.prototype.J,0);var d=e}else d=yl;d!==o&&o.na(function(g,_,$){return h.ub(g)?(d.add(g,_,$),!0):!1}),this.P=d}),ti.prototype.a=ca(2,function(e){this.f=e,e=this.getState(),e!==Xh.INIT&&e!==Xh.LOADING&&Ai(this)});function xp(e){return e=e.uc("_#-;,:","_#-;,:","_#-;,:"),new RegExp("^"+e.replace(/[.*+?^${}()|[\]\\\/]/g,"\\$&").replace(/_#-;,:/g,"\\d+")+"$")}function yp(e,o){return Ya.apply(null,arguments),e}function zp(e,o){var h=x.console;h&&h.warn&&(e=yc(e)+" is deprecated and will be removed soon. ",o&&(e+=o),h.warn(e))}var Ap=globalThis;tc("monospace serif");function Bp(){}Bp.prototype.pop=function(e){return this[e]||(this[e]=[]),this[e].pop()||document.createElement("canvas")},Bp.prototype.push=function(e,o){this[o]||(this[o]=[]),this[o].push(e)};var Cp=new Bp;t("H.service.util.eval",function(a){return eval(a)});function W(e,o,h,d,g,_){if(e&&o)this.Bi(e),this.af(o),this.wd(h),this.xi(g),this.Lk(_),this.bf(d);else throw new D(W,B,'Parameters "scheme" and "host" must be specified')}t("H.service.Url",W);function Dp(e,o){var h=x.document,d,g="";if(h){if(g=h.createElement("a"),o){var _=(d=h.getElementsByTagName("base")[0])&&d.href,$=h.head,j=d||$.appendChild(h.createElement("base"));j.href=o}g.href=e,g=g.href,o&&(d?d.href=_:$.removeChild(j))}else/[\w]+:\/\//.test(e)&&(g=e);_=/(?:(\w+):\/\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\/[^?#]*)?(\?[^#]+)?(#.*)?/.exec(g),e=_[1],$=_[4],o=_[5],j=_[6],h=_[7],d=_[8],!_[2]&&$&&/@/.test($)&&($=$.split("@")[1]),_=W,j=j&&0<j.length?j.substr(1):"",g={};var _t,_e;if(h)for(_t=/([?&]?([^=&+]+))(=([^&]+))?/g;_e=_t.exec(h);)g[decodeURIComponent(_e[2])]=_e[4]?decodeURIComponent(_e[4]):void 0;return new _(e,$,j,g,isNaN(+o)?void 0:+o,d&&0<d.length?d.substr(1):"")}W.parse=Dp,W.prototype.clone=function(){var e={},o;for(o in this.a)e[o]=this.a[o];return new W(this.i,this.c,this.b,e,this.g,this.f)},W.prototype.clone=W.prototype.clone,W.prototype.Bi=function(e){if(!e||typeof e!="string")throw new D(this.Bi,0,'The "scheme" parameter must be a non-empty string.');return this.i=e,this},W.prototype.setScheme=W.prototype.Bi,W.prototype.Vm=function(){return this.i},W.prototype.getScheme=W.prototype.Vm,W.prototype.af=function(e){if(!e||typeof e!="string"||e.charAt(0)==="-"||e.charAt(0)==="."||e.charAt(e.length-1)===".")throw new D(this.af,0,'The "host" parameter is not a valid host name.');return this.c=e,this},W.prototype.setHost=W.prototype.af,W.prototype.om=function(){return this.c},W.prototype.getHost=W.prototype.om,W.prototype.wd=function(e){return this.b=e||void 0,this},W.prototype.setPath=W.prototype.wd,W.prototype.Hm=function(){return this.b},W.prototype.getPath=W.prototype.Hm,W.prototype.bf=function(e){if(e)if(typeof e=="object")this.a=e;else throw new D(this.bf,0,'Parameter "params" must be an object.');else this.a={};return this},W.prototype.setQuery=W.prototype.bf,W.prototype.Mj=function(){return!Ep(this)},W.prototype.hasQuery=W.prototype.Mj,W.prototype.getQuery=function(){return this.a},W.prototype.getQuery=W.prototype.getQuery,W.prototype.xi=function(e){if(e===void 0)this.g=e;else{var o=ae(+e<<0,0,65535);if(o!=e)throw new D(this.xi,0,'Parameter "port" must be an integer in range [0...65535]');this.g=o}return this},W.prototype.setPort=W.prototype.xi,W.prototype.Mm=function(){return this.g},W.prototype.getPort=W.prototype.Mm,W.prototype.Lk=function(e){return this.f=e||void 0,this},W.prototype.setAnchor=W.prototype.Lk,W.prototype.kd=function(){return this.f},W.prototype.getAnchor=W.prototype.kd,W.prototype.I=function(e){if(typeof e!="object")throw new D(this.I,0,'Parameter "other" must be an object.');var o=this.a,h;for(h in e)e.hasOwnProperty(h)&&typeof e[h]!="function"&&(o[h]=e[h]);return this},W.prototype.mergeQuery=W.prototype.I,W.prototype.Ba=function(e){if(!e||typeof e!="string")throw new D(this.Ba,0,'Parameter "subDomain" must be a non-empty string');return e.substr(e.length-1)==="."&&(e=e.substr(0,e.length-1)),this.af(e+"."+this.c)},W.prototype.addSubDomain=W.prototype.Ba,W.prototype.G=function(e){if(!e||typeof e!="string")throw new D(this.G,0,'Parameter "subPath" must be a non-empty string');return this.wd((this.b?this.b+"/":"")+e)},W.prototype.addSubPath=W.prototype.G,W.prototype.toString=function(){return[this.i+"://",this.c,this.g?":"+this.g:"",this.b||!Ep(this)||this.f?"/":"",this.b?encodeURI(this.b):"",Fp(this),this.f?"#"+encodeURIComponent(this.f):""].join("")},W.prototype.toString=W.prototype.toString;function Gp(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(o){return"%"+o.charCodeAt(0).toString(16)})}function Fp(e){var o=[],h=e.a,d={},g;for(g in h){if(h.hasOwnProperty(g)&&typeof h[g]!="function"){var _=e.a[g];d.yd=Gp(g),C(_,Hp)?_.a.forEach(function($){return function(j){o.push($.yd+"="+Gp(j))}}(d)):C(_,Ip)?o.push(d.yd+"="+_.b.map(function($){return Gp($)}).join(_.a)):o.push(_===void 0?d.yd:d.yd+"="+Gp(_))}d={yd:d.yd}}return 0<o.length?"?"+o.join("&"):""}function Jp(e){var o=Hf("H-service","1.49.1","74e5afb",{region:"row"});return e.a.xnlp="CL_JSMv3."+o.version,e}function Ep(e){var o,h=0;for(o in e.a)if(e.a.hasOwnProperty(o)&&typeof e.a[o]!="function"&&(h++,0<h))break;return!h}function Kp(e,o){if(Bc(e))for(var h=0;h<e.length;h++){var d=e[h];if(!Cc(d)&&!Fc(d)){var g="The Array does not contain only strings and numbers";break}}else g="Not an Array";if(g)throw new D(o,0,e);return e}function Hp(e){this.a=Kp(e,Hp)}W.MultiValueQueryParameter=Hp,Hp.prototype.fn=function(){return this.a},Hp.prototype.getValues=Hp.prototype.fn;function Ip(e,o){if(this.b=Kp(e,Ip),!/^[!\$\(\)\*\+,;]$/.test(o))throw new D(Ip,1,'Invalid delimiter "'+o+'"');this.a=o}W.DelimitedQuerySubValues=Ip;function Lp(e,o){C(e,Mp,Lp,0);var h={};Object.assign(h,o),h.min=h.min||0,h.max=h.max||20,h.tileSize=h.tileSize||512,h.getURL=function(d,g,_){return e.v().clone().G(e.b.og+"/"+(e.b.eg+"/")+(_+"/"+d+"/"+g+"/")+e.b.format).I(e.f).clone().I({size:h.tileSize})},Ek.call(this,h),this.i=e}u(Lp,Ek),t("H.service.rasterTile.Provider",Lp),Lp.prototype.ba=function(e,o){var h=this.i;return Np(h.ba(),h.b.og+"."+h.V(),o,e)},Lp.prototype.getCopyrights=Lp.prototype.ba,Lp.prototype.l=function(){return od()},Lp.prototype.c=function(){return od()?nd():Lp.j.c.call(this)};function X(e){e=yp({},this.b,e);var o=e.apikey||e.apiKey,h=e.baseUrl;if(h=o?h?0:"baseUrl":"apikey")throw new D(X,0,'"'+h+'" must be specified');this.Nk(e.baseUrl),this.a=o,this.Yb.I({apikey:o}),this.c=e.headers||{},this.f=Wa(e.servicesConfig||{})}t("H.service.Platform",X),X.prototype.b={apikey:null,baseUrl:new W("https","hereapi"+(Mn?".cn":".com"))},X.prototype.Nk=function(e){this.Yb=Jp(e.clone()),this.a=e=this.a,this.Yb.I({apikey:e})},X.prototype.setBaseUrl=X.prototype.Nk,X.prototype.Ib=function(){return this.Yb},X.prototype.getBaseUrl=X.prototype.Ib,X.prototype.Ma=function(e,o){try{return e.Qf=!0,new e(yp({platformBaseUrl:this.Ib(),headers:this.c},this.f[e.CONFIG_KEY]||{},o||{}))}finally{e.Qf=!1}},X.prototype.createService=X.prototype.Ma,X.prototype.xf=function(e,o,h){var d=this;if(!H.map.render.harp)throw Error("HARP engine module not found");if(!Ea(e)&&!Cc(e))throw new D(this.xf,0,"is invalid: must be either a configuration object or a URL");if(!Da(o))throw new D(this.xf,1,"is invalid: must be a Function");if(!Da(h))throw new D(this.xf,2,"is invalid: must be a Function");var g=new H.map.render.harp.Style(e);g.addEventListener("change",function(){var _=g.getState();if(_===-1)h(Error("H.service.platform#createHybridLayers method failed to load style configuration"));else if(_===2){_={dark:!0};var $=d.lh({resource:"background",queryParams:{style:"satellite.day"}}),j=g.qc(),_t={styles:[{technique:"raster",attr:{gamma:1,brightness:1}}]};j.definitions&&(j.definitions["Satellite.Texture.Gamma"]!==void 0&&(_t.styles[0].attr.gamma=j.definitions["Satellite.Texture.Gamma"]),j.definitions["Satellite.Texture.Brightness"]!==void 0&&(_t.styles[0].attr.brightness=j.definitions["Satellite.Texture.Brightness"])),$=new Lp($,{engineType:Qn,style:new H.map.render.harp.Style(_t)}),o({raster:new sl($,_),vector:d.He().$b(g,{engineType:Qn},_),traffic:d.oh().$b(g,{engineType:Qn},_)})}}),g.load()},X.prototype.createHybridLayers=X.prototype.xf,X.prototype.wf=function(e,o,h,d,g,_){function $(uy,fy,yy){fy=uy.f(fy),fy=_o?new ti(fy):new H.map.render.harp.Style(fy);var xy={engineType:_e};_n&&_n.politicalView&&(xy.politicalView=_n.politicalView),h&&(xy.lg=h),d&&(xy.lg2=d),_&&(xy.pois=_);var Ey;return yy&&(Ey={dark:yy}),uy.$b(fy,xy,Ey)}function j(uy,fy,yy,xy,Ey){return uy.nc(fy,yy,_a,xy,_u,1,Ey,_r)}var _t=this,_e=jk,_r={crossOrigin:"anonymous"};if(Ea(e)){var _n=e;"crossOrigin"in _n&&(_r.crossOrigin=_n.crossOrigin),e=_n.tileSize,o=_n.ppi,h=_n.lg,d=_n.lg2,g=_n.style,_=_n.pois,_n.engineType!==void 0&&(_e=_n.engineType,_r.engineType=_e)}var _i=_e===kk.HARP,_o=_e===kk.WEBGL,_a=e||512,_u={};if(0>[72,250,320,500].indexOf(+o)){if(o!==B)throw new D(this.wf,1,o)}else _u.ppi=+o;if(h&&(_u.lg=h),d&&(_u.lg2=d),g&&(_u.style=g),_&&(_u.pois=!!_),_i&&!H.map.render.harp)throw new D(this.wf,0,"HARP engine is not supported, module not found");if(e={},Mn)yp(e,{vector:{normal:{map:$(this.He(),"harp/oslo/normal.day.json")}}});else{g=this.ih();var _f=this.ih({type:"aerial"}),_h=this.nh(),_d=_h.ej(_u.lg?{lg:_u.lg,i18n:!0,engineType:_e}:{engineType:_e});if(yp(e,{raster:{normal:{xbase:j(g,"xbasetile","normal.day","png8",!1),xbasenight:j(g,"xbasetile","normal.night","png8",!0),base:j(g,"basetile","normal.day","png8",!1),basenight:j(g,"basetile","normal.night","png8",!0),map:j(g,"maptile","normal.day","png8",!1),mapnight:j(g,"maptile","normal.night","png8",!0),trafficincidents:_d,transit:j(g,"maptile","normal.day.transit","png8",!1),labels:j(g,"labeltile","normal.day","png",!1)},satellite:{xbase:j(_f,"xbasetile","hybrid.day","jpg",!0),base:j(_f,"basetile","hybrid.day","jpg",!0),map:j(_f,"maptile","hybrid.day","jpg",!0),labels:j(_f,"labeltile","hybrid.day","png",!0)},terrain:{xbase:j(_f,"xbasetile","terrain.day","jpg",!1),base:j(_f,"basetile","terrain.day","jpg",!1),map:j(_f,"maptile","terrain.day","jpg",!1),labels:j(_f,"labeltile","terrain.day","png",!1)}}}),_i||_o){if(yp(e,{vector:{normal:{traffic:_h.dj(void 0,_e),trafficincidents:_d}}}),g=this.He(),_o?(e.vector.normal.map=$(g,"omv/miami/normal.day.yaml"),e.vector.normal.truck=$(g,"omv/miami/truck.day.yaml")):_i&&(e.vector.normal.map=$(g,"harp/oslo/normal.day.json"),e.vector.normal.truck=$(g,"harp/oslo/normal.day.json")),g=this.oh(),_i){var ty={ppi:72<o?400:100,size:256<_a?512:256,features:"pois:"+(_===!0||Cc(_)&&/[^0]/.test(_)?"all":"disabled")};h&&(ty.lang=h),d&&(ty.lang2=d),_n&&_n.politicalView&&(ty.pview=_n.politicalView),o={dark:!0},_f=function(uy,fy,yy,xy,Ey){var Oy=yp({},ty);return/^explore\./.test(yy)||delete Oy.features,uy=_t.lh({format:fy,resource:uy,queryParams:yp({style:yy},Oy)}),Ey=new Lp(uy,{engineType:_e,style:Ey}),new sl(Ey,xy)},yp(e.raster.normal,{base:_f("background","png8","explore.day"),basenight:_f("background","png8","explore.night",o),map:_f("base","png8","explore.day"),mapnight:_f("base","png8","explore.night",o),labels:_f("label","png","explore.day")}),yp(e.raster.satellite,{xbase:_f("background","jpeg","satellite.day",o),base:_f("background","jpeg","explore.satellite.day",o),map:_f("base","jpeg","explore.satellite.day",o),labels:_f("label","png","explore.satellite.day")}),_h=this.He(),yp(e.vector.normal,{mapnight:$(_h,"harp/oslo/normal.night.json",!0),lite:$(_h,"harp/oslo/lite.day.json"),litenight:$(_h,"harp/oslo/lite.night.json",!0),ism:$(_h,"harp/oslo/ism.day.json"),ismnight:$(_h,"harp/oslo/ism.night.json",!0)}),_d={styles:[{technique:"raster",attr:{gamma:["interpolate",["linear"],["zoom"],0,1,13,1.2,17,1.3],brightness:["interpolate",["linear"],["zoom"],0,.7,13,.9,17,1]}}]};for(var ey=[],sy=0;4>sy;sy++){var ny=new H.map.render.harp.Style(JSON.parse(JSON.stringify(_d)));ny=_f("background","jpeg","satellite.day",o,ny),ey.push(ny)}e.hybrid={day:{raster:ey[0],vector:$(_h,"harp/oslo/hybrid.day.json",!0),traffic:$(g,"harp/oslo/hybrid.day.json",!0)},night:{raster:ey[1],vector:$(_h,"harp/oslo/hybrid.night.json",!0),traffic:$(g,"harp/oslo/hybrid.night.json",!0)},liteday:{raster:ey[2],vector:$(_h,"harp/oslo/lite.hybrid.day.json",!0),traffic:$(g,"harp/oslo/lite.hybrid.day.json",!0)},litenight:{raster:ey[3],vector:$(_h,"harp/oslo/lite.hybrid.night.json",!0),traffic:$(g,"harp/oslo/lite.hybrid.night.json",!0)}}}o={traffic:{}},o.traffic.map=$(g,_o?"traffic/vector.tile.yaml":"harp/oslo/normal.day.json"),_i&&(o.traffic.mapnight=$(g,"harp/oslo/normal.night.json"),o.traffic.lite=$(g,"harp/oslo/lite.day.json"),o.traffic.litenight=$(g,"harp/oslo/lite.night.json")),yp(e.vector,o)}}return e},X.prototype.createDefaultLayers=X.prototype.wf;function Op(e,o){if(o=o===void 0?{}:o,!e.Qf)throw new $c(e);Op.j.constructor.call(this);var h=Pp(this,o);if(!h.baseUrl&&!h.platformBaseUrl)throw new D(e,0,'either "baseUrl" or "platformBaseUrl" must be specified');this.i=(h.baseUrl?h.baseUrl:h.platformBaseUrl).clone(),e=h.baseUrl?o:h,e.host&&this.i.af(e.host),e.subDomain&&this.i.Ba(e.subDomain),e.path&&this.i.wd(e.path),Jp(this.i),this.g=h.headers||{}}u(Op,F),t("H.service.Service",Op);function Pp(e,o){return e=e.Aa(),o?yp({},e,o):e}Op.prototype.Aa=function(){return{}},Op.prototype.v=function(){return this.i},Op.prototype.getUrl=Op.prototype.v,Op.prototype.B=function(e,o,h,d){return d=new tf(d===void 0?"application/json":d,e.toString(),je,{headers:this.g}),d.then(o,Qp(this,e,h)),d};function Qp(e,o,h){return function(d){return typeof d.json!="function"?Promise.reject(h(Rp(o,d))):d.json().then(function(g){return h(e.a(g))},function(){return h(Rp(o,d))})}}Op.prototype.a=function(e){return Error(e.message)};function Rp(e,o){return Error((o.statusText?"["+o.statusText+"] ":"")+e+" request failed")}function Sp(e){Sp.j.constructor.call(this,Sp,e)}u(Sp,Op),t("H.service.traffic.Service7",Sp),Sp.prototype.Aa=function(){return{subDomain:"data.traffic",path:"v7"}},Sp.CONFIG_KEY="traffic_v7",Sp.prototype.qo=function(e,o,h,d){return e=this.v().clone().G(["incidents",e].join("/")).I(o||{}),this.B(e,h,d)},Sp.prototype.requestIncidentById=Sp.prototype.qo,Sp.prototype.oo=function(e,o,h){return e=this.v().clone().G("flow").I(e||{}),this.B(e,o,h)},Sp.prototype.requestFlowByArea=Sp.prototype.oo,Sp.prototype.so=function(e,o,h){return e=this.v().clone().G("incidents").I(e||{}),this.B(e,o,h)},Sp.prototype.requestIncidentsByArea=Sp.prototype.so;function Tp(e){if(!e||!Da(e.requestData))throw new D(Tp,0,"options.requestData");Tp.j.constructor.call(this,e),this.L=e.requestData,this.D=!!e.providesDomMarkers}u(Tp,S),t("H.map.provider.MarkerTileProvider",Tp),Tp.prototype.B=function(e,o,h,d,g){var _=this;return this.L(e,o,h,function($){for(var j=[],_t,_e,_r=$.length;_r--;)_e=$[_r],_e.Ho=_.getTileKey(e,o,h),_e.ka(_),_t=_e.xb(),(C(_e,bj)||_t.getState()===1)&&j.push($[_r]);d(j)},g)},Tp.prototype.requestInternal=Tp.prototype.B,Tp.prototype.Td=function(e,o){o===kh.VISUAL&&(e=this.nb().get(e.Ho))&&(e.valid=!1,this.Va(e))},Tp.prototype.invalidateObject=Tp.prototype.Td,Tp.prototype.Qb=function(){return this.D},Tp.prototype.providesDomMarkers=Tp.prototype.Qb,Tp.prototype.Rb=ff,Tp.prototype.providesMarkers=Tp.prototype.Rb;function Up(){this.a={}}Up.prototype.xb=function(e,o){var h=e+o,d;return(d=this.a[h])?d:(e=Vp.MARKER.replace("{{icon}}",Wp[e]||Wp.OTHER),e=e.replace("{{color}}",Xp[o]||Xp.BLOCKING),o={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new Xi(Yi.POLYGON,Yp.MARKER)},this.a[h]=d=new Wj(e,o))};var Vp={MARKER:'<svg width="26" height="33" enable-background="new 0 0 26 33" viewBox="0 0 26 33" xmlns="http://www.w3.org/2000/svg"><path d="m26 33h-26v-33h26z" fill="#8c8c8c" opacity="0"/><path d="m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026" fill="#878787" opacity=".6"/><path d="m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z" fill="{{color}}"/>{{icon}}</svg>'},Wp={CONGESTION:'<path style="fill:#FFFFFF;" d="M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z"/>',ROADWORKS:'<path d="m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z" fill="#fff"/>',ACCIDENT:'<path style="fill:#FFFFFF;" d="M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z"/>',OTHER:'<path style="fill:#FFFFFF;" d="M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z"/>'},Xp={BLOCKING:"#323232",VERYHIGH:"#d5232f",HIGH:"#ffa100"},Yp={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function Zp(e,o,h){h=h||{},h.criticality||(h.criticality="major,critical"),C(e,$p,Zp,0),Tp.call(this,{max:20,min:8,requestData:A(this.T,this),engineType:h.engineType}),this.f=new Up,this.u=e,this.i=h,this.reload=A(this.reload,this),this.m=setInterval(this.reload,o||18e4)}u(Zp,Tp),t("H.service.traffic.incidents.Provider",Zp);var aq={minor:"HIGH","low impact":"HIGH",major:"VERYHIGH",critical:"BLOCKING"};Zp.prototype.T=function(e,o,h,d,g){var _=this,$=this.f;return this.u.requestIncidentsByTile(e,o,h,function(j){var _t=[];j=j.TRAFFIC_ITEMS;var _e;if(j)for(j=j.TRAFFIC_ITEM,_e=j.length;_e--;){var _r=j[_e],_n=_r.TRAFFIC_ITEM_TYPE_DESC;switch(_n){case"ACCIDENT":case"CONGESTION":var _i=_n;break;case"CONSTRUCTION":_i="ROADWORKS";break;default:_i="OTHER"}_i=$.xb(_i,aq[_r.CRITICALITY.DESCRIPTION]),_n=_r.LOCATION.GEOLOC.ORIGIN,_n=new Rn({lat:_n.LATITUDE,lng:_n.LONGITUDE},{provider:_,icon:_i}),_n.setData(_r),_t.push(_n)}d(_t)},g,this.i)},Zp.prototype.F=function(){Tp.prototype.F.call(this),clearInterval(this.m)},Zp.prototype.dispose=Zp.prototype.F;var bq="A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A".split(" ");function cq(e,o,h,d){cq.j.constructor.call(this,{min:10,max:21,engineType:d}),C(e,$p,cq,0),this.m=e,this.f=h||dq,this.f.responseattributes="sh,fc",this.i=setInterval(A(this.reload,this),o||18e4),this.b===kk.WEBGL?this.Qa(new ti(Ao()+"/traffic/flow.yaml"),!0):this.Qa(new H.map.render.harp.Style({styles:[{when:["==",["geometry-type"],"LineString"],technique:"solid-line",renderOrder:10002,attr:{color:["case",[">=",["get","JF"],10],"black",[">=",["get","JF"],8],"red",[">=",["get","JF"],4],"yellow","green"],lineWidth:3,metricUnit:"Pixel"}}]}))}u(cq,S),t("H.service.traffic.flow.Provider",cq),cq.prototype.ei=ff,cq.prototype.providesGeoJSON=cq.prototype.ei,cq.prototype.V=function(){return this.Ya()},cq.prototype.getStyle=cq.prototype.V,cq.prototype.gb=function(e){e.a&&e.a("GeoJSONTileSource"),this.Qa(e)},cq.prototype.setStyle=cq.prototype.gb;var dq={locationreferences:"tmc,shp"};cq.prototype.o=function(){cq.j.o.call(this),clearInterval(this.i)},cq.prototype.B=function(e,o,h,d,g){return this.m.requestFlowByTile(e,o,h,function(_){_.type&&_.type.indexOf("Error")!==-1?g(_.Details):d(_)},g,this.f)},cq.prototype.requestInternal=cq.prototype.B,cq.prototype.ac=function(e,o,h,d,g){var _,$,j,_t,_e={type:"FeatureCollection",features:[]},_r,_n=d.RWS.length;for(_=0;_<_n;_++){var _i=d.RWS[_],_o=_i.RW,_a=_o.length,_u=bq.indexOf(_i.EXTENDED_COUNTRY_CODE+_i.EBU_COUNTRY_CODE)!==-1;for(_i=0;_i<_a;_i++){var _f=_o[_i].FIS,_h=_f.length;for(_f=0;_f<_h;_f++){var _d=_o[_i].FIS[_f].FI,ty=_d.length;for($=0;$<ty;$++){var ey=_d[$],sy=[],ny=ey.CF[0],uy=!!ny.SSS,fy={type:"Feature",properties:ny,geometry:{type:"MultiLineString",coordinates:sy}};for(fy.properties.LHT=_u,ey.SHP.length&&(fy.properties.FC=ey.SHP[0].FC),uy&&(_r=[]),ny=0;ny<ey.SHP.length;ny++){var yy=ey.SHP[ny].value,xy=yy.length;for(j=0;j<xy;j++){var Ey=uy?_r:void 0,Oy=new qo(yy[j].trim()),Gy=[],Ly={};for(Oy.ge();(_t=Oy.Pb())!==-1;)_t===eq?(Ly.lat=+String.fromCharCode.apply(cq,Oy.Gd()),Oy.next(),Oy.ge()):_t===fq?(Ly.lng=+String.fromCharCode.apply(cq,Oy.Gd()),Gy.push([Ly.lng,Ly.lat]),Ey&&Ey.push(ng(Ly)),Ly=[],Oy.next(),Oy.ge()):Oy.next();Ly.lng=+String.fromCharCode.apply(cq,Oy.Gd()),Gy.push([Ly.lng,Ly.lat]),Ey&&Ey.push(ng(Ly)),_t=Gy,sy.push(_t)}}_e.features.push(fy)}}}}return cq.j.ac.call(this,e,o,h,_e,g)},cq.prototype.createTileInternal=cq.prototype.ac;var fq=32,eq=44;function gq(e){function o(_r){d.contains(g)&&d.removeChild(g),_e&&clearTimeout(_e),delete gq.a[_],_r&&e.pj&&e.pj.call(_t,_r)}if(!e.url||!e.Og)throw Error('Parameter "options" must specify at least a URL and a callback.');if(typeof e.Og!="function")throw Error("Parameters options.callback must be a function");var h=e.cp||document,d=h.getElementsByTagName("head")[0],g=h.createElement("script");h=e.url instanceof W?e.url:Dp(e.url,e.bp);var _=gq.b++,$=e.vl||"callback",j=e.Og,_t={},_e=null;return _t.id=_,_t.cancel=function(){o("cancelled")},e.timeout!==0&&(_e=x.setTimeout(function(){o("timeout")},e.timeout||3e4)),gq.a[_]=function(_r){o(),j.call(_t,_r)},g.type="text/javascript",g.src=h.toString()+(h.Mj()?"&":"?")+$+"="+(e.ep?"H.service.jsonp.handleResponse("+_+")":encodeURI("H.service.jsonp.handleResponse("+_+")")),d.appendChild(g),_t}t("H.service.jsonp",gq),gq.mn=function(e){return(e=gq.a[e])?e:function(){}},gq.handleResponse=gq.mn,gq.b=0,gq.a={};function $p(e){$p.j.constructor.call(this,$p,e),this.c=Pp(this,e).callbackKey,this.b=!1}u($p,Op),t("H.service.traffic.Service",$p),$p.prototype.Aa=function(){return{subDomain:"traffic.ls",path:"traffic/6.1",callbackKey:"jsoncallback"}},$p.CONFIG_KEY="traffic",$p.prototype.dj=function(e,o){return new sl(new cq(this,void 0,e,o),{max:22})},$p.prototype.createFlowLayer=$p.prototype.dj,$p.prototype.ej=function(e){return new Sn(new Zp(this,void 0,e))},$p.prototype.createIncidentsLayer=$p.prototype.ej;function hq(e,o,h,d){return e.b||(zp($p,"Use HERE Traffic API v7 instead."),e.b=!0),gq({url:o,Og:h,pj:function(g){d(Error("["+g+"] "+o+" request failed"))},vl:e.c})}$p.prototype.ro=function(e,o,h){return e=this.v().clone().G("incidents.json").I(e),hq(this,e,o,h)},$p.prototype.requestIncidents=$p.prototype.ro,$p.prototype.po=function(e,o,h,d,g,_){return e=this.v().clone().G(["flow/json",h,e,o].join("/")).I(_||{}),hq(this,e,d,g)},$p.prototype.requestFlowByTile=$p.prototype.po,$p.prototype.to=function(e,o,h,d,g,_){return e=this.v().clone().G(["incidents/json",h,e,o].join("/")).I(_||{}),hq(this,e,d,g)},$p.prototype.requestIncidentsByTile=$p.prototype.to,X.prototype.nh=function(e,o){if(o=o||6,o===6)o=$p;else if(o===7)o=Sp;else throw new D(this.nh,1,"allowed values are 6 and 7");return this.Ma(o,e)},X.prototype.getTrafficService=X.prototype.nh;function iq(e){iq.j.constructor.call(this,iq,e),this.b=Pp(this,e).reverseSubDomain,zp(iq,"Use HERE Geocoding and Search API v7 instead.")}u(iq,Op),t("H.service.GeocodingService",iq),iq.prototype.Aa=function(){return{subDomain:"geocoder.ls",reverseSubDomain:"reverse",path:"6.2"}},iq.CONFIG_KEY="geocoding",iq.prototype.a=function(e){return Error(e.Details||e.message||e.error)},iq.prototype.Zg=function(e,o,h){return e=this.v().clone().G("geocode.json").I(e),this.B(e,o,h)},iq.prototype.geocode=iq.prototype.Zg,iq.prototype.ii=function(e,o,h){return e=this.v().clone().G("reversegeocode.json").I(e),this.b&&e.Ba(this.b),this.B(e,o,h)},iq.prototype.reverseGeocode=iq.prototype.ii,iq.prototype.search=function(e,o,h){return e=this.v().clone().G("search.json").I(e),this.B(e,o,h)},iq.prototype.search=iq.prototype.search,X.prototype.km=function(e){return this.Ma(iq,e)},X.prototype.getGeocodingService=X.prototype.km;function jq(e){zp(jq,"Use HERE Geocoding and Search API v7 instead."),jq.j.constructor.call(this,jq,e)}u(jq,Op),t("H.service.PlacesService",jq),jq.prototype.Aa=function(){return{subDomain:"places.ls",path:"places/v1"}},jq.CONFIG_KEY="places",jq.EntryPoint={SEARCH:"discover/search",SUGGEST:"suggest",EXPLORE:"discover/explore",AROUND:"discover/around",HERE:"discover/here",CATEGORIES:"categories/places"},jq.prototype.request=function(e,o,h,d){return kq(this,e,o,h,d)},jq.prototype.request=jq.prototype.request;function kq(e,o,h,d,g){return o=e.v().clone().G(o).I(h||{}),e.B(o,d,g)}jq.prototype.search=function(e,o,h){return kq(this,"discover/search",e,o,h)},jq.prototype.search=jq.prototype.search,jq.prototype.Go=function(e,o,h){return kq(this,"suggest",e,o,h)},jq.prototype.suggest=jq.prototype.Go,jq.prototype.Fl=function(e,o,h){return kq(this,"discover/explore",e,o,h)},jq.prototype.explore=jq.prototype.Fl,jq.prototype.rl=function(e,o,h){return kq(this,"discover/around",e,o,h)},jq.prototype.around=jq.prototype.rl,jq.prototype.on=function(e,o,h){return kq(this,"discover/here",e,o,h)},jq.prototype.here=jq.prototype.on,jq.prototype.wl=function(e,o,h){return kq(this,"categories/places",e,o,h)},jq.prototype.categories=jq.prototype.wl,jq.prototype.Gl=function(e,o,h,d){return e=Dp(e).I(this.v().getQuery()).I(d||{}),this.B(e,o,h)},jq.prototype.follow=jq.prototype.Gl,X.prototype.Im=function(e){return this.Ma(jq,e)},X.prototype.getPlacesService=X.prototype.Im;function lq(){this.a={}}function mq(e,o){for(var h in o)if(o.hasOwnProperty(h)){var d,g=o[h],_=e.a[h]||(e.a[h]=[]),$=g.length;for(d=0;d<$;d++)_.push(new nq(g[d]))}}function Np(e,o,h,d){var g=(e=e.a[o])?e.length:0,_=[];for(o=0;o<g;o++)e[o].nd(h,d)&&_.push(e[o]);return _}function nq(e){var o,h=e.boxes;if(this.label=e.label,this.min=e.minLevel,this.max=e.maxLevel,this.b=[],h&&(o=h.length)){var d=h[0],g=new K(d[0],d[1],d[2],d[3]);for(this.b.push(g),this.a=new K(d[0],d[1],d[2],d[3]),e=1;e<o;e++)d=h[e],g=new K(d[0],d[1],d[2],d[3]),this.b.push(g),this.a.ec(g,!1,this.a)}}nq.prototype.nd=function(e,o){if(e>=this.min&&e<=this.max)if((e=this.b.length)&&this.a){if(this.a.nd(o)){for(;e--;)if(this.b[e].nd(o))return!0}}else return!0;return!1};function oq(e,o,h){var d=this,g=h||{},_=+g.min,$=+g.max;g.tileSize=g.tileSize||512,g.min=_?ae(_,1,17):1,g.min+=Pk(g.tileSize,1),g.max=$?ae($,1,17):17,oq.j.constructor.call(this,g),C(e,pq,oq,0),C(o,Wh,oq,1),this.i=e,o.a&&o.a("OMV"),this.Qa(o,!0),this.m=!1,h&&(h.politicalView&&(this.u=h.politicalView),qq(this,h.lg,h.lg2),this.m=!!h.pois),this.aa=function(){d.T=xp(d),d.reload(!1)},e.addEventListener("versionupdate",this.aa),this.T=xp(this),oq.prototype.qa=function(){var j=/^v2\/vectortiles\/(.+)\/mc$/.exec(e.v().b);return j?j[1]:B+""}()}u(oq,S),t("H.service.omv.Provider",oq),oq.prototype.Sb=ff,oq.prototype.providesOMV=oq.prototype.Sb,oq.prototype.ub=function(e){return this.T.test(e)},oq.prototype.cacheFilter=oq.prototype.ub,oq.prototype.uc=function(e,o,h){return rq(this.i,e,o,h).toString()},oq.prototype.getTileKey=oq.prototype.uc,oq.prototype.nb=function(){return this.xa},oq.prototype.getCache=oq.prototype.nb,oq.prototype.Lm=function(){return this.u},oq.prototype.getPoliticalView=oq.prototype.Lm,oq.prototype.yo=function(e){var o=this.u;this.u=e,this.dispatchEvent(new cj("politicalviewchange",this.u,o))},oq.prototype.setPoliticalView=oq.prototype.yo,oq.prototype.MAX_STORE_TIME=2592e6,oq.prototype.l=function(){return od()},oq.prototype.c=function(){return od()?nd():oq.j.c.call(this)},oq.prototype.s=function(){return this.i},oq.prototype.B=function(e,o,h,d,g){return this.i.Ha(e,o,h,d,g)},oq.prototype.requestInternal=oq.prototype.B,oq.prototype.gb=function(e){e.a&&e.a("OMV"),this.Qa(e)},oq.prototype.setStyle=oq.prototype.gb,oq.prototype.V=function(){return oq.j.Ya.apply(this)},oq.prototype.getStyle=oq.prototype.V,oq.prototype.Ya=function(){var e=oq.j.Ya.apply(this),o=e.getState()===Xh.READY,h=e.qc();return o&&h&&h.global&&(this.D&&(this.R&&(h.global.ux_language=this.R),this.L&&(h.global.ux_language_fallback=this.L)),this.m&&h.global.poi&&h.global.poi.default&&(h.global.poi.default.visible=this.m),this.D||this.m)&&(e=new ti(h,e.Ib())),e},oq.prototype.getStyleInternal=oq.prototype.Ya;function qq(e,o,h){var d=Cc(o),g=Cc(h);d&&(e.R=o),g&&(e.L=h),(d||g)&&(e.f=[],d=/^([a-zA-Z]{2})(-|$)/,(g=d.exec(o))&&(g[1]==="zh"?e.f.push(o):e.f.push(g[1])),(g=d.exec(h))&&(g[1]==="zh"?e.f.push(h):e.f.push(g[1])),e.D=!0)}oq.prototype.D=!1;var sq=["en"];oq.prototype.hh=function(){return this.f||sq},oq.prototype.getLanguages=oq.prototype.hh,oq.prototype.o=function(){oq.j.o.call(this),this.i.removeEventListener("versionupdate",this.aa)},oq.prototype.xa=new Rk(256),oq.prototype.ba=function(e,o){return Np(this.i.ba(),this.qa,o,e)},oq.prototype.getCopyrights=oq.prototype.ba;function pq(e){pq.j.constructor.call(this,pq,e);var o=Pp(this,e).mapVersion;this.l=e.queryParams||{},this.b=vc(o)?o:tq[this.v().toString()],vc(this.b)||uq(this)}u(pq,Op),t("H.service.omv.Service",pq),pq.prototype.Aa=function(){return{subDomain:"vector",path:"v2/vectortiles/base/mc"}},pq.CONFIG_KEY="omv";var tq={};Ic(tq),pq.prototype.Am=function(){return this.b},pq.prototype.getMapVersion=pq.prototype.Am;function uq(e){e.B(e.v().clone().G("../../info"),function(o){o=o.mapVersion;var h=e.v().toString();e.b=o,o!==tq[h]&&(tq[h]=o,e.dispatchEvent("versionupdate"))},function(){})}pq.prototype.$b=function(e,o,h){o=o||{};var d={min:0,max:22};return Ea(h)&&yp(d,h),Mn&&(o.min=d.min=4),new sl(new oq(this,e,o),d)},pq.prototype.createLayer=pq.prototype.$b,pq.prototype.Ha=function(e,o,h,d,g){return this.B(rq(this,e,o,h),function(_){return _.arrayBuffer().then(d,g)},g,"arraybuffer")};function rq(e,o,h,d){return o=e.v().clone().G(d+"/"+o+"/"+h+"/omv"),vc(e.b)&&o.I({mv:e.b}).I(e.l),o}pq.prototype.f=function(e){return Ao()+"/"+e},pq.prototype.Je=function(e,o){if(!Da(e))throw new D(this.Je,0,'"onResult" must be a function');if(!Da(o))throw new D(this.Je,1,'"onError" must be a function');return this.B(this.v().clone().wd("v2/vectortiles/pviews"),e,o)},pq.prototype.getPoliticalViews=pq.prototype.Je,X.prototype.He=function(e){return this.Ma(pq,e)},X.prototype.getOMVService=X.prototype.He,pq.prototype.s=function(e){mq(this.c,e),this.dispatchEvent("copyrightupdate")},pq.prototype.ba=function(){return this.c||(this.c=new lq,this.B(this.v().clone().G("../../copyrights"),A(this.s,this),ld)),this.c},pq.prototype.getCopyrights=pq.prototype.ba;function vq(e){vq.j.constructor.call(this,vq,e),this.b=e.getToken}u(vq,Op),t("H.service.iml.Service",vq),vq.prototype.Aa=function(){return{host:"interactive.data.api.platform.here.com",path:"interactive/v1/catalogs"}},vq.prototype.a=function(e){function o(){for(var d=ea(h),g=d.next();!g.done;g=d.next()){g=g.value;var _=g.format;if(g.keys.every(function($){return e[$]}))return _()}return JSON.stringify(e)}var h=[{keys:["code","title","cause","action"],format:function(){return e.code+": "+e.title+"; cause: "+e.cause+"; action: "+e.action}},{keys:["error","error_description"],format:function(){return e.error+": "+e.error_description}},{keys:["error","errorMessage"],format:function(){return e.error+": "+e.errorMessage}}];return Error(Ea(e)?o():e)},vq.prototype.Qd=function(e,o,h,d,g){var _=this.Qd;return wq(_,0,e,o),xq(_,2,h,d),e=this.v().clone().G(e+"/layers/"+o+"/statistics").I(g||{}),yq(this,e,"GET",h,d)},vq.prototype.getStatistics=vq.prototype.Qd,vq.prototype.Ff=function(e,o,h,d,g,_,$,j,_t){var _e=_t?"":".mvtf";return e=this.v().clone().G(d+"/layers/"+g+"/tile/web/"+h+"_"+e+"_"+o+_e).I(Object.assign({clip:!0},j)),yq(this,e,"GET",_t?_:function(_r){return _r.arrayBuffer().then(_)},$,void 0,_t?"application/json":"arraybuffer")},vq.prototype.getFeaturesByTile=vq.prototype.Ff,vq.prototype.wj=function(e,o,h,d,g,_){var $=this.wj;return zq($,e),wq($,1,o,h),xq($,3,d,g),e=Aq(this,e,o,h,_),yq(this,e,"GET",d,g)},vq.prototype.getFeatureById=vq.prototype.wj,vq.prototype.Sc=function(e,o,h,d,g,_){var $=this.Sc;return Bq($,e),wq($,1,o,h),xq($,3,d,g),e=Dq(this,e,o,h,_),yq(this,e,"GET",d,g)},vq.prototype.getFeaturesById=vq.prototype.Sc,vq.prototype.Jd=function(e,o,h,d,g){var _=this.Jd;if(!Ea(e)||!(e.bbox||e.north&&e.east&&e.south&&e.west))throw new D(_,0,'must be an object with either "bbox" or a full set of "north", "east", "south" and "west"');return wq(_,1,o,h),xq(_,3,d,g),e=this.v().clone().G(o+"/layers/"+h+"/bbox").I(e),yq(this,e,"GET",d,g)},vq.prototype.getFeaturesByBoundingBox=vq.prototype.Jd,vq.prototype.yj=function(e,o,h,d,g){var _=this.yj;if(!(Ea(e)&&e.radius&&(e.lat&&(e.lng||e.lon)||e.refCatalogHrn&&e.refLayerId&&e.refFeatureId)))throw new D(_,0,'must be an object with "radius" and a combination of either "lat"+"lng" or "refCatalogHrn"+"refLayerId"+"refFeatureId"');return wq(_,1,o,h),xq(_,3,d,g),e=this.v().clone().G(o+"/layers/"+h+"/spatial").I(e),yq(this,e,"GET",d,g)},vq.prototype.getFeaturesByPointAndRadius=vq.prototype.yj,vq.prototype.xj=function(e,o,h,d,g,_){var $=this.xj;if(!Ea(e)||!e.radius)throw new D($,0,'must be an object with "radius"');return Eq($,1,o),wq($,2,h,d),xq($,4,g,_),e=this.v().clone().G(h+"/layers/"+d+"/spatial").I(e),yq(this,e,"POST",g,_,o)},vq.prototype.getFeaturesByGeometryAndRadius=vq.prototype.xj,vq.prototype.Jk=function(e,o,h,d,g){var _=this.Jk;return wq(_,0,e,o),xq(_,2,h,d),e=this.v().clone().G(e+"/layers/"+o+"/search").I(g||{}),yq(this,e,"GET",h,d)},vq.prototype.searchFeatures=vq.prototype.Jk,vq.prototype.Wj=function(e,o,h,d,g){var _=this.Wj;return wq(_,0,e,o),xq(_,2,h,d),e=this.v().clone().G(e+"/layers/"+o+"/iterate").I(g||{}),yq(this,e,"GET",h,d)},vq.prototype.iterateFeatures=vq.prototype.Wj,vq.prototype.$c=function(e,o,h,d,g,_){var $=this.$c;return Eq($,0,e),wq($,1,o,h),xq($,3,d,g),o=Fq(this,o,h,_),yq(this,o,"PUT",d,g,e)},vq.prototype.putFeatures=vq.prototype.$c,vq.prototype.Yc=function(e,o,h,d,g,_){var $=this.Yc;return Eq($,0,e),wq($,1,o,h),xq($,3,d,g),o=Fq(this,o,h,_),yq(this,o,"POST",d,g,e)},vq.prototype.postFeatures=vq.prototype.Yc,vq.prototype.hd=function(e,o,h,d,g){var _=this.hd;return Bq(_,e),wq(_,1,o,h),xq(_,3,d,g),e=Dq(this,e,o,h),yq(this,e,"DELETE",d,g)},vq.prototype.deleteFeatures=vq.prototype.hd,vq.prototype.Ck=function(e,o,h,d,g,_,$){var j=this.Ck;return zq(j,e),Eq(j,1,o),wq(j,2,h,d),xq(j,4,g,_),e=Aq(this,e,h,d,$),yq(this,e,"PUT",g,_,o)},vq.prototype.putFeature=vq.prototype.Ck,vq.prototype.wk=function(e,o,h,d,g,_,$){var j=this.wk;return zq(j,e),Eq(j,1,o),wq(j,2,h,d),xq(j,4,g,_),e=Aq(this,e,h,d,$),yq(this,e,"PATCH",g,_,o)},vq.prototype.patchFeature=vq.prototype.wk,vq.prototype.ij=function(e,o,h,d,g){var _=this.ij;return zq(_,e),wq(_,1,o,h),xq(_,3,d,g),e=Aq(this,e,o,h),yq(this,e,"DELETE",d,g,void 0,"text/plain")},vq.prototype.deleteFeature=vq.prototype.ij;function Fq(e,o,h,d){return e.v().clone().G(o+"/layers/"+h+"/features").I(d||{})}function Dq(e,o,h,d,g){return o=Object.assign({},g,{id:new Hp(o)}),Fq(e,h,d,o)}function Aq(e,o,h,d,g){return e.v().clone().G(h+"/layers/"+d+"/features/"+o).I(g||{})}function yq(e,o,h,d,g,_,$){return $=$===void 0?"application/json":$,h={method:h,headers:Object.assign({},_?{"Content-Type":"application/geo+json"}:void 0,typeof e.b=="function"?{Authorization:"Bearer "+e.b()}:void 0,e.g)},_&&(h.data=JSON.stringify(_)),_=new tf($,o.toString(),je,h),_.then(d,Qp(e,o,g)),_}vq.CONFIG_KEY="iml";function wq(e,o,h,d){zc(h,"String",e,o,"must be a string"),zc(d,"String",e,o+1,"must be a string")}function zq(e,o){zc(o,"String",e,0,"must be a string")}function Bq(e,o){if(!Array.isArray(o)||o.length===0||o.some(function(h){return typeof h!="string"}))throw new D(e,0,"must be a non-empty array of strings")}function Eq(e,o,h){if(!Ea(h))throw new D(e,o,"must be a GeoJSON object")}function xq(e,o,h,d){if(!Da(h))throw new D(e,o,"must be a function");if(!Da(d))throw new D(e,o+1,"must be a function")}X.prototype.pm=function(e){return this.Ma(vq,e)},X.prototype.getIMLService=X.prototype.pm;function Gq(e,o,h,d){if(Gq.j.constructor.call(this,d?{min:d.min,max:d.max,engineType:d.engineType}:void 0),C(e,vq,Gq,0),!Cc(o))throw new D(Gq,1,'"catalogHrn" must be a string');if(!Cc(h))throw new D(Gq,2,'"layerId" must be a string');this.u=e,this.f=o,this.i=h,this.m=Ea(d)&&Ea(d.parameters)?d.parameters:{},this.Qa(this.b===kk.WEBGL?new ti({sources:{iml:{type:"MVT"}},layers:{iml:{data:{source:"iml",layer:this.f+":"+this.i},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#0258AE",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.f+":"+this.i,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.f+":"+this.i,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.f+":"+this.i,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.f+":"+this.i,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#0258AE",lineWidth:"2px",renderOrder:203}]}))}u(Gq,S),t("H.service.iml.Provider",Gq),Gq.prototype.B=function(e,o,h,d,g){return this.u.Ff(e,o,h,this.f,this.i,d,g,this.m)},Gq.prototype.requestInternal=Gq.prototype.B,Gq.prototype.Sb=ff,Gq.prototype.providesOMV=Gq.prototype.Sb,Gq.prototype.V=function(){return this.Ya()},Gq.prototype.getStyle=Gq.prototype.V,Gq.prototype.gb=function(e){C(e,ti)&&e.a("MVT"),this.Qa(e)},Gq.prototype.setStyle=Gq.prototype.gb;function Mp(e){e=e===void 0?{}:e,Mp.j.constructor.call(this,Mp,e),this.b={og:e.resource||"base",eg:e.projection||"mc",format:e.format||"png8"},this.f=e.queryParams||{}}u(Mp,Op),t("H.service.rasterTile.Service",Mp),p=Mp.prototype,p.V=function(){return this.f.style||"explore.day"},p.Aa=function(){return{subDomain:"maps",path:"v3"}},p.ba=function(){return this.c||(this.c=new lq,this.B(this.v().clone().G("copyright"),A(this.Kn,this),ld)),this.c},p.Kn=function(e){var o=e.copyrights;e=e.resources;var h={},d=this.b.og+"."+this.V();h[d]=[],e[this.b.og].styles[this.V()].forEach(function(g){o[g].forEach(function(_){var $=[];_.boundingBoxes.forEach(function(j){$.push([j.north,j.west,j.south,j.east])}),h[d].push({boxes:$,label:_.label,alt:_.alt,minLevel:_.minLevel,maxLevel:_.maxLevel})})}),mq(this.c,h)},p.Fe=function(e,o){return this.B(this.v().clone().G("info"),e,o)},Mp.prototype.getInfo=Mp.prototype.Fe,Mp.prototype.Je=function(e,o){return this.B(this.v().clone().G("politicalViews"),e,o)},Mp.prototype.getPoliticalViews=Mp.prototype.Je,Mp.prototype.jm=function(e,o){return this.B(this.v().clone().G("features"),e,o)},Mp.prototype.getFeatures=Mp.prototype.jm,Mp.prototype.hh=function(e,o){return this.B(this.v().clone().G("languages"),e,o)},Mp.prototype.getLanguages=Mp.prototype.hh,Mp.CONFIG_KEY="rasterTile",X.prototype.lh=function(e){return this.Ma(Mp,e)},X.prototype.getRasterTileService=X.prototype.lh;function Hq(e,o,h,d,g,_,$){var j=this;$=$||{},_=_||{};var _t=e.v().clone().G(o+"/"+e.vc()+"/"+h).I(_),_e=e.c;this.D=e,this.R=_t,Ek.call(this,{tileSize:d,max:d===512?19:20,min:d===512?2:0,getURL:function(_r,_n,_i){var _o=j.R.clone();return _e&&_o.Ba(_e[(_i+_n+_r)%_e.length]),_o.G(_i+"/"+_r+"/"+_n+"/"+d+"/"+g),_o.toString()},crossOrigin:$.crossOrigin,headers:$.headers,uri:_t.toString().replace(/_/g,"")+d,engineType:$.engineType}),this.me=o,this.ab=h,this.xa=_,this.qa=h.split(".")[0],this.i=A(this.i,this),this.getCopyrights=this.ba,this.L=!1,e.addEventListener("versionupdate",this.i)}u(Hq,Ek),Hq.prototype.MAX_STORE_TIME=2592e6,Hq.prototype.B=function(e,o,h,d,g,_){return this.L||(zp(Iq,"Use HERE Vector Tile API or Raster Tile API v3 instead."),this.L=!0),Hq.j.B.call(this,e,o,h,d,g,_)},Hq.prototype.requestInternal=Hq.prototype.B,Hq.prototype.o=function(){Ek.prototype.o.call(this),this.D.removeEventListener("versionupdate",this.i)},Hq.prototype.ba=function(e,o){return Np(this.D.ba(),this.qa,o,e)},Hq.prototype.getCopyrights=Hq.prototype.ba,Hq.prototype.i=function(){var e=this.D;this.R=e.v().clone().G(this.me+"/"+e.vc()+"/"+this.ab).I(this.xa),this.reload(!1)},Hq.prototype.l=function(){return od()},Hq.prototype.c=function(){return od()?nd():Hq.j.c.call(this)};function Iq(e){Iq.j.constructor.call(this,Iq,e),e=Pp(this,e),this.c=e.shards,(this.f=e.ignoreTypes?null:e.type)&&this.v().Ba(this.f),this.b=e.version,this.s=new lq,this.m={},this.l=0,this.b==="newest"&&Jq(this)}u(Iq,Op),t("H.service.MapTileService",Iq),Iq.prototype.Aa=function(){return{subDomain:"maps.ls",path:"maptile/2.1",type:"base",version:"newest",shards:["1","2","3","4"]}},Iq.CONFIG_KEY="maptile";function Kq(e,o){for(var h={},d=e[o+"s"][o],g=d.length;g--;)h[d[g].id]=d[g];e[o+"s"]=h}Iq.prototype.Hj=function(){return this.f},Iq.prototype.getType=Iq.prototype.Hj,Iq.prototype.vc=function(){return this.b},Iq.prototype.getVersion=Iq.prototype.vc,Iq.prototype.ba=function(){return this.l||(this.b&&this.b!=="newest"||this.f==="traffic")&&Lq(this),this.s},Iq.prototype.getCopyrights=Iq.prototype.ba;function Jq(e){var o=e.v().clone().G("info").I({output:"json"});e.c&&o.Ba(e.c[0]),e.B(o,function(h){h=h.response;var d;if(Kq(h,"map"),Kq(h,"scheme"),Kq(h,"tiletype"),Kq(h,"format"),Kq(h,"resolution"),Kq(h,"language"),e.b==="newest"&&e.f!=="traffic")for(d in h.maps)h.maps[d].hash&&h.maps[d].newest&&(e.b=h.maps[d].hash,e.dispatchEvent("versionupdate"));e.u=h,e.dispatchEvent("infoupdate")},function(h){throw h})}function Lq(e){var o=e.v().clone().G("copyright").G(e.vc()).I({output:"json"});e.c&&o.Ba(e.c[0]),e.l=1,e.B(o,function(h){e.l=2,mq(e.s,h),e.dispatchEvent("copyrightupdate")},function(h){throw e.l=-1,h})}Iq.prototype.Fe=function(){return this.u},Iq.prototype.getInfo=Iq.prototype.Fe,Iq.prototype.ue=function(e,o,h,d,g,_){var $=this.v().clone().G(e+"/"+this.vc()+"/"+o+"/"+h+"/"+d).I(g||{}).toString(),j=0,_t,_e=$.length;if(_e!==0)for(_t=0;_t<_e;_t++){var _r=$.charCodeAt(_t);j=(j<<5)-j+_r,j|=0}return $=j,j=this.m[$],j||(j=new Hq(this,e,o,h,d,g,yp({headers:this.g},_||{})),this.m[$]=j),j},Iq.prototype.createTileProvider=Iq.prototype.ue,Iq.prototype.nc=function(e,o,h,d,g,_,$,j){return e=this.ue(e,o,h,d,g,j),new sl(e,{opacity:_,dark:!!$})},Iq.prototype.createTileLayer=Iq.prototype.nc,X.prototype.ih=function(e){return this.Ma(Iq,e)},X.prototype.getMapTileService=X.prototype.ih;function Mq(e){Mq.j.constructor.call(this,Mq,e)}u(Mq,Op),t("H.service.publicTransit.Service",Mq),Mq.prototype.Aa=function(){return{subDomain:"transit.router",path:"v8"}},Mq.CONFIG_KEY="publicTransit",Mq.prototype.Tm=function(e,o,h){return e=this.v().clone().G("routes").I(e),this.B(e,o,h)},Mq.prototype.getRoutes=Mq.prototype.Tm,Mq.prototype.$l=function(e,o,h){return e=this.v().clone().G("departures").I(e),this.B(e,o,h)},Mq.prototype.getDepartures=Mq.prototype.$l,Mq.prototype.Xm=function(e,o,h){return e=this.v().clone().G("stations").I(e),this.B(e,o,h)},Mq.prototype.getStations=Mq.prototype.Xm,Mq.prototype.a=function(e){return Error(JSON.stringify(e))},X.prototype.Pm=function(e){return this.Ma(Mq,e)},X.prototype.getPublicTransitService=X.prototype.Pm;function Nq(e){Nq.j.constructor.call(this,Nq,e),zp(Nq,"Use HERE Routing API v8 instead.")}u(Nq,Op),t("H.service.RoutingService",Nq),Nq.prototype.Aa=function(){return{subDomain:"route.ls",path:"routing/7.2"}},Nq.prototype.a=function(e){return Error(e.details)},Nq.CONFIG_KEY="routing",Nq.prototype.Cd=function(e,o,h){return e=this.v().clone().G("calculateroute.json").I(e),this.B(e,o,h)},Nq.prototype.calculateRoute=Nq.prototype.Cd,Nq.prototype.Ng=function(e,o,h){return e=this.v().clone().Ba("isoline").G("calculateisoline.json").I(e),this.B(e,o,h)},Nq.prototype.calculateIsoline=Nq.prototype.Ng;function Oq(e){Oq.j.constructor.call(this,Oq,e)}u(Oq,Op),t("H.service.RoutingService8",Oq),Oq.CONFIG_KEY="routing_v8",Oq.prototype.Aa=function(){return{subDomain:"router",path:"v8/routes"}},Oq.prototype.a=function(e){return Error(e.error)},Oq.prototype.Cd=function(e,o,h){return e=this.v().clone().I(e),this.B(e,o,h)},Oq.prototype.calculateRoute=Oq.prototype.Cd,Oq.prototype.Ng=function(e,o,h){return e=this.v().clone().Ba("isoline").wd("v8/isolines").I(e),this.B(e,o,h)},Oq.prototype.calculateIsoline=Oq.prototype.Ng,X.prototype.Fj=function(e,o){if(o=Mn?8:+o||7,o===7)o=Nq;else if(o===8)o=Oq;else throw new D(this.Fj,1,"allowed values are 7 and 8");return this.Ma(o,e)},X.prototype.getRoutingService=X.prototype.Fj;function Pq(){}t("H.service.extension.dataView.ITable",Pq),Pq.prototype.Md=function(){},Pq.prototype.getMeta=Pq.prototype.Md,Pq.prototype.Pd=function(){},Pq.prototype.getRowCount=Pq.prototype.Pd,Pq.prototype.tc=function(){},Pq.prototype.getRow=Pq.prototype.tc,Pq.prototype.Ta=function(){},Pq.prototype.getColumnNames=Pq.prototype.Ta,Pq.prototype.Be=function(){},Pq.prototype.getColumn=Pq.prototype.Be,Pq.prototype.ua=function(){},Pq.prototype.getCell=Pq.prototype.ua,Pq.prototype.concat=function(){},Pq.prototype.concat=Pq.prototype.concat;function Qq(){}t("H.service.extension.dataView.IRow",Qq),Qq.prototype.Ta=function(){},Qq.prototype.getColumnNames=Qq.prototype.Ta,Qq.prototype.ua=function(){},Qq.prototype.getCell=Qq.prototype.ua,Qq.prototype.md=function(){},Qq.prototype.getTable=Qq.prototype.md;function Rq(e,o){this.a=e,this.b=o}t("H.service.extension.dataView.ObjRow",Rq),Rq.prototype.Ta=function(){return this.a.Ta()},Rq.prototype.getColumnNames=Rq.prototype.Ta,Rq.prototype.ua=function(e){return this.a.ua(this.b,e)},Rq.prototype.getCell=Rq.prototype.ua,Rq.prototype.md=function(){return this.a},Rq.prototype.getTable=Rq.prototype.md;function Sq(){}t("H.service.extension.dataView.IColumn",Sq),Sq.prototype.ua=function(){},Sq.prototype.getCell=Sq.prototype.ua;function Tq(e,o){this.b=e,this.a=o}t("H.service.extension.dataView.ObjColumn",Tq),Tq.prototype.ua=function(e){return this.b.ua(e,this.a)},Tq.prototype.getCell=Tq.prototype.ua;function Uq(e,o,h){var d;if(o=o||(e&&e.length?Object.keys(e[0]):B),this.Cb=e,o)for(this.Dd=o,this.Pg=e=oc(),d=o.length;d--;)e[o[d]]=!0;h!==B&&(this.Sh=h)}t("H.service.extension.dataView.ObjTable",Uq),p=Uq.prototype,p.Sh=B,p.Cb=B,p.Dd=B,p.Pg=B,p.Md=function(){return this.Sh},Uq.prototype.getMeta=Uq.prototype.Md,Uq.prototype.Pd=function(){return this.Cb?this.Cb.length:0},Uq.prototype.getRowCount=Uq.prototype.Pd,Uq.prototype.tc=function(e){var o=this.Cb;return o&&o[e]?new Rq(this,e):B},Uq.prototype.getRow=Uq.prototype.tc,Uq.prototype.Ta=function(){return this.Dd||hf},Uq.prototype.getColumnNames=Uq.prototype.Ta,Uq.prototype.Be=function(e){return this.Pg[e]?new Tq(this,e):B},Uq.prototype.getColumn=Uq.prototype.Be,Uq.prototype.ua=function(e,o){var h=this.Cb;return(e=h&&this.Pg[o]&&h[e])&&e[o]},Uq.prototype.getCell=Uq.prototype.ua,Uq.prototype.concat=function(){var e=arguments.length,o,h=this.Dd,d=""+this.Dd,g=(this.Cb||[]).slice();for(o=0;o<e;o++){var _=arguments[o];if(!(_ instanceof Uq))throw new D(this.concat,o);if(_.Cb){if(h&&""+_.Dd!==d)throw new D(this.concat,o,"Incompatible columns!");g=g.concat(_.Cb)}}return new Uq(g,this.Dd,this.Sh)},Uq.prototype.concat=Uq.prototype.concat;function Vq(e,o){return e.Cb?e.Cb.push(o):e.Cb=[o],e.Cb.length-1}function Wq(e){var o=Xq;if(!e||!Cc(af(e.layerId,e.layer))||!Fc(e.level)||vc(e.rowFilter)&&!Da(e.rowFilter)||vc(e.rowFilterContext)&&!Ea(e.rowFilterContext))throw new D(o,1,vc("invalid layer config")?"invalid layer config":e)}function Yq(e,o,h,d){d=d||Zq,this.a={},d.provider=e,this.invalidate=gf,Yq.j.constructor.call(this,o,d),delete this.invalidate,h&&(this.b=h),this.ra(kh.ADD)}u(Yq,Hh),t("H.service.remote.Spatial",Yq);var Zq={};Yq.prototype.cb=function(){return this.b||Hh.prototype.cb.call(this)},Yq.prototype.getId=Yq.prototype.cb,Yq.prototype.pg=ld,Yq.prototype.retain=Yq.prototype.pg,Yq.prototype.release=ff,Yq.prototype.release=Yq.prototype.release;function $q(e,o){this.a=e,o&&(this.b=o)}var ar=new $q(hf);Yq.prototype.Kd=function(e){return(this.a[e.key]||ar).a},Yq.prototype.getGeometriesForTile=Yq.prototype.Kd,Yq.prototype.gh=function(e){return(this.a[e.key]||ar).b},Yq.prototype.getLabels=Yq.prototype.gh;function br(e,o,h){e.a[o.key]=new $q(h,void 0)}function cr(e,o,h,d){if(!Da(h))throw new D(e,o,"has invalid type");if(!Da(d))throw new D(e,o+1,"has invalid type")}function dr(e,o,h){var d=e===8;this.b=o,this.c=h||ld,(this.a=e===4||d)?this.l=d:this.g=e===1,this.f=this.a?"$HProjGeometry":"geometry"}dr.prototype.parse=function(e,o,h){var d,g,_={},$=[],j,_t,_e=0;for(j=h.length;_e<j;_e++){var _r=h[_e],_n=_r.Rows;if(_r=_n.length){var _i=Object.keys(_n[0]).filter(function(_a){return _a!=="geometry"&&_a!=="$HProjGeometry"});for(_i=new Uq(_n,_i),_t=0;_t<_r;_t++){var _o=_n[_t];if(g=_o[this.f]){if(delete _o[this.f],_o=_i.tc(_t))try{this.a?d=er(this,e,o,_o,g):d=fr(this,e,_o,g.path),d.ka(e),$.push(d)}catch(_a){this.c(_a.message)}}else this.c("Layer must contain geometries")}}}return _[this.a?"spatials":this.g?"markers":"domMarkers"]=$,_};function er(e,o,h,d,g){var _=[],$=g.paths,j=$.length,_t=0,_e=e.b&&e.b(d);for(e=new Yq(o,e.l,B,{style:_e||e.i,data:d});_t!==j;)_.push(gr($[_t++]));return br(e,h,[new Ph(_,g.interiorsIndex,g.outlinesIndex)]),e}function fr(e,o,h,d){d=new kg(d[0],d[1]);var g=e.b&&e.b(h);return e.g?(e={icon:g,data:h,provider:o},e=new Rn(d,e)):(e={icon:g,data:h,provider:o},e=new bj(d,e)),e}function gr(e){for(var o=0,h=e.length,d=[];o<h;)d.push(new J(e[o++],e[o++]));return d}function hr(e,o){var h={};this.c=e,Ya(h,o||h),ok.call(this,h),this.ig={},e=this.Kb(nh.SPATIAL),e.update(e.a+1,kh.ADD)}u(hr,ok),t("H.service.remote.ObjectProvider",hr),hr.prototype.F=function(){ok.prototype.F.call(this)},hr.prototype.dispose=hr.prototype.F,hr.prototype.Ec=function(){return hf},hr.prototype.requestMarkers=hr.prototype.Ec,hr.prototype.Dc=function(){return hf},hr.prototype.requestDomMarkers=hr.prototype.Dc,hr.prototype.sd=function(){return hf},hr.prototype.requestOverlays=hr.prototype.sd,hr.prototype.Rb=ff,hr.prototype.providesMarkers=hr.prototype.Rb,hr.prototype.Qb=ff,hr.prototype.providesDomMarkers=hr.prototype.Qb,hr.prototype.Cc=ff,hr.prototype.providesSpatials=hr.prototype.Cc,hr.prototype.kg=function(){return hf},hr.prototype.requestSpatials=hr.prototype.kg;function ir(e){return e.wc(!0)}hr.prototype.mg=function(e,o){return e=jr(this,e,kr),o&&(e=e.filter(ir)),e},hr.prototype.requestSpatialsByTile=hr.prototype.mg;function jr(e,o,h){var d=o.l&&o.l[h],g;return!d&&(g=o.s)&&(delete o.s,(o.l=e=e.c.parse(e,o,g))&&(d=e[h])),d||hf}hr.prototype.fa=function(e){var o=e.cb();if(this.ig[o])throw new $c(this.fa,"Remote object "+o+" already added");return this.ig[o]=e},hr.prototype.Ga=function(e){delete this.ig[e.cb()]};var kr="spatials";function lr(e){e=e||{};var o=e.tileCacheSize||1024,h=e.resultType,d=e.styleCallback;if(vc(e.min)||(e.min=12),lr.j.constructor.call(this,e),mr.indexOf(h)===-1)throw new D(lr,2,"invalid resultType");if(this.f=h,d&&!Da(d))throw new D(lr,2,"invalid style callback");this.aa=d,this.R=e.pixelRatio||Ue(),this.Gb=A(this.Gb,this),this.J(new Rk(o,A(this.ab,this))),this.createTileInternal=h===4||h===8?A(this.T,this):A(this.L,this)}u(lr,S),t("H.service.extension.TileProvider",lr),lr.prototype.i=!1,lr.prototype.getCapabilities=function(){return lr.j.getCapabilities.call(this)|Qj.CROP_LINES_BY_TILE|Qj.CROP_POLYGONS_BY_TILE},lr.prototype.Ha=function(e,o,h,d){return this.i?lr.j.Ha.call(this,e,o,h,d):B},lr.prototype.requestTile=lr.prototype.Ha,lr.prototype.Gb=function(e){this.dispatchEvent(new wd("error",Cc(e)?e:e+"",this))},lr.prototype.Rb=function(){return this.f===1},lr.prototype.providesMarkers=lr.prototype.Rb,lr.prototype.Qb=function(){return this.f===2},lr.prototype.providesDomMarkers=lr.prototype.Qb,lr.prototype.Cc=function(){return this.f===4||this.f===8},lr.prototype.providesSpatials=lr.prototype.Cc;function nr(e){var o=e.qa;return o||(e.u||(e.u=e.m(e.f,e.aa,e.Gb)),o=e.qa=new hr(e.u),o.ka(e),o.addEventListener(e.A.za,A(e.xa,e)),o.qa=!0),o}lr.prototype.L=function(e,o,h,d){var g=this.getTileKey(e,o,h);g=this.nb().get(g);var _=this.f==2,$=[],j=nr(this);for(g?g.valid=!0:(e=g=new Xk(e,o,h,z),delete e.l,e.s=d),d=_?jr(j,g,"domMarkers"):jr(j,g,"markers"),o=d.length;o--;)e=d[o],e.Ii=g,(_||e.xb().getState()===1)&&$.push(e);return g.data=$,g},lr.prototype.xa=function(e){(e=e.target.Ii)&&(e.valid=!1)},lr.prototype.Ao=function(e){this.D=!!e},lr.prototype.setTileCanvasRendering=lr.prototype.Ao,lr.prototype.D=!0,lr.prototype.T=function(e,o,h,d){var g=nr(this),_=this.getTileKey(e,o,h),$=this.tileSize,j=this.nb().get(_);return j||(e=j=new al(_,e,o,h,$,this.R,h,g),delete e.l,e.s=d),this.D?(d=Cp.pop($),j.W(d)||Cp.push(d,$)):gl(j),j},lr.prototype.ab=function(e,o){var h;if(this.f===4||this.f===8){for(e=o.Ua(),h=e.length;h--;)delete e[h].a[o.key];(e=o.gg())&&(Cp.push(e,this.tileSize),o.hg())}else for(e=o.data,h=e.length;h--;)delete e[h].Ii},lr.prototype.o=function(){lr.j.o.call(this),nr(this).F()};var or={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};lr.ResultType=or;var mr=[1,2,4,8];function Xq(e,o,h){var d=this,g=o&&o.rowFilter,_=h.resultType;Xq.j.constructor.call(this,h),C(e,pr,Xq,0),Wq(o),g?(h=Wa(o),h.rowFilter=g.toString()):h=Wa(o),delete h.layer,h.layerId=af(o.layerId,o.layer),new Pf().a("pde","H.service.extension.worker.processor"),e=e.v().clone().G(qr+"."+rr).I({meta:1}),new Sf("pde",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:_===4,serverUrl:e.toString(),layerConfigs:[h],horizontalMargin:1}]}).then(function(){d.i=!0,d.Va()},this.Gb)}u(Xq,lr),t("H.service.extension.platformData.TileProvider",Xq),Xq.prototype.m=function(e,o,h){return e=new dr(e,o,h),e.i=sr,e};var sr=new wh({strokeColor:"transparent",fillColor:"transparent",lineWidth:0,lineJoin:"round",lineCap:"round"});Xq.prototype.B=function(e,o,h,d,g){var _=this,$=this.getTileKey(e,o,h),j;$=this.nb().get($);var _t={cancel:ld},_e=!0,_r=this.f;if($&&(_r===4||_r===8?$.Ud()||(d(Cp.pop(this.tileSize),null),_e=!1):(d(z),_e=!1)),_e){var _n=Ap.setTimeout(function(){j=new Sf("pde",{message:[_.uid,1,[e,o,h]]}),j.then(d,g)},500);_t.cancel=function(){j?j.cancel():Ap.clearTimeout(_n)}}return _t},Xq.prototype.requestInternal=Xq.prototype.B,Xq.prototype.o=function(){Xq.j.o.call(this),new Sf("pde",{message:[this.uid,3]})},Xq.ResultType=or;function tr(e,o,h,d,g,_){cr(tr,1,o,h),cr(tr,2,d,g),(this.f=e.length)?(this.U=e,this.m=o,this.i=h,this.b=0,this.c=A(this.c,this),this.s=d,this.l=g,this.a=oc(),Ya(this.a,ur,_||{}),this.g={},x.setTimeout(this.c,0)):o(hf,!0)}var ur={duration:100,Kl:"geometry",Jl:"WKT",uo:"searchAttributes",hj:B};tr.prototype.c=function(){for(var e=[],o=!1,h=Lk(),d;this.b<this.f;){var g=this.U[this.b];if(o=g.attributes,d=g.layerId||this.a.hj,g.distance&&(o[this.a.uo]={nearest:new kg(g.nearestLat,g.nearestLon),distance:g.distance}),g=g[this.a.Kl]){try{var _=Wn(new qo(g))}catch($){this.i(new x.Error($.message)),o=!0;break}o[this.a.Jl]=_}if((g=this.g[d])||(g=this.g[d]=this.s({layerId:d,columnNames:Object.keys(o)})),o=this.l(g,o),e.push(o),this.b++,(o=this.b===this.f)||Lk()-h>=this.a.duration){this.m(e,o);break}}o?this.g={}:this.u=x.setTimeout(this.c,0)},tr.prototype.cancel=function(){x.clearTimeout(this.u),this.b<this.f&&this.i(new x.Error("parsing canceled"))},tr.prototype.cancel=tr.prototype.cancel;function vr(e){this.a=e}vr.prototype.cancel=function(){for(var e=this.a,o=e.length;o--;)e[o].cancel();e.length=0},vr.prototype.cancel=vr.prototype.cancel;function pr(e){pr.j.constructor.call(this,pr,e),zp(pr)}u(pr,Op),t("H.service.extension.platformData.Service",pr),pr.prototype.Aa=function(){return{subDomain:"s.fleet.ls",path:"1"}},pr.CONFIG_KEY="platformData",pr.prototype.request=function(e,o,h,d,g){var _="text/plain";if(!e)throw new D(this.request,0,e);if(!o)throw new D(this.request,1,o);if(!d)throw new D(this.request,3,d);if(!g)throw new D(this.request,4,g);return e=this.v().clone().G(e+"."+o).I(h),o===wr.JSON&&(_="application/json"),this.B(e,d,g,_)},pr.prototype.request=pr.prototype.request;var qr="tiles";pr.EntryPoint={DOC_ATTRIBUTES:"doc/attributes",DOC_LAYER:"doc/layer",DOC_LAYERS:"doc/layers",DOC_MAPS:"doc/maps",DOC_INDEXES:"doc/indexes",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SERVICE_CONFIGURATION:"serviceconfiguration",STATIC:"static",TILE:"tile",TILES:qr,FILE:"file",INDEX:"index"};var rr="json",wr={TXT:"txt",JSON:rr,HTML:"html",BIN:"bin"};pr.EntryPointType=wr,pr.prototype.nc=function(e,o){var h=o&&o.resultType;e=new Xq(this,e,o);var d;return h==1||h===2?d=new Sn(e):d=new sl(e),d},pr.prototype.createTileLayer=pr.prototype.nc;function xr(e,o,h,d,g){var _=[],$,j=h.layer_id||h.layer_ids;return e=e.request(o,rr,h,function(_t){$=new tr(_t.geometries,d,g,function(_e){return new Uq([],_e.columnNames,_e)},function(_e,_r){return _e.tc(Vq(_e,_r))},{hj:j}),_.push($)},function(_t){g(new x.Error(_t))}),_.push(e),new vr(_)}function yr(e,o,h){if(!Bc(e))throw new D(h,0,"has invalid type");if(!Bc(o))throw new D(h,1,"has invalid type");if(e.length!==o.length||!e.length)throw new D(h,1,"specify one key attribute for each given layer id in the same order")}pr.prototype.Fc=function(e,o,h,d,g,_){function $(_e,_r){_r&&j--,d(_e,!j)}var j,_t=[];for(yr(e,o,this.Fc),cr(this.Fc,3,d,g),C(h,K,this.Fc,2),h={bbox:h.c+","+h.a+";"+h.f+","+h.b},_&&Ya(h,_),e=h.layer_id?[h.layer_id]:e,_=0,j=e.length;_<j;_++)h.layer_id=e[_],h.key_attribute=o[_],_t.push(xr(this,"search/bbox",h,$,g));return new vr(_t)},pr.prototype.searchByBoundingBox=pr.prototype.Fc,pr.prototype.Ub=function(e,o,h,d,g,_,$){if(yr(e,o,this.Ub),C(h,kg,this.Ub,2,"has invalid type"),!Fc(d))throw new D(this.Ub,3,"has invalid type");return cr(this.Ub,4,g,_),e={layer_ids:e.join(","),key_attributes:o.join(","),proximity:h.lat+","+h.lng+","+d},$&&Ya(e,$),xr(this,"search/proximity",e,g,_)},pr.prototype.searchByProximity=pr.prototype.Ub,pr.prototype.Tb=function(e,o,h,d,g,_,$){var j="";if(yr(e,o,this.Tb),!Cc(h)&&!C(h,L))throw new D(this.Tb,1,"has invalid type");if(!Fc(d))throw new D(this.Tb,2,"has invalid type");if(cr(this.Tb,4,g,_),e={layer_ids:e.join(","),key_attributes:o.join(","),radius:d},Cc(h))e.route_id=h;else{for(d=h.$,h=0,o=d.length;h<o;h+=3)j+=d[h]+","+d[h+1],h<o-3&&(j+=";");e.corridor=j}return $&&Ya(e,$),xr(this,"search/corridor",e,g,_)},pr.prototype.searchByCorridor=pr.prototype.Tb,X.prototype.Jm=function(e){return this.Ma(pr,e)},X.prototype.getPlatformDataService=X.prototype.Jm;function zr(e){zr.j.constructor.call(this,zr,e),zp(zr)}u(zr,Op),t("H.service.extension.geofencing.Service",zr),zr.prototype.Aa=function(){return{subDomain:"fleet.ls",path:"2"}},zr.CONFIG_KEY="geofencing",zr.prototype.request=function(e,o,h,d){if(!e)throw new D(this.request,0,e);if(!Da(h))throw new TypeError("onResult must be a function");if(!Da(d))throw new TypeError("onError must be a function");return e=this.v().clone().G(e+".json").I(o),this.B(e,h,d)},zr.prototype.request=zr.prototype.request,zr.prototype.a=function(e){return Error(e.issues&&e.issues.length?e.issues.map(function(o){return o.message}).join(". "):e.message||e.response_code)},zr.EntryPoint={SEARCH_PROXIMITY:"search/proximity"},X.prototype.lm=function(e){return this.Ma(zr,e)},X.prototype.getGeofencingService=X.prototype.lm,t("H.service.extension.customLocation.Permission",{READ:"read",WRITE:"write",EXPORT:"export"}),t("H.service.extension.customLocation.Storage",{READONLY:"readonly",UPDATABLE:"updatable"});function Ar(e){var o=Br;if(!e||!Cc(e.layerId)||vc(e.rowFilter)&&!Da(e.rowFilter)||vc(e.rowFilterContext)&&!Ea(e.rowFilterContext))throw new D(o,1,vc("invalid layer config")?"invalid layer config":e)}function Cr(e){return Cc(e)&&/^[A-Z][A-Z0-9_]*$/.test(e)}function Dr(e){for(var o=e&&e.length,h=2<=o&&e[--o]==="WKT"&&e[--o]==="GEOMETRY_ID";h&&o--;)h=Cr(e[o]);return h}function Er(e,o){var h="",d=[];if(o){var g=e.geometries;if(g&&g.length){var _=Object.keys(g[0].attributes);for(h=h+("Meta:	"+o+`
`)+_.join("	"),h+=`	WKT
`,e=0;e<g.length;e++){var $=g[e].attributes,j=g[e].geometry;for(o=0;o<_.length;o++)d.push($[_[o]]);h+=d.join("	"),h+="	"+j+`
`,d=[]}}}else{if(j={},d=[],e.geometries)for(g=0;g<e.geometries.length;g++)o=e.geometries[g],j[o.layerId]||(j[o.layerId]=[]),j[o.layerId].push(o);for(_ in j)d.push({layerId:_,geometries:j[_]});for(e=0;e<d.length;e++)h+=Er(d[e],d[e].layerId)}return h}function Br(e,o,h){var d=this,g=o&&o.rowFilter,_;Br.j.constructor.call(this,h),C(e,Fr,Br,0);var $=h.resultType;if(Ar(o),g){var j=Wa(o);j.rowFilter=g.toString()}else j=o;new Pf().a("cle","H.service.extension.worker.processor");var _t=o.layerId;e.request(Gr,Hr,{detail_level:"all",layer_id:_t},function(_e){_e=_e.layers;var _r;for(_r=0;_r<_e.length;_r++)if(_e[_r].layerId===_t){j.level=_e[_r].level;break}_=e.v().clone().G(Ir+"."+Hr).I({meta:1}),new Sf("cle",{message:[d.uid,0,{tileSize:d.tileSize,projected:!0,onlyOutline:$===4,serverUrl:_.toString(),layerConfigs:[j],batchTiles:!1,horizontalMargin:1}]}).then(function(){d.i=!0,d.Va()},d.Gb)},function(_e){d.Gb(_e.message)})}u(Br,lr),t("H.service.extension.customLocation.TileProvider",Br),Br.prototype.m=function(e,o,h){return new dr(e,o,h)},Br.prototype.B=function(e,o,h,d,g){var _=this,$=this.getTileKey(e,o,h),j;$=this.nb().get($);var _t={cancel:ld},_e=!0,_r=this.f;if($&&(_r===4||_r===8?$.Ud()||(d(Cp.pop(this.tileSize),null),_e=!1):(d(z),_e=!1)),_e){var _n=Ap.setTimeout(function(){j=new Sf("cle",{message:[_.uid,1,[e,o,h]]}),j.then(d,g)},500);_t.cancel=function(){j?j.cancel():Ap.clearTimeout(_n)}}return _t},Br.prototype.requestInternal=Br.prototype.B,Br.prototype.o=function(){Br.j.o.call(this),new Sf("cle",{message:[this.uid,3]})};function Jr(){if(Kr)throw new $c(Jr)}t("H.service.extension.customLocation.Table",Jr);var Kr=!0;function Lr(e,o){var h;Kr=!1;var d=new Jr;Kr=!0,d.c=rc(x.JSON.parse(x.JSON.stringify(e))),e=e.columnNames;var g=oc();for(h=e.length;h--;)g[e[h]]=h;if(d.f=g,d.b=e.length,o){if(o.length%e.length)throw new D(Lr,1,"Invalid number of cells")}else o=[];return d.a=o,d}Jr.prototype.Md=function(){return this.c},Jr.prototype.getMeta=Jr.prototype.Md,Jr.prototype.Pd=function(){return this.a.length/this.b},Jr.prototype.getRowCount=Jr.prototype.Pd,Jr.prototype.tc=function(e){return e<this.a.length/this.b?new Mr(this,e):B},Jr.prototype.getRow=Jr.prototype.tc,Jr.prototype.Um=function(){var e=this.a.length/this.b,o,h=new x.Array(e);for(o=0;o<e;o++)h[o]=new Mr(this,o);return h},Jr.prototype.getRows=Jr.prototype.Um,Jr.prototype.Hg=function(e){var o=this.b,h=this.a,d=h.length/this.b;if(!e||e.length%o)throw new D(this.Hg,0,"Invalid number of cells");return this.a=h.concat(e),d},Jr.prototype.addCells=Jr.prototype.Hg,Jr.prototype.ol=function(){for(var e=this.b,o=this.a,h=this.a.length/this.b;e--;)o.push(z);return this.tc(h)},Jr.prototype.addRow=Jr.prototype.ol,Jr.prototype.Ta=function(){return this.c.columnNames},Jr.prototype.getColumnNames=Jr.prototype.Ta,Jr.prototype.Be=function(e){return this.f[e]===B?B:new Nr(this,e)},Jr.prototype.getColumn=Jr.prototype.Be,Jr.prototype.ua=function(e,o){return this.a[e*this.b+this.f[o]]},Jr.prototype.getCell=Jr.prototype.ua,Jr.prototype.Gc=function(e,o,h){if(o=this.f[o],e>=this.a.length/this.b)throw new D(this.Gc,0,"Row index out of bounds");if(o===B)throw new D(this.Gc,0,"Column unknown");this.a[e*this.b+o]=h},Jr.prototype.setCell=Jr.prototype.Gc,Jr.prototype.concat=function(e){var o=arguments.length,h,d=""+this.Ta(),g=this.a?this.a.slice():[];for(h=0;h<o;h++){var _=arguments[h];if(!(_ instanceof Jr))throw new D(this.concat,h);if(""+_.Ta()!==d)throw new D(this.concat,h,"Incompatible columns!");_.a&&(g=g.concat(_.a))}return Lr(this.c,g)},Jr.prototype.concat=Jr.prototype.concat;var Or=/(\n|\t|\r|")/;Jr.prototype.Gi=function(e,o){var h,d=this.b,g=this.Ta(),_=[],$=[],j=this.a,_t=-1;for(h=0;h<d;h++)(!e||e.test(g[h]))&&(g[h]==="WKT"&&(_t=_.length),_.push(h));if(!(e=_.length))throw new D(this.Gi,1,"No columns filtered");if(Pr(this,$,g,0,d,_,e,_t),o){var _e=o.length;for(h=0;h<_e;h++)$.push(`
`),g=o[h],Pr(this,$,j,g,d,_,e,_t)}else for(_e=this.Pd(),g=0;g<_e;g++)$.push(`
`),Pr(this,$,j,g,d,_,e,_t);return $.join("")};function Pr(e,o,h,d,g,_,$,j){var _t;for(_t=0;_t<$;_t++){_t&&o.push("	");var _e=h[d*g+_[_t]];if(_t!==j){if(_e!==z){if(_e=String(_e),Or.test(_e))throw new D(e.Gi,0,'Invalid character (\\n, \\r, \\t, or ") in row '+d+" column "+e.c.columnNames[_[_t]]);o.push(_e)}}else o.push(_e)}}function Nr(e,o){this.b=e,this.a=o}Jr.Column=Nr,Nr.prototype.ua=function(e){return this.b.ua(e,this.a)},Nr.prototype.getCell=Nr.prototype.ua,Nr.prototype.Gc=function(e,o){this.b.Gc(e,this.a,o)},Nr.prototype.setCell=Nr.prototype.Gc;function Mr(e,o){this.a=e,this.Nh=o}Jr.Row=Mr,Mr.prototype.Ta=function(){return this.a.Ta()},Mr.prototype.getColumnNames=Mr.prototype.Ta,Mr.prototype.ua=function(e){return this.a.ua(this.Nh,e)},Mr.prototype.getCell=Mr.prototype.ua,Mr.prototype.Gc=function(e,o){this.a.Gc(this.Nh,e,o)},Mr.prototype.setCell=Mr.prototype.Gc,Mr.prototype.md=function(){return this.a},Mr.prototype.getTable=Mr.prototype.md;function Qr(e){if(e===B)e="	";else if(!/^[^"\r\n]$/.test(e))throw new D(Qr,0);this.b=String(e).charCodeAt(0),this.Oh=A(this.Oh,this),this.C=Rr}var Rr=0;p=Qr.prototype,p.getState=function(){return this.C};function Sr(e,o,h){var d=e.C;if(d!==o)throw d===1&&(e.C=Rr),new $c(h,"Requires state: "+["READY","PARSE","PAUSE"][o]+" but found "+["READY","PARSE","PAUSE"][d])}p.abort=function(){Sr(this,2,Qr.prototype.abort),this.C=Rr},p.Oh=function(e){throw this.C=Rr,new D(Qr.prototype.parse,0,"Malformed DSV at row "+this.a.l+" column "+this.a.b+": "+e)};function Tr(e,o){var h=[];return e.parse(o,function(d,g,_){return 1>d&&(h[g]=_),0<d}),e.C=Rr,h}p.parse=function(e,o,h){Sr(this,Rr,Qr.prototype.parse),e=e.trim(),this.a=new Ur(e,this.b,this.Oh),this.c=o,this.kk=h||gf,this.C=2,this.Ph()},p.kk=gf,p.Ph=function(){var e=this.a,o=[];Sr(this,2,Qr.prototype.Ph),this.C=1;do{if(!e.g){this.C=Rr;break}if(g>e.b){if(h!==void 0&&h!==g){this.a.a("The number of columns must be the same for all rows");return}var h=g}var d=e.l,g=e.b,_=e.tf,$=this.kk(d,g,e);if(e.tf>_)for(;e.next()!==-1;);else{for(;(_=e.next())!==-1;)o.push(_);$=String.fromCharCode.apply(z,o),o.length=0}Vr(e),this.c(d,g,$)&&(this.C=e.g?2:Rr)}while(this.C===1);this.C!=2&&h!==void 0&&0<g&&h!==g&&this.a.a("The number of columns must be the same for all rows")};function Ur(e,o,h){this.c=new qo(e),this.s=o,this.g=!0,this.tf=this.l=this.b=0,Vr(this),this.a=h,this.f=[],this.i=!1}p=Ur.prototype,p.tf=0;function Vr(e){var o=e.c.Pb();e.m=!1,(e.U=o===34)&&e.c.next()}function Wr(e,o){var h=e.c;switch(e.m=!0,o){case e.s:e.b++;break;case 13:h.next(),h.Pb()!==10&&e.a("CR without LF");case 10:e.b=0,e.l++;break;case-1:e.g=!1;break;default:e.a("End of field expected")}return h.next(),-1}p.Pb=function(){if(this.m)var e=-1;else{var o=this.c;if(e=o.Pb(),this.U)switch(e){case 34:o.next(),e=o.Pb(),e!==34&&(e=Wr(this,e));break;case-1:this.a("Closing quotation mark expected")}else switch(e){case 34:this.a("Unexpected quotation mark");case this.s:case 13:case 10:case-1:e=Wr(this,e)}}return e},p.ge=function(){this.i=!0,this.f=[]},p.Gd=function(){var e=this.f.slice();return this.i=!1,this.f=[],e},p.next=function(){var e=this.Pb();return e!==-1&&this.c.next(),this.i&&this.f.push(e),this.tf++,e};function Xr(e,o,h,d){if(d=d||{},!o)throw new D(Xr,1,"has to be a function");if(!h)throw new D(Xr,2,"has to be a function");for(this.s=o,this.u=h,this.a=[],this.g={},this.f=[],this.b={},this.i={},this.l={},this.m={},this.U=d.duration||100,this.c=A(this.c,this),e=e.split("Meta:	").slice(1),o=0;o<e.length;o++){d=e[o].split(`
`),h=d[0].split("	")[0],d=d.slice(1).join(`
`),this.b[h]=new Qr,this.g[h]=Tr(this.b[h],d);var g={layerId:h,columnNames:this.g[h]};this.f.push(h),this.m[h]=Lr(g),this.i[h]=Lk(),Yr(this,d,h),this.c(h)}}function Yr(e,o,h){var d=[],g=e.g[h].length-1,_=e.m[h];try{e.b[h].parse(o,function($,j,_t){var _e=!1;return 0<$&&(d[j]=_t,j===g&&(e.a.push(_.tc(_.Hg(d))),Lk()-e.i[h]>e.U&&(_e=!0))),_e},function($,j,_t){if(0<$&&j===g)return Wn(_t)})}catch($){e.u($)}}Xr.prototype.cancel=function(){for(var e in this.l)x.clearTimeout(this.l[e])},Xr.prototype.cancel=Xr.prototype.cancel,Xr.prototype.c=function(e){var o=this,h,d;this.l[e]=x.setTimeout(function(){if(o.b[e].getState()===2)o.i[e]=Lk(),o.s(o.a,!1),o.a=[],o.b[e].Ph(),o.c(e);else{for(h=!0,d=0;d<o.f.length;d++)if(o.b[o.f[d]].getState()!==Rr){h=!1;break}h&&(0<o.a.length&&o.s(o.a,!0),o.a=[])}},0)};function Fr(e){Fr.j.constructor.call(this,Fr,e),zp(Fr)}u(Fr,Op),t("H.service.extension.customLocation.Service",Fr),Fr.prototype.Aa=function(){return{subDomain:"fleet.ls",path:"2"}},Fr.CONFIG_KEY="customLocation",Fr.prototype.nc=function(e,o){var h=o&&o.resultType;e=new Br(this,e,o);var d;return h===1||h===2?d=new Sn(e):d=new sl(e),d},Fr.prototype.createTileLayer=Fr.prototype.nc;function Zr(e,o,h,d){var g;e=e===$r?"changes":"file";var _=o[e],$=Cc(_),j=!$&&C(_,Blob);if(!$&&!j)throw new D(d,0,"Invalid "+e+" parameter");if(as)j?g=_:g=pf(_,"text/plain"),d=new x.FormData,d.append(e,g,g.name||e+".wkt"),h.method="POST",h.data=d,delete o[e];else if(j)throw new D(d,0,"Sending Blob data is not supported by the browser")}var as=x.FormData&&!!x.FormData.prototype.append;Fr.prototype.request=function(e,o,h,d,g){return bs(this,e,o,h,d,g)},Fr.prototype.request=Fr.prototype.request;function bs(e,o,h,d,g,_){var $="text/plain",j=o===cs.LAYERS_UPLOAD||o===cs.LAYERS_MODIFY||o===cs.LAYERS_IMPORT,_t=d,_e={data:B,method:"GET",headers:e.g};if(!o)throw new D(e.request,0,o);if(!h)throw new D(e.request,1,h);cr(e.request,3,g,_),j&&(C(d,Object,e.request,2,"Invalid request parameters"),_t=Wa(d),Zr(o,_t,_e,e.request));var _r=e.v().clone().G(o+"."+h).I(_t);return h===ds.JSON&&($="application/json"),e=new tf($,_r.toString(),je,_e),e.then(function(_n){var _i=_n.issues;_i&&_n.error_id&&_n.response_code?_(Error(_i[0].message)):g(_n)},function(_n){_n.type==="error"||_n.status===404?_(Error(_n.statusText||"Unable to load data")):_n.json().then(function(_i){_(Error("["+_i.issues[0].message+"] "+_r+" request failed"))},function(){_(Error("["+_n.statusText+"] "+_r+" request failed"))})}),e}var Gr="layers/list",$r="layers/modify",Ir="tiled/tile",cs={LAYERS_DELETE:"layers/delete",LAYERS_GRANT:"layers/access/grant",LAYERS_LIST:Gr,LAYERS_MODIFY:$r,LAYERS_UPLOAD:"layers/upload",LAYERS_IMPORT:"layers/import",SEARCH_ALL:"search/all",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SEARCH_TILE:Ir};Fr.EntryPoint=cs;var Hr="json",ds={TXT:"txt",JSON:Hr};Fr.EntryPointType=ds,Fr.prototype.ob=function(e,o,h){var d=this;return this.request("search/all","txt",{filter:'WKT==""',layer_id:e},function(g){var _=String(g).replace(/[\r\n]+$/g,"").split("	");d.request(Gr,Hr,{layer_id:e,detail_level:"all"},function($){$=$.layers[0],$.columnNames=_,o(Lr($))},h)},h)},Fr.prototype.getLayer=Fr.prototype.ob,Fr.prototype.Kj=function(e,o,h,d){function g(){return++$<_?j.request("layers/access/grant",Hr,{layer_id:e,granted_app_id:o[$].grantedAppId,permissions:o[$].permissions.join(",")},g,d):j.ob(e,h,d)}var _=o&&o.length,$=-1,j=this;return g()},Fr.prototype.grantAccess=Fr.prototype.Kj,Fr.prototype.jj=function(e,o,h){return this.request("layers/delete",Hr,{layer_ids:e},o,h)},Fr.prototype.deleteLayer=Fr.prototype.jj,Fr.prototype.$b=function(e,o,h){function d(){setTimeout(function(){_t.ob($,function(_i){setTimeout(g.bind(null,_i),_r)},function(){64e3>_e?(_e+=_r,d()):h(x.Error("Timeout"))})},_r),_r*=2}function g(_i){var _o=JSON.stringify(_i.Ta()),_a=e.grants;if(_o!==JSON.stringify(j)){var _u="Results into different column names on the backend: "+_o;setTimeout(function(){_t.jj($,function(){h(x.Error(_u))},function(_f){h(x.Error(_u+". "+_f.message))})},_r)}else _a&&_a.length?_t.Kj($,_a,o,h):o(_i)}var _,$,j,_t=this,_e=0,_r=1e3,_n=!e||!Cr($=e.layerId)&&(_="layerId")||!Dr(j=e.columnNames)&&(_="columnNames")?0:Da(o)?Da(h)?-1:2:1;if(0<=_n)throw new D(_t.$b,_n,_||arguments[_n]);return _t.ob($,function(){h(x.Error("Layer exists already"))},function(){var _i={layer_id:$,file:j.join("	")},_o=e.level,_a=e.storage;_o!==B&&(_i.level=_o),_a!==B&&(_i.storage=_a),_t.request("layers/upload",Hr,_i,d,h)})},Fr.prototype.createLayer=Fr.prototype.$b;function es(e,o,h,d,g){var _=[],$;return e=e.request(o,Hr,h,function(j){j.geometries.length?(j=Er(j,h.layer_id),$=new Xr(j,d,g),_.push($)):d(hf,!0)},g),_.push(e),new vr(_)}Fr.prototype.Ub=function(e,o,h,d,g,_){if(!Bc(e))throw new D(this.Ub,0,"has invalid type");if(C(o,kg,this.Ub,1,"has invalid type"),!Fc(h))throw new D(this.Ub,2,"has invalid type");return cr(this.Ub,3,d,g),e={layer_ids:e.join(","),proximity:o.lat+","+o.lng+","+h},_&&Ya(e,_),es(this,"search/proximity",e,d,g)},Fr.prototype.searchByProximity=Fr.prototype.Ub,Fr.prototype.Tb=function(e,o,h,d,g,_){var $="";if(!Bc(e))throw new D(this.Tb,0,"has invalid type");if(!Cc(o)&&!C(o,L))throw new D(this.Tb,1,"has invalid type");if(!Fc(h))throw new D(this.Tb,2,"has invalid type");if(cr(this.Tb,3,d,g),e={layer_ids:e.join(","),radius:h},Cc(o))e.route_id=o;else{var j=o.$;for(o=0,h=j.length;o<h;o+=3)$+=j[o]+","+j[o+1],o<h-3&&($+=",");e.corridor=$}return _&&Ya(e,_),es(this,"search/corridor",e,d,g)},Fr.prototype.searchByCorridor=Fr.prototype.Tb,Fr.prototype.Fc=function(e,o,h,d,g){function _(_t,_e){_e&&j--,h(_t,!j)}var $=[],j;if(!Bc(e))throw new D(this.Fc,0,"has invalid type");for(C(o,K,this.Fc,1,"has invalid type"),cr(this.Fc,2,h,d),o={bbox:o.c+","+o.a+";"+o.f+","+o.b},g&&Ya(o,g),e=o.layer_id?[o.layer_id]:e,g=0,j=e.length;g<j;g++)o.layer_id=e[g],$.push(es(this,"search/bbox",o,_,d));return new vr($)},Fr.prototype.searchByBoundingBox=Fr.prototype.Fc,Fr.prototype.li=function(e,o,h,d){var g,_=[];if(!Cc(e))throw new D(this.li,0,"has invalid type");cr(this.li,1,o,h);var $={layer_id:e};return d&&Ya($,d),d=this.request("search/all",Hr,$,function(j){j.geometries.length?(j=Er(j,e),g=new Xr(j,o,h),_.push(g)):o(hf,!0)},h),_.push(d),new vr(_)},Fr.prototype.searchAll=Fr.prototype.li;var fs={delete:/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};function gs(e,o,h,d,g,_){function $(){_a++,d(this,_a===_i)}function j(ty){_a++,g(ty,this,_a===_i)}var _t=o!=="append",_e,_r={},_n=oc(),_i=0,_o=[],_a=0;if(!Bc(h))throw new D(_,0,h);for(cr(_,1,d,g),_e=h.length;_e--;){var _u=h[_e];if(C(_u,Mr)){var _f=_u.md().Md().layerId,_h=_u.ua("GEOMETRY_ID");if(_t){if(_h===z||String(_h)==="")var _d='GEOMETRY_ID must not be null or ""';_r[_h=_f+"_"+_h]&&(_d="same GEOMETRY_ID for multiple rows"),_r[_h]=_u}else _h!==z&&String(_h)!==""&&(_d='GEOMETRY_ID must be null or ""')}else _d="Invalid type";if(_d)throw new D(_,0,"- Invalid row at index "+_e+", "+_d);_h=_n[_f],_h||(_h=_n[_f]=[],_i++),_h.push(_u)}for(_f in _n){for(_h=_n[_f],h=[],_e=_h.length;_e--;)h.push(_h[_e].Nh);_o.push(e.request($r,Hr,{layer_id:_f,action:o,changes:_h[0].md().Gi(fs[o]||null,h)},A($,_h),A(j,_h)))}return new vr(_o)}Fr.prototype.$i=function(e,o,h){return gs(this,"append",e,o,h,this.$i)},Fr.prototype.appendRows=Fr.prototype.$i,Fr.prototype.il=function(e,o,h){return gs(this,"update",e,o,h,this.il)},Fr.prototype.updateRows=Fr.prototype.il,Fr.prototype.kj=function(e,o,h){return gs(this,"delete",e,o,h,this.kj)},Fr.prototype.deleteRows=Fr.prototype.kj,X.prototype.Yl=function(e){return this.Ma(Fr,e)},X.prototype.getCustomLocationService=X.prototype.Yl;function hs(e){jq.j.constructor.call(this,hs,e),zp(hs)}u(hs,Op),t("H.service.extension.customRoute.Service",hs),hs.prototype.Aa=function(){return{subDomain:"s.fleet.ls",path:"2"}},hs.CONFIG_KEY="customRoute",hs.prototype.a=function(e){return Error(e.issues&&e.issues.length?e.issues.map(function(o){return o.message}).join(". "):e)},hs.prototype.Cd=function(e,o,h){return cr(this.Cd,1,o,h),e=this.v().clone().G("calculateroute.json").I(e),this.B(e,o,h)},hs.prototype.calculateRoute=hs.prototype.Cd,X.prototype.Zl=function(e){return this.Ma(hs,e)},X.prototype.getCustomRoutingService=X.prototype.Zl;function is(e,o,h){h=h||{};var d=+h.min,g=+h.max;h.min=d?ae(d,1,17):1,h.max=g?ae(g,1,17):17,is.j.constructor.call(this,h),C(e,js,is,0),C(o,Wh,is,1),this.f=e,o.a&&o.a("OMV"),this.Qa(o,!0),this.i=xp(this)}u(is,S),t("H.service.trafficVectorTile.Provider",is),is.prototype.Sb=ff,is.prototype.providesOMV=is.prototype.Sb,is.prototype.ub=function(e){return this.i.test(e)},is.prototype.cacheFilter=is.prototype.ub,is.prototype.uc=function(e,o,h){return ks(this.f,e,o,h).toString()},is.prototype.getTileKey=is.prototype.uc,is.prototype.nb=function(){return this.m},is.prototype.getCache=is.prototype.nb,is.prototype.MAX_STORE_TIME=2592e6,is.prototype.l=function(){return od()},is.prototype.c=function(){return od()?nd():is.j.c.call(this)},is.prototype.s=function(){return this.f},is.prototype.B=function(e,o,h,d,g){return this.f.Ha(e,o,h,d,g)},is.prototype.requestInternal=is.prototype.B,is.prototype.gb=function(e){e.a&&e.a("OMV"),this.Qa(e)},is.prototype.setStyle=is.prototype.gb,is.prototype.V=function(){return is.j.Ya.apply(this)},is.prototype.getStyle=is.prototype.V,is.prototype.m=new Rk(256),is.prototype.ba=function(){return null},is.prototype.getCopyrights=is.prototype.ba;function js(e){js.j.constructor.call(this,js,e),this.b=(e||jf).layer||"traffic"}u(js,Op),t("H.service.trafficVectorTile.Service",js),js.prototype.Aa=function(){return{subDomain:"traffic.vector",path:"v2"}},js.CONFIG_KEY="trafficVectorTile",js.prototype.$b=function(e,o,h){o=o||{};var d={min:0,max:22};return Ea(h)&&yp(d,h),new sl(new is(this,e,o),d)},js.prototype.createLayer=js.prototype.$b,js.prototype.Ha=function(e,o,h,d,g){return this.B(ks(this,e,o,h),function(_){return _.arrayBuffer().then(d,g)},g,"arraybuffer")};function ks(e,o,h,d){return e.v().clone().G("traffictiles/"+e.b+"/mc/"+d+"/"+o+"/"+h+"/omv")}js.prototype.f=function(e){return Ao()+"/"+e},js.prototype.vm=function(){return this.b},js.prototype.getLayerName=js.prototype.vm,X.prototype.oh=function(e){return this.Ma(js,e)},X.prototype.getTrafficVectorTileService=X.prototype.oh;function ls(e){ls.j.constructor.call(this,ls,e)}u(ls,Op),t("H.service.SearchService",ls),ls.CONFIG_KEY="search",ls.prototype.Aa=function(){return{subDomain:"search",path:"v1"}},ls.prototype.a=function(e){return e=[e.title,e.action,e.cause].filter(function(o){return o}),Error(e.join(". "))},ls.prototype.Zg=function(e,o,h){return e=this.v().clone().Ba("geocode").G("geocode").I(e),this.B(e,o,h)},ls.prototype.geocode=ls.prototype.Zg,ls.prototype.ii=function(e,o,h){return e=this.v().clone().Ba("revgeocode").G("revgeocode").I(e),this.B(e,o,h)},ls.prototype.reverseGeocode=ls.prototype.ii,ls.prototype.sl=function(e,o,h){return e=this.v().clone().Ba("autosuggest").G("autosuggest").I(e),this.B(e,o,h)},ls.prototype.autosuggest=ls.prototype.sl,ls.prototype.zl=function(e,o,h){return e=this.v().clone().Ba("discover").G("discover").I(e),this.B(e,o,h)},ls.prototype.discover=ls.prototype.zl,ls.prototype.Gn=function(e,o,h){return e=this.v().clone().Ba("lookup").G("lookup").I(e),this.B(e,o,h)},ls.prototype.lookup=ls.prototype.Gn,ls.prototype.ul=function(e,o,h){return e=this.v().clone().Ba("browse").G("browse").I(e),this.B(e,o,h)},ls.prototype.browse=ls.prototype.ul,X.prototype.Wm=function(e){return this.Ma(ls,e)},X.prototype.getSearchService=X.prototype.Wm;function ms(e){if(this.c=!!e.toBypassToken,!this.c&&!e.token)throw new D(ms,0,'"token" must be specified');zp(ms,"Use HERE IML service instead."),ms.j.constructor.call(this,ms,e),this.l=e.token,this.f={},this.b={}}u(ms,Op),t("H.service.xyz.Service",ms),ms.prototype.Aa=function(){return{host:"xyz.api.here.com",path:"hub/spaces"}},ms.prototype.a=function(e){return Error(e.errorMessage||e.message)},ms.prototype.jh=function(e,o,h){return zc(e,"String",this.jh,0,'"projectId" must be a string'),ns(this.jh,1,o,h),e=os(this.v().clone().wd("project-api/projects/"+e)),this.B(e,o,h)},ms.prototype.getProject=ms.prototype.jh,ms.prototype.Gj=function(e,o,h){return ns(this.Gj,0,e,o),h=ps(this,this.v().clone().I(h||{})),this.B(h,e,o)},ms.prototype.getSpaces=ms.prototype.Gj,ms.prototype.Kf=function(e,o,h){return zc(e,"String",this.Kf,0,'"spaceId" must be a string'),ns(this.Kf,1,o,h),e=ps(this,this.v().clone().G(e)),this.B(e,o,h)},ms.prototype.getSpace=ms.prototype.Kf,ms.prototype.Qd=function(e,o,h){return zc(e,"String",this.Qd,0,'"spaceId" must be a string'),ns(this.Qd,1,o,h),e=ps(this,this.v().clone().G(e+"/statistics")),this.B(e,o,h)},ms.prototype.getStatistics=ms.prototype.Qd,ms.prototype.Ff=function(e,o,h,d,g,_,$){return e=ps(this,this.v().clone().G(d+"/tile/web/"+h+"_"+e+"_"+o+".mvtf").I(Object.assign({clip:!0},$))),this.B(e,function(j){return j.arrayBuffer().then(g)},_,"arraybuffer")},ms.prototype.search=function(e,o,h,d){return zc(e,"String",this.search,0,'"spaceId" must be a string'),ns(this.search,1,o,h),e=ps(this,this.v().clone().G(e+"/search").I(d||{})),this.B(e,o,h)},ms.prototype.search=ms.prototype.search,ms.prototype.Sc=function(e,o,h,d){if(zc(e,"String",this.Sc,0,'"spaceId" must be a string'),!Ea(o))throw new D(this.Sc,1,'"params" must be an object');return ns(this.Sc,2,h,d),e=ps(this,this.v().clone().G(e+"/features").I(o)),this.B(e,h,d)},ms.prototype.getFeaturesById=ms.prototype.Sc,ms.prototype.Jd=function(e,o,h,d){if(zc(e,"String",this.Jd,0,'"spaceId" must be a string'),!Ea(o))throw new D(this.Sc,1,'"params" must be an object');return ns(this.Jd,2,h,d),e=ps(this,this.v().clone().G(e+"/bbox").I(o)),this.B(e,h,d)},ms.prototype.getFeaturesByBoundingBox=ms.prototype.Jd,ms.prototype.ba=function(e){var o=this.f[e];return o||(this.b[e]||qs(this,e),null)},ms.prototype.$c=function(e,o,h,d,g){if(zc(e,"String",this.$c,0,'"spaceId" must be a string'),!Ea(o))throw new D(this.$c,1,'"geojsonObject" must be an object');if(ns(this.$c,2,h,d),g&&!Ea(g))throw new D(this.$c,4,'"opt_params" must be an object');return rs(this,e,h,d,"PUT",o,g)},ms.prototype.putFeatures=ms.prototype.$c,ms.prototype.Yc=function(e,o,h,d,g){if(zc(e,"String",this.Yc,0,'"spaceId" must be a string'),!Ea(o))throw new D(this.Yc,1,'"featureCollection" must be an object');if(ns(this.Yc,2,h,d),g&&!Ea(g))throw new D(this.Yc,4,'"opt_params" must be an object');return rs(this,e,h,d,"POST",o,g)},ms.prototype.postFeatures=ms.prototype.Yc,ms.prototype.hd=function(e,o,h,d){if(zc(e,"String",this.hd,0,'"spaceId" must be a string'),!Ea(o))throw new D(this.hd,1,'"params" must be an object');return ns(this.hd,2,h,d),rs(this,e,h,d,"DELETE",B,o)},ms.prototype.deleteFeatures=ms.prototype.hd;function rs(e,o,h,d,g,_,$){var j=Object.assign(e.c?{}:{authorization:"Bearer "+e.l},{"Content-Type":"application/geo+json"},e.g);return g={method:g,headers:j},_&&(g.data=JSON.stringify(_)),o=os(e.v().clone().G(o+"/features").I($||{})),_=new tf("application/json",o.toString(),je,g),_.then(h,Qp(e,o,d)),_}function qs(e,o){e.b[o]=ss,e.Kf(o,function(h){e.b[o]=ts,e.f[o]=h.copyright,e.dispatchEvent("copyrightupdate")},function(h){throw e.b[o]=us,h})}function ps(e,o){return e.c?o:os(o).I({access_token:e.l})}function os(e){var o=Object.assign({},e.getQuery());return delete o.apikey,e.bf(o)}ms.CONFIG_KEY="xyz";var ss=1,ts=2,us=-1;function ns(e,o,h,d){if(!Da(h))throw new D(e,o,'"onResult" must be a function');if(!Da(d))throw new D(e,o+1,'"onError" must be a function')}X.prototype.jn=function(e){return this.Ma(ms,e)},X.prototype.getXYZService=X.prototype.jn;function vs(e,o,h){var d;if(vs.j.constructor.call(this,h?{min:h.min,max:h.max,engineType:h.engineType}:void 0),C(e,ms,vs,0),!Cc(o))throw new D(vs,1,'"spaceId" must be a string');if(this.m=e,this.f=o,this.i={},h&&(["limit","simplificationLevel","tags"].forEach(function(g){g in h&&(this.i[g]=h[g])},this),e=h.parameters))for(d in e)this.i[d]=e[d];this.Qa(this.b===kk.WEBGL?new ti({sources:{xyz:{type:"MVT"}},layers:{xyz:{data:{source:"xyz",layer:this.f},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#000000",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.f,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.f,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.f,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.f,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#000000",lineWidth:"2px",renderOrder:203}]}))}u(vs,S),t("H.service.xyz.Provider",vs),vs.prototype.B=function(e,o,h,d,g){return this.m.Ff(e,o,h,this.f,d,g,this.i)},vs.prototype.requestInternal=vs.prototype.B,vs.prototype.ba=function(){return this.m.ba(this.f)},vs.prototype.getCopyrights=vs.prototype.ba,vs.prototype.Sb=ff,vs.prototype.providesOMV=vs.prototype.Sb,vs.prototype.V=function(){return this.Ya()},vs.prototype.getStyle=vs.prototype.V,vs.prototype.gb=function(e){C(e,ti)&&e.a("MVT"),this.Qa(e)},vs.prototype.setStyle=vs.prototype.gb,t("H.service.buildInfo",function(){return Hf("H-service","1.49.1","74e5afb",{region:"row"})});function ws(e,o,h,d,g){g&1&&xs(e,e,o,h,d,0),g&2&&xs(e,e,o,h,d,1),g&4&&xs(e,e,o,h,d,2),g&8&&xs(e,e,o,h,d,3)}function xs(e,o,h,d,g,_){for(var $=(h+1)*(h+1),j,_t=4*d,_e=h+1,_r,_n=[{r:0,Hl:0,tl:0,Fg:0,next:null}],_i=1,_o=["r","g","b","a"][_],_a=2*h+1,_u,_f;_i<_a;_i++)_n[_i]={r:0,Hl:0,tl:0,Fg:0,next:null},_n[_i-1].next=_n[_i];_n[2*h].next=_n[0];var _h=4*(d-1);for(j=0;j<g;j++){var _d=j*_t,ty=e[_d+_],ey=ty*_e*(h+2)/2;for(_a=ty*_e,_i=0;_i<=h;_i++)_n[_i][_o]=ty;var sy=0;for(_i=1;_i<=h;_i++){var ny=_i<d?_d+4*_i:_d+_h;ny=e[ny+_],ey+=ny*(_e-_i),sy+=ny,_n[h+_i][_o]=ny}ny=_n[0],_u=_n[_e],_i=_d,_f=4*_e;var uy=_d+_h;for(ty=0;ty<d;ty++){o[_i+_]=ey/$,ey-=_a;var fy=ty+_e<d?_i+_f:uy;if(fy=e[fy+_],sy+=fy,ey+=sy,_a-=ny[_o],_a+=_u[_o],sy-=_u[_o],ny[_o]=fy,ny=ny.next,_u=_u.next,_i+=4,!ey)for(;(_r=4*(ty+_e))<_t&&e[_d+_+_r]===0;)ty++,_i+=4}}for(_d=(g-1)*_t,ty=0;ty<d;ty++){for(e=4*ty,j=o[e+_],ey=j*_e*(h+2)/2,_a=j*_e,_i=0;_i<=h;_i++)_n[_i][_o]=j;for(sy=0,_i=1;_i<=h;_i++)ny=_i<g?e+_i*_t:e+_d,ny=o[ny+_],ey+=ny*(h-_i+1),sy+=ny,_n[h+_i][_o]=ny;for(ny=_n[0],_u=_n[_e],_i=e,uy=_e*_t,_h=e+_d,j=0;j<g;j++)if(o[_i+_]=ey/$,ey-=_a,fy=j+_e<g?_i+uy:_h,fy=o[fy+_],sy+=fy,ey+=sy,_a-=ny[_o],_a+=_u[_o],sy-=_u[_o],ny[_o]=fy,ny=ny.next,_u=_u.next,_i+=_t,!ey)for(;(_r=j+_e)<g&&o[_r*_t+_+e]===0;)j++,_i+=_t}}function ys(e,o,h){this.f=o=e>>o,this.l=Math.log(o)*Math.LOG2E,this.i=e=document.createElement("CANVAS"),this.a=e.getContext("2d"),this.b=e.width=e.height=3*o;var d=document.createElement("canvas");e=h.a;var g=h.b;o=[];var _;d.width=256,d.height=1,d=d.getContext("2d");for($ in g)g.hasOwnProperty($)&&o.push({stop:parseFloat($),value:g[$]});g=o.length,o.sort(this.s),0<o[0].stop&&o.unshift({stop:0,value:o[0].value}),1>o[g-1].stop&&o.push({stop:1,value:o[g-1].value}),g=o.length;var $=d.createLinearGradient(0,0,256,0);for(_=0;_<g;_++){if(!e&&_t){var j=_t.stop+(o[_].stop-_t.stop)/2;$.addColorStop(j,_t.value),$.addColorStop(j,o[_].value)}$.addColorStop(o[_].stop,o[_].value);var _t=o[_]}d.fillStyle=$,d.fillRect(0,0,256,1),this.c=d.getImageData(0,0,256,1).data,this.g=h.a}ys.prototype.s=function(e,o){return e.stop-o.stop};function zs(e,o){this.a=e,this.size=o}function As(e,o){var h,d=0;if(!Ea(e)||Va(e))throw new D(As,0,e);for(h in e){var g=+h;if(d++,!(Fc(g)&&0<=g&&1>=g&&Cc(e[h])))throw new D(As,0,e)}if(2>d)throw new D(As,0,"Specify at least 2 stops");this.b=e,this.a=!!o}t("H.data.heatmap.Colors",As);var Bs=new As({0:"#008","0.2":"#0b0","0.5":"#ff0","0.7":"#f00"},!0);As.DEFAULT=Bs;function Cs(e,o,h){this.a=e=ae(e,0,30),this.u=o,this.i=h,this.s=[],this.b=[];do this.b[e]=[],this.s[e]=new Ds;while(e--);o===Es?(this.m=Fs,this.l=Gs):(this.m=Hs,this.l=Is),this.c=1/0,this.f=-1/0}var Js=Math.log(.5);function Gs(e){return this.g?Math.round((e-this.c)/this.g*255):127}function Is(e){return this.U===void 0?127:Math.round(255*Math.pow(e,this.U))}Cs.prototype.Db=function(e){var o,h,d=e.value;d===void 0&&(d=1),d>this.f&&(this.f=d,this.g=this.f-this.c),d<this.c&&(this.c=d,this.g=this.f-this.c);var g=mj.Pc(e).scale(1073741823).floor();d=this.a;var _=g.x>>30-d;for(g=g.y>>30-d,h=this.m;-1<d;){this.b[d][g]||(this.b[d][g]=[]),(o=this.b[d][g][_])||(o=this.b[d][g][_]=new h(_,g,d)),o.Db(e,d);var $=this.s[d];$.f>o.b&&($.f=o.b),$.a<o.b&&($.a=o.b),$.c>o.a&&($.c=o.a),$.b<o.a&&($.b=o.a),d--,_>>=1,g>>=1}};function Ks(e,o,h,d,g){var _=1<<o,$,j;return d=$d(d,_),_=0<=h&&h<_&&($=e.b[o])&&(j=$[h])&&(_=j[d])||null,!_&&g&&0<=o&&(_=Ks(e,o-1,h>>1,d>>1,g)),_}function Ls(e,o,h,d,g,_){for(var $,j=[];h<=d;h++)for($=g;$<=_;$++)j.push(Ks(e,o,h,$,!1));return j}function Ms(e,o){var h=0,d=0,g=Ks(e,0,0,0,!1),_;return o.f||(o.z===e.a?o.c=o.a:(Ns(e,o,function($){var j=Os(e,$),_t=4-j.length;if($.z!==e.a){for(_=0;_<j.length;_++)h+=j[_].a,d++;h+=_t*g.a,d+=_t}}),o.c=h/d),o.f=!0),o.c}function Ns(e,o,h){o=[o];for(var d,g;0<o.length;)g=o.shift(),d=Os(e,g),h(g),o.push.apply(o,d)}function Os(e,o){var h=[],d,g,_;for(g=0;1>=g;g++)for(_=0;1>=_;_++)(d=Ks(e,o.z+1,2*o.x+g,2*o.y+_,!1))&&h.push(d);return h}Cs.prototype.clear=function(){Cs.call(this,this.a,this.u,this.i)};function Hs(e,o,h){this.x=e,this.y=o,this.z=h,this.a=this.b=this.g=0,this.f=!1,this.c=0}Hs.prototype.Db=function(e,o){this.g++,this.b+=e.value||1,this.a=this.b/Math.pow(2,2*(30-o))};function Fs(e,o,h){this.x=e,this.y=o,this.z=h,this.a=this.b=this.g=0,this.f=!1,this.c=0}Fs.prototype.Db=function(e){e=e.value,this.b+=e!==void 0?e:1,this.a=this.b/++this.g,this.f=!1};function Ds(){this.f=this.c=1/0,this.a=this.b=-1/0}function Ps(e){var o=e||{},h=+o.sampleDepth,d=o.pointSize;e=+o.coarseness;var g=o.colors,_={min:o.min,max:o.max,engineType:o.engineType},$=o.tileSize,j=+o.dataMax;if(o.tileSize&&(_.tileSize=$),S.call(this,_),lk(this,o.opacity),this.i=o.type==="value"?Es:Qs,this.sampleDepth_=Fc(h)?ae(Math.round(h),1,8):4,this.L=this.i===Qs?Fc(d)?ae(Math.round(7-d),0,6):2:1,this.D=!!o.assumeValues,o=this.max,this.T=Fc(j)?ae(Math.round(j),this.min,o+this.sampleDepth_):o,e=Fc(e)?ae(Math.round(e),0,3):1,g&&!C(g,As))throw new D(Ps,0,"colors");this.f=new Cs(o+this.sampleDepth_+this.L,this.i,this.T),this.aa=new ys(this.tileSize,e,g||Bs),this.u=A(this.u,this),this.m=A(this.m,this),this.R=new Mk(20,this.u)}u(Ps,S),t("H.data.heatmap.Provider",Ps),Ps.prototype.ic=function(e){lk(this,e)},Ps.prototype.setOpacity=Ps.prototype.ic,Ps.prototype.Tc=function(){return this.g},Ps.prototype.getOpacity=Ps.prototype.Tc,Ps.prototype.Ve=ff,Ps.prototype.providesRasters=Ps.prototype.Ve,Ps.prototype.B=function(e,o,h,d,g){var _=this.D,$,j;if(Ks(this.f,0,0,0,!1)){if(!_){var _t=Ls(this.f,h,o-1,o+1,e-1,e+1);for($=_t.length;$--&&!_;)if(_t[$]!==null){_=!0;break}}_&&(j=this.R.push([e,o,h,d,g],this.m))}return _||d(null),j||Hl},Ps.prototype.requestInternal=Ps.prototype.B;function Rs(e,o,h,d){var g=document.createElement("canvas"),_=e.tileSize,$=g.getContext("2d");g.width=g.height=_;var j=e.aa,_t=e.f,_e=e.D,_r=e.i,_n=e.L,_i=j.f,_o=j.a,_a,_u,_f=_r===Qs?_n===void 0?2:_n:1;_n=_f,e=Math.min(e.sampleDepth_+_f,j.l),_f=j.b;var _h=_t.a;if(_e&&_r===Es){for(_u=-1;1>=_u;_u++)for(_e=-1;1>=_e;_e++){var _d=(_d=Ks(_t,d,h+_u,o+_e,!0))?_t.l(Ms(_t,_d)):128;_o.fillStyle="rgba("+_d+",128,0,1)",_o.fillRect((_e+1)*_i,(_u+1)*_i,_i,_i)}_e=_i-Math.floor(_i/10),_u=3,_d=_o.getImageData(0,0,_f,_f),ws(_d.data,_e,_f,_f,_u),_o.putImageData(_d,0,0)}else _o.fillStyle=_e?"#080":"#000",_o.fillRect(0,0,_f,_f);for(;_n<=e&&d+_n<=_h;_n++){_e=_i>>_n,_u=_i-_e;var ty=_r===Qs?127+Math.floor(128/(1<<e-_n)):255;_d=(1<<_n)+2;var ey=1<<_n,sy=o<<_n,ny=h<<_n;for(ey=Ls(_t,d+_n,ny-1,ny+ey,sy-1,sy+ey),sy=ey.length;sy--;){ny=sy%_d;var uy=sy/_d<<0;(_a=ey[sy])&&(_a=_t.l(_a.a),_o.fillStyle="rgba("+_a+","+ty+",0,1)",_o.fillRect(ny*_e+_u,uy*_e+_u,_e,_e))}_d=_o,ty=_e,ey=_u,sy=_i+2*_e,_e=_i+2*_e,ny=ny=3,uy=_o.getImageData(ey,_u,sy,_e),ws(uy.data,ty,sy,_e,ny),_d.putImageData(uy,ey,_u)}for(o=_o.getImageData(0,0,_f,_f),h=j.c,d=j.g,_t=o.data,e=0,_f=_t.length;e<_f;e+=4)_r=_t[e],_n=_t[e+1],h.length===4&&(_r=0),_t[e]=h[4*_r],_t[e+1]=h[4*_r+1],_t[e+2]=h[4*_r+2],_t[e+3]=h[4*_r+3]*(d?_n/255:10>_n?0:1);return _o.putImageData(o,0,0),j=new zs(j.i,_i),_i=j.size,$.drawImage(j.a,_i,_i,_i,_i,0,0,_,_),g}Ps.prototype.u=function(e,o){e.done(Rs(this,o[0],o[1],o[2]))},Ps.prototype.m=function(e,o,h){var d=e.data;e=d[3],d=d[4],h?d():e(o)},Ps.prototype.Zi=function(e,o){var h;if(!Bc(e))throw new D(this.Zi,0,e);if(h=e.length){for(;h--;)this.f.Db(e[h]);e=this.f;var d;h=e.s;var g=e.a,_=0;if(e.u===Qs){var $=h[e.a].a;for(d=e.a;0<=d&&h[d].a===$;d--)_=d;for($=h[0].a,d=0;d<=_&&$===h[d].a;d++)g=d;_>e.i&&(_=e.i),$=Math.round(g+(_-g)/2),e.U=Js/Math.log(h[$].b)}this.reload(!!o)}},Ps.prototype.addData=Ps.prototype.Zi,Ps.prototype.clear=function(){this.f.clear(),this.reload(!0)},Ps.prototype.clear=Ps.prototype.clear;var Qs=0,Es=1;function Ss(){}t("H.data.utils.Dom",Ss),Ss.prototype.Hd=function(e){return!!e&&/^\s*(1|true)\s*$/i.test(this.Na(e))},Ss.prototype.getBoolean=Ss.prototype.Hd,Ss.prototype.Na=function(e){var o;try{if(e.nodeType===Node.ATTRIBUTE_NODE)return e.value;var h="",d=0,g=e.childNodes;for(o=g.length;d<o;d++)g[d].nodeType!==Node.COMMENT_NODE&&(h+=g[d].nodeValue.replace(/^\s+|\s+$/g,""))}catch{}return h||""},Ss.prototype.getString=Ss.prototype.Na,Ss.prototype.Gf=function(e){return parseFloat(this.Na(e))||0},Ss.prototype.getFloat=Ss.prototype.Gf,Ss.prototype.vk=function(e){var o=e.split(/\s+/),h=o.length,d=!(o&&h==1),g=d?1:3,_=[],$;for(d||(o=e.split(","),h=o.length),$=0;$<h;$+=g)if(e=this.$h(d?o[$]:$+3>o.length?null:o.slice($,$+3)))_.push(e);else return[];return _},Ss.prototype.parseCoords=Ss.prototype.vk,Ss.prototype.$h=function(e){if(!e)return null;var o=e instanceof Array&&0<e.length&&4>e.length?e:e.split(",");e=parseFloat(o[0]);var h=parseFloat(o[1]);return o=parseFloat(o[2]),isNaN(h)||isNaN(e)?null:new kg(h,e,isNaN(o)?void 0:o)},Ss.prototype.parseCoord=Ss.prototype.$h,Ss.prototype.Ef=function(e){return e=this.Na(e),/^[0-9a-fA-F]{8}$/.test(e)?"#"+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2):"#000000ff"},Ss.prototype.getColor=Ss.prototype.Ef;function Ts(e){e=e.attributes;for(var o,h=e.length;h--;)switch(o=e[h],o.name){case"x":this.x=parseFloat(o.value);break;case"y":this.y=parseFloat(o.value);break;case"xunits":this.Vc=Ss.prototype.Na(o)==="fraction";break;case"yunits":this.zc=Ss.prototype.Na(o)==="fraction"}}t("H.data.kml.HotSpot",Ts);function Us(e){var o=e.childNodes,h=new Ss;for(e=o.length;e--;){var d=o[e];switch(d.nodeName){case"href":this.href=h.Na(d)}}}t("H.data.kml.Icon",Us);function Vs(e){var o;if(e){e=e.childNodes;var h=e.length;for(o=new Ss;h--;){var d=e[h];switch(d.nodeName){case"scale":this.scale=o.Gf(d);break;case"Icon":this.icon=d=new Us(d);break;case"hotSpot":this.a=d=new Ts(d)}}}}t("H.data.kml.IconStyle",Vs);function Ws(){this.a={4:function(e){return["#",e.charAt(1),e.charAt(1),e.charAt(2),e.charAt(2),e.charAt(3),e.charAt(3),"ff"].join("")},5:function(e){return["#",e.charAt(1),e.charAt(1),e.charAt(2),e.charAt(2),e.charAt(3),e.charAt(3),e.charAt(4),e.charAt(4)].join("")},7:function(e){return e+"ff"},9:function(e){return e}},this.b={4:function(e){return[Xs(e.charAt(1)),Xs(e.charAt(2)),Xs(e.charAt(3)),255]},5:function(e){return[Xs(e.charAt(1)),Xs(e.charAt(2)),Xs(e.charAt(3)),Xs(e.charAt(4))]},7:function(e){return e=parseInt(e.substring(1),16),[e>>16&255,e>>8&255,e&255,255]},9:function(e){return e=parseInt(e.substring(1),16),[e>>24&255,e>>16&255,e>>8&255,e&255]}}}t("H.data.utils.ColorHelper",Ws);function Xs(e){return e=parseInt(e,16),(e<<4)+e}function Ys(e){return 16>e?"0"+Math.round(e).toString(16):Math.round(e).toString(16)}function Zs(e,o,h){return/^(#|rgb).*/.test(o)?(h||(h="",o.charAt(0)==="#"?h=e.a[o.length]?o:"":o.substr(0,3)==="rgb"&&(o=o.match(/\d+(\.\d+)?/g),h=o.length,h=2<h&&5>h?["#",Ys(+o[0]),Ys(+o[1]),Ys(+o[2]),3<h?Ys(255*+o[3]):"ff"].join(""):""),o=h),e=e.b[o.length](o),e[3]=Math.round(e[3]/255*100)/100,e):[0,0,0,255]}Ws.prototype.el=function(e,o){var h="";if(!/^(#|rgb).*/.test(e)){h="";var d;for(d=0;6>d;d++)h+="ABCDEF0123456789".charAt(Math.floor(16*Math.random()));return h+"ff"}for(e=Zs(this,e,o),o=0;4>o;o++)3>o?d=Math.floor(Math.random()*(e[o]+1)):d=255*e[o],h+=Ys(d);return h},Ws.prototype.toRandomRGBA=Ws.prototype.el;function $s(e){e=e.childNodes;for(var o,h=e.length,d=new Ss,g=new Ws;h--;)switch(o=e[h],o.nodeName){case"color":this.a=d.Ef(o);break;case"colorMode":this.b=d.Na(o)}this.b==="random"&&(this.a="#"+g.el(this.a,!1))}t("H.data.kml.ColorStyle",$s);function at(e){var o=e.childNodes,h=o.length,d=new Ss;for(this.a=this.fill=!0,this.b=new $s(e);h--;)switch(e=o[h],e.nodeName){case"fill":this.fill=d.Hd(e);break;case"outline":this.a=d.Hd(e)}}t("H.data.kml.PolyStyle",at);function bt(e){var o=e.childNodes,h=o.length,d=new Ss;for(this.a=new $s(e);h--;)e=o[h],e.nodeName==="width"&&(this.width=d.Gf(e))}t("H.data.kml.LineStyle",bt);function ct(e){e=e.childNodes;for(var o,h=e.length,d=new Ss;h--;)switch(o=e[h],o.nodeName){case"bgColor":this.bgColor=d.Ef(o);break;case"textColor":this.textColor=d.Ef(o);break;case"text":this.text=d.Na(o);break;case"displayMode":this.displayMode=d.Na(o)}}t("H.data.kml.BalloonStyle",ct);function dt(e){var o=e.childNodes,h=o.length;for(this.id=e.getAttribute("id");h--;)switch(e=o[h],e.nodeName){case"IconStyle":this.Oj=e=new Vs(e);break;case"LineStyle":this.Wd=e=new bt(e);break;case"PolyStyle":this.yk=e=new at(e);break;case"BalloonStyle":this.pf=e=new ct(e)}}t("H.data.kml.Style",dt);function et(e,o){e=e.childNodes;var h=e.length,d=new Ss;for(this.b=o;h--;)switch(o=e[h],o.nodeName){case"key":this.key=d.Na(o);break;case"styleUrl":this.a=d.Na(o)}}t("H.data.kml.Pair",et),et.prototype.V=function(){if(this.a){var e=this.key==="highlight";e=this.b.mh(this.a.substr(1),e)}return e},et.prototype.getStyle=et.prototype.V;function ft(e,o){var h=e.childNodes,d=h.length;for(this.b=o,this.id=e.getAttribute("id"),this.a=[];d--;)e=h[d],e.nodeName==="Pair"&&(e=new et(e,this.b),this.a.push(e))}t("H.data.kml.StyleMap",ft),ft.prototype.V=function(e){var o=null;e=e?"highlight":"normal";for(var h=this.a.length;h--;)this.a[h].key===e&&(o=this.a[h].V());return o},ft.prototype.getStyle=ft.prototype.V;function gt(){this.a={}}t("H.data.kml.StyleContainer",gt),gt.prototype.Ig=function(e){e&&e.id&&(this.a["style_"+e.id]=e)},gt.prototype.addStyle=gt.prototype.Ig,gt.prototype.mh=function(e,o){return e=this.a["style_"+e],e instanceof ft&&(e=e.V(o)),e},gt.prototype.getStyleById=gt.prototype.mh;function ht(e){e=e.childNodes;for(var o,h=e.length,d=null,g=new Ss;h--;)o=e[h],o.nodeName==="coordinates"&&(d=g.Na(o));this.a=null,d&&(this.a=g.$h(d)||null)}t("H.data.kml.Point",ht);function it(e,o){var h=e&&e.childNodes||[],d=new Ss;if(!e||!o)throw Error("Node or stylesContainer is not defined");for(this.visibility=!0,this.f=e,e=h.length;e--;){var g=h[e];switch(g.nodeName){case"name":this.name=d.Na(g);break;case"description":this.description=d.Na(g);break;case"visibility":this.visibility=d.Hd(g);break;case"open":this.open=d.Hd(g);break;case"styleUrl":(this.b=d.Na(g))&&(g=this.b.substr(1),this.c=o.mh(g,!1));break;case"Style":this.a=g=new dt(g)}}}t("H.data.kml.Feature",it);function jt(e){e=e.childNodes;for(var o,h=e.length,d=new Ss;h--;)if(o=e[h],o.nodeName==="coordinates"){var g=[],_=new Ss;try{g=_.vk(d.Na(o))}catch{g=[]}this.a=2>g.length?[]:g}}t("H.data.kml.Line",jt);function kt(e){for(var o=new L,h=e.a?e.a.length:0;h--;)o.qd(e.a[h]);return o}function lt(){}lt.prototype.f=0,lt.prototype.b=0;function mt(e){var o=e.childNodes,h=o.length;for(this.a=new L,this.c=[];h--;){var d=o[h],g=d.nodeName;if(g==="outerBoundaryIs"||g==="innerBoundaryIs"){var _=d.childNodes;for(d=_.length;d--;){var $=_[d];if($.nodeName==="LinearRing"){var j=new jt($);if(g==="outerBoundaryIs"){this.a=kt(j);var _t=void 0,_e=e,_r=j.a;j=new Ss;var _n=_e.querySelector("altitudeMode");if(_n&&_n.parentNode===_e&&!/^\s*clampTo/.test(j.Na(_n))&&_r){_n=_r.length;for(var _i=0;_i<_n&&_t!==0;_i++){var _o=_r[_i].alt;_o?_t?_o!==_t&&(_t=0):_t=_o:_t=0}(_r=_e.querySelector("*|altitudeOffset"))&&_r.parentNode===$&&_r.namespaceURI==="http://www.google.com/kml/ext/2.2"&&($=j.Gf(_r))&&(_t+=$),_t&&(_t=yd(2047,_t),($=_e.querySelector("extrude"))&&$.parentNode===_e&&j.Hd($)?this.b=_t:this.f=_t)}}else this.c.push(kt(j))}}}}}u(mt,lt),t("H.data.kml.Polygon",mt);function nt(e,o){var h=document.createElement("CANVAS");h.width=1,h.height=1,this.g=e,this.b={},this.c={},this.f=new Wj(h),this.Yb=o||""}nt.prototype.create=function(e){return this.a=new it(e,this.g),ot(this,e)};function ot(e,o,h){o=o.childNodes;for(var d=o.length,g,_={},$;d--;){var j=o[d];switch(j.nodeName){case"Point":j=new ht(j),$=pt(e,"Marker"),(j=j.a)&&(g=new Rn(j,$),$.ai&&Fe($.ai,"statechange",A(e.i,e,$.ai,g,$),!1));break;case"LineString":j=new jt(j),$=pt(e,"Polyline"),g=new th(kt(j),$);break;case"LinearRing":j=new jt(j),$=pt(e,"Polyline"),g=new th(kt(j),$);break;case"Polygon":j=new mt(j),$=pt(e,"Polygon"),$.elevation=j.f,$.extrusion=j.b,g=new uh(new O(j.a,j.c),$);break;case"MultiGeometry":g=ot(e,j,new R)}g&&(e.a.name&&(_.name=e.a.name),e.a.description&&(_.description=e.a.description),$&&$.pf&&(_.balloonStyle=$.pf),_.kmlNode=e.a.f,g.setData(_),h&&h.fa(g))}return h||g}nt.prototype.i=function(e,o,h){var d=h.anchor,g=h.scale;h=g+"_"+d.x+d.y+d.Vc+d.zc+"_"+h.href;var _={};if(e.getState()===1){var $=this.b[h];if(!$){var j=d.x,_t=d.y;($=e.yb())&&($={w:$.w*g,h:$.h*g},_.size=$),j=d.Vc&&$?$.w*j:j*g,_t=d.zc&&$?$.h*(1-_t):!d.zc&&$?$.h-_t*g:_t*g,_.anchor={x:j,y:_t},$=new Wj(e.Qc(),_),this.b[h]=$}o.Ic($)}delete this.c[h]};function pt(e,o){var h=e.a,d={visibility:h.visibility},g=new Ws,_=1,$={x:0,y:0,Vc:!1,zc:!1},j=qt(e,h.c);switch(h.a&&(j=qt(e,h.a,j)),o){case"Marker":if(j&&j.Oj){if(g=j.Oj,g.scale&&(_=g.scale),g.a){var _t=g.a;$={x:_t.x,y:_t.y,Vc:_t.Vc,zc:_t.zc}}g.icon&&g.icon.href?(o=g.icon.href,rt.test(o)||(o=e.Yb+o),g=_+"_"+$.x+$.y+$.Vc+$.zc+"_"+o,_t=e.b[g]||e.c[g],_t||(_t=new Wj(o),e.c[g]=_t),_t.getState()===0?(d.icon=e.f,d.ai=_t,d.href=o,d.anchor=$,d.scale=_):_t.getState()===1&&(d.icon=_t)):_!==1&&(_t||($={x:14,y:4,Vc:!1,zc:!1}),e={w:28*_,h:36*_},_={size:new Wi(e.w,e.h),anchor:new J($.Vc?e.w*$.x:$.x*_,$.zc?e.h*(1-$.y):e.h-$.y*_),hitArea:new Xi(Yi.POLYGON,[0*_,16*_,0*_,7*_,8*_,0*_,18*_,0*_,26*_,7*_,26*_,16*_,18*_,34*_,8*_,34*_])},d.icon=new Wj('<svg xmlns="http://www.w3.org/2000/svg" width="28px" height="36px"><path d="M 19 31 C 19 32.7 16.3 34 13 34 C 9.7 34 7 32.7 7 31 C 7 29.3 9.7 28 13 28 C 16.3 28 19 29.3 19 31 Z" fill="#000" fill-opacity=".2"/><path d="M 13 0 C 9.5 0 6.3 1.3 3.8 3.8 C 1.4 7.8 0 9.4 0 12.8 C 0 16.3 1.4 19.5 3.8 21.9 L 13 31 L 22.2 21.9 C 24.6 19.5 25.9 16.3 25.9 12.8 C 25.9 9.4 24.6 6.1 22.1 3.8 C 19.7 1.3 16.5 0 13 0 Z" fill="#fff"/><path d="M 13 2.2 C 6 2.2 2.3 7.2 2.1 12.8 C 2.1 16.1 3.1 18.4 5.2 20.5 L 13 28.2 L 20.8 20.5 C 22.9 18.4 23.8 16.2 23.8 12.8 C 23.6 7.07 20 2.2 13 2.2 Z" fill="#18d"/></svg>',_))}break;case"Polyline":d.style={},j&&j.Wd&&(_=j.Wd,d.style.strokeColor="rgba("+Zs(g,_.a.a,!0)+")",0<=_.width&&(d.style.lineWidth=_.width));break;case"Polygon":d.style={},j&&(j.Wd&&(_=j.Wd,d.style.strokeColor="rgba("+Zs(g,_.a.a,!0)+")",0<=_.width&&(d.style.lineWidth=_.width)),j.yk&&(_=j.yk,d.style.fillColor=_.fill?"rgba("+Zs(g,_.b.a,!0)+")":"rgba(0,0,0,0)",_.a||(d.style.lineWidth=0)))}return d.pf=j.pf,d}function qt(e,o,h){h=h||{};for(var d in o)o.hasOwnProperty(d)&&(h[d]=typeof o[d]=="object"?qt(e,o[d],h[d]):o[d]);return h}var rt=/^[^:\/]+:/;function st(e){xc(this,st),this.url=e,this.b=[],this.a=z,this.c=A(this.c,this),F.call(this)}u(st,F),t("H.data.AbstractReader",st);var tt={ERROR:-1,LOADING:0,VISIT:1,READY:2};st.State=tt,st.prototype.f=tt.READY,st.prototype.A={ml:"statechange"},st.prototype.ob=function(){if(!this.a){this.a=new N;var e=this.a.bc();e.Xb(this.b)}return new tl(this.a)},st.prototype.getLayer=st.prototype.ob,st.prototype.Gm=function(){return this.b.concat([])},st.prototype.getParsedObjects=st.prototype.Gm,st.prototype.v=function(){return this.url},st.prototype.getUrl=st.prototype.v,st.prototype.Co=function(e){if(this.f===tt.LOADING||this.f===tt.VISIT)throw Error("InvalidState: state "+this.f);return this.b=[],this.a=z,this.url=e,this},st.prototype.setUrl=st.prototype.Co,st.prototype.getState=function(){return this.f},st.prototype.getState=st.prototype.getState,st.prototype.O=function(e,o,h){this.f=e,this.dispatchEvent(new ut(o||this,this.A.ml,e,h||""))},st.prototype.parse=function(){var e=this;vc(this.url)?(this.O(tt.LOADING),new tf("text/plain",this.url).then(function(o){try{e.c(o)}catch(h){e.O(tt.ERROR,z,h.message)}},function(){e.O(tt.ERROR,z,"Error loading file")})):e.O(tt.ERROR,z,"File url was not set")},st.prototype.parse=st.prototype.parse;function ut(e,o,h,d){ut.j.constructor.call(this,o,e),this.state=h,this.message=d}u(ut,ud),st.Event=ut;function vt(e){var o=e?e.lastIndexOf("/"):-1;this.g=[],st.call(this,e),0<=o&&(this.i=e.substr(0,o)+"/")}u(vt,st),t("H.data.kml.Reader",vt),vt.prototype.c=function(e){var o,h=null;if(Cc(e)&&e.trim()!=""){try{var d=new DOMParser().parseFromString(e,"text/xml")}catch{this.O(tt.ERROR,z,"Error parsing KML document");return}if(d.getElementsByTagName("parsererror").length)this.O(tt.ERROR,z,"Error parsing KML document");else if((e=d.childNodes&&d.childNodes[0].nodeName==="kml"?d.childNodes[0]:void 0)&&(o=wt(e.childNodes,"Document")[0]),o=o||e){d=new gt;for(var g=wt(o.childNodes,"Style"),_=wt(o.childNodes,"StyleMap"),$=g.length;$--;)e=new dt(g[$]),d.Ig(e);for($=_.length;$--;)e=new ft(_[$],d),d.Ig(e);for(this.l=new nt(d,this.i),e=o.childNodes,o=e.length;o--;)g=e[o],d=h,g.nodeName==="Placemark"?(g=this.l.create(g))&&xt(this,g,d):g.nodeName==="Folder"&&(g={group:new R,node:g},xt(this,g.group,d),this.g.push(g)),!o&&(d=this.g.shift())&&(e=d.node.childNodes,h=d.group,o=e.length);this.O(tt.READY)}else this.O(tt.ERROR,z,"Invalid KML document")}else this.O(tt.ERROR,z,"Unable to create objects from the empty data")};function xt(e,o,h){h?h.fa(o):(e.a&&e.a.bc().fa(o),e.b.push(o),e.O(tt.VISIT,o))}function wt(e,o){for(var h=e.length,d,g=[];h--;)d=e[h],d.nodeName===o&&g.push(d);return g}function yt(e,o){this.b=e,this.a=o}yt.prototype.create=function(e,o){var h=e.coordinates;switch(e.type){case"Point":var d=new Rn(zt(h));break;case"LineString":d=new th(At(h));break;case"Polygon":d=new uh(Bt(h));break;case"MultiPoint":var g=0,_=h.length;if(d=[],this.a){for(;g<_;g++)d.push(zt(h[g]));h=new Rn(new Vi(d))}else{for(;g<_;g++)d.push(new Rn(zt(h[g])));h=new R,h.Xb(d)}d=h,_="multiPoint";break;case"MultiLineString":if(g=0,_=h.length,d=[],this.a){for(;g<_;g++)d.push(At(h[g]));h=new th(new ih(d))}else{for(;g<_;g++)d.push(new th(At(h[g])));h=new R,h.Xb(d)}d=h,_="multiLineString";break;case"MultiPolygon":if(d=[],g=0,_=h.length,this.a){for(;g<_;g++)d.push(Bt(h[g]));h=new uh(new Ji(d))}else{for(;g<_;g++)d.push(new uh(Bt(h[g])));h=new R,h.Xb(d)}d=h,_="multiPolygon";break;case"GeometryCollection":h=d=new R,g=e.geometries,_=0;for(var $=g.length;_<$;_++)this.create(g[_],h);_="geometryCollection"}return d&&(h=d,g=e.properties,e=e.id,$={},g&&(this.a?$=g:$.properties=g),_&&!this.a&&($[_]=!0),e&&h.Ai(e),h.setData($),this.b(d)),o&&d&&o.fa(d),d},yt.prototype.create=yt.prototype.create;function zt(e){return new kg(e[1],e[0])}function Bt(e){for(var o=At(e[0]),h=[],d,g=1,_=e.length;g<_;g++)d=At(e[g]),h.push(d);return new O(o,h)}function At(e){for(var o=0,h=e.length,d=new L;o<h;o++)d.qd(zt(e[o]));return d}function Ct(e,o){o=o||{},this.i=o.style||this.Fd,(this.g=!!o.disableLegacyMode)||window.console.warn("H.data.geojson.Reader: Legacy parser is enabled in GeoJSON Reader. Features like Multi-Geometries, Polygon interiors and GeoJSON feature properties might not work as expected. To maximise compatibility with the remote services it is recommended to set the `disableLegacyMode` flag to true."),st.call(this,e)}u(Ct,st),t("H.data.geojson.Reader",Ct),Ct.prototype.c=function(e){var o,h;try{var d=typeof e=="string"?JSON.parse(e):e;if(typeof d=="object"){var g=new yt(this.i,this.g);switch(d.type){case"FeatureCollection":if(o=d.features){var _=new R;for(Dt(this,_),h=0;h<o.length;h++){var $=Et(o[h]);($=g.create($))&&_.fa($)}}break;case"Feature":$=Et(d),($=g.create($))&&Dt(this,$);break;default:($=g.create(d))&&Dt(this,$)}this.O(tt.READY)}else this.O(tt.ERROR,z,"Invalid syntax")}catch(j){this.O(tt.ERROR,z,"Parse error. "+j.message)}},Ct.prototype.io=function(e){this.O(tt.LOADING),this.c(e)},Ct.prototype.parseData=Ct.prototype.io,Ct.prototype.Fd=function(){};function Et(e){var o={};if(e.geometry){var h=e.geometry;o.type=h.type,o.properties=e.properties,h.coordinates&&(o.coordinates=h.coordinates),h.geometries&&(o.geometries=h.geometries),e.id&&(o.id=e.id)}return o}function Dt(e,o){e.a&&e.a.bc().fa(o),e.b.push(o),e.O(tt.VISIT,o)}t("H.data.buildInfo",function(){return Hf("H-data","1.49.1","74e5afb",{region:"row"})}),wg.prototype.Lc=ca(1,function(e,o){this.a.Lc(e,Fc(o)?o:this.c)}),Ag.prototype.Lc=ca(0,function(e,o){var h=0,d;if(!e(this)&&o--)for(;3>=h;h++)(d=this[h])&&d.Lc(e,o)});function Ft(e,o){this.a=e,this.b=o}t("H.clustering.grid.NoisePoint",Ft),Ft.prototype.ya=function(){return ng(this.a)},Ft.prototype.getPosition=Ft.prototype.ya,Ft.prototype.xc=function(){return this.a.wt},Ft.prototype.getWeight=Ft.prototype.xc,Ft.prototype.od=gf,Ft.prototype.isCluster=Ft.prototype.od,Ft.prototype.sc=function(){return this.b},Ft.prototype.getMinZoom=Ft.prototype.sc,Ft.prototype.getData=function(){return this.a.data},Ft.prototype.getData=Ft.prototype.getData;function Gt(e,o,h){this.g=this.b=h,this.bi=[],this.a=0,this.f=sg(e,o,!0)}t("H.clustering.grid.Cluster",Gt),Gt.prototype.ne=function(e){this.c||(this.c=ng(e)),this.a+=e.wt||1,this.bi.push(e)},Gt.prototype.ya=function(){return this.c},Gt.prototype.getPosition=Gt.prototype.ya,Gt.prototype.xc=function(){return this.a},Gt.prototype.getWeight=Gt.prototype.xc,Gt.prototype.od=ff,Gt.prototype.isCluster=Gt.prototype.od,Gt.prototype.sc=function(){return this.b},Gt.prototype.getMinZoom=Gt.prototype.sc,Gt.prototype.If=function(){return this.g},Gt.prototype.getMaxZoom=Gt.prototype.If,Gt.prototype.K=function(){return this.f},Gt.prototype.getBoundingBox=Gt.prototype.K,Gt.prototype.Yg=function(e){this.ze(e)},Gt.prototype.forEachEntry=Gt.prototype.Yg,Gt.prototype.ze=function(e){var o=this;if(!Da(e))throw new D(this.ze,0,e);this.bi.forEach(function(h){e(new Ft(h,o.b+1))})},Gt.prototype.forEachDataPoint=Gt.prototype.ze;function Ht(e){qd.call(this),this.a=[];var o;e?Ya(o={},It,e):o=It,this.g=o,qd.call(this)}u(Ht,qd);var Jt={clusters:[],noisePoints:[]},It={projection:mj,min:0,max:22,eps:32,minWeight:2};p=Ht.prototype,p.Hc=function(e){this.a=e,this.b=!0},p.Db=function(e){this.a.push(e),this.b=!0},p.mf=function(e){this.a=this.a.concat(e),this.b=!0},p.We=function(e){this.a=this.a.filter(function(o){return o!==e}),this.b=!0},p.o=function(){Ht.j.o.call(this),delete this.a},Ht.prototype.disposeInternal=Ht.prototype.o,Ht.prototype.U=ld;function Kt(e){Ht.call(this,e)}u(Kt,Ht),Kt.prototype.Ei=function(e){var o=this.g,h=o.min,d=o.max,g=[],_=[],$;if(this.b){for($=this.a;h<=d;h++){for(var j,_t=void 0,_e,_r,_n,_i,_o,_a,_u,_f=h,_h=$,_d=g,ty=_,ey=o.eps,sy=o.projection,ny=o.minWeight,uy=_h.length,fy=Math.pow(2,_f+8),yy=[];_u=_h[--uy];)if(!_u.Ki){for(_r=sy.Pc(_u).scale(fy).floor(),_a=fy,_o=_r.x,_i=_r.y,_e=yy.length;_e--;)j=yy[_e],_n=j.ya(),j.Ji||(j.Ji=sy.Pc(_n).scale(fy).floor()),_n=j.Ji,_n=_n.Wa(_r),_n<_a&&(_a=_n,_t=j);_t&&_t.K().gd(_u)||(_t=new Gt(sy.dg({x:(_o-ey)/fy,y:(_i-ey)/fy}),sy.dg({x:(_o+ey)/fy,y:(_i+ey)/fy}),_f),yy.push(_t)),_t.ne(_u),_t=null}for(uy=yy.length;uy--;)if(j=yy[uy],_e=j.xc(),_e<ny)for(j=j.bi,_e=j.length;_u=j[--_e];)ty.push(new Ft(_u,_f)),_u.Ki=!0;else _d.push(j)}for(h=0,d=$.length;h<d;h++)delete $[h].Ki;this.b=!1,e({clusters:g,noisePoints:_})}};function Lt(e){this.a=e,e=document.createElement("canvas");var o=e.getContext("2d"),h=this.a,d=14*h;e.width=d,e.height=d,o.scale(h,h),o.beginPath(),o.strokeStyle="#FFFFFF",o.fillStyle="#1080DD",o.arc(7,7,6,0,2*Math.PI,!1),o.fill(),o.lineWidth=1,o.stroke(),this.f=new Wj(e,{size:{w:14,h:14},anchor:{x:7,y:7}}),this.b={},this.c={}}t("H.clustering.theme.Circular",Lt);function Mt(e,o,h){var d,g=document.createElement("canvas"),_=g.getContext("2d"),$=e.a,j=o*$;return g.width=j,g.height=j,_.scale($,$),$=o+":"+h,(d=e.b[$])?_.putImageData(d,0,0):(o/=2,_.beginPath(),_.strokeStyle="rgba("+h+",0.2)",_.fillStyle="rgba("+h+",1)",_.arc(o,o,o/5*3,0,2*Math.PI,!1),_.fill(),_.lineWidth=o/5*4,_.stroke(),e.b[$]=_.getImageData(0,0,j,j)),g}Lt.prototype.Sl=function(e){var o=e.xc(),h=this.c[o];if(!h){if(10>o){h=Mt(this,28,"118,209,0");var d={x:11,y:18}}else 25>o?(h=Mt(this,38,"255,105,0"),d={x:13,y:23}):50>o?(h=Mt(this,38,"240,60,0"),d={x:13,y:23}):100>o?(h=Mt(this,38,"181,0,21"),d={x:13,y:23}):1e3>o?(h=Mt(this,48,"181,0,21"),d={x:15,y:28}):(h=Mt(this,66,"181,0,21"),d={x:20,y:38});var g=h.getContext("2d");g.fillStyle="#FFFFFF",g.font="bold 11px Arial",g.fillText(String(o),d.x,d.y),d=h.width/this.a,h=new Wj(h,{size:{w:d,h:d},anchor:{x:d/2,y:d/2}}),this.c[o]=h}return o=new Rn(e.ya(),{icon:h,min:e.sc(),max:e.If()}),o.setData(e),o},Lt.prototype.getClusterPresentation=Lt.prototype.Sl,Lt.prototype.Dm=function(e){var o=new Rn(e.ya(),{icon:this.f,min:e.sc()});return o.setData(e),o},Lt.prototype.getNoisePresentation=Lt.prototype.Dm;function Nt(e){if(Ht.call(this,e),e=this.g,e.projection!==mj)throw new D(Nt,0,"Other projection than mercator not supported yet");this.s=e.projection,this.f=e.eps,this.D=e.minWeight,this.m=new nj(this.s),new Pf().a("cluster","H.clustering.dynamicgrid.worker"),this.i=A(this.i,this),this.l=A(this.l,this)}u(Nt,Ht),Nt.prototype.U=function(e,o){this.u=e,this.J=Bd(o)},Nt.prototype.Ei=function(e,o){var h=this.c,d=this.u,g=this.J||0,_=!h||!(h.zoom===g&&h.b.ia(d));if(d&&(this.b||_)){if(h&&3>h.Yd&&h.cancel(),this.b=!1,h=this.f,h>=128*Gd(2,g))var $=Ot;else{_=this.m,_.Oa(g);var j=_.ib(d.Nb());$=_.ib(d.Jb()),j.y-=h,$.y+=h,j=_.Re(j);var _t=_.Re($);$=new K(j.lat,j.lng,_t.lat,_t.lng),h=_.Ra(h,0).lng+180,$=$.Bc(j.lat,j.lng-h,_t.lat,j.lng).Bc(j.lat,_t.lng,_t.lat,_t.lng+h)}for(h=$,j=this.a,$=[],_=j.length;_--;)h.gd(j[_])&&$.push(j[_]);0<$.length?(this.c=new Pt(d,g,$,this.f,this.D,this.s!==mj,e,o),this.c.then(this.i,this.l)):e(Jt)}},Nt.prototype.i=function(e){Ca(e)||(e=new x.Uint32Array(e)),this.c.g(Qt(this,e))},Nt.prototype.l=function(e){Cc(e)&&this.c.f(e)};var Ot=new K(90,-180,-90,180);function Qt(e,o){for(var h=0,d=o[h++],g=Array(d),_=0,$=[],j=o.length,_t=e.c.a,_e=e.c.zoom;d--;)g[_++]=new Ft(_t[o[h++]],_e);for(;h<j;){d=o[h++],_=_t[o[h]];var _r=e.m,_n=e.f;_r.Oa(e.c.zoom);var _i=_r.ib(_);for(_=_r.Ra(_i.x-_n,_i.y-_n),_r=_r.Ra(_i.x+_n,_i.y+_n),_=new K(_.lat,_.lng,_r.lat,_r.lng),_=new Gt(_.Nb(),_.Jb(),_e);d--;)_.ne(_t[o[h++]]);$.push(_)}return{clusters:$,noisePoints:g}}Nt.prototype.o=function(){Nt.j.o.call(this)},Nt.prototype.disposeInternal=Nt.prototype.o;function Pt(e,o,h,d,g,_,$,j){this.b=e,this.zoom=o,this.a=h,this.g=$,this.f=j,e=h.length,$=3*e,j=new(x.Float64Array||Array)($);for(var _t;e--;)_t=h[e],j[--$]=_t.lat,j[--$]=_t.lng,j[--$]=_t.wt;ie.call(this,"cluster",{message:[j,d,g,o,_]},void 0)}u(Pt,Sf);function Rt(e,o,h){this.b=e,this.a=o,this.f=h}t("H.clustering.fastgrid.NoisePoint",Rt),Rt.prototype.ya=function(){return this.c||(this.c=this.b.Ra(this.a[1],this.a[0],1)),this.c},Rt.prototype.getPosition=Rt.prototype.ya,Rt.prototype.xc=function(){return this.a.a},Rt.prototype.getWeight=Rt.prototype.xc,Rt.prototype.od=gf,Rt.prototype.isCluster=Rt.prototype.od,Rt.prototype.sc=function(){return this.f-this.b.c},Rt.prototype.getMinZoom=Rt.prototype.sc,Rt.prototype.getData=function(){return this.a.data},Rt.prototype.getData=Rt.prototype.getData;function St(e,o,h,d){this.b=e,this.a=o,this.l=h,this.U=d,this.f=Ka(this.f,this),this.c=Ka(this.c,this)}t("H.clustering.fastgrid.Cluster",St),St.prototype.ya=function(){return this.s||(this.s=this.b.Ra(this.a.qe,this.a.re,this.a.Fb)),this.s},St.prototype.getPosition=St.prototype.ya,St.prototype.xc=function(){return this.a.Fb},St.prototype.getWeight=St.prototype.xc,St.prototype.od=ff,St.prototype.isCluster=St.prototype.od,St.prototype.sc=function(){return this.l?this.l-this.b.c:-1/0},St.prototype.getMinZoom=St.prototype.sc,St.prototype.If=function(){return this.U-this.b.c},St.prototype.getMaxZoom=St.prototype.If,St.prototype.K=function(){return this.i||(this.i=sg(this.b.Ra(this.a.a,this.a.f,1),this.b.Ra(this.a.b,this.a.c,1),!0)),this.i},St.prototype.getBoundingBox=St.prototype.K,St.prototype.Yg=function(e){this.g=e,this.a.Lc(this.f,Wd)},St.prototype.forEachEntry=St.prototype.Yg,St.prototype.f=function(e,o){var h=!1,d,g;if(e.Fb>=this.b.s&&e!==this.a&&e.Fb!==this.a.Fb&&(this.g(new St(this.b,e,0,o)),h=!0),!h&&(d=e.entries))for(e=d.length,g=0;g<e;g++)this.g(new Rt(this.b,d[g],o));return h},St.prototype.ze=function(e){this.m=e,this.a.Lc(this.c,Wd)},St.prototype.forEachDataPoint=St.prototype.ze,St.prototype.c=function(e,o){var h;if(e=e.entries){var d=e.length;for(h=0;h<d;h++)this.m(new Rt(this.b,e[h],o))}return!1};function Tt(e,o,h,d,g,_){this.g=o,e&&(this.parent=e,o&1?(h=e[8],g=e[5]):(h=e[7],g=e[8]),o&2?(d=e[9],_=e[6]):(d=e[4],_=e[9])),this[7]=h,this[5]=g,this[8]=(h+g)/2,this[4]=d,this[6]=_,this[9]=(d+_)/2}p=Tt.prototype,p.Xd=0;function Ut(e,o){return e[o]||(++e.Xd,e[o]=new Tt(e,o))}p.removeChild=function(e){var o=e.g;this[o]===e&&(delete this[o],delete e.parent,--this.Xd)},p.Lc=function(e,o){for(var h=0,d=this;d=d.parent;)++h;Vt(this,e,o,h)};function Vt(e,o,h,d){var g,_;if(!o(e,d)&&h--)for(++d,g=0;4>g;g++)(_=e[g])&&Vt(_,o,h,d)}p.qe=0,p.re=0,p.Fb=0;function Wt(e){this.b=e||10,Xt(this)}function Xt(e){e.head=e.a=new Tt(null,NaN,0,0,4294967296,4294967296)}function Yt(e,o){var h,d;for(h=0;4>h;h++)(d=o[h])&&(Yt(e,d),delete o[h]);delete o.parent,delete o.entries}function Zt(e,o){var h=e.head,d;if(o){var g=o;if(g!==h)for(h=g;g=g.parent;)(g.entries||1<g.Xd)&&(h=g)}else for(;!h.entries&&2>(d=h.Xd)&&d;)h=g;e.head=h}Wt.prototype.yc=function(e,o,h,d){var g=this.a;if(!(e>=g[7]&&o>=g[4]&&e<=g[5]&&o<=g[6]))throw Error("Coordinates out of bounds");return $t(this,this.a,e,o,h,this.b,d)};function $t(e,o,h,d,g,_,$){var j=o.entries;return _?o.Xd?j=$t(e,Ut(o,+(h>=o[8])|+(d>=o[9])<<1),h,d,g,_-1,$):j?(j=j[0],j=Ut(o,+(j[1]>=o[8])|+(j[0]>=o[9])<<1),j.entries=o.entries,j.qe=o.qe,j.re=o.re,j.Fb=o.Fb,j.a=o.a,j.f=o.f,j.b=o.b,j.c=o.c,delete o.entries,Zt(e,j),j=$t(e,Ut(o,+(h>=o[8])|+(d>=o[9])<<1),h,d,g,_-1,$)):(_=j=new au(h,d,g,$),(o.entries||(o.entries=[])).push(_),Zt(e,o)):(j||Zt(e,o),e=j=new au(h,d,g,$),(o.entries||(o.entries=[])).push(e)),o.qe+=h*g,o.re+=d*g,o.Fb+=g,o.a===B?(o.a=o.b=h,o.f=o.c=d):(h<o.a?o.a=h:h>o.b&&(o.b=h),d<o.f?o.f=d:d>o.c&&(o.c=d)),j}Wt.prototype.Lc=function(e,o){Vt(this.a,e,o===+o?o:this.b,0)};function au(e,o,h,d){this[0]=o,this[1]=e,this.a=h,this.data=d}function bu(e){Ht.call(this,e),e=this.g,this.l=e.projection,this.m=e.min,this.f=e.max,this.s=e.minWeight,this.c=7-Ad(Ed(zd(1,e.eps))/Od),this.i=new Wt(zd(this.m,this.f+this.c))}u(bu,Ht),p=bu.prototype,p.Hc=function(e){var o=0,h=e.length,d,g=new J(0,0),_=this.l,$=this.i;for(bu.j.Hc.call(this,e),Yt($,$.a),Xt($);o<h;o++)_.Pc(d=e[o],g).scale(4294967296).floor(),$.yc(g.x,g.y,d.wt,d.data);this.b=!0},p.Db=function(e){bu.j.Db.call(this,e),this.Hc(this.a)},p.mf=function(e){for(var o=e.length,h=bu.j.Db;o--;)h.call(this,e[o]);this.Hc(this.a)},p.We=function(e){bu.j.We.call(this,e),this.Hc(this.a)},p.Ra=function(e,o,h,d){return this.l.Ra(e/h/4294967296,o/h/4294967296,d)},p.Ei=function(e){if(this.b){var o={clusters:[],noisePoints:[]};cu(this,this.i.a,0,this.f+this.c,-1/0,o,null),this.b=!1,e(o)}};function cu(e,o,h,d,g,_,$){var j=o.Fb,_t;if($&&($.node.Fb!==j?(_.clusters.push(new St(e,$.node,$.depth,h-1)),$=null):g++),$||(j>=e.s?($={node:o,depth:h},g=h):du(e,o,g+1,_)),o.Xd&&d--)for(h++,j=0;4>j;j++)(_t=o[j])&&(cu(e,_t,h,d,g,_,$),$=null);$&&_.clusters.push(new St(e,$.node,$.depth,e.f+e.c))}function du(e,o,h,d){o=o.entries;var g;if(o){var _=o.length;for(d=d.noisePoints,g=0;g<_;g++)d.push(new Rt(e,o[g],h))}else for(g=0;4>g;g++)(_=e[g])&&du(e,_,h,d)}p.o=function(){bu.j.o.call(this),this.i=null},bu.prototype.disposeInternal=bu.prototype.o,t("H.clustering.DataPoint",function(e,o,h,d){this.lat=e,this.lng=o,this.wt=h===+h?h:1,this.data=d});function eu(e,o){o=o||{};var h={},d=o.min||0,g=zd(d,o.max||22);switch(d={min:d,max:g},eu.j.constructor.call(this,d),this.xa=o.pixelRatio||Ue(),Ya(h,It,d,o.clusteringOptions||{}),h.minWeight=zd(It.minWeight,h.minWeight),h.strategy){case fu.DYNAMICGRID:if(h.projection!==mj)throw new D(eu,1,"Unsupported projection");this.c=new Nt(h);break;case fu.GRID:this.c=new Kt(h);break;default:this.c=new bu(h)}this.c.Hc(e),this.D=o.theme||new Lt(this.xa),this.R=A(this.R,this),this.aa=A(this.aa,this),gu(this)}u(eu,N),t("H.clustering.Provider",eu),eu.prototype.o=function(){eu.j.o.call(this),this.f.na(),this.c.F(),delete this.c,delete this.L,delete this.D,x.clearTimeout(this.ea)};var fu={FASTGRID:0,GRID:1,DYNAMICGRID:2};eu.Strategy=fu,eu.prototype.R=function(){this.dispatchEvent("start"),this.c.Ei(this.aa,ld)};function gu(e,o,h){e.ea&&x.clearTimeout(e.ea),o&&e.c.U(o,h),e.ea=x.setTimeout(e.R,150)}eu.prototype.aa=function(e){this.L=e,hu(this),this.dispatchEvent("end")},eu.prototype.Hc=function(e){this.c.Hc(e),gu(this)},eu.prototype.setDataPoints=eu.prototype.Hc,eu.prototype.Db=function(e){this.c.Db(e),gu(this)},eu.prototype.addDataPoint=eu.prototype.Db,eu.prototype.mf=function(e){this.c.mf(e),gu(this)},eu.prototype.addDataPoints=eu.prototype.mf,eu.prototype.We=function(e){this.c.We(e),gu(this)},eu.prototype.removeDataPoint=eu.prototype.We,eu.prototype.Zm=function(){return this.D},eu.prototype.getTheme=eu.prototype.Zm,eu.prototype.zo=function(e){this.D=e,this.L&&(this.f.na(),hu(this))},eu.prototype.setTheme=eu.prototype.zo;function hu(e){var o=e.L.clusters,h=e.L.noisePoints,d=o.length,g=h.length,_=0<d+g;for(e.f.na();g--;){var $=h[g];e.f.fa(e.D.getNoisePresentation($))}for(;d--;)h=o[d],e.f.fa(e.D.getClusterPresentation(h));_&&e.Va()}eu.prototype.Qb=function(){return!0},eu.prototype.providesDomMarkers=eu.prototype.Qb,eu.prototype.Rb=function(){return!0},eu.prototype.providesMarkers=eu.prototype.Rb,eu.prototype.Cc=function(){return!0},eu.prototype.providesSpatials=eu.prototype.Cc,eu.prototype.Ue=function(e,o){gu(this,e,o)},eu.prototype.preprocessData=eu.prototype.Ue,t("H.clustering.buildInfo",function(){return Hf("H-clustering","1.49.1","74e5afb",{region:"row"})});function iu(e,o){t:{for(var h=e.length,d=typeof e=="string"?e.split(""):e,g=0;g<h;g++)if(g in d&&o.call(void 0,d[g],g,e)){o=g;break t}o=-1}return 0>o?null:typeof e=="string"?e.charAt(o):e[o]}var ju={};function ku(e){var o=e.ownerDocument,h=o.documentElement;o=o.defaultView;var d=e.getBoundingClientRect();return e=d.left,d=d.top,isNaN(o.pageXOffset)?(e+=h.scrollLeft,d+=h.scrollTop):(e+=o.pageXOffset,d+=o.pageYOffset),new J(e,d)}function lu(e,o,h){o=Fc(o)?o+"px":o,h=Fc(h)?h+"px":h,e.style[Af("transform")]="translate("+o+","+h+")"}var mu,nu=navigator.userAgent,ou=-1<nu.indexOf("Android")&&-1<nu.indexOf("Mozilla/5.0")&&-1<nu.indexOf("AppleWebKit"),pu=/AppleWebKit\/([\d.]+)/,qu=pu.exec(nu)===null?null:parseFloat(pu.exec(nu)[1]);mu=ou&&qu!==null&&537>qu;var ru=globalThis,su=document.createElement("T");function tu(){this.a=this.lj()}tu.prototype.lj=function(){var e=navigator,o=[];return e&&(e.msPointerEnabled?o.push(uu):e.pointerEnabled&&o.push(vu)),1>o.length&&("TouchEvent"in ru&&o.push(wu),o.push(xu)),o},tu.prototype.detectEventSets=tu.prototype.lj,tu.prototype.addEventListener=function(e,o,h,d){for(var g=this.a,_,$=g.length,j=!1;$--;)(_=g[$][o])&&(j=!0,e.addEventListener(_,h,d||!1));j||e.addEventListener(o,h,d||!1)},tu.prototype.removeEventListener=function(e,o,h,d){for(var g=this.a,_,$=g.length,j=!1;$--;)(_=g[$][o])&&(j=!0,e.removeEventListener(_,h,d||!1));j||e.removeEventListener(o,h,d||!1)};var vu={start:"pointerdown",end:"pointerup",move:"pointermove",cancel:"pointercancel",over:"pointerover",out:"pointerout",hover:"pointerhover"},uu={start:"MSPointerDown",end:"MSPointerUp",move:"MSPointerMove",cancel:"MSPointerCancel",over:"MSPointerOver",out:"MSPointerOut",hover:"MSPointerHover"},wu={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},xu={start:"mousedown",end:"mouseup",move:"mousemove",over:"mouseover",out:"mouseout",hover:"mousehover"};function yu(e,o,h,d){return e=e.createElement(o),h&&(e.className=h),d&&(e.innerHTML=d),e}function zu(e,o){for(var h=1,d=arguments.length;h<d;h++)e.appendChild(arguments[h])}var Au=new tu;function Bu(e,o,h){Au.addEventListener(e,o,h,void 0)}function Cu(e,o,h){Au.removeEventListener(e,o,h,void 0)}function Y(e,o){F.call(this),this.ab=e||"div",this.f=o?o.split(" "):[],this.L=!1,this.f.push("H_el")}u(Y,F),t("H.ui.base.Element",Y),Y.prototype.W=function(e){if(!e)throw Error("Wrong document object");return this.S=yu(e,this.ab,this.f.join(" ")),this.renderInternal(this.S,e),this.va(this.dc(),!0),this.jc(this.aa),this.qb(this.R),this.S},Y.prototype.ta=function(){},Y.prototype.T=function(){},Y.prototype.X=function(){},Y.prototype.renderInternal=Y.prototype.X,Y.prototype.dc=function(){return this.L},Y.prototype.isDisabled=Y.prototype.dc,Y.prototype.va=function(e,o){return e=!!e,(e!==this.L||o)&&((this.L=e)?this.Ka("H_disabled"):this.kb("H_disabled")),this},Y.prototype.setDisabled=Y.prototype.va,Y.prototype.J=null,Y.prototype.getData=function(){return this.J},Y.prototype.getData=Y.prototype.getData,Y.prototype.setData=function(e){this.J=e},Y.prototype.setData=Y.prototype.setData,Y.prototype.jc=function(e){var o=this.N();this.aa=e,o&&(e?o.setAttribute("title",e):o.removeAttribute("title"))},Y.prototype.setTooltip=Y.prototype.jc,Y.prototype.S=null,Y.prototype.N=function(){return this.S},Y.prototype.getElement=Y.prototype.N,Y.prototype.R=!0,Y.prototype.qb=function(e){var o=this.N();this.R=e,o&&(o.style.display=e?"":"none")},Y.prototype.setVisibility=Y.prototype.qb,Y.prototype.wc=function(){return this.R},Y.prototype.getVisibility=Y.prototype.wc,Y.prototype.Ka=function(e){var o=this.N();return 0>this.f.indexOf(e)&&this.f.push(e),o&&(o.className=this.f.join(" ")),this},Y.prototype.addClass=Y.prototype.Ka,Y.prototype.kb=function(e){e=this.f.indexOf(e);var o=this.N();return-1<e&&this.f.splice(e,1),o&&(o.className=this.f.join(" ")),this},Y.prototype.removeClass=Y.prototype.kb;function Du(e){(e=e.N())&&e.parentNode&&e.parentNode.removeChild(e)}Y.prototype.o=function(){Y.j.o.call(this),Du(this),this.J=this.S=null,delete this.aa};function Eu(e){e=e||{},Y.call(this,"div","H_btn"),this.Jc(e.label||" "),this.jc(e.tooltip||""),this.setData(e.data),this.va(!!e.disabled),this.O(Fu.UP,!0),e.onStateChange&&this.addEventListener("statechange",e.onStateChange),this.b=A(this.b,this),this.a=A(this.a,this)}u(Eu,Y),t("H.ui.base.Button",Eu),Eu.prototype.va=function(e,o){return e&&this.kb("H_active"),Eu.j.va.call(this,e,o)},Eu.prototype.setDisabled=Eu.prototype.va,Eu.prototype.X=function(e){Bu(e,"start",this.b),Bu(e,"end",this.a),Bu(e,"out",this.a),this.Jc(this.Ge(),!0)},Eu.prototype.renderInternal=Eu.prototype.X,Eu.prototype.getState=function(){return this.C},Eu.prototype.getState=Eu.prototype.getState,Eu.prototype.O=function(e,o){return e!==this.C&&(this.C=e,e===Fu.DOWN?this.Ka("H_active"):this.kb("H_active"),o||this.dispatchEvent("statechange")),this},Eu.prototype.setState=Eu.prototype.O,Eu.prototype.Ge=function(){return this.c},Eu.prototype.getLabel=Eu.prototype.Ge,Eu.prototype.Jc=function(e,o){return(o||e!==this.c)&&(this.c=e,(o=this.N())&&(o.innerHTML=e)),this},Eu.prototype.setLabel=Eu.prototype.Jc,Eu.prototype.b=function(e){this.dc()||this.O(Fu.DOWN),e.preventDefault()},Eu.prototype.a=function(e){this.dc()||this.O(Fu.UP),e.preventDefault()},Eu.prototype.o=function(){var e=this.N();e&&(Cu(e,"start",this.b),Cu(e,"end",this.a),Cu(e,"out",this.a)),Y.prototype.o.call(this)};var Fu={UP:"up",DOWN:"down"};Eu.State=Fu;var Gu={in:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g><path d="m5 10.6h5.6v-5.6h2.8v5.6h5.6v2.8h-5.6v5.6h-2.8v-5.6h-5.6v-2.8z"></path></g></svg>',out:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path d="m5 10.6h14v2.8h-14z"/></svg>'};function Hu(e){e=e||{};var o;this.b=!!e.vertical,this.ea=e.length||"16em",this.a=Fc(o=e.min)?o:0,this.i=zd(this.a,Fc(o=e.max)?o:100),this.wa=E(o=e.step)?1:o,this.l=Iu(this,Fc(o=e.value)?o:(this.a+this.i)/2),this.ag=A(this.ag,this),this.Wf=A(this.Wf,this),this.cg=A(this.cg,this),this.bg=A(this.bg,this),this.s=e.pointerArea,Y.call(this,"div","H_slider"+(this.b?"":" H_l_horizontal"))}u(Hu,Y),t("H.ui.base.Slider",Hu),Hu.prototype.wg=function(e,o){var h=this.b,d=h?"top":"left";return(!this.c||o)&&(e=ae(e,this.a,this.i),this.g&&(o=100*(e-this.a)/(this.i-this.a),h=(h?-1:1)*o,this.g.style[d]=h+"%",this.qa.style[d]=100+h+"%"),this.l=Iu(this,e)),this.l},Hu.prototype.setValue=Hu.prototype.wg,Hu.prototype.en=function(){return this.l},Hu.prototype.getValue=Hu.prototype.en;function Ju(e){if(!e.m){Bu(e.N(),"start",e.ag);var o=e.s;Bu(o,"move",e.Wf),Bu(o,"end",e.cg),Bu(o,"out",e.bg),e.m=!0}}function Ku(e){if(e.m){Cu(e.N(),"start",e.ag);var o=e.s;Cu(o,"move",e.Wf),Cu(o,"end",e.cg),Cu(o,"out",e.bg),e.m=!1}}function Iu(e,o){var h=e.wa;return o=ae(o,e.a,e.i),h?e.a+Ad((o-e.a)/h)*h:o}function Lu(e,o){var h=e.D,d=e.b;e.u||(e.u=h["offset"+(d?"Height":"Width")]),o-=ku(h)[d?"y":"x"],0>o&&(o=0),o=(e.i-e.a)*o/e.u,o=Iu(e,d?e.i-o:e.a+o),e.l!==o&&(e.wg(o,!0),e.dispatchEvent(new cj(e.A.ed,o,e.l)))}function Mu(e,o){return(o.touches?o.targetTouches[0]:o)["page"+(e.b?"Y":"X")]}function Nu(e){var o=!1,h=e.type;return h.indexOf("pointer")!==-1||h.indexOf("touch")!==-1?o=!0:C(e,MouseEvent)&&(o=e.which===1||e.buttons===1),o}function Ou(e){var o=e.touches;return o&&o.length===1||C(e,MouseEvent)}p=Hu.prototype,p.ag=function(e){var o=this.b;if(Nu(e)&&Ou(e)){var h=Mu(this,e),d=e.target;d===this.g||d.parentElement===this.g?(this.P=h-ku(this.g)[o?"y":"x"]-this.g.offsetWidth/2,this.N().className="H_slider H_slider_active"+(this.b?"":" H_l_horizontal"),this.c=!0):Lu(this,h),e.preventDefault()}},p.cg=function(){this.c&&(this.N().className="H_slider "+(this.b?"":" H_l_horizontal"),this.c=!1)},p.bg=function(e){this.c&&e.target===this.s&&(this.c=!1)},p.Wf=function(e){this.c&&Ou(e)&&(Nu(e)?(Lu(this,Mu(this,e)-this.P),e.preventDefault()):this.c=!1)},p.A={ed:"change"},p.X=function(e,o){var h=yu(o,"div","H_slider_cont"),d=yu(o,"div","H_slider_knob_cont"),g=yu(o,"div","H_slider_knob"),_=yu(o,"div","H_slider_knob_halo"),$=yu(o,"div","H_slider_track");o=yu(o,"div","H_slider_track H_slider_track_active"),e.appendChild(h),h.appendChild($),$.appendChild(o),h.appendChild(d),d.appendChild(g),d.appendChild(_),this.D=$,this.qa=o,this.g=d,this.s||(this.s=e.ownerDocument.body),h.style[this.b?"height":"width"]=this.ea,this.wg(this.l),Ju(this)},Hu.prototype.renderInternal=Hu.prototype.X,Hu.prototype.o=function(){Ku(this)},Hu.prototype.va=function(e,o){return e?Ku(this):this.D&&Ju(this),Y.prototype.va.call(this,e,o)},Hu.prototype.setDisabled=Hu.prototype.va;var Pu={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",LEFT_TOP:"left-top",LEFT_MIDDLE:"left-middle",LEFT_BOTTOM:"left-bottom",RIGHT_TOP:"right-top",RIGHT_MIDDLE:"right-middle",RIGHT_BOTTOM:"right-bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"};t("H.ui.LayoutAlignment",Pu);function Qu(e,o,h){Y.call(this,e,o),this.a=h?h.concat():[]}u(Qu,Y),t("H.ui.base.Container",Qu),Qu.prototype.va=function(e,o){var h=this.a?this.a.length:0;for(Y.prototype.va.call(this,e,o);h--;)this.a[h].va(e,o);return this},Qu.prototype.setDisabled=Qu.prototype.va,Qu.prototype.Ja=function(e){var o=this.N();return this.a.push(e),o&&(e.W(o.ownerDocument),o.appendChild(e.N())),this},Qu.prototype.addChild=Qu.prototype.Ja,Qu.prototype.dh=function(){return this.a.concat()},Qu.prototype.getChildren=Qu.prototype.dh,Qu.prototype.removeChild=function(e){var o=this.a.indexOf(e),h=this.N();0<=o&&(this.a.splice(o,1),h&&h.removeChild(e.N()))},Qu.prototype.removeChild=Qu.prototype.removeChild,Qu.prototype.na=function(){var e=this.N();e&&this.a.forEach(function(o){e.removeChild(o.N())}),this.a=[]},Qu.prototype.X=function(e,o){for(var h=0,d=this.a.length;h<d;h++)e.appendChild(this.a[h].W(o))},Qu.prototype.renderInternal=Qu.prototype.X,Qu.prototype.o=function(){this.na(),this.a.forEach(this.qa,this),Y.prototype.o.call(this)},Qu.prototype.qa=function(e){e.F()};function Ru(){Qu.call(this,"div","H_ctl"),this.map=null,this.Mc="top-left"}u(Ru,Qu),t("H.ui.Control",Ru),Ru.prototype.Ia=function(e){this.map=e},Ru.prototype.W=function(e){return Qu.prototype.W.call(this,e)},Ru.prototype.X=function(e,o){Qu.prototype.renderInternal.call(this,e,o),this.Vb(this.Mc)},Ru.prototype.renderInternal=Ru.prototype.X,Ru.prototype.Qe=function(){},Ru.prototype.onUnitSystemChange=Ru.prototype.Qe,Ru.prototype.Lb=function(){return this.map},Ru.prototype.getMap=Ru.prototype.Lb,Ru.prototype.pa=function(){return this.xa},Ru.prototype.getLocalization=Ru.prototype.pa,Ru.prototype.Ll=function(){return this.Mc},Ru.prototype.getAlignment=Ru.prototype.Ll,Ru.prototype.Vb=function(e){return typeof e=="string"&&Pu[e.replace("-","_").toUpperCase()]===e&&(this.Mc=e,this.dispatchEvent("alignmentchange")),this},Ru.prototype.setAlignment=Ru.prototype.Vb;function Su(e){e=e||{};var o=e.slider;Ru.call(this),this.s=A(this.s,this),this.g=A(this.g,this),this.b=A(this.b,this),o&&(this.u=A(this.u,this),this.D=o,this.wa=e.sliderSnaps,this.Ka("H_zoom_slider")),this.i=new Eu({label:Gu.in,onStateChange:this.s}),this.m=new Eu({label:Gu.out,onStateChange:this.s}),this.Ka("H_zoom"),this.Ka("H_grp"),this.ea=e.fractionalZoom!==!1,this.setZoomSpeed(e.zoomSpeed||4),this.Vb(e.alignment||"right-middle")}u(Su,Ru),t("H.ui.ZoomControl",Su),Su.prototype.kn=function(){return this.P},Su.prototype.getZoomSpeed=Su.prototype.kn,Su.prototype.Do=function(e){this.P=e},Su.prototype.setZoomSpeed=Su.prototype.Do,Su.prototype.Ia=function(e){this.map!==e&&(this.map&&this.map.removeEventListener("mapviewchange",this.g),Tu(this)),Ru.prototype.Ia.apply(this,arguments),this.map&&(this.b(),e.addEventListener("mapviewchange",this.g),e.addEventListener("baselayerchange",this.b))},Su.prototype.setMap=Su.prototype.Ia,Su.prototype.o=function(){Ru.prototype.o.apply(this,arguments),this.map.removeEventListener("baselayerchange",this.b),Tu(this)},Su.prototype.X=function(e,o){Ru.prototype.renderInternal.call(this,e,o),this.i.jc(this.pa().translate("zoom.in")),this.m.jc(this.pa().translate("zoom.out"))},Su.prototype.renderInternal=Su.prototype.X,Su.prototype.Vb=function(e){var o=this.Mc;return Ru.prototype.Vb.call(this,e),o!==e&&this.b(),this},Su.prototype.setAlignment=Su.prototype.Vb,Su.prototype.g=function(){var e=this.map,o=e.pb(),h=e.Xa()-1;e=e.g||e.f.getCapabilities().lookAt.zoom,this.D&&this.c.wg(o),this.dc()||(this.i.va(o+h>=e.max),this.m.va(o<=e.min))},Su.prototype.va=function(e,o){return Su.j.va.call(this,e,o),this.g(),this},Su.prototype.setDisabled=Su.prototype.va;function Tu(e){e.removeChild(e.c),e.c=null,e.l&&(e.l.removeEventListener("minchange",e.b),e.l.removeEventListener("maxchange",e.b),e.l=null)}Su.prototype.s=function(e){e=e.target;var o=e===this.i?1:-1,h=0<o?Math.ceil:Math.floor,d=this.map,g,_=this;d&&(e.getState()==="down"?(d.c.startControl(),d.c.control(0,0,o*this.P,0,0,0)):d.c.endControl(!0,function($){g=_.ea?$.zoom:h($.zoom),$.zoom=g}))},Su.prototype.u=function(e){this.map&&this.map.df(e.newValue)},Su.prototype.b=function(){var e=this.Mc,o=this.Lb();if(/^top/g.test(e)||/^bottom/g.test(e)){var h=this.m;e=this.i;var d=!1}else h=this.i,e=this.m,d=!0;if(this.removeChild(h),this.removeChild(e),this.Ja(h),this.D&&o){Tu(this),o=d;var g=(d=(h=this.map)&&h.g)||h.f.getCapabilities().lookAt.zoom;(this.l=d)&&(d.addEventListener("minchange",this.b),d.addEventListener("maxchange",this.b)),this.c=new Hu({step:this.wa?1:0,vertical:o,min:g.min,max:g.max,value:h.pb(),pointerArea:h.N()}),this.c.addEventListener(this.c.A.ed,this.u),this.Ja(this.c)}this.Ja(e)};function Uu(e,o){var h={},d={};h["top-left"]=yu(o,"div",[Vu,Wu].join(" ")),h["top-center"]=yu(o,"div",[Vu,Xu,Yu,Wu].join(" ")),h["top-right"]=yu(o,"div",[Vu,Wu].join(" ")),h["left-top"]=yu(o,"div",[Vu,Zu].join(" ")),h["left-middle"]=yu(o,"div",[Vu,$u,av,Zu].join(" ")),h["left-bottom"]=yu(o,"div",[Vu,Zu].join(" ")),h["right-top"]=yu(o,"div",[Vu,Zu].join(" ")),h["right-middle"]=yu(o,"div",[Vu,bv,av,Zu].join(" ")),h["right-bottom"]=yu(o,"div",[Vu,Zu].join(" ")),h["bottom-left"]=yu(o,"div",[Vu,Wu].join(" ")),h["bottom-center"]=yu(o,"div",[Vu,cv,Yu,Wu].join(" ")),h["bottom-right"]=yu(o,"div",[Vu,Wu].join(" ")),d["top-left"]=yu(o,"div",[Xu,$u].join(" ")),d["top-right"]=yu(o,"div",[Xu,bv].join(" ")),d["bottom-left"]=yu(o,"div",[cv,$u].join(" ")),d["bottom-right"]=yu(o,"div",[cv,bv].join(" ")),zu(d["top-left"],h["top-left"],h["left-top"]),zu(d["top-right"],h["top-right"],h["right-top"]),zu(d["bottom-left"],h["left-bottom"],h["bottom-left"]),zu(d["bottom-right"],h["right-bottom"],h["bottom-right"]),zu(e,d["top-left"],d["top-right"],d["bottom-left"],d["bottom-right"],h["top-center"],h["left-middle"],h["right-middle"],h["bottom-center"]),this.a=h}var Xu="H_l_top",cv="H_l_bottom",$u="H_l_left",bv="H_l_right",Yu="H_l_center",av="H_l_middle",Wu="H_l_horizontal",Zu="H_l_vertical",Vu="H_l_anchor";Uu.prototype.update=function(){var e=this.a;dv(e["top-center"],!0),dv(e["bottom-center"],!0),dv(e["left-middle"],!1),dv(e["right-middle"],!1)};function dv(e,o){o?(o=e.offsetWidth,e.style.marginLeft=-Math.round(.5*o)+"px"):(o=e.offsetHeight,e.style.marginTop=-Math.round(.5*o)+"px")}Uu.prototype.put=function(e,o){e=e?e.N():null;var h=o?this.a[o]:null;e&&h&&(e.parentElement&&e.parentElement.removeChild(e),h.insertBefore(e,/(bottom|right)$/.test(o)||/(center|middle)/.test(o)&&h.childNodes.length%2?h.firstChild:null)),this.update()};var ev={IMPERIAL:"imperial",METRIC:"metric"};t("H.ui.UnitSystem",ev);var fv={btn:'<svg class="H_icon" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><g transform="translate(3 2)"><path d="m18 13v7h-18v-7h2v5h2v-2h2v2h2v-3h2v3h2v-2h2v2h2v-5z"></path><path d="m2.3.3c.7 0 1.3.1 1.8.4s.9.6 1.1 1 .4.9.4 1.4c0 .5-.1 1-.3 1.4s-.57 1-1 1.6-1.3 1.3-2.3 2.2h3.9l-.2 1.7h-6.16v-1.6c1.1-1.1 2-2 2.5-2.6s.9-1 1-1.4.3-.8.3-1.2c0-.4-.1-.7-.3-.9s-.5-.3-.9-.3c-.3 0-.6 0-.9.2s-.5.4-.8.7l-1.3-1c.4-.5.9-.9 1.4-1.2s1.2-.4 1.8-.4zm14.4 9.7h-2.3l-.2-3.8c 0-.9-.1-1.7-.1-2.4 0-.5 0-1 0-1.5l-1.5 6.7h-2.2l-1.6-6.7c.1.8.1 1.6.1 2.3 0 .5 0 1.1 0 1.7l-.2 3.8h-2.2l.7-9.7h2.9l1.5 6.6 1.4-6.6h2.9z"></path></g></g></svg>',point:'<svg height="22" viewBox="0 0 12 12" width="22" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m6 12c3.3 0 6-2.7 6-6s-2.7-6-6-6-6 2.7-6 6 2.7 6 6 6z" fill="#fff"></path><path d="m6 10c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4z" fill="#2ed5c9" stroke="#272c36" stroke-width="2"></path></g></svg>'};function gv(e){Eu.call(this,e),this.i=function(o){o.preventDefault()},this.g=A(function(o){this.dc()||this.toggleState(),o.preventDefault()},this)}u(gv,Eu),t("H.ui.base.PushButton",gv),gv.prototype.X=function(e){Bu(e,"start",this.g),Bu(e,"end",this.i),this.Jc(this.Ge(),!0)},gv.prototype.renderInternal=gv.prototype.X,gv.prototype.Lo=function(){var e=Fu.DOWN;return this.O(this.getState()===e?Fu.UP:e),this},gv.prototype.toggleState=gv.prototype.Lo,gv.prototype.o=function(){var e=this.N();e&&Cu(e,"start",this.g),Eu.prototype.o.call(this)};function hv(e,o,h){bj.call(this,e,{icon:iv,visibility:h}),jv(this,o)}u(hv,bj);function jv(e,o){e.zn=o,e.S&&(e.S.textContent=o)}var iv=new Ti(yu(ru.document,"span","H_dm_label"),{onAttach:function(e,o,h){h.S=e,jv(h,h.zn)},onDetach:function(e,o,h){delete h.S}});function kv(e,o){F.call(this),this.b=e,this.f=new hv(this.Jo,""),o.push(this.f),this.a=new R({objects:o,data:this}),this.ug=this.ug.bind(this)}u(kv,F),p=kv.prototype,p.Wc=!1,p.Jo={lat:0,lng:0},p.Jc=function(e,o){jv(this.f,e),this.f.da(o)},p.Rh=0,p.ug=function(){this.f.qb(this.m)};function lv(e,o){o&&(e.nextSibling=o,o.previousSibling=e)}function mv(e,o,h,d){var g=new L,_=[];lv(e,this),lv(this,o),g.qd(e.ya()),g.qd(o.ya()),this.c=new th(g,{style:h.Wd}),this.i=new th(g,{style:{strokeColor:"transparent",lineWidth:Math.min(100,this.c.V().lineWidth+2*(d||5))}}),h.c&&(this.g=new th(g,{style:h.c}),_.push(this.g)),_.push(this.c,this.i),kv.call(this,h,_),this.s=this.l=-1,e=this.a,e.addEventListener("pointermove",this.J,!0,this),e.addEventListener("pointerleave",this.u,!0,this)}u(mv,kv),mv.prototype.Ee=function(){var e=this.c.ga();return e.ye(0).Wa(e.ye(1))};function nv(e,o,h){var d=e.c.ga();d.ff(3*+h,3,[o.lat,o.lng,0]),e.g&&e.g.da(d),e.i.da(d),e.c.da(d)}mv.prototype.J=function(e){var o=e.currentPointer;e=this.previousSibling.ya();var h=this.nextSibling.ya(),d=this.b.f,g=o.viewportX;o=o.viewportY,(this.l!==g||this.s!==o)&&(this.l=g,this.s=o,d.da(this.b.g(e,h,{x:g,y:o})),d.qb(!0))},mv.prototype.u=function(){this.b.f.qb()},mv.prototype.ni=function(){this.Jc(this.b.a(this.Ee()),this.c.K().bb())};function ov(e,o,h){h=o.b(h||0),this.c=new Rn(e,{icon:h,zIndex:0}),this.c.draggable=!0,kv.call(this,o,[this.c]),e=this.a,e.addEventListener("dragstart",this.Qn,!0,this),e.addEventListener("drag",this.Rn,!0,this),e.addEventListener("dragend",this.Pn,!0,this)}u(ov,kv),p=ov.prototype,p.hk=0,p.A={ed:"change"},p.Ee=function(){return this.hk},p.ya=function(){return this.c.ga()};function pv(e){var o=0;e.nextSibling&&e.previousSibling&&(e.nextSibling.Wc||e.previousSibling.Wc?e.nextSibling.Wc&&!e.previousSibling.Wc&&(o=2):o=1),o=e.b.b(o),e.c.Ic(o)}p.Rn=function(e){var o=e.currentPointer;e=o.viewportX,o=o.viewportY,(this.i!==e||this.l!==o)&&(this.i=e,this.l=o,this.c.da(this.b.map.Pa(e-this.g.x,o-this.g.y)),this.dispatchEvent(new ud(this.A.ed,this)))},p.Qn=function(e){var o=e.currentPointer,h=o.viewportX;o=o.viewportY;var d=this.b.map.Da(this.ya());this.c.fe(1),this.g={x:h-d.x,y:o-d.y},e.stopPropagation()},p.Pn=function(){this.c.fe(0)},p.ni=function(e){this.hk=e,this.Jc(this.b.a(e),this.ya())};function qv(e,o){this.Ca=o,this.b=e,this.a={Wc:!0},rv(this,this.a),this.$f=A(this.$f,this)}t("H.ui.distanceMeasurement.Model",qv),p=qv.prototype,p.Rf=function(){return this.a.nextSibling===this.a};function sv(e,o){e=e.a;for(var h=e.nextSibling;h!==e;){var d=h,g=h.previousSibling===e?!1:o;(d.m=g)?d.ug():(d.Rh&&x.clearTimeout(d.Rh),d.Rh=x.setTimeout(d.ug,100)),h=h.nextSibling}}function tv(e,o){var h=o||e.a.nextSibling,d=0,g=0;if(o&&!uv(e,o))throw new D(e.Xe,0,o);for(h instanceof ov?d=h.Ee():h instanceof mv&&(d=h.previousSibling.Ee()),o=h;o&&o!==e.a;o=o.nextSibling,g++)o.ni(d),g%2===1&&(d+=o.Ee())}p.ne=function(e){var o=this.a.previousSibling,h=this.Rf();return e=new ov(e,this.Ca,h?0:2),this.b.fa(e.a),lv(e,this.a),e.addEventListener(e.A.ed,this.$f),h?rv(this,e):(vv(this,o,e),pv(o),tv(this,o)),e},p.insertBefore=function(e,o){var h,d=1;if(o){if(!uv(this,o))throw new D(this.insertBefore,1,o);(h=o.previousSibling.Wc)&&(d=0),e=new ov(e,this.Ca,d),e.addEventListener(e.A.ed,this.$f),this.b.fa(e.a),h?(h=this.a.nextSibling,vv(this,e,h),rv(this,e),o=e,pv(h)):(h=o.previousSibling,o=h.previousSibling,d=h.nextSibling,this.b.Ga(h.a),vv(this,o,e),vv(this,e,d)),tv(this,o)}else e=this.ne(e);return e},p.na=function(){rv(this,this.a),this.b.na()},p.Xe=function(e){var o=this.a,h=e.previousSibling,d=e.nextSibling;if(!uv(this,e))throw new D(this.Xe,0,e);if(this.b.Ga(e.a),h===o){var g=d;g!==o?(e=g.nextSibling,rv(this,e),e.ni(0),pv(e),tv(this,e)):rv(this,this.a)}else d===o?(g=h,e=g.previousSibling,lv(e,o),pv(e)):h&&d&&(vv(this,h.previousSibling,d.nextSibling),this.b.rd([d.a,h.a]),tv(this,h.previousSibling));g&&g!==o&&this.b.Ga(g.a)};function uv(e,o){for(var h=e.a.nextSibling,d=!1;h!==e.a;){if(h===o){d=!0;break}h=h.nextSibling}return d}function vv(e,o,h){o=new mv(o,h,e.Ca),e.b.fa(o.a)}function rv(e,o){e.a.nextSibling=o,o.previousSibling=e.a}p.$f=function(e){e=e.target;var o=e.previousSibling,h=e.nextSibling,d=e.ya();if(!h.Wc){nv(h,d,!1);var g=e}o.Wc||(nv(o,d,!0),g=o.previousSibling),tv(this,g)};function wv(e){e=e||{};var o,h=e.lineStyle;Ru.call(this),this.s=new gv({label:fv.btn,onStateChange:A(this.Nn,this)}),this.Ja(this.s),(o=e.distanceFormatter)&&(this.oj=o),h&&(this.Xj=h,this.sk=B),this.Vb(e.alignment||"right-bottom"),this.g={},this.g[0]=e.startIcon,this.g[2]=e.endIcon,this.g[1]=e.stopoverIcon,this.g[3]=e.splitIcon}u(wv,Ru),t("H.ui.DistanceMeasurement",wv),p=wv.prototype,p.Qh=ev.METRIC,p.Xj={strokeColor:"rgb(39,44,54)",lineWidth:5},p.sk={strokeColor:"white",lineWidth:7};function xv(e){var o=e.map,h,d={};e.c||(e.l=new N,e.m=new tl(e.l,{pixelRatio:e.map.Xa()}),e.u=h=e.l.bc(),e.u.Vk(!0),h.addEventListener("dragstart",e.Ln,!0,e),h.addEventListener("dragend",e.ef,!0,e),h.addEventListener("pointerenter",e.ef,!0,e),h.addEventListener("pointerleave",e.Mn,!0,e),h.addEventListener("tap",e.co,!0,e),e.i=yv(e),d.a=A(e.oj,e),d.b=A(e.dk,e),d.g=A(e.Dj,e),d.map=e.map,d.f=e.i,d.Wd=e.Xj,d.c=e.sk,e.b=new qv(e.u,d),e.c=!0),e.i&&e.u.fa(e.i),o.addEventListener("tap",e.pk,!0,e),o.a.add(e.m)}function zv(e){var o=e.map;e.c&&(o.removeEventListener("tap",e.pk,!0,e),o.ae(e.m),e.b.na())}function yv(e){function o(){var j=h.yb();return j={anchor:h.kd().clone().scale(_).floor(),size:new Wi(Bd(j.w*_),Bd(j.h*_)),hitArea:d},new Wj(h.Qc(),j)}var h=e.dk(3),d=new Xi(Yi.NONE,[]),g,_=h===e.D?.5:1;if(h.getState()===1)var $=o();else $=new Wj("<svg/>",{hitArea:d}),h.addEventListener("statechange",function(){h.getState()===1&&g.Ic(o())});return g=new Rn(e.map.bb(),{visibility:!1,icon:$})}p.oj=function(e){var o="m",h=0;return this.Qh==="metric"?1e3<=e&&(e/=1e3,o="km",h=1):(e/=.3048,o="ft",5280<=e&&(e/=5280,o="mi",h=1)),e.toFixed(h)+" "+this.pa().translate("scale."+o)},p.Dj=function(e,o,h){var d=this.map.Da(e);return o=this.map.Da(o),h=new J(h.x,h.y).Cj(d,o),this.map.Pa(h.x,h.y)||ng(e)},p.X=function(e,o){var h=22*(this.map.f.type===kk.P2D?this.map.Xa():1),d=h/2;Ru.prototype.renderInternal.call(this,e,o),this.Qh=ev.METRIC,this.D=new Wj(fv.point,{anchor:{x:d,y:d},size:{w:h,h},hitArea:new Xi(Yi.CIRCLE,[d,d,d])}),this.s.jc(this.pa().translate("distance.measurement"))},wv.prototype.renderInternal=wv.prototype.X,p=wv.prototype,p.dk=function(e){return this.g[e]||this.D},p.ef=function(){sv(this.b,!0)},p.Ln=function(){sv(this.b)},p.Mn=function(e){e.currentPointer.type!=="touch"&&sv(this.b)},p.co=function(e){var o=e.currentPointer,h=e.target.Fa,d;h&&(h=h.getData())instanceof kv&&(d=h),h=d,e=e.originalEvent,e=e.metaKey||e.altKey,h&&(e&&h instanceof ov?this.b.Xe(h):h instanceof mv&&(e=h.previousSibling.ya(),d=h.nextSibling.ya(),o={x:o.viewportX,y:o.viewportY},this.b.insertBefore(this.Dj(e,d,o),h.nextSibling),this.i.qb()),this.ef())},p.pk=function(e){var o=e.currentPointer;e=e.target,e!==this.map&&e.getProvider&&e.getProvider()===this.l||(this.b.ne(this.map.Pa(o.viewportX,o.viewportY)),this.i.qb(),this.ef())},p.Nn=function(e){e.target.getState()==="down"?xv(this):zv(this)},p.Qe=function(e){this.Qh=e,this.c&&(tv(this.b),this.ef())},wv.prototype.onUnitSystemChange=wv.prototype.Qe,wv.prototype.o=function(){zv(this),this.c&&(this.l.F(),this.m.F()),wv.j.o.call(this)},wv.prototype.Ia=function(e){e?this.s.getState()===Fu.DOWN&&(this.map=e,xv(this)):(zv(this),this.c=!1),Ru.prototype.Ia.apply(this,arguments)},wv.prototype.setMap=wv.prototype.Ia;function Av(){this.C=Bv.CLOSED,Qu.call(this,"div","H_overlay")}u(Av,Qu),t("H.ui.base.OverlayPanel",Av),Av.prototype.O=function(e,o){return(e!==this.C||o)&&(this.C=e,e===Bv.OPEN?this.Ka("H_open"):this.kb("H_open")),this},Av.prototype.setState=Av.prototype.O,Av.prototype.getState=function(){return this.C},Av.prototype.getState=Av.prototype.getState,Av.prototype.xk=function(e){var o=e.Mc;e=e.N();var h=this.N(),d=h.style;if(this.kb("H_top"),this.kb("H_middle"),this.kb("H_bottom"),this.kb("H_left"),this.kb("H_center"),this.kb("H_right"),d.bottom=d.top=d.left=d.right=d.margin="",/top/g.test(o)){this.Ka("H_top"),d.top="0",d.margin="0 12px";var g=-1}else/bottom/g.test(o)?(this.Ka("H_bottom"),d.bottom="0",d.margin="0 12px",g=1):(this.Ka("H_middle"),d.top="50%",d.margin="0 12px",d.marginTop=-Math.round(.5*h.offsetHeight)+"px",g=0);/left/g.test(o)?(this.Ka("H_left"),d.left=e.offsetWidth+"px",d.marginLeft="12px"):/right/g.test(o)?(this.Ka("H_right"),d.right=e.offsetWidth+"px",d.marginRight="12px"):(this.Ka("H_center"),d.left="50%",0>g?(d.top=e.offsetHeight+"px",d.marginTop="12px"):0<g&&(d.bottom=e.offsetHeight+"px",d.marginBottom="12px"),d.marginLeft=-Math.round(.5*h.offsetWidth)+"px",e.appendChild(h))},Av.prototype.pointToControl=Av.prototype.xk;var Bv={OPEN:"open",CLOSED:"closed"};Av.State=Bv;function Cv(e){e=e||{},Qu.call(this,"div","H_rdo"),this.g=new Y("div","H_rdo_title"),this.b=new Qu("div","H_rdo_buttons"),this.Ja(this.g),this.Ja(this.b),this.i=A(function(o){o.target.getState()===Fu.DOWN?(this.Kk(o.target,!0),this.dispatchEvent(Dv)):o.target.O(Fu.DOWN,!0)},this),this.addEventListener("statechange",this.i),this.Ci(e.title||""),e.onActiveButtonChange&&this.addEventListener(Dv,e.onActiveButtonChange),e.buttonsOptions&&e.buttonsOptions.forEach(function(o){this.Gg(new gv(o))},this)}u(Cv,Qu),t("H.ui.base.RadioGroup",Cv);var Dv="activebuttonchange";Cv.prototype.X=function(e,o){Qu.prototype.renderInternal.call(this,e,o),this.Ci(this.c,!0)},Cv.prototype.renderInternal=Cv.prototype.X,Cv.prototype.na=function(){this.b.na()},Cv.prototype.Ci=function(e,o){return(e!==this.c||o)&&(this.c=e,this.g.N()&&(this.g.N().innerHTML=this.c)),this},Cv.prototype.setTitle=Cv.prototype.Ci,Cv.prototype.an=function(){return this.c},Cv.prototype.getTitle=Cv.prototype.an,Cv.prototype.Gg=function(e){if(!(e instanceof gv))throw Error("PushButton expected");return e.ka(this),this.b.Ja(e),this},Cv.prototype.addButton=Cv.prototype.Gg,Cv.prototype.ko=function(e){return this.b.removeChild(e),e.ka(null),this},Cv.prototype.removeButton=Cv.prototype.ko,Cv.prototype.Df=function(){return this.b.dh()},Cv.prototype.getButtons=Cv.prototype.Df,Cv.prototype.Kk=function(e,o){for(var h=this.Df(),d=h.length;d--;)h[d].O(h[d]===e?Fu.DOWN:Fu.UP,o)},Cv.prototype.setActiveButton=Cv.prototype.Kk,Cv.prototype.o=function(){this.removeEventListener("statechange",this.i),this.na(),Qu.prototype.o.call(this)};function Ev(e){e=e||{},Ru.call(this),this.i=new Av,this.b=this.b.bind(this),this.s=this.s.bind(this),this.m=this.m.bind(this),this.Vb(e.alignment||"bottom-right"),Fv(this,e.baseLayers,e.layers)}u(Ev,Ru),t("H.ui.MapSettingsControl",Ev);function Gv(e,o){var h=[];return e.concat(o).forEach(function(d){h=h.concat(d.layer)}),h}function Hv(e,o,h){var d=e.Lb();if(d){e=Gv(e.c,e.g);var g=Gv(o,h);e.forEach(function(_){g.includes(_)||d.ae(_)})}}function Fv(e,o,h){Hv(e,o,h),e.D=NaN,e.c=Bc(o)?o:[],e.g=Bc(h)?h:[],e.l&&(e.l.na(),e.u.na(),Iv(e))}Ev.prototype.ta=function(){var e=this.Lb();e&&(e.addEventListener("tap",this.s),e=e.a,e.addEventListener("add",this.b),e.addEventListener("remove",this.b),e.addEventListener("set",this.b))},Ev.prototype.T=function(){var e=this.Lb();e&&(e.removeEventListener("tap",this.s),e=e.a,e.removeEventListener("add",this.b),e.removeEventListener("remove",this.b),e.removeEventListener("set",this.b))},Ev.prototype.X=function(e,o){var h=this.pa().translate("layers.choose");Ru.prototype.renderInternal.call(this,e,o),this.ta(),this.P=new gv({tooltip:h,label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M6.7,14.6 L4.5,16 L12,20.6 L19.5,16 L17.3,14.6 L19.1,13.5 L23,16 L12,23 L1,16 L4.9,13.5 L6.7,14.6 Z M12,2 L23,9 L12,16 L1,9 L12,2 Z"></path></svg>',onStateChange:A(function(d){d.target.getState()===Fu.DOWN?(this.i.O(Bv.OPEN),this.i.xk(this)):this.i.O(Bv.CLOSED)},this)}),Ev.prototype.wa=function(d){if(this.map.f.type===Qn){var g=H.map.render.harp.Style;d=[].concat(d);for(var _=0;!j&&_<d.length;_++){var $=d[_].ca();if($.Sb()&&$.V){$=$.V();var j=$.getConfig()||$.getUrl()}}if(j){var _t=function(_e){_e=_e.ca(),_e.Sb()&&_e.V&&_e.V()instanceof g&&_e.gb(new g(j))};this.g.forEach(function(_e){_e=_e.layer,Bc(_e)?_e.forEach(_t):_e&&_t(_e)})}}},this.l=new Cv({title:h,onActiveButtonChange:(function(){var d=this.D;t:{for(var g=this.l.Df(),_=g.length;_--;)if(g[_].getState()===Fu.DOWN){g=g[_];break t}g=null}if(g=g.getData(),g=this.c[g].layer,_=Bc(g),this.map.ud(_?g[0]:g),(d=this.c[d])&&(d=d.layer,Bc(d)))for(var $=d.length;1<$--;)this.map.ae(d[$]);if(_)for(d=g.length;1<d--;)this.map.nf(g[d],1);this.wa(g),this.m()}).bind(this)}),this.u=new Qu("div","H_grp"),this.ea=new Y("div","H_separator"),this.Ja(this.P),this.Ja(this.i),this.i.Ja(this.l),this.i.Ja(this.ea),this.i.Ja(this.u),Iv(this)},Ev.prototype.renderInternal=Ev.prototype.X;function Iv(e){var o=e.pa();e.c.forEach(function(h,d){var g=h.layer;this.l.Gg(new gv({label:Jv(o,h.label),data:d,disabled:!g||Bc(g)&&!g.length}))},e),e.g.forEach(function(h,d){var g=h.layer;this.u.Ja(new gv({label:Jv(o,h.label),onStateChange:this.sb.bind(this,h.layer),data:d,disabled:!g||Bc(g)&&!g.length}))},e),e.ea.qb(!(!e.g.length||!e.c.length)),x.setTimeout((function(){this.map&&(this.b(),this.P.va(!(this.c&&this.c.length||this.g&&this.g.length)))}).bind(e))}Ev.prototype.b=function(){var e=this.map.g,o=this.map.a;this.D=NaN,this.c.forEach(function(h,d){h=h.layer,h=e===(Bc(h)?h[0]:h),this.l.Df()[d].O(Fu[h?"DOWN":"UP"],!0),h&&(this.D=d)},this),this.g.forEach(function(h,d){h=h.layer;var g=Bc(h);d=this.u.dh()[d],!h||g&&!h.length?d.va(!0):d.O(Fu[o.indexOf(g?h[0]:h)!==-1?"DOWN":"UP"],!0)},this)},Ev.prototype.sb=function(e,o){e=Bc(e)?e:[e],o=o.target.getState()===Fu.DOWN;for(var h=0;h<e.length;h++)o?this.map.nf(e[h]):this.map.ae(e[h]);this.m()},Ev.prototype.m=function(){var e=Kv(this);e&&(e.Bg.ca().V().Oe(e.ca().V().qc()),this.map.ae(e),e.F(),delete e.Bg),Lv(this)&&Mv(this,this.map.g)};function Mv(e,o){var h=window.H.service&&window.H.service.omv.Provider,d=o.ca();if(h&&o.ca()instanceof h&&d.V().xe){var g=d.V(),_=(function(){var $=Nv.ground.filter(function(_e){return!!g.kh("layers."+_e)}),j=Nv.water.filter(function(_e){return!!g.kh("layers."+_e)});if($.concat(j).length){var _t={};$h(_t,g.xe($)),$h(_t,g.xe(j,!1,!0)),delete _t.global,$=new ti(_t,g.Ib()),$=d.s().$b($),$.Bg=o,this.map.nf($)}g.removeEventListener(Zh.CHANGE,_)}).bind(e);g.getState()!==Xh.READY?g.addEventListener(Zh.CHANGE,_):_()}}function Kv(e){return iu(e.map.a.La(),function(o){return!!o.Bg})}function Lv(e){e=e.map.a.La();var o=window.H.service&&window.H.service.traffic.flow.Provider;return!!o&&e.some(function(h){return h.ca()instanceof o})}var Nv={water:["water.water-labels"],ground:"road_labels continent_label island_label roads.shields roads.directions truck-restriction.signs places landuse.label".split(" ")};function Jv(e,o){return/^layers?/.test(o)&&e.Nf(o)?e.translate(o):o}Ev.prototype.s=function(){this.P.O(Fu.UP)},Ev.prototype.o=function(){Ev.j.o.call(this),this.T()};var Ov=[];t("H.ui.i18n.defaultLocales",Ov);var Pv={},Qv=[];function Rv(e,o){Pv[e]=o,Ov.indexOf(e)===-1&&Ov.push(e),Qv.length?Sv(e,o):Qv=Object.keys(o)}function Sv(e,o){for(var h=Qv,d=h.length,g;d--;)if(g=h[d],!o[g])throw Error("'"+g+"' key missing in translation map for "+e)}function Tv(e){e=e||{},Ru.call(this),this.c=new gv({label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><g transform="translate(1 3)"><path fill-rule="nonzero" d="M5,0 L5,2 L2,2 L2,16 L5,16 L5,18 L2,18 C0.9,18 0,17 0,15.75 L0,2.25 C0,1 0.9,0 2,0 L5,0 Z M17,0 L20,0 C21.1,0 22,1 22,2.25 L22,15.75 C22,17 21.1,18 20,18 L17,18 L17,16 L20,16 L20,2 L17,2 L17,0 Z"></path><rect width="10" height="2" x="6" y="8"></rect><rect width="2" height="10" x="10" y="4"></rect></g></svg>',onStateChange:A(this.On,this)}),this.Ja(this.c),this.Vb(e.alignment||"right-bottom")}u(Tv,Ru),t("H.ui.ZoomRectangle",Tv),p=Tv.prototype,p.On=function(e){var o=this.map,h=o.b.element;e.target.getState()===Fu.DOWN?(o.addEventListener("dragstart",this.fk,!0,this),o.addEventListener("drag",this.gk,!0,this),o.addEventListener("dragend",this.ek,!0,this),e=h.ownerDocument.createElement("div"),e.className="H_zoom_lasso",h.appendChild(e),this.b=e):(o.removeEventListener("dragstart",this.fk,!0,this),o.removeEventListener("drag",this.gk,!0,this),o.removeEventListener("dragend",this.ek,!0,this),h.removeChild(this.b))},p.fk=function(e){var o=this.b.style,h=e.currentPointer,d=h.viewportX;h=h.viewportY,e.target===this.map&&(e.stopPropagation(),o.width="0px",o.height="0px",o.top=h+"px",o.left=d+"px",o.display="block",this.i=h,this.g=d)},p.gk=function(e){var o=e.currentPointer,h=o.viewportX,d=o.viewportY;o=this.g;var g=this.i,_=this.b.style;e.target===this.map&&(e.stopPropagation(),e=h-o,h=d-g,_.left=o+(0>e?e:0)+"px",_.top=g+(0>h?h:0)+"px",_.width=Math.abs(e)+"px",_.height=Math.abs(h)+"px")},p.ek=function(e){var o=this.map,h=e.currentPointer;e.target===this.map&&(e.stopPropagation(),this.b.style.display="none",o.c.Wb({bounds:tg([o.Pa(this.g,this.i),o.Pa(h.viewportX,h.viewportY)])},!0))},p.X=function(e,o){Ru.prototype.renderInternal.call(this,e,o),this.c.jc(this.pa().translate("zoom.rectangle"))},Tv.prototype.renderInternal=Tv.prototype.X,Rv("nl-NL",{"layers.normal":"Kaartweergave","layers.satellite":"Satelliet","layers.terrain":"Terrein","layer.transit":"Openbaar vervoer","layer.traffic":"Verkeerssituatie","layer.incidents":"Toon verkeersincidenten","layers.choose":"Weergave kiezen",minimap:"Minimap","scale.switchToImperial":"Overgaan naar mijlen","scale.switchToMetric":"Wijzigen naar km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Uitzoomen","zoom.in":"Inzoomen","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Openbaar vervoer","traffic.MISCELLANEOUS":"Diversen","traffic.ACCIDENT":"Ongeval","traffic.OTHER_NEWS":"Meer informatie","traffic.OTHER":"Meer informatie","traffic.PLANNED_EVENT":"Geplande afzetting","traffic.ROAD_HAZARD":"Gevaar op de weg","traffic.ROAD_CLOSURE":"Rijbaan afgesloten","traffic.WEATHER":"Weer","traffic.CONGESTION":"Verkeersopstopping","traffic.CONSTRUCTION":"Wegwerkzaamheden","traffic.DISABLED_VEHICLE":"Voertuig met pech","traffic.LANE_RESTRICTION":"Rijstrookbeperking","traffic.from":"Begintijd:","traffic.until":"Geschatte eindtijd:","distance.measurement":"Measure distance"}),Rv("pt-PT",{"layers.normal":"Vista do mapa","layers.satellite":"Satélite","layers.terrain":"Terreno","layer.transit":"Transportes públicos","layer.traffic":"Condições de trânsito","layer.incidents":"Mostrar incidentes de trânsito","layers.choose":"Escolher vista",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Diminuir","zoom.in":"Aumentar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transportes públicos","traffic.MISCELLANEOUS":"Diversos","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras notícias","traffic.OTHER":"Outras notícias","traffic.PLANNED_EVENT":"Evento planeado","traffic.ROAD_HAZARD":"Perigo na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Meteorologia","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Construção","traffic.DISABLED_VEHICLE":"Veículo avariado","traffic.LANE_RESTRICTION":"Limitação da faixa de rodagem","traffic.from":"Hora de início:","traffic.until":"Hora de fim prevista:","distance.measurement":"Measure distance"}),Rv("ru-RU",{"layers.normal":"Режим карты","layers.satellite":"Спутниковая","layers.terrain":"Местность","layer.transit":"Общественный транспорт","layer.traffic":"Дорожные условия","layer.incidents":"Показать дорожные события","layers.choose":"Выберите вид",minimap:"Minimap","scale.switchToImperial":"Использовать мили","scale.switchToMetric":"Использовать километры","scale.km":"км","scale.m":"м","scale.mi":"миль","scale.ft":"фут","zoom.out":"Отдалить","zoom.in":"Приблизить","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Общественный транспорт","traffic.MISCELLANEOUS":"Прочее ДТП","traffic.ACCIDENT":"ДТП","traffic.OTHER_NEWS":"Другие новости","traffic.OTHER":"Другие новости","traffic.PLANNED_EVENT":"Плановое мероприятие","traffic.ROAD_HAZARD":"Дорожная опасность","traffic.ROAD_CLOSURE":"Дорога закрыта","traffic.WEATHER":"Погода","traffic.CONGESTION":"Пробка","traffic.CONSTRUCTION":"Ремонт","traffic.DISABLED_VEHICLE":"Неисправный автомобиль","traffic.LANE_RESTRICTION":"Ограничение полосы движения","traffic.from":"Время начала:","traffic.until":"Ожидаемое время окончания:","distance.measurement":"Измерить расстояние"}),Rv("fi-FI",{"layers.normal":"Karttanäkymä","layers.satellite":"Satelliitti","layers.terrain":"Maasto","layer.transit":"Julkinen liikenne","layer.traffic":"Liikenneolosuhteet","layer.incidents":"Näytä liikennetapahtumat","layers.choose":"Valitse näkymä",minimap:"Minimap","scale.switchToImperial":"Vaihda maileihin","scale.switchToMetric":"Vaihda kilometreihin","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Loitonna","zoom.in":"Lähennä","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Julkinen liikenne","traffic.MISCELLANEOUS":"Erittelemätön syy","traffic.ACCIDENT":"Onnettomuus","traffic.OTHER_NEWS":"Muu tapahtuma","traffic.OTHER":"Muu tapahtuma","traffic.PLANNED_EVENT":"Suunniteltu tapahtuma","traffic.ROAD_HAZARD":"Vaara tiellä","traffic.ROAD_CLOSURE":"Tie suljettu","traffic.WEATHER":"Sää","traffic.CONGESTION":"Ruuhka","traffic.CONSTRUCTION":"Rakennustyö","traffic.DISABLED_VEHICLE":"Pysähtynyt ajoneuvo","traffic.LANE_RESTRICTION":"Kaista rajoitus","traffic.from":"Alkamisaika:","traffic.until":"Arvioitu päättymisaika:","distance.measurement":"Measure distance"}),Rv("pt-BR",{"layers.normal":"Exibição do mapa","layers.satellite":"Satélite","layers.terrain":"Terreno","layer.transit":"Transporte público","layer.traffic":"Condições do trânsito","layer.incidents":"Mostrar incidentes no trânsito","layers.choose":"Escolher exibição",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"milhas","scale.ft":"pés","zoom.out":"Menos zoom","zoom.in":"Mais zoom","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte público","traffic.MISCELLANEOUS":"Miscelânea","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras notícias","traffic.OTHER":"Outras notícias","traffic.PLANNED_EVENT":"Evento planejado","traffic.ROAD_HAZARD":"Risco na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Clima","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Construção","traffic.DISABLED_VEHICLE":"Veículo incapacitado","traffic.LANE_RESTRICTION":"Restrição de pista","traffic.from":"Hora de início:","traffic.until":"Tempo final estimado:","distance.measurement":"Measure distance"}),Rv("zh-CN",{"layers.normal":"地图视图","layers.satellite":"卫星","layers.terrain":"地形","layer.transit":"公共交通","layer.traffic":"交通情况","layer.incidents":"显示交通事件","layers.choose":"选择视图",minimap:"Minimap","scale.switchToImperial":"切换为「英里」","scale.switchToMetric":"切换为「公里」","scale.km":"公里","scale.m":"米","scale.mi":"英里","scale.ft":"英尺","zoom.out":"缩小","zoom.in":"放大","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"公共交通","traffic.MISCELLANEOUS":"综合事件","traffic.ACCIDENT":"交通意外","traffic.OTHER_NEWS":"其他新闻","traffic.OTHER":"其他新闻","traffic.PLANNED_EVENT":"预定事件","traffic.ROAD_HAZARD":"道路危险","traffic.ROAD_CLOSURE":"道路已关闭","traffic.WEATHER":"天气","traffic.CONGESTION":"堵塞","traffic.CONSTRUCTION":"施工","traffic.DISABLED_VEHICLE":"车辆抛锚","traffic.LANE_RESTRICTION":"车道限制","traffic.from":"开始时间：","traffic.until":"预计结束时间：","distance.measurement":"Measure distance"}),Rv("es-ES",{"layers.normal":"Mapa","layers.satellite":"Satélite","layers.terrain":"Terreno","layer.transit":"Transporte público","layer.traffic":"Estado del tráfico","layer.incidents":"Mostrar incidentes de tráfico","layers.choose":"Elija una vista",minimap:"Minimap","scale.switchToImperial":"Cambiar a millas","scale.switchToMetric":"Cambiar a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Alejar","zoom.in":"Acercar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte público","traffic.MISCELLANEOUS":"Varios","traffic.ACCIDENT":"Accidente","traffic.OTHER_NEWS":"Más noticias","traffic.OTHER":"Más noticias","traffic.PLANNED_EVENT":"Acto programado","traffic.ROAD_HAZARD":"Riesgo en carretera","traffic.ROAD_CLOSURE":"Carretera cerrada","traffic.WEATHER":"Tiempo","traffic.CONGESTION":"Atasco","traffic.CONSTRUCTION":"Construcción","traffic.DISABLED_VEHICLE":"Vehículo averiado","traffic.LANE_RESTRICTION":"Restricción de carril","traffic.from":"Inicio:","traffic.until":"Finalización estimada:","distance.measurement":"Measure distance"}),Rv("fr-FR",{"layers.normal":"Carte","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Transports publics","layer.traffic":"Conditions de circulation","layer.incidents":"Afficher les incidents de circulation","layers.choose":"Choisir la vue",minimap:"Minimap","scale.switchToImperial":"Passer en miles","scale.switchToMetric":"Passer en km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom arrière","zoom.in":"Zoom avant","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transports publics","traffic.MISCELLANEOUS":"Divers","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Autre","traffic.OTHER":"Autre","traffic.PLANNED_EVENT":"Événement prévu","traffic.ROAD_HAZARD":"Danger routier","traffic.ROAD_CLOSURE":"Chaussée fermée","traffic.WEATHER":"Météo","traffic.CONGESTION":"Embouteillage","traffic.CONSTRUCTION":"Travaux","traffic.DISABLED_VEHICLE":"Véhicule en panne","traffic.LANE_RESTRICTION":"Restriction de voie","traffic.from":"Date ou heure de début:","traffic.until":"Date et heure de fin estimées:","distance.measurement":"Measure distance"}),Rv("pl-PL",{"layers.normal":"Widok mapy","layers.satellite":"Satelita","layers.terrain":"Teren","layer.transit":"Transport publiczny","layer.traffic":"Warunki drogowe","layer.incidents":"Pokaż zdarzenia drogowe","layers.choose":"Wybierz widok",minimap:"Minimap","scale.switchToImperial":"Zmień na mile","scale.switchToMetric":"Zmień na km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Oddal","zoom.in":"Przybliż","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transport publiczny","traffic.MISCELLANEOUS":"Inne zdarzenie","traffic.ACCIDENT":"Wypadek","traffic.OTHER_NEWS":"Inne wiadomości","traffic.OTHER":"Inne wiadomości","traffic.PLANNED_EVENT":"Zdarzenie planowane","traffic.ROAD_HAZARD":"Niebezpieczeństwo na drodze","traffic.ROAD_CLOSURE":"Jezdnia zamknięta","traffic.WEATHER":"Pogoda","traffic.CONGESTION":"Korek","traffic.CONSTRUCTION":"Budowa","traffic.DISABLED_VEHICLE":"Uszkodzony pojazd","traffic.LANE_RESTRICTION":"Ograniczenie pasa ruchu","traffic.from":"Data rozpoczęcia:","traffic.until":"Przybliżona data zakończenia:","distance.measurement":"Measure distance"}),Rv("de-DE",{"layers.normal":"Kartenansicht","layers.satellite":"Satellit","layers.terrain":"Gelände","layer.transit":"Öffentliche Verkehrsmittel","layer.traffic":"Verkehrslage","layer.incidents":"Verkehrsstörungen anzeigen","layers.choose":"Ansicht auswählen",minimap:"Minimap","scale.switchToImperial":"Umrechnung in Meilen","scale.switchToMetric":"Umrechnung in Kilometer","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Verkleinern","zoom.in":"Vergrößern","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Öffentliche Verkehrsmittel","traffic.MISCELLANEOUS":"Diverse","traffic.ACCIDENT":"Unfall","traffic.OTHER_NEWS":"Anderes Ereignis","traffic.OTHER":"Anderes Ereignis","traffic.PLANNED_EVENT":"Geplantes Ereignis","traffic.ROAD_HAZARD":"Verkehrshindernis","traffic.ROAD_CLOSURE":"Fahrbahn gesperrt","traffic.WEATHER":"Wetter","traffic.CONGESTION":"Verkehrsstau","traffic.CONSTRUCTION":"Baustelle","traffic.DISABLED_VEHICLE":"Liegengebliebenes Fahrzeug","traffic.LANE_RESTRICTION":"Fahrstreifensperrung","traffic.from":"Beginn:","traffic.until":"Voraussichtliches Ende:","distance.measurement":"Measure distance"}),Rv("tr-TR",{"layers.normal":"Harita görünümü","layers.satellite":"Uydu","layers.terrain":"Arazi","layer.transit":"Toplu ulaşım","layer.traffic":"Trafik durumları","layer.incidents":"Trafik olaylarını göster","layers.choose":"Görünüm seç",minimap:"Minimap","scale.switchToImperial":"Mile dönüştür","scale.switchToMetric":"Kilometreye dönüştür","scale.km":"km","scale.m":"m","scale.mi":"mil","scale.ft":"ft","zoom.out":"Uzaklaştır","zoom.in":"Yakınlaştır","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Toplu ulaşım","traffic.MISCELLANEOUS":"Çeşitli","traffic.ACCIDENT":"Kaza","traffic.OTHER_NEWS":"Diğer haberler","traffic.OTHER":"Diğer haberler","traffic.PLANNED_EVENT":"Planlı etkinlik","traffic.ROAD_HAZARD":"Yol tehlikesi","traffic.ROAD_CLOSURE":"Yol kapalı","traffic.WEATHER":"Hava durumu","traffic.CONGESTION":"Yoğunluk","traffic.CONSTRUCTION":"Yol çalışması","traffic.DISABLED_VEHICLE":"Araç arızası","traffic.LANE_RESTRICTION":"Şerit kısıtlaması","traffic.from":"Başlangıç zamanı:","traffic.until":"Tahmini bitiş zamanı:","distance.measurement":"Measure distance"}),Rv("it-IT",{"layers.normal":"Vista mappa","layers.satellite":"Satellite","layers.terrain":"Terreno","layer.transit":"Mezzi pubblici","layer.traffic":"Condizioni del traffico","layer.incidents":"Mostra incidenti stradali","layers.choose":"Scegli vista",minimap:"Minimap","scale.switchToImperial":"Passa a miglia","scale.switchToMetric":"Passa a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom indietro","zoom.in":"Zoom avanti","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Mezzi pubblici","traffic.MISCELLANEOUS":"Varie","traffic.ACCIDENT":"Incidente","traffic.OTHER_NEWS":"Altre notizie","traffic.OTHER":"Altre notizie","traffic.PLANNED_EVENT":"Evento pianificato","traffic.ROAD_HAZARD":"Strada dissestata","traffic.ROAD_CLOSURE":"Strada chiusa","traffic.WEATHER":"Maltempo","traffic.CONGESTION":"Ingorgo","traffic.CONSTRUCTION":"Lavori in corso","traffic.DISABLED_VEHICLE":"Veicolo in panne","traffic.LANE_RESTRICTION":"Restrizione di corsia","traffic.from":"Ora di inizio:","traffic.until":"Ora di fine stimata:","distance.measurement":"Measure distance"}),Rv("en-US",{"layers.normal":"Map view","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Public transport","layer.traffic":"Traffic conditions","layer.incidents":"Show traffic incidents","layers.choose":"Choose view",minimap:"Minimap","scale.switchToImperial":"Change to miles","scale.switchToMetric":"Change to km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom out","zoom.in":"Zoom in","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Public transport","traffic.MISCELLANEOUS":"Miscellaneous","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Other news","traffic.OTHER":"Other news","traffic.PLANNED_EVENT":"Planned event","traffic.ROAD_HAZARD":"Road hazard","traffic.ROAD_CLOSURE":"Roadway closed","traffic.WEATHER":"Weather","traffic.CONGESTION":"Congestion","traffic.CONSTRUCTION":"Construction","traffic.DISABLED_VEHICLE":"Disabled vehicle","traffic.LANE_RESTRICTION":"Lane restriction","traffic.from":"Start time:","traffic.until":"Estimated end time:","distance.measurement":"Measure distance"});function Uv(e,o){if(!Cc(e))throw new TypeError("string locale code required");if(Ea(o))Sv(e,o);else{if(Ov.indexOf(e)===-1)throw Error("Default locale '"+e+"' does nto exist.");o=Pv[e]}this.b=o||{},this.a=e}t("H.ui.i18n.Localization",Uv),Uv.prototype.zm=function(){return this.a},Uv.prototype.getLocale=Uv.prototype.zm,Uv.prototype.sm=function(){return Object.keys(this.b)},Uv.prototype.getKeys=Uv.prototype.sm,Uv.prototype.Nf=function(e){return!(!this.b||!this.b[e])},Uv.prototype.hasKey=Uv.prototype.Nf,Uv.prototype.translate=function(e){var o=this.b[e];if(!Cc(o))throw Error("Translation missing for key '"+e+"'.");return o},Uv.prototype.translate=Uv.prototype.translate;function Vv(e){e=e||{},Ru.call(this),this.Ka("H_scalebar"),this.Vb(e.alignment||"right-bottom"),this.m=150,this.update=A(this.update,this),this.i=this.g=this.b=this.c=null}u(Vv,Ru),t("H.ui.ScaleBar",Vv),Vv.prototype.X=function(e,o){Ru.prototype.renderInternal.call(this,e,o),e.innerHTML='<svg height="12" version="1.1" xmlns="http://www.w3.org/2000/svg"><polyline style="fill:none; stroke:white; stroke-width:4" points="2,2 2,10 98,10 98,2"/><polyline style="fill:none; stroke:black; stroke-width:2" points="2,2 2,10 98,10 98,2"/></svg><div style="padding: 0 0 0 10px"></div>',e.style.direction="ltr",this.c=e.firstChild,o=this.c.childNodes,this.b=o[0],this.g=o[1],this.i=e.lastChild,this.l=ev.METRIC,this.s=A(function(h){this.dc()||(this.dispatchEvent("toggleunitsystem"),h.preventDefault())},this),this.u=A(function(h){h.preventDefault()},this),Bu(e,"start",this.u),Bu(e,"end",this.s),this.jc(this.pa().translate("scale.switchToImperial")),this.update()},Vv.prototype.renderInternal=Vv.prototype.X,Vv.prototype.Ia=function(e){this.map&&this.map.removeEventListener("mapviewchange",this.update),e&&e.addEventListener("mapviewchange",this.update),Ru.prototype.Ia.apply(this,arguments)},Vv.prototype.setMap=Vv.prototype.Ia,Vv.prototype.capture=function(e,o,h){var d=this.N(),g=d.ownerDocument,_=g.createElement("canvas"),$=_.getContext("2d"),j=g.createElementNS("http://www.w3.org/2000/svg","svg"),_t=g.createElementNS("http://www.w3.org/2000/svg","foreignObject"),_e=lf(d,g,!1);g=parseFloat(d.offsetWidth)+1;var _r=parseFloat(d.offsetHeight),_n=g*e;e*=_r,_.width=_n,_.height=e,j.setAttribute("xmlns","http://www.w3.org/2000/svg"),j.setAttribute("width",_n),j.setAttribute("height",e),j.setAttribute("viewBox","0 0 "+g+" "+_r),_t.setAttribute("width","100%"),_t.setAttribute("height","100%"),j.appendChild(_t),_e.setAttribute("width","100%"),_e.setAttribute("height","100%"),_e.setAttribute("xmlns","http://www.w3.org/1999/xhtml");var _i=window.getComputedStyle(d);"box-shadow display align-items font font-family font-size height text-shadow direction".split(" ").forEach(function(_o){_e.style.setProperty(_o,_i.getPropertyValue(_o))}),_t.appendChild(_e),d=bf(j.outerHTML),new tf("image",d).then(function(_o){$.drawImage(_o,0,0),o(_)},h)},Vv.prototype.capture=Vv.prototype.capture,Vv.prototype.Qe=function(e){this.l=e,this.jc(e==="imperial"?this.pa().translate("scale.switchToMetric"):this.pa().translate("scale.switchToImperial")),this.update()},Vv.prototype.onUnitSystemChange=Vv.prototype.Qe,Vv.prototype.update=function(){var e;if(this.N()){this.c=this.c,this.b=this.b;var o=this.m,h=0,d=this.map;if(d){var g=Math.round(.5*d.b.width),_=Math.round(.5*d.b.height);(e=d.Pa(g,_))&&(d=d.Pa(g+1,_))&&(h=100*e.Wa(d))}h&&(this.l===ev.IMPERIAL?1609.344>h?(d=h/.3048006,e=this.pa().translate("scale.ft")):(d=h/1609.344,e=this.pa().translate("scale.mi")):1e3>h?(d=h,e=this.pa().translate("scale.m")):(d=h/1e3,e=this.pa().translate("scale.km")),h=Math.pow(10,Math.floor(Math.log(d)/Math.LN10)),d=h/d*100,d<o/5?(h*=5,d*=5):d<o/2?(h*=2,d*=2):d>o&&(h/=2,d/=2),d=Math.round(d),this.c.setAttribute("width",d),this.i.textContent=h+" "+e,this.b.points.getItem(2).x=this.g.points.getItem(2).x=this.b.points.getItem(3).x=this.g.points.getItem(3).x=d-2)}};function Wv(e){C(e,Re,Wv,1),Y.call(this,"div","H_context_menu_item"),this.b=e,this.c=A(this.c,this),this.a=A(this.a,this),this.b.addEventListener("update",this.a)}u(Wv,Y),t("H.ui.context.Item",Wv),Wv.prototype.c=function(e){var o=this.b,h=o.callback;h&&!o.isDisabled()&&(this.dispatchEvent("click"),h(e))},Wv.prototype.X=function(){var e=this,o=this.N();Ee(o,"click",this.c),o.addEventListener("keyup",function(h){h.keyCode==13&&e.c(h)}),this.a()},Wv.prototype.renderInternal=Wv.prototype.X,Wv.prototype.a=function(){var e=this.N(),o=this.b;o.callback?(this.Ka("clickable"),e.setAttribute("tabindex","0")):(this.kb("clickable"),e.removeAttribute("tabindex")),o.isDisabled()?this.Ka("disabled"):this.kb("disabled"),o=o.getLabel(),su.textContent=o,e.innerHTML=su.innerHTML.split(`
`).join("<br/>")},Wv.prototype.o=function(){Y.prototype.o.call(this),this.b.removeEventListener("update",this.a)};function Xv(e){C(e,Array,Xv,1),Qu.call(this,"div","H_context_menu"),this.c=e,this.b=null}u(Xv,Qu),t("H.ui.context.Menu",Xv),Xv.prototype.X=function(){Qu.prototype.X.apply(this,arguments),this.c.forEach(function(e){e===Se?e=new Y("div","H_context_menu_item_separator"):(e=new Wv(e),e.addEventListener("click",this.g.bind(this))),this.Ja(e)},this),Ee(this.N(),["mousedown","touchstart","pointerdown","wheel"],function(e){e.stopPropagation()})},Xv.prototype.renderInternal=Xv.prototype.X,Xv.prototype.setPosition=function(e,o){if(this.b){var h=this.N(),d=h.offsetWidth,g=h.offsetHeight,_=this.b,$=_.b.width;_=_.b.height,e+d>$&&e>$/2&&(e-=d),o+g>_&&o>_/2&&(o-=g),lu(h,e,o)}},Xv.prototype.setPosition=Xv.prototype.setPosition,Xv.prototype.g=function(){this.b&&this.b.dispatchEvent(new ud("contextmenuclose",this.b))},Xv.prototype.Ia=function(e){this.b=e},Xv.prototype.setMap=Xv.prototype.Ia;function Yv(e,o){o=o||{};var h=this;Y.call(this,"div","H_ib H_ib_top"),this.u=A(function(d){h.dc()||(h.close(),d.preventDefault())},this),this.update=A(this.update,this),this.i=A(this.i,this),this.setPosition(e),this.$e(o.content),o.onStateChange&&this.addEventListener("statechange",o.onStateChange),this.O(Zv.OPEN)}u(Yv,Y),t("H.ui.InfoBubble",Yv),Yv.prototype.a=null,Yv.prototype.ya=function(){return this.m},Yv.prototype.setPosition=function(e){this.m=ng(e),this.update()},Yv.prototype.setPosition=Yv.prototype.setPosition,Yv.prototype.Ia=function(e){this.a=e},Yv.prototype.X=function(e,o){this.l=yu(o,"div","H_ib_body"),this.tailEl_=yu(o,"div","H_ib_tail"),this.c=yu(o,"div","H_ib_close H_btn",'<svg version="1.1" class="H_icon" viewBox="0 0 12 12"><path d="m8.12 6 3.66-3.66c.29-.29.29-.76 0-1.05l-1.06-1.06c-.29-.29-.76-.29-1.05 0l-3.66 3.66-3.66-3.66c-.29-.29-.76-.29-1.05 0l-1.06 1.06c-.29.29-.3.76 0 1.05l3.66 3.66-3.66 3.66c-.29.29-.29.76 0 1.05l1.06 1.06c.29.29.76.29 1.05 0l3.66-3.66 3.66 3.66c.29.29.76.29 1.05 0l1.06-1.06c.29-.29.3-.76 0-1.05z"></path></svg>'),this.b=yu(o,"div","H_ib_content","&nbsp;"),this.l.appendChild(this.c),this.l.appendChild(this.b),Bu(this.c,"start",this.u),this.a.c.addEventListener("sync",this.update),this.a.b.addEventListener("sync",this.update),e.appendChild(this.l),e.appendChild(this.tailEl_),this.$e(this.g)},Yv.prototype.renderInternal=Yv.prototype.X,Yv.prototype.i=function(){this.s||(this.s=setTimeout(this.update,0))},Yv.prototype.update=function(){var e=this.N(),o=this.a,h,d="none";if(this.s=0,o&&e&&this.getState()===Zv.OPEN){if(h=o.Da(this.m)){var g=h.x;h=h.y,o=o.b.width,(g>=-o||g<=2*o||h>=-o||h<=2*o)&&(d="",mu?(e.style.left=g-o+"px",e.style.top=h+"px"):lu(e,g,h))}e.style.display=d,d===""&&(e.style.visibility="visible")}};var Zv={OPEN:"open",CLOSED:"closed"};Yv.State=Zv,Yv.prototype.C=Zv.OPEN,Yv.prototype.getState=function(){return this.C},Yv.prototype.getState=Yv.prototype.getState,Yv.prototype.O=function(e){e!==this.C&&(this.C=e,this.dispatchEvent("statechange")),(e=this.N())&&(this.C===Zv.OPEN?(e.style.display="block",e.style.visibility="hidden",this.i()):e.style.display="none")},Yv.prototype.setState=Yv.prototype.O,Yv.prototype.close=function(){this.O(Zv.CLOSED)},Yv.prototype.close=Yv.prototype.close,Yv.prototype.open=function(){this.O(Zv.OPEN)},Yv.prototype.open=Yv.prototype.open,Yv.prototype.Ul=function(){return this.b||null},Yv.prototype.getContentElement=Yv.prototype.Ul,Yv.prototype.$e=function(e){if(e)if(typeof e=="string"||typeof e.nodeType=="number"&&typeof e.nodeName=="string")this.g=e;else throw Error("InfoBubble content must be a string or HTML node.");else this.g="";this.N()&&(this.g?(this.b.innerHTML="",typeof this.g=="string"?this.b.innerHTML=e:typeof e.nodeType=="number"&&typeof e.nodeName=="string"&&this.b.appendChild(e)):this.b.innerHTML="&nbsp;",this.i())},Yv.prototype.setContent=Yv.prototype.$e,Yv.prototype.o=function(){this.close(),this.$e(""),this.c&&Cu(this.c,"end",this.u),this.a&&(this.a.c.removeEventListener("sync",this.update),this.a.b.removeEventListener("sync",this.update)),Y.prototype.o.call(this)};function $v(e,o){this.b=e,this.a=null,this.f=0,this.c=22,this.i=o,this.Xf=A(this.Xf,this),this.Sg=A(this.Sg,this),e=this.b.Lb(),e.addEventListener("mapviewchange",this.bo,!1,this),this.g=e.f.type,e=e.a,e.addEventListener("add",this.Sn,!1,this),e.addEventListener("remove",this.Tn,!1,this)}function aw(e,o,h){var d=o.ca();d&&(h!==void 0&&h)&&d.removeEventListener("tap",e.Xf),o?(d.addEventListener("tap",e.Xf),e.f=d.min,e.c=d.max):(e.f=0,e.c=22)}p=$v.prototype,p.bo=function(e){var o=e.newValue.zoom;this.a&&e.modifiers&e.ZOOM&&(o<this.f||o>this.c)&&this.a.close()},p.Sn=function(e){e=e.added,bw(e)&&aw(this,e)},p.Tn=function(e){e=e.removed,bw(e)&&(this.a&&this.a.close(),aw(this,e,!0))};function bw(e){return window.H.service&&(e.ca()instanceof window.H.service.traffic.incidents.Provider||e.ca()instanceof window.H.service.trafficVectorTile.Provider&&e.ca().s().b==="incident")}p.Xf=function(e){var o,h=this.g===kk.HARP;e.target&&(o=e.target.getData())&&e.currentPointer.button===0&&(h?(o=this.b.Lb().Pa(e.currentPointer.viewportX,e.currentPointer.viewportY),(h=e.target.getData()?e.target.getData().properties.id:null)&&this.i.requestIncidentById(h,{locationReferencing:"none",lang:this.b.pa().a},this.hl.bind(this,o),console.error)):(h=e.target.ga(),this.hl(h,o)),e.stopPropagation())},p.hl=function(e,o){if(this.g===kk.HARP){o=o.incidentDetails;var h=this.b.pa().a,d=o.type,g=d.split(/(?=[A-Z])/).join("_").toUpperCase();this.b.pa().Nf("traffic."+g)&&(d=this.b.pa().translate("traffic."+g)),e={position:e,title:d,description:o.description.value,startTime:new Date(o.startTime).toLocaleString(h).split(",").join(" "),endTime:new Date(o.endTime).toLocaleString(h).split(",").join(" ")}}else h=o.TRAFFIC_ITEM_TYPE_DESC.replace(" ","_"),this.b.pa().Nf("traffic."+h)?h=this.b.pa().translate("traffic."+h):h=o.TRAFFIC_ITEM_DESCRIPTION[o.TRAFFIC_ITEM_DESCRIPTION.length-1].value,e={position:e,title:h,description:o.TRAFFIC_ITEM_DESCRIPTION[0].value,startTime:o.START_TIME,endTime:o.END_TIME};this.Sg(e)},p.Sg=function(e){var o=e.position,h=e.title,d=e.description,g=e.startTime;e=e.endTime,this.a||(this.a=new Yv(o),this.a.Ka("H_tib"),this.b.Yi(this.a)),this.a.setPosition(o),this.a.$e('<div class="H_tib_content"><div class="H_rdo_title" dir="auto">{{title}}</div><div class="H_tib_desc" dir="auto"><span>{{desc}}</span><div class="H_tib_time"><span class="H_tib_left">{{traffic.from}}</span><span class="H_tib_right">{{from}}</span><br/><span class="H_tib_left">{{traffic.until}}</span><span class="H_tib_right">{{until}}</span></div></div>'.replace("{{title}}",h).replace("{{desc}}",d).replace("{{traffic.from}}",this.b.pa().translate("traffic.from")).replace("{{traffic.until}}",this.b.pa().translate("traffic.until")).replace("{{from}}",g).replace("{{until}}",e)),this.a.open()};function cw(e,o){try{return e.Qf=!0,new e(o)}finally{e.Qf=!1}}function dw(e,o){var h=e.N(),d=this;F.call(this),this.c=e,this.i=h.ownerDocument,this.f={},this.b=[],this.S=yu(this.i,"div","H_ui"),this.setDirection(),this.P=A(function(g){this.m.put(g.target,g.target.Mc)},this),this.addEventListener("alignmentchange",this.P),this.L=A(function(){this.fl()},this),this.addEventListener("toggleunitsystem",this.L),this.S.addEventListener("contextmenu",this.J,!1),this.S.addEventListener("MSHoldVisual",this.J,!1),this.c.addEventListener("contextmenu",this.D,!1,this),this.c.addEventListener("contextmenuclose",this.u,!1,this),this.c.tb(this.F.bind(this)),this.a=null,this.s=-1,this.m=new Uu(this.S,this.i),this.g=ev.METRIC,ew(this,"en-US"),o&&fw(this,o),h.appendChild(this.S),x.setTimeout(function(){d.m.update()},1)}u(dw,F),t("H.ui.UI",dw),dw.prototype.J=function(e){for(var o=e.target;o&&!/\bH_ib_content\b/.test(o.className);)o=o.parentNode;o||e.preventDefault()},dw.prototype.N=function(){return this.S},dw.prototype.getElement=dw.prototype.N,dw.prototype.Lb=function(){return this.c},dw.prototype.getMap=dw.prototype.Lb,dw.prototype.dn=function(){return this.g},dw.prototype.getUnitSystem=dw.prototype.dn,dw.prototype.vg=function(e){var o=this.f,h;if(e!==this.g)for(h in this.g=e,o)o[h]instanceof Ru&&o[h].onUnitSystemChange(this.g)},dw.prototype.setUnitSystem=dw.prototype.vg,dw.prototype.setDirection=function(e){this.S.setAttribute("dir",e||getComputedStyle(this.Lb().N()).direction)},dw.prototype.setDirection=dw.prototype.setDirection;function ew(e,o){if(Cc(o))var h=o;else if(o instanceof Uv){h=o.a;var d=o}else throw Error("The locale parameter must be a string or a H.ui.i18n.Localization object.");if(h)if(d)e.l=d;else if(0<=Ov.indexOf(h))e.l=new Uv(h);else throw Error("Locale ["+h+"] is not supported.");else throw Error("No locale was defined.")}dw.prototype.pa=function(){return this.l},dw.prototype.fl=function(){this.g===ev.METRIC?this.vg(ev.IMPERIAL):this.vg(ev.METRIC)},dw.prototype.toggleUnitSystem=dw.prototype.fl,dw.prototype.Yi=function(e){var o=this.b.length,h=this.S;if(0>this.b.indexOf(e)){e.ka(this),e.Ia(this.c);var d=e.W(this.i);o=0<o?this.b[o-1].N().nextSibling:this.S.firstChild,h.insertBefore(d,o),this.b.push(e)}},dw.prototype.addBubble=dw.prototype.Yi,dw.prototype.D=function(e){var o=e.items;this.a&&this.u(),clearTimeout(this.s),this.s=x.setTimeout((function(){o.length&&(this.a=new Xv(o),this.S.insertBefore(this.a.W(this.i),this.S.firstChild),this.a.ka(this),this.a.Ia(this.c),this.a.setPosition(e.viewportX,e.viewportY))}).bind(this),0)},dw.prototype.u=function(){this.a&&(this.a.F(),this.a=null)},dw.prototype.jo=function(e){var o=this.b.indexOf(e);-1<o&&(e.ka(null),e.Ia(null),this.b.splice(o,1),this.S.removeChild(e.N()))},dw.prototype.removeBubble=dw.prototype.jo,dw.prototype.Ql=function(){return this.b},dw.prototype.getBubbles=dw.prototype.Ql,dw.prototype.Bd=function(e,o){if(this.Ce(e))throw Error("A control with name ["+e+"] is already registered.");o.ka(this),o.Ia(this.c),o.xa=this.l,o.W(this.i),o.onUnitSystemChange(this.g),this.f[e]=o},dw.prototype.addControl=dw.prototype.Bd,dw.prototype.lo=function(e){var o=this.Ce(e);if(o)o.T(),o.ka(null),o.Ia(null),Du(o),delete this.f[e];else throw Error("Control ["+e+"] not found in this UI's controls.");return o},dw.prototype.removeControl=dw.prototype.lo,dw.prototype.Ce=function(e){return this.f[e]},dw.prototype.getControl=dw.prototype.Ce,dw.prototype.o=function(){for(var e in this.f)ju.hasOwnProperty.call(this.f,e)&&this.f[e].F();this.b.forEach(function(o){o.F()}),(e=this.S.parentNode)&&e.removeChild(this.S),F.prototype.o.call(this),delete this.S};function fw(e,o){var h,d;o.unitSystem&&e.vg(o.unitSystem),(d=o.locale)&&ew(e,d),(h=o.zoom)&&e.Bd("zoom",new Su(Ea(h)?h:null)),(h=o.zoomrectangle)&&e.Bd("zoomrectangle",new Tv(Ea(h)?h:null)),(h=o.mapsettings)&&e.Bd("mapsettings",new Ev(Ea(h)?h:null)),(h=o.scalebar)&&e.Bd("scalebar",new Vv(Ea(h)?h:null)),(h=o.distancemeasurement)&&e.Bd("distancemeasurement",new wv(Ea(h)?h:null))}dw.prototype.capture=function(e,o,h,d){var g=this.Ce("scalebar"),_=e.getContext("2d"),$=e.width,j=e.height,_t=this.c.s,_e=5+(_t?_t.N().childNodes[1].offsetHeight:0);g&&g.wc()?g.capture(o,function(_r){_.drawImage(_r,$-_r.width-5*o,j-_r.height-_e*o),h(e)},d):h(e)},dw.prototype.capture=dw.prototype.capture,dw.createDefault=function(e,o,h){var d=e.f.type;if(h=new dw(e,{unitSystem:ev.METRIC,zoom:{alignment:"right-bottom"},mapsettings:gw(d,o,e.g),scalebar:{alignment:"bottom-right"},locale:h||"en-US"}),d===kk.P2D){var g=h.Ce("mapsettings"),_=function(){if(g.Lb()){var _e=gw(d,o,e.g);Fv(g,_e.baseLayers,_e.layers)}};e.addEventListener(e.A.lf,_),h.tb(function(){e.removeEventListener(e.A.lf,_)}),g.tb(function(){e.removeEventListener(e.A.lf,_)})}if(d===kk.HARP){if(window.H.service){var $=o.vector.traffic.map.ca().s().v(),j=new window.H.service.Url($.i,$.c.split(".").slice(-2).join("."));j=cw(window.H.service.traffic.Service7,{platformBaseUrl:j});var _t=j.v().getQuery();_t.apikey=$.getQuery().apikey,j.v().bf(_t),new $v(h,j)}}else new $v(h);return h},dw.prototype.Bo=function(){},dw.prototype.setTrafficIncidentsHandle=dw.prototype.Bo;function hw(e,o,h,d){for(var g=e,_=0;g&&_<o.length;_++)g=g[o[_]];if(g&&g!==e)return e={label:h,layer:g},d.push(e),e}function gw(e,o,h){var d=[],g=[],_=o.raster;if(e===kk.P2D&&_){if(hw(o,["raster","normal","map"],"layers.normal",d),hw(o,["raster","satellite","map"],"layers.satellite",d),hw(o,["raster","terrain","map"],"layers.terrain",d),h){for(var $ in _)if(_[$]&&_[$].map===h){var j=$;break}}hw(o,["raster","normal","trafficincidents"],"layer.incidents",g),hw(o,["raster",j,"transit"],"layer.transit",g)}else hw(o,["vector","normal","map"],"layers.normal",d),e===kk.WEBGL?(hw(o,["raster","satellite","map"],"layers.satellite",d),hw(o,["vector","normal","traffic"],"layer.traffic",g),hw(o,["vector","normal","trafficincidents"],"layer.incidents",g)):(h=hw(o,["hybrid","day","vector"],"",[]),_=hw(o,["hybrid","day","raster"],"layers.satellite",d),_.layer=[_.layer,h.layer],window.H.service&&(h=o.vector.traffic.map.ca().s().v(),o=cw(window.H.service.trafficVectorTile.Service,{baseUrl:h,layer:"flow"}),h=cw(window.H.service.trafficVectorTile.Service,{baseUrl:h,layer:"incident"}),j=Ao()+"/harp/oslo/normal.day.json",_=new H.map.render.harp.Style(j),j=new H.map.render.harp.Style(j),o=o.createLayer(_,{engineType:e}),e=h.createLayer(j,{engineType:e}),g.push({label:"layer.traffic",layer:o},{label:"layer.incidents",layer:e})));return{alignment:"bottom-right",baseLayers:d,layers:g}}function iw(e,o){if(o=o||{},!(e&&e instanceof sl))throw Error("Base layer is mandatory for overview UI element");Ru.call(this),this.c=new gv({label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="H_icon"><g fill-rule="evenodd" transform="translate(2 2)"><rect width="9" height="9" x="10" y="10"/><rect class="H_icon_stroke" width="18" height="18" x="1" y="1" fill="none" stroke="#000" stroke-width="2" rx="2"/></g></svg>',onStateChange:A(this.g,this)}),this.Ja(this.c),this.b=new jw(e,o.zoomDelta,o.scaleX,o.scaleY),this.Vb(o.alignment||"right-bottom"),this.Ja(this.b)}u(iw,Ru),t("H.ui.Overview",iw),iw.prototype.ud=function(e){return this.b.ud(e),this},iw.prototype.setBaseLayer=iw.prototype.ud,iw.prototype.g=function(e){e.target.getState()===Fu.DOWN?(e=this.b,kw(e,!0),e.Fi(),e.Ka("H_overview_active"),e.b.addEventListener("mapviewchange",e.Fi,!1,e)):lw(this.b)},iw.prototype.X=function(e,o){Ru.prototype.renderInternal.call(this,e,o),this.c.N().style.float=this.Mc.match("right")?"right":"left",this.b.Ia(this.map),this.c.jc(this.pa().translate("minimap"))},iw.prototype.renderInternal=iw.prototype.X,iw.prototype.o=function(){this.b.F(),Y.prototype.o.call(this)};function jw(e,o,h,d){this.l=e,typeof o=="number"&&(this.jl=o),typeof h=="number"&&(this.tk=h),typeof d=="number"&&(this.uk=d),Qu.call(this,"div","H_overview")}u(jw,Ru),jw.prototype.ud=function(e){this.c.ud(e)},jw.prototype.X=function(e,o){o=yu(o,"div","H_overview_map"),zu(e,o),this.g=o},jw.prototype.renderInternal=jw.prototype.X,jw.prototype.renderInternal=jw.prototype.X,p=jw.prototype,p.jl=3,p.tk=5,p.uk=5,p.Ia=function(e){this.b=e,this.c=new U(this.g,this.l,{pixelRatio:this.b.Xa(),engineType:this.b.f.type}),this.c.s.N().style.display="none",this.s=this.c.c,this.i=this.b.c};function lw(e){!e.zd&&kw(e),e.kb("H_overview_active"),e.b.removeEventListener("mapviewchange",e.Fi,!1,e)}p.Fi=function(e){e&&e.modifiers&e.SIZE&&kw(this,!0),e=this.i.jb(),e.zoom-=this.jl,this.s.Wb(e)};function kw(e,o){var h=e.b.b.element,d=e.N().style,g=h.offsetWidth/e.tk/10;h=h.offsetHeight/e.uk/10;var _=e.g.style;o?(d.width=g+"em",d.height=h+"em",_.width=g+"em",_.height=h+"em"):d.width=d.height="0em",e.c.b.resize()}p.o=function(){jw.j.o.call(this),lw(this),this.c.F(),this.c=this.s=this.i=this.b=this.l=this.g=null},t("H.ui.buildInfo",function(){return Hf("H-ui","1.49.1","74e5afb",{region:"row"})});function mw(e,o){if(!e)throw new D(mw,0,e);mw.j.constructor.call(this,e),this.b={},this.c=!(!o||!o.oc),this.f=nw++}u(mw,Cm);var nw=0;mw.prototype.W=function(e,o,h,d,g,_){var $=Ad(d),j=this.eb,_t=$+(h.exp-j.pixelProjection.exp),_e=j.min,_r=j.max;d=j.tileSize;var _n=j.ca().g,_i=this.lb,_o=_i.Tc(),_a=_i.yb().w,_u=h.w,_f=h.x,_h=h.y,_d={};if($<_e||$>_r)return wk.DONE;for(g=j.requestTiles(e,_t,g,_,this.f),e=g.total,g=g.tiles,_=g.length,this.g=h,this.l=o,this.a=_t,_o!==_n&&_i.ic(_n),h=d=d*_u/(Gd(2,_t)*d),this.c||(d%1&&(d=Bd(d),_u=h/d,_f/=_u,_h/=_u,_u=Gd(2,_t)*d),_f=Bd(_f),_h=Bd(_h)),this.i=h,_t=-d,$=_a+d,j=0;j<_;j++){if(_a=g[j],(_e=_a.data)&&_e.tagName){for(h=o.x-(_f-_a.x*d),_n=o.y-(_h-_a.y*d),_i.Oc(_e,h,_n,d,d),_o=h;(_o-=_u)>_t;)_i.Oc(_e,_o,_n,d,d);for(_o=h;(_o+=_u)<$;)_i.Oc(_e,_o,_n,d,d)}_d[this.a+"_"+_a.x+"_"+_a.y]=_a}return this.b=_d,_===e?wk.DONE:wk.PENDING},mw.prototype.Ea=function(e,o,h){var d=this.i,g=d/this.eb.tileSize,_=this.g,$=this.l,j;if(vc(this.a)&&_){e=_.x+(e-$.x),o=_.y+(o-$.y);var _t=Bd(_.w/d),_e=_=Bd(e/d);$=Bd(o/d),Dd(_e)>=_t&&(_e%=_t),0>_e&&(_e=_t+_e),(_t=this.b[this.a+"_"+_e+"_"+$])&&_t.Ea&&(j=_t.Ea((e-d*_)/g,(o-d*$)/g,h))}return j||hf},mw.prototype.Rd=function(){return"2d"};function ow(e,o){o=o||{},C(e,tl,ow,0),ow.j.constructor.call(this,e),this.oc=!!o.oc,this.c=o.fb||0,this.a=[],this.b={}}u(ow,Cm),ow.prototype.W=function(e,o,h,d,g,_){var $,j=this.eb,_t;d-=this.c,this.a.length=0;var _e=this.b;if(this.b=$={},d>=j.min&&d<=j.max){var _r=j.sd(e,d,g,_),_n=_r.overlays;if(e=_n.length)for(_n.sort(ph),d=this.lb,g=this.oc,_=0;_<e;_++){j=_n[_];var _i=j.K(),_o=h.ib(_i.Nb()),_a=h.ib(_i.Jb());_i=h.w,_o.x>=_a.x&&(_o.x-=_i),_i=-((_o.x+_a.x)/_i>>1)*_i,_o.x+=_i,_o.add(o),_a.x+=_i,_a.add(o),g||(_o.round(),_a.round()),(_i=_e[_t=j.cb()])?delete _e[_t]:_i={ho:j},$[_t]=_i;var _u=_o.x;_o=_o.y;var _f=_a.x;_a=_a.y;var _h=_f-_u,_d=_a-_o;d.ic(j.Tc()),d.Oc(j.Qc(),_u,_o,_h,_d),_i.Vg?_i.Vg.set(_u,_o,_f,_a):_i.Vg=new yk(_u,_o,_f,_a),this.a.push(_i)}}return!_r||_r.requested&&_r.requested===_r.total||!_r.requested&&_n.length===_r.total?wk.DONE:wk.PENDING},ow.prototype.Ea=function(e,o,h){for(var d=this.a,g=d.length,_,$,j;g--;)if(_=d[g],$=_.Vg,$.vf(e,o)){if(_=_.ho,j)j.push(_);else if(j=[_],h)break}return j||hf},ow.prototype.Rd=function(){return"2d"},ow.prototype.o=function(){delete this.a,ow.j.o.call(this)},ow.prototype.disposeInternal=ow.prototype.o;var pw={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:0},incline:{min:0,max:0},heading:{min:180,max:180}},interaction:{ZOOM:Nl.ZOOM,COORD:Nl.COORD},capture:!0};t("H.map.render.p2d.capabilities",pw);function qw(e,o){this.a=[],qw.j.constructor.apply(this,arguments)}u(qw,Gm),p=qw.prototype,p.rj=function(){return this.eb.Ec.apply(this.eb,arguments)},p.W=function(e,o,h,d,g,_,$){return this.a=[],qw.j.W.apply(this,arguments)},p.$j=1,p.Ek=function(e,o,h,d,g,_){var $=this.$j=d.Xa();g*=$,_*=$;var j=h.yb();o=j.w*$,j=j.h*$;var _t=h.kd();this.oc?(g-=_t.x*$,_-=_t.y*$):(g=Ad(g-_t.x*$),_=Ad(_-_t.y*$)),d.Oc(h.Qc(),g,_,o,j),e.detail?e.detail.set(g,_,g+o,_+j):e.detail=new yk(g,_,g+o,_+j),this.a.push(e)},p.Ea=function(e,o,h){for(var d=this.a,g=d.length,_,$,j,_t=hf,_e=this.$j;g--&&(_=d[g],$=_.detail,!($.vf(e,o)&&(_=_.ik,(!(j=_.xb().c)||j.Of((e-$.left)/_e,(o-$.top)/_e,0))&&0>_t.indexOf(_)&&(_t===hf&&(_t=[]),_t.push(_),h)))););return _t},p.Rd=function(){return"2d"},p.o=function(){this.a=[],qw.j.o.call(this)},qw.prototype.disposeInternal=qw.prototype.o;function Z(e,o,h,d){Z.j.constructor.call(this,e,o,h,d),this.L=new J(0,0),(h=d.renderBaseBackground)&&(this.Xn=h.lower,this.Hn=h.higher),this.yn=!!d.enableSubpixelRendering,this.fd=rw,this.Af=0,this.Ed=this.ve=!1,this.g=new om,this.a=d=new wm,this.dd=A(this.dd,this),d.addEventListener(d.A.Cg,this.dd),this.Da=A(this.Da,this),d=e.element,this.aa=e=d.ownerDocument.createElement("div"),e.style.position="absolute",e.style.width=e.style.height="100%",e.style.zIndex=0,d.insertBefore(e,d.firstChild),this.sj=new Tm(this.aa,this.oa),this.m=[],sw(this),this.Jh=A(Z.prototype.Jh,this),this.C=tw,this.ng(),this.zoom=uw(this,this.J.pb()+this.fb),this.Eb(),vw(this,o.jb().position,this.zoom),this.$a(),this.T()}u(Z,Jl),t("H.map.render.p2d.RenderEngine",Z),Z.prototype.type=Tl.P2D;var tw=2;Z.prototype.getState=function(){return this.C},Z.prototype.getState=Z.prototype.getState;function ww(e,o,h){return o=h-o,Dd(o)<e.b.w/2?o:o-e.b.w*h/Dd(h)}Z.prototype.Kg=function(e){var o=this,h=e.b,d=e.newValue,g=e.modifiers;e=d.position;var _=d.bounds,$,j=this.zoom,_t=this.s,_e=0;if(g&ej.POSITION&&($=o.b.ib(e)),g&ej.BOUNDS)d=xw(this,_.K(),g&ej.ZOOM?d.zoom:B,g&ej.POSITION?e:B),this.J.Wb(d,h);else{g&ej.POSITION||($=o.b.ib(d.position));var _r=$.x,_n=$.y;yw(this),this.L.set(0,0),d=zw(this,d);var _i=d.zoom,_o=d.position;if(h){var _a=_i-j,_u={x:_t.x,y:_t.y};h=this.b.Zd(_u).x;var _f=this.b.projection.Pc(e);(_f.x!==this.s.x||_f.y!==this.s.y||_i!==this.zoom)&&(_r=ww(this,h,_r),Aw(this,function(_h){var _d=_h-_e;if(_i!==j){$=o.b.Zd(_f);var ty=o.b.Zd(_u);_r=ww(o,ty.x,$.x),_n=$.y-ty.y}_e=_h,Bw(o,_r*_d,_n*_d),j+=_a*_d,Cw(o,j),o.$a(),o.ha()},this.qa,function(){vw(o,_o,_i),Cw(o,_i),o.$a(_o),o.ha()},this.xa))}else Dw(this),vw(this,_o,_i),Cw(this,_i),this.$a(_o);this.ha()}},Z.prototype.qa=300,Z.prototype.rg=function(e){var o=Fc(e);if(!o||o&&0>e)throw new D(this.rg,1,"positive number required");this.qa=e},Z.prototype.setAnimationDuration=Z.prototype.rg,Z.prototype.$g=function(){return this.qa},Z.prototype.getAnimationDuration=Z.prototype.$g,Z.prototype.xa=em,Z.prototype.sg=function(e){if(!Da(e))throw new D(this.sg,1,"function required");this.xa=e},Z.prototype.setAnimationEase=Z.prototype.sg,Z.prototype.ah=function(){return this.xa},Z.prototype.getAnimationEase=Z.prototype.ah,Z.prototype.ng=function(){this.xa=em,this.qa=300},Z.prototype.resetAnimationDefaults=Z.prototype.ng,Z.prototype.Xh=function(e,o,h){var d;this.Nj=Lk(),(d=this.R.ja.splice(e,1)[0])&&d.F&&d.F(),(d=this.u.ja.splice(e,1)[0])&&d.F&&d.F(),(d=this.ta.ja.splice(e,1)[0])&&d.F&&d.F(),(d=this.ea.ja.splice(e,1)[0])&&d.F&&d.F(),this.ab=this.c.La(),e===0&&(Ol(this,o,!1),this.Eb()),this.m=Um(this.sj,Ew(this),Fw(this)),this.ce(),h||this.ha()};function sw(e){var o=e.c.La(),h=0,d=o.length;for([e.R={},e.u={},e.ta={},e.ea={}].forEach(function(g){g.Nc=[],g.ja=[]}),e.ab=e.c.La();h<d;h++)e.Pe(h,o[h]);e.Eb()}Z.prototype.Yh=function(){this.Eb(),this.ha()},Z.prototype.th=function(e,o,h){var d,g,_,$;if(o){var j={oc:this.yn,fb:this.fb};o.W?C(o,Em)?g=new Dm(o):C(o,Qm)&&($=new Dm(o)):(o.requestOverlays&&(d=new ow(o,j)),o.requestTiles&&(g=new mw(o,j)),o.requestMarkers&&(_=new qw(o,j)),o.requestDomMarkers&&($=new Jm(o,j)))}h=h||0,this.R.ja.splice(e,h,d),this.u.ja.splice(e,h,g),this.ta.ja.splice(e,h,_),this.ea.ja.splice(e,h,$),this.ab=this.c.La(),this.m=Um(this.sj,Ew(this),Fw(this))};function Fw(e){var o=[];return o=o.concat(e.u.ja),o=o.concat(e.R.ja),o=o.concat(e.ta.ja),o=o.concat(e.ea.ja),o=o.filter(vc)}function zw(e,o){var h=Pl(e,Pl(e,o.zoom)+e.fb);return e=Ql(e,o),e.zoom=h,e}function vw(e,o,h){var d=e.b;d.Oa(h),e.s=d.projection.Pc(o),d.x=d.w*e.s.x,d.y=d.h*e.s.y}Z.prototype.Pa=function(e,o){var h=this.f.center,d=this.oa;return this.b.Ra((e-h.x)*d,(o-h.y)*d)},Z.prototype.screenToGeo=Z.prototype.Pa,Z.prototype.qg=function(e,o){return e=this.Pa(e,o),o=this.J.jb(),o.position=e,o},Z.prototype.Da=function(e){var o=this.oa,h=this.f.center,d=h.x*o;h=h.y*o,e=this.b.ib(e);var g=this.b.w;return new J(Ad((e.x-Ad(e.x/g)*g+d)/o),Ad((e.y+h)/o))},Z.prototype.geoToScreen=Z.prototype.Da,Z.prototype.K=function(e,o){var h=this.wa[e||4];e=this.b;var d=h.left-o,g=e.Ra(d,h.top-o),_=h.right+o;return o=e.Ra(_,h.bottom+o),_-d>=e.w&&(g.lng=-(o.lng=180)),sg(g,o)},Z.prototype.Ea=function(e,o,h,d){var g=[],_=this.oa,$;for(e*=_,o*=_,_=[this.R,this.u,this.ta,this.ea],$=_.length;$--&&(!h||!g.length);){for(var j=g,_t=_[$].ja,_e=e,_r=o,_n=h,_i=_t.length;_i--&&!((g=_t[_i])&&g.Ea&&(j=j.concat(g.Ea(_e,_r,_n)),j.length&&_n)););g=j}d(g)},Z.prototype.getObjectsAt=Z.prototype.Ea,Z.prototype.sb=z;function Ew(e){return e=e.wa[2],{w:e.right-e.left,h:e.bottom-e.top}}Z.prototype.T=function(){var e=this.m.length,o;Z.j.T.call(this);var h=Ew(this);this.L.set(0,0);var d=h.w;for(o=h.h;e--;){h=this.m[e];var g=h.yb();g.w===d&&g.h===o||h.cf(d,o)}this.sb=new Wi(d,o),this.ha()},Z.prototype.getCapabilities=function(){return pw},Z.prototype.getCapabilities=Z.prototype.getCapabilities;function Gw(e){e.i&&e.i.sa()||Lk()-e.Nj<e.fd&&!e.Ad?e.Yn=Jk(e.Jh):(e.Ad&&(e.ce(),Hw(e)),e.C=tw)}p=Z.prototype,p.ce=function(){this.R.Nc.length=0,this.u.Nc.length=0,this.ta.Nc.length=0,this.ea.Nc.length=0},p.Jh=function(){var e;this.D&&this.D.before();var o=this.u.ja,h=this.f.center.clone().scale(this.oa).round(),d=this.K(1,0),g=this.K(1,Iw),_=this.zoom,$=_-this.fb,j=this.b,_t=this.Xn,_e=this.Hn,_r=o[0];o=this.L;var _n=this.m.length,_i=this.ab;for(e=_i.length;_n--;){var _o=this.m[_n];C(_o,Bm)&&_o.clear()}if(_r){if(_t)for(;_t;)_n=_-_t,_r.W(d,h,j,_n,!0,o),--_t;if(_e&&this.Ed)for(_o=1;_o<=_e&&(_n=_+_o,j.Oa(_n),_t=this.K(2,0),j.Oa(_),!_r.W(_t,h,j,_n,!0,o));_o++);}for(this.fd=rw;e--;)j=_i[e],C(j,qj)&&j.ca()&&j.ca().Ue(g,$);d=this.Zj(d,h,_,!1,o,Jw,this.u,this.R),h=this.Zj(g,h,$,!1,o,Kw,this.ta,this.ea),this.Ad=d&&h,this.i&&this.i.sa()&&this.me(),this.P||(this.P=this.J.jb()),this.P.bounds=this.K(4,0),this.J.$a(this.P),this.P=null,this.sb&&(this.f.$a(this.sb),this.sb=z),_<this.Af?this.Ed=!0:this.ve&&(this.Ed=!1),this.Af=_,this.ve=d,this.D&&this.D.after(),Gw(this)},p.Zj=function(e,o,h,d,g,_,$){var j=Array.prototype.slice.call(arguments,6),_t=j.length,_e=j[0].ja.length,_r=_t*_e,_n=!!_r,_i;for(_i=0;_i<_r;_i++){if(_===Jw)var _o=_i%_t,_a=Math.floor(_i/_t);else _o=Math.floor(_i/_e),_a=_i%_e;var _u=j[_o].ja[_a];_o=j[_o].Nc,_u&&(_u=_u.W(e,o,this.b,h,d,g,this.Da),_u===wk.ACTIVE&&(this.fd=1/0),_u!==wk.DONE||_o[_a]||(Hw(this,this.ab[_a]),_o[_a]=!0),_o[_a]||(_n=!1))}return _n};function Hw(e,o){e.dispatchEvent({type:e.A.Vi,target:o||e})}p.o=function(){var e=this.c.La()[0],o=this.f;Kk(this.Yn),Dw(this,!0),e&&Ol(this,e,!1),Fw(this).forEach(function(h){h.F()}),o.element&&o.element.removeChild(this.aa),this.aa=null,this.C=3,Z.j.o.call(this)},p.ha=function(){this.Nj=Lk(),this.C===tw&&(this.Ad=!1,this.C=1,Gw(this))};function Lw(e,o,h){Bw(e,o*e.oa,h*e.oa),e.L.set(0,0),e.$a(),e.ha()}function Bw(e,o,h){var d=e.b;e=e.s,d.x=Zd(d.x+o,d.w),d.y=zd(0,yd(d.w,d.y+h)),e.x=d.x/d.w,e.y=d.y/d.h}p.xd=function(e,o,h){e=Pl(this,Pl(this,e)+this.fb),Cw(this,e,o,h)},Z.prototype.zoomAt=Z.prototype.xd;function Cw(e,o,h,d){var g=e.oa,_=e.f.center;h===+h&&d===+d?(h=(h-_.x)*g,d=(d-_.y)*g,e.L.set(h,d),Bw(e,h,d),e.b.Oa(o),Bw(e,-h,-d)):(e.L.set(0,0),e.b.Oa(o)),e.zoom=o,e.$a(),e.ha()}function xw(e,o,h,d){var g=e.getCapabilities().lookAt.zoom.max,_=o.bb(),$=d||_;if(o.Rf()||h&&d)h=h===B?g:h;else{var j=new nj(e.b.projection);j.Oa(g);var _t=j.ib(o.Nb()).round(),_e=j.ib(o.Jb()).round();g=j.w,o.Bb()&&(_t.x-=g),d?(_=j.ib($),o=2*zd(_.x-_t.x,_e.x-_.x),_t=2*zd(_.y-_t.y,_e.y-_.y)):(o=_e.x-_t.x,_t=_e.y-_t.y,$=_),h===B&&(_=e.wa[4],h=_.right-_.left,_=_.bottom-_.top,h=-8+yd(Ed(h/o*g)/Od,Ed(_/_t*g)/Od)-e.fb,h=Pl(e,h))}return{zoom:Bd(h),position:$}}function yw(e){Dw(e,!0),e.a.sa()&&e.vb(!0),e.g.sa()&&e.wb(!0),Dw(e,!0)}Z.prototype.lc=function(e,o){yw(this),Mw(this,o),this.g.start(e,!!o)},Z.prototype.startInteraction=Z.prototype.lc;function Mw(e,o){if(o){var h={};h.Te=o.power,h.we=o.ease,h.duration=o.duration,e.l=h}}function uw(e,o){return Pl(e,Pl(e,o-e.fb)+e.fb)}Z.prototype.cc=function(e,o,h,d,g){var _=!1;this.g.sa()&&(o=this.g.store(e,o,h,d,g),this.g.Ac(Nl.COORD)&&(e=this.g.Nd(),0<nm(e)&&(Lw(this,-e.x,-e.y),_=!0)),o&&this.g.Ac(Nl.ZOOM)&&(e=this.g.Bf(),o=this.g.Cf(),o=Ed(Gd(2,this.zoom)*o)/Od,o!==this.zoom&&(o=uw(this,o),Cw(this,o,e.x,e.y),_=!0)),_&&this.ha())},Z.prototype.interaction=Z.prototype.cc,Z.prototype.wb=function(e){var o=this;if(this.g.sa()&&!e){if(this.l){e=this.g.zb();var h=this.g.rc(),d=this.l.duration,g=(this.l.Te||1)*e,_=new Rm(-g/(0<d?d:1),g);!E(h.x)&&!E(h.y)&&0<g&&o.g.Ac(Nl.COORD)&&Aw(this,function($){g=_.De($*d),E(g)||Lw(o,Ad(-h.x*g),Ad(-h.y*g))},d,void 0,this.l.we)}this.l=null,this.g.clear()}},Z.prototype.endInteraction=Z.prototype.wb,Z.prototype.kc=function(e,o,h){yw(this),this.a.start(o,h),Mw(this,e)},Z.prototype.startControl=Z.prototype.kc,Z.prototype.control=function(e,o,h){if(E(+h))throw new D(this.control,2,h);if(E(e))throw new D(this.control,0,e);if(E(o))throw new D(this.control,1,o);this.a.sa()&&this.a.set(e,o,h,0,0,0)},Z.prototype.control=Z.prototype.control,Z.prototype.vb=function(e,o){var h=this,d;if(this.a.sa()){Dw(this,!0);var g=Lk(),_=g-this.Lj;if(1<=_){var $=zm(this.a);Nw(this,$,_)}if(!this.l||e||o)typeof o=="function"&&(e=this.jb(),e.zoom=this.zoom-this.fb,o(e),e.zoom+=this.fb,Ow(this,e));else{o=this.a.zb();var j=this.a.rc(),_t=this.l.duration,_e=(this.l.Te||1)*o,_r=new Rm(-_e/(0<_t?_t:1),_e);!E(j.a)&&!E(j.b)&&0<_e&&Aw(this,function(_n,_i,_o,_a){g&&(_o=_a-g,g=0),_e=_r.De(_n*_t)*_o,E(_e)||((d=j.c*_e)&&Cw(h,uw(h,h.zoom+d),h.a.a,h.a.b),Lw(h,Ad(j.a*_e),Ad(j.b*_e)))},_t,void 0,this.l.we)}this.a.reset()}},Z.prototype.endControl=Z.prototype.vb;function Ow(e,o){var h=e.s,d=e.b.projection.Pc(o.position),g=e.b.Zd(d),_=g.y;g=g.x;var $=o.zoom;h=e.b.Zd(h),o=h.y;var j=h.x;h=e.zoom;var _t=e.a.zb(),_e=e.a.a,_r=e.a.b,_n=0;if(g=ww(e,j,g),g-=j,_-=o,h=$-h,o=Fd(g*g+_*_+h*h),_t!==0&&o!==0){var _i=g/o,_o=_/o,_a=h/o,_u=_t*_t/(2*o);Aw(e,function(_f,_h){var _d;_f!==1?(_f=_t*_h-_u*_h*_h/2,_h=_f-_n,(_d=_a*_h)&&(_d=uw(e,e.zoom+_d),Cw(e,uw(e,_d),_e,_r)),Lw(e,Ad(_i*_h),Ad(_o*_h)),_n=_f):(e.s=d,Cw(e,uw(e,$),_e,_r),e.$a(),e.ha())},2*o/_t)}}Z.prototype.dd=function(e){var o=this,h=e.b;this.L.set(0,0),h.a||h.b||h.c?(this.Lj=Lk(),Aw(this,function(d,g,_,$){o.Lj=$,Nw(o,h,_)},Number.POSITIVE_INFINITY),this.ha()):Dw(this,!0)};function Nw(e,o,h){h=h||0,o.c&&Cw(e,uw(e,e.zoom+o.c*h),e.a.atX,e.a.atY),Lw(e,o.a*h,o.b*h)}function Aw(e,o,h,d,g){e.i&&e.i.sa()&&e.i.stop(!0),e.i=new Fm(e,o,h,d,g),e.i.start()}function Dw(e,o){e.i&&e.i.sa()&&e.i.stop(o)}Z.prototype.Wg=function(){},Z.prototype.enter=Z.prototype.Wg,Z.prototype.Xg=function(e){Ml(this.aa,e)},Z.prototype.exit=Z.prototype.Xg,Z.prototype.capture=function(e,o,h,d){var g=this.aa.ownerDocument.createElement("canvas"),_=g.getContext("2d"),$=this.oa;for(g.width=(h-e)*$,g.height=(d-o)*$,h=0;h<this.m.length;h++)d=this.m[h],C(d,Bm)&&_.drawImage(d.N(),-e*$,-o*$);return Zb(g)};var Kw=0,Jw=1,rw=1e3,Iw=256;function Pw(e){var o;if(e)for(Qw={},o=e.length;o--;)Qw[e[o]]=!0;this.Yk={}}var Rw,Qw={};Pw.prototype.parse=function(e,o,h){var d,g,_,$,j;Rw=!1;try{h=JSON.parse(h)}catch{Rw=!0}if(h&&(d=h.metadata)){var _t={spatials:[]};for(g in d)if((h=!Qw[g]&&(_=Sw[g]))&&(($=d[g])||(Rw=!0,$=void 0),h=$),h)for(h=$.length;h--;){var _e;(_e=$[h])||(Rw=!0,_e=void 0),(j=_e)&&_(o,e,this,g,j,_t)}}else Rw=!0;return Rw?void 0:_t},Pw.prototype.parse=Pw.prototype.parse;var Sw={"street labels":function(e,o,h,d,g,_){var $;if(($=g.vertices)||(Rw=!0,$=void 0),$){var j,_t=$.length,_e;if((_e=0<_t)||(Rw=!0,_e=void 0),_e)for(j=Array(_t/2);_t;){var _r=$[--_t];_e=$[--_t],j[_t/2]=new J(_e,_r)}j=j?{a:[j]}:B,_t=+g["font size"]/e.Xa(),$=h.Yk[_t],$||(Tw.lineWidth=_t,$=h.Yk[_t]=h.Fd.vj(Tw)),Uw(e,o,j,!1,$,g,d,_)}delete g.vertices},"city center labels":function(e,o,h,d,g,_){Uw(e,o,Vw(g,new Ph([])),!0,h.Fd,g,d,_)},labels:function(e,o,h,d,g,_){var $;if(($=g["bounding boxes"])||(Rw=!0,$=void 0),$){for(var j=$.length,_t=new Ph([]),_e;j--;){var _r;(_r=$[j])||(Rw=!0,_r=void 0),(_e=_r)&&Vw(_e,_t)}Uw(e,o,_t,!0,h.Fd,g,d,_)}delete g["bounding boxes"]},buildings:function(e,o,h,d,g,_){var $=g.id,j=o.ig[$],_t,_e,_r,_n=[],_i=[];if((_t=g)||(Rw=!0,_t=void 0),_t&&((_e=_t.vertices)||(Rw=!0,_e=void 0),_e)){var _o;(_o=_t.polygons)||(Rw=!0,_o=void 0),(_r=_o)&&_n.push.apply(_n,Ww(_e,_r)),(_t=_t.outlines)||(Rw=!0,_t=void 0),(_r=_t)&&_i.push.apply(_i,Ww(_e,_r))}_r=_n.length,_n.push.apply(_n,_i),_i=new Ph(_n,Wd,_r),(_n=_n.length)||(Rw=!0,_n=void 0),_n&&(j?(br(j,e,[_i]),_.spatials.push(j)):(j=Uw(e,o,_i,!0,h.Fd,g,d,_,$),o.fa(j)))}};Sw["transit stops"]=Sw.POIs=Sw.labels;var Xw=["box 2","box 1","annotation box","icon box"];function Vw(e,o){for(var h=Xw.length,d,g;h--;)if(d=Xw[h],g=e[d]){var _=g[0],$=g[1],j=g[2];g=g[3],o.a.push([new J(_,$),new J(_+j,$),new J(_+j,$+g),new J(_,$+g)]),delete e[d]}return o}function Ww(e,o){var h=o.length,d,g,_;if(0<h){for(g=Array(h);h--;)if((d=o[h])||(Rw=!0,d=void 0),d){var $=d.length;if(0<$)for(g[h]=_=Array($);$--;){var j=2*d[$];_[$]=new J(e[j],e[j+1])}}}return g||[]}var Yw={};function Uw(e,o,h,d,g,_,$,j,_t){return Yw.style=g,d=new Yq(o,d,_t,Yw),h&&br(d,e,[h]),Zw(_),_.category=$,d.setData(_),j.spatials.push(d),d.ka(o),d}Pw.prototype.Fd=new wh({strokeColor:"transparent",fillColor:"transparent",lineWidth:0});var Tw={};function Zw(e){var o,h=!1;switch(typeof e){case"object":if(e instanceof Array)for(o=e.length;o--;)Zw(e[o])?h=!0:delete e[o];else if(e)for(o in e)Zw(e[o])?h=!0:delete e[o];break;case"number":h=!0;break;default:h=!!e}return h}function $w(e,o,h){h=h||{},o=o||{};var d=h.tileType||"maptile",g=h.scheme||"normal.day";if(S.call(this,{min:0,max:20}),o.pois===!0&&(o.pois="!F"),this.L=o,!(e&&e instanceof ax))throw Error("InvalidArgument: service required");this.m=e,this.i=A(this.i,this),this.m.addEventListener("versionupdate",this.i),this.Yb=e.v().clone().G(d+"/"+e.vc()+"/"+g).I(bx).I(o),this.R=e.f||null,this.T=h.pixelRatio||h.pixelratio||Ue(),this.tileSize=h.tileSize||256,this.tileType=d,this.scheme=g,this.f=new hr(new Pw(h.categoryFilter)),this.f.ka(this),this.u=A(this.u,this),this.f.addEventListener("update",this.u),this.D=!1,S.call(this,{min:0,max:20}),this.J(new Rk(h.tileCacheSize||256,A(this.aa,this)))}u($w,S),t("H.service.metaInfo.TileProvider",$w),$w.prototype.aa=function(e,o){e=o.Ua();for(var h=e.length,d;h--;)d=e[h],delete d.a[o.key],d.release();o.data&&(Cp.push(o.gg(),this.tileSize),o.hg())},$w.prototype.u=function(){this.dispatchEvent("update")},$w.prototype.B=function(e,o,h,d,g){var _=this.Yb.clone(),$=this.R,j=this.tileSize,_t=this.getTileKey(e,o,h);_t=this.nb().get(_t);var _e;if(_t&&!_t.Ud()){d(Cp.pop(this.tileSize),null);var _r={cancel:function(){}}}else{$&&_.Ba($[(h+o+e)%$.length]),_.G(h+"/"+e+"/"+o+"/"+j+"/png8");var _n=Ap.setTimeout(function(){_e=new tf("text/plain",_.toString()),_e.then(function(_i){d(null,_i)},g)},500)}return this.D||(zp($w,"Use HERE Vector Tile API or Raster Tile API v3 instead."),this.D=!0),_r||{cancel:function(){_e?_e.cancel():Ap.clearTimeout(_n)}}},$w.prototype.requestInternal=$w.prototype.B,$w.prototype.ac=function(e,o,h,d,g){var _=this.f,$=d||Cp.pop(this.tileSize);if(d)e=this.nb().get(this.getTileKey(e,o,h)),e.W(d);else if(d=e=new al(this.uc(e,o,h),e,o,h,this.tileSize,this.T,h,_),delete d.l,d.s=g,e.W($))for(g=e.Ua(),$=g.length;$--;)g[$].pg();else Cp.push($,this.tileSize);return e},$w.prototype.createTileInternal=$w.prototype.ac,$w.prototype.F=function(){this.f.F(),this.m.removeEventListener("versionupdate",this.i),S.prototype.F.call(this)},$w.prototype.dispose=$w.prototype.F,$w.prototype.i=function(){var e=this.m;this.Yb=e.v().clone().G(this.tileType+"/"+e.vc()+"/"+this.scheme).I(bx).I(this.L),this.reload(!1)};var bx={metadata:"metaonly",mgen:"2"};function ax(e){ax.j.constructor.call(this,ax,e),e=Pp(this,e),this.f=e.shards,(this.b=e.ignoreTypes?null:e.type)&&this.v().Ba(this.b),this.c=e.version,this.l=new lq,this.c==="newest"&&cx(this)}u(ax,Op),t("H.service.metaInfo.Service",ax),ax.prototype.Aa=function(){return{type:"base",version:"newest",subDomain:"maps.ls",path:"maptile/2.1",shards:["1","2","3","4"]}},ax.CONFIG_KEY="metaInfo";function dx(e,o){for(var h={},d=e[o+"s"][o],g=d.length;g--;)h[d[g].id]=d[g];e[o+"s"]=h}ax.prototype.Hj=function(){return this.b},ax.prototype.vc=function(){return this.c},ax.prototype.getVersion=ax.prototype.vc,ax.prototype.ba=function(){return this.l},ax.prototype.getCopyrights=ax.prototype.ba;function cx(e){var o=e.v().clone().G("info").I({output:"json"});e.f&&o.Ba(e.f[0]),e.B(o,function(h){h=h.response;var d;if(dx(h,"map"),dx(h,"scheme"),dx(h,"tiletype"),dx(h,"format"),dx(h,"resolution"),dx(h,"language"),e.c==="newest"&&e.b!=="traffic")for(d in h.maps)h.maps[d].hash&&h.maps[d].newest&&(e.c=h.maps[d].hash,e.dispatchEvent("versionupdate"));e.s=h,e.dispatchEvent("infoupdate")},function(h){throw h})}ax.prototype.Fe=function(){return this.s},ax.prototype.getInfo=ax.prototype.Fe,ax.prototype.ue=function(e,o,h,d,g,_){return new $w(this,d,{tileSize:e,pixelRatio:o,categoryFilter:h,tileType:g,scheme:_})},ax.prototype.createTileProvider=ax.prototype.ue,ax.prototype.nc=function(e,o,h,d,g,_){return new sl(this.ue(e,o,h,d,g,_))},ax.prototype.createTileLayer=ax.prototype.nc,X.prototype.Aj=function(e){return this.Ma(ax,e)},X.prototype.getMetaInfoService=X.prototype.Aj,function(){var e=X.prototype.createDefaultLayers;X.prototype.createDefaultLayers=function(o,h,d,g,_,$){var j=e.call(this,o,h,d,g,_,$),_t={},_e=this.Aj();typeof o=="object"&&($=o,o=$.tileSize,h=$.ppi,d=$.lg,g=$.lg2,_=$.style,$=$.pois),o=o||256;var _r=h===320?2:1;if(0>[72,250,320,500].indexOf(+h)){if(h!==B)throw new D(this.wf,1,h)}else _t.ppi=+h;return d&&(_t.lg=d),g&&(_t.lg2=g),_&&(_t.style=_),$&&(_t.pois=$),j.raster.normal.metaInfo=_e.nc(o,_r,["buildings"],_t),j}}(),H.__bootstrap__=`var l,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ca(a,b){if(b){var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}var ea;
if("function"==typeof Object.setPrototypeOf)ea=Object.setPrototypeOf;else{var fa;a:{var ha={lb:!0},ja={};try{ja.__proto__=ha;fa=ja.lb;break a}catch(a){}fa=!1}ea=fa?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ka=ea;ca("Object.setPrototypeOf",function(a){return a||ka});var p=this||self;
function la(a,b,c){a=a.split(".");c=c||p;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b}function ma(){}
function na(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function r(a){return"function"==na(a)}function oa(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var pa="closure_uid_"+(1E9*Math.random()>>>0),ra=0;function sa(a,b,c){return a.call.apply(a.bind,arguments)}
function ta(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function ua(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ua=sa:ua=ta;return ua.apply(null,arguments)}
function va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function t(a,b){la(a,b,void 0)}function wa(a,b){function c(){}c.prototype=b.prototype;a.U=b.prototype;a.prototype=new c;a.prototype.constructor=a};function v(){}t("H.util.ICache",v);v.prototype.add=function(){};v.prototype.add=v.prototype.add;v.prototype.get=function(){};v.prototype.get=v.prototype.get;v.prototype.sa=function(){};v.prototype.drop=v.prototype.sa;v.prototype.forEach=function(){};v.prototype.forEach=v.prototype.forEach;v.prototype.S=function(){};v.prototype.removeAll=v.prototype.S;v.prototype.aa=function(){};v.prototype.registerOnDrop=v.prototype.aa;v.prototype.qa=function(){};v.prototype.deRegisterOnDrop=v.prototype.qa;function xa(){var a=ya,b;for(b in a)return!1;return!0}function za(a){var b={},c;for(c in a)b[c]=a[c];return b}var Aa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ba(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Aa.length;f++)c=Aa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Ca=this;function Da(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Da);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}wa(Da,Error);Da.prototype.name="CustomError";var Ea=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};var Fa=ua,Ga=String,Ha=Ca.Object.freeze||function(a){return a},x=[].pop(),Ia=/x/.exec("");function Ja(a){return Ga(a).split(","!==x?",":" ")}var Ma="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Na(a,b,c,d){if(!(b=a instanceof b)&&c)throw new y(c,d,void 0!==x?void 0:a);return b}function Oa(a,b,c,d){var e;if(!(e="Array"===Pa(a))&&b)throw new y(b,c,d!==x?d:a);return e}
t("H.lang.isArray",function(a,b,c,d){return Oa(a,b,c,d)});function Qa(a){return"string"===typeof a}t("H.lang.isString",Qa);var Ra=isNaN;function Sa(a){return a===+a}t("H.lang.isNumber",Sa);t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(a){return"number"===typeof a&&0===a%1});function Pa(a){var b=Object[Ma[0]][Ma[6]].call(a).match(/^\\[object (\\w+)\\]$/);return b?b[1]:typeof a}var Ta=[];0>Ta.indexOf(Ta)&&Ta.push(Ta);
function Ua(a,b,c,d){var e="",f=2>arguments.length,g;f&&(b={H:Ca.H},c="",d=Ta.slice());Va(b,!0,function(h,k){try{if(g=h[k],k=Wa(h,g),!(oa(g)&&g.window===g&&g.self===g||oa(g)&&0<g.nodeType&&r(g.cloneNode))&&oa(g)){if(g===a)return e=c+"."+k,!0;if(0>d.indexOf(g)&&(d.push(g),e=Ua(a,g,c+"."+k,d)))return!0}}catch(m){}});f&&(e=e?e.substr(1).replace("."+Ma[0]+".","#"):"~"+(r(a)?Xa(a)+"()":Pa(a)));return e}
function Wa(a,b){var c=[];Va(a,!1,function(d,e){d[e]===b&&c.push(e)});return c.sort(Ya)[0]}function Ya(a,b){return b.length-a.length}var Za=Object[Ma[0]][Ma[2]];function Va(a,b,c){var d;if(a){for(e in a)if((!b||Za.call(a,e))&&c(a,e,!0))return;for(d=Ma.length;d--;){var e=Ma[d];if((!b||Za.call(a,e))&&c(a,e,!1))break}}}function Xa(a){return(a=/^\\s*function ([^\\( ]+)/.exec(a))?a[1]:"anonymous"}function $a(a,b,c){c[b]="#"+b};function A(a,b,c){this.g=[];b&&this.aa(b);if(c&&!r(c))throw new y(A,2,c);this.b=0;this.filter=c;this.a={};this.f=this.c=null;this.Ha(a)}t("H.util.Cache",A);A.prototype.add=function(a,b,c){var d,e;c=+c;if(!Sa(c)||0>c)throw new y(this.add,2,c);a=String(a);if(e=this.filter?this.filter(a,b,c):!0)(d=this.a[a])?(d.data!==b&&ab(this,d),this.b+=c-d.size,d.size=c,d.data=b,eb(this,d)):this.a[a]=fb(this,{id:a,data:b,size:c,m:null,C:null},this.c),gb(this);return e};A.prototype.add=A.prototype.add;
A.prototype.aa=function(a){if(!r(a))throw new y(this.aa,0,a);this.g.push(a)};A.prototype.registerOnDrop=A.prototype.aa;A.prototype.qa=function(a){this.g=this.g.filter(function(b){return b!==a})};A.prototype.deRegisterOnDrop=A.prototype.qa;A.prototype.get=function(a,b){return(a=b?this.a[a]:eb(this,this.a[a]))&&a.data};A.prototype.get=A.prototype.get;A.prototype.sa=function(a){var b;(b=this.a[a])&&hb(this,b,!0)};A.prototype.drop=A.prototype.sa;
A.prototype.forEach=function(a,b,c){var d;for(d in this.a){var e=this.a[d];(c?c(d,e.data,e.size):1)&&a.call(b,d,e.data,e.size)}};A.prototype.forEach=A.prototype.forEach;A.prototype.S=function(a){var b;for(b in this.a){var c=this.a[b];(a?a(b,c.data,c.size):1)&&hb(this,this.a[b],!0)}};A.prototype.removeAll=A.prototype.S;A.prototype.Ha=function(a){if(!(0<+a))throw new y(A.prototype.Ha,0,a);this.i=+a;gb(this);return this};A.prototype.setMaxSize=A.prototype.Ha;A.prototype.Bb=function(){return this.i};
A.prototype.getMaxSize=A.prototype.Bb;A.prototype.xb=function(){return this.b};A.prototype.getCurrentSize=A.prototype.xb;function eb(a,b){b&&(a.c=fb(a,b,a.c));return b}function gb(a){for(;a.b>a.i&&a.f;)hb(a,a.f,!0)}function fb(a,b,c){if(c!==b){(b.m||b.C)&&hb(a,b,!1);if(b.m=c)b.C=c.C,c.C=b;b.C||(a.c=b);b.m||(a.f=b);a.b+=b.size}return b}function hb(a,b,c){var d=b.C,e=b.m;if(d||e||b==a.c&&b==a.f)d?d.m=e:a.c=e,e?e.C=d:a.f=d,a.b-=b.size,c&&(delete a.a[b.id],ab(a,b));b.m=b.C=null}
function ab(a,b){for(var c=a.g.length;c--;)a.g[c].call(a,b.id,b.data,b.size)};function B(){}t("H.service.extension.dataView.ITable",B);B.prototype.xa=function(){};B.prototype.getMeta=B.prototype.xa;B.prototype.ya=function(){};B.prototype.getRowCount=B.prototype.ya;B.prototype.ga=function(){};B.prototype.getRow=B.prototype.ga;B.prototype.A=function(){};B.prototype.getColumnNames=B.prototype.A;B.prototype.wa=function(){};B.prototype.getColumn=B.prototype.wa;B.prototype.l=function(){};B.prototype.getCell=B.prototype.l;B.prototype.concat=function(){};B.prototype.concat=B.prototype.concat;function ib(){}t("H.service.extension.dataView.IRow",ib);ib.prototype.A=function(){};ib.prototype.getColumnNames=ib.prototype.A;ib.prototype.l=function(){};ib.prototype.getCell=ib.prototype.l;ib.prototype.za=function(){};ib.prototype.getTable=ib.prototype.za;function jb(a,b){this.a=a;this.b=b}t("H.service.extension.dataView.ObjRow",jb);jb.prototype.A=function(){return this.a.A()};jb.prototype.getColumnNames=jb.prototype.A;jb.prototype.l=function(a){return this.a.l(this.b,a)};jb.prototype.getCell=jb.prototype.l;jb.prototype.za=function(){return this.a};jb.prototype.getTable=jb.prototype.za;function kb(){}t("H.service.extension.dataView.IColumn",kb);kb.prototype.l=function(){};kb.prototype.getCell=kb.prototype.l;function lb(a,b){this.b=a;this.a=b}t("H.service.extension.dataView.ObjColumn",lb);lb.prototype.l=function(a){return this.b.l(a,this.a)};lb.prototype.getCell=lb.prototype.l;function y(a,b,c){var d=arguments.length;b=b!==x?+b:b;if(b!==x){var e=(e=/^.*?\\(([^\\)]+)/.exec((""+a).replace(/(\\/\\*([\\s\\S]*?)\\*\\/)|(\\/\\/(.*)$)/gm,"")))?Ja(e[1].replace(/\\s+/g,"")):[];e.forEach($a);e=e[b]||"#"+b}var f=a?Ua(a):"";d=2<d?Ga(c):"";if(e||d)f+=" (Argument "+(e||"")+(d?" "+d:"")+")";d=Error(f);Object.setPrototypeOf(d,y.prototype);return d}wa(y,Error);t("H.lang.InvalidArgumentError",y);y.prototype.name="InvalidArgumentError";function C(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):x);this.D=a;if(b)for(this.M=b,this.pa=a=Object.create(Ia,void 0),d=b.length;d--;)a[b[d]]=!0;c!==x&&(this.Ca=c)}t("H.service.extension.dataView.ObjTable",C);l=C.prototype;l.Ca=x;l.D=x;l.M=x;l.pa=x;l.xa=function(){return this.Ca};C.prototype.getMeta=C.prototype.xa;C.prototype.ya=function(){return this.D?this.D.length:0};C.prototype.getRowCount=C.prototype.ya;C.prototype.ga=function(a){var b=this.D;return b&&b[a]?new jb(this,a):x};
C.prototype.getRow=C.prototype.ga;C.prototype.A=function(){return this.M||mb};C.prototype.getColumnNames=C.prototype.A;C.prototype.wa=function(a){return this.pa[a]?new lb(this,a):x};C.prototype.getColumn=C.prototype.wa;C.prototype.l=function(a,b){var c=this.D;return(a=c&&this.pa[b]&&c[a])&&a[b]};C.prototype.getCell=C.prototype.l;
C.prototype.concat=function(){var a=arguments.length,b,c=this.M,d=""+this.M,e=(this.D||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof C))throw new y(this.concat,b);if(f.D){if(c&&""+f.M!==d)throw new y(this.concat,b,"Incompatible columns!");e=e.concat(f.D)}}return new C(e,this.M,this.Ca)};C.prototype.concat=C.prototype.concat;var D=Math,nb=D.min,ob=D.max,pb=D.round,qb=D.floor,rb=D.ceil,sb=D.abs,tb=D.log,ub=D.sqrt,vb=D.pow,wb=D.exp,xb=D.sin,yb=D.asin,zb=D.cos,Ab=D.tan,Bb=D.atan,Cb=D.atan2,Db=D.LN2,E=D.PI,Eb=E/2,Fb=E/4,Gb=2*E,Hb=3*E,Ib=E/180,Kb=180/E,Lb=1/0;vb(-2,53);function Mb(a,b){var c;return 0>(c=a%b)===0>b?c:c+b}t("H.math.normalize",function(a,b,c){b-=c=c||0;a-=c;return a-qb(a/b)*b+c});function Nb(a,b,c){return a>c?c:a<b?b:a}t("H.math.clamp",Nb);function Ob(a,b,c){return b<c?a>=b&&a<=c:a>=c&&a<=b}
function Pb(a,b,c,d,e,f){return ub(vb((a-e)*(d-f)-(b-f)*(c-e),2)/(vb(c-e,2)+vb(d-f,2)))}var Qb={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};t("H.math.CoverType",Qb);
function Rb(a,b,c){for(var d=c.length,e=d,f,g,h,k,m=c[0],n=0,q=0,u=0;1!=n&&1<e;){g=c[--e];f=c[--e];k=c[e?e-1:(d+(e-1))%d];h=c[e?e-2:(d+(e-2))%d];if(f>=a&&f<=a&&g>=b&&g<=b||h>=a&&h<=a&&k>=b&&k<=b)n=1;else if(!n&&f===a)h===a&&(g<b&&k>b||g>b&&k<b)||(m<=a&&h>a||m>=a&&h<a)&&(g>=b?++q:++u),n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0;else if(!n&&Ob(a,f,h)){if(f<a&&h>a||f>a&&h<a)m=g+(a-f)/(h-f)*(k-g),q+=m>b,u+=m<b;n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0}m=f}!n&&0!==u&&0!==q%2&&(n=3);return n}
function Sb(a,b){return Rb(a.x,a.y,b)!==Qb.NONE}t("H.math.isPointInsidePolygon",Sb);function Tb(a){for(var b=a.length,c=new Float64Array(2*b),d=b&&a[0].x!==x;b--;){var e=a[b],f=b<<1;c[f]=d?e.x:e[0];c[f+1]=d?e.y:e[1]}return c}t("H.math.flatten",Tb);function F(a,b){this.x=+a;this.y=+b}t("H.math.Point",F);F.prototype.set=F;F.prototype.set=F.prototype.set;F.prototype.clone=function(a){a?(a.x=this.x,a.y=this.y):a=new F(this.x,this.y);return a};F.prototype.clone=F.prototype.clone;F.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};F.prototype.add=F.prototype.add;F.prototype.sub=function(a){this.x-=a.x;this.y-=a.y;return this};F.prototype.sub=F.prototype.sub;F.prototype.scale=function(a,b){this.x*=a;this.y*=void 0===b?a:b;return this};
F.prototype.scale=F.prototype.scale;F.prototype.round=function(){this.x=pb(this.x);this.y=pb(this.y);return this};F.prototype.round=F.prototype.round;F.prototype.floor=function(){this.x=qb(this.x);this.y=qb(this.y);return this};F.prototype.floor=F.prototype.floor;F.prototype.ceil=function(){this.x=rb(this.x);this.y=rb(this.y);return this};F.prototype.ceil=F.prototype.ceil;F.prototype.F=function(a){return!(!a||this.x!==a.x||this.y!==a.y)};F.prototype.equals=F.prototype.F;
F.prototype.Cb=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=a;if(c||d){var f=((this.x-a.x)*c+(this.y-a.y)*d)/(c*c+d*d);0>=f?e=a:1<=f?e=b:e=new F(a.x+f*c,a.y+f*d)}return e};F.prototype.getNearest=F.prototype.Cb;F.prototype.ra=function(a){return ub(vb(this.x-a.x,2)+vb(this.y-a.y,2))};F.prototype.distance=F.prototype.ra;F.fromIPoint=function(a){if(!a)throw Error("invalid argument");return a instanceof F?a:new F(a.x,a.y)};function Ub(a,b,c,d,e,f){var g,h,k=a.length,m,n;if(k)for(g=[];k--;){var q=a[k];var u=q.length;var I=0;for(m=1;m<u;m++)if(n=Vb(q[m-1],q[m],c,b,d,e)){var L=n[0];var w=n[1];I&&I.F(L)?h.push(w):g.push(h=n);I=w;f&&(m=u,k=0)}}else g=a;return g}t("H.math.clipping.clipStrips",Ub);
function Vb(a,b,c,d,e,f){var g=a.x;a=-a.y;var h=b.x;b=-b.y;c=-c;f=-f;if(g>h){if(h>e||g<d)return;var k=g;var m=a;g=h;a=b;h=k;b=m;k=1}else if(g>e||h<d)return;if(a>b){if(b>c||a<f)return;var n=1;a=-a;b=-b;m=f;f=-c;c=-m}else if(a>c||b<f)return;if(g<d){if((a+=(d-g)*(b-a)/(h-g))>c)return;g=d}if(a<f){if((g+=(f-a)*(h-g)/(b-a))>e)return;a=f}h>e&&(b=a+(e-g)*(b-a)/(h-g),h=e);b>c&&(h=g+(c-a)*(h-g)/(b-a),b=c);n&&(a=-a,b=-b);return k?[new F(h,-b),new F(g,-a)]:[new F(g,-a),new F(h,-b)]}
function Wb(a,b,c){a=Xb(a,!0);b=Xb(b,!1);var d,e;var f={};var g=d=1;switch(~~(c||0)){case 1:g=d=0;break;case 2:d=0;g=1;break;case 3:d=1,g=0}c=d;var h=g;if(b&&a){b.W=new Yb(b.x,b.y,null,Zb(b));a.W=new Yb(a.x,a.y,null,Zb(a));for(g=b;g.next;g=g.next)if(!g.u)for(d=a;d.next;d=d.next)if(!d.u){var k=$b(g.next);var m=$b(d.next);if(e=ac(g,k,d,m,f)){e=f.mb;var n=f.nb;var q=f.ec;var u=f.fc;e=new Yb(q,u,null,null,null,null,!0,0,0,e);bc(e,g,k);k=new Yb(q,u,null,null,null,null,!0,0,0,n);bc(k,d,m);e.Da=k;k.Da=e}}f=
Sb(b,cc(a));c&&(f=!f);for(g=b;g;g=g.next)g.u&&(g.Aa=f,f=!f);f=Sb(a,cc(b));h&&(f=!f);for(d=a;d.next;d=d.next)d.u&&(d.Aa=f,f=!f);dc(b);for(dc(a);(a=ec(b))!=b;){for(c=null;!a.na;a=a.Da){for(f=a.Aa;;){c=new Yb(a.x,a.y,c);c.artificial=a.u||a.Wa;a.na=1;a=f?a.next:a.o;if(!a)break;if(a.u){a.na=1;break}}if(!a)break}c.Za=I||null;var I=c}return I}}t("H.math.clipping.clipPolygon",Wb);
function Yb(a,b,c,d,e,f,g,h,k,m){this.x=a;this.y=b;this.next=c||null;this.o=d||null;this.Za=e||null;this.Da=f||null;this.u=!!g;this.Aa=!!h;this.na=k||0;this.alpha=m||0;d&&(d.next=this);c&&(c.o=this);this.Wa=!1;this.W=null}function $b(a){for(;a&&a.u;)a=a.next;return a}function Zb(a){if(a)for(;a.next;)a=a.next;return a}function ec(a){var b=a;if(b){do b=b.next;while(b!=a&&(!b.u||b.u&&b.na))}return b}function dc(a){var b=Zb(a);b.o.next=a;a.o=b.o}
function ac(a,b,c,d,e){var f,g=b.x-a.x,h=b.y-a.y;var k=d.x-c.x;var m=d.y-c.y;var n=g*m-h*k;if(!n)return 0;k=((c.x-a.x)*m-(c.y-a.y)*k)/n;n=(h*(c.x-a.x)-g*(c.y-a.y))/n;if(0>k||1<k||0>n||1<n)return 0;0===k?f=a:1===k?f=b:0===n?f=c:1===n&&(f=d);if(f)return f.x+=2.480549651603763E-5,f.y+=7.321997314118067E-5,f.W&&(f.W.x=f.x,f.W.y=f.y),ac(a,b,c,d,e);e.ec=a.x+k*g;e.fc=a.y+k*h;e.mb=k;e.nb=n;return 1}function cc(a){for(var b=[];a;)b.push(a.x,a.y),a=a.next;return b}
function bc(a,b,c){for(b=b.next;b!==c&&b.alpha<=a.alpha;)b=b.next;a.next=b;a.o=b.o;a.next.o=a;a.o.next=a}function Xb(a,b){for(var c,d=null,e=0,f=a.length;e<f;e++){c=new Yb(a[e].x,a[e].y,d);c.Wa=b;if(c.next=d)d.o=c;d=c}return d};function fc(a,b){var c=[];a&&c.push(Ua(a));1<arguments.length&&c.push(""+b);c=Error(c.join(" "));Object.setPrototypeOf(c,fc.prototype);return c}wa(fc,Error);t("H.lang.IllegalOperationError",fc);fc.prototype.name="IllegalOperationError";function gc(){this.constructor=this.constructor;if(!Qa("STATIC_DB"))throw new y(this.constructor,0);this.i=hc();if(!this.i)throw new fc(this.constructor,"This browser does not support IndexedDB");this.a=[];this.c=[];this.g=Fa(this.g,this)}var ic,jc;gc.prototype.get=function(a,b,c){var d;if(!Qa(a)&&!Sa(a))throw new y(this.get,0);if(!r(b))throw new y(this.get,1);kc(this,function(e){d=e.get(a);lc(d,b,c)},c);return{cancel:function(){d&&(d.onsuccess=mc)}}};
gc.prototype.g=function(){var a=this.b.result;a.objectStoreNames.contains("data")||a.createObjectStore("data")};
function nc(a,b,c){if(a.b)a.a?(a.a.push(b),c&&a.c.push(c)):a.f?c&&c(a.f):b(a.b.result);else{a.b=a.i.open("H_STATIC_DB",1);a.b.onupgradeneeded=a.g;var d=a.b.onerror=function(){clearTimeout(a.j);a.f=this.error;a.c.forEach(function(e){e(a.f)});delete a.a;delete a.c};a.j=setTimeout(function(){d.call({error:Error("DbOpenTimeoutError")})},500);a.b.onsuccess=function(){clearTimeout(a.j);a.a?(a.a.forEach(function(e){e(this.result)},this),delete a.a,delete a.c):(delete a.b,delete a.f,a.a=[],a.c=[])};
a.a.push(b);c&&a.c.push(c)}}function kc(a,b,c){nc(a,function(d){d=d.transaction(["data"],"readwrite");b(d.objectStore("data"))},c)}function lc(a,b,c){b&&(a.onsuccess=function(){b(this.result)});c&&(a.onerror=function(){c(this.error)})}t("H.util.IndexedDBStorage.getInstance",function(){ic||(ic=new gc);return ic});function hc(){return Ca.indexedDB||Ca.webkitIndexedDB||Ca.mozIndexedDB||Ca.msIndexedDB}
t("H.util.IndexedDBStorage.isSupported",function(){var a="";if(jc===x)if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)jc=!1;else{try{var b=hc();a="H_TEST_DB";var c=b&&b.open(a,1)}catch(d){}jc=!!c&&null===c.onupgradeneeded;c&&b.deleteDatabase&&b.deleteDatabase(a)}return jc});function J(){0!=oc&&(pc[this[pa]||(this[pa]=++ra)]=this);this.c=this.c;this.a=this.a}var oc=0,pc={};J.prototype.c=!1;J.prototype.s=function(){if(!this.c&&(this.c=!0,this.v(),0!=oc)){var a=this[pa]||(this[pa]=++ra);if(0!=oc&&this.a&&0<this.a.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete pc[a]}};
J.prototype.L=function(a,b){this.c?void 0!==b?a.call(b):a():(this.a||(this.a=[]),this.a.push(void 0!==b?ua(a,b):a))};J.prototype.v=function(){if(this.a)for(;this.a.length;)this.a.shift()()};function K(a,b){this.type=a;this.currentTarget=this.target=b;this.a=!1;this.ab=!0}K.prototype.stopPropagation=function(){this.a=!0};K.prototype.c=function(){this.ab=!1};t("H.util.Event",K);K.prototype.stopPropagation=K.prototype.stopPropagation;K.prototype.stopPropagation=K.prototype.stopPropagation;K.prototype.CAPTURING_PHASE=1;K.prototype.CAPTURING_PHASE=K.prototype.CAPTURING_PHASE;K.prototype.AT_TARGET=2;K.prototype.AT_TARGET=K.prototype.AT_TARGET;K.prototype.BUBBLING_PHASE=3;K.prototype.BUBBLING_PHASE=K.prototype.BUBBLING_PHASE;K.prototype.eventPhase=0;K.prototype.eventPhase=K.prototype.eventPhase;function qc(a,b,c){qc.U.constructor.call(this,a,c);this.data=b}wa(qc,K);t("H.util.DataEvent",qc);function rc(a,b,c){rc.U.constructor.call(this,a,c);this.message=b}wa(rc,K);t("H.util.ErrorEvent",rc);function sc(){}t("H.util.ICancelable",sc);sc.prototype.cancel=function(){};sc.prototype.cancel=sc.prototype.cancel;function tc(a,b){this.c=a;this.f=b;this.b=0;this.a=null}tc.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next;a.next=null}else a=this.c();return a};function uc(a,b){a.f(b);100>a.b&&(a.b++,b.next=a.a,a.a=b)};function vc(){this.b=this.a=null}var xc=new tc(function(){return new wc},function(a){a.reset()});vc.prototype.add=function(a,b){var c=xc.get();c.set(a,b);this.b?this.b.next=c:this.a=c;this.b=c};function yc(){var a=zc,b=null;a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null);return b}function wc(){this.next=this.b=this.a=null}wc.prototype.set=function(a,b){this.a=a;this.b=b;this.next=null};wc.prototype.reset=function(){this.next=this.b=this.a=null};var Ac=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(a)[1]};function Bc(a,b){return a<b?-1:a>b?1:0};var Cc;a:{var Dc=p.navigator;if(Dc){var Ec=Dc.userAgent;if(Ec){Cc=Ec;break a}}Cc=""}function M(a){return-1!=Cc.indexOf(a)};function Hc(a,b){this.b=a===Ic&&b||"";this.a=Jc}var Jc={},Ic={},Kc=new Hc(Ic,"");function Lc(a,b){this.b=a===Mc&&b||"";this.a=Nc}var Nc={},Mc={};function Oc(){this.a="";this.b=Pc}function Qc(){var a=Rc;if(a instanceof Oc&&a.constructor===Oc&&a.b===Pc)return a.a;na(a);return"type_error:SafeHtml"}var Pc={};function Sc(a){var b=new Oc;b.a=a;return b}Sc("<!DOCTYPE html>");var Rc=Sc("");Sc("<br>");function Tc(a){var b=new Lc(Mc,Kc instanceof Hc&&Kc.constructor===Hc&&Kc.a===Jc?Kc.b:"type_error:Const");b instanceof Lc&&b.constructor===Lc&&b.a===Nc?b=b.b:(na(b),b="type_error:TrustedResourceUrl");a.src=b.toString()};function Uc(a){Uc[" "](a);return a}Uc[" "]=ma;var Vc=M("Opera"),Wc=M("Trident")||M("MSIE"),Xc=M("Edge"),Yc=M("Gecko")&&!(-1!=Cc.toLowerCase().indexOf("webkit")&&!M("Edge"))&&!(M("Trident")||M("MSIE"))&&!M("Edge"),Zc=-1!=Cc.toLowerCase().indexOf("webkit")&&!M("Edge");function $c(){var a=p.document;return a?a.documentMode:void 0}var ad;
a:{var bd="",cd=function(){var a=Cc;if(Yc)return/rv:([^\\);]+)(\\)|;)/.exec(a);if(Xc)return/Edge\\/([\\d\\.]+)/.exec(a);if(Wc)return/\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(a);if(Zc)return/WebKit\\/(\\S+)/.exec(a);if(Vc)return/(?:Version)[ \\/]?(\\S+)/.exec(a)}();cd&&(bd=cd?cd[1]:"");if(Wc){var dd=$c();if(null!=dd&&dd>parseFloat(bd)){ad=String(dd);break a}}ad=bd}var ed={},fd;fd=p.document&&Wc?$c():void 0;function gd(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};function hd(a){p.setTimeout(function(){throw a;},0)}var id;
function jd(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!M("Presto")&&(a=function(){var e=gd("IFRAME");e.style.display="none";Tc(e);document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.write(Qc());e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=ua(function(k){if(("*"==h||k.origin==h)&&k.data==g)this.port1.onmessage()},
this);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!M("Trident")&&!M("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.Pa;c.Pa=null;e()}};return function(e){d.next={Pa:e};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in gd("SCRIPT")?function(e){var f=gd("SCRIPT");f.onreadystatechange=function(){f.onreadystatechange=null;
f.parentNode.removeChild(f);f=null;e();e=null};document.documentElement.appendChild(f)}:function(e){p.setTimeout(e,0)}};function kd(a,b){ld||md();nd||(ld(),nd=!0);zc.add(a,b)}var ld;function md(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);ld=function(){a.then(od)}}else ld=function(){var b=od;!r(p.setImmediate)||p.Window&&p.Window.prototype&&!M("Edge")&&p.Window.prototype.setImmediate==p.setImmediate?(id||(id=jd()),id(b)):p.setImmediate(b)}}var nd=!1,zc=new vc;function od(){for(var a;a=yc();){try{a.a.call(a.b)}catch(b){hd(b)}uc(xc,a)}nd=!1};function pd(a){this.a=qd;this.j=void 0;this.f=this.b=this.c=null;this.g=this.i=!1;if(a!=ma)try{var b=this;a.call(void 0,function(c){rd(b,sd,c)},function(c){rd(b,td,c)})}catch(c){rd(this,td,c)}}var qd=0,sd=2,td=3;function ud(){this.next=this.c=this.b=this.f=this.a=null;this.g=!1}ud.prototype.reset=function(){this.c=this.b=this.f=this.a=null;this.g=!1};var vd=new tc(function(){return new ud},function(a){a.reset()});function wd(a,b,c){var d=vd.get();d.f=a;d.b=b;d.c=c;return d}
function xd(a,b,c){yd(a,b,c,null)||kd(va(b,a))}function zd(a){return new pd(function(b,c){var d=a.length,e=[];if(d)for(var f=function(m,n){d--;e[m]=n;0==d&&b(e)},g=function(m){c(m)},h=0,k;h<a.length;h++)k=a[h],xd(k,va(f,h),g);else b(e)})}function Ad(){var a,b,c=new pd(function(d,e){a=d;b=e});return new Bd(c,a,b)}pd.prototype.then=function(a,b,c){return Cd(this,r(a)?a:null,r(b)?b:null,c)};pd.prototype.$goog_Thenable=!0;
pd.prototype.cancel=function(a){if(this.a==qd){var b=new Dd(a);kd(function(){Ed(this,b)},this)}};function Ed(a,b){if(a.a==qd)if(a.c){var c=a.c;if(c.b){for(var d=0,e=null,f=null,g=c.b;g&&(g.g||(d++,g.a==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.a==qd&&1==d?Ed(c,b):(f?(d=f,d.next==c.f&&(c.f=d),d.next=d.next.next):Fd(c),Gd(c,e,td,b)))}a.c=null}else rd(a,td,b)}function Hd(a,b){a.b||a.a!=sd&&a.a!=td||Id(a);a.f?a.f.next=b:a.b=b;a.f=b}
function Cd(a,b,c,d){var e=wd(null,null,null);e.a=new pd(function(f,g){e.f=b?function(h){try{var k=b.call(d,h);f(k)}catch(m){g(m)}}:f;e.b=c?function(h){try{var k=c.call(d,h);void 0===k&&h instanceof Dd?g(h):f(k)}catch(m){g(m)}}:g});e.a.c=a;Hd(a,e);return e.a}pd.prototype.Ea=function(a){this.a=qd;rd(this,sd,a)};pd.prototype.Ga=function(a){this.a=qd;rd(this,td,a)};
function rd(a,b,c){a.a==qd&&(a===c&&(b=td,c=new TypeError("Promise cannot resolve to itself")),a.a=1,yd(c,a.Ea,a.Ga,a)||(a.j=c,a.a=b,a.c=null,Id(a),b!=td||c instanceof Dd||Jd(a,c)))}function yd(a,b,c,d){if(a instanceof pd)return Hd(a,wd(b||ma,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;if(oa(a))try{var f=a.then;if(r(f))return Kd(a,f,b,c,d),!0}catch(g){return c.call(d,g),!0}return!1}
function Kd(a,b,c,d,e){function f(k){h||(h=!0,d.call(e,k))}function g(k){h||(h=!0,c.call(e,k))}var h=!1;try{b.call(a,g,f)}catch(k){f(k)}}function Id(a){a.i||(a.i=!0,kd(a.P,a))}function Fd(a){var b=null;a.b&&(b=a.b,a.b=b.next,b.next=null);a.b||(a.f=null);return b}pd.prototype.P=function(){for(var a;a=Fd(this);)Gd(this,a,this.a,this.j);this.i=!1};
function Gd(a,b,c,d){if(c==td&&b.b&&!b.g)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,Ld(b,c,d);else try{b.g?b.f.call(b.c):Ld(b,c,d)}catch(e){Md.call(null,e)}uc(vd,b)}function Ld(a,b,c){b==sd?a.f.call(a.c,c):a.b&&a.b.call(a.c,c)}function Jd(a,b){a.g=!0;kd(function(){a.g&&Md.call(null,b)})}var Md=hd;function Dd(a){Da.call(this,a)}wa(Dd,Da);Dd.prototype.name="cancel";function Bd(a,b,c){this.a=a;this.b=b;this.reject=c};function Nd(a,b,c){this.type=a;this.data=b;this.a=Ad();this.Xa=Fa(this.Xa,this);this.reject=Fa(this.reject,this);this.priority=Od;c!==x&&(this.priority=c);this.b().add(this)}var Od=1,Pd={hc:0,ic:Od,gc:2};l=Nd.prototype;l.then=function(a,b,c){return this.a.a.then(a,b,c)};l.Xa=function(a){this.Z=3;this.a.b(a)};l.reject=function(a){this.Z=5;this.a.reject(a)};l.Z=0;
l.cancel=function(){if(3>this.Z){this.c();var a=this.b(),b=this.priority,c=a.a[b].indexOf(this);-1<c?a.a[b].splice(c,1):this.Ma&&a.ca.qb(this.Ma);this.Z=4}};Nd.prototype.cancel=Nd.prototype.cancel;function Qd(a){var b;this.a={};for(b in Pd)this.a[Pd[b]]=[];this.ca=a;this.ca.addEventListener("allocatable",Fa(this.b,this))}t("H.util.JobManager",Qd);var Rd=Object.keys(Pd).map(function(a){return Pd[a]}).sort().reverse();Qd.prototype.add=function(a){Na(a,Nd,this.add,0);this.a[a.priority].push(a);this.b()};Qd.prototype.contains=function(a){return-1<this.a[a.priority].indexOf(a)};
Qd.prototype.b=function(){Rd.forEach(function(a){this.a[a]=this.a[a].filter(function(b){var c;if((c=this.ca.jc(b))!==Ia){var d=Fa(this.ca.qb,this.ca,c,b);b.Ma=c;b.then(d,d);b.Z=b.kc(c)?1:5}else return!0},this)},this)};function Sd(a,b,c){var d=[],e=arguments.length;a&&d.push(Ua(a));1<e&&(e=2<e&&Oa(c,void 0,void 0,void 0)?" out of ["+c[0]+"..."+c[1]+"]":"",d.push("("+b+e+")"));d=Error(d.join(" "));Object.setPrototypeOf(d,Sd.prototype);return d}wa(Sd,Error);t("H.lang.OutOfRangeError",Sd);Sd.prototype.name="OutOfRangeError";var Td="closure_listenable_"+(1E6*Math.random()|0),Ud=0;function Vd(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.ha=e;this.key=++Ud;this.T=this.da=!1}function Wd(a){a.T=!0;a.listener=null;a.proxy=null;a.src=null;a.ha=null};function Xd(a){this.src=a;this.a={};this.b=0}Xd.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var g=Yd(a,b,d,e);-1<g?(b=a[g],c||(b.da=!1)):(b=new Vd(b,this.src,f,!!d,e),b.da=c,a.push(b));return b};function Zd(a,b){var c=b.type;if(c in a.a){var d=a.a[c],e=Ea(d,b),f;(f=0<=e)&&Array.prototype.splice.call(d,e,1);f&&(Wd(b),0==a.a[c].length&&(delete a.a[c],a.b--))}}
Xd.prototype.S=function(a){a=a&&a.toString();var b=0,c;for(c in this.a)if(!a||c==a){for(var d=this.a[c],e=0;e<d.length;e++)++b,Wd(d[e]);delete this.a[c];this.b--}return b};function Yd(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.T&&f.listener==b&&f.capture==!!c&&f.ha==d)return e}return-1};var $d;($d=!Wc)||($d=9<=Number(fd));var ae=$d,be;
if(be=Wc){var ce;if(Object.prototype.hasOwnProperty.call(ed,"9"))ce=ed["9"];else{for(var de=0,ee=Ac(String(ad)).split("."),fe=Ac("9").split("."),ge=Math.max(ee.length,fe.length),he=0;0==de&&he<ge;he++){var ie=ee[he]||"",je=fe[he]||"";do{var ke=/(\\d*)(\\D*)(.*)/.exec(ie)||["","","",""],le=/(\\d*)(\\D*)(.*)/.exec(je)||["","","",""];if(0==ke[0].length&&0==le[0].length)break;de=Bc(0==ke[1].length?0:parseInt(ke[1],10),0==le[1].length?0:parseInt(le[1],10))||Bc(0==ke[2].length,0==le[2].length)||Bc(ke[2],le[2]);
ie=ke[3];je=le[3]}while(0==de)}ce=ed["9"]=0<=de}be=!ce}var me=be,ne=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{p.addEventListener("test",ma,b),p.removeEventListener("test",ma,b)}catch(c){}return a}();function oe(a,b){K.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.b=null;if(a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;if(b=a.relatedTarget){if(Yc){a:{try{Uc(b.nodeName);var e=!0;break a}catch(f){}e=
!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=
a.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:pe[a.pointerType]||"";this.b=a;a.defaultPrevented&&this.c()}}wa(oe,K);var pe={2:"touch",3:"pen",4:"mouse"};oe.prototype.stopPropagation=function(){oe.U.stopPropagation.call(this);this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0};
oe.prototype.c=function(){oe.U.c.call(this);var a=this.b;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,me)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var qe="closure_lm_"+(1E6*Math.random()|0),re={},se=0;function te(a,b,c,d,e){if(d&&d.once)ue(a,b,c,d,e);else if("array"==na(b))for(var f=0;f<b.length;f++)te(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!1,oa(d)?!!d.capture:!!d,e):we(a,b,c,!1,d,e)}
function we(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=oa(e)?!!e.capture:!!e,h=xe(a);h||(a[qe]=h=new Xd(a));c=h.add(b,c,d,g,f);if(!c.proxy){d=ye();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)ne||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(ze(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");se++}}
function ye(){var a=Ae,b=ae?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function ue(a,b,c,d,e){if("array"==na(b))for(var f=0;f<b.length;f++)ue(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!0,oa(d)?!!d.capture:!!d,e):we(a,b,c,!0,d,e)}
function Be(a,b,c,d,e){if("array"==na(b))for(var f=0;f<b.length;f++)Be(a,b[f],c,d,e);else(d=oa(d)?!!d.capture:!!d,c=ve(c),a&&a[Td])?(a=a.b,b=String(b).toString(),b in a.a&&(f=a.a[b],c=Yd(f,c,d,e),-1<c&&(Wd(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete a.a[b],a.b--)))):a&&(a=xe(a))&&(b=a.a[b.toString()],a=-1,b&&(a=Yd(b,c,d,e)),(c=-1<a?b[a]:null)&&Ce(c))}
function Ce(a){if("number"!==typeof a&&a&&!a.T){var b=a.src;if(b&&b[Td])Zd(b.b,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(ze(c),d):b.addListener&&b.removeListener&&b.removeListener(d);se--;(c=xe(b))?(Zd(c,a),0==c.b&&(c.src=null,b[qe]=null)):Wd(a)}}}function ze(a){return a in re?re[a]:re[a]="on"+a}
function De(a,b,c,d){var e=!0;if(a=xe(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.T&&(f=Ee(f,d),e=e&&!1!==f)}return e}function Ee(a,b){var c=a.listener,d=a.ha||a.src;a.da&&Ce(a);return c.call(d,b)}
function Ae(a,b){if(a.T)return!0;if(!ae){if(!b)a:{b=["window","event"];for(var c=p,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new oe(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.currentTarget;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;!b.a&&0<=e;e--){b.currentTarget=d[e];var f=De(d[e],a,!0,b);c=c&&f}for(e=0;!b.a&&e<d.length;e++)b.currentTarget=
d[e],f=De(d[e],a,!1,b),c=c&&f}return c}return Ee(a,new oe(b,this))}function xe(a){a=a[qe];return a instanceof Xd?a:null}var Fe="__closure_events_fn_"+(1E9*Math.random()>>>0);function ve(a){if(r(a))return a;a[Fe]||(a[Fe]=function(b){return a.handleEvent(b)});return a[Fe]};function N(){J.call(this);this.b=new Xd(this);this.j=this;this.i=null}wa(N,J);N.prototype[Td]=!0;l=N.prototype;l.B=function(){return this.i};l.la=function(a){this.i=a};l.addEventListener=function(a,b,c,d){te(this,a,b,c,d)};l.removeEventListener=function(a,b,c,d){Be(this,a,b,c,d)};
l.dispatchEvent=function(a){var b,c=this.B();if(c)for(b=[];c;c=c.B())b.push(c);c=this.j;var d=a.type||a;if("string"===typeof a)a=new K(a,c);else if(a instanceof K)a.target=a.target||c;else{var e=a;a=new K(d,c);Ba(a,e)}e=!0;if(b)for(var f=b.length-1;!a.a&&0<=f;f--){var g=a.currentTarget=b[f];e=g.N(d,!0,a)&&e}a.a||(g=a.currentTarget=c,e=g.N(d,!0,a)&&e,a.a||(e=g.N(d,!1,a)&&e));if(b)for(f=0;!a.a&&f<b.length;f++)g=a.currentTarget=b[f],e=g.N(d,!1,a)&&e;return e};
l.v=function(){N.U.v.call(this);this.b&&this.b.S(void 0);this.i=null};l.N=function(a,b,c){a=this.b.a[String(a)];if(!a)return!0;a=a.concat();for(var d=!0,e=0;e<a.length;++e){var f=a[e];if(f&&!f.T&&f.capture==b){var g=f.listener,h=f.ha||f.src;f.da&&Zd(this.b,f);d=!1!==g.call(h,c)&&d}}return d&&0!=c.ab};t("H.util.EventTarget",N);N.prototype.la=N.prototype.la;N.prototype.setParentEventTarget=N.prototype.la;N.prototype.B=N.prototype.B;N.prototype.getParentEventTarget=N.prototype.B;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.dispatchEvent=N.prototype.dispatchEvent;
N.prototype.dispatchEvent=N.prototype.dispatchEvent;N.prototype.s=N.prototype.s;N.prototype.dispose=N.prototype.s;N.prototype.L=N.prototype.L;N.prototype.addOnDisposeCallback=N.prototype.L;N.prototype.P=N.prototype.N;
N.prototype.N=function(a,b,c){var d,e,f=!0;var g=c[c.currentTarget===c.target?"AT_TARGET":b?"CAPTURING_PHASE":(d=!0,"BUBBLING_PHASE")];if(!d||"pointerenter"!==(e=c.type)&&"pointerleave"!==e)c.eventPhase=g,f=N.prototype.P.apply(this,arguments),d&&this.B&&null===this.B()&&delete c.eventPhase;return f};N.prototype.Yb=function(a){for(var b,c=this;c&&(b=c.B())&&b!==a;)c=b;b||c.la(a)};N.prototype.setRootParentEventTarget=N.prototype.Yb;function Q(a){a=a||{};var b=a.callback;this.g=a.label;r(b)&&(this.callback=b);this.f=!!a.disabled;Q.U.constructor.call(this)}wa(Q,N);t("H.util.ContextItem",Q);Q.prototype.zb=function(){return this.g};Q.prototype.getLabel=Q.prototype.zb;Q.prototype.Xb=function(a){this.g!==a&&(this.g=a,this.dispatchEvent("update"));return this};Q.prototype.setLabel=Q.prototype.Xb;Q.prototype.Ob=function(){return this.f};Q.prototype.isDisabled=Q.prototype.Ob;
Q.prototype.Wb=function(a){a!==this.f&&(this.f=a,this.dispatchEvent("update"));return this};Q.prototype.setDisabled=Q.prototype.Wb;var Ge=new Q;Q.SEPARATOR=Ge;function Ie(a){if(Ca.document){var b=document.createElement("canvas");b.width=b.height=1;b.getContext("2d",{lc:a})}}t("H.util.getPixelRatio",function(){return window.devicePixelRatio||1});Object.create(Ia,void 0);t("H.util.eval",function(a){return eval(a)});t("H.util.provide",function(a){var b=p.$jscomp;if(b&&("function"!=typeof b.wb?0:b.wb()))throw Error("goog.provide cannot be used within a module.");la(a,void 0)});function Je(){this.m=0}
Je.prototype.next=function(a){if(9007199254740992===this.m)throw new Sd(a,this.m,[0,9007199254740991]);return this.m++};var Ke=new Je;Fa(Ke.next,Ke);function mc(){}var mb=Ha([]);Ha({});Ie(!0);Ie(!1);function Le(a,b,c){var d=Nb(+a,-90,90);if(b&&Ra(d))throw new y(b,c,a);return d}function Me(a,b,c){var d=+a;if(-180>d||180<d)d=Mb(d+180,360)-180;if(b&&Ra(d))throw new y(b,c,a);return d}function Ne(a,b,c){var d;if(a!==x&&Ra(d=+a)&&b)throw new y(b,c,a);return d}t("H.geo.isDBC",function(a,b){return 0>a!==0>b&&180<sb(b-a)});function R(){var a=R;if(!0===(Na(this,a)&&this.constructor===a))throw new TypeError("Illegal constructor "+Ua(a));}t("H.geo.AbstractGeometry",R);R.prototype.getBoundingBox=R.prototype.X;R.prototype.equals=R.prototype.F;R.prototype.oa="";R.prototype.va="";R.prototype.toString=function(){return this.eb([this.oa.toUpperCase()," "]).join("")};R.prototype.toString=R.prototype.toString;R.prototype.$b=function(){return{type:this.va,coordinates:this.cb()}};R.prototype.toGeoJSON=R.prototype.$b;
R.prototype.ta=function(){return{type:this.oa,coordinates:this.ua(),boundingBox:this.X().ta()}};R.prototype.forWorkerMessage=R.prototype.ta;function S(a,b,c){this.lat=Le(a,S,0);this.lng=Me(b,S,1);c!==x&&(this.alt=Ne(c,S,2))}wa(S,R);t("H.geo.Point",S);S.prototype.F=function(a){return this===a||!!a&&this.lat===a.lat&&this.lng===a.lng&&(this.alt||0)===(a.alt||0)};S.prototype.equals=S.prototype.F;S.prototype.ra=function(a){if(this===a||this.lat===a.lat&&this.lng===a.lng)a=0;else{var b=this.lat*Ib;var c=a.lat*Ib;a=1.274200158E7*yb(nb(1,ub(vb(xb((b-c)/2),2)+zb(b)*zb(c)*vb(xb((this.lng*Ib-a.lng*Ib)/2),2))))}return a};
S.prototype.distance=S.prototype.ra;
S.prototype.dc=function(a,b,c){var d;if(c){if(d=b/6371000.79){b=a*Ib;a=Ib*this.lat;var e=xb(a);c=xb(d);var f=zb(d);d=Ib*this.lng;var g=zb(a);a=yb(g*zb(b)*c+e*f);b=Cb(xb(b)*g*c,f-e*xb(a));b=(d+b+E)%(2*E)-E;b*=Kb;e=new S(a*Kb,(b+540)%360-180)}return e||this}a=(a%360+360)%360;if(0===(a+90)%180)return a=this.lng+b/(6371000.79*Gb*zb(this.lat*Ib))*(270===a?-360:360),new S(this.lat,(a+540)%360-180);if(b/=6371000.79)a*=Ib,e=this.lat*Ib,c=this.lng*Ib,d=e+b*zb(a),f=d-e,g=tb(Ab(d/2+Fb)/Ab(e/2+Fb)),g=Ra(f/g)?
zb(e):f/g,a=b*xb(a)/g,sb(d)>Eb&&(d=0<d?E-d:-(E+d)),d=new S(d*Kb,((c+a+Hb+(sb(e+f)>Eb?E:0))%Gb-E)*Kb);return d||this};S.prototype.walk=S.prototype.dc;S.prototype.X=function(){return new V(this.lat,this.lng,this.lat,this.lng)};S.prototype.getBoundingBox=S.prototype.X;function Oe(a,b,c){var d=oa(a)&&!(Ra(a.lat=Le(a.lat))||Ra(a.lng=Me(a.lng))||a.alt!==x&&Ra(a.alt=Ne(a.alt)));if(!d&&b)throw new y(b,c,a);return d}S.validate=Oe;function Pe(a){if(!a)throw new y(Pe,0,a);return new S(a.lat,a.lng,a.alt)}
S.fromIPoint=Pe;l=S.prototype;l.oa="Point";l.eb=function(a){a.push("(",this.lng," ",this.lat,")");return a};l.va="Point";l.cb=function(){return[this.lng,this.lat,this.alt||0]};l.ua=function(){return[this.lat,this.lng,this.alt||0]};function Qe(){}function Re(a){return nb(1,ob(0,.5-tb(Ab(Fb+Eb*a/180))/E/2))}Qe.prototype.ia=function(a,b,c){c?(c.x=b/360+.5,c.y=Re(a)):c=new F(b/360+.5,Re(a));return c};Qe.prototype.latLngToPoint=Qe.prototype.ia;Qe.prototype.tb=function(a,b){return this.ia(a.lat,a.lng,b)};Qe.prototype.geoToPoint=Qe.prototype.tb;function Se(a){return 0>=a?90:1<=a?-90:Kb*(2*Bb(wb(E*(1-2*a)))-Eb)}Qe.prototype.V=function(a,b,c){c?(c.lat=Se(b),c.lng=360*(1===a?1:Mb(a,1))-180):c=new S(Se(b),360*(1===a?1:Mb(a,1))-180);return c};
Qe.prototype.xyToGeo=Qe.prototype.V;Qe.prototype.Tb=function(a,b){return this.V(a.x,a.y,b)};Qe.prototype.pointToGeo=Qe.prototype.Tb;var Te=new Qe;t("H.geo.mercator",Te);t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0);t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22);function W(a,b){this.projection=a||Te;this.b=0;this.a=this.exp=tb(b||256)/Db;Ue(this);this.y=this.x=0}t("H.geo.PixelProjection",W);var Ve=sb(24)+sb(-8);W.prototype.Vb=Te;W.prototype.projection=W.prototype.Vb;W.prototype.x=0;W.prototype.x=W.prototype.x;W.prototype.y=0;W.prototype.y=W.prototype.y;W.prototype.cc=vb(2,Ve);W.prototype.w=W.prototype.cc;W.prototype.Jb=vb(2,Ve);W.prototype.h=W.prototype.Jb;
W.prototype.ba=function(a){if(Ra(a))throw new y(this.ba,0,a);var b=this.x/this.w;var c=this.y/this.h;this.b=a;this.a=this.exp+a;Ue(this);this.x=b*this.w;this.y=c*this.h};W.prototype.rescale=W.prototype.ba;function Ue(a){a.a>Ve&&(a.a=Ve);a.w=vb(2,a.a);a.h=vb(2,a.a)}W.prototype.Ta=function(){return this.b||0};W.prototype.getZoomScale=W.prototype.Ta;W.prototype.sb=function(a,b){a=this.projection.ia(a.lat,a.lng,b);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};W.prototype.geoToPixel=W.prototype.sb;
W.prototype.Fa=function(a,b){return this.projection.V((a.x+this.x)/this.w,(a.y+this.y)/this.h,b)};W.prototype.pixelToGeo=W.prototype.Fa;W.prototype.V=function(a,b,c){return this.projection.V((a+this.x)/this.w,(b+this.y)/this.h,c)};W.prototype.xyToGeo=W.prototype.V;W.prototype.Ba=function(a,b,c){a=this.projection.ia(a,b,c);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};W.prototype.latLngToPixel=W.prototype.Ba;W.prototype.Ub=function(a){return new F(a.x*this.w-this.x,a.y*this.h-this.y)};
W.prototype.pointToPixel=W.prototype.Ub;t("H.util.Disposable",J);J.prototype.L=J.prototype.L;J.prototype.addOnDisposeCallback=J.prototype.L;t("H.util.dispose",function(a){a&&"function"==typeof a.s&&a.s()});J.prototype.s=J.prototype.s;J.prototype.dispose=J.prototype.s;J.prototype.v=J.prototype.v;J.prototype.disposeInternal=J.prototype.v;function We(a,b,c,d){if(!a||!b||!c)throw new y(We,x,"Must specify name, version and revision parameter");this.name=a;this.version=b;this.revision=c;d&&Ba(this,d)}t("H.util.BuildInfo",We);We.prototype.toString=function(){var a,b=[];for(a in this)Qa(this[a])&&b.push(this[a]);return b.join(";")};var Xe={};function Ye(a,b,c,d){if(!a)throw new y(Ye,1,"Must specify a name parameter");return Xe[a]||(Xe[a]=new We(a,b,c,d))}We.get=Ye;function Y(a,b,c,d,e,f){if(a&&b)this.Ka(a),this.ka(b),this.Ia(c),this.Ja(e),this.bb(f),this.ma(d);else throw new y(Y,x,'Parameters "scheme" and "host" must be specified');}t("H.service.Url",Y);
function Ze(a,b){var c=Ca.document,d;var e="";if(c){e=c.createElement("a");if(b){var f=(d=c.getElementsByTagName("base")[0])&&d.href;var g=c.head;var h=d||g.appendChild(c.createElement("base"));h.href=b}e.href=a;e=e.href;b&&(d?d.href=f:g.removeChild(h))}else/[\\w]+:\\/\\//.test(a)&&(e=a);f=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(e);a=f[1];g=f[4];b=f[5];h=f[6];c=f[7];d=f[8];!f[2]&&g&&/@/.test(g)&&(g=g.split("@")[1]);f=Y;h=h&&0<h.length?h.substr(1):
"";e={};var k,m;if(c)for(k=/([?&]?([^=&+]+))(=([^&]+))?/g;m=k.exec(c);)e[decodeURIComponent(m[2])]=m[4]?decodeURIComponent(m[4]):void 0;return new f(a,g,h,e,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):"")}Y.parse=Ze;Y.prototype.clone=function(){var a={},b;for(b in this.a)a[b]=this.a[b];return new Y(this.i,this.g,this.b,a,this.f,this.c)};Y.prototype.clone=Y.prototype.clone;
Y.prototype.Ka=function(a){if(!a||"string"!==typeof a)throw new y(this.Ka,0,'The "scheme" parameter must be a non-empty string.');this.i=a;return this};Y.prototype.setScheme=Y.prototype.Ka;Y.prototype.Gb=function(){return this.i};Y.prototype.getScheme=Y.prototype.Gb;Y.prototype.ka=function(a){if(!a||"string"!==typeof a||"-"===a.charAt(0)||"."===a.charAt(0)||"."===a.charAt(a.length-1))throw new y(this.ka,0,'The "host" parameter is not a valid host name.');this.g=a;return this};
Y.prototype.setHost=Y.prototype.ka;Y.prototype.yb=function(){return this.g};Y.prototype.getHost=Y.prototype.yb;Y.prototype.Ia=function(a){this.b=a||void 0;return this};Y.prototype.setPath=Y.prototype.Ia;Y.prototype.Db=function(){return this.b};Y.prototype.getPath=Y.prototype.Db;Y.prototype.ma=function(a){if(a)if("object"==typeof a)this.a=a;else throw new y(this.ma,0,'Parameter "params" must be an object.');else this.a={};return this};Y.prototype.setQuery=Y.prototype.ma;Y.prototype.Kb=function(){return!$e(this)};
Y.prototype.hasQuery=Y.prototype.Kb;Y.prototype.getQuery=function(){return this.a};Y.prototype.getQuery=Y.prototype.getQuery;Y.prototype.Ja=function(a){if(void 0===a)this.f=a;else{var b=Nb(+a<<0,0,65535);if(b!=a)throw new y(this.Ja,0,'Parameter "port" must be an integer in range [0...65535]');this.f=b}return this};Y.prototype.setPort=Y.prototype.Ja;Y.prototype.Eb=function(){return this.f};Y.prototype.getPort=Y.prototype.Eb;Y.prototype.bb=function(a){this.c=a||void 0;return this};
Y.prototype.setAnchor=Y.prototype.bb;Y.prototype.ub=function(){return this.c};Y.prototype.getAnchor=Y.prototype.ub;Y.prototype.R=function(a){if("object"!==typeof a)throw new y(this.R,0,'Parameter "other" must be an object.');var b=this.a,c;for(c in a)a.hasOwnProperty(c)&&"function"!==typeof a[c]&&(b[c]=a[c]);return this};Y.prototype.mergeQuery=Y.prototype.R;
Y.prototype.Na=function(a){if(!a||"string"!==typeof a)throw new y(this.Na,0,'Parameter "subDomain" must be a non-empty string');"."===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.ka(a+"."+this.g)};Y.prototype.addSubDomain=Y.prototype.Na;Y.prototype.Oa=function(a){if(!a||"string"!==typeof a)throw new y(this.Oa,0,'Parameter "subPath" must be a non-empty string');return this.Ia((this.b?this.b+"/":"")+a)};Y.prototype.addSubPath=Y.prototype.Oa;
Y.prototype.toString=function(){return[this.i+"://",this.g,this.f?":"+this.f:"",this.b||!$e(this)||this.c?"/":"",this.b?encodeURI(this.b):"",af(this),this.c?"#"+encodeURIComponent(this.c):""].join("")};Y.prototype.toString=Y.prototype.toString;function bf(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(b){return"%"+b.charCodeAt(0).toString(16)})}
function af(a){var b=[],c=a.a,d={},e;for(e in c){if(c.hasOwnProperty(e)&&"function"!==typeof c[e]){var f=a.a[e];d.K=bf(e);Na(f,cf)?f.a.forEach(function(g){return function(h){b.push(g.K+"="+bf(h))}}(d)):Na(f,df)?b.push(d.K+"="+f.b.map(function(g){return bf(g)}).join(f.a)):b.push(void 0===f?d.K:d.K+"="+bf(f))}d={K:d.K}}return 0<b.length?"?"+b.join("&"):""}function $e(a){var b,c=0;for(b in a.a)if(a.a.hasOwnProperty(b)&&"function"!==typeof a.a[b]&&(c++,0<c))break;return!c}
function ef(a,b){if(Oa(a,void 0,void 0,void 0))for(var c=0;c<a.length;c++){var d=a[c];if(!Qa(d)&&!Sa(d)){var e="The Array does not contain only strings and numbers";break}}else e="Not an Array";if(e)throw new y(b,0,a);return a}function cf(a){this.a=ef(a,cf)}Y.MultiValueQueryParameter=cf;cf.prototype.Ib=function(){return this.a};cf.prototype.getValues=cf.prototype.Ib;function df(a,b){this.b=ef(a,df);if(!/^[!\\$\\(\\)\\*\\+,;]$/.test(b))throw new y(df,1,'Invalid delimiter "'+b+'"');this.a=b}
Y.DelimitedQuerySubValues=df;var ff={};function gf(a){try{importScripts.apply(self,arguments)}catch(b){this.postError("invalid_script")}}function hf(a){delete ff[a];this.postMessage(a)}function jf(a,b,c){if(r(b))var d=b;else try{d=self.eval("("+b+")"),r(d)||(d=null)}catch(e){}d?(ff[a]=d,c||this.postMessage(a)):this.postError("invalid_processor")}function kf(a){this.b=a&&a[0];this.a=a&&a[1];this.c=a&&a[2]||[]}kf.prototype.postError=function(a){this.postMessage(a,x,0)};
kf.prototype.postMessage=function(a,b,c){self.postMessage({processor:this.b,taskId:this.a,type:c===x?1:c,data:a},b||x)};function lf(a,b,c){if(!Qa(a))throw new y(lf,0,"InvalidArgument");if(!r(b))throw new y(lf,1,"InvalidArgument");var d=mf++;nf[d]={mimeType:c||of,ob:b};(new kf(["3",d,[]])).postMessage(a,[],2)}var nf={},mf=0;
function pf(a,b){var c=a;if(nf[this.a]){var d=nf[this.a];var e=d.ob;delete nf[this.a];if(b)e(null,b);else{if(d.mimeType===qf){a=new Uint8Array(a);b=a.byteLength;d="";c=0;for(var f,g,h,k;c<b;)f=a[c++],192>f||(g=a[c++],224>f?f=(f&31)<<6|g&63:(h=a[c++],240>f?f=(f&15)<<12|(g&63)<<6|h&63:(k=a[c++],f=(f&7)<<18|(g&63)<<12|(h&63)<<6|k&63))),65536>f?d+=String.fromCharCode(f):(f-=65536,d+=String.fromCharCode((f>>10)+55296,(f&1023)+56320));c=d}e(c)}}}var of=0,qf=1;function V(a,b,c,d){rf(this,Le(a,V,0),Me(b,V,1),Le(c,V,2),Me(d,V,3))}wa(V,R);t("H.geo.Rect",V);V.prototype.oa="Polygon";V.prototype.eb=function(a){var b=this.f,c=this.a,d=this.c,e=this.b;a.push("(","(",c," ",b,",",e," ",b,",",e," ",d,",",c," ",d,",",c," ",b,")",")");return a};V.prototype.F=function(a){var b=this===a;!b&&Na(a,V)&&(b=this.f===a.f&&this.a===a.a&&this.c===a.c&&this.b===a.b);return b};V.prototype.equals=V.prototype.F;
V.prototype.clone=function(){return new V(this.f,this.a,this.c,this.b)};V.prototype.clone=V.prototype.clone;function rf(a,b,c,d,e){a.a=c;a.b=e;b<d&&(c=b,b=d,d=c);a.f=b;a.c=d;a.j=a.g=a.i=null;return a}V.prototype.Sa=function(){this.j||(this.j=new S(this.f,this.a));return this.j};V.prototype.getTopLeft=V.prototype.Sa;V.prototype.Ra=function(){this.g||(this.g=new S(this.c,this.b));return this.g};V.prototype.getBottomRight=V.prototype.Ra;V.prototype.Hb=function(){return this.f};V.prototype.getTop=V.prototype.Hb;
V.prototype.vb=function(){return this.c};V.prototype.getBottom=V.prototype.vb;V.prototype.Ab=function(){return this.a};V.prototype.getLeft=V.prototype.Ab;V.prototype.Fb=function(){return this.b};V.prototype.getRight=V.prototype.Fb;V.prototype.G=function(){this.i||(this.i=new S(this.c+(this.f-this.c)/2,sf(this.a,this.I())));return this.i};V.prototype.getCenter=V.prototype.G;V.prototype.I=function(){return tf(this.a,this.b)};V.prototype.getWidth=V.prototype.I;
V.prototype.O=function(){return this.f-this.c};V.prototype.getHeight=V.prototype.O;V.prototype.Nb=function(){return this.a>this.b};V.prototype.isCDB=V.prototype.Nb;V.prototype.Pb=function(){return!this.I()&&!this.O()};V.prototype.isEmpty=V.prototype.Pb;V.prototype.X=function(){return new V(this.f,this.a,this.c,this.b)};V.prototype.getBoundingBox=V.prototype.X;
V.prototype.ea=function(a,b,c){var d=this.G();c||(a=Le(a,this.ea,0),b=Me(b,this.ea,1));b=this.J(a,b,c);a=b.G();return a.lat===d.lat&&a.lng===d.lng&&this.O()===b.O()&&this.I()===b.I()};V.prototype.containsLatLng=V.prototype.ea;V.prototype.fa=function(a,b){b||Oe(a,this.fa,0);return this.ea(a.lat,a.lng,b)};V.prototype.containsPoint=V.prototype.fa;
V.prototype.Qa=function(a,b){var c=this.G();if(!b&&!Na(a,V))throw new y(this.Qa,0,a);b=this.ja(a,b);a=b.G();return a.lat===c.lat&&a.lng===c.lng&&this.O()===b.O()&&this.I()===b.I()};V.prototype.containsRect=V.prototype.Qa;V.prototype.J=function(a,b,c,d){if(!c){if(Ra(a=Le(a)))throw new y(this.J,0,a);if(Ra(b=Me(b)))throw new y(this.J,1,b);}return uf(this.f,this.a,this.c,this.b,a,b,a,b,d)};V.prototype.mergeLatLng=V.prototype.J;
V.prototype.Ya=function(a,b,c){b||Oe(a,this.Ya,0);return this.J(a.lat,a.lng,b,c)};V.prototype.mergePoint=V.prototype.Ya;V.prototype.ja=function(a,b,c){if(!b&&!Na(a,V))throw new y(this.ja,0,a);return uf(this.f,this.a,this.c,this.b,a.f,a.a,a.c,a.b,c)};V.prototype.mergeRect=V.prototype.ja;V.prototype.$=function(a,b,c,d,e,f){e||(a=Le(a,this.$,0),b=Me(b,this.$,1),c=Le(c,this.$,2),d=Me(d,this.$,3));return uf(this.f,this.a,this.c,this.b,a,b,c,d,f)};V.prototype.mergeTopLeftBottomRight=V.prototype.$;
V.prototype.Va=function(a,b){var c=this.a<=this.b,d=a.a<=a.b,e=this.a<a.b,f=a.a<this.b;if(!b&&!Na(a,V))throw new y(this.Va,0,a);return this.c<=a.f&&a.c<=this.f&&(!c&&(!d||e||f)||!d&&(e||f)||e&&f)};V.prototype.intersects=V.prototype.Va;function tf(a,b){a=b-a;return a+(0>a?360:0)}function sf(a,b){a+=b/2;return a-(180<a?360:0)}
function uf(a,b,c,d,e,f,g,h,k){c=nb(c,g);a=ob(a,e);e=tf(b,d);var m=sf(b,e);g=tf(f,h);var n=sf(f,g)-m;n+=0>n-1E-6?360:0;if(180>n-1E-6){m=b;var q=h}else n=360-n,m=f,q=d;n=n+e/2+g/2;360<=n+5E-7?(m=-180,q=180):n-5E-7<e?(m=b,q=d):n-5E-7<g&&(m=f,q=h);return k?rf(k,a,m,c,q):new V(a,m,c,q)}V.merge=uf;function vf(a,b,c){c||(Oe(a,vf,0),Oe(b,vf,1));return new V(a.lat,a.lng,b.lat,b.lng)}V.fromPoints=vf;
function wf(a,b){var c=1,d=a.length,e=null;var f=na(a);if("array"!=f&&("object"!=f||"number"!=typeof a.length))throw new y(wf,0,a);if(0<d)for(f=a[0],e=vf(f,f,b);c<d;c++)f=a[c],e.J(f.lat,f.lng,b,e);return e}V.coverPoints=wf;function xf(a,b){var c=3,d=a.length,e;if(!(b||a&&null!=a.length))throw new y(xf,0,a);if(0<d)for(e=new V(a[0],a[1],a[0],a[1]);c<d;c+=3)e.J(a[c],a[c+1],b,e);return e}V.coverLatLngAlts=xf;
function yf(a,b){var c=1,d=a.length,e;if(b&&(!a||null==a.length))throw new y(yf,0,a);if(0<d)for(e=new V(a[0].f,a[0].a,a[0].c,a[0].b);c<d;c++)e.ja(a[c],b,e);return e}V.coverRects=yf;
V.prototype.$a=function(a,b){var c=this.a,d=this.f,e=this.b,f=this.c,g=this.G().lng;Oe(a,this.$a,0);var h=a.lat-f-(d-f)/2;var k=a.lng-g;k=180<k||-180>k?-(g+a.lng):k;a=c+(0>k?2*k:0);a=-180>a?360+a:a;e+=0<k?2*k:0;e=180<e?e-360:e;d=0<h?d+2*h:d;90<=d&&(d=90);f=0>h?f+2*h:f;-90>=f&&(f=-90);return b?rf(b,d,a,f,e):new V(d,a,f,e)};V.prototype.resizeToCenter=V.prototype.$a;V.prototype.va="Polygon";
V.prototype.cb=function(){return[[this.a,this.f,0],[this.b,this.f,0],[this.b,this.c,0],[this.a,this.c,0],[this.a,this.f,0]]};V.prototype.ta=function(){return this.ua()};V.prototype.ua=function(){return[this.f,this.a,this.c,this.b]};function zf(a,b,c,d){this.key="";this.x=a;this.y=b;this.b=c;this.Y=d;this.a=Ad()}zf.prototype.then=function(a,b,c){return this.a.a.then(a,b,c)};zf.prototype.reject=function(a){this.a.reject(a)};zf.prototype.cancel=function(){this.a.a.cancel()};zf.prototype.cancel=zf.prototype.cancel;function Af(a,b,c,d){var e=!!c,f,g=0,h=0,k=0,m=0,n=0,q,u=-1;var I=Ca.Float32Array;var L,w=[];if(b){b=Ja(b);a=Ja(a);e&&(f=Ja(c));c=b.length;d=d?1E-7:1E-5;for(L=new I(3*c);g<c;){I=b[g];var G=+I;var X=+a[g];e&&(q=+f[g]);Bf.test(I)?0<=u&&(0<g-u&&w.push(u,g+1),u=-1):0>u&&(u=g);g++;m=L[h++]=m+X*d;k=L[h++]=k+G*d;e&&(n=L[h]=n+q);h++}0<=u&&1<c-u&&w.push(u,c)}else L=new I(0);return{path:L,outlineIndices:w}}var Bf=/^-?0\\d/;
function Cf(a,b){for(var c=0,d=a.length/3,e=new Ca.Array(d),f=0;c<d;)e[c++]=b.Ba(a[f],a[++f]),f+=2;return e};function Df(a,b){b=180/(1<<b);var c=a.lat+90;a=(a.lng+180)%360;var d=0;180==c&&d--;d+=Math.floor(c/b);return[d,Math.floor(a/b)]}var Ef=1/Math.pow(10,10);function Ff(a,b){var c=[],d=a.Sa();a=a.Ra();var e;180==a.lng&&(a.lng-=Ef);d=Df(d,b);a=Df(a,b);for(e=d[0];e>=a[0];e--)for(b=d[1];b<=a[1];b++)c.push(e,b);return c};function Gf(a,b){var c=a.tileSize||256;this.b={};this.j=Ze(a.serverUrl);this.g=b;this.fb=a.layerConfigs||[];this.i=a.projected;this.P=c;this.Ea=!1!==a.batchTiles;this.bc=a.horizontalMargin||0;this.gb=a.onlyOutline;this.ib=new W(x,c);this.f=new W(x,c);this.f.ba(22-Math.log(c)/Math.LN2+8)}wa(Gf,J);
Gf.prototype.kb=function(a,b,c){var d=this.P,e=this.bc,f={x:a*d-e,y:b*d};d={x:(a+1)*d-1+e,y:(b+1)*d-1};e=this.ib;e.ba(c);f=e.Fa(f);d=e.Fa(d);return Hf(this,new V(f.lat,f.lng,d.lat,d.lng),this.fb,{x:a,y:b,z:c})};Gf.prototype.jb=function(a,b,c,d,e){return Hf(this,new V(a,b,c,d),e)};
function Hf(a,b,c,d){var e=If(c),f=e.length,g={},h,k=a.b,m=[],n=[];for(c=0;c<f;c++){var q=e[c];var u=q.layerId;var I=q.level;g[u]=q.columns;q=Ff(b,I);var L=q.length-1;for(h=0;h<L;h+=2){var w=[u,q[h+1],q[h],I].join("_");var G=k[w]||a.g.get(w);G||(G=new zf(q[h+1],q[h],I,u),G.key=w,k[w]=G,n.push(G));m.push(G)}}n.length&&(a.Ea?Jf(a,n):Kf(a,n));return zd(m.map(function(X){return X.then(Fa(this.Ga,this,X.Y,Lf(e))).then(Fa(this.hb,this,X,d||Mf)).then(Fa(this.ac,this,g[X.Y]))},a))}var Mf={x:0,y:0,z:0};
Gf.prototype.Ga=function(a,b,c){var d=c.Rows,e=d.length,f,g;if(e&&(f=b[a])){b=new C(c.Rows);var h=[];for(g=0;g<e;g++){var k=d[g];f(b.ga(g),a)&&h.push(k)}a={Rows:h};if(c=c.Meta)a.Meta=c}else a=c;return a};function Kf(a,b){function c(k,m,n){n?(delete a.b[k.key],k.reject(n)):Nf(a,k,m)}var d,e=b.length,f=a.j;for(d=0;d<e;d++){var g=b[d];var h=f.clone().R({tilex:g.x}).R({tiley:g.y}).R({level:g.b}).R({layer:g.Y});new lf(h.toString(),Fa(c,null,g),qf)}}
function Jf(a,b){var c=b.length,d;for(d=0;d<c;d+=15){var e=b.slice(d,d+15);Of(a,e)}}function Of(a,b){var c=a.j.clone(),d=[],e=[],f=[],g=c.getQuery();b.length&&(b.forEach(function(h){d.push(h.x,h.y);e.push(h.b);f.push(h.Y)}),g.tilexy=d.join(","),g.layers=f.join(","),g.levels=e.join(","),c.ma(g),new lf(c.toString(),function(h,k){k?b.forEach(function(m){delete a.b[m.key];m.reject("error")}):Nf(a,b,h)},qf))}
function Nf(a,b,c){var d=b.length,e;if(Oa(b,void 0,void 0,void 0)){var f=c.indexOf("[")+1;for(e=0;e<d;e++){var g=c.indexOf("]},{",f+3)+2;g<f&&(g=c.lastIndexOf("]}"));var h=c.substr(f,g-f);f=g+1;Pf(a,b[e],h)}}else Pf(a,b,c)}function Pf(a,b,c){try{var d=c.length;var e=b.key;delete a.b[e];a.g.add(e,b,2*d);var f=JSON.parse(c);b.a.b(f)}catch(g){b.reject(g.message)}}
function Lf(a){var b={},c,d=a.length;for(c=0;c<d;c++){var e=a[c];if(e.rowFilter){var f=e.layerId;f=f!==x?f:e.layer;b[f]=Fa(e.rowFilter,e.rowFilterContext)}}return b}function Qf(a,b,c,d,e){return e?[new F(a,b),new F(c,b),new F(c,d),new F(a,d),new F(a,b)]:[a,b,c,b,c,d,a,d]}
Gf.prototype.hb=function(a,b,c){var d=this.f.Ta()-b.z,e=this.P<<d,f=50<<d,g=b.x*e;b=b.y*e;var h=g+e;e=b+e;var k=g-f,m=b-f,n=h+f;f=e+f;var q,u,I=c.Rows,L=I.length,w,G=/^ADAS/.test(a.Y),X=this.f,qa=this.gb,O,bb=[],Ka=[],La=[],cb=[];for(a=0;a<L;a++){var z=w=I[a];var T=(O=G)?"HPY":"LAT";var U=O?"HPX":"LON";var da=O?"HPZ":"ZLEVEL";if(z[T]){var P=Af(z[T],z[U],z[da],O);z.geometry=P;delete z[T];delete z[U];delete z[da];if(z.INNER_LAT)for(T=z.INNER_LAT.split(";"),P=z.INNER_LON.split(";"),delete z.INNER_LAT,
delete z.INNER_LON,z.interiors=da=[],U=T.length,z=0;z<U;z++)da.push(Af(T[z],P[z],"",O))}if(this.i){U=w;z=X;P=U.$$projected$$;T=0;if(!P){var Z=U.geometry;O=Cf(Z.path,z);w=[O];U.$$projected$$=P={Sb:w};U=(da=U.interiors)?da.length:0;w.length+=U;T|=+Rf(w,O,Z.outlineIndices);if(U)for(P.Lb=1,q=0;q<U;q++)Z=da[q],O=Cf(Z.path,z),w[1+q]=O,T|=+Rf(w,O,Z.outlineIndices);T&&(P.Qb=1+U)}z=P;O=z.Sb;w=z.Lb;var Fc=z.Qb;P=[];T=U=Lb;var db=da=x;z=O[0];if(1===z.length){var Gc=Gc||(Gc=Qf(g,b,h,e,!1));w=z[0];Rb(w.x,w.y,
Gc)&&P.push(Sf(z,g,b,d))}else{var He=O.length;for(Z=qa?Fc:0;Z<He&&(qa||!Z||P.length);Z++)if(z=O[Z],Z>=Fc){Z===Fc&&(T=P.length);var ia=Ub([z],k,m,n,f,!1);Tf(ia,g,b,d,P)}else{var Jb=Jb||(Jb=Qf(k,m,n,f,!0));if(Z>=w)if(Z===w&&(U=P.length),db)for(q=db.length;q--;){if(ia=Uf(db[q],z),u=ia.length){for(da=da||[];u--;)da.push(q);Tf(ia,g,b,d,P)}}else ia=Uf(Jb,z),Tf(ia,g,b,d,P);else if(ia=Uf(Jb,z),Tf(ia,g,b,d,P),1<ia.length&&w<He)for(db=[],q=ia.length;q--;)db[q]=ia[q]}}P.length&&(bb[a]=P,Ka[a]=U,La[a]=da,cb[a]=
T)}}return{Zb:c,pb:bb,Mb:Ka,rb:La,Rb:cb}};function Rf(a,b,c){for(var d=c.length,e=0,f,g,h=b.length;e<d;)f=c[e++],g=c[e++],a.push(g-f===h?b:b.slice(f,g));return 0<c.length}function Uf(a,b){var c,d=[];if(c=Wb(a,b)){do{a=[];b=c;do a.push(b);while(b=b.next);d.push(a)}while(c=c.Za)}else Sb(b[0],Tb(a))?d.push(b):Sb(a[0],Tb(b))&&d.push(a);return d}function Tf(a,b,c,d,e){for(var f=0,g=a.length;f<g;f++)e.push(Sf(a[f],b,c,d))}
function Sf(a,b,c,d){var e,f=a.length,g=new Int32Array(2*f),h=0;for(e=0;e<f;e++){var k=a[e];g[h++]=k.x-b>>d;g[h++]=k.y-c>>d}return g}
Gf.prototype.ac=function(a,b){var c=b.Zb,d=b.pb,e=b.Mb,f=b.Rb;b=b.rb;for(var g=[],h,k={Rows:g},m,n=a?a.length:0,q=0,u,I=c.Rows,L=I.length,w;q<L;q+=1)if(d[q]||!this.i){h={};u=I[q];if(n)for(m=0;m<n;m++)u.hasOwnProperty(a[m])&&(h[a[m]]=u[a[m]]);else for(w in u)"$$projected$$"!==w&&(h[w]=u[w]);u.geometry&&(h.geometry=u.geometry);m=void 0;var G,X=h,qa=d[q],O=e[q],bb=b[q],Ka=f[q],La=g;if(qa){var cb=qa.length;if(bb)for(G=O;G--;){if(G){var z={};for(m in X)z[m]=X[m]}else z=X;u=[qa[G]];var T=nb(cb,Ka)-O;for(h=
0;h<T;h++)bb[h]===G&&u.push(qa[O+h]);T=u.length;if(!G)for(h=Ka;h<cb;h++)u.push(qa[h]);z.$HProjGeometry={paths:u,interiorsIndex:1,outlinesIndex:T};La.push(z)}else X.$HProjGeometry={paths:qa,interiorsIndex:O,outlinesIndex:Ka},La.push(X)}else La.push(X)}c.Meta&&(k.Meta=c.Meta);return k};Gf.prototype.v=function(){var a,b=this.b;for(a in b)b.hasOwnProperty(a)&&(b[a].reject("disposed"),delete b[a])};Gf.prototype.disposeInternal=Gf.prototype.v;
function If(a){for(var b=[],c,d=a.length,e=0;e<d;e++){c=za(a[e]);if(c.rowFilter&&(c.rowFilter=eval("("+c.rowFilter+")"),!r(c.rowFilter)))throw Error("Invalid row filter for layer "+c.layerId);b.push(c)}return b};t("H.service.extension.worker.processor",function(a,b,c){function d(h){e.postMessage(h)}var e=this,f=ya[a];var g=function(h){e.postError(h.toString())};if(0===b)f||(ya[a]=new Gf(c,Vf)),this.postMessage(void 0);else if(f)switch(b){case 1:try{f.kb.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 2:try{f.jb.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 3:f.s();delete ya[a];xa()&&Vf.S();break;default:e.postError("Unsupported command")}});
var Vf=new A(26214400),ya=Object.create(Ia,void 0);function Wf(a,b,c){var d=a[b];a=a[b+1];this.Ua=[];this.La=0;this.b=b;this.a=[a-c,d-c,a+c,d+c]}Wf.prototype.fa=function(a,b){var c=a[b];a=a[b+1];b=this.a;return b[1]<=c&&c<=b[3]&&b[0]<=a&&a<=b[2]};Wf.prototype.G=function(){return this.b};var Xf=new F(0,0);function Yf(a,b,c,d,e){d[e]=b;d[e+1]=a}var Zf=new W;function $f(a,b,c,d,e){Zf.Ba(a,b,Xf);d[e]=Xf.x;d[e+1]=Xf.y}
t("H.clustering.dynamicgrid.worker",function(a,b,c,d,e){var f=e?Yf:$f,g=0;e=!!self.ArrayBuffer;var h=a.byteLength?new Float64Array(a):a,k=h.length/3;a=[];var m=[],n=[],q=e?new Float64Array(2*k):[];k=0;var u=0;for(Zf.ba(d);g<h.length;){var I=h[g++];var L=h[g++];var w=h[g++];f(w,L,d,q,u);for(w=a.length;w--;)if(L=a[w],L.fa(q,u)){var G=L;break}G||(G=new Wf(q,u,b),a.push(G));w=u/2;G.La+=I||1;G.Ua.push(w);G=null;u+=2}for(w=a.length;w--;)L=a[w],b=L.La>=c,f=L.Ua,d=f.length,b?(m.push(d),m=m.concat(f)):
(k+=d,n=n.concat(f));c=[k].concat(n,m);c=e?(new Uint32Array(c)).buffer:c;this.postMessage(c,[c])});self.addEventListener("message",function(a){a=new kf(a.data);var b=ff[a.b];if(b)try{b.apply(a,a.c)}catch(c){a.postError(c.message)}else a.postError("processor_not_found")});(function(){var a=new kf;var b=function(c,d){jf.apply(a,[c,d,!0])};b("0",gf);b("1",jf);b("2",hf);b("3",pf)})();
`,function(){var f=function(){var target=(typeof self>"u"||!(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope))&&(typeof module<"u"&&module.exports||typeof window<"u"),__worker_src__,__worker_src_map__,__worker_src_origin__;target&&(__worker_src__=f.toString(),__worker_src_map__="",__worker_src_origin__=typeof document<"u"&&document.currentScript instanceof HTMLScriptElement?document.currentScript.src:""),function(){var toString={}.toString,classofRaw=function(e){return toString.call(e).slice(8,-1)},commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function createCommonjsModule(e,o){return e(o={exports:{}},o.exports),o.exports}var O="object",check=function(e){return e&&e.Math==Math&&e},global_1=check(typeof globalThis==O&&globalThis)||check(typeof window==O&&window)||check(typeof self==O&&self)||check(typeof commonjsGlobal==O&&commonjsGlobal)||Function("return this")(),fails=function(e){try{return!!e()}catch{return!0}},descriptors=!fails(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),isObject=function(e){return typeof e=="object"?e!==null:typeof e=="function"},document$1=global_1.document,exist=isObject(document$1)&&isObject(document$1.createElement),documentCreateElement=function(e){return exist?document$1.createElement(e):{}},ie8DomDefine=!descriptors&&!fails(function(){return Object.defineProperty(documentCreateElement("div"),"a",{get:function(){return 7}}).a!=7}),anObject=function(e){if(!isObject(e))throw TypeError(String(e)+" is not an object");return e},toPrimitive=function(e,o){if(!isObject(e))return e;var h,d;if(o&&typeof(h=e.toString)=="function"&&!isObject(d=h.call(e))||typeof(h=e.valueOf)=="function"&&!isObject(d=h.call(e))||!o&&typeof(h=e.toString)=="function"&&!isObject(d=h.call(e)))return d;throw TypeError("Can't convert object to primitive value")},nativeDefineProperty=Object.defineProperty,f=descriptors?nativeDefineProperty:function(e,o,h){if(anObject(e),o=toPrimitive(o,!0),anObject(h),ie8DomDefine)try{return nativeDefineProperty(e,o,h)}catch{}if("get"in h||"set"in h)throw TypeError("Accessors not supported");return"value"in h&&(e[o]=h.value),e},objectDefineProperty={f},createPropertyDescriptor=function(e,o){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:o}},hide=descriptors?function(e,o,h){return objectDefineProperty.f(e,o,createPropertyDescriptor(1,h))}:function(e,o,h){return e[o]=h,e},setGlobal=function(e,o){try{hide(global_1,e,o)}catch{global_1[e]=o}return o},isPure=!1,shared=createCommonjsModule(function(e){var o="__core-js_shared__",h=global_1[o]||setGlobal(o,{});(e.exports=function(d,g){return h[d]||(h[d]=g!==void 0?g:{})})("versions",[]).push({version:"3.1.0",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),id=0,postfix=Math.random(),uid=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++id+postfix).toString(36))},nativeSymbol=!fails(function(){return!String(Symbol())}),store=shared("wks"),Symbol$1=global_1.Symbol,wellKnownSymbol=function(e){return store[e]||(store[e]=nativeSymbol&&Symbol$1[e]||(nativeSymbol?Symbol$1:uid)("Symbol."+e))},TO_STRING_TAG=wellKnownSymbol("toStringTag"),CORRECT_ARGUMENTS=classofRaw(function(){return arguments}())=="Arguments",tryGet=function(e,o){try{return e[o]}catch{}},classof=function(e){var o,h,d;return e===void 0?"Undefined":e===null?"Null":typeof(h=tryGet(o=Object(e),TO_STRING_TAG))=="string"?h:CORRECT_ARGUMENTS?classofRaw(o):(d=classofRaw(o))=="Object"&&typeof o.callee=="function"?"Arguments":d},TO_STRING_TAG$1=wellKnownSymbol("toStringTag"),test={};test[TO_STRING_TAG$1]="z";var objectToString=String(test)!=="[object z]"?function(){return"[object "+classof(this)+"]"}:test.toString,hasOwnProperty={}.hasOwnProperty,has=function(e,o){return hasOwnProperty.call(e,o)},functionToString=shared("native-function-to-string",Function.toString),WeakMap=global_1.WeakMap,nativeWeakMap=typeof WeakMap=="function"&&/native code/.test(functionToString.call(WeakMap)),shared$1=shared("keys"),sharedKey=function(e){return shared$1[e]||(shared$1[e]=uid(e))},hiddenKeys={},WeakMap$1=global_1.WeakMap,set,get,has$1,enforce=function(e){return has$1(e)?get(e):set(e,{})},getterFor=function(e){return function(o){var h;if(!isObject(o)||(h=get(o)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return h}},store$1,wmget,wmhas,wmset,set,get,has$1,STATE;has$1=nativeWeakMap?(store$1=new WeakMap$1,wmget=store$1.get,wmhas=store$1.has,wmset=store$1.set,set=function(e,o){return wmset.call(store$1,e,o),o},get=function(e){return wmget.call(store$1,e)||{}},function(e){return wmhas.call(store$1,e)}):(STATE=sharedKey("state"),hiddenKeys[STATE]=!0,set=function(e,o){return hide(e,STATE,o),o},get=function(e){return has(e,STATE)?e[STATE]:{}},function(e){return has(e,STATE)});var internalState={set,get,has:has$1,enforce,getterFor},redefine=createCommonjsModule(function(e){var o=internalState.get,h=internalState.enforce,d=String(functionToString).split("toString");shared("inspectSource",function(g){return functionToString.call(g)}),(e.exports=function(g,_,$,j){var _t=!!j&&!!j.unsafe,_e=!!j&&!!j.enumerable,_r=!!j&&!!j.noTargetGet;typeof $=="function"&&(typeof _!="string"||has($,"name")||hide($,"name",_),h($).source=d.join(typeof _=="string"?_:"")),g!==global_1?(_t?!_r&&g[_]&&(_e=!0):delete g[_],_e?g[_]=$:hide(g,_,$)):_e?g[_]=$:setGlobal(_,$)})(Function.prototype,"toString",function(){return typeof this=="function"&&o(this).source||functionToString.call(this)})}),ObjectPrototype=Object.prototype;objectToString!==ObjectPrototype.toString&&redefine(ObjectPrototype,"toString",objectToString,{unsafe:!0});var ceil=Math.ceil,floor=Math.floor,toInteger=function(e){return isNaN(e=+e)?0:(0<e?floor:ceil)(e)},requireObjectCoercible=function(e){if(e==null)throw TypeError("Can't call method on "+e);return e},stringAt=function(e,o,h){var d,g,_=String(requireObjectCoercible(e)),$=toInteger(o),j=_.length;return $<0||j<=$?h?"":void 0:(d=_.charCodeAt($))<55296||56319<d||$+1===j||(g=_.charCodeAt($+1))<56320||57343<g?h?_.charAt($):d:h?_.slice($,$+2):g-56320+(d-55296<<10)+65536},nativePropertyIsEnumerable={}.propertyIsEnumerable,nativeGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,NASHORN_BUG=nativeGetOwnPropertyDescriptor&&!nativePropertyIsEnumerable.call({1:2},1),f$1=NASHORN_BUG?function(e){var o=nativeGetOwnPropertyDescriptor(this,e);return!!o&&o.enumerable}:nativePropertyIsEnumerable,objectPropertyIsEnumerable={f:f$1},split="".split,indexedObject=fails(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return classofRaw(e)=="String"?split.call(e,""):Object(e)}:Object,toIndexedObject=function(e){return indexedObject(requireObjectCoercible(e))},nativeGetOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor,f$2=descriptors?nativeGetOwnPropertyDescriptor$1:function(e,o){if(e=toIndexedObject(e),o=toPrimitive(o,!0),ie8DomDefine)try{return nativeGetOwnPropertyDescriptor$1(e,o)}catch{}if(has(e,o))return createPropertyDescriptor(!objectPropertyIsEnumerable.f.call(e,o),e[o])},objectGetOwnPropertyDescriptor={f:f$2},min=Math.min,toLength=function(e){return 0<e?min(toInteger(e),9007199254740991):0},max=Math.max,min$1=Math.min,toAbsoluteIndex=function(e,o){var h=toInteger(e);return h<0?max(h+o,0):min$1(h,o)},arrayIncludes=function(e){return function(o,h,d){var g,_=toIndexedObject(o),$=toLength(_.length),j=toAbsoluteIndex(d,$);if(e&&h!=h){for(;j<$;)if((g=_[j++])!=g)return!0}else for(;j<$;j++)if((e||j in _)&&_[j]===h)return e||j||0;return!e&&-1}},arrayIndexOf=arrayIncludes(!1),objectKeysInternal=function(e,o){var h,d=toIndexedObject(e),g=0,_=[];for(h in d)!has(hiddenKeys,h)&&has(d,h)&&_.push(h);for(;o.length>g;)has(d,h=o[g++])&&(~arrayIndexOf(_,h)||_.push(h));return _},enumBugKeys=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],hiddenKeys$1=enumBugKeys.concat("length","prototype"),f$3=Object.getOwnPropertyNames||function(e){return objectKeysInternal(e,hiddenKeys$1)},objectGetOwnPropertyNames={f:f$3},f$4=Object.getOwnPropertySymbols,objectGetOwnPropertySymbols={f:f$4},Reflect$1=global_1.Reflect,ownKeys=Reflect$1&&Reflect$1.ownKeys||function(e){var o=objectGetOwnPropertyNames.f(anObject(e)),h=objectGetOwnPropertySymbols.f;return h?o.concat(h(e)):o},copyConstructorProperties=function(e,o){for(var h=ownKeys(o),d=objectDefineProperty.f,g=objectGetOwnPropertyDescriptor.f,_=0;_<h.length;_++){var $=h[_];has(e,$)||d(e,$,g(o,$))}},replacement=/#|\.prototype\./,isForced=function(e,o){var h=data[normalize(e)];return h==POLYFILL||h!=NATIVE&&(typeof o=="function"?fails(o):!!o)},normalize=isForced.normalize=function(e){return String(e).replace(replacement,".").toLowerCase()},data=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P",isForced_1=isForced,getOwnPropertyDescriptor=objectGetOwnPropertyDescriptor.f,_export=function(e,o){var h,d,g,_,$=e.target,j=e.global,_t=e.stat,_e=j?global_1:_t?global_1[$]||setGlobal($,{}):(global_1[$]||{}).prototype;if(_e)for(h in o){if(g=o[h],d=e.noTargetGet?(_=getOwnPropertyDescriptor(_e,h))&&_.value:_e[h],!isForced_1(j?h:$+(_t?".":"#")+h,e.forced)&&d!==void 0){if(typeof g==typeof d)continue;copyConstructorProperties(g,d)}(e.sham||d&&d.sham)&&hide(g,"sham",!0),redefine(_e,h,g,e)}},toObject=function(e){return Object(requireObjectCoercible(e))},correctPrototypeGetter=!fails(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),IE_PROTO=sharedKey("IE_PROTO"),ObjectPrototype$1=Object.prototype,objectGetPrototypeOf=correctPrototypeGetter?Object.getPrototypeOf:function(e){return e=toObject(e),has(e,IE_PROTO)?e[IE_PROTO]:typeof e.constructor=="function"&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ObjectPrototype$1:null},ITERATOR=wellKnownSymbol("iterator"),BUGGY_SAFARI_ITERATORS=!1,returnThis=function(){return this},IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator;[].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=objectGetPrototypeOf(objectGetPrototypeOf(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS=!0),IteratorPrototype==null&&(IteratorPrototype={}),has(IteratorPrototype,ITERATOR)||hide(IteratorPrototype,ITERATOR,returnThis);var iteratorsCore={IteratorPrototype,BUGGY_SAFARI_ITERATORS},objectKeys=Object.keys||function(e){return objectKeysInternal(e,enumBugKeys)},objectDefineProperties=descriptors?Object.defineProperties:function(e,o){anObject(e);for(var h,d=objectKeys(o),g=d.length,_=0;_<g;)objectDefineProperty.f(e,h=d[_++],o[h]);return e},document$2=global_1.document,html=document$2&&document$2.documentElement,IE_PROTO$1=sharedKey("IE_PROTO"),PROTOTYPE="prototype",Empty=function(){},createDict=function(){var e,o=documentCreateElement("iframe"),h=enumBugKeys.length,d="script";for(o.style.display="none",html.appendChild(o),o.src="javascript:",(e=o.contentWindow.document).open(),e.write("<script>document.F=Object</"+d+">"),e.close(),createDict=e.F;h--;)delete createDict[PROTOTYPE][enumBugKeys[h]];return createDict()},objectCreate=Object.create||function(e,o){var h;return e!==null?(Empty[PROTOTYPE]=anObject(e),h=new Empty,Empty[PROTOTYPE]=null,h[IE_PROTO$1]=e):h=createDict(),o===void 0?h:objectDefineProperties(h,o)};hiddenKeys[IE_PROTO$1]=!0;var defineProperty=objectDefineProperty.f,TO_STRING_TAG$2=wellKnownSymbol("toStringTag"),setToStringTag=function(e,o,h){e&&!has(e=h?e:e.prototype,TO_STRING_TAG$2)&&defineProperty(e,TO_STRING_TAG$2,{configurable:!0,value:o})},iterators={},IteratorPrototype$1=iteratorsCore.IteratorPrototype,returnThis$1=function(){return this},createIteratorConstructor=function(e,o,h){var d=o+" Iterator";return e.prototype=objectCreate(IteratorPrototype$1,{next:createPropertyDescriptor(1,h)}),setToStringTag(e,d,!1),iterators[d]=returnThis$1,e},validateSetPrototypeOfArguments=function(e,o){if(anObject(e),!isObject(o)&&o!==null)throw TypeError("Can't set "+String(o)+" as a prototype")},objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var e,o=!1,h={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(h,[]),o=h instanceof Array}catch{}return function(d,g){return validateSetPrototypeOfArguments(d,g),o?e.call(d,g):d.__proto__=g,d}}():void 0),ITERATOR$1=wellKnownSymbol("iterator"),IteratorPrototype$2=iteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS$1=iteratorsCore.BUGGY_SAFARI_ITERATORS,KEYS="keys",VALUES="values",ENTRIES="entries",returnThis$2=function(){return this},defineIterator=function(e,o,h,d,g,_,$){createIteratorConstructor(h,o,d);function j(_h){if(_h===g&&_u)return _u;if(!BUGGY_SAFARI_ITERATORS$1&&_h in _o)return _o[_h];switch(_h){case KEYS:case VALUES:case ENTRIES:return function(){return new h(this,_h)}}return function(){return new h(this)}}var _t,_e,_r,_n=o+" Iterator",_i=!1,_o=e.prototype,_a=_o[ITERATOR$1]||_o["@@iterator"]||g&&_o[g],_u=!BUGGY_SAFARI_ITERATORS$1&&_a||j(g),_f=o=="Array"&&_o.entries||_a;if(_f&&(_t=objectGetPrototypeOf(_f.call(new e)),IteratorPrototype$2!==Object.prototype&&_t.next&&(objectGetPrototypeOf(_t)!==IteratorPrototype$2&&(objectSetPrototypeOf?objectSetPrototypeOf(_t,IteratorPrototype$2):typeof _t[ITERATOR$1]!="function"&&hide(_t,ITERATOR$1,returnThis$2)),setToStringTag(_t,_n,!0))),g==VALUES&&_a&&_a.name!==VALUES&&(_i=!0,_u=function(){return _a.call(this)}),_o[ITERATOR$1]!==_u&&hide(_o,ITERATOR$1,_u),iterators[o]=_u,g)if(_e={values:j(VALUES),keys:_?_u:j(KEYS),entries:j(ENTRIES)},$)for(_r in _e)!BUGGY_SAFARI_ITERATORS$1&&!_i&&_r in _o||redefine(_o,_r,_e[_r]);else _export({target:o,proto:!0,forced:BUGGY_SAFARI_ITERATORS$1||_i},_e);return _e},STRING_ITERATOR="String Iterator",setInternalState=internalState.set,getInternalState=internalState.getterFor(STRING_ITERATOR);defineIterator(String,"String",function(e){setInternalState(this,{type:STRING_ITERATOR,string:String(e),index:0})},function(){var e,o=getInternalState(this),h=o.string,d=o.index;return d>=h.length?{value:void 0,done:!0}:(e=stringAt(h,d,!0),o.index+=e.length,{value:e,done:!1})});var domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},UNSCOPABLES=wellKnownSymbol("unscopables"),ArrayPrototype=Array.prototype;ArrayPrototype[UNSCOPABLES]==null&&hide(ArrayPrototype,UNSCOPABLES,objectCreate(null));var addToUnscopables=function(e){ArrayPrototype[UNSCOPABLES][e]=!0},ARRAY_ITERATOR="Array Iterator",setInternalState$1=internalState.set,getInternalState$1=internalState.getterFor(ARRAY_ITERATOR),es_array_iterator=defineIterator(Array,"Array",function(e,o){setInternalState$1(this,{type:ARRAY_ITERATOR,target:toIndexedObject(e),index:0,kind:o})},function(){var e=getInternalState$1(this),o=e.target,h=e.kind,d=e.index++;return!o||d>=o.length?{value:e.target=void 0,done:!0}:h=="keys"?{value:d,done:!1}:h=="values"?{value:o[d],done:!1}:{value:[d,o[d]],done:!1}},"values");iterators.Arguments=iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries");var ITERATOR$2=wellKnownSymbol("iterator"),TO_STRING_TAG$3=wellKnownSymbol("toStringTag"),ArrayValues=es_array_iterator.values;for(var COLLECTION_NAME in domIterables){var Collection=global_1[COLLECTION_NAME],CollectionPrototype=Collection&&Collection.prototype;if(CollectionPrototype){if(CollectionPrototype[ITERATOR$2]!==ArrayValues)try{hide(CollectionPrototype,ITERATOR$2,ArrayValues)}catch{CollectionPrototype[ITERATOR$2]=ArrayValues}if(CollectionPrototype[TO_STRING_TAG$3]||hide(CollectionPrototype,TO_STRING_TAG$3,COLLECTION_NAME),domIterables[COLLECTION_NAME]){for(var METHOD_NAME in es_array_iterator)if(CollectionPrototype[METHOD_NAME]!==es_array_iterator[METHOD_NAME])try{hide(CollectionPrototype,METHOD_NAME,es_array_iterator[METHOD_NAME])}catch{CollectionPrototype[METHOD_NAME]=es_array_iterator[METHOD_NAME]}}}}var aFunction=function(e){if(typeof e!="function")throw TypeError(String(e)+" is not a function");return e},anInstance=function(e,o,h){if(!(e instanceof o))throw TypeError("Incorrect "+(h?h+" ":"")+"invocation");return e},ITERATOR$3=wellKnownSymbol("iterator"),ArrayPrototype$1=Array.prototype,isArrayIteratorMethod=function(e){return e!==void 0&&(iterators.Array===e||ArrayPrototype$1[ITERATOR$3]===e)},bindContext=function(e,o,h){if(aFunction(e),o===void 0)return e;switch(h){case 0:return function(){return e.call(o)};case 1:return function(d){return e.call(o,d)};case 2:return function(d,g){return e.call(o,d,g)};case 3:return function(d,g,_){return e.call(o,d,g,_)}}return function(){return e.apply(o,arguments)}},ITERATOR$4=wellKnownSymbol("iterator"),getIteratorMethod=function(e){if(e!=null)return e[ITERATOR$4]||e["@@iterator"]||iterators[classof(e)]},callWithSafeIterationClosing=function(e,o,h,d){try{return d?o(anObject(h)[0],h[1]):o(h)}catch(_){var g=e.return;throw g!==void 0&&anObject(g.call(e)),_}},iterate=createCommonjsModule(function(e){var o={};(e.exports=function(h,d,g,_,$){var j,_t,_e,_r,_n,_i=bindContext(d,g,_?2:1);if($)j=h;else{if(typeof(_t=getIteratorMethod(h))!="function")throw TypeError("Target is not iterable");if(isArrayIteratorMethod(_t)){for(_e=0,_r=toLength(h.length);_e<_r;_e++)if((_?_i(anObject(_n=h[_e])[0],_n[1]):_i(h[_e]))===o)return o;return}j=_t.call(h)}for(;!(_n=j.next()).done;)if(callWithSafeIterationClosing(j,_i,_n.value,_)===o)return o}).BREAK=o}),ITERATOR$5=wellKnownSymbol("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR$5]=function(){return this}}catch(e){}var checkCorrectnessOfIteration=function(e,o){if(!o&&!SAFE_CLOSING)return!1;var h=!1;try{var d={};d[ITERATOR$5]=function(){return{next:function(){return{done:h=!0}}}},e(d)}catch{}return h},SPECIES=wellKnownSymbol("species"),speciesConstructor=function(e,o){var h,d=anObject(e).constructor;return d===void 0||(h=anObject(d)[SPECIES])==null?o:aFunction(h)},location=global_1.location,set$1=global_1.setImmediate,clear=global_1.clearImmediate,process=global_1.process,MessageChannel=global_1.MessageChannel,Dispatch=global_1.Dispatch,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",defer,channel,port,run=function(e){var o;queue.hasOwnProperty(e)&&(o=queue[e],delete queue[e],o())},runner=function(e){return function(){run(e)}},listener=function(e){run(e.data)},post=function(e){global_1.postMessage(e+"",location.protocol+"//"+location.host)};set$1&&clear||(set$1=function(e){for(var o=[],h=1;h<arguments.length;)o.push(arguments[h++]);return queue[++counter]=function(){(typeof e=="function"?e:Function(e)).apply(void 0,o)},defer(counter),counter},clear=function(e){delete queue[e]},classofRaw(process)=="process"?defer=function(e){process.nextTick(runner(e))}:Dispatch&&Dispatch.now?defer=function(e){Dispatch.now(runner(e))}:MessageChannel?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener,defer=bindContext(port.postMessage,port,1)):!global_1.addEventListener||typeof postMessage!="function"||global_1.importScripts||fails(post)?defer=ONREADYSTATECHANGE in documentCreateElement("script")?function(e){html.appendChild(documentCreateElement("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run(e)}}:function(e){setTimeout(runner(e),0)}:(defer=post,global_1.addEventListener("message",listener,!1)));var task={set:set$1,clear},navigator$1=global_1.navigator,userAgent=navigator$1&&navigator$1.userAgent||"",getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,macrotask=task.set,MutationObserver=global_1.MutationObserver||global_1.WebKitMutationObserver,process$1=global_1.process,Promise$1=global_1.Promise,IS_NODE=classofRaw(process$1)=="process",queueMicrotaskDescriptor=getOwnPropertyDescriptor$1(global_1,"queueMicrotask"),queueMicrotask=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value,flush,head,last,notify,toggle,node,promise;queueMicrotask||(flush=function(){var e,o;for(IS_NODE&&(e=process$1.domain)&&e.exit();head;){o=head.fn,head=head.next;try{o()}catch(h){throw head?notify():last=void 0,h}}last=void 0,e&&e.enter()},notify=IS_NODE?function(){process$1.nextTick(flush)}:MutationObserver&&!/(iphone|ipod|ipad).*applewebkit/i.test(userAgent)?(toggle=!0,node=document.createTextNode(""),new MutationObserver(flush).observe(node,{characterData:!0}),function(){node.data=toggle=!toggle}):Promise$1&&Promise$1.resolve?(promise=Promise$1.resolve(void 0),function(){promise.then(flush)}):function(){macrotask.call(global_1,flush)});var microtask=queueMicrotask||function(e){var o={fn:e,next:void 0};last&&(last.next=o),head||(head=o,notify()),last=o},PromiseCapability=function(e){var o,h;this.promise=new e(function(d,g){if(o!==void 0||h!==void 0)throw TypeError("Bad Promise constructor");o=d,h=g}),this.resolve=aFunction(o),this.reject=aFunction(h)},f$5=function(e){return new PromiseCapability(e)},newPromiseCapability={f:f$5},promiseResolve=function(e,o){if(anObject(e),isObject(o)&&o.constructor===e)return o;var h=newPromiseCapability.f(e);return(0,h.resolve)(o),h.promise},hostReportErrors=function(e,o){var h=global_1.console;h&&h.error&&(arguments.length===1?h.error(e):h.error(e,o))},perform=function(e){try{return{error:!1,value:e()}}catch(o){return{error:!0,value:o}}},redefineAll=function(e,o,h){for(var d in o)redefine(e,d,o[d],h);return e},path=global_1,aFunction$1=function(e){return typeof e=="function"?e:void 0},getBuiltIn=function(e,o){return arguments.length<2?aFunction$1(path[e])||aFunction$1(global_1[e]):path[e]&&path[e][o]||global_1[e]&&global_1[e][o]},SPECIES$1=wellKnownSymbol("species"),setSpecies=function(e){var o=getBuiltIn(e),h=objectDefineProperty.f;descriptors&&o&&!o[SPECIES$1]&&h(o,SPECIES$1,{configurable:!0,get:function(){return this}})},PROMISE="Promise",task$1=task.set,SPECIES$2=wellKnownSymbol("species"),getInternalState$2=internalState.get,setInternalState$2=internalState.set,getInternalPromiseState=internalState.getterFor(PROMISE),PromiseConstructor=global_1[PROMISE],TypeError$1=global_1.TypeError,document$3=global_1.document,process$2=global_1.process,$fetch=global_1.fetch,versions=process$2&&process$2.versions,v8=versions&&versions.v8||"",newPromiseCapability$1=newPromiseCapability.f,newGenericPromiseCapability=newPromiseCapability$1,IS_NODE$1=classofRaw(process$2)=="process",DISPATCH_EVENT=!!(document$3&&document$3.createEvent&&global_1.dispatchEvent),UNHANDLED_REJECTION="unhandledrejection",REJECTION_HANDLED="rejectionhandled",PENDING=0,FULFILLED=1,REJECTED=2,HANDLED=1,UNHANDLED=2,Internal,OwnPromiseCapability,PromiseWrapper,FORCED=isForced_1(PROMISE,function(){function e(){}var o=PromiseConstructor.resolve(1),h=(o.constructor={})[SPECIES$2]=function(d){d(e,e)};return!((IS_NODE$1||typeof PromiseRejectionEvent=="function")&&!isPure&&o.then(e)instanceof h&&v8.indexOf("6.6")!==0&&userAgent.indexOf("Chrome/66")===-1)}),INCORRECT_ITERATION=FORCED||!checkCorrectnessOfIteration(function(e){PromiseConstructor.all(e).catch(function(){})}),isThenable=function(e){var o;return!(!isObject(e)||typeof(o=e.then)!="function")&&o},notify$1=function(e,o,h){var d;o.notified||(o.notified=!0,d=o.reactions,microtask(function(){for(var g=o.value,_=o.state==FULFILLED,$=0;d.length>$;)(function(j){var _t,_e,_r,_n=_?j.ok:j.fail,_i=j.resolve,_o=j.reject,_a=j.domain;try{_n?(_||(o.rejection===UNHANDLED&&onHandleUnhandled(e,o),o.rejection=HANDLED),_n===!0?_t=g:(_a&&_a.enter(),_t=_n(g),_a&&(_a.exit(),_r=!0)),_t===j.promise?_o(TypeError$1("Promise-chain cycle")):(_e=isThenable(_t))?_e.call(_t,_i,_o):_i(_t)):_o(g)}catch(_u){_a&&!_r&&_a.exit(),_o(_u)}})(d[$++]);o.reactions=[],o.notified=!1,h&&!o.rejection&&onUnhandled(e,o)}))},dispatchEvent=function(e,o,h){var d,g;DISPATCH_EVENT?((d=document$3.createEvent("Event")).promise=o,d.reason=h,d.initEvent(e,!1,!0),global_1.dispatchEvent(d)):d={promise:o,reason:h},(g=global_1["on"+e])?g(d):e===UNHANDLED_REJECTION&&hostReportErrors("Unhandled promise rejection",h)},onUnhandled=function(e,o){task$1.call(global_1,function(){var h,d=o.value;if(isUnhandled(o)&&(h=perform(function(){IS_NODE$1?process$2.emit("unhandledRejection",d,e):dispatchEvent(UNHANDLED_REJECTION,e,d)}),o.rejection=IS_NODE$1||isUnhandled(o)?UNHANDLED:HANDLED,h.error))throw h.value})},isUnhandled=function(e){return e.rejection!==HANDLED&&!e.parent},onHandleUnhandled=function(e,o){task$1.call(global_1,function(){IS_NODE$1?process$2.emit("rejectionHandled",e):dispatchEvent(REJECTION_HANDLED,e,o.value)})},bind=function(e,o,h,d){return function(g){e(o,h,g,d)}},internalReject=function(e,o,h,d){o.done||(o.done=!0,d&&(o=d),o.value=h,o.state=REJECTED,notify$1(e,o,!0))},internalResolve=function(e,o,h,d){if(!o.done){o.done=!0,d&&(o=d);try{if(e===h)throw TypeError$1("Promise can't be resolved itself");var g=isThenable(h);g?microtask(function(){var _={done:!1};try{g.call(h,bind(internalResolve,e,_,o),bind(internalReject,e,_,o))}catch($){internalReject(e,_,$,o)}}):(o.value=h,o.state=FULFILLED,notify$1(e,o,!1))}catch(_){internalReject(e,{done:!1},_,o)}}};FORCED&&(PromiseConstructor=function(e){anInstance(this,PromiseConstructor,PROMISE),aFunction(e),Internal.call(this);var o=getInternalState$2(this);try{e(bind(internalResolve,this,o),bind(internalReject,this,o))}catch(h){internalReject(this,o,h)}},Internal=function(){setInternalState$2(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:PENDING,value:void 0})},Internal.prototype=redefineAll(PromiseConstructor.prototype,{then:function(e,o){var h=getInternalPromiseState(this),d=newPromiseCapability$1(speciesConstructor(this,PromiseConstructor));return d.ok=typeof e!="function"||e,d.fail=typeof o=="function"&&o,d.domain=IS_NODE$1?process$2.domain:void 0,h.parent=!0,h.reactions.push(d),h.state!=PENDING&&notify$1(this,h,!1),d.promise},catch:function(e){return this.then(void 0,e)}}),OwnPromiseCapability=function(){var e=new Internal,o=getInternalState$2(e);this.promise=e,this.resolve=bind(internalResolve,e,o),this.reject=bind(internalReject,e,o)},newPromiseCapability.f=newPromiseCapability$1=function(e){return e===PromiseConstructor||e===PromiseWrapper?new OwnPromiseCapability(e):newGenericPromiseCapability(e)},typeof $fetch=="function"&&_export({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return promiseResolve(PromiseConstructor,$fetch.apply(global_1,arguments))}})),_export({global:!0,wrap:!0,forced:FORCED},{Promise:PromiseConstructor}),setToStringTag(PromiseConstructor,PROMISE,!1),setSpecies(PROMISE),PromiseWrapper=path[PROMISE],_export({target:PROMISE,stat:!0,forced:FORCED},{reject:function(e){var o=newPromiseCapability$1(this);return o.reject.call(void 0,e),o.promise}}),_export({target:PROMISE,stat:!0,forced:FORCED},{resolve:function(e){return promiseResolve(this,e)}}),_export({target:PROMISE,stat:!0,forced:INCORRECT_ITERATION},{all:function(e){var o=this,h=newPromiseCapability$1(o),d=h.resolve,g=h.reject,_=perform(function(){var $=aFunction(o.resolve),j=[],_t=0,_e=1;iterate(e,function(_r){var _n=_t++,_i=!1;j.push(void 0),_e++,$.call(o,_r).then(function(_o){_i||(_i=!0,j[_n]=_o,--_e||d(j))},g)}),--_e||d(j)});return _.error&&g(_.value),h.promise},race:function(e){var o=this,h=newPromiseCapability$1(o),d=h.reject,g=perform(function(){var _=aFunction(o.resolve);iterate(e,function($){_.call(o,$).then(h.resolve,d)})});return g.error&&d(g.value),h.promise}}),_export({target:"Promise",proto:!0,real:!0},{finally:function(e){var o=speciesConstructor(this,getBuiltIn("Promise")),h=typeof e=="function";return this.then(h?function(d){return promiseResolve(o,e()).then(function(){return d})}:e,h?function(d){return promiseResolve(o,e()).then(function(){throw d})}:e)}}),path.Promise;var perf,start;function _typeof(e){return(_typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(e)}function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,o){for(var h=0;h<o.length;h++){var d=o[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,d.key,d)}}function _createClass(e,o,h){return o&&_defineProperties(e.prototype,o),h&&_defineProperties(e,h),e}function _defineProperty(e,o,h){return o in e?Object.defineProperty(e,o,{value:h,enumerable:!0,configurable:!0,writable:!0}):e[o]=h,e}function _inherits(e,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),o&&_setPrototypeOf(e,o)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(e)}function _setPrototypeOf(e,o){return(_setPrototypeOf=Object.setPrototypeOf||function(h,d){return h.__proto__=d,h})(e,o)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function _construct(e,o,h){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(d,g,_){var $=[null];$.push.apply($,g);var j=new(Function.bind.apply(d,$));return _&&_setPrototypeOf(j,_.prototype),j}).apply(null,arguments)}function _isNativeFunction(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function _wrapNativeSuper(e){var o=typeof Map=="function"?new Map:void 0;return(_wrapNativeSuper=function(h){if(h===null||!_isNativeFunction(h))return h;if(typeof h!="function")throw new TypeError("Super expression must either be null or a function");if(o!==void 0){if(o.has(h))return o.get(h);o.set(h,d)}function d(){return _construct(h,arguments,_getPrototypeOf(this).constructor)}return d.prototype=Object.create(h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(d,h)})(e)}function _assertThisInitialized(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,o){return!o||typeof o!="object"&&typeof o!="function"?_assertThisInitialized(e):o}function _createSuper(e){var o=_isNativeReflectConstruct();return function(){var h,d=_getPrototypeOf(e);return _possibleConstructorReturn(this,o?(h=_getPrototypeOf(this).constructor,Reflect.construct(d,arguments,h)):d.apply(this,arguments))}}function _superPropBase(e,o){for(;!Object.prototype.hasOwnProperty.call(e,o)&&(e=_getPrototypeOf(e))!==null;);return e}function _get(e,o,h){return(_get=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(d,g,_){var $=_superPropBase(d,g);if($){var j=Object.getOwnPropertyDescriptor($,g);return j.get?j.get.call(_):j.value}})(e,o,h||e)}function _slicedToArray(e,o){return _arrayWithHoles(e)||_iterableToArrayLimit(e,o)||_unsupportedIterableToArray(e,o)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function _iterableToArrayLimit(e,o){if(typeof Symbol<"u"&&Symbol.iterator in Object(e)){var h=[],d=!0,g=!1,_=void 0;try{for(var $,j=e[Symbol.iterator]();!(d=($=j.next()).done)&&(h.push($.value),!o||h.length!==o);d=!0);}catch(_t){g=!0,_=_t}finally{try{d||j.return==null||j.return()}finally{if(g)throw _}}return h}}function _unsupportedIterableToArray(e,o){if(e){if(typeof e=="string")return _arrayLikeToArray(e,o);var h=Object.prototype.toString.call(e).slice(8,-1);return h==="Object"&&e.constructor&&(h=e.constructor.name),h==="Map"||h==="Set"?Array.from(e):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?_arrayLikeToArray(e,o):void 0}}function _arrayLikeToArray(e,o){(o==null||o>e.length)&&(o=e.length);for(var h=0,d=new Array(o);h<o;h++)d[h]=e[h];return d}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _createForOfIteratorHelper(e,o){var h;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(h=_unsupportedIterableToArray(e))||o&&e&&typeof e.length=="number"){h&&(e=h);var d=0,g=function(){};return{s:g,n:function(){return d>=e.length?{done:!0}:{done:!1,value:e[d++]}},e:function(_t){throw _t},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _,$=!0,j=!1;return{s:function(){h=e[Symbol.iterator]()},n:function(){var _t=h.next();return $=_t.done,_t},e:function(_t){j=!0,_=_t},f:function(){try{$||h.return==null||h.return()}finally{if(j)throw _}}}}typeof Object.assign!="function"&&(Object.assign=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(e),h=1;h<arguments.length;h++){var d=arguments[h];if(d!=null)for(var g in d)d.hasOwnProperty(g)&&(o[g]=d[g])}return o}),typeof Object.values!="function"&&(Object.values=function(e){return Object.keys(e).map(function(o){return e[o]})}),Math.hypot=Math.hypot||function(){for(var e=0,o=arguments.length,h=0;h<o;h++){if(arguments[h]===1/0||arguments[h]===-1/0)return 1/0;e+=arguments[h]*arguments[h]}return Math.sqrt(e)},Math.log2=Math.log2||function(e){return Math.log(e)*Math.LOG2E},typeof window<"u"?(!("performance"in window)&&(window.performance={}),perf=window.performance):typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&(!("performance"in self)&&(self.performance={}),perf=self.performance),perf&&typeof perf.now!="function"&&(start=+new Date,perf.now=function(){return new Date-start});var global$1=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},ns={},MathUtils;(function(){var e,o,h=typeof Object.defineProperties=="function"?Object.defineProperty:function(_p,oy,hy){_p!=Array.prototype&&_p!=Object.prototype&&(_p[oy]=hy.value)},d=(typeof window>"u"||window!==this)&&global$1!==void 0&&global$1!=null?global$1:this;if(typeof Object.setPrototypeOf=="function")e=Object.setPrototypeOf;else{t:{var g={};try{g.__proto__={ea:!0},o=g.ea;break t}catch{}o=!1}e=o?function(_p,oy){if(_p.__proto__=oy,_p.__proto__!==oy)throw new TypeError(_p+" is not extensible");return _p}:null}var _=e;(function(_p,oy){if(oy){var hy=d;_p=_p.split(".");for(var py=0;py<_p.length-1;py++){var dy=_p[py];dy in hy||(hy[dy]={}),hy=hy[dy]}(oy=oy(py=hy[_p=_p[_p.length-1]]))!=py&&oy!=null&&h(hy,_p,{configurable:!0,writable:!0,value:oy})}})("Object.setPrototypeOf",function(_p){return _p||_});var $=this||self;function j(_p){var oy=_typeof(_p);if(oy=="object"){if(!_p)return"null";if(_p instanceof Array)return"array";if(_p instanceof Object)return oy;var hy=Object.prototype.toString.call(_p);if(hy=="[object Window]")return"object";if(hy=="[object Array]"||typeof _p.length=="number"&&_p.splice!==void 0&&_p.propertyIsEnumerable!==void 0&&!_p.propertyIsEnumerable("splice"))return"array";if(hy=="[object Function]"||_p.call!==void 0&&_p.propertyIsEnumerable!==void 0&&!_p.propertyIsEnumerable("call"))return"function"}else if(oy=="function"&&_p.call===void 0)return"object";return oy}function _t(_p){return j(_p)=="function"}function _e(_p){var oy=_typeof(_p);return oy=="object"&&_p!=null||oy=="function"}function _r(_p,oy){_p=_p.split(".");var hy,py=$;for((_p[0]in py)||py.execScript===void 0||py.execScript("var "+_p[0]);_p.length&&(hy=_p.shift());)_p.length||oy===void 0?py=py[hy]&&py[hy]!==Object.prototype[hy]?py[hy]:py[hy]={}:py[hy]=oy}function _n(_p,oy){function hy(){}hy.prototype=oy.prototype,_p.ua=oy.prototype,_p.prototype=new hy,_p.prototype.constructor=_p}var _i=Math,_o=_i.min,_a=_i.max,_u=_i.round,_f=_i.floor,_h=_i.ceil,_d=_i.abs,ty=_i.log,ey=_i.sqrt,sy=_i.pow,ny=_i.sin,uy=_i.asin,fy=_i.cos,yy=_i.tan,xy=_i.atan2,Ey=_i.PI,Oy=Ey/2,Gy=Ey/4,Ly=2*Ey,g0=3*Ey,a0=Ey/180,e0=180/Ey;function Ay(_p,oy,hy){return hy<_p?hy:_p<oy?oy:_p}function $y(_p,oy,hy){return oy<hy?oy<=_p&&_p<=hy:hy<=_p&&_p<=oy}function Hy(_p,oy,hy,py,dy,my){return ey(sy((_p-dy)*(py-my)-(oy-my)*(hy-dy),2)/(sy(hy-dy,2)+sy(py-my,2)))}_r("H.math.normalize",function(_p,oy,hy){return oy-=hy=hy||0,(_p-=hy)-_f(_p/oy)*oy+hy}),_r("H.math.clamp",Ay);var i0={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function m0(_p,oy){var hy=_p.x;_p=_p.y;for(var py,dy,my,Py,Sy=oy.length,Ny=Sy,Fy=oy[0],qy=0,Jy=0,v0=0;qy!=1&&1<Ny;)dy=oy[--Ny],py=oy[--Ny],Py=oy[Ny?Ny-1:(Sy+(Ny-1))%Sy],my=oy[Ny?Ny-2:(Sy+(Ny-2))%Sy],hy<=py&&py<=hy&&_p<=dy&&dy<=_p||hy<=my&&my<=hy&&_p<=Py&&Py<=_p?qy=1:qy||py!==hy?!qy&&$y(hy,py,my)&&((py<hy&&hy<my||hy<py&&my<hy)&&(Jy+=_p<(Fy=dy+(hy-py)/(my-py)*(Py-dy)),v0+=Fy<_p),qy=$y(_p,dy,Py)&&Hy(hy,_p,py,dy,my,Py)<=0?2:0):(my===hy&&(dy<_p&&_p<Py||_p<dy&&Py<_p)||(Fy<=hy&&hy<my||hy<=Fy&&my<hy)&&(_p<=dy?++Jy:++v0),qy=$y(_p,dy,Py)&&Hy(hy,_p,py,dy,my,Py)<=0?2:0),Fy=py;return qy||v0===0||Jy%2==0||(qy=3),qy!==i0.NONE}function d0(_p,oy){this.x=+_p,this.y=+oy}function A0(_p,oy,hy,py,dy,my,Py,Sy,Ny,Fy){return _p={x:_p,y:oy,next:hy||null,s:py||null,ta:dy||null,X:my||null,o:!!Py,T:Sy||0,O:Ny||0,alpha:Fy||0},py&&(_p.s.next=_p),hy&&(_p.next.s=_p),_p}function W0(_p){for(;_p&&_p.o;)_p=_p.next;return _p}function D0(_p){if(_p)for(;_p.next;)_p=_p.next;return _p}function X0(_p){var oy=D0(_p);(oy.s.next=_p).s=oy.s}function l1(_p){for(var oy=[];_p;)oy.push(_p.x,_p.y),_p=_p.next;return oy}function Q0(_p,oy,hy){for(oy=oy.next;oy!==hy&&oy.alpha<=_p.alpha;)oy=oy.next;_p.next=oy,_p.s=oy.s,(_p.next.s=_p).s.next=_p}function O0(_p,oy){for(var hy,py=null,dy=0,my=_p.length;dy<my;dy++)(hy=A0(_p[dy].x,_p[dy].y,py)).qa=oy,(hy.next=py)&&(py.s=hy),py=hy;return py}function H0(_p,oy,hy,py){return(_p-=hy)*_p+(oy-=py)*oy}_r("H.math.CoverType",i0),_r("H.math.isPointInsidePolygon",m0),_r("H.math.flatten",function(_p){for(var oy=_p.length,hy=new Float64Array(2*oy),py=oy&&_p[0].x!==i1;oy--;){var dy=_p[oy],my=oy<<1;hy[my]=py?dy.x:dy[0],hy[1+my]=py?dy.y:dy[1]}return hy}),_r("H.math.Point",d0),(d0.prototype.set=d0).prototype.clone=function(_p){return _p?(_p.x=this.x,_p.y=this.y):_p=new d0(this.x,this.y),_p},d0.prototype.add=function(_p){return this.x+=_p.x,this.y+=_p.y,this},d0.prototype.sub=function(_p){return this.x-=_p.x,this.y-=_p.y,this},d0.prototype.scale=function(_p,oy){return this.x*=_p,this.y*=oy===void 0?_p:oy,this},d0.prototype.round=function(){return this.x=_u(this.x),this.y=_u(this.y),this},d0.prototype.floor=function(){return this.x=_f(this.x),this.y=_f(this.y),this},d0.prototype.ceil=function(){return this.x=_h(this.x),this.y=_h(this.y),this},d0.prototype.equals=d0.prototype.w=function(_p){return!(!_p||this.x!==_p.x||this.y!==_p.y)},d0.prototype.getNearest=d0.prototype.la=function(_p,oy){var hy,py=oy.x-_p.x,dy=oy.y-_p.y,my=_p;return(py||dy)&&(my=(hy=((this.x-_p.x)*py+(this.y-_p.y)*dy)/(py*py+dy*dy))<=0?_p:1<=hy?oy:new d0(_p.x+hy*py,_p.y+hy*dy)),my},d0.prototype.distance=d0.prototype.R=function(_p){return ey(sy(this.x-_p.x,2)+sy(this.y-_p.y,2))},d0.fromIPoint=function(_p){if(!_p)throw Error("invalid argument");return _p instanceof d0?_p:new d0(_p.x,_p.y)},_r("H.math.clipping.clipStrips",function(_p,oy,hy,py,dy,my){var Py,Sy,Ny,Fy=_p.length;if(Fy)for(Py=[];Fy--;)for(var qy,Jy,v0=_p[Fy],k0=v0.length,V0=0,o0=1;o0<k0;o0++)(Ny=function(l0,n0,_0,C0,z0,L0){var M0=l0.x;l0=-l0.y;var E0=n0.x;if(n0=-n0.y,_0=-_0,L0=-L0,E0<M0){if(z0<E0||M0<C0)return;var y1=M0,J0=l0;M0=E0,l0=n0,E0=y1,n0=J0,y1=1}else if(z0<M0||E0<C0)return;if(n0<l0){if(_0<n0||l0<L0)return;var _1=1;l0=-l0,n0=-n0,J0=L0,L0=-_0,_0=-J0}else if(_0<l0||n0<L0)return;if(M0<C0){if((l0+=(C0-M0)*(n0-l0)/(E0-M0))>_0)return;M0=C0}if(l0<L0){if((M0+=(L0-l0)*(E0-M0)/(n0-l0))>z0)return;l0=L0}return z0<E0&&(n0=l0+(z0-M0)*(n0-l0)/(E0-M0),E0=z0),_0<n0&&(E0=M0+(_0-l0)*(E0-M0)/(n0-l0),n0=_0),_1&&(l0=-l0,n0=-n0),y1?[new d0(E0,-n0),new d0(M0,-l0)]:[new d0(M0,-l0),new d0(E0,-n0)]}(v0[o0-1],v0[o0],hy,oy,py,dy))&&(qy=Ny[0],Jy=Ny[1],V0&&V0.w(qy)?Sy.push(Jy):Py.push(Sy=Ny),V0=Jy,my&&(o0=k0,Fy=0));else Py=_p;return Py}),_r("H.math.clipping.clipPolygon",function(_p,oy,hy){var py;_p=O0(_p,!0),oy=O0(oy,!1);var dy={},my=py=1;switch(~~(hy||0)){case 1:my=py=0;break;case 2:py=0,my=1;break;case 3:py=1,my=0}hy=py;var Py,Sy,Ny,Fy,qy,Jy,v0=my;if(oy&&_p){for(oy.M=A0(oy.x,oy.y,null,D0(oy)),_p.M=A0(_p.x,_p.y,null,D0(_p)),my=oy;my.next;my=my.next)if(!my.o)for(py=_p;py.next;py=py.next)py.o||(Jy=function V0(o0,l0,n0,_0,C0){var z0,L0=l0.x-o0.x,M0=l0.y-o0.y,E0=_0.x-n0.x,y1=_0.y-n0.y,J0=L0*y1-M0*E0;return!J0||(E0=((n0.x-o0.x)*y1-(n0.y-o0.y)*E0)/J0,J0=(M0*(n0.x-o0.x)-L0*(n0.y-o0.y))/J0,E0<0||1<E0||J0<0||1<J0)?0:(E0===0?z0=o0:E0===1?z0=l0:J0===0?z0=n0:J0===1&&(z0=_0),z0?(z0.x+=2480549651603763e-20,z0.y+=7321997314118067e-20,z0.M&&(z0.M.x=z0.x,z0.M.y=z0.y),V0(o0,l0,n0,_0,C0)):(C0.xa=o0.x+E0*L0,C0.ya=o0.y+E0*M0,C0.fa=E0,C0.ga=J0,1))}(my,Py=W0(my.next),py,Sy=W0(py.next),dy))&&(Jy=dy.fa,Ny=dy.ga,Q0(Jy=A0(Fy=dy.xa,qy=dy.ya,null,null,null,null,!0,0,0,Jy),my,Py),Q0(Py=A0(Fy,qy,null,null,null,null,!0,0,0,Ny),py,Sy),(Jy.X=Py).X=Jy);for(dy=m0(oy,l1(_p)),hy&&(dy=!dy),my=oy;my;my=my.next)my.o&&(dy=!(my.T=dy));for(dy=m0(_p,l1(oy)),v0&&(dy=!dy),py=_p;py.next;py=py.next)py.o&&(dy=!(py.T=dy));for(X0(oy),X0(_p);(_p=function(V0){var o0=V0;if(o0)for(;(o0=o0.next)!=V0&&(!o0.o||o0.o&&o0.O););return o0}(oy))!=oy;){for(hy=null;!_p.O;_p=_p.X){for(dy=_p.T;(hy=A0(_p.x,_p.y,hy)).artificial=_p.o||_p.qa,_p.O=1,_p=dy?_p.next:_p.s;)if(_p.o){_p.O=1;break}if(!_p)break}hy.ta=k0;var k0=hy}return k0}}),_r("H.math.simplifyDP",function(_p,oy,hy){return function py(dy,my,Py,Sy,Ny){var Fy=0,qy=Sy,Jy=dy[Sy].x,v0=dy[Sy].y,k0=dy[Ny].x,V0=dy[Ny].y,o0=Sy+1,l0=H0(Jy,v0,k0,V0);if(l0)for(;o0<Ny;){var n0=dy[o0++],_0=n0.x;n0=n0.y;var C0=((_0-Jy)*(k0-Jy)+(n0-v0)*(V0-v0))/l0;_0=C0<0?H0(_0,n0,Jy,v0):1<C0?H0(_0,n0,k0,V0):H0(_0,n0,Jy+C0*(k0-Jy),v0+C0*(V0-v0)),Fy<_0&&(Fy=_0,qy=o0-1)}else for(;o0<Ny;)n0=dy[o0++],_0=n0.x,n0=n0.y,_0=H0(_0,n0,Jy,v0),Fy<_0&&(Fy=_0,qy=o0-1);return Sy=my<=Fy||0<Py&&qy-Sy?(--Py,1<qy-Sy?(Sy=py(dy,my,Py,Sy,qy),Sy.splice(Sy.length-1,1)):Sy=[dy[Sy]],1<Ny-qy?Sy.concat(py(dy,my,Py,qy,Ny)):Sy.concat(dy.slice(qy,Ny+1))):[dy[Sy],dy[Ny]],Sy}(_p,oy*oy,hy||0,0,_p.length-1)});var c1=this,e1=String,i1=[].pop(),p1=/x/.exec(""),a1="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y0(_p,oy){if(_p instanceof oy&&_p.constructor===oy)throw new TypeError("Illegal constructor "+u1(oy))}_r("H.lang.isArray",function(_p,oy,hy,py){var dy;if(!(dy=R1(_p)==="Array")&&oy)throw new F0(oy,hy,py!==i1?py:_p);return dy}),_r("H.lang.isString",function(_p){return typeof _p=="string"});var o1=isNaN;function E1(_p){return _p===+_p}function R1(_p){var oy=Object[a1[0]][a1[6]].call(_p).match(/^\[object (\w+)\]$/);return oy?oy[1]:_typeof(_p)}_r("H.lang.isNumber",E1),_r("H.lang.isInteger",Number.isInteger?Number.isInteger:function(_p){return typeof _p=="number"&&_p%1==0});var Z0=[];function u1(_p,oy,hy,py){var dy,my,Py="",Sy=arguments.length<2;return Sy&&(oy={H:c1.H},hy="",py=Z0.slice()),S1(oy,!0,function(Ny,Fy){try{if(dy=Ny[Fy],qy=dy,S1(Ny,!(Jy=[]),function(v0,k0){v0[k0]===qy&&Jy.push(k0)}),Fy=Jy.sort(P1)[0],!(_e(dy)&&dy.window===dy&&dy.self===dy||_e(dy)&&0<dy.nodeType&&_t(dy.cloneNode))&&_e(dy)){if(dy===_p)return Py=hy+"."+Fy,1;if(py.indexOf(dy)<0&&(py.push(dy),Py=u1(_p,dy,hy+"."+Fy,py)))return 1}}catch{}var qy,Jy}),Sy&&(Py=Py?Py.substr(1).replace("."+a1[0]+".","#"):"~"+(_t(_p)?((my=/^\s*function ([^\( ]+)/.exec(my=_p))?my[1]:"anonymous")+"()":R1(_p))),Py}function P1(_p,oy){return oy.length-_p.length}Z0.indexOf(Z0)<0&&Z0.push(Z0);var T0=Object[a1[0]][a1[2]];function S1(_p,oy,hy){var py;if(_p){for(dy in _p)if((!oy||T0.call(_p,dy))&&hy(_p,dy,!0))return;for(py=a1.length;py--;){var dy=a1[py];if((!oy||T0.call(_p,dy))&&hy(_p,dy,!1))break}}}function N1(_p,oy,hy){hy[oy]="#"+oy}function F0(_p,oy,hy){var py,dy,my=arguments.length;return(oy=oy!==i1?+oy:oy)!==i1&&((dy=py=(dy=/^.*?\(([^\)]+)/.exec((""+_p).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?e1(dy[1].replace(/\s+/g,"")).split(i1!==","?",":" "):[]).forEach(N1),dy=dy[oy]||"#"+oy),py=_p?u1(_p):"",my=2<my?e1(hy):"",(dy||my)&&(py+=" (Argument "+(dy||"")+(my?" "+my:"")+")"),my=Error(py),Object.setPrototypeOf(my,F0.prototype),my}function f1(_p,oy,hy){var py=Ay(+_p,-90,90);if(oy&&o1(py))throw new F0(oy,hy,_p);return py}function r1(_p,oy,hy){var py,dy=+_p;if((dy<-180||180<dy)&&(dy=((py=(dy+180)%360)<0?360+py:py)-180),oy&&o1(dy))throw new F0(oy,hy,_p);return dy}function O1(_p,oy,hy){var py;if(_p!==i1&&o1(py=+_p)&&oy)throw new F0(oy,hy,_p);return py}function t1(){Y0(this,t1)}function I0(_p,oy,hy){this.lat=f1(_p,I0,0),this.lng=r1(oy,I0,1),hy!==i1&&(this.alt=O1(hy,I0,2))}function v1(_p,oy,hy){var py=_e(_p)&&!(o1(_p.lat=f1(_p.lat))||o1(_p.lng=r1(_p.lng))||_p.alt!==i1&&o1(_p.alt=O1(_p.alt)));if(!py&&oy)throw new F0(oy,hy,_p);return py}function Wy(_p,oy,hy,py){T1(this,f1(_p,Wy,0),r1(oy,Wy,1),f1(hy,Wy,2),r1(py,Wy,3))}function T1(_p,oy,hy,py,dy){return _p.f=hy,_p.g=dy,oy<py&&(hy=oy,oy=py,py=hy),_p.i=oy,_p.h=py,_p.m=_p.b=_p.c=null,_p}function h1(_p,oy){return(_p=oy-_p)+(_p<0?360:0)}function m1(_p,oy){return(_p+=oy/2)-(180<_p?360:0)}function L1(_p,oy,hy,py,dy,my,Py,Sy,Ny){hy=_o(hy,Py),_p=_a(_p,dy);var Fy=m1(oy,dy=h1(oy,py)),qy=m1(my,Py=h1(my,Sy))-Fy,Jy=(qy+=qy-1e-6<0?360:0)-1e-6<180?(Fy=oy,Sy):(qy=360-qy,Fy=my,py);return 360<=(qy=qy+dy/2+Py/2)+5e-7?(Fy=-180,Jy=180):qy-5e-7<dy?(Fy=oy,Jy=py):qy-5e-7<Py&&(Fy=my,Jy=Sy),Ny?T1(Ny,_p,Fy,hy,Jy):new Wy(_p,Fy,hy,Jy)}function k1(_p,oy,hy){return hy||(v1(_p,k1,0),v1(oy,k1,1)),new Wy(_p.lat,_p.lng,oy.lat,oy.lng)}function A1(_p,oy,hy,py,dy,my){Y0(this,A1),this.sa=_p||10,this.c=this.b=null,this.j=py||0,this.l=dy||0,this.m=oy||1,this.u=hy||1,this.I=!!my,this.flush()}function I1(_p,oy,hy){var py,dy;if(_p.I&&(py=_p.c))for(dy=3;0<=dy;dy--){var my=oy[dy];if(dy%3?my>=py[dy]:my<=py[dy]){if(!hy){_p.c=null;break}py[dy]=my}}}function M1(_p,oy){var hy,py=_p.a;if(oy){var dy=oy;if(dy!==py)for(py=dy;dy=dy.c;)(dy.entries||1<dy.a)&&(py=dy)}else for(;!py.entries&&(hy=py.a)<2&&hy;)py=dy;_p.a=py}_n(F0,Error),_r("H.lang.InvalidArgumentError",F0),F0.prototype.name="InvalidArgumentError",_r("H.geo.isDBC",function(_p,oy){return(_p<0^oy<0)!=0&&180<_d(oy-_p)}),_r("H.geo.AbstractGeometry",t1),t1.prototype.getBoundingBox=t1.prototype.D,t1.prototype.equals=t1.prototype.w,t1.prototype.a="",t1.prototype.l="",t1.prototype.toString=function(){return this.I([this.a.toUpperCase()," "]).join("")},t1.prototype.toGeoJSON=t1.prototype.va=function(){return{type:this.l,coordinates:this.u()}},t1.prototype.forWorkerMessage=t1.prototype.U=function(){return{type:this.a,coordinates:this.j(),boundingBox:this.D().U()}},_n(I0,t1),_r("H.geo.Point",I0),I0.prototype.equals=I0.prototype.w=function(_p){return this===_p||!!_p&&this.lat===_p.lat&&this.lng===_p.lng&&(this.alt||0)===(_p.alt||0)},I0.prototype.distance=I0.prototype.R=function(_p){var oy,hy;return _p=this===_p||this.lat===_p.lat&&this.lng===_p.lng?0:(oy=this.lat*a0,hy=_p.lat*a0,1274200158e-2*uy(_o(1,ey(sy(ny((oy-hy)/2),2)+fy(oy)*fy(hy)*sy(ny((this.lng*a0-_p.lng*a0)/2),2)))))},I0.prototype.walk=I0.prototype.wa=function(_p,oy,hy){var py,dy,my,Py,Sy,Ny,Fy;return hy?((oy/=637100079e-2)&&(_p*=a0,Sy=a0*this.lat,py=ny(Sy),dy=ny(oy),my=fy(oy),Py=a0*this.lng,Ny=fy(Sy),Sy=uy(Ny*fy(_p)*dy+py*my),Ny=(_p=(Py+(_p=xy(ny(_p)*Ny*dy,my-py*ny(Sy)))+Ey)%(2*Ey)-Ey)*e0),oy?new I0(Sy*e0,(Ny+540)%360-180):this):((_p=(_p%360+360)%360)+90)%180==0?(Sy=this.lng+oy/(637100079e-2*Ly*fy(this.lat*a0))*(_p===270?-360:360),new I0(this.lat,(Sy+540)%360-180)):((oy/=637100079e-2)&&(_p*=a0,Py=this.lat*a0,py=this.lng*a0,my=(dy=Py+oy*fy(_p))-Py,Sy=ty(yy(dy/2+Gy)/yy(Py/2+Gy)),Sy=o1(my/Sy)?fy(Py):my/Sy,Fy=oy*ny(_p)/Sy,_d(dy)>Oy&&(dy=0<dy?Ey-dy:-(Ey+dy))),oy?new I0(dy*e0,((py+Fy+g0+(_d(Py+my)>Oy?Ey:0))%Ly-Ey)*e0):this)},I0.prototype.getBoundingBox=I0.prototype.D=function(){return new Wy(this.lat,this.lng,this.lat,this.lng)},I0.validate=v1,I0.fromIPoint=function _p(oy){if(!oy)throw new F0(_p,0,oy);return new I0(oy.lat,oy.lng,oy.alt)},I0.prototype.a="Point",I0.prototype.I=function(_p){return _p.push("(",this.lng," ",this.lat,")"),_p},I0.prototype.l="Point",I0.prototype.u=function(){return[this.lng,this.lat,this.alt||0]},I0.prototype.j=function(){return[this.lat,this.lng,this.alt||0]},_n(Wy,t1),_r("H.geo.Rect",Wy),Wy.prototype.a="Polygon",Wy.prototype.I=function(_p){var oy=this.i,hy=this.f,py=this.h,dy=this.g;return _p.push("(","(",hy," ",oy,",",dy," ",oy,",",dy," ",py,",",hy," ",py,",",hy," ",oy,")",")"),_p},Wy.prototype.equals=Wy.prototype.w=function(_p){return this===_p||!!_p&&this.i===_p.i&&this.f===_p.f&&this.h===_p.h&&this.g===_p.g},Wy.prototype.clone=function(){return new Wy(this.i,this.f,this.h,this.g)},Wy.prototype.getTopLeft=Wy.prototype.W=function(){return this.m||(this.m=new I0(this.i,this.f)),this.m},Wy.prototype.getBottomRight=Wy.prototype.V=function(){return this.b||(this.b=new I0(this.h,this.g)),this.b},Wy.prototype.getTop=Wy.prototype.na=function(){return this.i},Wy.prototype.getBottom=Wy.prototype.ha=function(){return this.h},Wy.prototype.getLeft=Wy.prototype.ja=function(){return this.f},Wy.prototype.getRight=Wy.prototype.ma=function(){return this.g},Wy.prototype.getCenter=Wy.prototype.F=function(){return this.c||(this.c=new I0(this.h+(this.i-this.h)/2,m1(this.f,this.A()))),this.c},Wy.prototype.getWidth=Wy.prototype.A=function(){return h1(this.f,this.g)},Wy.prototype.getHeight=Wy.prototype.G=function(){return this.i-this.h},Wy.prototype.isCDB=Wy.prototype.N=function(){return this.f>this.g},Wy.prototype.isEmpty=Wy.prototype.ra=function(){return!this.A()&&!this.G()},Wy.prototype.getBoundingBox=Wy.prototype.D=function(){return new Wy(this.i,this.f,this.h,this.g)},Wy.prototype.containsLatLng=Wy.prototype.L=function(_p,oy,hy){var py=this.F();return hy||(_p=f1(_p,this.L,0),oy=r1(oy,this.L,1)),(_p=(oy=this.B(_p,oy,hy)).F()).lat===py.lat&&_p.lng===py.lng&&this.G()===oy.G()&&this.A()===oy.A()},Wy.prototype.containsPoint=Wy.prototype.$=function(_p,oy){return oy||v1(_p,this.$,0),this.L(_p.lat,_p.lng,oy)},Wy.prototype.containsRect=Wy.prototype.aa=function(_p,oy){var hy=this.F();if(!(oy||_p instanceof Wy))throw new F0(this.aa,0,_p);return(_p=(oy=this.J(_p,oy)).F()).lat===hy.lat&&_p.lng===hy.lng&&this.G()===oy.G()&&this.A()===oy.A()},Wy.prototype.mergeLatLng=Wy.prototype.B=function(_p,oy,hy,py){if(!hy){if(o1(_p=f1(_p)))throw new F0(this.B,0,_p);if(o1(oy=r1(oy)))throw new F0(this.B,1,oy)}return L1(this.i,this.f,this.h,this.g,_p,oy,_p,oy,py)},Wy.prototype.mergePoint=Wy.prototype.ca=function(_p,oy,hy){return oy||v1(_p,this.ca,0),this.B(_p.lat,_p.lng,oy,hy)},Wy.prototype.mergeRect=Wy.prototype.J=function(_p,oy,hy){if(!(oy||_p instanceof Wy))throw new F0(this.J,0,_p);return L1(this.i,this.f,this.h,this.g,_p.i,_p.f,_p.h,_p.g,hy)},Wy.prototype.mergeTopLeftBottomRight=Wy.prototype.C=function(_p,oy,hy,py,dy,my){return dy||(_p=f1(_p,this.C,0),oy=r1(oy,this.C,1),hy=f1(hy,this.C,2),py=r1(py,this.C,3)),L1(this.i,this.f,this.h,this.g,_p,oy,hy,py,my)},Wy.prototype.intersects=Wy.prototype.ba=function(_p,oy){var hy=this.f<=this.g,py=_p.f<=_p.g,dy=this.f<_p.g,my=_p.f<this.g;if(!(oy||_p instanceof Wy))throw new F0(this.ba,0,_p);return this.h<=_p.i&&_p.h<=this.i&&(!hy&&(!py||dy||my)||!py&&(dy||my)||dy&&my)},Wy.merge=L1,Wy.fromPoints=k1,Wy.coverPoints=function _p(oy,hy){var py=1,dy=oy.length,my=null,Py=j(oy);if(Py!="array"&&(Py!="object"||typeof oy.length!="number"))throw new F0(_p,0,oy);if(0<dy)for(my=k1(Py=oy[0],Py,hy);py<dy;py++)Py=oy[py],my.B(Py.lat,Py.lng,hy,my);return my},Wy.coverLatLngAlts=function _p(oy,hy){var py,dy=3,my=oy.length;if(!(hy||oy&&oy.length!=null))throw new F0(_p,0,oy);if(0<my)for(py=new Wy(oy[0],oy[1],oy[0],oy[1]);dy<my;dy+=3)py.B(oy[dy],oy[dy+1],hy,py);return py},Wy.coverRects=function _p(oy,hy){var py,dy=1,my=oy.length;if(hy&&(!oy||oy.length==null))throw new F0(_p,0,oy);if(0<my)for(py=new Wy(oy[0].i,oy[0].f,oy[0].h,oy[0].g);dy<my;dy++)py.J(oy[dy],hy,py);return py},Wy.prototype.resizeToCenter=Wy.prototype.da=function(_p,oy){var hy=this.f,py=this.i,dy=this.g,my=this.h,Py=this.F().lng;v1(_p,this.da,0);var Sy=_p.lat-my-(py-my)/2,Ny=_p.lng-Py;return _p=(_p=hy+((Ny=180<Ny||Ny<-180?-(Py+_p.lng):Ny)<0?2*Ny:0))<-180?360+_p:_p,dy=180<(dy+=0<Ny?2*Ny:0)?dy-360:dy,90<=(py=0<Sy?py+2*Sy:py)&&(py=90),(my=Sy<0?my+2*Sy:my)<=-90&&(my=-90),oy?T1(oy,py,_p,my,dy):new Wy(py,_p,my,dy)},Wy.prototype.l="Polygon",Wy.prototype.u=function(){return[[this.f,this.i,0],[this.g,this.i,0],[this.g,this.h,0],[this.f,this.h,0],[this.f,this.i,0]]},Wy.prototype.U=function(){return this.j()},Wy.prototype.j=function(){return[this.i,this.f,this.h,this.g]},A1.prototype.remove=function(_p){var oy,hy,py,dy,my,Py,Sy=!1;if(_p&&(oy=_p.a)&&oy.b===this&&(hy=oy.entries)&&0<=(py=hy.indexOf(_p))){for(hy.splice(py,1),hy=this.a;oy;)(dy=oy.entries)&&dy.length||(dy&&delete oy.entries,oy.a||!(my=oy.c))?oy=p1:((py=my)[Py=(Sy=oy).j]===Sy&&(delete py[Py],delete Sy.c,--py.a),hy===oy&&(hy=my),oy=my);this.a!==hy&&(this.a=hy,M1(this)),I1(this,_p,!1),Sy=!0}return Sy},A1.prototype.flush=function(){var _p=new wy(null,NaN,this.j-this.m,this.l-this.u,this.j+this.m,this.l+this.u);(_p.b=this).a=this.b=_p,this.c=null},A1.prototype.o=function(_p,oy,hy,py,dy,my){var Py=[],Sy=this.a,Ny=this.b;return _p<=Sy[5]&&oy<=Sy[6]&&(dy?hy>=Sy[7]:hy>Sy[7])&&(my?py>=Sy[4]:py>Sy[4])&&function Fy(qy,Jy,v0,k0,V0,o0,l0,n0,_0){var C0,z0=Jy.entries,L0=Jy[7],M0=Jy[4],E0=Jy[5],y1=Jy[6],J0=Jy[8],_1=Jy[9];if(z0){var b1=z0.length;if(M0<V0||L0<k0||l0<y1||o0<E0)for(;b1--;){L0=z0[b1],M0=L0[3],E0=L0[0],y1=L0[1];var V1=L0[2];V0<=V1&&k0<=y1&&(E0<l0||n0&&E0==l0)&&(M0<o0||_0&&M0==o0)&&v0.push(L0)}else for(;b1--;)v0.push(z0[b1])}(J0<o0||_0&&o0==J0)&&(V0<_1&&(C0=Jy[1])&&Fy(qy,C0,v0,k0,V0,o0,l0,n0,_0),(_1<l0||n0&&l0==_1)&&(C0=Jy[3])&&Fy(qy,C0,v0,k0,V0,o0,l0,n0,_0)),k0<J0&&(V0<_1&&(C0=Jy[0])&&Fy(qy,C0,v0,k0,V0,o0,l0,n0,_0),(_1<l0||n0&&l0==_1)&&(C0=Jy[2])&&Fy(qy,C0,v0,k0,V0,o0,l0,n0,_0))}(this,Sy,Py,_p,oy,hy,py,my||py>=Ny[6],dy||hy>=Ny[5]),Py};var vy=0;function wy(_p,oy,hy,py,dy,my){this.j=oy,_p&&(this.c=_p,this.b=_p.b,dy=1&oy?(hy=_p[8],_p[5]):(hy=_p[7],_p[8]),my=2&oy?(py=_p[9],_p[6]):(py=_p[4],_p[9])),this[7]=hy,this[5]=dy,this[8]=(hy+dy)/2,this[4]=py,this[6]=my,this[9]=(py+my)/2}function Ty(_p,oy,hy,py,dy,my){Ty.ua.constructor.apply(this,arguments)}function Yy(_p,oy,hy,py,dy,my,Py){var Sy,Ny,Fy=oy[8],qy=oy[9];return Py&&(dy<Fy||(Sy=Fy<=hy))&&(my<qy||(Ny=qy<=py))?hy=(Fy=Yy)(_p,oy=oy[Sy|=Ny<<1]||(++oy.a,oy[Sy]=new wy(oy,Sy)),hy,py,dy,my,Py-1):(py=hy=new _m(hy,py,dy,my),(oy.entries||(oy.entries=[])).push(py),py.a=oy,I1(_p,hy,!0),M1(_p,oy)),hy}function _m(_p,oy,hy,py){this.id=vy++,this[0]=oy,this[1]=hy,this[2]=py,this[3]=_p}function f0(_p){this.l=new Ty(+_p||10,180,90,0,0,!0),this.j=[],this.m=!1,this.a=this.b=this.c=null}function h0(_p,oy,hy,py,dy,my){if(my)my=new _m(dy,-oy,hy+360,-py),_p.j.push(my),_p.m=!0,_p.a&&_p.a.C(oy,hy,py,dy,!0,_p.a);else{var Py=-oy,Sy=-py,Ny=(my=_p.l).b,Fy=Ny[5],qy=Ny[6];if(!(Ny[7]<=hy&&Ny[4]<=Py&&(dy<Fy||Fy===dy&&Fy===Ny.b.b[5])&&(Sy<qy||qy===Sy&&qy===Ny.b.b[6])))throw Error("Coordinates out of bounds");my=Yy(my,my.b,hy,Py,dy,Sy,my.sa),_p.b&&_p.b.C(oy,hy,py,dy,!0,_p.b)}return _p.c=null,my}function s0(_p,oy,hy,py,dy,my,Py){var Sy=(_p=_p.j).length,Ny=[];if(Sy)for(var Fy=hy+360,qy=dy+360;Sy--;){var Jy=_p[Sy];(t0(Jy,oy,hy,py,dy,my,Py)||t0(Jy,oy,Fy,py,qy,my,Py))&&Ny.push(Jy)}return Ny}function t0(_p,oy,hy,py,dy,my,Py){var Sy=_p[3],Ny=_p[0],Fy=_p[1];return _p=_p[2],(my?Ny<=py:Ny<py)&&(Py?Sy<=dy:Sy<dy)&&oy<=_p&&hy<=Fy}function y0(_p,oy){var hy,py;if(hy=oy.length){for(var dy=_p.length,my={};dy--;)my[_p[dy].id]=1;for(;hy--;)(py=oy[hy]).id in my||_p.push(py)}}function R0(){}function _v(_p,oy,hy){if(this.l=[],oy&&this.K(oy),hy&&!_t(hy))throw new F0(_v,2,hy);this.b=0,this.m=hy,this.a={},this.j=this.c=null,this.Z(_p)}function P0(_p,oy){return oy&&(_p.c=n1(_p,oy,_p.c)),oy}function q0(_p){for(;_p.b>_p.u&&_p.j;)B0(_p,_p.j,!0)}function n1(_p,oy,hy){return hy!==oy&&((oy.H||oy.v)&&B0(_p,oy,!1),(oy.H=hy)&&(oy.v=hy.v,hy.v=oy),oy.v||(_p.c=oy),oy.H||(_p.j=oy),_p.b+=oy.size),oy}function B0(_p,oy,hy){var py=oy.v,dy=oy.H;(py||dy||oy==_p.c&&oy==_p.j)&&(py?py.H=dy:_p.c=dy,dy?dy.v=py:_p.j=py,_p.b-=oy.size,hy&&(delete _p.a[oy.id],g1(_p,oy))),oy.H=oy.v=null}function g1(_p,oy){for(var hy=_p.l.length;hy--;)_p.l[hy].call(_p,oy.id,oy.data,oy.size)}wy.prototype.a=0,_n(Ty,A1),_r("H.geo.QuadTree",f0),f0.prototype.N=function(){return this.m},f0.prototype.D=function(){var _p;if(!this.c){var oy,hy,py=[];if((Py=!this.b)&&(Sy=(my=this.l).c,my.I&&!Sy&&((Py=my.a).entries||Py[0]||Py[1]||Py[2]||Py[3])&&(Sy=function Fy(qy,Jy){for(var v0,k0,V0=0,o0=3;0<=o0;o0--){for(var l0=o0+4,n0=0<o0%3,_0=[],C0=Jy[o0],z0=qy[o0],L0=z0.length;L0--;){var M0=z0[L0];if(v0=M0.entries)for(k0=v0.length;k0--;){var E0=v0[k0][o0];(n0?C0<E0:E0<C0)&&(C0=E0)}for(k0=4;k0--;)(v0=M0[k0])&&(n0?v0[l0]>C0:v0[l0]<C0)&&_0.push(v0)}V0+=_0.length,Jy[o0]=C0,qy[o0]=_0}return V0&&(Jy=Fy(qy,Jy)),Jy}([Sy=[Py],Sy,Sy,Sy],[Py[6],Py[7],Py[4],Py[5]]),my.c=Sy),Py=my=Sy),Py&&(this.b=new Wy(-my[0],my[3],-my[2],my[1])),(_p=this.b)&&py.push(_p),!this.a&&(hy=(oy=this.j).length)){for(Py=360,Sy=-(my=90),Ny=0;hy--;)var dy=oy[hy],my=_o(my,dy[0]),Py=_o(Py,dy[3]),Sy=_a(Sy,dy[2]),Ny=_a(Ny,dy[1]);this.a=new Wy(-my,Py,-Sy,Ny-360)}(_p=this.a)&&py.push(_p),(_p=py[0])&&(py[1]&&(_p=_p.J(py[1],!0)),this.c=_p)}return this.c},f0.prototype.insertBoundingBox=f0.prototype.oa=function(_p){var oy=_p.W(),hy=_p.V();return(_p=_p.N())?h0(this,oy.lat,hy.lng,hy.lat,oy.lng,_p):h0(this,oy.lat,oy.lng,hy.lat,hy.lng,_p)},f0.prototype.remove=function(_p){var oy,hy;return _p.a?(hy=this.l.remove(_p),this.b=null):(hy=0<=(_p=(oy=this.j).indexOf(_p)))&&(oy.splice(_p,1),this.m=0<oy.length,this.a=null),hy&&(this.c=null),hy},f0.prototype.intersectBoundingBox=f0.prototype.pa=function(_p,oy,hy){var py=this.l,my=_p.W(),Sy=_p.V(),dy=-my.lat,my=my.lng,Py=-Sy.lat,Sy=Sy.lng;return!oy&&dy==Py||!hy&&my===Sy?_p=[]:_p.N()?(y0(_p=py.o(-180,dy,Sy,Py,hy,oy),py.o(my,dy,180,Py,!1,oy)),y0(_p,s0(this,dy,Sy,Py,my+360,oy,hy))):y0(_p=py.o(my,dy,Sy,Py,hy,oy),s0(this,dy,my,Py,Sy,oy,hy)),_p},_r("H.util.ICache",R0),R0.prototype.add=function(){},R0.prototype.get=function(){},R0.prototype.drop=R0.prototype.S=function(){},R0.prototype.forEach=function(){},R0.prototype.removeAll=R0.prototype.Y=function(){},R0.prototype.registerOnDrop=R0.prototype.K=function(){},R0.prototype.deRegisterOnDrop=R0.prototype.P=function(){},_r("H.util.Cache",_v),_v.prototype.add=function(_p,oy,hy){var py,dy;if(!E1(hy=+hy)||hy<0)throw new F0(this.add,2,hy);return _p=String(_p),(dy=!this.m||this.m(_p,oy,hy))&&((py=this.a[_p])?(py.data!==oy&&g1(this,py),this.b+=hy-py.size,py.size=hy,py.data=oy,P0(this,py)):this.a[_p]=n1(this,{id:_p,data:oy,size:hy,H:null,v:null},this.c),q0(this)),dy},_v.prototype.registerOnDrop=_v.prototype.K=function(_p){if(!_t(_p))throw new F0(this.K,0,_p);this.l.push(_p)},_v.prototype.deRegisterOnDrop=_v.prototype.P=function(_p){this.l=this.l.filter(function(oy){return oy!==_p})},_v.prototype.get=function(_p,oy){return(_p=oy?this.a[_p]:P0(this,this.a[_p]))&&_p.data},_v.prototype.drop=_v.prototype.S=function(_p){var oy;(oy=this.a[_p])&&B0(this,oy,!0)},_v.prototype.forEach=function(_p,oy,hy){var py;for(py in this.a){var dy=this.a[py];hy&&!hy(py,dy.data,dy.size)||_p.call(oy,py,dy.data,dy.size)}},_v.prototype.removeAll=_v.prototype.Y=function(_p){var oy;for(oy in this.a){var hy=this.a[oy];_p&&!_p(oy,hy.data,hy.size)||B0(this,this.a[oy],!0)}},_v.prototype.setMaxSize=_v.prototype.Z=function(_p){if(!(0<+_p))throw new F0(_v.prototype.Z,0,_p);return this.u=+_p,q0(this),this},_v.prototype.getMaxSize=_v.prototype.ka=function(){return this.u},_v.prototype.getCurrentSize=_v.prototype.ia=function(){return this.b}}).call(ns);var MathUtils$1=MathUtils={},Geo;function _xyToArr(e){return[e.x,e.y]}function _arrToXy(e){return _construct(ns.H.math.Point,_toConsumableArray(e))}MathUtils.clipPolygon=function(e,o){var h,d,g=[],_=ns.H.math.clipping.clipPolygon(e.map(_arrToXy),o.map(_arrToXy));if(_)do{for(h=[],d=_;h.push(_xyToArr(d)),d=d.next;);g.push(h)}while(_=_.nextPoly);else MathUtils.isPointInsidePolygon(o[0],e)?g.push(o):MathUtils.isPointInsidePolygon(e[0],o)&&g.push(e);return g},MathUtils.isPointInsidePolygon=function(e,o){return ns.H.math.isPointInsidePolygon({x:e[0],y:e[1]},ns.H.math.flatten(o))},MathUtils.clamp=function(e,o,h){return(e-=0)>h?h:e<o?o:e},MathUtils.splitLegs=function(e,o){var h=[];e.push(e[0]);for(var d=0;d<e.length-1;d++){var g,_=e[d],$=e[d+1];h.push(_),Math.abs($[0]-_[0])>=o&&(g=[(_[0]+$[0])/2,(_[1]+$[1])/2],h.push(g))}return h.length!==e.length-1?MathUtils.splitLegs(h,o):h},MathUtils.getBBox=function(e){var o=1/0,h=1/0,d=-1/0,g=-1/0;return e.forEach(function(_){_[0]<o&&(o=_[0]),_[1]<h&&(h=_[1]),_[0]>d&&(d=_[0]),_[1]>g&&(g=_[1])}),[o,h,d,g]},MathUtils.getBBoxCenter=function(e){var o=_slicedToArray(e,4),h=o[0],d=o[1];return[h+(o[2]-h)/2,d+(o[3]-d)/2]},MathUtils.getLineLength=function(e,o,h,d){return Math.sqrt(Math.pow(e-h,2)+Math.pow(o-d,2))},MathUtils.modulo=function(e,o){var h;return(h=e%o)<0==o<0?h:h+o};var Geo$1=Geo={};Geo.default_source_max_zoom=18,Geo.default_view_max_zoom=20,Geo.tile_size=256,Geo.half_circumference_meters=20037508342789244e-9,Geo.circumference_meters=2*Geo.half_circumference_meters,Geo.min_zoom_meters_per_pixel=Geo.circumference_meters/Geo.tile_size;var meters_per_pixel=[];Geo.metersPerPixel=function(e){return meters_per_pixel[e]=meters_per_pixel[e]||Geo.min_zoom_meters_per_pixel/Math.pow(2,e),meters_per_pixel[e]};var meters_per_tile=[];Geo.metersPerTile=function(e){return meters_per_tile[e]=meters_per_tile[e]||Geo.circumference_meters/Math.pow(2,e),meters_per_tile[e]},Geo.tile_scale=4096,Geo.units_per_pixel=Geo.tile_scale/Geo.tile_size,Geo.height_scale=16;var units_per_meter=[];Geo.unitsPerMeter=function(e){return units_per_meter[e]=units_per_meter[e]||Geo.tile_scale/(Geo.tile_size*Geo.metersPerPixel(e)),units_per_meter[e]},Geo.metersForTile=function(e){return{x:e.x*Geo.circumference_meters/Math.pow(2,e.z)-Geo.half_circumference_meters,y:-(e.y*Geo.circumference_meters/Math.pow(2,e.z)-Geo.half_circumference_meters)}},Geo.tileForMeters=function(e,o){var h=_slicedToArray(e,2),d=h[0],g=h[1];return{x:Math.floor((d+Geo.half_circumference_meters)/(Geo.circumference_meters/Math.pow(2,o))),y:Math.floor((-g+Geo.half_circumference_meters)/(Geo.circumference_meters/Math.pow(2,o))),z:o}},Geo.metersToExactTileCoords=function(e,o){var h=_slicedToArray(e,2),d=h[0],g=h[1];return{x:Math.pow(2,o-1)*(1+d/Geo.half_circumference_meters),y:Math.pow(2,o-1)*(1-g/Geo.half_circumference_meters),z:o}},Geo.wrapTile=function(e){var o=e.x,h=e.y,d=e.z,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{x:!0,y:!1},_=(1<<d)-1;return g.x&&(o&=_),g.y&&(h&=_),{x:o,y:h,z:d}},Geo.wrapMeters=function(e){var o=e.x,h=e.y;return{x:MathUtils$1.modulo(o+Geo.half_circumference_meters,Geo.circumference_meters)-Geo.half_circumference_meters,y:h}},Geo.metersToLatLng=function(e){var o=_slicedToArray(e,2),h=o[0],d=o[1];return h/=Geo.half_circumference_meters,d/=Geo.half_circumference_meters,d=(2*Math.atan(Math.exp(d*Math.PI))-Math.PI/2)/Math.PI,[h*=180,d*=180]},Geo.latLngToMeters=function(e){var o=_slicedToArray(e,2),h=o[0],d=o[1],d=Math.log(Math.tan(d*Math.PI/360+Math.PI/4))/Math.PI;return d*=Geo.half_circumference_meters,d=Math.min(Math.max(d,-Geo.half_circumference_meters),Geo.half_circumference_meters),[h*=Geo.half_circumference_meters/180,d]},Geo.tileSpaceToMeters=function(e,o,h){var d=_slicedToArray(e,2),g=d[0],_=d[1],$=Geo.unitsPerMeter(o);return[g/$+h.x,_/$+h.y]},Geo.tileSpaceToLatlng=function(e,o,h){var d=Geo.unitsPerMeter(o);return Geo.transformGeometry(e,function(g){g[0]=g[0]/d+h.x,g[1]=g[1]/d+h.y;var _=_slicedToArray(Geo.metersToLatLng(g),2),$=_[0],j=_[1];g[0]=$,g[1]=j}),e},Geo.copyGeometry=function(e){if(e!=null){var o={type:e.type};return e.type==="Point"?o.coordinates=[e.coordinates[0],e.coordinates[1]]:e.type==="LineString"||e.type==="MultiPoint"?o.coordinates=e.coordinates.map(function(h){return[h[0],h[1]]}):e.type==="Polygon"||e.type==="MultiLineString"?o.coordinates=e.coordinates.map(function(h){return h.map(function(d){return[d[0],d[1]]})}):e.type==="MultiPolygon"&&(o.coordinates=e.coordinates.map(function(h){return h.map(function(d){return d.map(function(g){return[g[0],g[1]]})})})),o}},Geo.transformGeometry=function(e,o){e!=null&&(e.type==="Point"?o(e.coordinates):e.type==="LineString"||e.type==="MultiPoint"?e.coordinates.forEach(o):e.type==="Polygon"||e.type==="MultiLineString"?e.coordinates.forEach(function(h){return h.forEach(o)}):e.type==="MultiPolygon"&&e.coordinates.forEach(function(h){h.forEach(function(d){return d.forEach(o)})}))},Geo.boxIntersect=function(e,o){return!(o.sw.x>e.ne.x||o.ne.x<e.sw.x||o.sw.y>e.ne.y||o.ne.y<e.sw.y)},Geo.findBoundingBox=function(e){for(var o=1/0,h=-1/0,d=1/0,g=-1/0,_=e[0].length,$=0;$<_;$++){var j=e[0][$];j[0]<o&&(o=j[0]),j[1]<d&&(d=j[1]),j[0]>h&&(h=j[0]),j[1]>g&&(g=j[1])}return[o,d,h,g]},Geo.geometryType=function(e){return e==="Polygon"||e==="MultiPolygon"?"polygon":e==="LineString"||e==="MultiLineString"?"line":e==="Point"||e==="MultiPoint"?"point":void 0},Geo.centroid=function(e){var o=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1];if(e&&e.length!==0){var h,d=0,g=0,_=0,$=e[0],j=$.length;o&&(h=$[0],$=$.map(function(_a){return[_a[0]-h[0],_a[1]-h[1]]}));for(var _t=0,_e=j-1;_t<j;_e=_t,_t++){var _r=$[_t],_n=$[_e],_i=_r[1]*_n[0]-_n[1]*_r[0];d+=(_r[0]+_n[0])*_i,g+=(_r[1]+_n[1])*_i,_+=3*_i}var _o=[d/_,g/_];return o&&(_o[0]+=h[0],_o[1]+=h[1]),_o}},Geo.multiCentroid=function(e){for(var o=e.length,h=[0,0],d=0;d<e.length;d++){var g=Geo.centroid(e[d]);h[0]+=g[0],h[1]+=g[1]}return h[0]/=o,h[1]/=o,h},Geo.signedPolygonRingAreaSum=function(e){for(var o=0,h=e.length,d=0;d<h-1;d++){var g=e[d],_=e[d+1];o+=g[0]*_[1]-_[0]*g[1]}return o+=e[h-1][0]*e[0][1]-e[0][0]*e[h-1][1]},Geo.polygonRingArea=function(e){return Math.abs(Geo.signedPolygonRingAreaSum(e))/2},Geo.polygonArea=function(e){if(e)return Geo.polygonRingArea(e[0])},Geo.multiPolygonArea=function(e){for(var o=0,h=0;h<e.length;h++)o+=Geo.polygonArea(e[h]);return o},Geo.ringWinding=function(e){var o=Geo.signedPolygonRingAreaSum(e);return 0<o?"CW":o<0?"CCW":void 0},Geo.getTileBoundingBox=function(e,o){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,d=Geo.wrapTile(e,{x:!0}),g=Geo.metersForTile(d),_=Geo.metersPerPixel(d.z),$=Geo.metersToLatLng([g.x-h*_,g.y+h*_]),j=Geo.metersToLatLng([g.x+(o+h)*_,g.y-(o+h)*_]),_t=Geo.isLastTile(d);return new ns.H.geo.Rect(e.y===0?90:MathUtils$1.clamp($[1],-90,90),MathUtils$1.clamp($[0],-180,180),_t.row?-90:MathUtils$1.clamp(j[1],-90,90),_t.column?180:MathUtils$1.clamp(j[0],-180,180))},Geo.isLastTile=function(e){var o=e.x,h=e.y,d=e.z;return{row:h===Math.pow(2,d)-1,column:o===Math.pow(2,d)-1}};var MethodNotImplemented=function(){_inherits(o,_wrapNativeSuper(Error));var e=_createSuper(o);function o(h){var d;return _classCallCheck(this,o),(d=e.call(this)).name="MethodNotImplemented",d.message="Method "+h+" must be implemented in subclass",d}return o}(),is_worker=!1,is_main=!1,force_main,force_worker;try{window.document!==HTMLDocument&&(is_main=!0)}catch(e){self!==void 0&&(is_worker=!0,self.window={document:{}},self.document=self.window.document)}var Thread={get is_fake_worker(){return self.is_fake_worker},get is_worker(){return force_worker!==void 0?force_worker:is_worker||self.is_fake_worker},set is_worker(e){force_worker=e},get is_main(){return force_main!==void 0?force_main:is_main&&!self.is_fake_worker},set is_main(e){force_main=e},is_native_worker:is_worker},WorkerBroker={},message_id=0,messages={},targets={},main_worker_targets={};function findTarget(e,o){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:targets,d=[];if(typeof e=="string"&&(e=(d=e.split(".")).pop()),Thread.is_main&&o&&d.length===1&&d[0]==="self")h=o;else for(var g=0;g<d.length;g++){if(!h[d[g]])return[];h=h[d[g]]}return[e,h]}WorkerBroker.addTarget=function(e,o){Thread.is_fake_worker?main_worker_targets[e]=o:targets[e]=o},WorkerBroker.removeTarget=function(e){delete targets[e],delete main_worker_targets[e]};var ERROR_NO_TARGET=" No object with that name is registered on main thread.",ERROR_NO_METHOD=" Object has no method with that name.",ERROR_NOT_SET="_worker_broker_error_not_set_";function setupMainThread(){WorkerBroker.postMessage=function(e,o){for(var h=arguments.length,d=new Array(2<h?h-2:0),g=2;g<h;g++)d[g-2]=arguments[g];if(Array.isArray(e))return Promise.all(e.map(function(_n){return WorkerBroker.postMessage.apply(WorkerBroker,[_n,o].concat(_toConsumableArray(d)))}));var _,$={};_typeof(o)==="object"&&(o=($=o).method);var j="main_send";typeof e=="string"?(o=e,d=Array.prototype.slice.call(arguments,1),_=!0,j="worker_send"):e.init&&(_=!0);var _t,_e=[];if(d&&d.length===1&&d[0]instanceof WorkerBroker.withTransferables&&(_e=d[0].transferables,d=d[0].value),_t={type:j,message_id:++message_id,method:o,message:d},_)return function(_n,_i){var _o=_n.type,_a=_slicedToArray(findTarget(_n.method,_i,_o==="main_send"?main_worker_targets:targets),2),_u=_a[0],_f=_a[1],_h="Worker broker could not dispatch message type ".concat(_n.method," on target ").concat(_n.target,".");if(!_f)throw Error(_h+ERROR_NO_TARGET);var _d=typeof _f[_u]=="function"&&_f[_u];if(!_d)throw Error(_h+ERROR_NO_METHOD);return new Promise(function(ty,ey){var sy;try{sy=_d.apply(_f,_n.message)}catch(ny){return void ey(ny)}sy instanceof Promise?sy.then(function(ny){ny instanceof WorkerBroker.withTransferables&&(ny=ny.value[0]),ty(ny)},function(ny){ey(ny instanceof Error?"".concat(ny.message,": ").concat(ny.stack):ny)}):(sy instanceof WorkerBroker.withTransferables&&(sy=sy.value[0]),ty(sy))})}(_t,e&&e.init?e:void 0);var _r=new Promise(function(_n,_i){messages[message_id]={method:o,message:d,resolve:_n,reject:_i}});return $.stringify&&(_t=JSON.stringify(_t)),e.postMessage(_t,_e.map(function(_n){return _n.object})),freeTransferables(_e),_r},WorkerBroker.addWorker=function(e){if(!(e instanceof Worker))throw Error("Worker broker could not add non-Worker object",e);e.addEventListener("message",function(o){var h=typeof o.data=="string"?JSON.parse(o.data):o.data,d=h.message_id;if(h.type==="worker_reply")messages[d]&&(h.error?messages[d].reject(h.error):messages[d].resolve(h.message),delete messages[d]);else if(h.type==="worker_send"&&d!=null){var g=_slicedToArray(findTarget(h.method),2),_=g[0],$=g[1],j="Worker broker could not dispatch message type ".concat(h.method," on target ").concat(h.target,".");if(!$)throw Error(j+ERROR_NO_TARGET);var _t=typeof $[_]=="function"&&$[_];if(!_t)throw Error(j+ERROR_NO_METHOD);var _e,_r=ERROR_NOT_SET;try{_e=_t.apply($,h.message)}catch(_o){_r=_o}var _n,_i=[];_e&&typeof _e.then=="function"?_e.then(function(_o){_o instanceof WorkerBroker.withTransferables&&(_i=_o.transferables,_o=_o.value[0]),_n={type:"main_reply",message_id:d,message:_o},e.postMessage(_n,_i.map(function(_a){return _a.object})),freeTransferables(_i)},function(_o){e.postMessage({type:"main_reply",message_id:d,error:_o instanceof Error?"".concat(_o.message,": ").concat(_o.stack):_o})}):(_e instanceof WorkerBroker.withTransferables&&(_i=_e.transferables,_e=_e.value[0]),_n={type:"main_reply",message_id:d,message:_e,error:_r instanceof Error?"".concat(_r.message,": ").concat(_r.stack):_r},e.postMessage(_n,_i.map(function(_o){return _o.object})),freeTransferables(_i))}})},WorkerBroker.getMessages=function(){return messages},WorkerBroker.getMessageId=function(){return message_id}}function setupWorkerThread(){WorkerBroker.postMessage=function(e){for(var o=arguments.length,h=new Array(1<o?o-1:0),d=1;d<o;d++)h[d-1]=arguments[d];var g={};_typeof(e)==="object"&&(e=(g=e).method);var _,$=new Promise(function(_t,_e){messages[message_id]={method:e,message:h,resolve:_t,reject:_e}}),j=[];return h&&h.length===1&&h[0]instanceof WorkerBroker.withTransferables&&(j=h[0].transferables,h=h[0].value),_={type:"worker_send",message_id,method:e,message:h},g.stringify&&(_=JSON.stringify(_)),self.postMessage(_,j.map(function(_t){return _t.object})),freeTransferables(j),message_id++,$},self.addEventListener("message",function(e){var o=typeof e.data=="string"?JSON.parse(e.data):e.data,h=o.message_id;if(o.type==="main_reply")messages[h]&&(o.hasOwnProperty("error")&&o.error!==ERROR_NOT_SET?messages[h].reject(o.error):messages[h].resolve(o.message),delete messages[h]);else if(o.type==="main_send"&&h!=null){var d=_slicedToArray(findTarget(o.method),2),g=d[0],_=d[1],$="Worker broker could not dispatch message type ".concat(o.method," on target ").concat(o.target,".");if(!_)throw Error($+ERROR_NO_TARGET);var j,_t,_e=typeof _[g]=="function"&&_[g];if(!_e)throw Error($+ERROR_NO_METHOD);try{j=_e.apply(_,o.message)}catch(_i){_t=_i}var _r,_n=[];j instanceof Promise?j.then(function(_i){_i instanceof WorkerBroker.withTransferables&&(_n=_i.transferables,_i=_i.value[0]),_r={type:"worker_reply",message_id:h,message:_i},self.postMessage(_r,_n.map(function(_o){return _o.object})),freeTransferables(_n)},function(_i){self.postMessage({type:"worker_reply",message_id:h,error:_i instanceof Error?"".concat(_i.message,": ").concat(_i.stack):_i})}):(j instanceof WorkerBroker.withTransferables&&(_n=j.transferables,j=j.value[0]),_r={type:"worker_reply",message_id:h,message:j,error:_t instanceof Error?"".concat(_t.message,": ").concat(_t.stack):_t},self.postMessage(_r,_n.map(function(_i){return _i.object})),freeTransferables(_n))}})}function findTransferables(e){var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:[];if(!e)return d;if(Array.isArray(e))e.forEach(function(_,$){return findTransferables(_,e,$,d)});else if(_typeof(e)==="object")if(e instanceof ArrayBuffer)d.push({object:e,parent:o,property:h});else if(e.buffer instanceof ArrayBuffer)d.push({object:e.buffer,parent:o,property:h});else for(var g in e)findTransferables(e[g],e,g,d);return d}function freeTransferables(e){Array.isArray(e)&&e.filter(function(o){return o.parent&&o.property}).forEach(function(o){return delete o.parent[o.property]})}WorkerBroker.withTransferables=function(){for(var e=arguments.length,o=new Array(e),h=0;h<e;h++)o[h]=arguments[h];if(!(this instanceof WorkerBroker.withTransferables))return _construct(WorkerBroker.withTransferables,o);this.value=o,this.transferables=findTransferables(this.value)},Thread.is_main&&setupMainThread(),Thread.is_worker&&setupWorkerThread();var LEVELS={silent:-1,error:0,warn:1,info:2,debug:3,trace:4},methods={},logged_once={},Utils;function methodForLevel(e){return methods[e]=methods[e]||(console[e]?console[e]:console.log).bind(console),methods[e]}function log(e){var o=_typeof(e)==="object"?e.level:e;if(LEVELS[o]<=LEVELS[log.level]){for(var h=arguments.length,d=new Array(1<h?h-1:0),g=1;g<h;g++)d[g-1]=arguments[g];if(Thread.is_native_worker)WorkerBroker.postMessage.apply(WorkerBroker,[{method:"_logProxy",stringify:!0},e].concat(d));else{if(_typeof(e)==="object"&&e.once===!0){if(logged_once[JSON.stringify(d)])return;logged_once[JSON.stringify(d)]=!0}var _=methodForLevel(o);1<d.length?_.apply(void 0,["Tangram [".concat(o,"]: ").concat(d[0])].concat(_toConsumableArray(d.slice(1)))):_("Tangram [".concat(o,"]: ").concat(d[0]))}}}function debounce(e,o,h){var d,g;return h=h||0,function(){var _=this,$=arguments;function j(){g=0,e.apply(_,$)}clearTimeout(d),g&&h&&Date.now()-g>=h?j():(g=g||Date.now(),d=setTimeout(function(){j()},o))}}log.level="info",log.workers=null,log.setLevel=function(e){log.level=e,Thread.is_main&&Array.isArray(log.workers)&&WorkerBroker.postMessage(log.workers,"_logSetLevelProxy",e)},Thread.is_main&&(log.setWorkers=function(e){log.workers=e},log.reset=function(){logged_once={}}),WorkerBroker.addTarget("_logProxy",log),WorkerBroker.addTarget("_logSetLevelProxy",log.setLevel);var Utils$1=Utils={};WorkerBroker.addTarget("Utils",Utils),Utils.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},Utils.isMicrosoft=function(){return/(Trident\/7.0|Edge[ /](\d+[\.\d]+))/i.test(navigator.userAgent)},Utils._requests={},Utils._proxy_requests={},Utils.io=function(e){var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:6e4,h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"text",d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:"GET",g=4<arguments.length&&arguments[4]!==void 0?arguments[4]:{},_=5<arguments.length&&arguments[5]!==void 0?arguments[5]:null,$=6<arguments.length&&arguments[6]!==void 0&&arguments[6];if(Thread.is_worker&&Utils.isMicrosoft())return log("debug","Proxying request for URL to worker",e),_&&(Utils._proxy_requests[_]=!0),WorkerBroker.postMessage("Utils.io",e,o,h,d,g,_,!0);var j=new XMLHttpRequest,_t=(_t=new Promise(function(_e,_r){j.open(d,e,!0),j.timeout=o,j.responseType=h,j.onload=function(){j.status===200?-1<["text","json"].indexOf(j.responseType)?_e(j.responseText):_e(j.response):_r(Error("Request error with a status of "+j.statusText))},j.onerror=function(_n){_r(Error("There was a network error"+_n.toString()))},j.ontimeout=function(_n){_r(Error("timeout "+_n.toString()))},j.send()})).then(function(_e){return _&&delete Utils._requests[_],$?WorkerBroker.withTransferables(_e):_e});return _&&(Utils._requests[_]=j),_t},Utils.cancelRequest=function(e){if(Thread.is_worker&&Utils._proxy_requests[e])return WorkerBroker.postMessage("Utils.cancelRequest",e);Utils._requests[e]?(log("trace","Cancelling network request key '".concat(e,"'")),Utils._requests[e].abort(),delete Utils._requests[e]):log("trace","Could not find network request key '".concat(e,"'"))},Utils.requestAnimationFramePolyfill=function(){typeof window.requestAnimationFrame!="function"&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16.666666666666668)})},Utils.serializeWithFunctions=function(e){return typeof e=="function"?e.toString():JSON.stringify(e,function(o,h){return typeof h=="function"?h.toString():h})},Utils.stringsToFunctions=function(e,o){if(typeof e=="string")e=Utils.stringToFunction(e,o);else if(e!=null&&_typeof(e)==="object")for(var h in e)e[h]=Utils.stringsToFunctions(e[h],o);return e},Utils._use_count=0,Utils._function_cache={};var _clear_function_cache=debounce(function(){log("trace","Cleared cached ".concat(Object.keys(Utils._function_cache).length," functions (reused ").concat(Utils._use_count," times)")),Utils._use_count=0,Utils._function_cache={}},1e4),FUNCTION_MATCH_RGX=/^\s*function[^(]*\(([^)]*)\)\s*?\{([\s\S]*)\}$/m,_createObjectURL,_revokeObjectURL;function addBaseURL(e,o){if(!e||!isRelativeURL(e))return e;var h,d=e[0]!=="/";return o?(h=document.createElement("a")).href=o:h=window.location,e=d?pathForURL(h.href)+e:(h.origin||h.protocol+"//"+h.host)+e}function pathForURL(e){if(typeof e!="string"||e.search(/^(data|blob):/)!==-1)return"";var o=e.indexOf("?");-1<o&&(e=e.substr(0,o));var h=e.indexOf("#");return-1<h&&(e=e.substr(0,h)),e.substr(0,e.lastIndexOf("/")+1)||""}function extensionForURL(e){var o=(e=e.split("/").pop()).lastIndexOf(".");if(-1<o)return e.substring(o+1)}function isRelativeURL(e){return typeof e=="string"&&!(-1<e.search(/^(http|https|data|blob):/)||e.substr(0,2)==="//")}function addParamsToURL(e,o){if(!o||Object.keys(o).length===0)return[e,[]];var h=e.indexOf("?"),d=e.indexOf("#"),g="";-1<d&&(g=e.slice(d),e=e.slice(0,d)),h===-1&&(h=e.length,e+="?"),h++;var _="",$=[];for(var j in o)getURLParameter(j,e)===""?_+="".concat(j,"=").concat(o[j],"&"):$.push([j,o[j]]);return[e=e.slice(0,h)+_+e.slice(h)+g,$]}function createObjectURL(e){return _createObjectURL===void 0&&typeof(_createObjectURL=window.URL&&window.URL.createObjectURL||window.webkitURL&&window.webkitURL.createObjectURL)!="function"&&(_createObjectURL=null,log("warn","window.URL.createObjectURL (or vendor prefix) not found, unable to create local blob URLs")),_createObjectURL?_createObjectURL(e):e}function revokeObjectURL(e){return _revokeObjectURL===void 0&&typeof(_revokeObjectURL=window.URL&&window.URL.revokeObjectURL||window.webkitURL&&window.webkitURL.revokeObjectURL)!="function"&&(_revokeObjectURL=null,log("warn","window.URL.revokeObjectURL (or vendor prefix) not found, unable to create local blob URLs")),_revokeObjectURL?_revokeObjectURL(e):e}function getURLParameter(e,o){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var h=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(o);return h===null?"":decodeURIComponent(h[1].replace(/\+/g," "))}Utils.stringToFunction=function(e,o){var h=e;o&&(h+=o.toString());var d=Utils._function_cache[h];if(_clear_function_cache(),d)return Utils._use_count++,d;var g=typeof e=="string"&&e.match(FUNCTION_MATCH_RGX);if(g&&2<g.length)try{var _=g[2],$=0<($=0<g[1].length&&g[1].split(",").map(function(_t){return _t.trim()}).filter(function(_t){return _t})).length?$:["context"],j=new Function($.toString(),typeof o=="function"?o(_):_);return Utils._function_cache[h]=j}catch{return e}return e},Utils.device_pixel_ratio=1,Utils.isPowerOf2=function(e){return(e&e-1)==0},Utils.interpolate=function(e,o,h){if(!Array.isArray(o)||!Array.isArray(o[0])||o.length<1)return o;var d,g,_,$,j;if(e<=o[0][0])$=o[0][1],typeof h=="function"&&($=h($));else if(e>=o[o.length-1][0])$=o[o.length-1][1],typeof h=="function"&&($=h($));else for(var _t=0;_t<o.length-1;_t++)if(e>=o[_t][0]&&e<o[_t+1][0]){if(d=o[_t][0],g=o[_t+1][0],Array.isArray(o[_t][1])){$=[];for(var _e=0;_e<o[_t][1].length;_e++)typeof h=="function"?(j=h(o[_t][1][_e]),_=h(o[_t+1][1][_e])-j,$[_e]=_*(e-d)/(g-d)+j):(_=o[_t+1][1][_e]-o[_t][1][_e],$[_e]=_*(e-d)/(g-d)+o[_t][1][_e])}else $=typeof h=="function"?(j=h(o[_t][1]),(_=h(o[_t+1][1])-j)*(e-d)/(g-d)+j):(_=o[_t+1][1]-o[_t][1])*(e-d)/(g-d)+o[_t][1];break}return $},Utils.toCSSColor=function(e){return e[3]===1?"rgb(".concat(e.slice(0,3).map(function(o){return Math.round(255*o)}).join(", "),")"):"rgba(".concat(e.map(function(o,h){return h<3&&Math.round(255*o)||o}).join(", "),")")},Utils.pointInTile=function(e){return 0<=e[0]&&e[1]>-Geo$1.tile_scale&&e[0]<Geo$1.tile_scale&&e[1]<=0},Utils.zoomToTileLevel=function(e){return Math.floor(e)};var DataSource=function(){function e(o,h){var d=this;if(_classCallCheck(this,e),this.config=o,this.sources=h,this.id=o.id,this.name=o.name,this.pad_scale=o.pad_scale||1e-4,this.default_winding=null,this.rasters=[],Array.isArray(o.rasters)&&o.rasters.forEach(function(_){d.rasters.indexOf(_)===-1&&d.rasters.push(_)}),this.preprocess=o.preprocess,typeof this.preprocess=="function"&&this.preprocess.bind(this),this.transform=o.transform,typeof this.transform=="function")this.transform=this.transform.bind(this);else if(_typeof(this.transform)==="object")for(var g in this.transform)typeof this.transform[g]=="function"&&(this.transform[g]=this.transform[g].bind(this));this.extra_data=o.extra_data,this.scripts=o.scripts,this.max_zoom=o.max_zoom!=null?o.max_zoom:Geo$1.default_source_max_zoom,this.setTileSize(o.tile_size),this.max_coord_zoom=this.max_zoom+this.zoom_bias,this.min_display_zoom=o.min_display_zoom!=null?o.min_display_zoom:0,this.max_display_zoom=o.max_display_zoom!=null?o.max_display_zoom:null,this._has_volatile_data=!!o.has_volatile_data}return _createClass(e,[{key:"hasLabeledData",value:function(){return!0}},{key:"_transformTile",value:function(o){if(o.source_data.layers){var h={coords:o.coords},d=[];if(typeof this.transform=="function")d.push(this.transform);else if(_typeof(this.transform)==="object")for(var g=Object.keys(this.transform).sort(),_=0;_<g.length;_++)d.push(this.transform[g[_]]);for(var $=Object.keys(o.source_data.layers).length===1&&o.source_data.layers._default,j=0;j<d.length;j++)$?o.source_data.layers._default=d[j](o.source_data.layers._default,this.extra_data,h):o.source_data.layers=d[j](o.source_data.layers,this.extra_data,h)}}},{key:"_postProcessTile",value:function(o){var h=this;for(var d in this._transformTile(o),o.source_data.layers){var g=o.source_data.layers[d];g&&g.features&&g.features.forEach(function(_){Geo$1.transformGeometry(_.geometry,function($){$[1]=-$[1],h.pad_scale&&($[0]=Math.round($[0]*(1+h.pad_scale)-Geo$1.tile_scale*h.pad_scale/2),$[1]=Math.round($[1]*(1+h.pad_scale)-Geo$1.tile_scale*h.pad_scale/2))}),h.updateDefaultWinding(_.geometry)})}o.default_winding=this.default_winding||"CCW"}},{key:"load",value:function(o){return o.source_data={},o.source_data.layers={},o.pad_scale=this.pad_scale,o.rasters=_toConsumableArray(this.rasters),this._load(o)}},{key:"_load",value:function(){throw new MethodNotImplemented("_load")}},{key:"setTileSize",value:function(o){this.tile_size=o||256,(typeof this.tile_size!="number"||this.tile_size<256||!Utils$1.isPowerOf2(this.tile_size))&&(log({level:"warn",once:!0},"Data source '".concat(this.name,"': 'tile_size' parameter must be a number that is a power of 2 greater than or equal to 256, but was '").concat(o,"'")),this.tile_size=256),this.zoom_bias=Math.log2(this.tile_size)-8}},{key:"updateDefaultWinding",value:function(o){return this.default_winding==null&&(o.type==="Polygon"?this.default_winding=Geo$1.ringWinding(o.coordinates[0]):o.type==="MultiPolygon"&&(this.default_winding=Geo$1.ringWinding(o.coordinates[0][0]))),this.default_winding}},{key:"includesTile",value:function(o,h){if(o.z<this.min_display_zoom||this.max_display_zoom!=null&&h>this.max_display_zoom)return!1;for(var d=0;d<this.rasters.length;d++){var g=this.rasters[d];if(this.sources[g]&&this.sources[g]!==this&&!this.sources[g].includesTile(o,o.z))return!1}return!0}},{key:"has_volatile_data",get:function(){return this._has_volatile_data},set:function(o){var h=0<arguments.length&&o!==void 0&&o;this._has_volatile_data=h}}],[{key:"create",value:function(o,h){for(var d in h)if(h[d].config.name===o.name&&e.sameConfig(h[d],{config:o}))return h[d];if(e.types[o.type])return new e.types[o.type](o,h)}},{key:"sameConfig",value:function(o,h){if(!o||!h)return!1;var d=Object.assign({},o.config,{id:null,tiled:null,url:null}),g=Object.assign({},h.config,{id:null,tiled:null,url:null});return JSON.stringify(d)===JSON.stringify(g)}},{key:"coordsToMeters",value:function(o){var h=_slicedToArray(Geo$1.latLngToMeters(o),2),d=h[0],g=h[1];o[0]=d,o[1]=g}},{key:"projectData",value:function(o){for(var h in o.layers)for(var d=o.layers[h].features.length,g=0;g<d;g++){var _=o.layers[h].features[g];Geo$1.transformGeometry(_.geometry,e.coordsToMeters)}}},{key:"metersToTileUnits",value:function(o,h,d){d[0]=Math.round((d[0]-h.x)*o),d[1]=-1*Math.round((d[1]-h.y)*o)}},{key:"scaleData",value:function(o,h){var d=h.coords.z,g=h.min,_=(h.max,e.metersToTileUnits.bind(this,Geo$1.unitsPerMeter(d),g));for(var $ in o.layers)for(var j=o.layers[$].features.length,_t=0;_t<j;_t++){var _e=o.layers[$].features[_t];Geo$1.transformGeometry(_e.geometry,_)}}},{key:"register",value:function(o,h){o&&h&&(e.types[h]=o)}}]),e}();DataSource.types={};var network_request_id=0,NetworkSource=function(){_inherits(o,DataSource);var e=_createSuper(o);function o(h,d){var g;_classCallCheck(this,o),(g=e.call(this,h,d)).response_type="";var _=_slicedToArray(addParamsToURL(h.url,h.url_params),2),$=_[0],j=_[1];if(g.url=$,j.forEach(function(_t){var _e=_slicedToArray(_t,2),_r=_e[0],_n=_e[1];log({level:"warn",once:!0},"Data source '".concat(g.name,"': parameter '").concat(_r,"' already present in URL '").concat(h.url,"', ")+"skipping value '".concat(_r,"=").concat(_n,"' specified in 'url_params'"))}),typeof g.url!="string")throw Error("Network data source must provide a string `url` property");return g}return _createClass(o,[{key:"_load",value:function(h){var d=this,g=this.formatUrl(this.url,h),_=h.source_data;return _.url=g,new Promise(function($,j){_.error=null;var _t=network_request_id+++"-"+g,_e=Utils$1.io(g,6e4,d.response_type,"GET",{},_t);_.request_id=_t,_e.then(function(_r){typeof d.preprocess=="function"&&(_r=d.preprocess(_r)),(_r=_r instanceof Promise?_r:Promise.resolve(_r)).then(function(_n){d.parseSourceData(h,_,_n),d._postProcessTile(h),$(h)})},function(_r){_.error=_r.stack,d._postProcessTile(h),$(h)})})}},{key:"formatUrl",value:function(){throw new MethodNotImplemented("formatUrl")}},{key:"parseSourceData",value:function(){throw new MethodNotImplemented("parseSourceData")}}]),o}(),NetworkTileSource=function(){_inherits(o,NetworkSource);var e=_createSuper(o);function o(h,d){var g;return _classCallCheck(this,o),(g=e.call(this,h,d)).tiled=!0,g.parseBounds(h),g.builds_geometry_tiles=!1,g.tms=h.tms===!0,-1<g.url.search("{s}")&&(Array.isArray(h.url_subdomains)&&0<h.url_subdomains.length?(g.url_subdomains=h.url_subdomains,g.next_url_subdomain=0):log({level:"warn",once:!0},"Data source '".concat(g.name,"': source URL includes '{s}' subdomain marker ('").concat(g.url,"'), but no subdomains ")+"were specified in 'url_subdomains' parameter")),g}return _createClass(o,[{key:"parseBounds",value:function(h){var d,g,_,$,j;Array.isArray(h.bounds)&&h.bounds.length===4&&(this.bounds=h.bounds,g=(d=_slicedToArray(this.bounds,4))[0],_=d[1],$=d[2],j=d[3],this.bounds_meters={min:Geo$1.latLngToMeters([g,j]),max:Geo$1.latLngToMeters([$,_])},this.bounds_tiles={min:{},max:{}})}},{key:"checkBounds",value:function(h){if(this.bounds){h=Geo$1.wrapTile(h,{x:!0});var d=(d=this.bounds_tiles.min[h.z])||(this.bounds_tiles.min[h.z]=Geo$1.tileForMeters(this.bounds_meters.min,h.z)),g=(g=this.bounds_tiles.max[h.z])||(this.bounds_tiles.max[h.z]=Geo$1.tileForMeters(this.bounds_meters.max,h.z));if(h.x<d.x||h.x>g.x||h.y<d.y||h.y>g.y)return!1}return!0}},{key:"includesTile",value:function(h,d){return!!_get(_getPrototypeOf(o.prototype),"includesTile",this).call(this,h,d)&&!!this.checkBounds(h)}},{key:"formatUrl",value:function(h,d){var g=Geo$1.wrapTile(d.coords,{x:!0});this.tms&&(g.y=Math.pow(2,g.z)-1-g.y);var _=h.replace("{x}",g.x).replace("{y}",g.y).replace("{z}",g.z);return this.url_subdomains!=null&&(_=_.replace("{s}",this.url_subdomains[this.next_url_subdomain]),this.next_url_subdomain=(this.next_url_subdomain+1)%this.url_subdomains.length),_}},{key:"urlHasTilePattern",value:function(h){return h&&-1<h.search("{x}")&&-1<h.search("{y}")&&-1<h.search("{z}")}}]),o}(),MapsJsSource=function(){_inherits(o,DataSource);var e=_createSuper(o);function o(h,d){var g;return _classCallCheck(this,o),(g=e.call(this,h,d)).target_name="MapsJsSource"+h.uid,g.tiled=!!h.tiled,WorkerBroker.addTarget(g.target_name,_assertThisInitialized(g)),Thread.is_worker&&WorkerBroker.postMessage(g.target_name+".onWorkerInitialized"),Thread.is_main&&(g._workers_left=0),g}return _createClass(o,[{key:"initialize",value:function(h,d,g,_){this._main_initialized||(this.provider=h,this.worker=_,this._workers_left+=g,this._on_update=d,this._main_initialized=!0,this._onProviderUpdate=this._onProviderUpdate.bind(this),h.addEventListener("update",this._onProviderUpdate),this._isReady()&&this.onReady())}},{key:"onWorkerInitialized",value:function(){--this._workers_left,this._isReady()&&this.onReady()}},{key:"onReady",value:function(){}},{key:"_isReady",value:function(){return this._main_initialized&&!this._workers_left}},{key:"_onProviderUpdate",value:function(h){this._isReady()&&this.onProviderUpdate(h)}},{key:"onProviderUpdate",value:function(h){this.dispatchUpdate(void 0,h.data)}},{key:"dispatchUpdate",value:function(h,d){this._on_update(this.name,h,d)}},{key:"dispose",value:function(){WorkerBroker.removeTarget(this.target_name),this.provider.removeEventListener("update",this._onProviderUpdate)}}]),o}(),read=function(e,o,h,d,g){var _,$,j=8*g-d-1,_t=(1<<j)-1,_e=_t>>1,_r=-7,_n=h?g-1:0,_i=h?-1:1,_o=e[o+_n];for(_n+=_i,_=_o&(1<<-_r)-1,_o>>=-_r,_r+=j;0<_r;_=256*_+e[o+_n],_n+=_i,_r-=8);for($=_&(1<<-_r)-1,_>>=-_r,_r+=d;0<_r;$=256*$+e[o+_n],_n+=_i,_r-=8);if(_===0)_=1-_e;else{if(_===_t)return $?NaN:1/0*(_o?-1:1);$+=Math.pow(2,d),_-=_e}return(_o?-1:1)*$*Math.pow(2,_-d)},write=function(e,o,h,d,g,_){var $,j,_t,_e=8*_-g-1,_r=(1<<_e)-1,_n=_r>>1,_i=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,_o=d?0:_-1,_a=d?1:-1,_u=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(j=isNaN(o)?1:0,$=_r):($=Math.floor(Math.log(o)/Math.LN2),o*(_t=Math.pow(2,-$))<1&&($--,_t*=2),2<=(o+=1<=$+_n?_i/_t:_i*Math.pow(2,1-_n))*_t&&($++,_t/=2),_r<=$+_n?(j=0,$=_r):1<=$+_n?(j=(o*_t-1)*Math.pow(2,g),$+=_n):(j=o*Math.pow(2,_n-1)*Math.pow(2,g),$=0));8<=g;e[h+_o]=255&j,_o+=_a,j/=256,g-=8);for($=$<<g|j,_e+=g;0<_e;e[h+_o]=255&$,_o+=_a,$/=256,_e-=8);e[h+_o-_a]|=128*_u},ieee754={read,write},pbf=Pbf;function Pbf(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Pbf.Varint=0,Pbf.Fixed64=1,Pbf.Bytes=2,Pbf.Fixed32=5;var SHIFT_LEFT_32=4294967296,SHIFT_RIGHT_32=1/SHIFT_LEFT_32;function readVarintRemainder(e,o,h){var d=h.buf,g=d[h.pos++],_=(112&g)>>4;if(g<128||(_|=(127&(g=d[h.pos++]))<<3,g<128)||(_|=(127&(g=d[h.pos++]))<<10,g<128)||(_|=(127&(g=d[h.pos++]))<<17,g<128)||(_|=(127&(g=d[h.pos++]))<<24,g<128)||(_|=(1&(g=d[h.pos++]))<<31,g<128))return toNum(e,_,o);throw new Error("Expected varint not more than 10 bytes")}function readPackedEnd(e){return e.type===Pbf.Bytes?e.readVarint()+e.pos:e.pos+1}function toNum(e,o,h){return h?4294967296*o+(e>>>0):4294967296*(o>>>0)+(e>>>0)}function writeBigVarint(e,o){var h,d;if(0<=e?(h=e%4294967296|0,d=e/4294967296|0):(d=~(-e/4294967296),4294967295^(h=~(-e%4294967296))?h=h+1|0:d=d+1|(h=0)),18446744073709552e3<=e||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),writeBigVarintLow(h,d,o),writeBigVarintHigh(d,o)}function writeBigVarintLow(e,o,h){h.buf[h.pos++]=127&e|128,e>>>=7,h.buf[h.pos++]=127&e|128,e>>>=7,h.buf[h.pos++]=127&e|128,e>>>=7,h.buf[h.pos++]=127&e|128,e>>>=7,h.buf[h.pos]=127&e}function writeBigVarintHigh(e,o){var h=(7&e)<<4;o.buf[o.pos++]|=h|((e>>>=3)?128:0),e&&(o.buf[o.pos++]=127&e|((e>>>=7)?128:0),e&&(o.buf[o.pos++]=127&e|((e>>>=7)?128:0),e&&(o.buf[o.pos++]=127&e|((e>>>=7)?128:0),e&&(o.buf[o.pos++]=127&e|((e>>>=7)?128:0),e&&(o.buf[o.pos++]=127&e)))))}function makeRoomForExtraLength(e,o,h){var d=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.ceil(Math.log(o)/(7*Math.LN2));h.realloc(d);for(var g=h.pos-1;e<=g;g--)h.buf[g+d]=h.buf[g]}function writePackedVarint(e,o){for(var h=0;h<e.length;h++)o.writeVarint(e[h])}function writePackedSVarint(e,o){for(var h=0;h<e.length;h++)o.writeSVarint(e[h])}function writePackedFloat(e,o){for(var h=0;h<e.length;h++)o.writeFloat(e[h])}function writePackedDouble(e,o){for(var h=0;h<e.length;h++)o.writeDouble(e[h])}function writePackedBoolean(e,o){for(var h=0;h<e.length;h++)o.writeBoolean(e[h])}function writePackedFixed32(e,o){for(var h=0;h<e.length;h++)o.writeFixed32(e[h])}function writePackedSFixed32(e,o){for(var h=0;h<e.length;h++)o.writeSFixed32(e[h])}function writePackedFixed64(e,o){for(var h=0;h<e.length;h++)o.writeFixed64(e[h])}function writePackedSFixed64(e,o){for(var h=0;h<e.length;h++)o.writeSFixed64(e[h])}function readUInt32(e,o){return(e[o]|e[o+1]<<8|e[o+2]<<16)+16777216*e[o+3]}function writeInt32(e,o,h){e[h]=o,e[h+1]=o>>>8,e[h+2]=o>>>16,e[h+3]=o>>>24}function readInt32(e,o){return(e[o]|e[o+1]<<8|e[o+2]<<16)+(e[o+3]<<24)}function readUtf8(e,o,h){for(var d="",g=o;g<h;){var _,$,j,_t=e[g],_e=null,_r=239<_t?4:223<_t?3:191<_t?2:1;if(h<g+_r)break;_r===1?_t<128&&(_e=_t):_r===2?(192&(_=e[g+1]))==128&&(_e=(31&_t)<<6|63&_)<=127&&(_e=null):_r===3?(_=e[g+1],$=e[g+2],(192&_)==128&&(192&$)==128&&((_e=(15&_t)<<12|(63&_)<<6|63&$)<=2047||55296<=_e&&_e<=57343)&&(_e=null)):_r===4&&(_=e[g+1],$=e[g+2],j=e[g+3],(192&_)==128&&(192&$)==128&&(192&j)==128&&((_e=(15&_t)<<18|(63&_)<<12|(63&$)<<6|63&j)<=65535||1114112<=_e)&&(_e=null)),_e===null?(_e=65533,_r=1):65535<_e&&(_e-=65536,d+=String.fromCharCode(_e>>>10&1023|55296),_e=56320|1023&_e),d+=String.fromCharCode(_e),g+=_r}return d}function writeUtf8(e,o,h){for(var d,g,_=0;_<o.length;_++){if(55295<(d=o.charCodeAt(_))&&d<57344){if(!g){56319<d||_+1===o.length?(e[h++]=239,e[h++]=191,e[h++]=189):g=d;continue}if(d<56320){e[h++]=239,e[h++]=191,e[h++]=189,g=d;continue}d=g-55296<<10|d-56320|65536,g=null}else g&&(e[h++]=239,e[h++]=191,e[h++]=189,g=null);d<128?e[h++]=d:(d<2048?e[h++]=d>>6|192:(d<65536?e[h++]=d>>12|224:(e[h++]=d>>18|240,e[h++]=d>>12&63|128),e[h++]=d>>6&63|128),e[h++]=63&d|128)}return h}Pbf.prototype={destroy:function(){this.buf=null},readFields:function(e,o,h){for(h=h||this.length;this.pos<h;){var d=this.readVarint(),g=d>>3,_=this.pos;this.type=7&d,e(g,o,this),this.pos===_&&this.skip(d)}return o},readMessage:function(e,o){return this.readFields(e,o,this.readVarint()+this.pos)},readFixed32:function(){var e=readUInt32(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=readInt32(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=readUInt32(this.buf,this.pos)+readUInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,e},readSFixed64:function(){var e=readUInt32(this.buf,this.pos)+readInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,e},readFloat:function(){var e=ieee754.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=ieee754.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var o=this.buf,h=o[this.pos++],d=127&h;return h<128?d:(d|=(127&(h=o[this.pos++]))<<7,h<128?d:(d|=(127&(h=o[this.pos++]))<<14,h<128?d:(d|=(127&(h=o[this.pos++]))<<21,h<128?d:readVarintRemainder(d|=(15&(h=o[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,o=readUtf8(this.buf,this.pos,e);return this.pos=e,o},readBytes:function(){var e=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,e);return this.pos=e,o},readPackedVarint:function(e,o){var h=readPackedEnd(this);for(e=e||[];this.pos<h;)e.push(this.readVarint(o));return e},readPackedSVarint:function(e){var o=readPackedEnd(this);for(e=e||[];this.pos<o;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var o=readPackedEnd(this);for(e=e||[];this.pos<o;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var o=readPackedEnd(this);for(e=e||[];this.pos<o;)e.push(this.readFloat());return e},readPackedDouble:function(e){var o=readPackedEnd(this);for(e=e||[];this.pos<o;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var o=readPackedEnd(this);for(e=e||[];this.pos<o;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var o=readPackedEnd(this);for(e=e||[];this.pos<o;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var o=readPackedEnd(this);for(e=e||[];this.pos<o;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var o=readPackedEnd(this);for(e=e||[];this.pos<o;)e.push(this.readSFixed64());return e},skip:function(e){var o=7&e;if(o===Pbf.Varint)for(;127<this.buf[this.pos++];);else if(o===Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(o===Pbf.Fixed32)this.pos+=4;else{if(o!==Pbf.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(e,o){this.writeVarint(e<<3|o)},realloc:function(e){for(var o,h=this.length||16;h<this.pos+e;)h*=2;h!==this.length&&((o=new Uint8Array(h)).set(this.buf),this.buf=o,this.length=h)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),writeInt32(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),writeInt32(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),writeInt32(this.buf,-1&e,this.pos),writeInt32(this.buf,Math.floor(e*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),writeInt32(this.buf,-1&e,this.pos),writeInt32(this.buf,Math.floor(e*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeVarint:function(e){268435455<(e=+e||0)||e<0?writeBigVarint(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var o=this.pos;this.pos=writeUtf8(this.buf,e,this.pos);var h=this.pos-o;128<=h&&makeRoomForExtraLength(o,h,this),this.pos=o-1,this.writeVarint(h),this.pos+=h},writeFloat:function(e){this.realloc(4),ieee754.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),ieee754.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var o=e.length;this.writeVarint(o),this.realloc(o);for(var h=0;h<o;h++)this.buf[this.pos++]=e[h]},writeRawMessage:function(e,o){this.pos++;var h=this.pos;e(o,this);var d=this.pos-h;128<=d&&makeRoomForExtraLength(h,d,this),this.pos=h-1,this.writeVarint(d),this.pos+=d},writeMessage:function(e,o,h){this.writeTag(e,Pbf.Bytes),this.writeRawMessage(o,h)},writePackedVarint:function(e,o){this.writeMessage(e,writePackedVarint,o)},writePackedSVarint:function(e,o){this.writeMessage(e,writePackedSVarint,o)},writePackedBoolean:function(e,o){this.writeMessage(e,writePackedBoolean,o)},writePackedFloat:function(e,o){this.writeMessage(e,writePackedFloat,o)},writePackedDouble:function(e,o){this.writeMessage(e,writePackedDouble,o)},writePackedFixed32:function(e,o){this.writeMessage(e,writePackedFixed32,o)},writePackedSFixed32:function(e,o){this.writeMessage(e,writePackedSFixed32,o)},writePackedFixed64:function(e,o){this.writeMessage(e,writePackedFixed64,o)},writePackedSFixed64:function(e,o){this.writeMessage(e,writePackedSFixed64,o)},writeBytesField:function(e,o){this.writeTag(e,Pbf.Bytes),this.writeBytes(o)},writeFixed32Field:function(e,o){this.writeTag(e,Pbf.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(e,o){this.writeTag(e,Pbf.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(e,o){this.writeTag(e,Pbf.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(e,o){this.writeTag(e,Pbf.Fixed64),this.writeSFixed64(o)},writeVarintField:function(e,o){this.writeTag(e,Pbf.Varint),this.writeVarint(o)},writeSVarintField:function(e,o){this.writeTag(e,Pbf.Varint),this.writeSVarint(o)},writeStringField:function(e,o){this.writeTag(e,Pbf.Bytes),this.writeString(o)},writeFloatField:function(e,o){this.writeTag(e,Pbf.Fixed32),this.writeFloat(o)},writeDoubleField:function(e,o){this.writeTag(e,Pbf.Fixed64),this.writeDouble(o)},writeBooleanField:function(e,o){this.writeVarintField(e,!!o)}};var pointGeometry=Point;function Point(e,o){this.x=e,this.y=o}Point.prototype={clone:function(){return new Point(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,o){return this.clone()._rotateAround(e,o)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var o=e.x-this.x,h=e.y-this.y;return o*o+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,o){return Math.atan2(this.x*o-this.y*e,this.x*e+this.y*o)},_matMult:function(e){var o=e[0]*this.x+e[1]*this.y,h=e[2]*this.x+e[3]*this.y;return this.x=o,this.y=h,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var o=Math.cos(e),h=Math.sin(e),d=o*this.x-h*this.y,g=h*this.x+o*this.y;return this.x=d,this.y=g,this},_rotateAround:function(e,o){var h=Math.cos(e),d=Math.sin(e),g=o.x+h*(this.x-o.x)-d*(this.y-o.y),_=o.y+d*(this.x-o.x)+h*(this.y-o.y);return this.x=g,this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Point.convert=function(e){return!(e instanceof Point)&&Array.isArray(e)?new Point(e[0],e[1]):e};var vectortilefeature=VectorTileFeature;function VectorTileFeature(e,o,h,d,g){this.properties={},this.extent=h,this.type=0,this._pbf=e,this._geometry=-1,this._keys=d,this._values=g,e.readFields(readFeature,this,o)}function readFeature(e,o,h){e==1?o.id=h.readVarint():e==2?readTag(h,o):e==3?o.type=h.readVarint():e==4&&(o._geometry=h.pos)}function readTag(e,o){for(var h=e.readVarint()+e.pos;e.pos<h;){var d=o._keys[e.readVarint()],g=o._values[e.readVarint()];o.properties[d]=g}}function classifyRings(e){var o=e.length;if(o<=1)return[e];for(var h,d,g=[],_=0;_<o;_++){var $=signedArea(e[_]);$!==0&&(d===void 0&&(d=$<0),d===$<0?(h&&g.push(h),h=[e[_]]):h.push(e[_]))}return h&&g.push(h),g}function signedArea(e){for(var o,h,d=0,g=0,_=e.length,$=_-1;g<_;$=g++)o=e[g],d+=((h=e[$]).x-o.x)*(o.y+h.y);return d}VectorTileFeature.types=["Unknown","Point","LineString","Polygon"],VectorTileFeature.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var o,h,d=e.readVarint()+e.pos,g=1,_=0,$=0,j=0,_t=[];e.pos<d;)if(_||(g=7&(h=e.readVarint()),_=h>>3),_--,g===1||g===2)$+=e.readSVarint(),j+=e.readSVarint(),g===1&&(o&&_t.push(o),o=[]),o.push(new pointGeometry($,j));else{if(g!==7)throw new Error("unknown command "+g);o&&o.push(o[0].clone())}return o&&_t.push(o),_t},VectorTileFeature.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var o,h=e.readVarint()+e.pos,d=1,g=0,_=0,$=0,j=1/0,_t=-1/0,_e=1/0,_r=-1/0;e.pos<h;)if(g||(d=7&(o=e.readVarint()),g=o>>3),g--,d===1||d===2)(_+=e.readSVarint())<j&&(j=_),_t<_&&(_t=_),($+=e.readSVarint())<_e&&(_e=$),_r<$&&(_r=$);else if(d!==7)throw new Error("unknown command "+d);return[j,_e,_t,_r]},VectorTileFeature.prototype.toGeoJSON=function(e,o,h){var d,g=this.extent*Math.pow(2,h),_=this.extent*e,$=this.extent*o,j=this.loadGeometry(),_t=VectorTileFeature.types[this.type];function _e(_o){for(var _a=0;_a<_o.length;_a++){var _u=_o[_a],_f=180-360*(_u.y+$)/g;_o[_a]=[360*(_u.x+_)/g-180,360/Math.PI*Math.atan(Math.exp(_f*Math.PI/180))-90]}}switch(this.type){case 1:for(var _r=[],_n=0;_n<j.length;_n++)_r[_n]=j[_n][0];_e(j=_r);break;case 2:for(_n=0;_n<j.length;_n++)_e(j[_n]);break;case 3:for(j=classifyRings(j),_n=0;_n<j.length;_n++)for(d=0;d<j[_n].length;d++)_e(j[_n][d])}j.length===1?j=j[0]:_t="Multi"+_t;var _i={type:"Feature",geometry:{type:_t,coordinates:j},properties:this.properties};return"id"in this&&(_i.id=this.id),_i};var VectorTileFeature$1=vectortilefeature,long_1=Long,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function Long(e,o,h){this.low=0|e,this.high=0|o,this.unsigned=!!h}function isLong(e){return(e&&e.__isLong__)===!0}Long.prototype.__isLong__,Object.defineProperty(Long.prototype,"__isLong__",{value:!0}),Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(e,o){var h,d,g;return o?(g=0<=(e>>>=0)&&e<256)&&(d=UINT_CACHE[e])?d:(h=fromBits(e,(0|e)<0?-1:0,!0),g&&(UINT_CACHE[e]=h),h):(g=-128<=(e|=0)&&e<128)&&(d=INT_CACHE[e])?d:(h=fromBits(e,e<0?-1:0,!1),g&&(INT_CACHE[e]=h),h)}function fromNumber(e,o){if(isNaN(e))return o?UZERO:ZERO;if(o){if(e<0)return UZERO;if(TWO_PWR_64_DBL<=e)return MAX_UNSIGNED_VALUE}else{if(e<=-TWO_PWR_63_DBL)return MIN_VALUE;if(TWO_PWR_63_DBL<=e+1)return MAX_VALUE}return e<0?fromNumber(-e,o).neg():fromBits(e%TWO_PWR_32_DBL|0,e/TWO_PWR_32_DBL|0,o)}function fromBits(e,o,h){return new Long(e,o,h)}Long.fromInt=fromInt,Long.fromNumber=fromNumber,Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(e,o,h){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return ZERO;if(o=typeof o=="number"?(h=o,!1):!!o,(h=h||10)<2||36<h)throw RangeError("radix");var d;if(0<(d=e.indexOf("-")))throw Error("interior hyphen");if(d===0)return fromString(e.substring(1),o,h).neg();for(var g=fromNumber(pow_dbl(h,8)),_=ZERO,$=0;$<e.length;$+=8){var j,_t=Math.min(8,e.length-$),_e=parseInt(e.substring($,$+_t),h);_=_t<8?(j=fromNumber(pow_dbl(h,_t)),_.mul(j).add(fromNumber(_e))):(_=_.mul(g)).add(fromNumber(_e))}return _.unsigned=o,_}function fromValue(e,o){return typeof e=="number"?fromNumber(e,o):typeof e=="string"?fromString(e,o):fromBits(e.low,e.high,typeof o=="boolean"?o:e.unsigned)}Long.fromString=fromString,Long.fromValue=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(MIN_VALUE)){var o=fromNumber(e),h=this.div(o),d=h.mul(o).sub(this);return h.toString(e)+d.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var g=fromNumber(pow_dbl(e,6),this.unsigned),_=this,$="";;){var j=_.div(g),_t=(_.sub(j.mul(g)).toInt()>>>0).toString(e);if((_=j).isZero())return _t+$;for(;_t.length<6;)_t="0"+_t;$=""+_t+$}},LongPrototype.getHighBits=function(){return this.high},LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0},LongPrototype.getLowBits=function(){return this.low},LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0},LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,o=31;0<o&&!(e&1<<o);o--);return this.high!=0?o+33:o+1},LongPrototype.isZero=function(){return this.high===0&&this.low===0},LongPrototype.eqz=LongPrototype.isZero,LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function(){return this.unsigned||0<=this.high},LongPrototype.isOdd=function(){return(1&this.low)==1},LongPrototype.isEven=function(){return(1&this.low)==0},LongPrototype.equals=function(e){return isLong(e)||(e=fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function(e){return!this.eq(e)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.ne=LongPrototype.notEquals,LongPrototype.lessThan=function(e){return this.comp(e)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(e){return this.comp(e)<=0},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.le=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function(e){return 0<this.comp(e)},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function(e){return 0<=this.comp(e)},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.ge=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function(e){if(isLong(e)||(e=fromValue(e)),this.eq(e))return 0;var o=this.isNegative(),h=e.isNegative();return o&&!h?-1:!o&&h?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function(e){isLong(e)||(e=fromValue(e));var o=this.high>>>16,h=65535&this.high,d=this.low>>>16,g=65535&this.low,_=e.high>>>16,$=65535&e.high,j=e.low>>>16,_t=0,_e=0,_r=0,_n=0;return _r+=(_n+=g+(65535&e.low))>>>16,_e+=(_r+=d+j)>>>16,_t+=(_e+=h+$)>>>16,_t+=o+_,fromBits((_r&=65535)<<16|(_n&=65535),(_t&=65535)<<16|(_e&=65535),this.unsigned)},LongPrototype.subtract=function(e){return isLong(e)||(e=fromValue(e)),this.add(e.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function(e){if(this.isZero())return ZERO;if(isLong(e)||(e=fromValue(e)),wasm)return fromBits(wasm.mul(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned);if(e.isZero())return ZERO;if(this.eq(MIN_VALUE))return e.isOdd()?MIN_VALUE:ZERO;if(e.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(TWO_PWR_24)&&e.lt(TWO_PWR_24))return fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var o=this.high>>>16,h=65535&this.high,d=this.low>>>16,g=65535&this.low,_=e.high>>>16,$=65535&e.high,j=e.low>>>16,_t=65535&e.low,_e=0,_r=0,_n=0,_i=0;return _n+=(_i+=g*_t)>>>16,_r+=(_n+=d*_t)>>>16,_n&=65535,_r+=(_n+=g*j)>>>16,_e+=(_r+=h*_t)>>>16,_r&=65535,_e+=(_r+=d*j)>>>16,_r&=65535,_e+=(_r+=g*$)>>>16,_e+=o*_t+h*j+d*$+g*_,fromBits((_n&=65535)<<16|(_i&=65535),(_e&=65535)<<16|(_r&=65535),this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function(e){if(isLong(e)||(e=fromValue(e)),e.isZero())throw Error("division by zero");var o,h,d;if(wasm)return this.unsigned||this.high!==-2147483648||e.low!==-1||e.high!==-1?fromBits((this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?UZERO:ZERO;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return UZERO;if(e.gt(this.shru(1)))return UONE;h=UZERO}else{if(this.eq(MIN_VALUE))return e.eq(ONE)||e.eq(NEG_ONE)?MIN_VALUE:e.eq(MIN_VALUE)?ONE:(d=this.shr(1).div(e).shl(1)).eq(ZERO)?e.isNegative()?ONE:NEG_ONE:(o=this.sub(e.mul(d)),h=d.add(o.div(e)));if(e.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();h=ZERO}for(o=this;o.gte(e);){d=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var g=Math.ceil(Math.log(d)/Math.LN2),_=g<=48?1:pow_dbl(2,g-48),$=fromNumber(d),j=$.mul(e);j.isNegative()||j.gt(o);)j=($=fromNumber(d-=_,this.unsigned)).mul(e);$.isZero()&&($=ONE),h=h.add($),o=o.sub(j)}return h},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function(e){return isLong(e)||(e=fromValue(e)),wasm?fromBits((this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.rem=LongPrototype.modulo,LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.and=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low&e.low,this.high&e.high,this.unsigned)},LongPrototype.or=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low|e.low,this.high|e.high,this.unsigned)},LongPrototype.xor=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low^e.low,this.high^e.high,this.unsigned)},LongPrototype.shiftLeft=function(e){return isLong(e)&&(e=e.toInt()),(e&=63)==0?this:e<32?fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):fromBits(0,this.low<<e-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function(e){return isLong(e)&&(e=e.toInt()),(e&=63)==0?this:e<32?fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):fromBits(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function(e){if(isLong(e)&&(e=e.toInt()),(e&=63)===0)return this;var o=this.high;return e<32?fromBits(this.low>>>e|o<<32-e,o>>>e,this.unsigned):fromBits(e===32?o:o>>>e-32,0,this.unsigned)},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.shr_u=LongPrototype.shiftRightUnsigned,LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function(){var e=this.high,o=this.low;return[255&o,o>>>8&255,o>>>16&255,o>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},LongPrototype.toBytesBE=function(){var e=this.high,o=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,o>>>24,o>>>16&255,o>>>8&255,255&o]},Long.fromBytes=function(e,o,h){return h?Long.fromBytesLE(e,o):Long.fromBytesBE(e,o)},Long.fromBytesLE=function(e,o){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,o)},Long.fromBytesBE=function(e,o){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],o)};var aspromise=asPromise;function asPromise(e,o){for(var h=new Array(arguments.length-1),d=0,g=2,_=!0;g<arguments.length;)h[d++]=arguments[g++];return new Promise(function($,j){h[d]=function(_t){if(_)if(_=!1,_t)j(_t);else{for(var _e=new Array(arguments.length-1),_r=0;_r<_e.length;)_e[_r++]=arguments[_r];$.apply(null,_e)}};try{e.apply(o||null,h)}catch(_t){_&&(_=!1,j(_t))}})}var base64_1=createCommonjsModule(function(e,o){var h=o;h.length=function(j){var _t=j.length;if(!_t)return 0;for(var _e=0;1<--_t%4&&j.charAt(_t)==="=";)++_e;return Math.ceil(3*j.length)/4-_e};for(var d=new Array(64),g=new Array(123),_=0;_<64;)g[d[_]=_<26?_+65:_<52?_+71:_<62?_-4:_-59|43]=_++;h.encode=function(j,_t,_e){for(var _r,_n=null,_i=[],_o=0,_a=0;_t<_e;){var _u=j[_t++];switch(_a){case 0:_i[_o++]=d[_u>>2],_r=(3&_u)<<4,_a=1;break;case 1:_i[_o++]=d[_r|_u>>4],_r=(15&_u)<<2,_a=2;break;case 2:_i[_o++]=d[_r|_u>>6],_i[_o++]=d[63&_u],_a=0}8191<_o&&((_n=_n||[]).push(String.fromCharCode.apply(String,_i)),_o=0)}return _a&&(_i[_o++]=d[_r],_i[_o++]=61,_a===1&&(_i[_o++]=61)),_n?(_o&&_n.push(String.fromCharCode.apply(String,_i.slice(0,_o))),_n.join("")):String.fromCharCode.apply(String,_i.slice(0,_o))};var $="invalid encoding";h.decode=function(j,_t,_e){for(var _r,_n=_e,_i=0,_o=0;_o<j.length;){var _a=j.charCodeAt(_o++);if(_a===61&&1<_i)break;if((_a=g[_a])===void 0)throw Error($);switch(_i){case 0:_r=_a,_i=1;break;case 1:_t[_e++]=_r<<2|(48&_a)>>4,_r=_a,_i=2;break;case 2:_t[_e++]=(15&_r)<<4|(60&_a)>>2,_r=_a,_i=3;break;case 3:_t[_e++]=(3&_r)<<6|_a,_i=0}}if(_i===1)throw Error($);return _e-_n},h.test=function(j){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(j)}}),eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,o,h){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:o,ctx:h||this}),this},EventEmitter.prototype.off=function(e,o){if(e===void 0)this._listeners={};else if(o===void 0)this._listeners[e]=[];else for(var h=this._listeners[e],d=0;d<h.length;)h[d].fn===o?h.splice(d,1):++d;return this},EventEmitter.prototype.emit=function(e){var o=this._listeners[e];if(o){for(var h=[],d=1;d<arguments.length;)h.push(arguments[d++]);for(d=0;d<o.length;)o[d].fn.apply(o[d++].ctx,h)}return this};var float_1=factory(factory);function factory(e){function o(ty,ey,sy,ny){var uy,fy=ey<0?1:0;fy&&(ey=-ey),ey===0?ty(0<1/ey?0:2147483648,sy,ny):isNaN(ey)?ty(2143289344,sy,ny):ty(34028234663852886e22<ey?(fy<<31|2139095040)>>>0:ey<11754943508222875e-54?(fy<<31|Math.round(ey/1401298464324817e-60))>>>0:(fy<<31|(uy=Math.floor(Math.log(ey)/Math.LN2))+127<<23|8388607&Math.round(ey*Math.pow(2,-uy)*8388608))>>>0,sy,ny)}function h(ty,ey,sy){var ny=ty(ey,sy),uy=2*(ny>>31)+1,fy=ny>>>23&255,yy=8388607&ny;return fy==255?yy?NaN:1/0*uy:fy==0?1401298464324817e-60*uy*yy:uy*Math.pow(2,fy-150)*(8388608+yy)}function d(ty,ey,sy){j[0]=ty,ey[sy]=_t[0],ey[sy+1]=_t[1],ey[sy+2]=_t[2],ey[sy+3]=_t[3]}function g(ty,ey,sy){j[0]=ty,ey[sy]=_t[3],ey[sy+1]=_t[2],ey[sy+2]=_t[1],ey[sy+3]=_t[0]}function _(ty,ey){return _t[0]=ty[ey],_t[1]=ty[ey+1],_t[2]=ty[ey+2],_t[3]=ty[ey+3],j[0]}function $(ty,ey){return _t[3]=ty[ey],_t[2]=ty[ey+1],_t[1]=ty[ey+2],_t[0]=ty[ey+3],j[0]}var j,_t,_e,_r,_n,_i;function _o(ty,ey,sy,ny,uy,fy){var yy,xy,Ey=ny<0?1:0;Ey&&(ny=-ny),ny===0?(ty(0,uy,fy+ey),ty(0<1/ny?0:2147483648,uy,fy+sy)):isNaN(ny)?(ty(0,uy,fy+ey),ty(2146959360,uy,fy+sy)):17976931348623157e292<ny?(ty(0,uy,fy+ey),ty((Ey<<31|2146435072)>>>0,uy,fy+sy)):ny<22250738585072014e-324?(ty((yy=ny/5e-324)>>>0,uy,fy+ey),ty((Ey<<31|yy/4294967296)>>>0,uy,fy+sy)):((xy=Math.floor(Math.log(ny)/Math.LN2))===1024&&(xy=1023),ty(4503599627370496*(yy=ny*Math.pow(2,-xy))>>>0,uy,fy+ey),ty((Ey<<31|xy+1023<<20|1048576*yy&1048575)>>>0,uy,fy+sy))}function _a(ty,ey,sy,ny,uy){var fy=ty(ny,uy+ey),yy=ty(ny,uy+sy),xy=2*(yy>>31)+1,Ey=yy>>>20&2047,Oy=4294967296*(1048575&yy)+fy;return Ey==2047?Oy?NaN:1/0*xy:Ey==0?5e-324*xy*Oy:xy*Math.pow(2,Ey-1075)*(Oy+4503599627370496)}function _u(ty,ey,sy){_r[0]=ty,ey[sy]=_n[0],ey[sy+1]=_n[1],ey[sy+2]=_n[2],ey[sy+3]=_n[3],ey[sy+4]=_n[4],ey[sy+5]=_n[5],ey[sy+6]=_n[6],ey[sy+7]=_n[7]}function _f(ty,ey,sy){_r[0]=ty,ey[sy]=_n[7],ey[sy+1]=_n[6],ey[sy+2]=_n[5],ey[sy+3]=_n[4],ey[sy+4]=_n[3],ey[sy+5]=_n[2],ey[sy+6]=_n[1],ey[sy+7]=_n[0]}function _h(ty,ey){return _n[0]=ty[ey],_n[1]=ty[ey+1],_n[2]=ty[ey+2],_n[3]=ty[ey+3],_n[4]=ty[ey+4],_n[5]=ty[ey+5],_n[6]=ty[ey+6],_n[7]=ty[ey+7],_r[0]}function _d(ty,ey){return _n[7]=ty[ey],_n[6]=ty[ey+1],_n[5]=ty[ey+2],_n[4]=ty[ey+3],_n[3]=ty[ey+4],_n[2]=ty[ey+5],_n[1]=ty[ey+6],_n[0]=ty[ey+7],_r[0]}return typeof Float32Array<"u"?(j=new Float32Array([-0]),_t=new Uint8Array(j.buffer),_e=_t[3]===128,e.writeFloatLE=_e?d:g,e.writeFloatBE=_e?g:d,e.readFloatLE=_e?_:$,e.readFloatBE=_e?$:_):(e.writeFloatLE=o.bind(null,writeUintLE),e.writeFloatBE=o.bind(null,writeUintBE),e.readFloatLE=h.bind(null,readUintLE),e.readFloatBE=h.bind(null,readUintBE)),typeof Float64Array<"u"?(_r=new Float64Array([-0]),_n=new Uint8Array(_r.buffer),_i=_n[7]===128,e.writeDoubleLE=_i?_u:_f,e.writeDoubleBE=_i?_f:_u,e.readDoubleLE=_i?_h:_d,e.readDoubleBE=_i?_d:_h):(e.writeDoubleLE=_o.bind(null,writeUintLE,0,4),e.writeDoubleBE=_o.bind(null,writeUintBE,4,0),e.readDoubleLE=_a.bind(null,readUintLE,0,4),e.readDoubleBE=_a.bind(null,readUintBE,4,0)),e}function writeUintLE(e,o,h){o[h]=255&e,o[h+1]=e>>>8&255,o[h+2]=e>>>16&255,o[h+3]=e>>>24}function writeUintBE(e,o,h){o[h]=e>>>24,o[h+1]=e>>>16&255,o[h+2]=e>>>8&255,o[h+3]=255&e}function readUintLE(e,o){return(e[o]|e[o+1]<<8|e[o+2]<<16|e[o+3]<<24)>>>0}function readUintBE(e,o){return(e[o]<<24|e[o+1]<<16|e[o+2]<<8|e[o+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8_1=createCommonjsModule(function(e,o){var h=o;h.length=function(d){for(var g=0,_=0,$=0;$<d.length;++$)(_=d.charCodeAt($))<128?g+=1:_<2048?g+=2:(64512&_)==55296&&(64512&d.charCodeAt($+1))==56320?(++$,g+=4):g+=3;return g},h.read=function(d,g,_){if(_-g<1)return"";for(var $,j=null,_t=[],_e=0;g<_;)($=d[g++])<128?_t[_e++]=$:191<$&&$<224?_t[_e++]=(31&$)<<6|63&d[g++]:239<$&&$<365?($=((7&$)<<18|(63&d[g++])<<12|(63&d[g++])<<6|63&d[g++])-65536,_t[_e++]=55296+($>>10),_t[_e++]=56320+(1023&$)):_t[_e++]=(15&$)<<12|(63&d[g++])<<6|63&d[g++],8191<_e&&((j=j||[]).push(String.fromCharCode.apply(String,_t)),_e=0);return j?(_e&&j.push(String.fromCharCode.apply(String,_t.slice(0,_e))),j.join("")):String.fromCharCode.apply(String,_t.slice(0,_e))},h.write=function(d,g,_){for(var $,j,_t=_,_e=0;_e<d.length;++_e)($=d.charCodeAt(_e))<128?g[_++]=$:($<2048?g[_++]=$>>6|192:((64512&$)==55296&&(64512&(j=d.charCodeAt(_e+1)))==56320?($=65536+((1023&$)<<10)+(1023&j),++_e,g[_++]=$>>18|240,g[_++]=$>>12&63|128):g[_++]=$>>12|224,g[_++]=$>>6&63|128),g[_++]=63&$|128);return _-_t}}),pool_1=pool;function pool(e,o,h){var d=h||8192,g=d>>>1,_=null,$=d;return function(j){if(j<1||g<j)return e(j);d<$+j&&(_=e(d),$=0);var _t=o.call(_,$,$+=j);return 7&$&&($=1+(7|$)),_t}}var longbits=LongBits;function LongBits(e,o){this.lo=e>>>0,this.hi=o>>>0}var zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function(e){if(e===0)return zero;var o=e<0;o&&(e=-e);var h=e>>>0,d=(e-h)/4294967296>>>0;return o&&(d=~d>>>0,h=~h>>>0,4294967295<++h&&(h=0,4294967295<++d&&(d=0))),new LongBits(h,d)},LongBits.from=function(e){if(typeof e=="number")return LongBits.fromNumber(e);if(minimal.isString(e)){if(!minimal.Long)return LongBits.fromNumber(parseInt(e,10));e=minimal.Long.fromString(e)}return e.low||e.high?new LongBits(e.low>>>0,e.high>>>0):zero},LongBits.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var o=1+~this.lo>>>0,h=~this.hi>>>0;return o||(h=h+1>>>0),-(o+4294967296*h)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function(e){return minimal.Long?new minimal.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function(e){return e===zeroHash?zero:new LongBits((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0)},LongBits.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},LongBits.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},LongBits.prototype.length=function(){var e=this.lo,o=(this.lo>>>28|this.hi<<4)>>>0,h=this.hi>>>24;return h==0?o==0?e<16384?e<128?1:2:e<2097152?3:4:o<16384?o<128?5:6:o<2097152?7:8:h<128?9:10};var minimal=createCommonjsModule(function(e,o){var h=o;function d(_,$,j){for(var _t=Object.keys($),_e=0;_e<_t.length;++_e)_[_t[_e]]!==void 0&&j||(_[_t[_e]]=$[_t[_e]]);return _}function g(_){function $(j,_t){if(!(this instanceof $))return new $(j,_t);Object.defineProperty(this,"message",{get:function(){return j}}),Error.captureStackTrace?Error.captureStackTrace(this,$):Object.defineProperty(this,"stack",{value:new Error().stack||""}),_t&&d(this,_t)}return($.prototype=Object.create(Error.prototype)).constructor=$,Object.defineProperty($.prototype,"name",{get:function(){return _}}),$.prototype.toString=function(){return this.name+": "+this.message},$}h.asPromise=aspromise,h.base64=base64_1,h.EventEmitter=eventemitter,h.float=float_1,h.inquire=inquire_1,h.utf8=utf8_1,h.pool=pool_1,h.LongBits=longbits,h.isNode=!!(commonjsGlobal!==void 0&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),h.global=h.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,h.emptyArray=Object.freeze?Object.freeze([]):[],h.emptyObject=Object.freeze?Object.freeze({}):{},h.isInteger=Number.isInteger||function(_){return typeof _=="number"&&isFinite(_)&&Math.floor(_)===_},h.isString=function(_){return typeof _=="string"||_ instanceof String},h.isObject=function(_){return _&&typeof _=="object"},h.isset=h.isSet=function(_,$){var j=_[$];return!(j==null||!_.hasOwnProperty($))&&(typeof j!="object"||0<(Array.isArray(j)?j.length:Object.keys(j).length))},h.Buffer=function(){try{var _=h.inquire("buffer").Buffer;return _.prototype.utf8Write?_:null}catch{return null}}(),h._Buffer_from=null,h._Buffer_allocUnsafe=null,h.newBuffer=function(_){return typeof _=="number"?h.Buffer?h._Buffer_allocUnsafe(_):new h.Array(_):h.Buffer?h._Buffer_from(_):typeof Uint8Array>"u"?_:new Uint8Array(_)},h.Array=typeof Uint8Array<"u"?Uint8Array:Array,h.Long=h.global.dcodeIO&&h.global.dcodeIO.Long||h.global.Long||h.inquire("long"),h.key2Re=/^true|false|0|1$/,h.key32Re=/^-?(?:0|[1-9][0-9]*)$/,h.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,h.longToHash=function(_){return _?h.LongBits.from(_).toHash():h.LongBits.zeroHash},h.longFromHash=function(_,$){var j=h.LongBits.fromHash(_);return h.Long?h.Long.fromBits(j.lo,j.hi,$):j.toNumber(!!$)},h.merge=d,h.lcFirst=function(_){return _.charAt(0).toLowerCase()+_.substring(1)},h.newError=g,h.ProtocolError=g("ProtocolError"),h.oneOfGetter=function(_){for(var $={},j=0;j<_.length;++j)$[_[j]]=1;return function(){for(var _t=Object.keys(this),_e=_t.length-1;-1<_e;--_e)if($[_t[_e]]===1&&this[_t[_e]]!==void 0&&this[_t[_e]]!==null)return _t[_e]}},h.oneOfSetter=function(_){return function($){for(var j=0;j<_.length;++j)_[j]!==$&&delete this[_[j]]}},h.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},h._configure=function(){var _=h.Buffer;_?(h._Buffer_from=_.from!==Uint8Array.from&&_.from||function($,j){return new _($,j)},h._Buffer_allocUnsafe=_.allocUnsafe||function($){return new _($)}):h._Buffer_from=h._Buffer_allocUnsafe=null}}),writer=Writer,BufferWriter,LongBits$1=minimal.LongBits,base64=minimal.base64,utf8=minimal.utf8;function Op(e,o,h){this.fn=e,this.len=o,this.next=void 0,this.val=h}function noop(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create=function(){return minimal.Buffer?function(){return(Writer.create=function(){return new BufferWriter})()}:function(){return new Writer}};function writeByte(e,o,h){o[h]=255&e}function writeVarint32(e,o,h){for(;127<e;)o[h++]=127&e|128,e>>>=7;o[h]=e}function VarintOp(e,o){this.len=e,this.next=void 0,this.val=o}function writeVarint64(e,o,h){for(;e.hi;)o[h++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)o[h++]=127&e.lo|128,e.lo=e.lo>>>7;o[h++]=e.lo}function writeFixed32(e,o,h){o[h]=255&e,o[h+1]=e>>>8&255,o[h+2]=e>>>16&255,o[h+3]=e>>>24}Writer.create=create(),Writer.alloc=function(e){return new minimal.Array(e)},minimal.Array!==Array&&(Writer.alloc=minimal.pool(Writer.alloc,minimal.Array.prototype.subarray)),Writer.prototype._push=function(e,o,h){return this.tail=this.tail.next=new Op(e,o,h),this.len+=o,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer.prototype.uint64=function(e){var o=LongBits$1.from(e);return this._push(writeVarint64,o.length(),o)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(e){var o=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,o.length(),o)},Writer.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(e){var o=LongBits$1.from(e);return this._push(writeFixed32,4,o.lo)._push(writeFixed32,4,o.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(e){return this._push(minimal.float.writeFloatLE,4,e)},Writer.prototype.double=function(e){return this._push(minimal.float.writeDoubleLE,8,e)};var writeBytes=minimal.Array.prototype.set?function(e,o,h){o.set(e,h)}:function(e,o,h){for(var d=0;d<e.length;++d)o[h+d]=e[d]};Writer.prototype.bytes=function(e){var o,h=e.length>>>0;return h?(minimal.isString(e)&&(o=Writer.alloc(h=base64.length(e)),base64.decode(e,o,0),e=o),this.uint32(h)._push(writeBytes,h,e)):this._push(writeByte,1,0)},Writer.prototype.string=function(e){var o=utf8.length(e);return o?this.uint32(o)._push(utf8.write,o,e):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var e=this.head,o=this.tail,h=this.len;return this.reset().uint32(h),h&&(this.tail.next=e.next,this.tail=o,this.len+=h),this},Writer.prototype.finish=function(){for(var e=this.head.next,o=this.constructor.alloc(this.len),h=0;e;)e.fn(e.val,o,h),h+=e.len,e=e.next;return o},Writer._configure=function(e){BufferWriter=e,Writer.create=create(),BufferWriter._configure()};var writer_buffer=BufferWriter$1;function BufferWriter$1(){writer.call(this)}function writeStringBuffer(e,o,h){e.length<40?minimal.utf8.write(e,o,h):o.utf8Write?o.utf8Write(e,h):o.write(e,h)}(BufferWriter$1.prototype=Object.create(writer.prototype)).constructor=BufferWriter$1,BufferWriter$1._configure=function(){BufferWriter$1.alloc=minimal._Buffer_allocUnsafe,BufferWriter$1.writeBytesBuffer=minimal.Buffer&&minimal.Buffer.prototype instanceof Uint8Array&&minimal.Buffer.prototype.set.name==="set"?function(e,o,h){o.set(e,h)}:function(e,o,h){if(e.copy)e.copy(o,h,0,e.length);else for(var d=0;d<e.length;)o[h++]=e[d++]}},BufferWriter$1.prototype.bytes=function(e){minimal.isString(e)&&(e=minimal._Buffer_from(e,"base64"));var o=e.length>>>0;return this.uint32(o),o&&this._push(BufferWriter$1.writeBytesBuffer,o,e),this},BufferWriter$1.prototype.string=function(e){var o=minimal.Buffer.byteLength(e);return this.uint32(o),o&&this._push(writeStringBuffer,o,e),this},BufferWriter$1._configure();var reader=Reader,BufferReader,LongBits$2=minimal.LongBits,utf8$1=minimal.utf8;function indexOutOfRange(e,o){return RangeError("index out of range: "+e.pos+" + "+(o||1)+" > "+e.len)}function Reader(e){this.buf=e,this.pos=0,this.len=e.length}var create_array=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader(e);throw Error("illegal buffer")},create$1=function(){return minimal.Buffer?function(e){return(Reader.create=function(o){return minimal.Buffer.isBuffer(o)?new BufferReader(o):create_array(o)})(e)}:create_array},fU;function readLongVarint(){var e=new LongBits$2(0,0),o=0;if(!(4<this.len-this.pos)){for(;o<3;++o){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*o)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*o)>>>0,e}for(;o<4;++o)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*o)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(o=0,4<this.len-this.pos){for(;o<5;++o)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*o+3)>>>0,this.buf[this.pos++]<128)return e}else for(;o<5;++o){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*o+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,o){return(e[o-4]|e[o-3]<<8|e[o-2]<<16|e[o-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$2(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.create=create$1(),Reader.prototype._slice=minimal.Array.prototype.subarray||minimal.Array.prototype.slice,Reader.prototype.uint32=(fU=4294967295,function(){if(fU=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(fU=(fU|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(fU=(fU|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(fU=(fU|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(fU=(fU|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return fU;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return fU}),Reader.prototype.int32=function(){return 0|this.uint32()},Reader.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Reader.prototype.bool=function(){return this.uint32()!==0},Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader.prototype.bytes=function(){var e=this.uint32(),o=this.pos,h=this.pos+e;if(h>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(o,h):o===h?new this.buf.constructor(0):this._slice.call(this.buf,o,h)},Reader.prototype.string=function(){var e=this.bytes();return utf8$1.read(e,0,e.length)},Reader.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=7&this.uint32())!=4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader._configure=function(e){BufferReader=e,Reader.create=create$1(),BufferReader._configure();var o=minimal.Long?"toLong":"toNumber";minimal.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[o](!1)},uint64:function(){return readLongVarint.call(this)[o](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[o](!1)},fixed64:function(){return readFixed64.call(this)[o](!0)},sfixed64:function(){return readFixed64.call(this)[o](!1)}})};var reader_buffer=BufferReader$1;function BufferReader$1(e){reader.call(this,e)}(BufferReader$1.prototype=Object.create(reader.prototype)).constructor=BufferReader$1,BufferReader$1._configure=function(){minimal.Buffer&&(BufferReader$1.prototype._slice=minimal.Buffer.prototype.slice)},BufferReader$1.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},BufferReader$1._configure();var service=Service;function Service(e,o,h){if(typeof e!="function")throw TypeError("rpcImpl must be a function");minimal.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!o,this.responseDelimited=!!h}(Service.prototype=Object.create(minimal.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(o,h,d,g,_){if(!g)throw TypeError("request must be specified");var $=this;if(!_)return minimal.asPromise(e,$,o,h,d,g);if($.rpcImpl)try{return $.rpcImpl(o,h[$.requestDelimited?"encodeDelimited":"encode"](g).finish(),function(j,_t){if(j)return $.emit("error",j,o),_(j);if(_t!==null){if(!(_t instanceof d))try{_t=d[$.responseDelimited?"decodeDelimited":"decode"](_t)}catch(_e){return $.emit("error",_e,o),_(_e)}return $.emit("data",_t,o),_(null,_t)}$.end(!0)})}catch(j){return $.emit("error",j,o),void setTimeout(function(){_(j)},0)}else setTimeout(function(){_(Error("already ended"))},0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var rpc_1=createCommonjsModule(function(e,o){o.Service=service}),roots={},indexMinimal=createCommonjsModule(function(e,o){var h=o;function d(){h.util._configure(),h.Writer._configure(h.BufferWriter),h.Reader._configure(h.BufferReader)}h.build="minimal",h.Writer=writer,h.BufferWriter=writer_buffer,h.Reader=reader,h.BufferReader=reader_buffer,h.util=minimal,h.rpc=rpc_1,h.roots=roots,(h.configure=d)()}),minimal$1=indexMinimal;minimal$1.util.Long=long_1,minimal$1.configure(),VectorTileFeature$1.prototype.loadGeometry=function(e){var o=this._pbf;o.pos=this._geometry;for(var h,d,g=o.readVarint()+o.pos,_=1,$=0,j=0,_t=0,_e=[];o.pos<g;)if($<=0&&(_=7&(d=o.readVarint()),$=d>>3),$--,_===1||_===2)j+=o.readSVarint(),_t+=o.readSVarint(),_===1&&(h&&_e.push(h),h=[]),h.push([j*e,_t*e]);else{if(_!==7)throw new Error("unknown command "+_);h&&h.push(h[0].slice())}return h&&_e.push(h),_e};var MAX_SAFE_INTEGER=long_1.fromNumber(Number.MAX_SAFE_INTEGER,!0),MIN_SAFE_INTEGER=long_1.fromNumber(Number.MIN_SAFE_INTEGER,!1);function readLong(e,o,h){o.pos=e.pos;var d=h.call(o);return e.pos=o.pos,long_1.isLong(d)?0<d.comp(MAX_SAFE_INTEGER)||d.comp(MIN_SAFE_INTEGER)<0?d.toString():d.toNumber():d}var VectorTileLayer=function(){function e(o,h){_classCallCheck(this,e),this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],this._protobufjsReader=minimal$1.Reader.create(o.buf),o.readFields(readLayer,this,h),this.length=this._features.length}return _createClass(e,[{key:"feature",value:function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var h=this._pbf.readVarint()+this._pbf.pos;return new VectorTileFeature$1(this._pbf,h,this.extent,this._keys,this._values)}}]),e}();function readLayer(e,o,h){e===15?o.version=h.readVarint():e===1?o.name=h.readString():e===5?o.extent=h.readVarint():e===2?o._features.push(h.pos):e===3?o._keys.push(h.readString()):e===4&&o._values.push(readValueMessage(h,o._protobufjsReader))}function readValueMessage(e,o){for(var g=null,h=e.readVarint()+e.pos;e.pos<h;)var d=e.readVarint()>>3,g=d==1?e.readString():d==2?e.readFloat():d==3?e.readDouble():d==4?readLong(e,o,o.int64):d==5?readLong(e,o,o.uint64):d==6?readLong(e,o,o.sint64):d==7?e.readBoolean():null;return g}var VectorTile=function e(o,h){_classCallCheck(this,e),this.layers=o.readFields(readTile,{},h)};function readTile(e,o,h){var d;e!==3||(d=new VectorTileLayer(h,h.readVarint()+h.pos)).length&&(o[d.name]=d)}function getLayersFromMVT(e){var o={};for(var h in e.layers){for(var d=e.layers[h],g=[],_=Geo$1.tile_scale/d.extent,$=0,j=d.length;$<j;$++){var _t=d.feature($),_e=VectorTileFeature$1.types[_t.type],_r=_t.loadGeometry(_),_n=null;switch(_e){case"Point":_n=decodePoint({coordinates:_r});break;case"LineString":_n=_r.length===1?{type:_e,coordinates:_r[0]}:{type:"MultiLineString",coordinates:_r};break;case"Polygon":_n=decodeMultiPolygon({coordinates:_r})}_n&&_n.coordinates&&g.push({type:"Feature",geometry:_n,properties:_t.properties})}o[h]={type:"FeatureCollection",features:g}}return o}var GeomType={UNKNOWN:0,POINT:1,LINESTRING:2,POLYGON:3};function parseGeoJSONVectorTile(e){var o=[],h=e&&e.features;if(h)for(var d=0,g=h.length;d<g;d++){var _=h[d],$=_.type,j=void 0;switch($){case GeomType.POINT:j={type:"MultiPoint",coordinates:_.geometry.map(function(_t){return _t.slice()})};break;case GeomType.LINESTRING:case GeomType.POLYGON:if(j={type:"MultiLineString",coordinates:_.geometry.map(function(_t){return _t.map(function(_e){return _e.slice()})})},$===GeomType.POLYGON&&(j=decodeMultiPolygon(j))==null)continue;break;default:continue}o.push({id:_.id,type:"Feature",geometry:j,properties:_.tags})}return{type:"FeatureCollection",features:o}}function decodeMultiPolygon(e){for(var o,h=[],d=[],g=0,_=e.coordinates.length;g<_;g++){var $=e.coordinates[g],j=Geo$1.ringWinding($);j!=null&&(j===(o=o||j)&&d.length&&(h.push(d),d=[]),d.push($))}return 0<d.length&&h.push(d),h.length===1?(e.type="Polygon",e.coordinates=h[0]):1<h.length?(e.type="MultiPolygon",e.coordinates=h):e=null,e}function decodePoint(e){var o=e.coordinates.length;if(1<o){e.type="MultiPoint";for(var h=[],d=0;d<o;d++)h.push(e.coordinates[d][0]);e.coordinates=h}else e.type="Point",e.coordinates=e.coordinates[0][0];return e}var EMPTY_FEATURE_COLLECTION={type:"FeatureCollection",features:[]},MVTSource=function(){_inherits(o,MapsJsSource);var e=_createSuper(o);function o(h,d){return _classCallCheck(this,o),h.tiled=!0,e.call(this,h,d)}return _createClass(o,[{key:"fetchTile",value:function(h,d,g){return this.provider?this.provider.requestTileAsPromise(h,d,g).then(function(_){return _.data}):Promise.resolve()}},{key:"_load",value:function(h){var d=this,g=Geo$1.wrapTile(h.coords,{x:!0,y:!0}),_=g.x,$=g.y,j=g.z;return WorkerBroker.postMessage(this.target_name+".fetchTile",_,$,j).then(function(_t){var _e;return _t instanceof ArrayBuffer?(_e=new pbf(new Uint8Array(_t)),h.source_data.layers=getLayersFromMVT(new VectorTile(_e))):_t?h.source_data.error=_t:h.source_data.layers={_default:EMPTY_FEATURE_COLLECTION},d._postProcessTile(h),h})}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),o}();DataSource.register(MVTSource,"MVT"),DataSource.register(MVTSource,"OMV");var csscolorparser=createCommonjsModule(function(e,o){var h={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function d(_t){return(_t=Math.round(_t))<0?0:255<_t?255:_t}function g(_t){return _t<0?0:1<_t?1:_t}function _(_t){return _t[_t.length-1]==="%"?d(parseFloat(_t)/100*255):d(parseInt(_t))}function $(_t){return _t[_t.length-1]==="%"?g(parseFloat(_t)/100):g(parseFloat(_t))}function j(_t,_e,_r){return _r<0?_r+=1:1<_r&&--_r,6*_r<1?_t+(_e-_t)*_r*6:2*_r<1?_e:3*_r<2?_t+(_e-_t)*(2/3-_r)*6:_t}try{o.parseCSSColor=function(_t){var _e,_r=_t.replace(/ /g,"").toLowerCase();if(_r in h)return h[_r].slice();if(_r[0]==="#")return _r.length===4?0<=(_e=parseInt(_r.substr(1),16))&&_e<=4095?[(3840&_e)>>4|(3840&_e)>>8,240&_e|(240&_e)>>4,15&_e|(15&_e)<<4,1]:null:_r.length===7&&0<=(_e=parseInt(_r.substr(1),16))&&_e<=16777215?[(16711680&_e)>>16,(65280&_e)>>8,255&_e,1]:null;var _n=_r.indexOf("("),_i=_r.indexOf(")");if(_n!==-1&&_i+1===_r.length){var _o=_r.substr(0,_n),_a=_r.substr(_n+1,_i-(_n+1)).split(","),_u=1;switch(_o){case"rgba":if(_a.length!==4)return null;_u=$(_a.pop());case"rgb":return _a.length!==3?null:[_(_a[0]),_(_a[1]),_(_a[2]),_u];case"hsla":if(_a.length!==4)return null;_u=$(_a.pop());case"hsl":if(_a.length!==3)return null;var _f=(parseFloat(_a[0])%360+360)%360/360,_h=$(_a[1]),_d=$(_a[2]),ty=_d<=.5?_d*(_h+1):_d+_h-_d*_h,ey=2*_d-ty;return[d(255*j(ey,ty,_f+1/3)),d(255*j(ey,ty,_f)),d(255*j(ey,ty,_f-1/3)),_u];default:return null}}return null}}catch{}});csscolorparser.parseCSSColor;var StyleParser={},clampPositive=function(e){return Math.max(e,0)},noNaN=function(e){return isNaN(e)?0:e},parseNumber=function(e){return Array.isArray(e)?e.map(parseFloat).map(noNaN):noNaN(parseFloat(e))},parsePositiveNumber=function(e){return Array.isArray(e)?e.map(parseNumber).map(clampPositive):clampPositive(parseNumber(e))};Object.assign(StyleParser,{clampPositive,noNaN,parseNumber,parsePositiveNumber}),StyleParser.wrapFunction=function(e){return`
        var feature = context.feature.properties;
        var global = context.global;
        var $zoom = context.zoom;
        var $layer = context.layer;
        var $source = context.source;
        var sources = context.sources;
        var $geometry = context.geometry;
        var $meters_per_pixel = context.meters_per_pixel;

        var val = (function(){ `.concat(e,` }());

        if (typeof val === 'number' && isNaN(val)) {
            val = null; // convert NaNs to nulls
        }

        return val;
    `)},StyleParser.zeroPair=Object.freeze([0,0]),StyleParser.defaults={color:[1,1,1,1],width:1,size:1,extrude:!1,height:20,min_height:0,order:0,z:0,outline:{color:[0,0,0,0],width:0},material:{ambient:1,diffuse:1}},StyleParser.macros={"Style.color.pseudoRandomColor":function(){return[parseInt(feature.id,16)/100%1*.7,parseInt(feature.id,16)/1e4%1*.7,parseInt(feature.id,16)/1e6%1*.7,1]},"Style.color.randomColor":function(){return[.7*Math.random(),.7*Math.random(),.7*Math.random(),1]}},StyleParser.getFeatureParseContext=function(e,o,h,d){return{feature:e,tile:o,global:h,sources:d,zoom:o.style_zoom,geometry:Geo$1.geometryType(e.geometry.type),meters_per_pixel:o.meters_per_pixel,meters_per_pixel_sq:o.meters_per_pixel_sq,units_per_meter_overzoom:o.units_per_meter_overzoom}};var CACHE_TYPE={STATIC:0,DYNAMIC:1,ZOOM:2};StyleParser.CACHE_TYPE=CACHE_TYPE,StyleParser.createPropertyCache=function(e){var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;if(e!=null){if(e.value)return{value:e.value,zoom:e.zoom?{}:null,type:e.type};var h={value:e,type:CACHE_TYPE.STATIC};return Array.isArray(h.value)&&Array.isArray(h.value[0])?(h.zoom={},h.type=CACHE_TYPE.ZOOM):typeof h.value=="function"&&(h.type=CACHE_TYPE.DYNAMIC),typeof o=="function"&&(h.zoom?h.value=h.value.map(function(d,g){return[d[0],o(d[1],g)]}):typeof h.value!="function"&&(h.value=o(h.value,0))),h}},StyleParser.createColorPropertyCache=function(e){return StyleParser.createPropertyCache(e,function(o){return o==="Style.color.pseudoRandomColor"?Utils$1.stringToFunction(StyleParser.wrapFunction(StyleParser.macros["Style.color.pseudoRandomColor"])):o==="Style.color.randomColor"?StyleParser.macros["Style.color.randomColor"]:o})};var isPercent=function(e){return typeof e=="string"&&e[e.length-1]==="%"},isRatio=function(e){return e==="auto"},isComputed=function(e){return isPercent(e)||isRatio(e)},dualRatioError="'size' can specify either width or height as derived from aspect ratio, but not both";StyleParser.createPointSizePropertyCache=function(e){var o=null,h=null;if(isPercent(e))o=[!0];else if(Array.isArray(e)){if(Array.isArray(e[0])){if(e.some(function(d){return Array.isArray(d[1])?d[1].some(function(g){return isComputed(g)}):isPercent(d[1])})&&(o=e.map(function(d){return Array.isArray(d[1])?d[1].map(function(g){return isPercent(g)}):isPercent(d[1])}),(h=e.map(function(d){return Array.isArray(d[1])&&d[1].map(function(g){return isRatio(g)})})).some(function(d){return Array.isArray(d)&&d.every(function(g){return g})})))throw dualRatioError}else if(e.some(isComputed)&&(o=[e.map(isPercent)],(h=[e.map(isRatio)])[0].every(function(d){return d})))throw dualRatioError}return o?((e={value:e}).has_pct=o,e.has_ratio=h,e.sprites={}):e=StyleParser.createPropertyCache(e,parsePositiveNumber),e},StyleParser.evalCachedPointSizeProperty=function(e,o,h){return e.has_pct||e.has_ratio?o?(e.sprites[o.sprite]||(e.sprites[o.sprite]=StyleParser.createPropertyCache(e.value,function(d,g){return Array.isArray(d)?(d=d.map(function(_,$){return e.has_ratio[g][$]?_:parsePositiveNumber(_)}).map(function(_,$){return e.has_pct[g][$]?o.css_size[$]*_/100:_}),e.has_ratio[g][0]?d[0]=d[1]*o.aspect:e.has_ratio[g][1]&&(d[1]=d[0]/o.aspect)):(d=parsePositiveNumber(d),d=e.has_pct[g]?o.css_size.map(function(_){return _*d/100}):[d,d]),d})),StyleParser.evalCachedProperty(e.sprites[o.sprite],h)):void 0:StyleParser.evalCachedProperty(e,h)},StyleParser.evalCachedProperty=function(e,o){if(e!=null)return e.dynamic?e.dynamic(o):e.static?e.static:e.zoom&&e.zoom[o.zoom]?e.zoom[o.zoom]:typeof e.value!="function"?Array.isArray(e.value)&&Array.isArray(e.value[0])?(e.zoom=e.zoom||{},e.zoom[o.zoom]=Utils$1.interpolate(o.zoom,e.value),e.zoom[o.zoom]):(e.static=e.value,e.static):(e.dynamic=e.value,e.dynamic(o))},StyleParser.convertUnits=function(e,o){if(e.val!=null)return e.units==="px"?e.val*Geo$1.metersPerPixel(o.zoom):e.val;if(typeof e=="string")e.trim().slice(-2)==="px"?(e=parseNumber(e),e*=Geo$1.metersPerPixel(o.zoom)):e=parseNumber(e);else if(Array.isArray(e))return Array.isArray(e[0])?e.map(function(h){return[h[0],StyleParser.convertUnits(h[1],o)]}):e.map(function(h){return StyleParser.convertUnits(h,o)});return e},StyleParser.parseUnits=function(e){var o={val:parseNumber(e)};return o.val!==0&&typeof e=="string"&&e.trim().slice(-2)==="px"&&(o.units="px"),o},StyleParser.evalCachedDistanceProperty=function(e,o){return e.dynamic?e.dynamic(o):e.zoom&&e.zoom[o.zoom]?e.zoom[o.zoom]:typeof e.value!="function"?e.zoom?(e.zoom[o.zoom]=Utils$1.interpolate(o.zoom,e.value,function(h){return StyleParser.convertUnits(h,o)}),e.zoom[o.zoom]):StyleParser.convertUnits(e.value,o):(e.dynamic=e.value,e.dynamic(o))},StyleParser.string_colors={},StyleParser.colorForString=function(e){if(StyleParser.string_colors[e])return StyleParser.string_colors[e];var o=null;return e!=="none"&&((o=csscolorparser.parseCSSColor(e))&&o.length===4?(o[0]/=255,o[1]/=255,o[2]/=255):o=StyleParser.defaults.color),StyleParser.string_colors[e]=o},StyleParser.evalCachedColorProperty=function(e){var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(e.dynamic){var h=e.dynamic(o);return typeof h=="string"&&(h=StyleParser.colorForString(h)),h&&h[3]==null&&(h[3]=1),h}if(e.static)return e.static;if(e.zoom&&e.zoom[o.zoom])return e.zoom[o.zoom];if(typeof e.value=="function"){e.dynamic=e.value;var d=e.dynamic(o);return typeof d=="string"&&(d=StyleParser.colorForString(d)),d&&d[3]==null&&(d[3]=1),d}if(typeof e.value=="string")return e.static=StyleParser.colorForString(e.value),e.static;if(e.zoom){if(!e.zoom_preprocessed){for(var g=0;g<e.value.length;g++){var _=e.value[g];_&&typeof _[1]=="string"&&(_[1]=StyleParser.colorForString(_[1]))}e.zoom_preprocessed=!0}return e.zoom[o.zoom]=Utils$1.interpolate(o.zoom,e.value),e.zoom[o.zoom][3]=e.zoom[o.zoom][3]||1,e.zoom[o.zoom]}return e.static=e.value.map(function($){return $}),e.static&&e.static[3]==null&&(e.static[3]=1),e.static},StyleParser.parseColor=function(e){var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(typeof e=="function"&&(e=e(o)),typeof e=="string")e=StyleParser.colorForString(e);else if(Array.isArray(e)&&Array.isArray(e[0])){for(var h=0;h<e.length;h++){var d=e[h];typeof d[1]=="string"&&(d[1]=StyleParser.colorForString(d[1]))}o.zoom&&(e=Utils$1.interpolate(o.zoom,e))}return Array.isArray(e)?(e=e.map(function(g){return g}))[3]==null&&(e[3]=1):e=[0,0,0,1],e},StyleParser.calculateOrder=function(e,o){return typeof e=="function"?e=e(o):typeof e=="string"&&(e=o.feature.properties[e]?o.feature.properties[e]:parsePositiveNumber(e)),e},StyleParser.evalProperty=function(e,o){return typeof e=="function"?e(o):e};var RepeatGroup=function(){function e(o,h){_classCallCheck(this,e),this.key=o,this.repeat_dist=h,this.repeat_dist_sq=this.repeat_dist*this.repeat_dist,this.positions=[]}return _createClass(e,[{key:"check",value:function(o){for(var h=o.position,d=0;d<this.positions.length;d++){var g=this.positions[d],_=h[0]-g[0],$=h[1]-g[1],j=_*_+$*$;if(j<this.repeat_dist_sq)return{dist_sq:j,repeat_dist_sq:this.repeat_dist_sq}}}},{key:"add",value:function(o){o&&o.position&&this.positions.push(o.position)}}],[{key:"clear",value:function(o){this.groups[o]={}}},{key:"check",value:function(o,h,d){if(h.repeat_distance&&h.repeat_group&&this.groups[d][h.repeat_group])return this.groups[d][h.repeat_group].check(o)}},{key:"add",value:function(o,h,d){h.repeat_distance&&h.repeat_group&&(this.groups[d][h.repeat_group]==null&&(this.groups[d][h.repeat_group]=new e(h.repeat_group,h.repeat_distance*h.repeat_scale)),this.groups[d][h.repeat_group].add(o))}}]),e}();RepeatGroup.groups={};var GridIndex=function(){function e(o,h,d){_classCallCheck(this,e);var g=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(o/d),this.yCellCount=Math.ceil(h/d);for(var $=0;$<this.xCellCount*this.yCellCount;$++)g.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=h,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}return _createClass(e,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(o,h,d,g,_){this._forEachCell(h,d,g,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(h),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(_)}},{key:"insertCircle",value:function(o,h,d,g){this._forEachCell(h-g,d-g,h+g,d+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(h),this.circles.push(d),this.circles.push(g)}},{key:"insertCircleList",value:function(o,h){for(var d=0;d<h.length-2;d+=3)this.insertCircle("".concat(o,"/").concat(d),h[d],h[d+1],h[d+2])}},{key:"_insertBoxCell",value:function(o,h,d,g,_,$){this.boxCells[_].push($)}},{key:"_insertCircleCell",value:function(o,h,d,g,_,$){this.circleCells[_].push($)}},{key:"_query",value:function(o,h,d,g,_,$){if(d<0||o>this.width||g<0||h>this.height)return!_&&[];var j=[];if(o<=0&&h<=0&&this.width<=d&&this.height<=g){if(_)return!0;for(var _t=0;_t<this.boxKeys.length;_t++)j.push({key:this.boxKeys[_t],x1:this.bboxes[4*_t],y1:this.bboxes[4*_t+1],x2:this.bboxes[4*_t+2],y2:this.bboxes[4*_t+3]});for(var _e=0;_e<this.circleKeys.length;_e++){var _r=this.circles[3*_e],_n=this.circles[3*_e+1],_i=this.circles[3*_e+2];j.push({key:this.circleKeys[_e],x1:_r-_i,y1:_n-_i,x2:_r+_i,y2:_n+_i})}return $?j.filter($):j}var _o={hitTest:_,seenUids:{box:{},circle:{}}};return this._forEachCell(o,h,d,g,this._queryCell,j,_o,$),_?0<j.length:j}},{key:"_queryCircle",value:function(o,h,d,g,_){var $=o-d,j=o+d,_t=h-d,_e=h+d;if(j<0||$>this.width||_e<0||_t>this.height)return!g&&[];var _r=[],_n={hitTest:g,circle:{x:o,y:h,radius:d},seenUids:{box:{},circle:{}}};return this._forEachCell($,_t,j,_e,this._queryCellCircle,_r,_n,_),g?0<_r.length:_r}},{key:"query",value:function(o,h,d,g,_){return this._query(o,h,d,g,!1,_)}},{key:"hitTest",value:function(o,h,d,g,_){return this._query(o,h,d,g,!0,_)}},{key:"hitTestCircle",value:function(o,h,d,g){return this._queryCircle(o,h,d,!0,g)}},{key:"hitTestCircleList",value:function(o,h){for(var d=0;d<o.length-2;d+=3)if(this.hitTestCircle(o[d],o[d+1],o[d+2],h))return!0;return!1}},{key:"_queryCell",value:function(o,h,d,g,_,$,j,_t){var _e=j.seenUids,_r=this.boxCells[_];if(_r!==null){var _n,_i=this.bboxes,_o=_createForOfIteratorHelper(_r);try{for(_o.s();!(_n=_o.n()).done;){var _a=_n.value;if(!_e.box[_a]){_e.box[_a]=!0;var _u=4*_a;if(o<=_i[2+_u]&&h<=_i[3+_u]&&d>=_i[0+_u]&&g>=_i[1+_u]&&(!_t||_t(this.boxKeys[_a]))){if(j.hitTest)return $.push(!0),!0;$.push({key:this.boxKeys[_a],x1:_i[_u],y1:_i[1+_u],x2:_i[2+_u],y2:_i[3+_u]})}}}}catch(yy){_o.e(yy)}finally{_o.f()}}var _f=this.circleCells[_];if(_f!==null){var _h,_d=this.circles,ty=_createForOfIteratorHelper(_f);try{for(ty.s();!(_h=ty.n()).done;){var ey=_h.value;if(!_e.circle[ey]){_e.circle[ey]=!0;var sy=3*ey;if(this._circleAndRectCollide(_d[sy],_d[1+sy],_d[2+sy],o,h,d,g)&&(!_t||_t(this.circleKeys[ey]))){if(j.hitTest)return $.push(!0),!0;var ny=_d[sy],uy=_d[1+sy],fy=_d[2+sy];$.push({key:this.circleKeys[ey],x1:ny-fy,y1:uy-fy,x2:ny+fy,y2:uy+fy})}}}}catch(yy){ty.e(yy)}finally{ty.f()}}}},{key:"_queryCellCircle",value:function(o,h,d,g,_,$,j,_t){var _e=j.circle,_r=j.seenUids,_n=this.boxCells[_];if(_n!==null){var _i,_o=this.bboxes,_a=_createForOfIteratorHelper(_n);try{for(_a.s();!(_i=_a.n()).done;){var _u=_i.value;if(!_r.box[_u]){_r.box[_u]=!0;var _f=4*_u;if(this._circleAndRectCollide(_e.x,_e.y,_e.radius,_o[0+_f],_o[1+_f],_o[2+_f],_o[3+_f])&&(!_t||_t(this.boxKeys[_u])))return $.push(!0),!0}}}catch(uy){_a.e(uy)}finally{_a.f()}}var _h=this.circleCells[_];if(_h!==null){var _d,ty=this.circles,ey=_createForOfIteratorHelper(_h);try{for(ey.s();!(_d=ey.n()).done;){var sy=_d.value;if(!_r.circle[sy]){_r.circle[sy]=!0;var ny=3*sy;if(this._circlesCollide(ty[ny],ty[1+ny],ty[2+ny],_e.x,_e.y,_e.radius)&&(!_t||_t(this.circleKeys[sy])))return $.push(!0),!0}}}catch(uy){ey.e(uy)}finally{ey.f()}}}},{key:"_forEachCell",value:function(o,h,d,g,_,$,j,_t){for(var _e=this._convertToXCellCoord(o),_r=this._convertToYCellCoord(h),_n=this._convertToXCellCoord(d),_i=this._convertToYCellCoord(g),_o=_e;_o<=_n;_o++)for(var _a=_r;_a<=_i;_a++){var _u=this.xCellCount*_a+_o;if(_.call(this,o,h,d,g,_u,$,j,_t))return}}},{key:"_convertToXCellCoord",value:function(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}},{key:"_convertToYCellCoord",value:function(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}},{key:"_circlesCollide",value:function(o,h,d,g,_,$){var j=g-o,_t=_-h,_e=d+$;return j*j+_t*_t<_e*_e}},{key:"_circleAndRectCollide",value:function(o,h,d,g,_,$,j){var _t=($-g)/2,_e=Math.abs(o-(g+_t));if(_t+d<_e)return!1;var _r=(j-_)/2,_n=Math.abs(h-(_+_r));if(_r+d<_n)return!1;if(_e<=_t||_n<=_r)return!0;var _i=_e-_t,_o=_n-_r;return _i*_i+_o*_o<=d*d}}]),e}(),CollisionUtils={toDiscardLabel:function(e,o,h,d){var g;if(d&&(g=function(uy){return uy!==d.id}),!o){if(e.type==="point"&&!e.angle){var _=e.getAABB(),$=_.left,j=_.top,_t=_.right,_e=_.bottom;if(h.hitTest($,-j,_t,-_e,g)){if(Array.isArray(e.layout.anchor))for(var _r=1;_r<e.layout.anchor.length;_r++){e.setAnchor(e.layout.anchor[_r]);var _n=e.getAABB(),_i=_n.left,_o=_n.top,_a=_n.right,_u=_n.bottom;if(!h.hitTest(_i,-_o,_a,-_u,g))return!1}return!0}return!1}var _f=e.getBoundingCircles();return h.hitTestCircleList(_f,g)}if(o){if(e.type==="point"&&!e.isFlat()){var _h=e.getScreenSpaceBoundingBox(),_d=_h.left,ty=_h.top,ey=_h.right,sy=_h.bottom;return h.hitTest(_d,ty,ey,sy,g)}var ny=e.getBoundingCircles();return h.hitTestCircleList(ny,g)}return!1},addLabel:function(e,o,h){var d,g,_,$,j,_t,_e,_r,_n,_i,_o,_a,_u=e.id;e.placed=!0,o||(e.type!=="point"||e.angle?(d=e.getBoundingCircles(),h.insertCircleList(_u,d)):(_=(g=e.getAABB()).left,$=g.top,j=g.right,_t=g.bottom,h.insert(_u,_,-$,j,-_t))),o&&(e.type!=="point"||e.isFlat()?(_e=e.getBoundingCircles(),h.insertCircleList(_u,_e)):(_n=(_r=e.getScreenSpaceBoundingBox()).left,_i=_r.top,_o=_r.right,_a=_r.bottom,h.insert(_u,_n,_i,_o,_a)))}},Collision={tiles:{},startTile:function(e,o){var h=1<arguments.length&&o!==void 0?o:{},d=h.apply_repeat_groups,g=d===void 0||d,_=h.return_hidden,$=_!==void 0&&_,j=h.grid_index,_t=j===void 0?null:j,_e=this.tiles[e]={grid_index:_t||new GridIndex(Geo$1.tile_scale,Geo$1.tile_scale,240),objects:{},labels:{},styles:{},repeat:g,return_hidden:$};_e.complete==null&&(_e.complete=new Promise(function(_r,_n){_e.resolve=_r,_e.reject=_n}))},resetTile:function(e){delete this.tiles[e]},abortTile:function(e){this.tiles[e]&&this.tiles[e].resolve&&this.tiles[e].resolve([]),this.resetTile(e)},addStyle:function(e,o){this.tiles[o].styles[e]=!0},collide:function(e,o,h){var d=this.tiles[h];if(!d)return Promise.resolve([]);for(var g=d.objects,_=0;_<e.length;_++){var $=e[_],j=$.label.layout.priority;g[j]=g[j]||{},g[j][o]=g[j][o]||[],g[j][o].push($)}return delete d.styles[o],Object.keys(d.styles).length===0&&this.endTile(h),d.complete.then(function(){return d.resolve=null,d.labels[o]||[]})},endTile:function(e){var o=this.tiles[e],h=o.labels;o.repeat&&RepeatGroup.clear(e);for(var d=Object.keys(o.objects).sort(function(_r,_n){return _r-_n}),g=0;g<d.length;g++){var _=o.objects[d[g]];if(_)for(var $ in _){var j=_[$];h[$]=h[$]||[];for(var _t=0;_t<j.length;_t++){var _e=j[_t];this.canBePlaced(_e,e,_e.linked,o)?_e.linked?this.canBePlaced(_e.linked,e,_e,o)?(_e.show=!0,(_e.label.breach||_e.linked.label.breach)&&(_e.label.breach=!0,_e.linked.label.breach=!0),h[$].push(_e),this.place(_e,e,o),this.place(_e.linked,e,o)):o.return_hidden&&(_e.show=!1,h[$].push(_e)):(_e.show=!0,h[$].push(_e),this.place(_e,e,o)):o.return_hidden&&(_e.show=!1,h[$].push(_e))}}}delete this.tiles[e],o.resolve()},canBePlaced:function(e,o,h,d){var g=2<arguments.length&&h!==void 0?h:null,_=(3<arguments.length&&d!==void 0?d:{}).repeat,$=_===void 0||_,j=e.label,_t=e.label.layout;if(j.placed!==null)return j.placed;var _e=this.tiles[o].grid_index;if(_t.collide&&CollisionUtils.toDiscardLabel(j,o==="main",_e,g&&g.label))_t.collide&&(j.placed=!1);else{if(!($&&RepeatGroup.check(j,_t,o)))return!0;j.placed=!1}return j.placed},place:function(e,o,h){var d=e.label,g=h.repeat,_=g===void 0||g;d.placed===null&&(_&&RepeatGroup.add(d,d.layout,o),CollisionUtils.addLabel(d,o==="main",this.tiles[o].grid_index))}},Task={id:0,queue:[],max_time:20,start_time:null,state:{},ignore_user_moving_view:!1,_ignoreViewMoveWithDebounce:debounce(function(){Task.ignore_user_moving_view=!0},0,500),add:function(e){e.id=Task.id++,e.max_time=e.max_time||Task.max_time,e.pause_factor=e.pause_factor||1;var o=new Promise(function(h,d){e.resolve=h,e.reject=d});return e.promise=o,e.total_elapsed=0,e.stats={calls:0},this.queue.push(e),this.start_time=this.start_time||performance.now(),this.elapsed=performance.now()-this.start_time,this.elapsed<Task.max_time&&this.process(e),e.promise},remove:function(e){var o=this.queue.indexOf(e);-1<o&&this.queue.splice(o,1)},process:function(e){if(!this.state.user_moving_view||e.user_moving_view!==!1||this.ignore_user_moving_view)return e.pause?(e.pause--,!0):(e.stats.calls++,e.start_time=performance.now(),e.run(e));Task._ignoreViewMoveWithDebounce()},processAll:function(){this.start_time=this.start_time||performance.now(),this.ignore_user_moving_view&&!this.hasPendingTasks()&&(this.ignore_user_moving_view=!1);for(var e=0;e<this.queue.length;e++){var o=this.queue[e];if(this.process(o)!==!0&&(o.pause||(o.pause=o.elapsed>o.max_time?o.pause_factor:0),o.total_elapsed+=o.elapsed),this.elapsed=performance.now()-this.start_time,this.elapsed>=Task.max_time){this.start_time=null;break}}},finish:function(e,o){return e.elapsed=performance.now()-e.start_time,e.total_elapsed+=e.elapsed,this.remove(e),e.resolve(o),e.promise},cancel:function(e){var o;e.cancel instanceof Function&&(o=e.cancel(e)),e.resolve(o||{})},shouldContinue:function(e){return e.elapsed=performance.now()-e.start_time,this.elapsed=performance.now()-this.start_time,e.elapsed<e.max_time&&this.elapsed<Task.max_time},removeForTile:function(e){for(var o=this.queue.length-1;0<=o;o--)this.queue[o].tile_id===e&&(this.cancel(this.queue[o]),this.queue.splice(o,1))},setState:function(e){this.state=e},hasPendingTasks:function(){return!!this.queue.length}};function sliceOptions(e){return{coords:e.coords,uid:e.uid,filtering:e.filtering,sprites:e.sprites,url:e.url,element:e.element,data:e.data,width:e.width,height:e.height,density:e.density,repeat:e.repeat,TEXTURE_WRAP_S:e.TEXTURE_WRAP_S,TEXTURE_WRAP_T:e.TEXTURE_WRAP_T,UNPACK_FLIP_Y_WEBGL:e.UNPACK_FLIP_Y_WEBGL,UNPACK_PREMULTIPLY_ALPHA_WEBGL:e.UNPACK_PREMULTIPLY_ALPHA_WEBGL}}var Texture=function(){function e(o,h,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};_classCallCheck(this,e),g=sliceOptions(g),this.gl=o,this.texture=o.createTexture(),this.texture&&(this.valid=!0),this.manager=d,this.bind(),this.name=h,this.retain_count=0,this.config_type=null,this.loading=null,this.loaded=!1,this.filtering=g.filtering,this.density=g.density||1,this.sprites=g.sprites,this.texcoords={},this.sizes={},this.css_sizes={},this.aspects={},this._byte_length=0,this.setData(1,1,new Uint8Array([0,0,0,0]),{filtering:"nearest"}),this.loaded=!1,this.manager.textures[this.name]&&(this.retain_count=this.manager.textures[this.name].retain_count,this.manager.textures[this.name].retain_count=0,this.manager.textures[this.name].destroy()),(this.manager.textures[this.name]=this).manager.texture_configs[this.name]=JSON.stringify(Object.assign({name:h},g)),this.load(g),log("trace","creating Texture ".concat(this.name))}return _createClass(e,[{key:"destroy",value:function(o){var h=(0<arguments.length&&o!==void 0?o:{}).force;0<this.retain_count&&!h?log("error","Texture '".concat(this.name,"': destroying texture with retain count of '").concat(this.retain_count,"'")):this.valid&&(this.gl.deleteTexture(this.texture),this.texture=null,delete this.data,this.data=null,delete this.manager.textures[this.name],delete this.manager.texture_configs[this.name],this.valid=!1,this._byte_length=0,log("trace","destroying Texture ".concat(this.name)))}},{key:"retain",value:function(){this.retain_count++}},{key:"release",value:function(){this.retain_count<=0&&log("error","Texture '".concat(this.name,"': releasing texture with retain count of '").concat(this.retain_count,"'")),this.retain_count--,this.retain_count<=0&&this.destroy()}},{key:"bind",value:function(o){var h=0<arguments.length&&o!==void 0?o:0;this.valid&&(this.manager.activeUnit!==h&&(this.gl.activeTexture(this.gl.TEXTURE0+h),this.manager.activeUnit=h,this.manager.boundTexture=null),this.manager.boundTexture!==this.texture&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.manager.boundTexture=this.texture))}},{key:"load",value:function(o){var h=this;return o?(this.loading=null,typeof o.url=="string"?(this.config_type="url",this.setUrl(o.url,o)):o.element?(this.config_type="element",this.setElement(o.element,o)):o.data&&o.width&&o.height&&(this.config_type="data",this.setData(o.width,o.height,o.data,o)),this.loading=this.loading&&this.loading.then(function(){return h.calculateSprites(),h})||Promise.resolve(this),this.loading):this.loading||Promise.resolve(this)}},{key:"setUrl",value:function(o,h){var d=this,g=1<arguments.length&&h!==void 0?h:{};if(this.valid)return this.url=o,this.loading=new Promise(function(_,$){var j=new Image;j.onload=function(){try{d.setElement(j,g)}catch(_t){d.loaded=!1,log("warn","Texture '".concat(d.name,"': failed to load url: '").concat(d.url,"'"),_t,g),d.manager.trigger("warning",{message:"Failed to load texture from ".concat(d.url),error:_t,texture:g})}d.loaded=!0,_(d)},j.onerror=function(_t){d.loaded=!1,log("warn","Texture '".concat(d.name,"': failed to load url: '").concat(d.url,"'"),_t,g),d.manager.trigger("warning",{message:"Failed to load texture from ".concat(d.url),error:_t,texture:g}),_(d)},Utils$1.isSafari()&&d.url.slice(0,5)==="data:"||(j.crossOrigin="anonymous"),j.src=d.url}),this.loading}},{key:"setData",value:function(o,h,d,g){var _=3<arguments.length&&g!==void 0?g:{};return this.width=o,this.height=h,Array.isArray(d)&&(d=new Uint8Array(d)),this.update(d,_),this.setFiltering(_),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"setElement",value:function(o,h){var d,g=o;return typeof o=="string"&&(o=document.querySelector(o)),o instanceof HTMLCanvasElement||o instanceof HTMLImageElement||o instanceof HTMLVideoElement?(this.update(o,h),this.setFiltering(h)):(this.loaded=!1,d="the 'element' parameter (`element: ".concat(JSON.stringify(g),"`) must be a CSS "),d+="selector string, or a <canvas>, <image> or <video> object",log("warn","Texture '".concat(this.name,"': ").concat(d),h),this.manager.trigger("warning",{message:"Failed to load texture because ".concat(d),texture:h})),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"update",value:function(o,h){var d=1<arguments.length&&h!==void 0?h:{};this.valid&&(this.bind(),o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof HTMLImageElement&&o.complete?(this.width=o.width,this.height=o.height,this._byte_length=this.width*this.height*4,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,d.UNPACK_FLIP_Y_WEBGL!==!1),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d.UNPACK_PREMULTIPLY_ALPHA_WEBGL||!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,o)):(this._byte_length=o?o.byteLength:0,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,o)),this.manager.trigger("update",this))}},{key:"getByteLength",value:function(){return this._byte_length}},{key:"setFiltering",value:function(o){var h,d=0<arguments.length&&o!==void 0?o:{};this.valid&&(d.filtering=d.filtering||"linear",h=this.gl,this.bind(),Utils$1.isPowerOf2(this.width)&&Utils$1.isPowerOf2(this.height)?(this.power_of_2=!0,h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,d.TEXTURE_WRAP_S||d.repeat&&h.REPEAT||h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,d.TEXTURE_WRAP_T||d.repeat&&h.REPEAT||h.CLAMP_TO_EDGE),d.filtering==="mipmap"?(this.filtering="mipmap",h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR_MIPMAP_LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.generateMipmap(h.TEXTURE_2D)):d.filtering==="linear"?(this.filtering="linear",h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR)):d.filtering==="nearest"&&(this.filtering="nearest",h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST))):(this.power_of_2=!1,h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),d.filtering==="nearest"?(this.filtering="nearest",h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST)):(this.filtering="linear",h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR))),this.manager.trigger("update",this))}},{key:"calculateSprites",value:function(){if(this.sprites)for(var o in this.sprites){var h=this.sprites[o];this.texcoords[o]=this.manager.getTexcoordsForSprite([h[0],h[1]],[h[2],h[3]],[this.width,this.height]),this.sizes[o]=[h[2],h[3]],this.css_sizes[o]=[h[2]/this.density,h[3]/this.density],this.aspects[o]=h[2]/h[3]}}}]),e}();function subscribeMixin(e){var o=[];return Object.assign(e,{subscribe:function(h){o.indexOf(h)===-1&&o.push(h)},unsubscribe:function(h){var d=o.indexOf(h);-1<d&&o.splice(d,1)},unsubscribeAll:function(){o=[]},trigger:function(h){for(var d=arguments.length,g=new Array(1<d?d-1:0),_=1;_<d;_++)g[_-1]=arguments[_];o.forEach(function($){if(typeof $[h]=="function")try{$[h].apply($,g)}catch(j){log("warn","Caught exception in listener for event '".concat(h,"':"),j)}})},hasSubscribersFor:function(h){var d=!1;return o.forEach(function(g){typeof g[h]=="function"&&(d=!0)}),d}})}var TextureManager=function(){function e(o){_classCallCheck(this,e),this.default=e.DEFAULT_TEXTURE_NAME,this.textures={},this.texture_configs={},this.boundTexture=null,this.activeUnit=null,this.scene_id=o,WorkerBroker.addTarget("Texture"+this.scene_id,this),subscribeMixin(this)}return _createClass(e,[{key:"create",value:function(o,h,d){for(var g=e.matchers_,_=0;_<g.length;_++){var $=g[_][0],j=g[_][1];if(j&&j(d))return new $(o,h,this,d)}return new Texture(o,h,this,d)}},{key:"retain",value:function(o){this.textures[o]&&this.textures[o].retain()}},{key:"release",value:function(o){this.textures[o]&&this.textures[o].release()}},{key:"getRetainCount",value:function(o){if(this.textures[o])return this.textures[o].retain_count}},{key:"getByteLength",value:function(o){if(this.textures[o])return this.textures[o].getByteLength()}},{key:"destroy",value:function(o){var h=this;Object.keys(this.textures).forEach(function(d){var g=h.textures[d];d!==h.default&&g.gl===o&&g.destroy({force:!0})})}},{key:"getSpriteInfo",value:function(o,h){var d=this.textures[o];return d&&{size:d.sizes[h],css_size:d.css_sizes[h],aspect:d.aspects[h],texcoords:d.texcoords[h]}}},{key:"getTexcoordsForSprite",value:function(o,h,d){var g=d[1]-o[1]-h[1];return[o[0]/d[0],g/d[1],(h[0]+o[0])/d[0],(h[1]+g)/d[1]]}},{key:"createFromObject",value:function(o,h){var d=[];if(h)for(var g in h){var _,$=h[g];this.changed(g,$)&&(_=this.create(o,g,$),d.push(_.loading))}return Promise.all(d)}},{key:"createDefault",value:function(o){return this.create(o,this.default)}},{key:"changed",value:function(o,h){var d=this.textures[o];if(d){if(d.config_type==="element"||h.element!=null)return!0;if(h=sliceOptions(h),this.texture_configs[o]===JSON.stringify(Object.assign({name:o},h)))return!1}return!0}},{key:"getInfo",value:function(o){var h=this;if(o=o||Object.keys(this.textures),Array.isArray(o))return Promise.all(o.map(function(g){return h.getInfo(g)}));var d=this.textures[o];return d?(d.loading||Promise.resolve(d)).then(function(){return{name:d.name,width:d.width,height:d.height,density:d.density,sprites:d.sprites,texcoords:d.texcoords,sizes:d.sizes,css_sizes:d.css_sizes,aspects:d.aspects,filtering:d.filtering,power_of_2:d.power_of_2,valid:d.valid}}):Promise.resolve(null)}},{key:"syncTexturesToWorker",value:function(o){var h=this;return Thread.is_main?Promise.all(o.map(function(d){var g=h.textures[d];return g&&g.loading||Promise.resolve()})).then(function(){return h.textures}):WorkerBroker.postMessage("Texture"+this.scene_id+".getInfo",o).then(function(d){return d.forEach(function(g){h.textures[g.name]=g}),h.textures})}},{key:"getMaxTextureSize",value:function(o){return o.getParameter(o.MAX_TEXTURE_SIZE)}}],[{key:"register",value:function(o,h){var d=e.matchers_;if(!(o instanceof Function&&h instanceof Function))throw"Invalid texture constructor or matcher";this.deRegister(o),d.push([o,h])}},{key:"deRegister",value:function(o){for(var h=e.matchers_,d=0;d<h.length;d++)h[d][0]===o&&h.splice(d,1)}}]),e}();TextureManager.DEFAULT_TEXTURE_NAME="__default",TextureManager.matchers_=[];var Registry={};function getTextureManager(e){return Registry[e]||(Registry[e]=new TextureManager(e)),Registry[e]}var transformMat4_1=transformMat4;function transformMat4(e,o,h){var d=o[0],g=o[1],_=o[2],$=($=h[3]*d+h[7]*g+h[11]*_+h[15])||1;return e[0]=(h[0]*d+h[4]*g+h[8]*_+h[12])/$,e[1]=(h[1]*d+h[5]*g+h[9]*_+h[13])/$,e[2]=(h[2]*d+h[6]*g+h[10]*_+h[14])/$,e}var normalFromMat4_1=normalFromMat4;function normalFromMat4(e,o){var h=o[0],d=o[1],g=o[2],_=o[3],$=o[4],j=o[5],_t=o[6],_e=o[7],_r=o[8],_n=o[9],_i=o[10],_o=o[11],_a=o[12],_u=o[13],_f=o[14],_h=o[15],_d=h*j-d*$,ty=h*_t-g*$,ey=h*_e-_*$,sy=d*_t-g*j,ny=d*_e-_*j,uy=g*_e-_*_t,fy=_r*_u-_n*_a,yy=_r*_f-_i*_a,xy=_r*_h-_o*_a,Ey=_n*_f-_i*_u,Oy=_n*_h-_o*_u,Gy=_i*_h-_o*_f,Ly=_d*Gy-ty*Oy+ey*Ey+sy*xy-ny*yy+uy*fy;return Ly?(Ly=1/Ly,e[0]=(j*Gy-_t*Oy+_e*Ey)*Ly,e[1]=(_t*xy-$*Gy-_e*yy)*Ly,e[2]=($*Oy-j*xy+_e*fy)*Ly,e[3]=(g*Oy-d*Gy-_*Ey)*Ly,e[4]=(h*Gy-g*xy+_*yy)*Ly,e[5]=(d*xy-h*Oy-_*fy)*Ly,e[6]=(_u*uy-_f*ny+_h*sy)*Ly,e[7]=(_f*ey-_a*uy-_h*ty)*Ly,e[8]=(_a*ny-_u*ey+_h*_d)*Ly,e):null}var invert_1=invert;function invert(e,o){var h=o[0],d=o[1],g=o[2],_=o[3],$=o[4],j=o[5],_t=o[6],_e=o[7],_r=o[8],_n=_r*$-j*_e,_i=-_r*_+j*_t,_o=_e*_-$*_t,_a=h*_n+d*_i+g*_o;return _a?(_a=1/_a,e[0]=_n*_a,e[1]=(-_r*d+g*_e)*_a,e[2]=(j*d-g*$)*_a,e[3]=_i*_a,e[4]=(_r*h-g*_t)*_a,e[5]=(-j*h+g*_)*_a,e[6]=_o*_a,e[7]=(-_e*h+d*_t)*_a,e[8]=($*h-d*_)*_a,e):null}var identity_1=identity;function identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}var multiply_1=multiply;function multiply(e,o,h){var d=o[0],g=o[1],_=o[2],$=o[3],j=o[4],_t=o[5],_e=o[6],_r=o[7],_n=o[8],_i=o[9],_o=o[10],_a=o[11],_u=o[12],_f=o[13],_h=o[14],_d=o[15],ty=h[0],ey=h[1],sy=h[2],ny=h[3];return e[0]=ty*d+ey*j+sy*_n+ny*_u,e[1]=ty*g+ey*_t+sy*_i+ny*_f,e[2]=ty*_+ey*_e+sy*_o+ny*_h,e[3]=ty*$+ey*_r+sy*_a+ny*_d,ty=h[4],ey=h[5],sy=h[6],ny=h[7],e[4]=ty*d+ey*j+sy*_n+ny*_u,e[5]=ty*g+ey*_t+sy*_i+ny*_f,e[6]=ty*_+ey*_e+sy*_o+ny*_h,e[7]=ty*$+ey*_r+sy*_a+ny*_d,ty=h[8],ey=h[9],sy=h[10],ny=h[11],e[8]=ty*d+ey*j+sy*_n+ny*_u,e[9]=ty*g+ey*_t+sy*_i+ny*_f,e[10]=ty*_+ey*_e+sy*_o+ny*_h,e[11]=ty*$+ey*_r+sy*_a+ny*_d,ty=h[12],ey=h[13],sy=h[14],ny=h[15],e[12]=ty*d+ey*j+sy*_n+ny*_u,e[13]=ty*g+ey*_t+sy*_i+ny*_f,e[14]=ty*_+ey*_e+sy*_o+ny*_h,e[15]=ty*$+ey*_r+sy*_a+ny*_d,e}var translate_1=translate;function translate(e,o,h){var d,g,_,$,j,_t,_e,_r,_n,_i,_o,_a,_u=h[0],_f=h[1],_h=h[2];return o===e?(e[12]=o[0]*_u+o[4]*_f+o[8]*_h+o[12],e[13]=o[1]*_u+o[5]*_f+o[9]*_h+o[13],e[14]=o[2]*_u+o[6]*_f+o[10]*_h+o[14],e[15]=o[3]*_u+o[7]*_f+o[11]*_h+o[15]):(d=o[0],g=o[1],_=o[2],$=o[3],j=o[4],_t=o[5],_e=o[6],_r=o[7],_n=o[8],_i=o[9],_o=o[10],_a=o[11],e[0]=d,e[1]=g,e[2]=_,e[3]=$,e[4]=j,e[5]=_t,e[6]=_e,e[7]=_r,e[8]=_n,e[9]=_i,e[10]=_o,e[11]=_a,e[12]=d*_u+j*_f+_n*_h+o[12],e[13]=g*_u+_t*_f+_i*_h+o[13],e[14]=_*_u+_e*_f+_o*_h+o[14],e[15]=$*_u+_r*_f+_a*_h+o[15]),e}var scale_1=scale;function scale(e,o,h){var d=h[0],g=h[1],_=h[2];return e[0]=o[0]*d,e[1]=o[1]*d,e[2]=o[2]*d,e[3]=o[3]*d,e[4]=o[4]*g,e[5]=o[5]*g,e[6]=o[6]*g,e[7]=o[7]*g,e[8]=o[8]*_,e[9]=o[9]*_,e[10]=o[10]*_,e[11]=o[11]*_,e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15],e}var perspective_1=perspective;function perspective(e,o,h,d,g){var _=1/Math.tan(o/2),$=1/(d-g);return e[0]=_/h,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=_,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(g+d)*$,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*g*d*$,e[15]=0,e}var identity_1$1=identity$1;function identity$1(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var lookAt_1=lookAt;function lookAt(e,o,h,d){var g,_,$,j,_t,_e,_r,_n,_i,_o,_a=o[0],_u=o[1],_f=o[2],_h=d[0],_d=d[1],ty=d[2],ey=h[0],sy=h[1],ny=h[2];return Math.abs(_a-ey)<1e-6&&Math.abs(_u-sy)<1e-6&&Math.abs(_f-ny)<1e-6?identity_1$1(e):(_r=_a-ey,_n=_u-sy,_i=_f-ny,g=_d*(_i*=_o=1/Math.sqrt(_r*_r+_n*_n+_i*_i))-ty*(_n*=_o),_=ty*(_r*=_o)-_h*_i,$=_h*_n-_d*_r,(_o=Math.sqrt(g*g+_*_+$*$))?(g*=_o=1/_o,_*=_o,$*=_o):$=_=g=0,j=_n*$-_i*_,_t=_i*g-_r*$,_e=_r*_-_n*g,(_o=Math.sqrt(j*j+_t*_t+_e*_e))?(j*=_o=1/_o,_t*=_o,_e*=_o):_e=_t=j=0,e[0]=g,e[1]=j,e[2]=_r,e[3]=0,e[4]=_,e[5]=_t,e[6]=_n,e[7]=0,e[8]=$,e[9]=_e,e[10]=_i,e[11]=0,e[12]=-(g*_a+_*_u+$*_f),e[13]=-(j*_a+_t*_u+_e*_f),e[14]=-(_r*_a+_n*_u+_i*_f),e[15]=1,e)}var copy_1=copy;function copy(e,o){return e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],e[4]=o[4],e[5]=o[5],e[6]=o[6],e[7]=o[7],e[8]=o[8],e[9]=o[9],e[10]=o[10],e[11]=o[11],e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15],e}var invert_1$1=invert$1;function invert$1(e,o){var h=o[0],d=o[1],g=o[2],_=o[3],$=o[4],j=o[5],_t=o[6],_e=o[7],_r=o[8],_n=o[9],_i=o[10],_o=o[11],_a=o[12],_u=o[13],_f=o[14],_h=o[15],_d=h*j-d*$,ty=h*_t-g*$,ey=h*_e-_*$,sy=d*_t-g*j,ny=d*_e-_*j,uy=g*_e-_*_t,fy=_r*_u-_n*_a,yy=_r*_f-_i*_a,xy=_r*_h-_o*_a,Ey=_n*_f-_i*_u,Oy=_n*_h-_o*_u,Gy=_i*_h-_o*_f,Ly=_d*Gy-ty*Oy+ey*Ey+sy*xy-ny*yy+uy*fy;return Ly?(Ly=1/Ly,e[0]=(j*Gy-_t*Oy+_e*Ey)*Ly,e[1]=(g*Oy-d*Gy-_*Ey)*Ly,e[2]=(_u*uy-_f*ny+_h*sy)*Ly,e[3]=(_i*ny-_n*uy-_o*sy)*Ly,e[4]=(_t*xy-$*Gy-_e*yy)*Ly,e[5]=(h*Gy-g*xy+_*yy)*Ly,e[6]=(_f*ey-_a*uy-_h*ty)*Ly,e[7]=(_r*uy-_i*ey+_o*ty)*Ly,e[8]=($*Oy-j*xy+_e*fy)*Ly,e[9]=(d*xy-h*Oy-_*fy)*Ly,e[10]=(_a*ny-_u*ey+_h*_d)*Ly,e[11]=(_n*ey-_r*ny-_o*_d)*Ly,e[12]=(j*yy-$*Ey-_t*fy)*Ly,e[13]=(h*Ey-d*yy+g*fy)*Ly,e[14]=(_u*ty-_a*sy-_f*_d)*Ly,e[15]=(_r*sy-_n*ty+_i*_d)*Ly,e):null}var transformMat4_1$1=transformMat4$1;function transformMat4$1(e,o,h){var d=o[0],g=o[1],_=o[2],$=o[3];return e[0]=h[0]*d+h[4]*g+h[8]*_+h[12]*$,e[1]=h[1]*d+h[5]*g+h[9]*_+h[13]*$,e[2]=h[2]*d+h[6]*g+h[10]*_+h[14]*$,e[3]=h[3]*d+h[7]*g+h[11]*_+h[15]*$,e}var normalize_1=normalize$1;function normalize$1(e,o){var h=o[0],d=o[1],g=o[2],_=o[3],$=h*h+d*d+g*g+_*_;return 0<$&&($=1/Math.sqrt($),e[0]=h*$,e[1]=d*$,e[2]=g*$,e[3]=_*$),e}var scale_1$1=scale$1;function scale$1(e,o,h){return e[0]=o[0]*h,e[1]=o[1]*h,e[2]=o[2]*h,e[3]=o[3]*h,e}var vec3={fromValues:function(e,o,h){var d=new Float64Array(3);return d[0]=e,d[1]=o,d[2]=h,d},transformMat4:transformMat4_1},mat3={normalFromMat4:normalFromMat4_1,invert:invert_1,identity:identity_1},mat4={multiply:multiply_1,translate:translate_1,scale:scale_1,perspective:perspective_1,lookAt:lookAt_1,identity:identity_1$1,copy:copy_1,invert:invert_1$1},vec4={transformMat4:transformMat4_1$1,normalize:normalize_1,scale:scale_1$1},FeatureSelection=function(){function e(o,h){_classCallCheck(this,e),this._gl=o,this._requests={},this._pixels=null,this._has_dirty_buffer=!1,this._fbo=this._gl.createFramebuffer(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._fbo_size={width:256,height:256};var d=getTextureManager(h).create(this._gl,"selection_fbo",{filtering:"nearest"});d.setData(this._fbo_size.width,this._fbo_size.height,null,{filtering:"nearest"}),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,d.texture,0);var g=this._gl.createRenderbuffer();this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,g),this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_COMPONENT16,this._fbo_size.width,this._fbo_size.height),this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.RENDERBUFFER,g),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)}return _createClass(e,[{key:"destroy",value:function(){this._gl&&this._fbo&&(this._gl.deleteFramebuffer(this._fbo),this._fbo=null,this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null))}},{key:"bind",value:function(){var o;this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._gl.viewport(0,0,this._fbo_size.width,this._fbo_size.height),(o=this._gl).clearColor.apply(o,_toConsumableArray(e.defaultColor))}},{key:"getFeatureAt",value:function(o,h,d){var g=h.radius,_=h.top_most_only,$=_===void 0||_;!o||o.x<0||o.y<0||1<o.x||1<o.y?d({features:null}):(this.selection_request_id=this.selection_request_id+1||0,this._requests[this.selection_request_id]={id:this.selection_request_id,point:o,radius:g,top_most_only:$,ttl:$?1:e.MAX_PICKING_TRIES,callback:d})}},{key:"hasPendingRequests",value:function(){return 0<Object.keys(this._requests).length}},{key:"clearPendingRequests",value:function(){for(var o in this._requests)this._requests[o].callback(new Error("cleared")),delete this._requests[o];this._pending_deep_request=null}},{key:"read",value:function(o){if(this.hasPendingRequests()){var h=this._gl;for(var d in h.bindFramebuffer(h.FRAMEBUFFER,this._fbo),this._pending_deep_request&&this.processRequest(this._pending_deep_request,o),this._requests)if(this.processRequest(this._requests[d],o))break;h.bindFramebuffer(h.FRAMEBUFFER,null)}}},{key:"processRequest",value:function(o,h){var d,g,_,$=this._gl,j=255,_t=o.point,_e=o.radius,_r=(_=_e?(g=Math.min(this._fbo_size.width,this._fbo_size.height),{x:Math.min(Math.ceil(2*_e.x*this._fbo_size.width),g),y:Math.min(Math.ceil(2*_e.y*this._fbo_size.height),g)}):(_e={x:0,y:0},{x:1,y:1})).x*_.y*4;if(this._pixels==null||this._pixels.byteLength<_r)this._pixels=new Uint8Array(_r);else if(this._pixels.fill instanceof Function)this._pixels.fill(0,0,_r);else for(var _n=0;_n<_r;_n++)this._pixels[_n]=0;$.readPixels(Math.round((_t.x-_e.x)*this._fbo_size.width),Math.round((1-_t.y-_e.y)*this._fbo_size.height),_.x,_.y,$.RGBA,$.UNSIGNED_BYTE,this._pixels),o.ttl--;var _i=Math.floor(_.x/2),_o=Math.floor(_.y/2),_a=4*(_o*_.x+_i),_u=this._pixels.slice(_a,_a+4),_f=_u[0]+(_u[1]<<8)+(_u[2]<<16);if(0<_f)d=_f+(_u[3]<<24)>>>0,j=_u[3];else if(4<_r)for(var _h=1/0,_a=0,_d=0;_d<_.y;_d++)for(var ty,ey=0;ey<_.x;ey++,_a+=4)0<(_f=(_u=this._pixels.slice(_a,_a+4))[0]+(_u[1]<<8)+(_u[2]<<16))&&(ty=Math.pow(ey-_i,2)+Math.pow(_d-_o,2))<_h&&(d=_f+(_u[3]<<24)>>>0,j=_u[3],_h=ty);if(j!==255){var sy=this._getFeatureByKey(d,h);if(o.features||(o.features=[]),!sy)return void this._finishRead(o);if(o.features.every(function(ny){return ny.id!==sy.id})&&o.features.push(sy),o.ttl)return this._pending_deep_request=o,e._discardColor(_u),this._has_dirty_buffer=!0;this._finishRead(o)}else this._finishRead(o)}},{key:"_finishRead",value:function(o){var h=o.features||e.EMPTY_ARRAY;o.top_most_only||(this._pending_deep_request=null,e._resetDiscardedColors()),delete this._requests[o.id],o.callback({features:h})}},{key:"_getFeatureByKey",value:function(o,h){for(var d=null,g=0;g<h.length;g++){var _=h[g];if(_.selection_data&&(d=_.selection_data[o])){d.tile={coords:_.coords};break}}return d}},{key:"setupDiscards",value:function(o){for(var h=e.MAX_PICKING_TRIES;h--;)o.uniform("4fv","u_selection_discard".concat(h),e._discarded_colors[h]||e.defaultColor)}},{key:"has_dirty_buffer",get:function(){return this._has_dirty_buffer},set:function(){this._has_dirty_buffer=!!this._pending_deep_request}}],[{key:"makeEntry",value:function(){this.map_entry++;var o=255&this.map_entry,h=this.map_entry>>8&255,d=this.map_entry>>16&255,g=this.map_prefix;return{key:o+(h<<8)+(d<<16)+(g<<24)>>>0,color:[o/255,h/255,d/255,g/255]}}},{key:"reset",value:function(){this.map_entry=0}},{key:"setPrefix",value:function(o){this.map_prefix=o}},{key:"_discardColor",value:function(o){this._discarded_colors.push([o[0]/255,o[1]/255,o[2]/255,o[3]/255])}},{key:"_resetDiscardedColors",value:function(){this._discarded_colors.length=0}}]),e}();FeatureSelection._discarded_colors=[],FeatureSelection.map_entry=0,FeatureSelection.map_prefix=0,FeatureSelection.defaultColor=[0,0,0,1],FeatureSelection.MAX_PICKING_TRIES=10,FeatureSelection.EMPTY_ARRAY=Object.freeze([]);var GLSL={parseUniforms:function(e){var o=[];for(var h in e){var d,g=h,_=e[h];if(typeof _=="number")o.push({type:"float",method:"1f",name:h,value:_,key:g,uniforms:e});else if(Array.isArray(_)){if(typeof _[0]=="number")2<=_.length&&_.length<=4?o.push({type:"vec"+_.length,method:_.length+"fv",name:h,value:_,key:g,uniforms:e}):4<_.length&&o.push({type:"float[]",method:"1fv",name:h+"[0]",value:_,key:g,uniforms:e});else if(typeof _[0]=="string")for(d=0;d<_.length;d++)o.push({type:"sampler2D",method:"1i",name:h+"["+d+"]",value:_[d],key:d,uniforms:_});else if(Array.isArray(_[0])&&typeof _[0][0]=="number"&&2<=_[0].length&&_[0].length<=4)for(d=0;d<_.length;d++)o.push({type:"vec"+_[0].length,method:_[d].length+"fv",name:h+"["+d+"]",value:_[d],key:d,uniforms:_})}else typeof _=="boolean"?o.push({type:"bool",method:"1i",name:h,value:_,key:g,uniforms:e}):typeof _=="string"&&o.push({type:"sampler2D",method:"1i",name:h,value:_,key:g,uniforms:e})}return o},defineVariable:function(e,o){var h,d;if(typeof o=="number")h="float";else if(Array.isArray(o))typeof o[0]=="number"?2<=o.length&&o.length<=4?h="vec"+o.length:(h="float",d=o.length):typeof o[0]=="string"&&(h="sampler2D",d=o.length);else if(typeof o=="boolean")h="bool";else{if(typeof o!="string")return;h="sampler2D"}var g="";return g+="".concat(h," ").concat(e),d&&(g+="[".concat(d,"]")),g+=`;
`},defineUniform:function(e,o){var h=GLSL.defineVariable(e,o);if(h)return"uniform "+h},isUniformDefined:function(e,o){var h=new RegExp("uniform[^;]+(?:{[\\s\\S]*})?[^;]*\\b"+e+"\\b","g");return!!o.match(h)},isSymbolReferenced:function(e,o){var h=new RegExp("\\b"+e+"\\b","g");return 0<=o.search(h)},expandVec3:function(e){var o,h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(Array.isArray(e)){if(e.length!==2)return e;o=[].concat(_toConsumableArray(e),[h]).map(parseFloat)}else o=[e,e,e].map(parseFloat);if(o&&o.every(function(d){return typeof d=="number"&&!isNaN(d)}))return o},expandVec4:function(e){var o,h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(Array.isArray(e)){if(e.length!==3)return e;o=[].concat(_toConsumableArray(e),[h]).map(parseFloat)}else o=[e,e,e,h].map(parseFloat);if(o&&o.every(function(d){return typeof d=="number"&&!isNaN(d)}))return o}},extensions=[];function getExtension(e,o){var h=extensions.filter(function(d){return d[0]===e})[0];return(h=h&&h[1])||(extensions.push([e,{}]),h=extensions[extensions.length-1][1]),h[o]||(h[o]=e.getExtension(o)),h[o]}function hashString(e){var o,h,d=0;if(e.length===0)return d;for(o=0,h=e.length;o<h;o++)d=(d<<5)-d+e.charCodeAt(o),d|=0;return d}var stripComments=createCommonjsModule(function(e){var o="(.|[\\r\\n]|\\n)*?\\*\\/\\n?\\n?",h=/(^|[^\S\n])(?:\/\/)([\s\S]+?)$/gm,d=/(^|[^\S\n])(?:\/\/[^!])([\s\S]+?)$/gm,g=e.exports=function(_,$){return _?g.block(g.line(_,$),$):""};g.block=function(_,$){$=$||{};var j=new RegExp("\\/\\*"+o,"gm");return $.safe&&(j=new RegExp("\\/\\*(?!\\*?\\!)"+o,"gm")),_?_.replace(j,""):""},g.line=function(_,$){var j=h;return($=$||{}).safe&&(j=d),_?_.replace(j,""):""}}),glShaderErrors=parseErrors;function parseErrors(e){e=String(e);for(var o,h=[];o=e.match(/ERROR\:([^\n]+)/);){e=e.slice(o.index+1);var d=($=o[1].trim()).split(":"),g=d.slice(2).join(":").trim(),_=parseInt(d[0],10),$=parseInt(d[1],10);h.push({message:g,file:_,line:$})}return h}var re_pragma=/^\s*#pragma.*$/gm,re_continue_line=/\\\s*\n/gm,ShaderProgram=function(){function e(o,h,d,g,_){if(_classCallCheck(this,e),_=_||{},this.textureManager=getTextureManager(g),this.gl=o,this.program=null,this.compiled=!1,this.compiling=!1,this.error=null,!e.polyfills[g]){e.polyfills[g]={};try{this.gl.uniformMatrix3fv(null,!1,new Float64Array(9))}catch{e.polyfills[g].uniformMatrix3fv=this.gl.uniformMatrix3fv,this.gl.uniformMatrix3fv=function(j,_t,_e){e.polyfills[g].uniformMatrix3fv.call(this,j,_t,new Float32Array(_e))}}try{this.gl.uniformMatrix4fv(null,!1,new Float64Array(16))}catch{e.polyfills[g].uniformMatrix4fv=this.gl.uniformMatrix4fv,this.gl.uniformMatrix4fv=function(j,_t,_e){e.polyfills[g].uniformMatrix4fv.call(this,j,_t,new Float32Array(_e))}}}this.defines=Object.assign({},_.defines||{}),this.blocks=Object.assign({},_.blocks||{}),this.block_scopes=Object.assign({},_.block_scopes||{}),this.extensions=_.extensions||[],this.dependent_uniforms=_.uniforms,this.uniforms={},this.attribs={},this.vertex_source=h,this.fragment_source=d,this.id=e.id++,this.name=_.name}return _createClass(e,[{key:"destroy",value:function(){this.gl.useProgram(null),this.gl.deleteProgram(this.program),this.program=null,this.uniforms={},this.attribs={},this.compiled=!1}},{key:"use",value:function(){this.compiled&&(e.current!==this&&this.gl.useProgram(this.program),e.current=this)}},{key:"compile",value:function(){var o=this;if(this.compiling)throw new Error("ShaderProgram.compile(): skipping for ".concat(this.id," (").concat(this.name,") because already compiling"));this.compiling=!0,this.compiled=!1,this.error=null,this.computed_vertex_source=this.vertex_source,this.computed_fragment_source=this.fragment_source;var h,d=this.checkExtensions(),g=this.buildDefineList(),_=this.buildShaderBlockList();for(var $ in _){var j,_t,_e,_r=_[$];!_r||Array.isArray(_r)&&_r.length===0||(h=new RegExp("^\\s*#pragma\\s+tangram:\\s+"+$+"\\s*$","m"),j=this.computed_vertex_source.match(h),_t=this.computed_fragment_source.match(h),j==null&&_t==null||(_e="",_r.forEach(function(_o){var _a="".concat(_o.scope,", ").concat(_o.key,", ").concat(_o.num);_e+=`
// tangram-block-start: `.concat(_a,`
`),_e+=_o.source,_e+=`
// tangram-block-end: `.concat(_a,`
`)}),j!=null&&(this.computed_vertex_source=this.computed_vertex_source.replace(h,_e)),_t!=null&&(this.computed_fragment_source=this.computed_fragment_source.replace(h,_e)),g["TANGRAM_BLOCK_"+$.replace(/[\s-]+/g,"_").toUpperCase()]=!0))}this.computed_vertex_source=this.computed_vertex_source.replace(re_pragma,""),this.computed_fragment_source=this.computed_fragment_source.replace(re_pragma,""),this.ensureUniforms(this.dependent_uniforms);var _i="",_n=this.gl.getShaderPrecisionFormat(this.gl.FRAGMENT_SHADER,this.gl.HIGH_FLOAT),_i=_n&&0<_n.precision?`precision highp float;
`:`precision mediump float;
`;g.TANGRAM_VERTEX_SHADER=!0,g.TANGRAM_FRAGMENT_SHADER=!1,this.computed_vertex_source=_i+e.buildDefineString(g)+this.computed_vertex_source,g.TANGRAM_VERTEX_SHADER=!1,g.TANGRAM_FRAGMENT_SHADER=!0,this.computed_fragment_source=e.buildExtensionString(d)+_i+e.buildDefineString(g)+this.computed_fragment_source,this.computed_vertex_source=this.computed_vertex_source.replace(re_continue_line,""),this.computed_fragment_source=this.computed_fragment_source.replace(re_continue_line,"");try{this.program=e.updateProgram(this.gl,this.program,this.computed_vertex_source,this.computed_fragment_source),this.compiled=!0,this.compiling=!1}catch(_o){throw this.program=null,this.compiled=!1,this.compiling=!1,(this.error=_o).type!=="vertex"&&_o.type!=="fragment"||(this.shader_errors=_o.errors,this.shader_errors.forEach(function(_a){_a.type=_o.type,_a.block=o.block(_o.type,_a.line)})),_o}this.computed_vertex_source=null,this.computed_fragment_source=null,this.use(),this.refreshUniforms(),this.refreshAttributes()}},{key:"buildDefineList",value:function(){var o,h={};for(o in e.defines)h[o]=e.defines[o];for(o in this.defines)h[o]=this.defines[o];return h}},{key:"buildShaderBlockList",value:function(){var o,h,d={};for(o in e.blocks)d[o]=[],Array.isArray(e.blocks[o])?(h=d[o]).push.apply(h,_toConsumableArray(e.blocks[o].map(function(_t,_e){return{key:o,source:_t,num:_e,scope:"ShaderProgram"}}))):d[o]=[{key:o,source:e.blocks[o],num:0,scope:"ShaderProgram"}];for(o in this.blocks)if(d[o]=d[o]||[],Array.isArray(this.blocks[o]))for(var g=this.block_scopes&&this.block_scopes[o]||[],_=null,$=0,j=0;j<this.blocks[o].length;j++)g[j]!==_&&(_=g[j],$=0),d[o].push({key:o,source:this.blocks[o][j],num:$,scope:_||this.name}),$++;else d[o].push({key:o,source:this.blocks[o],num:0,scope:this.name});return d}},{key:"ensureUniforms",value:function(o){if(o){var h,d=stripComments(this.computed_vertex_source),g=stripComments(this.computed_fragment_source),_=[],$=[];for(var j in o){var _t=GLSL.isUniformDefined(j,d),_e=GLSL.isUniformDefined(j,g);if(!_t||!_e){if(!(h=GLSL.defineUniform(j,o[j])))continue;_t||(log("trace","Program ".concat(this.name,": ").concat(j," not defined in vertex shader, injecting: '").concat(h,"'")),_.push(h)),_e||(log("trace","Program ".concat(this.name,": ").concat(j," not defined in fragment shader, injecting: '").concat(h,"'")),$.push(h))}}0<_.length&&(this.computed_vertex_source=_.join(`
`)+this.computed_vertex_source),0<$.length&&(this.computed_fragment_source=$.join(`
`)+this.computed_fragment_source)}}},{key:"setUniforms",value:function(o,h){var d=!(1<arguments.length&&h!==void 0)||h;if(this.compiled){d&&(this.texture_unit=0);for(var g=GLSL.parseUniforms(o),_=0;_<g.length;_++){var $=g[_];$.type==="sampler2D"?this.setTextureUniform($.name,$.value):this.uniform($.method,$.name,$.value)}}}},{key:"saveUniforms",value:function(o){var h=o||this.uniforms;for(var d in h){var g=this.uniforms[d];g&&(g.saved_value=g.value)}this.saved_texture_unit=this.texture_unit||0}},{key:"restoreUniforms",value:function(o){var h=o||this.uniforms;for(var d in h){var g=this.uniforms[d];g&&g.saved_value&&(g.value=g.saved_value,this.updateUniform(g))}this.texture_unit=this.saved_texture_unit||0}},{key:"setTextureUniform",value:function(o,h){var d=this.textureManager.textures[h];d!=null?(d.bind(this.texture_unit),this.uniform("1i",o,this.texture_unit),this.texture_unit++):log("warn","Cannot find texture '".concat(h,"'"))}},{key:"uniform",value:function(o,h,d){var g;this.compiled&&(this.uniforms[h]=this.uniforms[h]||{},g=this.uniforms[h],g.name=h,g.location===void 0&&(g.location=this.gl.getUniformLocation(this.program,h)),g.method=o,g.value=d,this.updateUniform(g))}},{key:"updateUniform",value:function(o){this.compiled&&o&&o.location!=null&&(this.use(),this.commitUniform(o))}},{key:"commitUniform",value:function(o){var h=o.location,d=o.value;switch(o.method){case"1i":this.gl.uniform1i(h,d);break;case"1f":this.gl.uniform1f(h,d);break;case"2f":this.gl.uniform2f(h,d[0],d[1]);break;case"3f":this.gl.uniform3f(h,d[0],d[1],d[2]);break;case"4f":this.gl.uniform4f(h,d[0],d[1],d[2],d[3]);break;case"1iv":this.gl.uniform1iv(h,d);break;case"3iv":this.gl.uniform3iv(h,d);break;case"1fv":this.gl.uniform1fv(h,d);break;case"2fv":this.gl.uniform2fv(h,d);break;case"3fv":this.gl.uniform3fv(h,d);break;case"4fv":this.gl.uniform4fv(h,d);break;case"Matrix3fv":this.gl.uniformMatrix3fv(h,!1,d);break;case"Matrix4fv":this.gl.uniformMatrix4fv(h,!1,d)}}},{key:"refreshUniforms",value:function(){if(this.compiled)for(var o in this.uniforms){var h=this.uniforms[o];h.location=this.gl.getUniformLocation(this.program,o),this.updateUniform(h)}}},{key:"refreshAttributes",value:function(){this.attribs={}}},{key:"attribute",value:function(o){if(this.compiled){var h=this.attribs[o]=this.attribs[o]||{};return h.location!=null||(h.name=o,h.location=this.gl.getAttribLocation(this.program,o)),h}}},{key:"source",value:function(o){return o==="vertex"?this.computed_vertex_source:o==="fragment"?this.computed_fragment_source:void 0}},{key:"lines",value:function(o){var h=this.source(o);return h?h.split(`
`):[]}},{key:"line",value:function(o,h){var d=this.lines(o);if(d)return d[h]}},{key:"block",value:function(o,h){for(var d,g=this.lines(o),_=0;_<h&&_<g.length;_++){var $=g[_],j=$.match(/\/\/ tangram-block-start: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/);j&&1<j.length?d={scope:j[1],name:j[2],num:j[3]}:(j=$.match(/\/\/ tangram-block-end: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/))&&1<j.length&&(d=null),d&&(d.line=d.line==null?-1:d.line+1,d.source=$)}return d}},{key:"checkExtensions",value:function(){var o=this,h=[];return this.extensions.forEach(function(d){var g=getExtension(o.gl,d),_="TANGRAM_EXTENSION_".concat(d);o.defines[_]=g!=null,g?h.push(d):log("debug","Could not enable extension '".concat(d,"'"))}),h}}]),e}();ShaderProgram.polyfills={},ShaderProgram.id=0,ShaderProgram.current=null,ShaderProgram.defines={},ShaderProgram.blocks={},ShaderProgram.reset=function(){ShaderProgram.programs_by_source={},ShaderProgram.shaders_by_source={}},ShaderProgram.reset(),ShaderProgram.buildDefineString=function(e){var o="";for(var h in e)e[h]!=null&&e[h]!==!1&&(typeof e[h]=="boolean"&&e[h]===!0?o+="#define "+h+`
`:typeof e[h]=="number"&&Math.floor(e[h])===e[h]?o+="#define "+h+" "+e[h].toFixed(1)+`
`:o+="#define "+h+" "+e[h]+`
`);return o},ShaderProgram.buildExtensionString=function(e){var o="";return(e=e||[]).forEach(function(h){o+="#ifdef GL_".concat(h,`
#extension GL_`).concat(h,` : enable
#endif
`)}),o},ShaderProgram.addBlock=function(e){var o;ShaderProgram.blocks[e]=ShaderProgram.blocks[e]||[];for(var h=arguments.length,d=new Array(1<h?h-1:0),g=1;g<h;g++)d[g-1]=arguments[g];(o=ShaderProgram.blocks[e]).push.apply(o,d)},ShaderProgram.removeBlock=function(e){ShaderProgram.blocks[e]=[]},ShaderProgram.replaceBlock=function(e){ShaderProgram.removeBlock(e);for(var o=arguments.length,h=new Array(1<o?o-1:0),d=1;d<o;d++)h[d-1]=arguments[d];ShaderProgram.addBlock.apply(ShaderProgram,[e].concat(h))},ShaderProgram.updateProgram=function(e,o,h,d){var g=hashString(e._tangram_id+"::"+h+"::"+d);if(ShaderProgram.programs_by_source[g])return log("trace","Reusing identical source GL program object"),ShaderProgram.programs_by_source[g];var _=ShaderProgram.createShader(e,h,e.VERTEX_SHADER),$=ShaderProgram.createShader(e,d,e.FRAGMENT_SHADER);if(e.useProgram(null),o!=null)for(var j=e.getAttachedShaders(o),_t=0;_t<j.length;_t++)e.detachShader(o,j[_t]);else o=e.createProgram();if(_==null||$==null)return o;if(e.attachShader(o,_),e.attachShader(o,$),e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS))return ShaderProgram.programs_by_source[g]=o;var _e=new Error(`WebGL program error:
            VALIDATE_STATUS: `.concat(e.getProgramParameter(o,e.VALIDATE_STATUS),`
            ERROR: `).concat(e.getError(),`
            --- Vertex Shader ---
            `).concat(h,`
            --- Fragment Shader ---
            `).concat(d));throw Object.assign(new Error(_e),{type:"program"})},ShaderProgram.createShader=function(e,o,h){var d=hashString(e._tangram_id+"::"+o);if(ShaderProgram.shaders_by_source[d])return log("trace","Reusing identical source GL shader object"),ShaderProgram.shaders_by_source[d];var g=e.createShader(h);if(e.shaderSource(g,o),e.compileShader(g),e.getShaderParameter(g,e.COMPILE_STATUS))return ShaderProgram.shaders_by_source[d]=g;var _=h===e.VERTEX_SHADER?"vertex":"fragment",$=e.getShaderInfoLog(g),j=glShaderErrors($);throw Object.assign(new Error($),{type:_,errors:j})};var VertexArrayObject={disabled:!1,bound_vao:[],init:function(e){var o;this.disabled!==!0&&(o=getExtension(e,"OES_vertex_array_object")),o!=null?log("info","Vertex Array Object extension available"):this.disabled!==!0?log("warn","Vertex Array Object extension NOT available"):log("warn","Vertex Array Object extension force disabled")},create:function(e,o,h){var d={};d.setup=o,d.teardown=h;var g=getExtension(e,"OES_vertex_array_object");return g!=null&&(d._vao=g.createVertexArrayOES(),g.bindVertexArrayOES(d._vao)),d.setup(!0),d},getCurrentBinding:function(e){var o=this.bound_vao.filter(function(h){return h[0]===e})[0];return o&&o[1]},setCurrentBinding:function(e,o){var h=this.bound_vao,d=h.filter(function(g){return g[0]===e})[0];d==null?h.push([e,o]):d[1]=o},bind:function(e,o){var h,d=getExtension(e,"OES_vertex_array_object");o!=null?d!=null&&o._vao!=null?(d.bindVertexArrayOES(o._vao),this.setCurrentBinding(e,o)):o.setup(!1):(h=this.getCurrentBinding(e),d!=null?d.bindVertexArrayOES(null):h!=null&&typeof h.teardown=="function"&&h.teardown(),this.setCurrentBinding(e,null))},destroy:function(e,o){var h=getExtension(e,"OES_vertex_array_object");h!=null&&o!=null&&o._vao!=null&&(h.deleteVertexArrayOES(o._vao),o._vao=null)}},VBOMesh=function(){function e(o,h,d,g,_,$){_classCallCheck(this,e),$=$||{},this.textureManager=getTextureManager(_),this.gl=o,this.vertex_data=h,this.element_data=d,this.vertex_layout=g,this.vertex_buffer=this.gl.createBuffer(),this.buffer_size=this.vertex_data.byteLength,this.draw_mode=$.draw_mode||this.gl.TRIANGLES,this.data_usage=$.data_usage||this.gl.STATIC_DRAW,this.vertices_per_geometry=3,this.uniforms=$.uniforms,this.textures=$.textures,this.retain=$.retain||!1,this.created_at=+new Date,this.fade_in_time=$.fade_in_time||0,this.vertex_count=this.vertex_data.byteLength/this.vertex_layout.stride,this.element_count=0,this.vaos={},this.toggle_element_array=!1,this.element_data?(this.toggle_element_array=!0,this.element_count=this.element_data.length,this.geometry_count=this.element_count/this.vertices_per_geometry,this.element_type=this.element_data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT,this.element_buffer=this.gl.createBuffer(),this.buffer_size+=this.element_data.byteLength,this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.element_buffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.element_data,this.data_usage)):this.geometry_count=this.vertex_count/this.vertices_per_geometry,this.upload(),this.retain||(delete this.vertex_data,delete this.element_data),this.valid=!0}return _createClass(e,[{key:"render",value:function(o){var h=0<arguments.length&&o!==void 0?o:{};if(!this.valid)return!1;var d=h.program||ShaderProgram.current;d.use(),this.uniforms&&(d.saveUniforms(this.uniforms),d.setUniforms(this.uniforms,!1));var g=(new Date-this.created_at)/1e3;return d.uniform("1f","u_visible_time",g),this.bind(d),this.toggle_element_array?this.gl.drawElements(this.draw_mode,this.element_count,this.element_type,0):this.gl.drawArrays(this.draw_mode,0,this.vertex_count),VertexArrayObject.bind(this.gl,null),this.uniforms&&d.restoreUniforms(this.uniforms),g<this.fade_in_time}},{key:"bind",value:function(o){var h=this,d=this.vaos[o.id];d?VertexArrayObject.bind(this.gl,d):this.vaos[o.id]=VertexArrayObject.create(this.gl,function(g){h.gl.bindBuffer(h.gl.ARRAY_BUFFER,h.vertex_buffer),h.toggle_element_array&&h.gl.bindBuffer(h.gl.ELEMENT_ARRAY_BUFFER,h.element_buffer),h.vertex_layout.enable(h.gl,o,g)})}},{key:"upload",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertex_buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertex_data,this.data_usage)}},{key:"destroy",value:function(){var o=this;if(!this.valid)return!1;for(var h in this.valid=!1,this.vaos)VertexArrayObject.destroy(this.gl,this.vaos[h]);return this.gl.deleteBuffer(this.vertex_buffer),this.vertex_buffer=null,this.element_buffer&&(this.gl.deleteBuffer(this.element_buffer),this.element_buffer=null),delete this.vertex_data,delete this.element_data,this.textures&&this.textures.forEach(function(d){return o.textureManager.release(d)}),!0}}]),e}(),shaderSrc_material=`/*Defines globals:materiallight_accumulator_**/struct Material{
#ifdef TANGRAM_MATERIAL_EMISSION
vec4 emission;
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE
vec3 emissionScale;
#endif
#endif
#ifdef TANGRAM_MATERIAL_AMBIENT
vec4 ambient;
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE
vec3 ambientScale;
#endif
#endif
#ifdef TANGRAM_MATERIAL_DIFFUSE
vec4 diffuse;
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE
vec3 diffuseScale;
#endif
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR
vec4 specular;float shininess;
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE
vec3 specularScale;
#endif
#endif
#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE
vec3 normalScale;float normalAmount;
#endif
};uniform Material u_material;Material material;
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE
uniform sampler2D u_material_emission_texture;
#endif
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE
uniform sampler2D u_material_ambient_texture;
#endif
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE
uniform sampler2D u_material_diffuse_texture;
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE
uniform sampler2D u_material_specular_texture;
#endif
#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE
uniform sampler2D u_material_normal_texture;
#endif
vec4 light_accumulator_ambient=vec4(vec3(0.0),1.);vec4 light_accumulator_diffuse=vec4(vec3(0.0),1.);
#ifdef TANGRAM_MATERIAL_SPECULAR
vec4 light_accumulator_specular=vec4(vec3(0.0),1.);
#endif
#ifdef TANGRAM_MATERIAL_TEXTURE_SPHEREMAP
vec4 getSphereMap(in sampler2D _tex,in vec3 _eyeToPoint,in vec3 _normal,in vec2 _skew){vec3 eye=normalize(_eyeToPoint);eye.xy-=_skew;eye=normalize(eye);vec3 r=reflect(eye,_normal);r.z+=1.0;float m=2.*length(r);vec2 uv=r.xy/m+.5;return texture2D(_tex,uv);}
#endif
#ifdef TANGRAM_MATERIAL_TEXTURE_TRIPLANAR
vec3 getTriPlanarBlend(in vec3 _normal){vec3 blending=abs(_normal);blending=normalize(max(blending,0.00001));float b=(blending.x+blending.y+blending.z);return blending/b;}vec4 getTriPlanar(in sampler2D _tex,in vec3 _pos,in vec3 _normal,in vec3 _scale){vec3 blending=getTriPlanarBlend(_normal);vec4 xaxis=texture2D(_tex,fract(_pos.yz*_scale.x));vec4 yaxis=texture2D(_tex,fract(_pos.xz*_scale.y));vec4 zaxis=texture2D(_tex,fract(_pos.xy*_scale.z));return xaxis*blending.x+yaxis*blending.y+zaxis*blending.z;}
#endif
#ifdef TANGRAM_MATERIAL_TEXTURE_PLANAR
vec4 getPlanar(in sampler2D _tex,in vec3 _pos,in vec2 _scale){return texture2D(_tex,fract(_pos.xy*_scale.x));}
#endif
#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE
void calculateNormal(inout vec3 _normal){
#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_UV
_normal+=texture2D(u_material_normal_texture,fract(v_texcoord*material.normalScale.xy)).rgb*2.0-1.0;
#endif
#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_PLANAR
vec3 normalTex=getPlanar(u_material_normal_texture,v_world_position.xyz,material.normalScale.xy).rgb*2.0-1.0;_normal+=normalTex;
#endif
#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_TRIPLANAR
vec3 normalTex=getTriPlanar(u_material_normal_texture,v_world_position.xyz,_normal,material.normalScale).rgb*2.0-1.0;_normal+=normalTex;
#endif
_normal=normalize(_normal);}
#endif
void calculateMaterial(in vec3 _eyeToPoint,inout vec3 _normal){
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_UV
material.emission*=texture2D(u_material_emission_texture,v_texcoord);
#endif
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_PLANAR
material.emission*=getPlanar(u_material_emission_texture,v_world_position.xyz,material.emissionScale.xy);
#endif
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_TRIPLANAR
material.emission*=getTriPlanar(u_material_emission_texture,v_world_position.xyz,_normal,material.emissionScale);
#endif
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_SPHEREMAP
material.emission*=getSphereMap(u_material_emission_texture,_eyeToPoint,_normal,u_center_offset);
#endif
#endif
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_UV
material.ambient*=texture2D(u_material_ambient_texture,v_texcoord);
#endif
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_PLANAR
material.ambient*=getPlanar(u_material_ambient_texture,v_world_position.xyz,material.ambientScale.xy);
#endif
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_TRIPLANAR
material.ambient*=getTriPlanar(u_material_ambient_texture,v_world_position.xyz,_normal,material.ambientScale);
#endif
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_SPHEREMAP
material.ambient*=getSphereMap(u_material_ambient_texture,_eyeToPoint,_normal,u_center_offset);
#endif
#endif
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_UV
material.diffuse*=texture2D(u_material_diffuse_texture,v_texcoord);
#endif
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_PLANAR
material.diffuse*=getPlanar(u_material_diffuse_texture,v_world_position.xyz,material.diffuseScale.xy);
#endif
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_TRIPLANAR
material.diffuse*=getTriPlanar(u_material_diffuse_texture,v_world_position.xyz,_normal,material.diffuseScale);
#endif
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_SPHEREMAP
material.diffuse*=getSphereMap(u_material_diffuse_texture,_eyeToPoint,_normal,u_center_offset);
#endif
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_UV
material.specular*=texture2D(u_material_specular_texture,v_texcoord);
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_PLANAR
material.specular*=getPlanar(u_material_specular_texture,v_world_position.xyz,material.specularScale.xy);
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_TRIPLANAR
material.specular*=getTriPlanar(u_material_specular_texture,v_world_position.xyz,_normal,material.specularScale);
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_SPHEREMAP
material.specular*=getSphereMap(u_material_specular_texture,_eyeToPoint,_normal,u_center_offset);
#endif
#endif
}`,material_props=["emission","ambient","diffuse","specular"],Material=function(){function e(o){var h=this;_classCallCheck(this,e),o=o||{},material_props.forEach(function(d){var g=o[d];g!=null&&(g.texture?h[d]={texture:g.texture,mapping:g.mapping||"spheremap",scale:GLSL.expandVec3(g.scale!=null?g.scale:1),amount:GLSL.expandVec4(g.amount!=null?g.amount:1)}:typeof g=="number"||Array.isArray(g)?h[d]={amount:GLSL.expandVec4(g)}:h[d]=typeof g=="string"?{amount:StyleParser.parseColor(g)}:g)}),this.specular&&(this.specular.shininess=o.shininess?parseFloat(o.shininess):.2),o.normal!=null&&(this.normal={texture:o.normal.texture,mapping:o.normal.mapping||"triplanar",scale:GLSL.expandVec3(o.normal.scale!=null?o.normal.scale:1),amount:o.normal.amount!=null?o.normal.amount:1})}return _createClass(e,[{key:"inject",value:function(o){var h=this;material_props.forEach(function(d){var g="TANGRAM_MATERIAL_".concat(d.toUpperCase()),_=g+"_TEXTURE";o.defines[g]=h[d]!=null,h[d]&&h[d].texture&&(o.defines[_]=!0,o.defines[_+"_"+h[d].mapping.toUpperCase()]=!0,o.defines["TANGRAM_MATERIAL_TEXTURE_".concat(h[d].mapping.toUpperCase())]=!0,o.texcoords=o.texcoords||h[d].mapping==="uv")}),this.normal&&this.normal.texture&&(o.defines.TANGRAM_MATERIAL_NORMAL_TEXTURE=!0,o.defines["TANGRAM_MATERIAL_NORMAL_TEXTURE_"+this.normal.mapping.toUpperCase()]=!0,o.defines["TANGRAM_MATERIAL_TEXTURE_".concat(this.normal.mapping.toUpperCase())]=!0,o.texcoords=o.texcoords||this.normal.mapping==="uv"),o.replaceShaderBlock(e.block,shaderSrc_material,"Material"),o.addShaderBlock("setup",`
material = u_material;
`,"Material")}},{key:"setupProgram",value:function(o){var h=this;material_props.forEach(function(d){h[d]&&(h[d].texture?(o.setTextureUniform("u_material_".concat(d,"_texture"),h[d].texture),o.uniform("3fv","u_material.".concat(d,"Scale"),h[d].scale),o.uniform("4fv","u_material.".concat(d),h[d].amount)):h[d].amount&&o.uniform("4fv","u_material.".concat(d),h[d].amount))}),this.specular&&o.uniform("1f","u_material.shininess",this.specular.shininess),this.normal&&this.normal.texture&&(o.setTextureUniform("u_material_normal_texture",this.normal.texture),o.uniform("3fv","u_material.normalScale",this.normal.scale),o.uniform("1f","u_material.normalAmount",this.normal.amount))}}],[{key:"isValid",value:function(o){return o!=null&&(o.emission!=null||o.ambient!=null||o.diffuse!=null||o.specular!=null)}}]),e}(),Vector;Material.block="material";var Vector$1=Vector={};Vector.copy=function(e){for(var o=[],h=e.length,d=0;d<h;d++)o[d]=e[d];return o},Vector.neg=function(e){for(var o=[],h=e.length,d=0;d<h;d++)o[d]=-e[d];return o},Vector.add=function(e,o){for(var h=[],d=Math.min(e.length,o.length),g=0;g<d;g++)h[g]=e[g]+o[g];return h},Vector.sub=function(e,o){for(var h=[],d=Math.min(e.length,o.length),g=0;g<d;g++)h[g]=e[g]-o[g];return h},Vector.signed_area=function(e,o,h){return(o[0]-e[0])*(h[1]-e[1])-(h[0]-e[0])*(o[1]-e[1])},Vector.mult=function(e,o){var h,d=[],g=e.length;if(typeof o=="number")for(h=0;h<g;h++)d[h]=e[h]*o;else for(g=Math.min(e.length,o.length),h=0;h<g;h++)d[h]=e[h]*o[h];return d},Vector.multMatrix=function(e,o){return[e[0][0]*o[0]+e[0][1]*o[1],e[1][0]*o[0]+e[1][1]*o[1]]},Vector.div=function(e,o){var h=[];if(typeof o=="number")for(g=0;g<e.length;g++)h[g]=e[g]/o;else for(var d=Math.min(e.length,o.length),g=0;g<d;g++)h[g]=e[g]/o[g];return h},Vector.perp=function(e,o){return[o[1]-e[1],e[0]-o[0]]},Vector.rot=function(e,o){var h=Math.cos(o),d=Math.sin(o);return[e[0]*h-e[1]*d,e[0]*d+e[1]*h]},Vector.angle=function(e){var o=_slicedToArray(e,2),h=o[0],d=o[1];return Math.atan2(d,h)},Vector.angleBetween=function(e,o){var h=Vector.dot(Vector.normalize(Vector.copy(e)),Vector.normalize(Vector.copy(o)));return 1<h&&(h=1),Math.acos(h)},Vector.signedAngleBetween=function(e,o){return Math.atan2(e[0]*o[1]-e[1]*o[0],e[0]*o[0]+e[1]*o[1])},Vector.isEqual=function(e,o){for(var h=e.length,d=0;d<h;d++)if(e[d]!==o[d])return!1;return!0},Vector.lengthSq=function(e){return e.length===2?e[0]*e[0]+e[1]*e[1]:3<=e.length?e[0]*e[0]+e[1]*e[1]+e[2]*e[2]:0},Vector.length=function(e){return Math.sqrt(Vector.lengthSq(e))},Vector.normalize=function(e){var o;if(e.length===2){if((o=e[0]*e[0]+e[1]*e[1])===1)return e;(o=Math.sqrt(o))!==0?(e[0]/=o,e[1]/=o):(e[0]=0,e[1]=0)}else if(3<=e.length){if((o=e[0]*e[0]+e[1]*e[1]+e[2]*e[2])===1)return e;(o=Math.sqrt(o))!==0?(e[0]/=o,e[1]/=o,e[2]/=o):(e[0]=0,e[1]=0,e[2]=0)}return e},Vector.cross=function(e,o){return e.length===2?e[0]*o[1]-e[1]*o[0]:e.length===3?[e[1]*o[2]-e[2]*o[1],e[2]*o[0]-e[0]*o[2],e[0]*o[1]-e[1]*o[0]]:void 0},Vector.dot=function(e,o){for(var h=0,d=Math.min(e.length,o.length),g=0;g<d;g++)h+=e[g]*o[g];return h};var shaderSrc_ambientLight="/*Expected globals:light_accumulator_**/struct AmbientLight{vec3 ambient;};void calculateLight(in AmbientLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;}",shaderSrc_directionalLight=`/*Expected globals:materiallight_accumulator_**/struct DirectionalLight{vec3 ambient;vec3 diffuse;vec3 specular;vec3 direction;};void calculateLight(in DirectionalLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;float nDotVP=clamp(dot(_normal,-_light.direction),0.0,1.0);
#ifdef TANGRAM_MATERIAL_DIFFUSE
light_accumulator_diffuse.rgb+=_light.diffuse*nDotVP;
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR
float pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(_light.direction,_normal);float eyeDotR=max(dot(normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf;
#endif
}`,shaderSrc_pointLight=`/*Expected globals:materiallight_accumulator_**/struct PointLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT
float attenuationExponent;
#endif
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS
float innerRadius;
#endif
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float outerRadius;
#endif
};void calculateLight(in PointLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(VP,_normal),0.0,1.0);float attenuation=1.0;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT
float Rin=1.0;float e=_light.attenuationExponent;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS
Rin=_light.innerRadius;
#endif
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));
#else
float d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);
#endif
#else
float Rin=0.0;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS
Rin=_light.innerRadius;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;
#else
float d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);
#endif
#else
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;
#else
attenuation=1.0;
#endif
#endif
#endif
light_accumulator_ambient.rgb+=_light.ambient*attenuation;
#ifdef TANGRAM_MATERIAL_DIFFUSE
light_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation;
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR
float pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(0.0,dot(-normalize(_eyeToPoint),reflectVector));pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation;
#endif
}`,shaderSrc_spotLight=`/*Expected globals:materiallight_accumulator_**/struct SpotLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT
float attenuationExponent;
#endif
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS
float innerRadius;
#endif
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float outerRadius;
#endif
vec3 direction;float spotCosCutoff;float spotExponent;};void calculateLight(in SpotLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(_normal,VP),0.0,1.0);float attenuation=1.0;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT
float Rin=1.0;float e=_light.attenuationExponent;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS
Rin=_light.innerRadius;
#endif
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));
#else
float d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);
#endif
#else
float Rin=0.0;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS
Rin=_light.innerRadius;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;
#else
float d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);
#endif
#else
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;
#else
attenuation=1.0;
#endif
#endif
#endif
float spotAttenuation=0.0;float spotDot=clamp(dot(-VP,_light.direction),0.0,1.0);if(spotDot>=_light.spotCosCutoff){spotAttenuation=pow(spotDot,_light.spotExponent);}light_accumulator_ambient.rgb+=_light.ambient*attenuation*spotAttenuation;
#ifdef TANGRAM_MATERIAL_DIFFUSE
light_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation*spotAttenuation;
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR
float pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(dot(-normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation*spotAttenuation;
#endif
}`,Light=function(){function e(o,h){_classCallCheck(this,e),this.name=h.name,this.view=o,h.ambient==null||typeof h.ambient=="number"?this.ambient=GLSL.expandVec3(h.ambient||0):this.ambient=StyleParser.parseColor(h.ambient).slice(0,3),h.diffuse==null||typeof h.diffuse=="number"?this.diffuse=GLSL.expandVec3(h.diffuse!=null?h.diffuse:1):this.diffuse=StyleParser.parseColor(h.diffuse).slice(0,3),h.specular==null||typeof h.specular=="number"?this.specular=GLSL.expandVec3(h.specular||0):this.specular=StyleParser.parseColor(h.specular).slice(0,3)}return _createClass(e,[{key:"inject",value:function(){var o=`
            uniform `.concat(this.struct_name," u_").concat(this.name,`;
            `).concat(this.struct_name," ").concat(this.name,`;
            `),h=`
            `.concat(this.name," = u_").concat(this.name,`;

        `);ShaderProgram.addBlock(e.block,o),ShaderProgram.addBlock("setup",h)}},{key:"update",value:function(){}},{key:"setupProgram",value:function(o){o.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient),o.uniform("3fv","u_".concat(this.name,".diffuse"),this.diffuse),o.uniform("3fv","u_".concat(this.name,".specular"),this.specular)}}],[{key:"create",value:function(o,h){if(e.types[h.type])return new e.types[h.type](o,h)}},{key:"setMode",value:function(o,h){o===!0&&(o="fragment"),o=e.enabled&&(o??"fragment"),h.defines.TANGRAM_LIGHTING_FRAGMENT=o==="fragment",h.defines.TANGRAM_LIGHTING_VERTEX=o==="vertex"}},{key:"inject",value:function(o){if(ShaderProgram.removeBlock(e.block),e.enabled){var h="";if(o&&0<Object.keys(o).length){var d={};for(var g in o)d[o[g].type]=!0;for(var _ in d)e.types[_].inject();for(var $ in o)o[$].inject(),h+="calculateLight(".concat($,`, _eyeToPoint, _normal);
`)}var j=`
            vec4 calculateLighting(in vec3 _eyeToPoint, in vec3 _normal, in vec4 _color) {

                // Do initial material calculations over normal, emission, ambient, diffuse and specular values
                calculateMaterial(_eyeToPoint,_normal);

                // Un roll the loop of individual ligths to calculate
                `.concat(h,`

                //  Final light intensity calculation
                vec4 color = vec4(vec3(0.), _color.a); // start with vertex color alpha

                #ifdef TANGRAM_MATERIAL_EMISSION
                    color.rgb = material.emission.rgb;
                    color.a *= material.emission.a;
                #endif

                #ifdef TANGRAM_MATERIAL_AMBIENT
                    color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.ambient.rgb;
                    color.a *= material.ambient.a;
                #else
                    #ifdef TANGRAM_MATERIAL_DIFFUSE
                        color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.diffuse.rgb;
                    #endif
                #endif

                #ifdef TANGRAM_MATERIAL_DIFFUSE
                    color.rgb += light_accumulator_diffuse.rgb * _color.rgb * material.diffuse.rgb;
                    color.a *= material.diffuse.a;
                #endif

                #ifdef TANGRAM_MATERIAL_SPECULAR
                    color.rgb += light_accumulator_specular.rgb * material.specular.rgb;
                    color.a *= material.specular.a;
                #endif

                // Clamp final color
                color = clamp(color, 0.0, 1.0);

                return color;
            }`);ShaderProgram.addBlock(e.block,j)}}}]),e}();Light.types={},Light.block="lighting",Light.enabled=!0;var AmbientLight=function(){_inherits(o,Light);var e=_createSuper(o);function o(h,d){var g;return _classCallCheck(this,o),(g=e.call(this,h,d)).type="ambient",g.struct_name="AmbientLight",g}return _createClass(o,[{key:"setupProgram",value:function(h){h.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient)}}],[{key:"inject",value:function(){ShaderProgram.addBlock(Light.block,shaderSrc_ambientLight)}}]),o}();Light.types.ambient=AmbientLight;var DirectionalLight=function(){_inherits(o,Light);var e=_createSuper(o);function o(h,d){var g,_;return _classCallCheck(this,o),(g=e.call(this,h,d)).type="directional",g.struct_name="DirectionalLight",d.direction?g._direction=d.direction:(_=Math.sin(60*Math.PI/180),g._direction=[Math.cos(135*Math.PI/180)*_,Math.sin(135*Math.PI/180)*_,-.5]),d.ambient==null&&(g.ambient=GLSL.expandVec3(.5)),g.direction=g._direction.map(parseFloat),g._initial_direction=[g.direction[0],g.direction[1],g.direction[2]],g}return _createClass(o,[{key:"update",value:function(){vec3.transformMat4(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"setupProgram",value:function(h){_get(_getPrototypeOf(o.prototype),"setupProgram",this).call(this,h),h.uniform("3fv","u_".concat(this.name,".direction"),this.direction)}},{key:"direction",get:function(){return this._direction},set:function(h){this._direction=Vector$1.normalize(Vector$1.copy(h))}}],[{key:"inject",value:function(){ShaderProgram.addBlock(Light.block,shaderSrc_directionalLight)}}]),o}();Light.types.directional=DirectionalLight;var PointLight=function(){_inherits(o,Light);var e=_createSuper(o);function o(h,d){var g;return _classCallCheck(this,o),(g=e.call(this,h,d)).type="point",g.struct_name="PointLight",g.position=d.position||[0,0,"100px"],g.position_eye=[],g.origin=d.origin||"ground",g.attenuation=isNaN(parseFloat(d.attenuation))?0:parseFloat(d.attenuation),d.radius?Array.isArray(d.radius)&&d.radius.length===2?g.radius=d.radius:g.radius=[null,d.radius]:g.radius=null,g}return _createClass(o,[{key:"inject",value:function(){_get(_getPrototypeOf(o.prototype),"inject",this).call(this),ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT=this.attenuation!==0,ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS=this.radius!=null&&this.radius[0]!=null,ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS=this.radius!=null}},{key:"update",value:function(){var h,d,g,_=this.view.lookAtManipulator.getLookAtData().zoom;this.origin==="world"?(d=(h=_slicedToArray(Geo$1.latLngToMeters(this.position),2))[0],g=h[1],this.position_eye[0]=d-this.view.lookAtManipulator.getLookAtData().position[0],this.position_eye[1]=g-this.view.lookAtManipulator.getLookAtData().position[1],this.position_eye[2]=StyleParser.convertUnits(this.position[2],{zoom:_,meters_per_pixel:Geo$1.metersPerPixel(_)}),this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance):this.origin!=="ground"&&this.origin!=="camera"||(this.position_eye=StyleParser.convertUnits(this.position,{zoom:_,meters_per_pixel:Geo$1.metersPerPixel(_)}),this.origin==="ground"&&(this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance)),this.position_eye[3]=1}},{key:"setupProgram",value:function(h){_get(_getPrototypeOf(o.prototype),"setupProgram",this).call(this,h),h.uniform("4fv","u_".concat(this.name,".position"),this.position_eye),ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT&&h.uniform("1f","u_".concat(this.name,".attenuationExponent"),this.attenuation);var d=this.view.lookAtManipulator.getLookAtData().zoom;ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS&&h.uniform("1f","u_".concat(this.name,".innerRadius"),StyleParser.convertUnits(this.radius[0],{zoom:d,meters_per_pixel:Geo$1.metersPerPixel(d)})),ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS&&h.uniform("1f","u_".concat(this.name,".outerRadius"),StyleParser.convertUnits(this.radius[1],{zoom:d,meters_per_pixel:Geo$1.metersPerPixel(d)}))}}],[{key:"inject",value:function(){ShaderProgram.addBlock(Light.block,shaderSrc_pointLight)}}]),o}();Light.types.point=PointLight;var SpotLight=function(){_inherits(o,PointLight);var e=_createSuper(o);function o(h,d){var g;return _classCallCheck(this,o),(g=e.call(this,h,d)).type="spotlight",g.struct_name="SpotLight",g.direction=g._direction=(d.direction||[0,0,-1]).map(parseFloat),g._initial_direction=[g.direction[0],g.direction[1],g.direction[2]],g.exponent=d.exponent?parseFloat(d.exponent):.2,g.angle=d.angle?parseFloat(d.angle):20,g}return _createClass(o,[{key:"setupProgram",value:function(h){_get(_getPrototypeOf(o.prototype),"setupProgram",this).call(this,h),h.uniform("3fv","u_".concat(this.name,".direction"),this.direction),h.uniform("1f","u_".concat(this.name,".spotCosCutoff"),Math.cos(3.14159*this.angle/180)),h.uniform("1f","u_".concat(this.name,".spotExponent"),this.exponent)}},{key:"update",value:function(){_get(_getPrototypeOf(o.prototype),"update",this).call(this),vec3.transformMat4(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"direction",get:function(){return this._direction},set:function(h){this._direction=Vector$1.normalize(Vector$1.copy(h))}}],[{key:"inject",value:function(){ShaderProgram.addBlock(Light.block,shaderSrc_spotLight)}}]),o}();function mergeObjects(e){for(var o=0;o<(arguments.length<=1?0:arguments.length-1);o++){var h=o+1<1||arguments.length<=o+1?void 0:arguments[o+1];if(h)for(var d in h){var g=h[d];g===null||_typeof(g)!=="object"||Array.isArray(g)?g!==void 0&&(e[d]=g):e[d]===null||_typeof(e[d])!=="object"||Array.isArray(e[d])?e[d]=mergeObjects({},g):e[d]=mergeObjects(e[d],g)}}return e}Light.types.spotlight=SpotLight;var shaderSrc_selectionFragment=`
#ifdef TANGRAM_FEATURE_SELECTION
varying vec4 v_selection_color;
#endif
void main(void){
#ifdef TANGRAM_FEATURE_SELECTION
gl_FragColor=v_selection_color;
#else
gl_FragColor=vec4(0.,0.,0.,1.);
#endif
}`,shaderSrc_selectionCropFragment=`
#pragma tangram: utils
#ifdef TANGRAM_FEATURE_SELECTION
uniform float u_meters_per_pixel;varying vec4 v_selection_color;varying vec4 v_local_space_position;
#endif
void main(void){
#ifdef TANGRAM_FEATURE_SELECTION
if(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}else{gl_FragColor=v_selection_color;}
#else
gl_FragColor=vec4(0.,0.,0.,1.);
#endif
}`,shaderSrc_rasters=`#ifdef TANGRAM_FRAGMENT_SHADER
uniform sampler2D u_raster;uniform vec3 u_raster_offset;
#define sampleRaster() (texture2D(u_raster, v_modelpos_base_zoom.xy * u_raster_offset.z + u_raster_offset.xy))
#endif
`,Style={init:function(e){var o=0<arguments.length&&e!==void 0?e:{},h=o.generation,d=o.styles,g=o.sources,_=g===void 0?{}:g,$=o.introspection,j=o.id,_t=j!==void 0?j+"/":"";this.scene_id=j,this.textureManager=getTextureManager(j),this.main_thread_target="".concat(_t,"Style/").concat(this.name),this.setGeneration(h),this.styles=d,this.sources=_,this.defines=this.hasOwnProperty("defines")&&this.defines||{},this.shaders=this.hasOwnProperty("shaders")&&this.shaders||{},this.introspection=$||!1,this.selection=this.selection||this.introspection||!1,this.compile_setup=!1,this.program=null,this.selection_program=null,this.feature_style={},this.vertex_template=[],this.tile_data={},this.defines.TANGRAM_WORLD_POSITION_WRAP=1e5,this.blend=this.blend||"opaque",this.defines["TANGRAM_BLEND_".concat(this.blend.toUpperCase())]=!0,this.blend_order==null&&(this.blend_order=-1),this.removeShaderBlock("setup"),this.material instanceof Material||(Material.isValid(this.material)||(this.material=StyleParser.defaults.material),this.material=new Material(this.material)),this.material.inject(this),Light.setMode(this.lighting,this),this.setupRasters(),this.initialized=!0},destroy:function(){this.program&&(this.program.destroy(),this.program=null),this.selection_program&&(this.selection_program.destroy(),this.selection_program=null),WorkerBroker.removeTarget(this.main_thread_target),this.gl=null,this.initialized=!1},reset:function(){},baseStyle:function(){return this.base||this.name},setGeneration:function(e){this.generation=e,Thread.is_main&&WorkerBroker.addTarget(this.main_thread_target,this)},fillVertexTemplate:function(e,o,h,d){var g=d.size,_=(_=d.offset)===void 0?0:_,$=e.index[o];if($!==void 0)for(var j=0;j<g;++j){var _t=h.length>j?h[j]:h;this.vertex_template[$+j+_]=_t}else log("warn","Style: in style '".concat(this.name,"', no index found in vertex layout for attribute '").concat(o,"'"))},startData:function(e){this.tile_data[e.id]=this.tile_data[e.id]||{meshes:{},uniforms:{},textures:[]}},endData:function(e){var o=this.tile_data[e.id];if(this.tile_data[e.id]=null,o&&0<Object.keys(o.meshes).length){for(var h in o.meshes){var d=o.meshes[h];d.vertex_data.vertex_count!==0?(d.vertex_data.end(),d.vertex_elements=d.vertex_data.element_buffer,d.vertex_data=d.vertex_data.vertex_buffer):delete o.meshes[h]}return e.mesh_data[this.name]=o,this.buildRasterTextures(e,o).then(function(g){return g})}return Promise.resolve(null)},hasDataForTile:function(e){return this.tile_data[e.id]!=null},getTileMesh:function(e,o){var h=this.tile_data[e.id].meshes;return h[o.key]==null&&(h[o.key]={variant:o,vertex_data:this.vertexLayoutForMeshVariant(o).createVertexData()}),h[o.key]},vertexLayoutForMeshVariant:function(){return this.vertex_layout},default_mesh_variant:{key:0},style_mesh_variants:{default:{variants:{0:{variant:{key:0},times_unref:0}}}},addMeshVariantForDraw:function(e,o){this.style_mesh_variants[e]||(this.style_mesh_variants[e]={variants:{}});var h=this.computeVariantForDraw(o);return this.style_mesh_variants[e].variants[h.key]={variant:h,times_unref:0},this.style_mesh_variants[e].variants[h.key].variant},getMeshVariantTypeForDraw:function(e){return this.getMeshVariantType(this.base,e)},getMeshVariantType:function(e,o){e===void 0&&(e="default");var h=this.style_mesh_variants[e];if(o.variantKey===void 0||!h||!h.variants[o.variantKey])return this.addMeshVariantForDraw(e,o);var d=o.variantKey,g=h.variants[d];return g.times_unref=0,g.variant},updateMeshVariantTypeCache:function(e){for(var o in this.style_mesh_variants){var h=this.style_mesh_variants[o].variants;for(var d in h){var g=h[d];g.times_unref++,g.times_unref>e&&(o!=="default"||+d!=0)&&(delete h[d],Object.keys(h).length===0&&delete this.style_mesh_variants[o])}}},computeVariantForDraw:function(){return this.default_mesh_variant},addFeature:function(e,o,h){var d=h.tile;this.tile_data[d.id]||this.startData(d);var g,_,$,j,_t=this.parseFeature(e,o,h);_t&&(g=this.base==="lines"?this.getMeshVariantTypeForDraw(o):this.getMeshVariantTypeForDraw(_t),$=(_=this.getTileMesh(d,g)).vertex_data.offset,j=_.vertex_data.vertex_count,0<this.buildGeometry(e.geometry,_t,_,h)?e.generation=this.generation:_.vertex_data.vertex_count>j&&(_.vertex_data.vertex_buffer.fill(0,$,_.vertex_data.offset),_.vertex_data.vertex_count=j,_.vertex_data.offset=$))},buildGeometry:function(e,o,h,d){var g;return e.type==="Polygon"?g=this.buildPolygons([e.coordinates],o,h,d):e.type==="MultiPolygon"?g=this.buildPolygons(e.coordinates,o,h,d):e.type==="LineString"?g=this.buildLines([e.coordinates],o,h,d):e.type==="MultiLineString"?g=this.buildLines(e.coordinates,o,h,d):e.type==="Point"?g=this.buildPoints([e.coordinates],o,h,d):e.type==="MultiPoint"&&(g=this.buildPoints(e.coordinates,o,h,d)),g},parseFeature:function(e,o,h){try{var d,g,_,$=this.feature_style;if($.order=this.parseOrder(o.order,h),$.order==null&&this.blend!=="overlay"){var j="Layer '".concat(o.layers.join(", "),"', draw group '").concat(o.group,"': ");return j+="'order' parameter is required unless blend mode is 'overlay'",o.order!=null&&(j+="; 'order' was set to a dynamic value (e.g. string tied to feature property, ",j+="or JS function), but evaluated to null for one or more features"),void log({level:"warn",once:!0},j)}return($=this._parseFeature(e,o,h))?(this.selection?$.interactive=StyleParser.evalProperty(this.introspection||o.interactive,h):$.interactive=!1,$.interactive===!0?(g=(d=FeatureSelection.makeEntry()).color,_=d.key,$.selection_color=g,h.tile.selection_data||(h.tile.selection_data={}),h.tile.selection_data[_]={id:e.id||_,properties:e.properties,source_name:h.source,source_layer:h.layer,layers:h.layers}):$.selection_color=FeatureSelection.defaultColor,$):void 0}catch(_t){log("error","Style.parseFeature: style parsing error",e,$,_t.stack)}},_parseFeature:function(){return this.feature_style},preprocess:function(e,o){if(!e.preprocessed){if(this.draw)for(var h in this.draw){var d=this.draw[h];_typeof(d)!=="object"||Array.isArray(d)?e[h]==null&&(e[h]=d):e[h]=mergeObjects({},d,e[h])}var g=o||"";if(!(e=this._preprocess(e,g)))return;e.preprocessed=!0}return e},_preprocess:function(e){return e},parseOrder:function(e,o){return typeof e!="number"?StyleParser.calculateOrder(e,o):e},scaleOrder:function(e){return 2*e},parseColor:function(e,o){return e?StyleParser.evalCachedColorProperty(e,o):this.shaders.blocks.color||this.shaders.blocks.filter?StyleParser.defaults.color:void 0},buildPolygons:function(){return 0},buildLines:function(){return 0},buildPoints:function(){return 0},setGL:function(e){this.gl=e,this.max_texture_size=this.textureManager.getMaxTextureSize(this.gl)},makeMesh:function(e,o,h){var d=2<arguments.length&&h!==void 0?h:{},g=this.vertexLayoutForMeshVariant(d.variant);return new VBOMesh(this.gl,e,o,g,this.scene_id,d)},render:function(e){return e.render()},getProgram:function(e){var o=0<arguments.length&&e!==void 0?e:"program";this.compileSetup();var h=this[o];if(h&&!h.error){if(!h.compiled)try{h.compile()}catch(d){log("error","Style: error compiling program for style '".concat(this.name,"' (program key '").concat(o,"')"),this,d.stack)}return h}},compileSetup:function(){if(!this.compile_setup){if(!this.gl)throw new Error("style.compile(): skipping for ".concat(this.name," because no GL context"));var e,o=this.buildDefineList();this.selection&&((e=Object.assign({},o)).TANGRAM_FEATURE_SELECTION=!0);var h=this.shaders&&this.shaders.blocks,d=this.shaders&&this.shaders.block_scopes,g=Object.assign({},this.shaders&&this.shaders.uniforms);for(var _ in g)g[_]==null&&log({level:"warn",once:!0},"Style '".concat(this.name,"' has invalid uniform '").concat(_,"': uniform values must be non-null"));var $=this.shaders&&this.shaders.extensions;typeof $=="string"&&($=[$]),this.program=new ShaderProgram(this.gl,this.vertex_shader_src,this.fragment_shader_src,this.scene_id,{name:this.name,defines:o,uniforms:g,blocks:h,block_scopes:d,extensions:$}),this.selection?this.selection_program=new ShaderProgram(this.gl,this.vertex_shader_src,this.crop_by_tile?shaderSrc_selectionCropFragment:shaderSrc_selectionFragment,this.scene_id,{name:this.name+" (selection)",defines:e,uniforms:g,blocks:h,block_scopes:d,extensions:$}):this.selection_program=null,this.compile_setup=!0}},addShaderBlock:function(e,o,h){var d=2<arguments.length&&h!==void 0?h:null;this.shaders.blocks=this.shaders.blocks||{},this.shaders.blocks[e]=this.shaders.blocks[e]||[],this.shaders.blocks[e].push(o),this.shaders.block_scopes=this.shaders.block_scopes||{},this.shaders.block_scopes[e]=this.shaders.block_scopes[e]||[],this.shaders.block_scopes[e].push(d)},removeShaderBlock:function(e){this.shaders.blocks&&(this.shaders.blocks[e]=null)},replaceShaderBlock:function(e,o,h){var d=2<arguments.length&&h!==void 0?h:null;this.removeShaderBlock(e),this.addShaderBlock(e,o,d)},buildDefineList:function(){var e={};if(this.defines!=null)for(var o in this.defines)e[o]=this.defines[o];if(this.shaders!=null&&this.shaders.defines!=null)for(o in this.shaders.defines)e[o]=this.shaders.defines[o];return e},hasRasters:function(){return-1<["color","normal","custom"].indexOf(this.raster)},setupRasters:function(){if(!Thread.is_main||!this.hasRasters())return!1;this.raster==="color"?this.defines.TANGRAM_RASTER_TEXTURE_COLOR=!0:this.raster==="normal"&&(this.defines.TANGRAM_RASTER_TEXTURE_NORMAL=!0);var e=!1;for(var o in this.sources)if(this.sources[o]instanceof RasterTileSource){e=!0;break}return!!e&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",shaderSrc_rasters,"Raster"),!0)},buildRasterTextures:function(e,o){var h=this;if(!this.hasRasters())return Promise.resolve(o);var d={};return e.rasters.map(function(g){return h.sources[g]}).filter(function(g){return g}).forEach(function(g,_){var $;g instanceof RasterTileSource&&($=g.tileTexture(e),d[$.url]=$)}),Object.keys(d).length===0?Promise.resolve(o):WorkerBroker.postMessage(this.main_thread_target+".loadTextures",d).then(function(g){if(!g||g.length<1)return log("trace","Missing texture info for tile ".concat(e.key)),null;if(g.some(function(_e){return!_e.loaded}))return null;o.uniforms=o.uniforms||{},o.textures=o.textures||[];var _,$,j=g[0].name,_t=d[j].coords;return o.uniforms.u_raster=j,o.textures.push(j),e.coords.z>_t.z?(_=e.coords.z-_t.z,$=Math.pow(2,_),o.uniforms.u_raster_offset=[(e.coords.x%$+$)%$/$,($-1-e.coords.y%$)/$,1/$]):o.uniforms.u_raster_offset=[0,0,1],o})},loadTextures:function(e){var o=this;return this.textureManager.createFromObject(this.gl,e).then(function(){return Promise.all(Object.keys(e).map(function(h){return o.textureManager.textures[h]&&o.textureManager.textures[h].load()}).filter(function(h){return h}))}).then(function(h){return h.forEach(function(d){return d.retain()}),h.map(function(d){return{name:d.name,width:d.width,height:d.height,loaded:d.loaded}})})},setup:function(){this.setUniforms(),this.material.setupProgram(ShaderProgram.current)},setUniforms:function(){var e=ShaderProgram.current;e&&e.setUniforms(this.shaders&&this.shaders.uniforms,!0)},render_states:{opaque:{depth_test:!0,depth_write:!0},translucent:{depth_test:!0,depth_write:!0},add:{depth_test:!0,depth_write:!1},multiply:{depth_test:!0,depth_write:!1},inlay:{depth_test:!0,depth_write:!1},overlay:{depth_test:!1,depth_write:!1}},default_blend_orders:{opaque:0,add:1,multiply:2,inlay:3,translucent:4,overlay:5},sortByBlendOrderWithinLayers:function(e){var o=[],h={};for(var d in e.forEach(function(g){var _=parseInt(g.name,10)||0;h[_]||(h[_]=[]),h[_].push(g)}),h)o.push.apply(o,_toConsumableArray(h[d].sort(Style.blendOrderSort)));return o},blendOrderSort:function(e,o){return e.blend==="opaque"||o.blend==="opaque"?e.blend==="opaque"&&o.blend==="opaque"?e.name<o.name?-1:1:e.blend==="opaque"?-1:1:e.blend_order<o.blend_order||!(e.blend_order>o.blend_order)&&(Style.default_blend_orders[e.blend]<Style.default_blend_orders[o.blend]||!(Style.default_blend_orders[e.blend]>Style.default_blend_orders[o.blend])&&e.name<o.name)?-1:1}},id$1=0,build_id=0,Tile=function(){function e(o){var h=o.coords,d=o.style_zoom,g=o.source,_=o.worker,$=o.view,j=o.sceneId;_classCallCheck(this,e),this.textureManager=getTextureManager(j),this.id=id$1++,this.worker=_,this.view=$,this.source=g,this.generation=null,this.valid=!0,this.proxy_for=null,this.proxy_depth=0,this.proxied_as=null,this.fade_in=!0,this.loading=!1,this.loaded=!1,this.built=!1,this.labeled=!1,this.error=null,this.style_zoom=d,this.coords=e.normalizedCoordinate(h,this.source,this.style_zoom),this.key=e.key(this.coords,this.source,this.style_zoom),this.overzoom=Math.max(this.style_zoom-this.coords.z,0),this.overzoom2=Math.pow(2,this.overzoom),this.min=Geo$1.metersForTile(this.coords),this.max=Geo$1.metersForTile({x:this.coords.x+1,y:this.coords.y+1,z:this.coords.z}),this.span={x:this.max.x-this.min.x,y:this.max.y-this.min.y},this.bounds={sw:{x:this.min.x,y:this.max.y},ne:{x:this.max.x,y:this.min.y}},this.center_dist=0,this.meters_per_pixel=Geo$1.metersPerPixel(this.style_zoom),this.meters_per_pixel_sq=this.meters_per_pixel*this.meters_per_pixel,this.units_per_pixel=Geo$1.units_per_pixel/this.overzoom2,this.units_per_meter_overzoom=Geo$1.unitsPerMeter(this.coords.z)*this.overzoom2,this.meshes={},this.new_mesh_styles=[]}return _createClass(e,[{key:"freeResources",value:function(){for(var o in this.meshes)this.meshes[o].forEach(function(h){return h.destroy()});this.meshes={}}},{key:"destroy",value:function(){Task.removeForTile(this.id),this.workerMessage("self.removeTile",this.id),this.freeResources(),this.worker=null,this.valid=!1}},{key:"buildAsMessage",value:function(){return{id:this.id,key:this.key,source:this.source.name,coords:this.coords,min:this.min,max:this.max,units_per_pixel:this.units_per_pixel,meters_per_pixel:this.meters_per_pixel,meters_per_pixel_sq:this.meters_per_pixel_sq,units_per_meter_overzoom:this.units_per_meter_overzoom,style_zoom:this.style_zoom,overzoom:this.overzoom,overzoom2:this.overzoom2,generation:this.generation}}},{key:"workerMessage",value:function(){for(var o=arguments.length,h=new Array(o),d=0;d<o;d++)h[d]=arguments[d];return WorkerBroker.postMessage.apply(WorkerBroker,[this.worker].concat(h))}},{key:"build",value:function(o,h){var d=(1<arguments.length&&h!==void 0?h:{}).fade_in,g=d===void 0||d;return this.generation=o,this.fade_in=g,this.loaded||(this.loading=!0,this.built=!1,this.labeled=!1),this.workerMessage("self.buildTile",{tile:this.buildAsMessage()})}},{key:"buildMeshes",value:function(o,h){if(!this.error){this.build_id=build_id++;var d={},g=this.mesh_data;if(g)for(var _ in g){for(var $ in g[_].meshes){var j=g[_].meshes[$];if(j.vertex_data){if(!o[_]){log("warn","Could not create mesh because style '".concat(_,"' not found, for tile ").concat(this.key,", aborting tile"));break}var _t=Object.assign({},g[_]);_t.uniforms=Object.assign({},_t.uniforms,j.uniforms),_t.variant=j.variant,j.textures&&(_t.textures=j.textures),j.labels&&(_t.retain=!0);var _e=o[_].makeMesh(j.vertex_data,j.vertex_elements,_t);_e.variant=_t.variant,_e.labels=j.labels,d[_]=d[_]||[],d[_].push(_e),_e.variant.order==null&&(_e.variant.order=d[_].length-1)}}d[_]&&d[_].sort(function(_i,_o){var _a=_i.variant.order,_u=_o.variant.order;return _a!=null&&(_u==null||_a<_u)?-1:1})}for(var _r in delete this.mesh_data,d)this.meshes[_r]&&this.meshes[_r].forEach(function(_i){return _i.destroy()}),this.meshes[_r]=d[_r],this.new_mesh_styles.push(_r);if(h.done){for(var _n in this.meshes)this.new_mesh_styles.indexOf(_n)===-1&&(this.meshes[_n].forEach(function(_i){return _i.destroy()}),delete this.meshes[_n]);this.new_mesh_styles=[]}}}},{key:"setProxyFor",value:function(o){o?(this.proxy_for=this.proxy_for||[],this.proxy_for.push(o),this.proxy_depth=1,o.proxied_as=o.style_zoom>this.style_zoom?"child":"parent"):(this.proxy_for=null,this.proxy_depth=0)}},{key:"isProxy",value:function(){return this.proxy_for!=null}},{key:"shouldProxyForStyle",value:function(o){return!this.proxy_for||this.proxy_for.some(function(h){return h.meshes[o]==null})}},{key:"setupProgram",value:function(o,h){var d=o.model,g=o.model32;h.uniform("4fv","u_tile_origin",[this.min.x,this.min.y,this.style_zoom,this.coords.z]),h.uniform("1f","u_tile_proxy_depth",this.proxy_depth),mat4.identity(d),mat4.translate(d,d,vec3.fromValues(this.min.x,this.min.y,0)),mat4.scale(d,d,vec3.fromValues(this.span.x/Geo$1.tile_scale,-1*this.span.y/Geo$1.tile_scale,1)),mat4.copy(g,d),h.uniform("Matrix4fv","u_model",g),h.uniform("1i","u_tile_fade_in",this.fade_in&&this.proxied_as!=="child")}},{key:"merge",value:function(o){return this.loading=o.loading,this.loaded=o.loaded,this.generation=o.generation,this.error=o.error,this.mesh_data=o.mesh_data,this.selection_data?Object.assign(this.selection_data,o.selection_data):this.selection_data=o.selection_data,this}}],[{key:"coord",value:function(o){return{x:o.x,y:o.y,z:o.z,key:e.coordKey(o)}}},{key:"coordKey",value:function(o){return o.x+"/"+o.y+"/"+o.z}},{key:"key",value:function(o,h,d){if(!(o.y<0||o.y>=1<<o.z||o.z<0))return[h.name,d,o.x,o.y,o.z].join("/")}},{key:"normalizedKey",value:function(o,h,d){return e.key(e.normalizedCoordinate(o,h,d),h,d)}},{key:"normalizedCoordinate",value:function(o,h){return h.zoom_bias&&(o=e.coordinateAtZoom(o,Math.max(0,o.z-h.zoom_bias))),e.coordinateWithMaxZoom(o,h.max_zoom)}},{key:"coordinateAtZoom",value:function(o,h){var d,g=o.x,_=o.y,$=o.z;return $!==h&&(d=Math.pow(2,$-h),g=Math.floor(g/d),_=Math.floor(_/d),$=h),e.coord({x:g,y:_,z:$})}},{key:"coordinateWithMaxZoom",value:function(o,h){var d=o.x,g=o.y,_=o.z;return h!==void 0&&h<_?e.coordinateAtZoom({x:d,y:g,z:_},h):e.coord({x:d,y:g,z:_})}},{key:"childrenForCoordinate",value:function(o){var h=o.x,d=o.y,g=o.z,_=o.key;return e.coord_children[_]||(g++,h*=2,d*=2,e.coord_children[_]=[e.coord({x:h,y:d,z:g}),e.coord({x:h+1,y:d,z:g}),e.coord({x:h,y:d+1,z:g}),e.coord({x:h+1,y:d+1,z:g})]),e.coord_children[_]}},{key:"isDescendant",value:function(o,h){if(h.z>o.z){var d=e.coordinateAtZoom(h,o.z),g=d.x,_=d.y;return o.x===g&&o.y===_}return!1}},{key:"cancel",value:function(o){o&&(o.canceled=!0,o.source_data&&o.source_data.request_id&&(Utils$1.cancelRequest(o.source_data.request_id),o.source_data.request_id=null),e.abortBuild(o))}},{key:"buildGeometry",value:function(o,h){var d=h.scene_id,g=h.layers,_=h.styles,$=h.global,j=h.sources,_t=h.meshVariantMaxLife,_e=o.source_data;for(var _r in Collision.startTile(o.id,{apply_repeat_groups:!0}),g){var _n=g[_r];if(_n&&_n.config_data){if(_n.config_data.source===o.source)for(var _i=e._getDataForSource(_e,_n.config_data,_r),_o=0;_o<_i.length;_o++){var _a=_i[_o],_u=_a.geom;if(_u)for(var _f=0;_f<_u.features.length;_f++){var _h=_u.features[_f];if(_h.geometry!=null){var _d=StyleParser.getFeatureParseContext(_h,o,$,j);_d.winding=o.default_winding,_d.source=o.source,_d.layer=_a.layer;var ty=_n.buildDrawGroups(_d,!0);if(ty)for(var ey in ty){var sy=ty[ey],ny=sy.style||ey,uy=_[ny];uy?(sy=uy.preprocess(sy,o.source))!=null&&sy.visible!==!1&&(_d.layers=sy.layers,uy.addFeature(_h,sy,_d)):log("warn","Style '".concat(ny,"' not found, skipping layer '").concat(_r,"':"),sy,_h)}}}}}else log("warn","Layer ".concat(_r," was defined without a geometry data source and will not be rendered."))}var fy=e._stylesForTile(o,_);e._sendStyleGroups(o,fy,{scene_id:d,meshVariantMaxLife:_t},function(yy){return yy.collision?"collision":"non-collision"})}},{key:"_stylesForTile",value:function(o,h){var d=[];for(var g in h)h[g].hasDataForTile(o)&&d.push(h[g]);return d}},{key:"_sendStyleGroups",value:function(o,h,d,g){var _=d.scene_id,$=d.meshVariantMaxLife,j={};h.forEach(function(_t){var _e=g(_t);j[_e]=j[_e]||[],j[_e].push(_t)}),0<Object.keys(j).length?function(){var _t={start:!0};o.mesh_data={};for(var _e in j)(function(_r){var _n=j[_r];Promise.all(_n.map(function(_i){return _i.endData(o)})).then(function(){log("trace","Finished style group '".concat(_r,"' for tile ").concat(o.key)),j[_r]=[],Object.keys(j).every(function(_i){return j[_i].length===0})&&(_t.done=!0),WorkerBroker.postMessage("TileManager_".concat(_,".buildTileStylesCompleted"),WorkerBroker.withTransferables({tile:e.slice(o,["mesh_data","selection_data"]),progress:_t})),_t.start=null,o.mesh_data={},o.selection_data={},_t.done&&Collision.resetTile(o.id)},function(_i){log("error","Error for style group '".concat(_r,"' for tile ").concat(o.key),_i)})})(_e);Style.updateMeshVariantTypeCache($)}():(WorkerBroker.postMessage("TileManager_".concat(_,".buildTileStylesCompleted"),WorkerBroker.withTransferables({tile:e.slice(o),progress:{start:!0,done:!0}})),Collision.resetTile(o.id))}},{key:"_getDataForSource",value:function(o,h,d){var g=2<arguments.length&&d!==void 0?d:null,_=[];return h!=null&&o!=null&&o.layers!=null&&(!h.layer&&o.layers._default||typeof h.layer=="string"&&!o.layers[h.layer]&&new RegExp("^\\d+_"+h.layer+"$").test(g)&&o.layers._default?_.push({geom:o.layers._default}):!h.layer&&g?_.push({layer:g,geom:o.layers[g]}):typeof h.layer=="string"?_.push({layer:h.layer,geom:o.layers[h.layer]}):Array.isArray(h.layer)&&h.layer.forEach(function($){o.layers[$]&&o.layers[$].features&&_.push({layer:$,geom:o.layers[$]})})),_}},{key:"abortBuild",value:function(o,h){if(Task.removeForTile(o.id),Collision.abortTile(o.id),o.mesh_data)for(var d in o.mesh_data){var g=o.mesh_data[d].textures;g&&g.forEach(function(_){var $=getTextureManager(h).textures[_];$&&(log("trace","releasing texture ".concat(_," for tile ").concat(o.key)),$.release())})}}},{key:"slice",value:function(o,h){var d=["id","key","loading","loaded","generation","error","debug"];Array.isArray(h)&&d.push.apply(d,_toConsumableArray(h));for(var g={},_=0;_<d.length;_++){var $=d[_];g[$]=o[$]}return g}}]),e}();Tile.coord_children={};var RasterTileSource=function(){_inherits(o,NetworkTileSource);var e=_createSuper(o);function o(h,d){var g;return _classCallCheck(this,o),(g=e.call(this,h,d)).rasters.indexOf(g.name)===-1&&g.rasters.unshift(g.name),g.filtering=h.filtering,g.textures={},g}return _createClass(o,[{key:"load",value:function(h){h.source_data={},h.source_data.layers={},h.pad_scale=this.pad_scale,h.rasters=_toConsumableArray(this.rasters);var d=Geo$1.tile_scale;return h.source_data.layers={_default:{type:"FeatureCollection",features:[{geometry:{type:"Polygon",coordinates:[[[0,0],[d,0],[d,-d],[0,-d],[0,0]]]},properties:{}}]}},h.default_winding="CW",Promise.resolve(h)}},{key:"tileTexture",value:function(h){var d,g,_=h.coords.key;return this.textures[_]||(d=Tile.coordinateWithMaxZoom(h.coords,this.max_zoom),g=this.formatUrl(this.url,{coords:d}),this.textures[_]={url:g,filtering:this.filtering,coords:d}),this.textures[_]}}]),o}(),ArrayUtils;DataSource.register(RasterTileSource,"Raster");var ArrayUtils$1=ArrayUtils={};function simplify(e,o,h,d){for(var g,_=d,$=h-o>>1,j=h-o,_t=e[o],_e=e[o+1],_r=e[h],_n=e[h+1],_i=o+3;_i<h;_i+=3){var _o,_a=getSqSegDist(e[_i],e[_i+1],_t,_e,_r,_n);_<_a?(g=_i,_=_a):_a!==_||(_o=Math.abs(_i-$))<j&&(g=_i,j=_o)}d<_&&(3<g-o&&simplify(e,o,g,d),e[g+2]=_,3<h-g&&simplify(e,g,h,d))}function getSqSegDist(e,o,h,d,g,_){var $,j=g-h,_t=_-d;return j===0&&_t===0||(1<($=((e-h)*j+(o-d)*_t)/(j*j+_t*_t))?(h=g,d=_):0<$&&(h+=j*$,d+=_t*$)),(j=e-h)*j+(_t=o-d)*_t}function createFeature(e,o,h,d){var g={id:e===void 0?null:e,type:o,geometry:h,tags:d,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return calcBBox(g),g}function calcBBox(e){var o=e.geometry,h=e.type;if(h==="Point"||h==="MultiPoint"||h==="LineString")calcLineBBox(e,o);else if(h==="Polygon"||h==="MultiLineString")for(var d=0;d<o.length;d++)calcLineBBox(e,o[d]);else if(h==="MultiPolygon")for(d=0;d<o.length;d++)for(var g=0;g<o[d].length;g++)calcLineBBox(e,o[d][g])}function calcLineBBox(e,o){for(var h=0;h<o.length;h+=3)e.minX=Math.min(e.minX,o[h]),e.minY=Math.min(e.minY,o[h+1]),e.maxX=Math.max(e.maxX,o[h]),e.maxY=Math.max(e.maxY,o[h+1])}function convert(e,o){var h=[];if(e.type==="FeatureCollection")for(var d=0;d<e.features.length;d++)convertFeature(h,e.features[d],o,d);else e.type==="Feature"?convertFeature(h,e,o):convertFeature(h,{geometry:e},o);return h}function convertFeature(e,o,h,d){if(o.geometry){var g=o.geometry.coordinates,_=o.geometry.type,$=Math.pow(h.tolerance/((1<<h.maxZoom)*h.extent),2),j=[],_t=o.id;if(h.promoteId?_t=o.properties[h.promoteId]:h.generateId&&(_t=d||0),_==="Point")convertPoint(g,j);else if(_==="MultiPoint")for(var _e=0;_e<g.length;_e++)convertPoint(g[_e],j);else if(_==="LineString")convertLine(g,j,$,!1);else if(_==="MultiLineString"){if(h.lineMetrics){for(_e=0;_e<g.length;_e++)j=[],convertLine(g[_e],j,$,!1),e.push(createFeature(_t,"LineString",j,o.properties));return}convertLines(g,j,$,!1)}else if(_==="Polygon")convertLines(g,j,$,!0);else{if(_!=="MultiPolygon"){if(_!=="GeometryCollection")throw new Error("Input data is not a valid GeoJSON object.");for(_e=0;_e<o.geometry.geometries.length;_e++)convertFeature(e,{id:_t,geometry:o.geometry.geometries[_e],properties:o.properties},h,d);return}for(_e=0;_e<g.length;_e++){var _r=[];convertLines(g[_e],_r,$,!0),j.push(_r)}}e.push(createFeature(_t,_,j,o.properties))}}function convertPoint(e,o){o.push(projectX(e[0])),o.push(projectY(e[1])),o.push(0)}function convertLine(e,o,h,d){for(var g,_,$=0,j=0;j<e.length;j++){var _t=projectX(e[j][0]),_e=projectY(e[j][1]);o.push(_t),o.push(_e),o.push(0),0<j&&($+=d?(g*_e-_t*_)/2:Math.sqrt(Math.pow(_t-g,2)+Math.pow(_e-_,2))),g=_t,_=_e}var _r=o.length-3;o[2]=1,simplify(o,0,_r,h),o[2+_r]=1,o.size=Math.abs($),o.start=0,o.end=o.size}function convertLines(e,o,h,d){for(var g=0;g<e.length;g++){var _=[];convertLine(e[g],_,h,d),o.push(_)}}function projectX(e){return e/360+.5}function projectY(e){var o=Math.sin(e*Math.PI/180),h=.5-.25*Math.log((1+o)/(1-o))/Math.PI;return h<0?0:1<h?1:h}function clip(e,o,h,d,g,_,$,j){if(d/=o,(h/=o)<=_&&$<d)return e;if($<h||d<=_)return null;for(var _t=[],_e=0;_e<e.length;_e++){var _r=e[_e],_n=_r.geometry,_i=_r.type,_o=g===0?_r.minX:_r.minY,_a=g===0?_r.maxX:_r.maxY;if(h<=_o&&_a<d)_t.push(_r);else if(!(_a<h||d<=_o)){var _u=[];if(_i==="Point"||_i==="MultiPoint")clipPoints(_n,_u,h,d,g);else if(_i==="LineString")clipLine(_n,_u,h,d,g,!1,j.lineMetrics);else if(_i==="MultiLineString")clipLines(_n,_u,h,d,g,!1);else if(_i==="Polygon")clipLines(_n,_u,h,d,g,!0);else if(_i==="MultiPolygon")for(var _f=0;_f<_n.length;_f++){var _h=[];clipLines(_n[_f],_h,h,d,g,!0),_h.length&&_u.push(_h)}if(_u.length){if(j.lineMetrics&&_i==="LineString"){for(_f=0;_f<_u.length;_f++)_t.push(createFeature(_r.id,_i,_u[_f],_r.tags));continue}_i!=="LineString"&&_i!=="MultiLineString"||(_u.length===1?(_i="LineString",_u=_u[0]):_i="MultiLineString"),_i!=="Point"&&_i!=="MultiPoint"||(_i=_u.length===3?"Point":"MultiPoint"),_t.push(createFeature(_r.id,_i,_u,_r.tags))}}}return _t.length?_t:null}function clipPoints(e,o,h,d,g){for(var _=0;_<e.length;_+=3){var $=e[_+g];h<=$&&$<=d&&(o.push(e[_]),o.push(e[_+1]),o.push(e[_+2]))}}function clipLine(e,o,h,d,g,_,$){for(var j,_t,_e=newSlice(e),_r=g===0?intersectX:intersectY,_n=e.start,_i=0;_i<e.length-3;_i+=3){var ty=e[_i],ey=e[_i+1],sy=e[_i+2],_o=e[_i+3],_a=e[_i+4],_u=g===0?ty:ey,_f=g===0?_o:_a,_h=!1;$&&(j=Math.sqrt(Math.pow(ty-_o,2)+Math.pow(ey-_a,2))),_u<h?h<_f&&(_t=_r(_e,ty,ey,_o,_a,h),$&&(_e.start=_n+j*_t)):d<_u?_f<d&&(_t=_r(_e,ty,ey,_o,_a,d),$&&(_e.start=_n+j*_t)):addPoint(_e,ty,ey,sy),_f<h&&h<=_u&&(_t=_r(_e,ty,ey,_o,_a,h),_h=!0),d<_f&&_u<=d&&(_t=_r(_e,ty,ey,_o,_a,d),_h=!0),!_&&_h&&($&&(_e.end=_n+j*_t),o.push(_e),_e=newSlice(e)),$&&(_n+=j)}var _d=e.length-3,ty=e[_d],ey=e[_d+1],sy=e[_d+2];h<=(_u=g===0?ty:ey)&&_u<=d&&addPoint(_e,ty,ey,sy),_d=_e.length-3,_&&3<=_d&&(_e[_d]!==_e[0]||_e[_d+1]!==_e[1])&&addPoint(_e,_e[0],_e[1],_e[2]),_e.length&&o.push(_e)}function newSlice(e){var o=[];return o.size=e.size,o.start=e.start,o.end=e.end,o}function clipLines(e,o,h,d,g,_){for(var $=0;$<e.length;$++)clipLine(e[$],o,h,d,g,_,!1)}function addPoint(e,o,h,d){e.push(o),e.push(h),e.push(d)}function intersectX(e,o,h,d,g,_){var $=(_-o)/(d-o);return e.push(_),e.push(h+(g-h)*$),e.push(1),$}function intersectY(e,o,h,d,g,_){var $=(_-h)/(g-h);return e.push(o+(d-o)*$),e.push(_),e.push(1),$}function wrap(e,o){var h=o.buffer/o.extent,d=e,g=clip(e,1,-1-h,h,0,-1,2,o),_=clip(e,1,1-h,2+h,0,-1,2,o);return(g||_)&&(d=clip(e,1,-h,1+h,0,-1,2,o)||[],g&&(d=shiftFeatureCoords(g,1).concat(d)),_&&(d=d.concat(shiftFeatureCoords(_,-1)))),d}function shiftFeatureCoords(e,o){for(var h=[],d=0;d<e.length;d++){var g,_=e[d],$=_.type;if($==="Point"||$==="MultiPoint"||$==="LineString")g=shiftCoords(_.geometry,o);else if($==="MultiLineString"||$==="Polygon"){g=[];for(var j=0;j<_.geometry.length;j++)g.push(shiftCoords(_.geometry[j],o))}else if($==="MultiPolygon")for(g=[],j=0;j<_.geometry.length;j++){for(var _t=[],_e=0;_e<_.geometry[j].length;_e++)_t.push(shiftCoords(_.geometry[j][_e],o));g.push(_t)}h.push(createFeature(_.id,$,g,_.tags))}return h}function shiftCoords(e,o){var h=[];h.size=e.size,e.start!==void 0&&(h.start=e.start,h.end=e.end);for(var d=0;d<e.length;d+=3)h.push(e[d]+o,e[d+1],e[d+2]);return h}function transformTile(e,o){if(e.transformed)return e;for(var h,d=1<<e.z,g=e.x,_=e.y,$=0;$<e.features.length;$++){var j=e.features[$],_t=j.geometry,_e=j.type;if(j.geometry=[],_e===1)for(h=0;h<_t.length;h+=2)j.geometry.push(transformPoint(_t[h],_t[h+1],o,d,g,_));else for(h=0;h<_t.length;h++){for(var _r=[],_n=0;_n<_t[h].length;_n+=2)_r.push(transformPoint(_t[h][_n],_t[h][_n+1],o,d,g,_));j.geometry.push(_r)}}return e.transformed=!0,e}function transformPoint(e,o,h,d,g,_){return[Math.round(h*(e*d-g)),Math.round(h*(o*d-_))]}function createTile(e,o,h,d,g){for(var _=o===g.maxZoom?0:g.tolerance/((1<<o)*g.extent),$={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:h,y:d,z:o,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},j=0;j<e.length;j++){$.numFeatures++,addFeature($,e[j],_,g);var _t=e[j].minX,_e=e[j].minY,_r=e[j].maxX,_n=e[j].maxY;_t<$.minX&&($.minX=_t),_e<$.minY&&($.minY=_e),_r>$.maxX&&($.maxX=_r),_n>$.maxY&&($.maxY=_n)}return $}function addFeature(e,o,h,d){var g=o.geometry,_=o.type,$=[];if(_==="Point"||_==="MultiPoint")for(var j=0;j<g.length;j+=3)$.push(g[j]),$.push(g[j+1]),e.numPoints++,e.numSimplified++;else if(_==="LineString")addLine($,g,e,h,!1,!1);else if(_==="MultiLineString"||_==="Polygon")for(j=0;j<g.length;j++)addLine($,g[j],e,h,_==="Polygon",j===0);else if(_==="MultiPolygon")for(var _t=0;_t<g.length;_t++)for(var _e=g[_t],j=0;j<_e.length;j++)addLine($,_e[j],e,h,!0,j===0);if($.length){var _r=o.tags||null;if(_==="LineString"&&d.lineMetrics){for(var _n in _r={},o.tags)_r[_n]=o.tags[_n];_r.mapbox_clip_start=g.start/g.size,_r.mapbox_clip_end=g.end/g.size}var _i={geometry:$,type:_==="Polygon"||_==="MultiPolygon"?3:_==="LineString"||_==="MultiLineString"?2:1,tags:_r};o.id!==null&&(_i.id=o.id),e.features.push(_i)}}function addLine(e,o,h,d,g,_){var $=d*d;if(0<d&&o.size<(g?$:d))h.numPoints+=o.length/3;else{for(var j=[],_t=0;_t<o.length;_t+=3)(d===0||o[_t+2]>$)&&(h.numSimplified++,j.push(o[_t]),j.push(o[_t+1])),h.numPoints++;g&&rewind(j,_),e.push(j)}}function rewind(e,o){for(var h=0,d=0,g=e.length,_=g-2;d<g;_=d,d+=2)h+=(e[d]-e[_])*(e[d+1]+e[_+1]);if(0<h===o)for(d=0,g=e.length;d<g/2;d+=2){var $=e[d],j=e[d+1];e[d]=e[g-2-d],e[d+1]=e[g-1-d],e[g-2-d]=$,e[g-1-d]=j}}ArrayUtils.deepClone=function(e){return Array.isArray(e)?e.map(ArrayUtils.deepClone):e};var defaults={maxZoom:14,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1};function createGeoJsonTile(e,o,h,d,g){var _=Object.assign({},defaults,g),$=convert(e,_),j=getBBox($=wrap($,_)),_t=j.minX,_e=j.minY,_r=j.maxX,_n=j.maxY,_i=1<<o,_o=_.buffer/_.extent,_a=1+_o;return $=clip($,_i,h-_o,h+_a,0,_t,_r,_)||[],transformTile(createTile($=clip($,_i,d-_o,d+_a,1,_e,_n,_)||[],o,h,d,_),_.extent)}function getBBox(e){var o,h=2,d=-1,g=1,_=0,$=_createForOfIteratorHelper(e);try{for($.s();!(o=$.n()).done;){var j=o.value;j.minX<h&&(h=j.minX),j.maxX>d&&(d=j.maxX),j.minY<g&&(g=j.minY),j.maxY>_&&(_=j.maxY)}}catch(_t){$.e(_t)}finally{$.f()}return{minX:h,maxX:d,minY:g,maxY:_}}function PackingSmith(e,o){this.items=[],this.algorithm=e;var h=(o=o||{}).sort===void 0||o.sort;this.sort=h}PackingSmith.prototype={addItem:function(e){this.items.push(e)},normalizeCoordinates:function(){var e=this.items,o=1/0,h=1/0;e.forEach(function(d){var g=d;o=Math.min(o,g.x),h=Math.min(h,g.y)}),e.forEach(function(d){var g=d;g.x-=o,g.y-=h})},getStats:function(){var e=this.items.map(function(_){return _}),o=e.map(function(_){return _.x}),h=e.map(function(_){return _.y}),d=e.map(function(_){return _.x+_.width}),g=e.map(function(_){return _.y+_.height});return{minX:Math.max.apply(Math,o),minY:Math.max.apply(Math,h),maxX:Math.max.apply(Math,d),maxY:Math.max.apply(Math,g)}},getItems:function(){return this.items},processItems:function(){var e=this.items;return this.sort&&(e=this.algorithm.sort(e)),e=this.algorithm.placeItems(e),this.items=e},exportItems:function(){return this.processItems(),this.normalizeCoordinates(),this.items},export:function(){var e=this.exportItems(),o=this.getStats();return{height:o.maxY,width:o.maxX,items:e}}};var packing_smith=PackingSmith,lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,h=e.length;o<h;++o)lookup[o]=e[o],revLookup[e.charCodeAt(o)]=o;revLookup[45]=62,revLookup[95]=63}function toByteArray(e){var o,h,d,g;inited||init();var _=e.length;if(0<_%4)throw new Error("Invalid string. Length must be a multiple of 4");d=e[_-2]==="="?2:e[_-1]==="="?1:0,g=new Arr(3*_/4-d),o=0<d?_-4:_;for(var $=0,j=0;j<o;j+=4,0)h=revLookup[e.charCodeAt(j)]<<18|revLookup[e.charCodeAt(j+1)]<<12|revLookup[e.charCodeAt(j+2)]<<6|revLookup[e.charCodeAt(j+3)],g[$++]=h>>16&255,g[$++]=h>>8&255,g[$++]=255&h;return d==2?(h=revLookup[e.charCodeAt(j)]<<2|revLookup[e.charCodeAt(j+1)]>>4,g[$++]=255&h):d==1&&(h=revLookup[e.charCodeAt(j)]<<10|revLookup[e.charCodeAt(j+1)]<<4|revLookup[e.charCodeAt(j+2)]>>2,g[$++]=h>>8&255,g[$++]=255&h),g}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[63&e]}function encodeChunk(e,o,h){for(var d,g=[],_=o;_<h;_+=3)d=(e[_]<<16)+(e[_+1]<<8)+e[_+2],g.push(tripletToBase64(d));return g.join("")}function fromByteArray(e){var o;inited||init();for(var h=e.length,d=h%3,g="",_=[],$=0,j=h-d;$<j;$+=16383)_.push(encodeChunk(e,$,j<$+16383?j:$+16383));return d==1?(o=e[h-1],g+=lookup[o>>2],g+=lookup[o<<4&63],g+="=="):d==2&&(o=(e[h-2]<<8)+e[h-1],g+=lookup[o>>10],g+=lookup[o>>4&63],g+=lookup[o<<2&63],g+="="),_.push(g),_.join("")}function read$1(e,o,h,d,g){var _,$,j=8*g-d-1,_t=(1<<j)-1,_e=_t>>1,_r=-7,_n=h?g-1:0,_i=h?-1:1,_o=e[o+_n];for(_n+=_i,_=_o&(1<<-_r)-1,_o>>=-_r,_r+=j;0<_r;_=256*_+e[o+_n],_n+=_i,_r-=8);for($=_&(1<<-_r)-1,_>>=-_r,_r+=d;0<_r;$=256*$+e[o+_n],_n+=_i,_r-=8);if(_===0)_=1-_e;else{if(_===_t)return $?NaN:1/0*(_o?-1:1);$+=Math.pow(2,d),_-=_e}return(_o?-1:1)*$*Math.pow(2,_-d)}function write$1(e,o,h,d,g,_){var $,j,_t,_e=8*_-g-1,_r=(1<<_e)-1,_n=_r>>1,_i=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,_o=d?0:_-1,_a=d?1:-1,_u=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(j=isNaN(o)?1:0,$=_r):($=Math.floor(Math.log(o)/Math.LN2),o*(_t=Math.pow(2,-$))<1&&($--,_t*=2),2<=(o+=1<=$+_n?_i/_t:_i*Math.pow(2,1-_n))*_t&&($++,_t/=2),_r<=$+_n?(j=0,$=_r):1<=$+_n?(j=(o*_t-1)*Math.pow(2,g),$+=_n):(j=o*Math.pow(2,_n-1)*Math.pow(2,g),$=0));8<=g;e[h+_o]=255&j,_o+=_a,j/=256,g-=8);for($=$<<g|j,_e+=g;0<_e;e[h+_o]=255&$,_o+=_a,$/=256,_e-=8);e[h+_o-_a]|=128*_u}var toString$1={}.toString,isArray=Array.isArray||function(e){return toString$1.call(e)=="[object Array]"},INSPECT_MAX_BYTES=50;Buffer.TYPED_ARRAY_SUPPORT=global$1.TYPED_ARRAY_SUPPORT===void 0||global$1.TYPED_ARRAY_SUPPORT;var _kMaxLength=kMaxLength();function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,o){if(kMaxLength()<o)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(o)).__proto__=Buffer.prototype:(e===null&&(e=new Buffer(o)),e.length=o),e}function Buffer(e,o,h){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(e,o,h);if(typeof e!="number")return from(this,e,o,h);if(typeof o=="string")throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}function from(e,o,h,d){if(typeof o=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&o instanceof ArrayBuffer?fromArrayBuffer(e,o,h,d):typeof o=="string"?fromString$1(e,o,h):fromObject(e,o)}function assertSize(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,o,h,d){return assertSize(o),!(o<=0)&&h!==void 0?typeof d=="string"?createBuffer(e,o).fill(h,d):createBuffer(e,o).fill(h):createBuffer(e,o)}function allocUnsafe(e,o){if(assertSize(o),e=createBuffer(e,o<0?0:0|checked(o)),!Buffer.TYPED_ARRAY_SUPPORT)for(var h=0;h<o;++h)e[h]=0;return e}function fromString$1(e,o,h){if(typeof h=="string"&&h!==""||(h="utf8"),!Buffer.isEncoding(h))throw new TypeError('"encoding" must be a valid string encoding');var d=0|byteLength(o,h),g=(e=createBuffer(e,d)).write(o,h);return g!==d&&(e=e.slice(0,g)),e}function fromArrayLike(e,o){var h=o.length<0?0:0|checked(o.length);e=createBuffer(e,h);for(var d=0;d<h;d+=1)e[d]=255&o[d];return e}function fromArrayBuffer(e,o,h,d){if(o.byteLength,h<0||o.byteLength<h)throw new RangeError("'offset' is out of bounds");if(o.byteLength<h+(d||0))throw new RangeError("'length' is out of bounds");return o=h===void 0&&d===void 0?new Uint8Array(o):d===void 0?new Uint8Array(o,h):new Uint8Array(o,h,d),Buffer.TYPED_ARRAY_SUPPORT?(e=o).__proto__=Buffer.prototype:e=fromArrayLike(e,o),e}function fromObject(e,o){if(internalIsBuffer(o)){var h=0|checked(o.length);return(e=createBuffer(e,h)).length===0||o.copy(e,0,0,h),e}if(o){if(typeof ArrayBuffer<"u"&&o.buffer instanceof ArrayBuffer||"length"in o)return typeof o.length!="number"||isnan(o.length)?createBuffer(e,0):fromArrayLike(e,o);if(o.type==="Buffer"&&isArray(o.data))return fromArrayLike(e,o.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function SlowBuffer(e){return+e!=e&&(e=0),Buffer.alloc(+e)}function internalIsBuffer(e){return e!=null&&e._isBuffer}function byteLength(e,o){if(internalIsBuffer(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var h=e.length;if(h===0)return 0;for(var d=!1;;)switch(o){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*h;case"hex":return h>>>1;case"base64":return base64ToBytes(e).length;default:if(d)return utf8ToBytes(e).length;o=(""+o).toLowerCase(),d=!0}}function slowToString(e,o,h){var d=!1;if((o===void 0||o<0)&&(o=0),o>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0)<=(o>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return hexSlice(this,o,h);case"utf8":case"utf-8":return utf8Slice(this,o,h);case"ascii":return asciiSlice(this,o,h);case"latin1":case"binary":return latin1Slice(this,o,h);case"base64":return base64Slice(this,o,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,o,h);default:if(d)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),d=!0}}function swap(e,o,h){var d=e[o];e[o]=e[h],e[h]=d}function bidirectionalIndexOf(e,o,h,d,g){if(e.length===0)return-1;if(typeof h=="string"?(d=h,h=0):2147483647<h?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,isNaN(h)&&(h=g?0:e.length-1),h<0&&(h=e.length+h),h>=e.length){if(g)return-1;h=e.length-1}else if(h<0){if(!g)return-1;h=0}if(typeof o=="string"&&(o=Buffer.from(o,d)),internalIsBuffer(o))return o.length===0?-1:arrayIndexOf$1(e,o,h,d,g);if(typeof o=="number")return o&=255,Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?g?Uint8Array.prototype.indexOf.call(e,o,h):Uint8Array.prototype.lastIndexOf.call(e,o,h):arrayIndexOf$1(e,[o],h,d,g);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf$1(e,o,h,d,g){var _=1,$=e.length,j=o.length;if(d!==void 0&&((d=String(d).toLowerCase())==="ucs2"||d==="ucs-2"||d==="utf16le"||d==="utf-16le")){if(e.length<2||o.length<2)return-1;$/=_=2,j/=2,h/=2}function _t(_o,_a){return _===1?_o[_a]:_o.readUInt16BE(_a*_)}if(g)for(var _e=-1,_r=h;_r<$;_r++)if(_t(e,_r)===_t(o,_e===-1?0:_r-_e)){if(_e===-1&&(_e=_r),_r-_e+1===j)return _e*_}else _e!==-1&&(_r-=_r-_e),_e=-1;else for($<h+j&&(h=$-j),_r=h;0<=_r;_r--){for(var _n=!0,_i=0;_i<j;_i++)if(_t(e,_r+_i)!==_t(o,_i)){_n=!1;break}if(_n)return _r}return-1}function hexWrite(e,o,h,d){h=Number(h)||0;var g=e.length-h;(!d||g<(d=Number(d)))&&(d=g);var _=o.length;if(_%2!=0)throw new TypeError("Invalid hex string");_/2<d&&(d=_/2);for(var $=0;$<d;++$){var j=parseInt(o.substr(2*$,2),16);if(isNaN(j))return $;e[h+$]=j}return $}function utf8Write(e,o,h,d){return blitBuffer(utf8ToBytes(o,e.length-h),e,h,d)}function asciiWrite(e,o,h,d){return blitBuffer(asciiToBytes(o),e,h,d)}function latin1Write(e,o,h,d){return asciiWrite(e,o,h,d)}function base64Write(e,o,h,d){return blitBuffer(base64ToBytes(o),e,h,d)}function ucs2Write(e,o,h,d){return blitBuffer(utf16leToBytes(o,e.length-h),e,h,d)}function base64Slice(e,o,h){return o===0&&h===e.length?fromByteArray(e):fromByteArray(e.slice(o,h))}function utf8Slice(e,o,h){h=Math.min(e.length,h);for(var d=[],g=o;g<h;){var _,$,j,_t,_e=e[g],_r=null,_n=239<_e?4:223<_e?3:191<_e?2:1;if(g+_n<=h)switch(_n){case 1:_e<128&&(_r=_e);break;case 2:(192&(_=e[g+1]))==128&&127<(_t=(31&_e)<<6|63&_)&&(_r=_t);break;case 3:_=e[g+1],$=e[g+2],(192&_)==128&&(192&$)==128&&2047<(_t=(15&_e)<<12|(63&_)<<6|63&$)&&(_t<55296||57343<_t)&&(_r=_t);break;case 4:_=e[g+1],$=e[g+2],j=e[g+3],(192&_)==128&&(192&$)==128&&(192&j)==128&&65535<(_t=(15&_e)<<18|(63&_)<<12|(63&$)<<6|63&j)&&_t<1114112&&(_r=_t)}_r===null?(_r=65533,_n=1):65535<_r&&(_r-=65536,d.push(_r>>>10&1023|55296),_r=56320|1023&_r),d.push(_r),g+=_n}return decodeCodePointsArray(d)}Buffer.poolSize=8192,Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e},Buffer.from=function(e,o,h){return from(null,e,o,h)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array),Buffer.alloc=function(e,o,h){return alloc(null,e,o,h)},Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer.isBuffer=isBuffer,Buffer.compare=function(e,o){if(!internalIsBuffer(e)||!internalIsBuffer(o))throw new TypeError("Arguments must be Buffers");if(e===o)return 0;for(var h=e.length,d=o.length,g=0,_=Math.min(h,d);g<_;++g)if(e[g]!==o[g]){h=e[g],d=o[g];break}return h<d?-1:d<h?1:0},Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(e,o){if(!isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Buffer.alloc(0);if(o===void 0)for(g=o=0;g<e.length;++g)o+=e[g].length;for(var h=Buffer.allocUnsafe(o),d=0,g=0;g<e.length;++g){var _=e[g];if(!internalIsBuffer(_))throw new TypeError('"list" argument must be an Array of Buffers');_.copy(h,d),d+=_.length}return h},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var o=0;o<e;o+=2)swap(this,o,o+1);return this},Buffer.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var o=0;o<e;o+=4)swap(this,o,o+3),swap(this,o+1,o+2);return this},Buffer.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var o=0;o<e;o+=8)swap(this,o,o+7),swap(this,o+1,o+6),swap(this,o+2,o+5),swap(this,o+3,o+4);return this},Buffer.prototype.toString=function(){var e=0|this.length;return e==0?"":arguments.length===0?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(e){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||Buffer.compare(this,e)===0},Buffer.prototype.inspect=function(){var e="",o=INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,o).match(/.{2}/g).join(" "),this.length>o&&(e+=" ... ")),"<Buffer "+e+">"},Buffer.prototype.compare=function(e,o,h,d,g){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");if(o===void 0&&(o=0),h===void 0&&(h=e?e.length:0),d===void 0&&(d=0),g===void 0&&(g=this.length),o<0||h>e.length||d<0||g>this.length)throw new RangeError("out of range index");if(g<=d&&h<=o)return 0;if(g<=d)return-1;if(h<=o)return 1;if(this===e)return 0;for(var _=(g>>>=0)-(d>>>=0),$=(h>>>=0)-(o>>>=0),j=Math.min(_,$),_t=this.slice(d,g),_e=e.slice(o,h),_r=0;_r<j;++_r)if(_t[_r]!==_e[_r]){_=_t[_r],$=_e[_r];break}return _<$?-1:$<_?1:0},Buffer.prototype.includes=function(e,o,h){return this.indexOf(e,o,h)!==-1},Buffer.prototype.indexOf=function(e,o,h){return bidirectionalIndexOf(this,e,o,h,!0)},Buffer.prototype.lastIndexOf=function(e,o,h){return bidirectionalIndexOf(this,e,o,h,!1)},Buffer.prototype.write=function(e,o,h,d){if(o===void 0)d="utf8",h=this.length,o=0;else if(h===void 0&&typeof o=="string")d=o,h=this.length,o=0;else{if(!isFinite(o))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");o|=0,isFinite(h)?(h|=0,d===void 0&&(d="utf8")):(d=h,h=void 0)}var g=this.length-o;if((h===void 0||g<h)&&(h=g),0<e.length&&(h<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");d=d||"utf8";for(var _=!1;;)switch(d){case"hex":return hexWrite(this,e,o,h);case"utf8":case"utf-8":return utf8Write(this,e,o,h);case"ascii":return asciiWrite(this,e,o,h);case"latin1":case"binary":return latin1Write(this,e,o,h);case"base64":return base64Write(this,e,o,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,o,h);default:if(_)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),_=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(e){var o=e.length;if(o<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);for(var h="",d=0;d<o;)h+=String.fromCharCode.apply(String,e.slice(d,d+=MAX_ARGUMENTS_LENGTH));return h}function asciiSlice(e,o,h){var d="";h=Math.min(e.length,h);for(var g=o;g<h;++g)d+=String.fromCharCode(127&e[g]);return d}function latin1Slice(e,o,h){var d="";h=Math.min(e.length,h);for(var g=o;g<h;++g)d+=String.fromCharCode(e[g]);return d}function hexSlice(e,o,h){var d=e.length;(!o||o<0)&&(o=0),(!h||h<0||d<h)&&(h=d);for(var g="",_=o;_<h;++_)g+=toHex(e[_]);return g}function utf16leSlice(e,o,h){for(var d=e.slice(o,h),g="",_=0;_<d.length;_+=2)g+=String.fromCharCode(d[_]+256*d[_+1]);return g}function checkOffset(e,o,h){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(h<e+o)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,o,h,d,g,_){if(!internalIsBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(g<o||o<_)throw new RangeError('"value" argument is out of bounds');if(h+d>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,o,h,d){o<0&&(o=65535+o+1);for(var g=0,_=Math.min(e.length-h,2);g<_;++g)e[h+g]=(o&255<<8*(d?g:1-g))>>>8*(d?g:1-g)}function objectWriteUInt32(e,o,h,d){o<0&&(o=4294967295+o+1);for(var g=0,_=Math.min(e.length-h,4);g<_;++g)e[h+g]=o>>>8*(d?g:3-g)&255}function checkIEEE754(e,o,h,d,g,_){if(h+d>e.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function writeFloat(e,o,h,d,g){return g||checkIEEE754(e,o,h,4),write$1(e,o,h,d,23,4),h+4}function writeDouble(e,o,h,d,g){return g||checkIEEE754(e,o,h,8),write$1(e,o,h,d,52,8),h+8}Buffer.prototype.slice=function(e,o){var h=this.length;if((e=~~e)<0?(e+=h)<0&&(e=0):h<e&&(e=h),(o=o===void 0?h:~~o)<0?(o+=h)<0&&(o=0):h<o&&(o=h),o<e&&(o=e),Buffer.TYPED_ARRAY_SUPPORT)(g=this.subarray(e,o)).__proto__=Buffer.prototype;else for(var d=o-e,g=new Buffer(d,void 0),_=0;_<d;++_)g[_]=this[_+e];return g},Buffer.prototype.readUIntLE=function(e,o,h){e|=0,o|=0,h||checkOffset(e,o,this.length);for(var d=this[e],g=1,_=0;++_<o&&(g*=256);)d+=this[e+_]*g;return d},Buffer.prototype.readUIntBE=function(e,o,h){e|=0,o|=0,h||checkOffset(e,o,this.length);for(var d=this[e+--o],g=1;0<o&&(g*=256);)d+=this[e+--o]*g;return d},Buffer.prototype.readUInt8=function(e,o){return o||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function(e,o){return o||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function(e,o){return o||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function(e,o){return o||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function(e,o){return o||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function(e,o,h){e|=0,o|=0,h||checkOffset(e,o,this.length);for(var d=this[e],g=1,_=0;++_<o&&(g*=256);)d+=this[e+_]*g;return(g*=128)<=d&&(d-=Math.pow(2,8*o)),d},Buffer.prototype.readIntBE=function(e,o,h){e|=0,o|=0,h||checkOffset(e,o,this.length);for(var d=o,g=1,_=this[e+--d];0<d&&(g*=256);)_+=this[e+--d]*g;return(g*=128)<=_&&(_-=Math.pow(2,8*o)),_},Buffer.prototype.readInt8=function(e,o){return o||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function(e,o){o||checkOffset(e,2,this.length);var h=this[e]|this[e+1]<<8;return 32768&h?4294901760|h:h},Buffer.prototype.readInt16BE=function(e,o){o||checkOffset(e,2,this.length);var h=this[e+1]|this[e]<<8;return 32768&h?4294901760|h:h},Buffer.prototype.readInt32LE=function(e,o){return o||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function(e,o){return o||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function(e,o){return o||checkOffset(e,4,this.length),read$1(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function(e,o){return o||checkOffset(e,4,this.length),read$1(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function(e,o){return o||checkOffset(e,8,this.length),read$1(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function(e,o){return o||checkOffset(e,8,this.length),read$1(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function(e,o,h,d){e=+e,o|=0,h|=0,d||checkInt(this,e,o,h,Math.pow(2,8*h)-1,0);var g=1,_=0;for(this[o]=255&e;++_<h&&(g*=256);)this[o+_]=e/g&255;return o+h},Buffer.prototype.writeUIntBE=function(e,o,h,d){e=+e,o|=0,h|=0,d||checkInt(this,e,o,h,Math.pow(2,8*h)-1,0);var g=h-1,_=1;for(this[o+g]=255&e;0<=--g&&(_*=256);)this[o+g]=e/_&255;return o+h},Buffer.prototype.writeUInt8=function(e,o,h){return e=+e,o|=0,h||checkInt(this,e,o,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[o]=255&e,o+1},Buffer.prototype.writeUInt16LE=function(e,o,h){return e=+e,o|=0,h||checkInt(this,e,o,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[o]=255&e,this[o+1]=e>>>8):objectWriteUInt16(this,e,o,!0),o+2},Buffer.prototype.writeUInt16BE=function(e,o,h){return e=+e,o|=0,h||checkInt(this,e,o,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[o]=e>>>8,this[o+1]=255&e):objectWriteUInt16(this,e,o,!1),o+2},Buffer.prototype.writeUInt32LE=function(e,o,h){return e=+e,o|=0,h||checkInt(this,e,o,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[o+3]=e>>>24,this[o+2]=e>>>16,this[o+1]=e>>>8,this[o]=255&e):objectWriteUInt32(this,e,o,!0),o+4},Buffer.prototype.writeUInt32BE=function(e,o,h){return e=+e,o|=0,h||checkInt(this,e,o,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[o]=e>>>24,this[o+1]=e>>>16,this[o+2]=e>>>8,this[o+3]=255&e):objectWriteUInt32(this,e,o,!1),o+4},Buffer.prototype.writeIntLE=function(e,o,h,d){var g;e=+e,o|=0,d||checkInt(this,e,o,h,(g=Math.pow(2,8*h-1))-1,-g);var _=0,$=1,j=0;for(this[o]=255&e;++_<h&&($*=256);)e<0&&j===0&&this[o+_-1]!==0&&(j=1),this[o+_]=(e/$>>0)-j&255;return o+h},Buffer.prototype.writeIntBE=function(e,o,h,d){var g;e=+e,o|=0,d||checkInt(this,e,o,h,(g=Math.pow(2,8*h-1))-1,-g);var _=h-1,$=1,j=0;for(this[o+_]=255&e;0<=--_&&($*=256);)e<0&&j===0&&this[o+_+1]!==0&&(j=1),this[o+_]=(e/$>>0)-j&255;return o+h},Buffer.prototype.writeInt8=function(e,o,h){return e=+e,o|=0,h||checkInt(this,e,o,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[o]=255&e,o+1},Buffer.prototype.writeInt16LE=function(e,o,h){return e=+e,o|=0,h||checkInt(this,e,o,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[o]=255&e,this[o+1]=e>>>8):objectWriteUInt16(this,e,o,!0),o+2},Buffer.prototype.writeInt16BE=function(e,o,h){return e=+e,o|=0,h||checkInt(this,e,o,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[o]=e>>>8,this[o+1]=255&e):objectWriteUInt16(this,e,o,!1),o+2},Buffer.prototype.writeInt32LE=function(e,o,h){return e=+e,o|=0,h||checkInt(this,e,o,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[o]=255&e,this[o+1]=e>>>8,this[o+2]=e>>>16,this[o+3]=e>>>24):objectWriteUInt32(this,e,o,!0),o+4},Buffer.prototype.writeInt32BE=function(e,o,h){return e=+e,o|=0,h||checkInt(this,e,o,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[o]=e>>>24,this[o+1]=e>>>16,this[o+2]=e>>>8,this[o+3]=255&e):objectWriteUInt32(this,e,o,!1),o+4},Buffer.prototype.writeFloatLE=function(e,o,h){return writeFloat(this,e,o,!0,h)},Buffer.prototype.writeFloatBE=function(e,o,h){return writeFloat(this,e,o,!1,h)},Buffer.prototype.writeDoubleLE=function(e,o,h){return writeDouble(this,e,o,!0,h)},Buffer.prototype.writeDoubleBE=function(e,o,h){return writeDouble(this,e,o,!1,h)},Buffer.prototype.copy=function(e,o,h,d){if(h=h||0,d||d===0||(d=this.length),o>=e.length&&(o=e.length),o=o||0,0<d&&d<h&&(d=h),d===h||e.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("sourceStart out of bounds");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),e.length-o<d-h&&(d=e.length-o+h);var g,_=d-h;if(this===e&&h<o&&o<d)for(g=_-1;0<=g;--g)e[g+o]=this[g+h];else if(_<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(g=0;g<_;++g)e[g+o]=this[g+h];else Uint8Array.prototype.set.call(e,this.subarray(h,h+_),o);return _},Buffer.prototype.fill=function(e,o,h,d){if(typeof e=="string"){var g;if(typeof o=="string"?(d=o,o=0,h=this.length):typeof h=="string"&&(d=h,h=this.length),e.length!==1||(g=e.charCodeAt(0))<256&&(e=g),d!==void 0&&typeof d!="string")throw new TypeError("encoding must be a string");if(typeof d=="string"&&!Buffer.isEncoding(d))throw new TypeError("Unknown encoding: "+d)}else typeof e=="number"&&(e&=255);if(o<0||this.length<o||this.length<h)throw new RangeError("Out of range index");if(h<=o)return this;if(o>>>=0,h=h===void 0?this.length:h>>>0,typeof(e=e||0)=="number")for(j=o;j<h;++j)this[j]=e;else for(var _=internalIsBuffer(e)?e:utf8ToBytes(new Buffer(e,d).toString()),$=_.length,j=0;j<h-o;++j)this[j+o]=_[j%$];return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(e){if((e=stringtrim(e).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,o){var h;o=o||1/0;for(var d=e.length,g=null,_=[],$=0;$<d;++$){if(55295<(h=e.charCodeAt($))&&h<57344){if(!g){if(56319<h){-1<(o-=3)&&_.push(239,191,189);continue}if($+1===d){-1<(o-=3)&&_.push(239,191,189);continue}g=h;continue}if(h<56320){-1<(o-=3)&&_.push(239,191,189),g=h;continue}h=65536+(g-55296<<10|h-56320)}else g&&-1<(o-=3)&&_.push(239,191,189);if(g=null,h<128){if(--o<0)break;_.push(h)}else if(h<2048){if((o-=2)<0)break;_.push(h>>6|192,63&h|128)}else if(h<65536){if((o-=3)<0)break;_.push(h>>12|224,h>>6&63|128,63&h|128)}else{if(!(h<1114112))throw new Error("Invalid code point");if((o-=4)<0)break;_.push(h>>18|240,h>>12&63|128,h>>6&63|128,63&h|128)}}return _}function asciiToBytes(e){for(var o=[],h=0;h<e.length;++h)o.push(255&e.charCodeAt(h));return o}function utf16leToBytes(e,o){for(var h,d,g,_=[],$=0;$<e.length&&!((o-=2)<0);++$)d=(h=e.charCodeAt($))>>8,g=h%256,_.push(g),_.push(d);return _}function base64ToBytes(e){return toByteArray(base64clean(e))}function blitBuffer(e,o,h,d){for(var g=0;g<d&&!(g+h>=o.length||g>=e.length);++g)o[g+h]=e[g];return g}function isnan(e){return e!=e}function isBuffer(e){return e!=null&&(!!e._isBuffer||isFastBuffer(e)||isSlowBuffer(e))}function isFastBuffer(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&isFastBuffer(e.slice(0,0))}var bufferEs6=Object.freeze({INSPECT_MAX_BYTES,kMaxLength:_kMaxLength,Buffer,SlowBuffer,isBuffer});global$1.setTimeout,global$1.clearTimeout;var performance$1=global$1.performance||{};performance$1.now||performance$1.mozNow||performance$1.msNow||performance$1.oNow||performance$1.webkitNow;var inherits,inherits=typeof Object.create=="function"?function(e,o){e.super_=o,e.prototype=Object.create(o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,o){e.super_=o;function h(){}h.prototype=o.prototype,e.prototype=new h,e.prototype.constructor=e},inherits$1=inherits;function inspect(e,o){var h={seen:[],stylize:stylizeNoColor};return 3<=arguments.length&&(h.depth=arguments[2]),4<=arguments.length&&(h.colors=arguments[3]),isBoolean(o)?h.showHidden=o:o&&_extend(h,o),isUndefined(h.showHidden)&&(h.showHidden=!1),isUndefined(h.depth)&&(h.depth=2),isUndefined(h.colors)&&(h.colors=!1),isUndefined(h.customInspect)&&(h.customInspect=!0),h.colors&&(h.stylize=stylizeWithColor),formatValue(h,e,h.depth)}function stylizeWithColor(e,o){var h=inspect.styles[o];return h?"\x1B["+inspect.colors[h][0]+"m"+e+"\x1B["+inspect.colors[h][1]+"m":e}function stylizeNoColor(e,o){return e}function arrayToHash(e){var o={};return e.forEach(function(h,d){o[h]=!0}),o}function formatValue(e,o,h){if(e.customInspect&&o&&isFunction(o.inspect)&&o.inspect!==inspect&&(!o.constructor||o.constructor.prototype!==o)){var d=o.inspect(h,e);return isString(d)||(d=formatValue(e,d,h)),d}var g=formatPrimitive(e,o);if(g)return g;var _=Object.keys(o),$=arrayToHash(_);if(e.showHidden&&(_=Object.getOwnPropertyNames(o)),isError(o)&&(0<=_.indexOf("message")||0<=_.indexOf("description")))return formatError(o);if(_.length===0){if(isFunction(o)){var j=o.name?": "+o.name:"";return e.stylize("[Function"+j+"]","special")}if(isRegExp(o))return e.stylize(RegExp.prototype.toString.call(o),"regexp");if(isDate(o))return e.stylize(Date.prototype.toString.call(o),"date");if(isError(o))return formatError(o)}var _t,_e="",_r=!1,_n=["{","}"];return isArray$1(o)&&(_r=!0,_n=["[","]"]),isFunction(o)&&(_e=" [Function"+(o.name?": "+o.name:"")+"]"),isRegExp(o)&&(_e=" "+RegExp.prototype.toString.call(o)),isDate(o)&&(_e=" "+Date.prototype.toUTCString.call(o)),isError(o)&&(_e=" "+formatError(o)),_.length!==0||_r&&o.length!=0?h<0?isRegExp(o)?e.stylize(RegExp.prototype.toString.call(o),"regexp"):e.stylize("[Object]","special"):(e.seen.push(o),_t=_r?formatArray(e,o,h,$,_):_.map(function(_i){return formatProperty(e,o,h,$,_i,_r)}),e.seen.pop(),reduceToSingleString(_t,_e,_n)):_n[0]+_e+_n[1]}function formatPrimitive(e,o){if(isUndefined(o))return e.stylize("undefined","undefined");if(isString(o)){var h="'"+JSON.stringify(o).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(h,"string")}return isNumber(o)?e.stylize(""+o,"number"):isBoolean(o)?e.stylize(""+o,"boolean"):isNull(o)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,o,h,d,g){for(var _=[],$=0,j=o.length;$<j;++$)hasOwnProperty$1(o,String($))?_.push(formatProperty(e,o,h,d,String($),!0)):_.push("");return g.forEach(function(_t){_t.match(/^\d+$/)||_.push(formatProperty(e,o,h,d,_t,!0))}),_}function formatProperty(e,o,h,d,g,_){var $,j,_t=Object.getOwnPropertyDescriptor(o,g)||{value:o[g]};if(_t.get?j=_t.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):_t.set&&(j=e.stylize("[Setter]","special")),hasOwnProperty$1(d,g)||($="["+g+"]"),j||(e.seen.indexOf(_t.value)<0?-1<(j=isNull(h)?formatValue(e,_t.value,null):formatValue(e,_t.value,h-1)).indexOf(`
`)&&(j=_?j.split(`
`).map(function(_e){return"  "+_e}).join(`
`).substr(2):`
`+j.split(`
`).map(function(_e){return"   "+_e}).join(`
`)):j=e.stylize("[Circular]","special")),isUndefined($)){if(_&&g.match(/^\d+$/))return j;$=($=JSON.stringify(""+g)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?($=$.substr(1,$.length-2),e.stylize($,"name")):($=$.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize($,"string"))}return $+": "+j}function reduceToSingleString(e,o,h){return 60<e.reduce(function(d,g){return g.indexOf(`
`),d+g.replace(/\u001b\[\d\d?m/g,"").length+1},0)?h[0]+(o===""?"":o+`
 `)+" "+e.join(`,
  `)+" "+h[1]:h[0]+o+" "+e.join(", ")+" "+h[1]}function isArray$1(e){return Array.isArray(e)}function isBoolean(e){return typeof e=="boolean"}function isNull(e){return e===null}function isNumber(e){return typeof e=="number"}function isString(e){return typeof e=="string"}function isUndefined(e){return e===void 0}function isRegExp(e){return isObject$1(e)&&objectToString$1(e)==="[object RegExp]"}function isObject$1(e){return typeof e=="object"&&e!==null}function isDate(e){return isObject$1(e)&&objectToString$1(e)==="[object Date]"}function isError(e){return isObject$1(e)&&(objectToString$1(e)==="[object Error]"||e instanceof Error)}function isFunction(e){return typeof e=="function"}function isPrimitive(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||e===void 0}function objectToString$1(e){return Object.prototype.toString.call(e)}function _extend(e,o){if(!o||!isObject$1(o))return e;for(var h=Object.keys(o),d=h.length;d--;)e[h[d]]=o[h[d]];return e}function hasOwnProperty$1(e,o){return Object.prototype.hasOwnProperty.call(e,o)}function compare(e,o){if(e===o)return 0;for(var h=e.length,d=o.length,g=0,_=Math.min(h,d);g<_;++g)if(e[g]!==o[g]){h=e[g],d=o[g];break}return h<d?-1:d<h?1:0}inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var hasOwn=Object.prototype.hasOwnProperty,objectKeys$1=Object.keys||function(e){var o=[];for(var h in e)hasOwn.call(e,h)&&o.push(h);return o},pSlice=Array.prototype.slice,_functionsHaveNames;function functionsHaveNames(){return _functionsHaveNames!==void 0?_functionsHaveNames:_functionsHaveNames=(function(){}).name==="foo"}function pToString(e){return Object.prototype.toString.call(e)}function isView(e){if(!isBuffer(e)&&typeof global$1.ArrayBuffer=="function"){if(typeof ArrayBuffer.isView=="function")return ArrayBuffer.isView(e);if(e)return e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)}}function assert(e,o){e||fail(e,!0,o,"==",ok)}var regex=/\s*function\s+([^\(\s]*)\s*/;function getName(e){if(isFunction(e)){if(functionsHaveNames())return e.name;var o=e.toString().match(regex);return o&&o[1]}}function AssertionError(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var o,h,d,g,_,$=e.stackStartFunction||fail;Error.captureStackTrace?Error.captureStackTrace(this,$):(o=new Error).stack&&(_=o.stack,h=getName($),0<=(d=_.indexOf(`
`+h))&&(g=_.indexOf(`
`,d+1),_=_.substring(g+1)),this.stack=_)}function truncate(e,o){return typeof e!="string"||e.length<o?e:e.slice(0,o)}function inspect$1(e){if(functionsHaveNames()||!isFunction(e))return inspect(e);var o=getName(e);return"[Function"+(o?": "+o:"")+"]"}function getMessage(e){return truncate(inspect$1(e.actual),128)+" "+e.operator+" "+truncate(inspect$1(e.expected),128)}function fail(e,o,h,d,g){throw new AssertionError({message:h,actual:e,expected:o,operator:d,stackStartFunction:g})}function ok(e,o){e||fail(e,!0,o,"==",ok)}function equal(e,o,h){e!=o&&fail(e,o,h,"==",equal)}function notEqual(e,o,h){e==o&&fail(e,o,h,"!=",notEqual)}function deepEqual(e,o,h){_deepEqual(e,o,!1)||fail(e,o,h,"deepEqual",deepEqual)}function deepStrictEqual(e,o,h){_deepEqual(e,o,!0)||fail(e,o,h,"deepStrictEqual",deepStrictEqual)}function _deepEqual(e,o,h,d){if(e===o)return!0;if(isBuffer(e)&&isBuffer(o))return compare(e,o)===0;if(isDate(e)&&isDate(o))return e.getTime()===o.getTime();if(isRegExp(e)&&isRegExp(o))return e.source===o.source&&e.global===o.global&&e.multiline===o.multiline&&e.lastIndex===o.lastIndex&&e.ignoreCase===o.ignoreCase;if(e!==null&&typeof e=="object"||o!==null&&typeof o=="object"){if(isView(e)&&isView(o)&&pToString(e)===pToString(o)&&!(e instanceof Float32Array||e instanceof Float64Array))return compare(new Uint8Array(e.buffer),new Uint8Array(o.buffer))===0;if(isBuffer(e)!==isBuffer(o))return!1;var g=(d=d||{actual:[],expected:[]}).actual.indexOf(e);return g!==-1&&g===d.expected.indexOf(o)||(d.actual.push(e),d.expected.push(o),objEquiv(e,o,h,d))}return h?e===o:e==o}function isArguments(e){return Object.prototype.toString.call(e)=="[object Arguments]"}function objEquiv(e,o,h,d){if(e==null||o==null)return!1;if(isPrimitive(e)||isPrimitive(o))return e===o;if(h&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(o))return!1;var g=isArguments(e),_=isArguments(o);if(g&&!_||!g&&_)return!1;if(g)return _deepEqual(e=pSlice.call(e),o=pSlice.call(o),h);var $,j,_t=objectKeys$1(e),_e=objectKeys$1(o);if(_t.length!==_e.length)return!1;for(_t.sort(),_e.sort(),j=_t.length-1;0<=j;j--)if(_t[j]!==_e[j])return!1;for(j=_t.length-1;0<=j;j--)if(!_deepEqual(e[$=_t[j]],o[$],h,d))return!1;return!0}function notDeepEqual(e,o,h){_deepEqual(e,o,!1)&&fail(e,o,h,"notDeepEqual",notDeepEqual)}function notDeepStrictEqual(e,o,h){_deepEqual(e,o,!0)&&fail(e,o,h,"notDeepStrictEqual",notDeepStrictEqual)}function strictEqual(e,o,h){e!==o&&fail(e,o,h,"===",strictEqual)}function notStrictEqual(e,o,h){e===o&&fail(e,o,h,"!==",notStrictEqual)}function expectedException(e,o){if(e&&o){if(Object.prototype.toString.call(o)=="[object RegExp]")return o.test(e);try{if(e instanceof o)return 1}catch{}if(!Error.isPrototypeOf(o))return o.call({},e)===!0}}function _tryBlock(e){var o;try{e()}catch(h){o=h}return o}function _throws(e,o,h,d){var g;if(typeof o!="function")throw new TypeError('"block" argument must be a function');typeof h=="string"&&(d=h,h=null),g=_tryBlock(o),d=(h&&h.name?" ("+h.name+").":".")+(d?" "+d:"."),e&&!g&&fail(g,h,"Missing expected exception"+d);var _=typeof d=="string",$=!e&&g&&!h;if((!e&&isError(g)&&_&&expectedException(g,h)||$)&&fail(g,h,"Got unwanted exception"+d),e&&g&&h&&!expectedException(g,h)||!e&&g)throw g}function throws(e,o,h){_throws(!0,e,o,h)}function doesNotThrow(e,o,h){_throws(!1,e,o,h)}function ifError(e){if(e)throw e}assert.AssertionError=AssertionError,inherits$1(AssertionError,Error),assert.fail=fail,assert.ok=ok,assert.equal=equal,assert.notEqual=notEqual,assert.deepEqual=deepEqual,assert.deepStrictEqual=deepStrictEqual,assert.notDeepEqual=notDeepEqual,assert.notDeepStrictEqual=notDeepStrictEqual,assert.strictEqual=strictEqual,assert.notStrictEqual=notStrictEqual,assert.throws=throws,assert.doesNotThrow=doesNotThrow,assert.ifError=ifError;var sort=function(e){return e.sort(function(o,h){return o.height-h.height}),e},placeItems=function(e){var o=0;return e.forEach(function(h){h.x=0,h.y=o,o+=h.height}),e},topDown_algorithm={sort,placeItems},sort$1=function(e){return e.sort(function(o,h){return o.width-h.width}),e},placeItems$1=function(e){var o=0;return e.forEach(function(h){h.x=o,h.y=0,o+=h.width}),e},leftRight_algorithm={sort:sort$1,placeItems:placeItems$1},sort$2=function(e){return e.sort(function(o,h){return Math.sqrt(Math.pow(o.height,2)+Math.pow(o.width,2))-Math.sqrt(Math.pow(h.height,2)+Math.pow(h.width,2))}),e},placeItems$2=function(e){var o=0,h=0;return e.forEach(function(d){d.x=o,d.y=h,o+=d.width,h+=d.height}),e},diagonal_algorithm={sort:sort$2,placeItems:placeItems$2},sort$3=function(e){return e.sort(function(o,h){return Math.sqrt(Math.pow(o.height,2)+Math.pow(o.width,2))-Math.sqrt(Math.pow(h.height,2)+Math.pow(h.width,2))}),e},placeItems$3=function(e){var o=0,h=0;return e.forEach(function(d){var g=d.width;d.x=o-g,d.y=h,o-=g,h+=d.height}),e},altDiagonal_algorithm={sort:sort$3,placeItems:placeItems$3},GrowingPacker=function(){};GrowingPacker.prototype={fit:function(e){var o,h,d,g,_=e.length,$=0<_?e[0].width:0,j=0<_?e[0].height:0;for(this.root={x:0,y:0,width:$,height:j},o=0;o<_;o++)d=e[o],g=(h=this.findNode(this.root,d.width,d.height))?this.splitNode(h,d.width,d.height):this.growNode(d.width,d.height),d.x=g.x,d.y=g.y},findNode:function(e,o,h){return e.used?this.findNode(e.right,o,h)||this.findNode(e.down,o,h):o<=e.width&&h<=e.height?e:null},splitNode:function(e,o,h){return e.used=!0,e.down={x:e.x,y:e.y+h,width:e.width,height:e.height-h},e.right={x:e.x+o,y:e.y,width:e.width-o,height:h},e},growNode:function(e,o){var h=e<=this.root.width,d=o<=this.root.height,g=d&&this.root.height>=this.root.width+e,_=h&&this.root.width>=this.root.height+o;return g?this.growRight(e,o):_?this.growDown(e,o):d?this.growRight(e,o):h?this.growDown(e,o):null},growRight:function(e,o){var h;return this.root={used:!0,x:0,y:0,width:this.root.width+e,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:e,height:this.root.height}},(h=this.findNode(this.root,e,o))?this.splitNode(h,e,o):null},growDown:function(e,o){var h;return this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+o,down:{x:0,y:this.root.height,width:this.root.width,height:o},right:this.root},(h=this.findNode(this.root,e,o))?this.splitNode(h,e,o):null}};var packer_growing=GrowingPacker,binPack=function(e,o){o=o||{};var h=new packer_growing,d=o.inPlace||!1,g=(g=e.map(function($){return d?$:{width:$.width,height:$.height,item:$}})).sort(function($,j){return j.width*j.height-$.width*$.height});h.fit(g);var _={width:g.reduce(function($,j){return Math.max($,j.x+j.width)},0),height:g.reduce(function($,j){return Math.max($,j.y+j.height)},0)};return d||(_.items=g),_},sort$4=function(e){return e},placeItems$4=function(e){return binPack(e,{inPlace:!0}),e},binaryTree_algorithm={sort:sort$4,placeItems:placeItems$4},algorithms={};function Layout(e,o){var h=e||"top-down";return typeof h=="string"&&assert(h=algorithms[e],"Sorry, the '"+e+"' algorithm could not be loaded."),new packing_smith(h,o)}function addAlgorithm(e,o){algorithms[e]=o}Layout.PackingSmith=packing_smith,Layout.addAlgorithm=addAlgorithm,Layout.algorithms=algorithms,addAlgorithm("top-down",topDown_algorithm),addAlgorithm("left-right",leftRight_algorithm),addAlgorithm("diagonal",diagonal_algorithm),addAlgorithm("alt-diagonal",altDiagonal_algorithm),addAlgorithm("binary-tree",binaryTree_algorithm);var layout=Layout;function isTainting(e){var o;try{e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,1,1)}catch(h){o=h.message}return o}function bitmapToCanvas(e,o,h){var d;return e instanceof HTMLImageElement&&((d=e.ownerDocument.createElement("canvas")).width=o,d.height=h,d.getContext("2d").drawImage(e,0,0,o,h),e=d),e}var MAX_LNG_LAT=Geo$1.metersToLatLng([Geo$1.half_circumference_meters,Geo$1.half_circumference_meters]),TILE_EXPONENT=Math.log(Geo$1.tile_size)/Math.LN2,ICON_READY=1,DOM_MARKER_TYPE=8,GROUP_TYPE=16,TILE_MARGIN=100,AFFECTED_BBOX_CALC_THRESHOLD=10,ObjectSource=function(){_inherits(o,MapsJsSource);var e=_createSuper(o);function o(h,d){var g;return _classCallCheck(this,o),g=e.call(this,h,d),Thread.is_worker&&(g._quad_tree=new ns.H.geo.QuadTree,g._marker_quad_tree=new ns.H.geo.QuadTree,g._tree_entries_by_object_id={},g._groups_by_id={},g._layersCache=new ns.H.util.Cache(100)),Thread.is_main&&(g._objects_by_id={},g._commands=[],g._sendCommands=debounce(g._sendCommands,100,200),g.dispatchUpdate=g.dispatchUpdate.bind(_assertThisInitialized(g))),g}return _createClass(o,[{key:"hasLabeledData",value:function(){return!1}},{key:"onReady",value:function(){this._synced_at=this.provider.getInvalidations().getMark();var h,d,g=this.provider.getRootGroup(),_=g.getObjects(!0),$=[];for(_.push(g),h=_.length;h--;)d=_[h],this._isObjectSupported(d)&&this._shouldBeStored(d)&&(this._objects_by_id[d.getId()]=d,$.push(d.forWorkerMessage()));var j=[{method_name:"addObjects",arguments:[$]}];this._sendImmediateCommands(j)}},{key:"onProviderUpdate",value:function(h){var d,g,_,$,j=h.target,_t=h.currentTarget.getInvalidations(j.type);this._isObjectSupported(j)&&(d=this._synced_at,g=j.getId(),_t.isRemove(d)?(delete this._objects_by_id[g],this._commands.push({method_name:"removeObjectsByIds",arguments:[[g],!0]})):_t.isAdd(d)?this._shouldBeStored(j)&&(this._objects_by_id[g]=j,this._commands.push({method_name:"addObjects",arguments:[[j.forWorkerMessage()]]})):_t.isSpatial(d)||_t.isZOrder(d)?this._shouldBeStored(j)&&(_=[{method_name:"removeObjectsByIds",arguments:[[g],!0]},{method_name:"addObjects",arguments:[[(this._objects_by_id[g]=j).forWorkerMessage()]]}],this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands(_):this._commands.push(_[0],_[1])):_t.isVisual(d)?this._shouldBeStored(j)&&($={method_name:"updateObjectProperties",arguments:[(this._objects_by_id[g]=j).forWorkerMessage()]},this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands([$]):this._commands.push($)):_t.isVolatility(d)&&(delete this._objects_by_id[g],this._commands.push({method_name:"removeObjectsByIds",arguments:[[g],!0]}),this._shouldBeStored(j)&&(this._objects_by_id[g]=j,this._commands.push({method_name:"addObjects",arguments:[[j.forWorkerMessage()]]}))),this._commands.length&&this._sendCommands()),this._synced_at=_t.getMark()}},{key:"_shouldBeStored",value:function(h){return h.type===GROUP_TYPE||(!h.getIcon||h.getIcon().getState()===ICON_READY)&&this._hasSameVolatility(h)}},{key:"_hasSameVolatility",value:function(h){return h.getVolatility(!0)===this.has_volatile_data}},{key:"hasPendingCommands",value:function(){return 0<this._commands.length}},{key:"_sendCommands",value:function(){this._sendImmediateCommands(this._commands),this._commands=[]}},{key:"_sendImmediateCommands",value:function(h){h.length&&WorkerBroker.postMessage(this.worker,this.target_name+".executeCommands",h).then(this.dispatchUpdate)}},{key:"_isObjectSupported",value:function(h){return h.forWorkerMessage&&h.type!==DOM_MARKER_TYPE}},{key:"getSyncedAt",value:function(){return this._synced_at}},{key:"getMapObjectById",value:function(h){return this._objects_by_id[h]}},{key:"getIconBitmapByObjectId",value:function(h,d){var g=this.getMapObjectById(h);if(g){var _=g.getIcon();if(_.uid===d&&_.getState()===ICON_READY){var $=_.getSize();return bitmapToCanvas(_.getBitmap(),$.w,$.h)}}}},{key:"_getRastersForMarkers",value:function(h){for(var d={},g=layout("binary-tree"),_=0;_<h.length;_++){var $=h[_],j=$.properties.icon;d[j.id]||(g.addItem({width:j.size.w,height:j.size.h,meta:{objectId:$.id,id:j.id}}),d[j.id]=!0)}return g.export()}},{key:"fetchFeaturesForTile",value:function(h){var d=[],g=[],_=[],$=[],j=[],_t=this._marker_quad_tree.intersectBoundingBox(Geo$1.getTileBoundingBox(h.coords,this.tile_size));h.source_data.error=null;for(var _e=0;_e<_t.length;_e++){var _r={id:_t[_e].$feature$.id,properties:Object.assign({},_t[_e].$feature$.properties),geometry:{type:_t[_e].$feature$.geometry.type,coordinates:ArrayUtils$1.deepClone(_t[_e].$feature$.geometry.coordinates)}};d.push(_r)}_t=this._quad_tree.intersectBoundingBox(Geo$1.getTileBoundingBox(h.coords,this.tile_size,TILE_MARGIN));for(var _n=0;_n<_t.length;_n++){var _i,_o={id:_t[_n].$feature$.id,properties:Object.assign({},_t[_n].$feature$.properties),geometry:{type:_t[_n].$feature$.geometry.type,coordinates:ArrayUtils$1.deepClone(_t[_n].$feature$.geometry.coordinates)}};_o.properties.overlay?g.push(_o):_o.geometry.type.includes("LineString")?_.push(_o):_o.geometry.type.includes("Polygon")&&($.push(_o),_i={id:_o.id,properties:_o.properties,geometry:{type:_o.geometry.type,coordinates:ArrayUtils$1.deepClone(_o.geometry.coordinates)}},j.push(_i))}d.sort(o._compareZInfo),$.sort(o._compareZInfo),g.sort(o._compareZInfo);var _a=this.has_volatile_data?4096:0;j.sort(o._compareZInfo);for(var _u=0;_u<j.length;_u++)j[_u].properties.effectiveZIdx=_a++;_.sort(o._compareZInfo);for(var _f=0;_f<_.length;_f++)_[_f].properties.effectiveZIdx=_a++;h.source_data.layers.markers={type:"FeatureCollection",features:d},h.source_data.layers.polylines={type:"FeatureCollection",features:_},h.source_data.layers.polygons={type:"FeatureCollection",features:$},h.source_data.layers.outlines={type:"FeatureCollection",features:j},h.source_data.layers.overlays={type:"FeatureCollection",features:g}}},{key:"tileTexture",value:function(h){var d=h.source_data.layers.overlays;if(d){var g=this.name+"_"+h.coords.key,_=Tile.coordinateWithMaxZoom(h.coords,this.max_zoom),$=d.features[0].properties.overlays_config;return{name:g,filtering:this.filtering,coords:_,width:Geo$1.tile_size,height:Geo$1.tile_size,overlays_config:$,source:this.name}}}},{key:"_load",value:function(h){var d=Geo$1.wrapTile(h.coords,{x:!0}),g=d.z,_=d.x,$=d.y,j="".concat(g,"_").concat(_,"_").concat($),_t=this._layersCache.get(j),_e=!1;if(_t)h.source_data.layers=_t;else{this.fetchFeaturesForTile(h);var _r={maxZoom:this.max_zoom,tolerance:1.5,extent:Geo$1.tile_scale},_n=h.source_data.layers.overlays;_n.features.length&&delete h.source_data.layers.overlays;var _i=h.source_data.layers.markers;for(var _o in _i.features.length&&delete h.source_data.layers.markers,h.source_data.layers){var _a,_u=h.source_data.layers[_o];_u.features.length&&(_r.buffer=_o.includes("lines")?TILE_MARGIN*Geo$1.units_per_pixel:0,_a=createGeoJsonTile(_u,g,_,$,_r),h.source_data.layers[_o]=parseGeoJSONVectorTile(_a))}h.source_data.layers.overlays=this._processOverlays(h,_n);for(var _f=h.source_data.layers.overlays.features.length;_f--;)if(!h.source_data.layers.overlays.features[_f].id){_e=!0,this._layersCache.drop(j);break}h.source_data.layers.markers=this._processMarkers(h,_i),this._postProcessTile(h),_e||this._layersCache.add(j,h.source_data.layers,1)}return h.rasters=this._getRastersForMarkers(h.source_data.layers.markers.features),Promise.resolve(h)}},{key:"_processMarkers",value:function(h,d){var g=d.features.length;if(g){for(var _=Geo$1.unitsPerMeter(h.coords.z),$=Geo$1.wrapTile(h.coords,{x:!0}),j=Geo$1.metersForTile($),_t=Geo$1.isLastTile($),_e=Geo$1.wrapMeters(h.min),_r=Geo$1.wrapMeters(h.max),_n=function(_h){DataSource.coordsToMeters(_h);var _d=_slicedToArray(_h,2),ty=_d[0],ey=_d[1],sy=ty>=_e.x&&(_t.column||ty<_r.x)&&ey>=_r.y&&(_t.row||!h.coords.y||ey<_e.y);return DataSource.metersToTileUnits(_,j,_h),sy},_i=[],_o=0;_o<g;_o++){var _a,_u=d.features[_o].geometry,_f=!1;_u.type==="Point"?_n(_a=_u.coordinates)?_u.coordinates=_a:_f=!0:_u.type==="MultiPoint"&&(_u.coordinates=_u.coordinates.filter(_n),_u.coordinates.length===0&&(_f=!0)),_f||_i.push(d.features[_o])}d.features=_i}return d}},{key:"_processOverlays",value:function(h,d){var g=this;if(!d.features.length)return d;var _={coords:h.coords,min:Geo$1.metersForTile(Geo$1.wrapTile(h.coords,{x:!0}))},$={coords:h.coords,source_data:{layers:{_default:{type:"FeatureCollection",features:d.features}}}},j=Math.pow(2,h.coords.z+TILE_EXPONENT);MapsJsSource.projectData($.source_data),MapsJsSource.scaleData($.source_data,_);var _t=d.features.map(function(_r){var _n=_r.geometry.coordinates[0],_i=_n[0],_o=_n[_n.length===5?2:3],_a=Math.floor(_i[0]/Geo$1.tile_scale*Geo$1.tile_size),_u=Math.floor(_i[1]/Geo$1.tile_scale*Geo$1.tile_size),_f=Math.floor(_o[0]/Geo$1.tile_scale*Geo$1.tile_size),_h=Math.floor(_o[1]/Geo$1.tile_scale*Geo$1.tile_size)-_u,_d=_f<=_a,ty=_d?j-(_a-_f):_f-_a,ey=[];return _a<=Geo$1.tile_size&&ey.push([_a,_u,ty,_h]),_d&&0<_f&&ey.push([_a-j,_u,ty,_h]),{id:_r.id,properties:_r.properties,texcoords:ey}}).filter(function(_r){return g._isVisible(_r.properties)&&g.isInMinMaxRange(_r.properties,h.style_zoom)}),_e=Geo$1.tile_scale;return h.pad_scale=this.pad_scale,h.default_winding="CW",d.features=_t.length?[{geometry:{type:"Polygon",coordinates:[[[0,0],[_e,0],[_e,_e],[0,_e],[0,0]]]},properties:{overlays_config:_t}}]:_t,d}},{key:"executeCommands",value:function(h){for(var d,g=h.length<AFFECTED_BBOX_CALC_THRESHOLD,_=0;_<h.length;_++){var $=h[_];$.arguments.push(g);var j=this[$.method_name].apply(this,$.arguments);g&&(j&&d?d.mergeRect(j,!0,d):j&&(d=j))}return d?d.forWorkerMessage():void 0}},{key:"_getClampedGeoRectForFeature",value:function(h){var d=h.geometry.boundingBox;return new ns.H.geo.Rect(MathUtils$1.clamp(d[0],-MAX_LNG_LAT[1],MAX_LNG_LAT[1]),d[1],MathUtils$1.clamp(d[2],-MAX_LNG_LAT[1],MAX_LNG_LAT[1]),d[3])}},{key:"addObjects",value:function(h,d){for(var g,_=1<arguments.length&&d!==void 0&&d,$=0;$<h.length;$++){var j,_t,_e,_r=h[$];_r.type==="Group"?(_r.$children_ids$={},this._groups_by_id[_r.id]=_r):(o._preprocessGeometry(_r.geometry),j=this._getClampedGeoRectForFeature(_r),_&&(g?g.mergeRect(j,!0,g):g=j),(_e=(_t=_r.geometry.type.indexOf("Point")!==-1?this._marker_quad_tree:this._quad_tree).insertBoundingBox(j)).$tree=_t,_e.$feature$=_r,this._tree_entries_by_object_id[_r.id]=_e)}for(var _n=0;_n<h.length;_n++){var _i=h[_n];_i.properties.parent&&(this._groups_by_id[_i.properties.parent].$children_ids$[_i.id]=_i.id),_i.properties.ref={effectiveVisibility:this._isVisible(_i.properties),zInfo:this._getZInfo([],_i)}}return this._layersCache.removeAll(),g}},{key:"removeObjectsByIds",value:function(h,d,g){for(var _,$=2<arguments.length&&g!==void 0&&g,j=0;j<h.length;j++){var _t,_e=h[j],_r=void 0,_n=void 0;(_r=this._tree_entries_by_object_id[_e])?($&&(_t=this._getClampedGeoRectForFeature(_r.$feature$),_?_.mergeRect(_t,!0,_):_=_t),delete this._groups_by_id[_r.$feature$.properties.parent].$children_ids$[_e],_r.$tree.remove(_r),delete this._tree_entries_by_object_id[_e]):(_n=this._groups_by_id[_e])&&(_n.properties.parent&&delete this._groups_by_id[_n.properties.parent].$children_ids$[_e],d&&this.removeObjectsByIds(Object.keys(_n.$children_ids$),!0),delete this._groups_by_id[_e])}return this._layersCache.removeAll(),_}},{key:"updateObjectProperties",value:function(h,d){var g,_=1<arguments.length&&d!==void 0&&d;return h.type==="Group"?(mergeObjects(this._groups_by_id[h.id].properties,h.properties),this._groups_by_id[h.id].properties.ref.effectiveVisibility=this._isVisible(h.properties)):(this._tree_entries_by_object_id[h.id]||this.addObjects([h]),mergeObjects(this._tree_entries_by_object_id[h.id].$feature$.properties,h.properties),this._tree_entries_by_object_id[h.id].$feature$.properties.ref.effectiveVisibility=this._isVisible(h.properties),_&&(g=this._getClampedGeoRectForFeature(h))),g}},{key:"_getZInfo",value:function(h,d){var g=d.properties.zIdx,_=d.properties.sIdx;return h[0]|=g!==void 0,h.splice(1,0,g||0,_<0?d.id:_),d.properties.parent===0?h:this._getZInfo(h,this._groups_by_id[d.properties.parent])}},{key:"_isVisible",value:function(h){var d=h.visible,g=!h.parent||this._isVisible(this._groups_by_id[h.parent].properties);return d&&g}},{key:"isInMinMaxRange",value:function(h,d){var g=h.min<=d&&h.max>=d,_=!h.parent||this.isInMinMaxRange(this._groups_by_id[h.parent].properties,d);return g&&_}},{key:"dispose",value:function(){this._commands=[],_get(_getPrototypeOf(o.prototype),"dispose",this).call(this)}}],[{key:"_compareZInfo",value:function(h,d){for(var g,_=h.properties.ref.zInfo,$=d.properties.ref.zInfo,j=_.length,_t=$.length,_e=Math.min(j,_t),_r=1;_r<_e;_r++)if(g=_[_r]-$[_r])return g;return j-_t}},{key:"_preprocessGeometry",value:function(h){var d=h.type;h.coordinates=d==="Point"?o._processPointCoordinates(h.coordinates):d==="MultiPoint"?h.coordinates.map(o._processPointCoordinates):d==="LineString"?o._processLineStringCoordinates(h.coordinates):d==="MultiLineString"?h.coordinates.map(o._processLineStringCoordinates):d==="Polygon"?h.coordinates.map(o._processPolygonCoordinates):d==="MultiPolygon"?h.coordinates.map(o._processMultiPolygonCoordinates):[]}},{key:"_processPointCoordinates",value:function(h){return[h[1],h[0],h[2]]}},{key:"_processLineStringCoordinates",value:function(h){return o._latLngAltArrayToLineString(h,!1)}},{key:"_processPolygonCoordinates",value:function(h){return o._latLngAltArrayToLineString(h,!0)}},{key:"_processMultiPolygonCoordinates",value:function(h){return h.map(o._processPolygonCoordinates)}},{key:"_latLngAltArrayToLineString",value:function(h,d){for(var g=[],_=h.length,$=0;$<_;$+=3)g.push([h[$+1],h[$]]);return d&&g.push([h[1],h[0]]),g}}]),o}();MapsJsSource.register(ObjectSource,"ObjectSource");var GEOMETRY_TYPE={POLYGON:1,POLYLINE:2,OUTLINE:3},IconMap=function(){function e(){_classCallCheck(this,e),this._map={}}return _createClass(e,[{key:"set",value:function(o,h,d){var g;this._map[o]?this._map[o].accumulator.add(d):((g=new Set).add(d),this._map[o]={value:h,accumulator:g})}},{key:"get",value:function(o){return this._map[o]&&this._map[o].value}},{key:"delete",value:function(o,h){var d=this._map[o];d&&d.accumulator&&(d.accumulator.delete(h),d.accumulator.size===0&&delete this._map[o])}}]),e}(),ObjectTileSource=function(){_inherits(o,MapsJsSource);var e=_createSuper(o);function o(h,d){var g;return _classCallCheck(this,o),g=e.call(this,h,d),Thread.is_worker||(g._icons=new IconMap),g}return _createClass(o,[{key:"onProviderUpdate",value:function(h){h.target instanceof H.map.provider.Tile?this.dispatchUpdate(h.target,h.data):this.dispatchUpdate(void 0,h.data)}},{key:"onReady",value:function(){var h=this.provider;h.setTileCanvasRendering&&h.setTileCanvasRendering(!1),h.providesMarkers()&&(this._onCacheDrop=this._onCacheDrop.bind(this),h.getCache().registerOnDrop(this._onCacheDrop)),this.dispatchUpdate()}},{key:"dispose",value:function(){_get(_getPrototypeOf(o.prototype),"dispose",this).call(this);var h=this.provider;h.providesMarkers()&&h.getCache().deRegisterOnDrop(this._onCacheDrop)}},{key:"_onCacheDrop",value:function(h,d){this.provider.cacheFilter(h)&&this._deleteIcons(h,d.data)}},{key:"_deleteIcons",value:function(h,d){for(var g=0,_=d.length;g<_;g++){var $=d[g].getIcon();this._icons.delete($.uid,h)}}},{key:"getIconBitmapByObjectId",value:function(h,d){var g=this._icons.get(d);return g&&g.getBitmap()}},{key:"requestMarkerTile",value:function(h){var d=this;return new Promise(function(g,_){d.provider?d.provider.requestTileAsPromise(h.x,h.y,h.z,!1).then(function($){var j,_t,_e=[];if($.data)for(_t=(j=$.data).length;_t--;){var _r=j[_t],_n=_r.getIcon();d._icons.set(_n.uid,_n,$.key),_e.push(_r.forWorkerMessage())}g(_e)}):g([])})}},{key:"requestSpatialTile",value:function(h){var d=this;return new Promise(function(g,_){d.provider?d.provider.requestTileAsPromise(h.x,h.y,h.z,!1).then(function($){var j,_t=[];if($.getObjects){j=$.getObjects();for(var _e=0;_e<j.length;_e++){var _r=j[_e];_t.push({id:_r.getId(),geometries:_r.getGeometriesForTile($),isClosed:_r.isClosed(),style:_r.getStyle().forWorkerMessage()})}}g(_t)}):g([])})}},{key:"_pointToArray",value:function(h){var d=Geo$1.tile_scale/this.tile_size;return[h.x*d,h.y*d]}},{key:"_getGeoJsonMultiPolygon",value:function(h){for(var d=h.geometries,g=d.length,_=[],$={coordinates:_,type:"MultiPolygon"},j=0;j<g;j++){for(var _t=d[j],_e=_t.paths,_r=_e.length,_n=_t.interiorsIndex,_i=_t.outlinesIndex,_o=Math.min(_n,_i,_r),_a=void 0,_u=void 0,_u=0;_u<_o;_u++)_a=[_e[_u].map(this._pointToArray,this)],_.push(_a);if(_o===1)for(_o=Math.min(_i,_r),_u=_n;_u<_o;_u++)_a.push(_e[_u].map(this._pointToArray,this))}return $}},{key:"_getGeoJsonMultiLineString",value:function(h,d){for(var g=1<arguments.length&&d!==void 0&&d,_={coordinates:[],type:"MultiLineString"},$=h.geometries,j=0;j<$.length;j++)for(var _t=$[j],_e=g?_t.outlinesIndex:0,_r=g?_t.paths.length:Math.min(_t.interiorsIndex,_t.outlinesIndex,_t.paths.length),_n=_e;_n<_r;_n++){var _i=_t.paths[_n].map(this._pointToArray,this);_.coordinates.push(_i)}return _}},{key:"_getGeoJsonGeometry",value:function(h,d){var g=d===GEOMETRY_TYPE.POLYGON?this._getGeoJsonMultiPolygon(h):this._getGeoJsonMultiLineString(h,d===GEOMETRY_TYPE.OUTLINE);return g.coordinates.length?g:null}},{key:"_load",value:function(h){var d=this;return new Promise(function(g,_){var $=WorkerBroker.postMessage(d.target_name+".requestMarkerTile",h.coords).then(d._prepareTileData.bind(d,h)),j=new Promise(function(_t,_e){WorkerBroker.postMessage(d.target_name+".requestSpatialTile",h.coords).then(function(_r){for(var _n=[],_i=[],_o=[],_a=0;_a<_r.length;_a++){var _u,_f=_r[_a],_h=void 0,_d=void 0,_d=_f.isClosed?(_h=_i,GEOMETRY_TYPE.POLYGON):(_h=_n,GEOMETRY_TYPE.POLYLINE),ty=d._getGeoJsonGeometry(_f,_d);ty&&(_u={id:_f.id,type:"Feature",properties:{height:0,style:_f.style},geometry:ty},_d===GEOMETRY_TYPE.POLYLINE&&(_u.properties.effectiveZIdx=_n.length),_h.push(_u));var ey=d._getGeoJsonGeometry(_f,GEOMETRY_TYPE.OUTLINE);ey&&_o.push({id:_f.id,type:"Feature",properties:{height:0,style:_f.style,effectiveZIdx:_o.length},geometry:ey})}h.source_data.layers.polylines={type:"FeatureCollection",features:_n},h.source_data.layers.polygons={type:"FeatureCollection",features:_i},h.source_data.layers.outlines={type:"FeatureCollection",features:_o},_t(h)})});Promise.all([$,j]).then(function(_t){d._postProcessTile(h),g(h)})})}},{key:"_prepareTileData",value:function(h,d){var g=Geo$1.wrapTile(h.coords,{x:!0,y:!0}),_=Geo$1.metersForTile(g);h.source_data.layers={markers:{features:d,type:"FeatureCollection"}};var $={coords:g,min:_},j=h.source_data,_t=layout("binary-tree"),_e={};for(var _r in j.layers)for(var _n=j.layers[_r].features.length,_i=0;_i<_n;_i++){var _o=j.layers[_r].features[_i],_a=_o.properties.icon;_e[_a.id]||(_t.addItem({width:_a.size.w,height:_a.size.h,meta:{objectId:_o.id,id:_a.id}}),_e[_a.id]=!0),Geo$1.transformGeometry(_o.geometry,function(_u){var _f=_u[0];_u[0]=_u[1],_u[1]=_f})}return h.rasters=_t.export(),MapsJsSource.projectData(h.source_data),MapsJsSource.scaleData(h.source_data,$),h}}]),o}();MapsJsSource.register(ObjectTileSource,"ObjectTileSource");var RemoteRasterTileSource=function(){_inherits(o,RasterTileSource);var e=_createSuper(o);function o(h,d){var g;return _classCallCheck(this,o),(g=e.call(this,h,d)).uid_=h.uid,g}return _createClass(o,[{key:"initialize",value:function(h,d){this.provider=h,this._on_update=d,this._onProviderUpdate=this._onProviderUpdate.bind(this),h.addEventListener("update",this._onProviderUpdate)}},{key:"_onProviderUpdate",value:function(){this._on_update(this.name)}},{key:"tileTexture",value:function(h){return Object.assign(_get(_getPrototypeOf(o.prototype),"tileTexture",this).call(this,h),{uid:this.uid_,url:this.uid_+"_"+h.coords.key,coords:h.coords})}},{key:"dispose",value:function(){this.provider.removeEventListener("update",this._onProviderUpdate)}}]),o}();function geojsonvt(e,o){return new GeoJSONVT(e,o)}function GeoJSONVT(e,o){var h=(o=this.options=extend(Object.create(this.options),o)).debug;if(h&&console.time("preprocess data"),o.maxZoom<0||24<o.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(o.promoteId&&o.generateId)throw new Error("promoteId and generateId cannot be used together.");var d=convert(e,o);this.tiles={},this.tileCoords=[],h&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",o.indexMaxZoom,o.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(d=wrap(d,o)).length&&this.splitTile(d,0,0,0),h&&(d.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function toID(e,o,h){return 32*((1<<e)*h+o)+e}function extend(e,o){for(var h in o)e[h]=o[h];return e}DataSource.register(RemoteRasterTileSource,"RemoteRasterTileSource"),GeoJSONVT.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},GeoJSONVT.prototype.splitTile=function(e,o,h,d,g,_,$){for(var j=[e,o,h,d],_t=this.options,_e=_t.debug;j.length;){d=j.pop(),h=j.pop(),o=j.pop(),e=j.pop();var _r,_n,_i,_o,_a,_u,_f,_h,_d,ty,ey,sy=1<<o,ny=toID(o,h,d),uy=this.tiles[ny];if(uy||(1<_e&&console.time("creation"),uy=this.tiles[ny]=createTile(e,o,h,d,_t),this.tileCoords.push({z:o,x:h,y:d}),_e&&(1<_e&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",o,h,d,uy.numFeatures,uy.numPoints,uy.numSimplified),console.timeEnd("creation")),_r="z"+o,this.stats[_r]=(this.stats[_r]||0)+1,this.total++)),uy.source=e,g){if(o===_t.maxZoom||o===g)continue;var fy=1<<g-o;if(h!==Math.floor(_/fy)||d!==Math.floor($/fy))continue}else if(o===_t.indexMaxZoom||uy.numPoints<=_t.indexMaxPoints)continue;uy.source=null,e.length!==0&&(1<_e&&console.time("clipping"),_i=.5-(_n=.5*_t.buffer/_t.extent),_a=1+_n,_d=_u=_f=_h=null,ty=clip(e,sy,h-_n,h+(_o=.5+_n),0,uy.minX,uy.maxX,_t),ey=clip(e,sy,h+_i,h+_a,0,uy.minX,uy.maxX,_t),e=null,ty&&(_d=clip(ty,sy,d-_n,d+_o,1,uy.minY,uy.maxY,_t),_u=clip(ty,sy,d+_i,d+_a,1,uy.minY,uy.maxY,_t),ty=null),ey&&(_f=clip(ey,sy,d-_n,d+_o,1,uy.minY,uy.maxY,_t),_h=clip(ey,sy,d+_i,d+_a,1,uy.minY,uy.maxY,_t),ey=null),1<_e&&console.timeEnd("clipping"),j.push(_d||[],o+1,2*h,2*d),j.push(_u||[],o+1,2*h,2*d+1),j.push(_f||[],o+1,2*h+1,2*d),j.push(_h||[],o+1,2*h+1,2*d+1))}},GeoJSONVT.prototype.getTile=function(e,o,h){var d=this.options,g=d.extent,_=d.debug;if(e<0||24<e)return null;var $=1<<e,j=toID(e,o=(o%$+$)%$,h);if(this.tiles[j])return transformTile(this.tiles[j],g);1<_&&console.log("drilling down to z%d-%d-%d",e,o,h);for(var _t,_e=e,_r=o,_n=h;!_t&&0<_e;)_e--,_r=Math.floor(_r/2),_n=Math.floor(_n/2),_t=this.tiles[toID(_e,_r,_n)];return _t&&_t.source?(1<_&&console.log("found parent tile z%d-%d-%d",_e,_r,_n),1<_&&console.time("drilling down"),this.splitTile(_t.source,_e,_r,_n,e,o,h),1<_&&console.timeEnd("drilling down"),this.tiles[j]?transformTile(this.tiles[j],g):null):null};var EMPTY_FEATURE_COLLECTION$1={type:"FeatureCollection",features:[]},GeoJSONTileSource=function(){_inherits(o,MapsJsSource);var e=_createSuper(o);function o(h,d){return _classCallCheck(this,o),h.tiled=!0,h.url="",e.call(this,h,d)}return _createClass(o,[{key:"fetchTile",value:function(h,d,g){return this.provider?this.provider.requestTileAsPromise(h,d,g).then(function(_){return _.data}):Promise.resolve(EMPTY_FEATURE_COLLECTION$1)}},{key:"_load",value:function(h){var d=this,g=Geo$1.wrapTile(h.coords,{x:!0,y:!0}),_={indexMaxZoom:0,maxZoom:this.max_zoom,tolerance:1.5,extent:Geo$1.tile_scale};return WorkerBroker.postMessage(this.target_name+".fetchTile",g.x,g.y,g.z).then(function($){for(var j in h.source_data.layers=$.type==="FeatureCollection"?{_default:$}:$,h.source_data.layers){var _t=geojsonvt(h.source_data.layers[j],_).getTile(g.z,g.x,g.y);h.source_data.layers[j]=parseGeoJSONVectorTile(_t)}return d._postProcessTile(h),h})}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),o}();DataSource.register(GeoJSONTileSource,"GeoJSONTileSource");var DEFAULT_RESPONSE={layers:{_default:{type:"FeatureCollection",features:[{type:"Point",geometry:{}}]}}},SkyBoxSource=function(){_inherits(o,DataSource);var e=_createSuper(o);function o(h,d){return _classCallCheck(this,o),h.max_zoom=0,e.call(this,h,d)}return _createClass(o,[{key:"load",value:function(h){return h.source_data=h.coords.key==="0/0/0"?DEFAULT_RESPONSE:void 0,Promise.resolve(h)}}]),o}(),debugSettings;DataSource.register(SkyBoxSource,"SkyBox");var debugSettings$1=debugSettings={draw_label_collision_boxes:!1,draw_label_texture_boxes:!1,suppress_label_fade_in:!1,suppress_snap_animation:!1,show_hidden_labels:!1,layer_stats:!1};function mergeDebugSettings(e){Object.assign(debugSettings,e)}var WorkerType={NATIVE:0,FAKE:1},Context;function sliceObject(e,o){var h={};return o.forEach(function(d){return h[d]=e[d]}),h}var Context$1=Context={},context_id=0,gl;Context.getContext=function(e,o){var h=!1;e==null&&((e=document.createElement("canvas")).style.position="absolute",e.style.top=0,e.style.left=0,e.style.zIndex=-1,document.body.appendChild(e),h=!0);var d=e.getContext("webgl",o)||e.getContext("experimental-webgl",o);if(!d)throw new Error("Couldn't create WebGL context.");return d._tangram_id=context_id++,h?(Context.resize(d,window.innerWidth,window.innerHeight,o.device_pixel_ratio),window.addEventListener("resize",function(){Context.resize(d,window.innerWidth,window.innerHeight,o.device_pixel_ratio)})):Context.resize(d,parseFloat(e.style.width),parseFloat(e.style.height),o.device_pixel_ratio),d},Context.resize=function(e,o,h,d){e.canvas.style.width=o+"px",e.canvas.style.height=h+"px",e.canvas.width=Math.round(o*d),e.canvas.height=Math.round(h*d),e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,e.canvas.width,e.canvas.height)};var gl$1=gl={};gl.BYTE=5120,gl.UNSIGNED_BYTE=5121,gl.SHORT=5122,gl.UNSIGNED_SHORT=5123,gl.INT=5124,gl.UNSIGNED_INT=5125,gl.FLOAT=5126;var MAX_VALUE$1=Math.pow(2,16)-1,DEFAULT_SIZE=1024,HAS_ELEMENT_INDEX_UINT=!1,VertexElements=function(){function e(o){_classCallCheck(this,e),this.size_=o||DEFAULT_SIZE,this.position_=0,this.ArrayType_=Uint16Array,this.buffer_=new this.ArrayType_(this.size_),this.overflows_=!1}return _createClass(e,[{key:"push",value:function(o){if(!this.overflows_||HAS_ELEMENT_INDEX_UINT){if(MAX_VALUE$1<o){if(this.overflows_=!0,!HAS_ELEMENT_INDEX_UINT)return;this.ArrayType_===Uint16Array&&(this.ArrayType_=Uint32Array,this.buffer_=new this.ArrayType_(this.buffer_))}this.position_===this.size_&&this.expand_(),this.buffer_[this.position_]=o,this.position_+=1}}},{key:"end",value:function(){if(this.position_===0)return!1;var o=this.buffer_,h=this.position_;return this.buffer_=new this.ArrayType_(this.size_),this.position_=0,this.overflows_=!1,o.subarray(0,h)}},{key:"expand_",value:function(){this.size_=this.size_<<1;var o=new this.ArrayType_(this.size_);o.set(this.buffer_),this.buffer_=o}}]),e}(),_array_types;VertexElements.setElementIndexUint=function(e){HAS_ELEMENT_INDEX_UINT=e};var array_types=(_array_types={},_defineProperty(_array_types,gl$1.FLOAT,Float32Array),_defineProperty(_array_types,gl$1.BYTE,Int8Array),_defineProperty(_array_types,gl$1.UNSIGNED_BYTE,Uint8Array),_defineProperty(_array_types,gl$1.INT,Int32Array),_defineProperty(_array_types,gl$1.UNSIGNED_INT,Uint32Array),_defineProperty(_array_types,gl$1.SHORT,Int16Array),_defineProperty(_array_types,gl$1.UNSIGNED_SHORT,Uint16Array),_array_types),VertexData=function(){function e(o){var h=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).prealloc,d=h===void 0?500:h;_classCallCheck(this,e),this.vertex_layout=o,this.vertex_elements=new VertexElements,this.stride=this.vertex_layout.stride,0<e.array_pool.length?(this.vertex_buffer=e.array_pool.pop(),this.byte_length=this.vertex_buffer.byteLength,this.size=Math.floor(this.byte_length/this.stride),log("trace","VertexData: reused buffer of bytes ".concat(this.byte_length,", ").concat(this.size," vertices"))):(this.size=d,this.byte_length=this.stride*this.size,this.vertex_buffer=new Uint8Array(this.byte_length)),this.offset=0,this.vertex_count=0,this.realloc_count=0,this.setBufferViews(),this.setAddVertexFunction()}return _createClass(e,[{key:"setBufferViews",value:function(){var o=this;this.views={},this.views[gl$1.UNSIGNED_BYTE]=this.vertex_buffer,this.vertex_layout.dynamic_attribs.forEach(function(h){var d;o.views[h.type]==null&&(d=array_types[h.type],o.views[h.type]=new d(o.vertex_buffer.buffer))})}},{key:"checkBufferSize",value:function(){var o;this.offset+this.stride>this.byte_length&&(this.size=Math.floor(1.5*this.size),this.size-=this.size%4,this.byte_length=this.stride*this.size,(o=new Uint8Array(this.byte_length)).set(this.vertex_buffer),e.array_pool.push(this.vertex_buffer),this.vertex_buffer=o,this.setBufferViews(),this.realloc_count++)}},{key:"setAddVertexFunction",value:function(){this.vertexLayoutAddVertex=this.vertex_layout.getAddVertexFunction()}},{key:"addVertex",value:function(o){this.checkBufferSize(),this.vertexLayoutAddVertex(o,this.views,this.offset),this.offset+=this.stride,this.vertex_count++}},{key:"end",value:function(){return this.vertex_buffer=this.vertex_buffer.subarray(0,this.offset),this.element_buffer=this.vertex_elements.end(),log("trace","VertexData: ".concat(this.size," vertices total, realloc count ").concat(this.realloc_count)),this}}]),e}();VertexData.array_pool=[];var VertexLayout=function(){function e(o){_classCallCheck(this,e),this.attribs=o,this.dynamic_attribs=this.attribs.filter(function(_e){return!_e.static}),this.components=[],this.index={},this.offset={};for(var h=this.stride=0,d=0,g=0;g<this.attribs.length;g++){var _=this.attribs[g];if(_.static==null){_.offset=this.stride,_.byte_size=_.size;var $=0;switch(_.type){case gl$1.FLOAT:case gl$1.INT:case gl$1.UNSIGNED_INT:_.byte_size*=4,$=2;break;case gl$1.SHORT:case gl$1.UNSIGNED_SHORT:_.byte_size*=2,$=1}3&_.byte_size&&(_.byte_size+=4-(3&_.byte_size)),this.stride+=_.byte_size;for(var j=_.offset>>$,_t=0;_t<_.size;_t++)this.components.push({type:_.type,shift:$,offset:j++,index:d++});this.index[_.name]=h,h+=_.size,this.offset[_.name]=_.offset}else _.static=Array.isArray(_.static)?_.static:[_.static],_.method="vertexAttrib".concat(_.static.length,"fv")}}return _createClass(e,[{key:"enable",value:function(o,h,d){for(var g,_,$=0;$<this.attribs.length;$++)g=this.attribs[$],(_=h.attribute(g.name).location)!==-1&&(g.static==null?(e.enabled_attribs[_]&&!d||o.enableVertexAttribArray(_),o.vertexAttribPointer(_,g.size,g.type,g.normalized,this.stride,g.offset),e.enabled_attribs[_]=h):o[g.method]instanceof Function&&(o.enableVertexAttribArray(_),o[g.method](_,g.static),o.disableVertexAttribArray(_),delete e.enabled_attribs[_]));for(_ in e.enabled_attribs)this.disableUnusedAttribute(o,_,h)}},{key:"disableUnusedAttribute",value:function(o,h,d){e.enabled_attribs[h]!==d&&(o.disableVertexAttribArray(h),delete e.enabled_attribs[h])}},{key:"createVertexData",value:function(){return new VertexData(this)}},{key:"getAddVertexFunction",value:function(){return this.addVertex==null&&this.createAddVertexFunction(),this.addVertex}},{key:"createAddVertexFunction",value:function(){var o=hashString(JSON.stringify(this.attribs));if(e.add_vertex_funcs[o]==null){var h,d=["var t, o;"],g=_toConsumableArray(this.components);g.sort(function(_t,_e){return _t.type!==_e.type?_t.type-_e.type:_t.index-_e.index});for(var _=0;_<g.length;_++){var $=g[_];h!==$.type&&(d.push("t = vs[".concat($.type,"];")),d.push("o = off".concat($.shift?" >> "+$.shift:"",";")),h=$.type),d.push("t[o + ".concat($.offset,"] = v[").concat($.index,"];"))}d=d.join(`
`);var j=new Function("v","vs","off",d);e.add_vertex_funcs[o]=j}this.addVertex=e.add_vertex_funcs[o]}}]),e}();VertexLayout.enabled_attribs={},VertexLayout.add_vertex_funcs={};var tile_bounds=[{x:0,y:0},{x:Geo$1.tile_scale,y:-Geo$1.tile_scale}],default_uvs=[0,0,1,1];function outsideTile(e,o,h){var d=tile_bounds[0],g=tile_bounds[1];return e[0]<=d.x+h&&o[0]<=d.x+h||e[0]>=g.x-h&&o[0]>=g.x-h||e[1]>=d.y-h&&o[1]>=d.y-h||e[1]<=g.y+h&&o[1]<=g.y+h}function isCoordOutsideTile(e,o){o=o||0;var h=tile_bounds[0],d=tile_bounds[1];return e[0]<=h.x+o||e[0]>=d.x-o||e[1]>=h.y-o||e[1]<=d.y+o}var earcut_1=earcut;function earcut(e,o,h){h=h||2;var d,g,_,$,j,_t,_e,_r=o&&o.length,_n=_r?o[0]*h:e.length,_i=linkedList(e,0,_n,h,!0),_o=[];if(!_i)return _o;if(_r&&(_i=eliminateHoles(e,o,_i,h)),e.length>80*h){d=_=e[0],g=$=e[1];for(var _a=h;_a<_n;_a+=h)(j=e[_a])<d&&(d=j),(_t=e[_a+1])<g&&(g=_t),_<j&&(_=j),$<_t&&($=_t);_e=Math.max(_-d,$-g)}return earcutLinked(_i,_o,h,d,g,_e),_o}function linkedList(e,o,h,d,g){var _,$;if(g===0<signedArea$1(e,o,h,d))for(_=o;_<h;_+=d)$=insertNode(_,e[_],e[_+1],$);else for(_=h-d;o<=_;_-=d)$=insertNode(_,e[_],e[_+1],$);return $&&equals($,$.next)&&(removeNode($),$=$.next),$}function filterPoints(e,o){if(!e)return e;o=o||e;var h,d=e;do if(h=!1,d.steiner||!equals(d,d.next)&&area(d.prev,d,d.next)!==0)d=d.next;else{if(removeNode(d),(d=o=d.prev)===d.next)return null;h=!0}while(h||d!==o);return o}function earcutLinked(e,o,h,d,g,_,$){if(e){!$&&_&&indexCurve(e,d,g,_);for(var j,_t,_e=e;e.prev!==e.next;)if(j=e.prev,_t=e.next,_?isEarHashed(e,d,g,_):isEar(e))o.push(j.i/h),o.push(e.i/h),o.push(_t.i/h),removeNode(e),e=_t.next,_e=_t.next;else if((e=_t)===_e){$?$===1?earcutLinked(e=cureLocalIntersections(e,o,h),o,h,d,g,_,2):$===2&&splitEarcut(e,o,h,d,g,_):earcutLinked(filterPoints(e),o,h,d,g,_,1);break}}}function isEar(e){var o=e.prev,h=e,d=e.next;if(!(0<=area(o,h,d))){for(var g=e.next.next;g!==e.prev;){if(pointInTriangle(o.x,o.y,h.x,h.y,d.x,d.y,g.x,g.y)&&0<=area(g.prev,g,g.next))return;g=g.next}return 1}}function isEarHashed(e,o,h,d){var g=e.prev,_=e,$=e.next;if(!(0<=area(g,_,$))){for(var j=g.x<_.x?g.x<$.x?g.x:$.x:_.x<$.x?_.x:$.x,_t=g.y<_.y?g.y<$.y?g.y:$.y:_.y<$.y?_.y:$.y,_e=g.x>_.x?g.x>$.x?g.x:$.x:_.x>$.x?_.x:$.x,_r=g.y>_.y?g.y>$.y?g.y:$.y:_.y>$.y?_.y:$.y,_n=zOrder(j,_t,o,h,d),_i=zOrder(_e,_r,o,h,d),_o=e.nextZ;_o&&_o.z<=_i;){if(_o!==e.prev&&_o!==e.next&&pointInTriangle(g.x,g.y,_.x,_.y,$.x,$.y,_o.x,_o.y)&&0<=area(_o.prev,_o,_o.next))return;_o=_o.nextZ}for(_o=e.prevZ;_o&&_o.z>=_n;){if(_o!==e.prev&&_o!==e.next&&pointInTriangle(g.x,g.y,_.x,_.y,$.x,$.y,_o.x,_o.y)&&0<=area(_o.prev,_o,_o.next))return;_o=_o.prevZ}return 1}}function cureLocalIntersections(e,o,h){var d=e;do{var g=d.prev,_=d.next.next;!equals(g,_)&&intersects(g,d,d.next,_)&&locallyInside(g,_)&&locallyInside(_,g)&&(o.push(g.i/h),o.push(d.i/h),o.push(_.i/h),removeNode(d),removeNode(d.next),d=e=_),d=d.next}while(d!==e);return d}function splitEarcut(e,o,h,d,g,_){var $=e;do{for(var j=$.next.next;j!==$.prev;){if($.i!==j.i&&isValidDiagonal($,j)){var _t=splitPolygon($,j),$=filterPoints($,$.next),_t=filterPoints(_t,_t.next);return earcutLinked($,o,h,d,g,_),void earcutLinked(_t,o,h,d,g,_)}j=j.next}$=$.next}while($!==e)}function eliminateHoles(e,o,h,d){for(var g,_=[],$=0,j=o.length;$<j;$++)(g=linkedList(e,o[$]*d,$<j-1?o[$+1]*d:e.length,d,!1))===g.next&&(g.steiner=!0),_.push(getLeftmost(g));for(_.sort(compareX),$=0;$<_.length;$++)eliminateHole(_[$],h),h=filterPoints(h,h.next);return h}function compareX(e,o){return e.x-o.x}function eliminateHole(e,o){var h;(o=findHoleBridge(e,o))&&filterPoints(h=splitPolygon(o,e),h.next)}function findHoleBridge(e,o){var h,d=o,g=e.x,_=e.y,$=-1/0;do{if(_<=d.y&&_>=d.next.y){var j=d.x+(_-d.y)*(d.next.x-d.x)/(d.next.y-d.y);if(j<=g&&$<j){if(($=j)===g){if(_===d.y)return d;if(_===d.next.y)return d.next}h=d.x<d.next.x?d:d.next}}d=d.next}while(d!==o);if(!h)return null;if(g===$)return h.prev;for(var _t,_e=h,_r=h.x,_n=h.y,_i=1/0,d=h.next;d!==_e;)g>=d.x&&d.x>=_r&&pointInTriangle(_<_n?g:$,_,_r,_n,_<_n?$:g,_,d.x,d.y)&&((_t=Math.abs(_-d.y)/(g-d.x))<_i||_t===_i&&d.x>h.x)&&locallyInside(d,e)&&(h=d,_i=_t),d=d.next;return h}function indexCurve(e,o,h,d){for(var g=e;g.z===null&&(g.z=zOrder(g.x,g.y,o,h,d)),g.prevZ=g.prev,g.nextZ=g.next,(g=g.next)!==e;);g.prevZ.nextZ=null,g.prevZ=null,sortLinked(g)}function sortLinked(e){var o,h,d,g,_,$,j,_t,_e=1;do{for(h=e,_=e=null,$=0;h;){for($++,d=h,o=j=0;o<_e&&(j++,d=d.nextZ);o++);for(_t=_e;0<j||0<_t&&d;)j!==0&&(_t===0||!d||h.z<=d.z)?(h=(g=h).nextZ,j--):(d=(g=d).nextZ,_t--),_?_.nextZ=g:e=g,g.prevZ=_,_=g;h=d}_.nextZ=null,_e*=2}while(1<$);return e}function zOrder(e,o,h,d,g){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-h)/g)|e<<8))|e<<4))|e<<2))|e<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=32767*(o-d)/g)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function getLeftmost(e){for(var o=e,h=e;o.x<h.x&&(h=o),(o=o.next)!==e;);return h}function pointInTriangle(e,o,h,d,g,_,$,j){return 0<=(g-$)*(o-j)-(e-$)*(_-j)&&0<=(e-$)*(d-j)-(h-$)*(o-j)&&0<=(h-$)*(_-j)-(g-$)*(d-j)}function isValidDiagonal(e,o){return e.next.i!==o.i&&e.prev.i!==o.i&&!intersectsPolygon(e,o)&&locallyInside(e,o)&&locallyInside(o,e)&&middleInside(e,o)}function area(e,o,h){return(o.y-e.y)*(h.x-o.x)-(o.x-e.x)*(h.y-o.y)}function equals(e,o){return e.x===o.x&&e.y===o.y}function intersects(e,o,h,d){return equals(e,o)&&equals(h,d)||equals(e,d)&&equals(h,o)||0<area(e,o,h)!=0<area(e,o,d)&&0<area(h,d,e)!=0<area(h,d,o)}function intersectsPolygon(e,o){var h=e;do{if(h.i!==e.i&&h.next.i!==e.i&&h.i!==o.i&&h.next.i!==o.i&&intersects(h,h.next,e,o))return 1;h=h.next}while(h!==e)}function locallyInside(e,o){return area(e.prev,e,e.next)<0?0<=area(e,o,e.next)&&0<=area(e,e.prev,o):area(e,o,e.prev)<0||area(e,e.next,o)<0}function middleInside(e,o){for(var h=e,d=!1,g=(e.x+o.x)/2,_=(e.y+o.y)/2;h.y>_!=h.next.y>_&&g<(h.next.x-h.x)*(_-h.y)/(h.next.y-h.y)+h.x&&(d=!d),(h=h.next)!==e;);return d}function splitPolygon(e,o){var h=new Node(e.i,e.x,e.y),d=new Node(o.i,o.x,o.y),g=e.next,_=o.prev;return(e.next=o).prev=e,(h.next=g).prev=h,(d.next=h).prev=d,(_.next=d).prev=_,d}function insertNode(e,o,h,d){var g=new Node(e,o,h);return d?(g.next=d.next,(g.prev=d).next.prev=g,d.next=g):(g.prev=g).next=g,g}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node(e,o,h){this.i=e,this.x=o,this.y=h,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea$1(e,o,h,d){for(var g=0,_=o,$=h-d;_<h;_+=d)g+=(e[$]-e[_])*(e[_+1]+e[$+1]),$=_;return g}earcut.deviation=function(e,o,h,d){var g=o&&o.length,_=g?o[0]*h:e.length,$=Math.abs(signedArea$1(e,0,_,h));if(g)for(var j=0,_t=o.length;j<_t;j++){var _e=o[j]*h,_r=j<_t-1?o[j+1]*h:e.length;$-=Math.abs(signedArea$1(e,_e,_r,h))}for(var _n=0,j=0;j<d.length;j+=3){var _i=d[j]*h,_o=d[j+1]*h,_a=d[j+2]*h;_n+=Math.abs((e[_i]-e[_a])*(e[1+_o]-e[1+_i])-(e[_i]-e[_o])*(e[1+_a]-e[1+_i]))}return $===0&&_n===0?0:Math.abs((_n-$)/$)},earcut.flatten=function(e){for(var o=e[0][0].length,h={vertices:[],holes:[],dimensions:o},d=0,g=0;g<e.length;g++){for(var _=0;_<e[g].length;_++)for(var $=0;$<o;$++)h.vertices.push(e[g][_][$]);0<g&&(d+=e[g-1].length,h.holes.push(d))}return h};var up_vec3=[0,0,1];function buildPolygons(e,o,h,d){var g,_,$,j,_t,_e=d.texcoord_index,_r=d.texcoord_scale,_n=d.texcoord_normalize,_i=o.vertex_elements;_e&&(_n=_n||1,_=(g=_slicedToArray(_r||default_uvs,4))[0],$=g[1],j=g[2],_t=g[3]);for(var _o=0,_a=e.length,_u=0;_u<_a;_u++){var _f,_h,_d,ty,ey,sy=o.vertex_count,ny=e[_u];_e&&(_h=(_f=_slicedToArray(Geo$1.findBoundingBox(ny),4))[0],_d=_f[1],ty=(j-_)/(_f[2]-_h),ey=(_t-$)/(_f[3]-_d));for(var uy=0;uy<ny.length;uy++)for(var fy=ny[uy],yy=0;yy<fy.length;yy++){var xy=fy[yy];h[0]=xy[0],h[1]=xy[1],_e&&(h[_e+0]=((xy[0]-_h)*ty+_)*_n,h[_e+1]=((xy[1]-_d)*ey+$)*_n),o.addVertex(h)}for(var Ey=triangulatePolygon(earcut_1.flatten(ny)),Oy=0;Oy<Ey.length;Oy++)_i.push(sy+Ey[Oy]);_o+=Ey.length/3}return _o}function buildExtrudedPolygons(e,o,h,d,g,_,$,j,_t){var _e=_t.remove_tile_edges,_r=_t.tile_edge_tolerance,_n=_t.texcoord_index,_i=_t.texcoord_scale,_o=_t.texcoord_normalize,_a=_t.winding,_u=o+(d||0),_f=o+h;_[2]=_f;var _h,_d,ty,ey,sy,ny,uy=buildPolygons(e,g,_,{texcoord_index:_n,texcoord_scale:_i,texcoord_normalize:_o}),fy=g.vertex_elements,yy=g.vertex_count;_n&&(_o=_o||1,_d=(_h=_slicedToArray(_i||default_uvs,4))[0],ty=_h[1],ey=_h[2],ny=[[_d,sy=_h[3]],[_d,ty],[ey,ty],[ey,sy]]);for(var xy=e.length,Ey=0;Ey<xy;Ey++)for(var Oy=e[Ey],Gy=0;Gy<Oy.length;Gy++)for(var Ly=Oy[Gy],g0=0;g0<Ly.length-1;g0++)if(!_e||!outsideTile(Ly[g0],Ly[g0+1],_r)){var a0=void 0,e0=void 0,Ay=[[Ly[e0=_a==="CCW"?(a0=g0)+1:(a0=g0+1,g0)][0],Ly[e0][1],_f],[Ly[e0][0],Ly[e0][1],_u],[Ly[a0][0],Ly[a0][1],_u],[Ly[a0][0],Ly[a0][1],_f]],$y=Vector$1.normalize([Ly[e0][0]-Ly[a0][0],Ly[e0][1]-Ly[a0][1],0]),Hy=Vector$1.cross(up_vec3,$y);_[$+0]=Hy[0]*j,_[$+1]=Hy[1]*j,_[$+2]=Hy[2]*j;for(var i0=0;i0<Ay.length;i0++)_[0]=Ay[i0][0],_[1]=Ay[i0][1],_[2]=Ay[i0][2],_n&&(_[_n+0]=ny[i0][0]*_o,_[_n+1]=ny[i0][1]*_o),g.addVertex(_);fy.push(yy+0),fy.push(yy+1),fy.push(yy+2),fy.push(yy+2),fy.push(yy+3),fy.push(yy+0),yy+=4,uy+=2}return uy}function triangulatePolygon(e){return earcut_1(e.vertices,e.holes,e.dimensions)}var shaderSrc_polygonsVertex=`uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;attribute vec4 a_position;attribute vec4 a_color;
#ifdef TANGRAM_NORMAL_ATTRIBUTE
attribute vec3 a_normal;
#define TANGRAM_NORMAL a_normal
#else
#define TANGRAM_NORMAL vec3(0., 0., 1.)
#endif
#ifdef TANGRAM_EXTRUDE_LINES
attribute vec2 a_extrude;attribute vec2 a_offset;attribute vec2 a_scaling;uniform float u_v_scale_adjust;
#endif
varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;
#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)
attribute vec2 a_texcoord;varying vec2 v_texcoord;
#endif
#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING
varying vec4 v_modelpos_base_zoom;
#endif
#if defined(TANGRAM_LIGHTING_VERTEX)
varying vec4 v_lighting;
#endif
#define UNPACK_SCALING(x) (x / 1024.)
#pragma tangram: camera
#pragma tangram: material
#pragma tangram: lighting
#pragma tangram: raster
#pragma tangram: global
void main(){
#pragma tangram: setup
#ifdef TANGRAM_TEXTURE_COORDS
v_texcoord=a_texcoord;
#ifdef TANGRAM_EXTRUDE_LINES
v_texcoord.y*=u_v_scale_adjust;
#endif
#endif
#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING
v_modelpos_base_zoom=modelPositionBaseZoom();
#endif
vec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.);
#ifdef TANGRAM_EXTRUDE_LINES
vec2 extrude=a_extrude.xy;vec2 offset=a_offset.xy;float dz=clamp(u_map_position.z-u_tile_origin.z,0.,4.);dz+=step(1.,dz)*(1.-dz)+mix(0.,2.,clamp((dz-2.)/2.,0.,1.));float mdz=(dz-0.5)*2.;extrude-=extrude*UNPACK_SCALING(a_scaling.x)*mdz;float dwdz=UNPACK_SCALING(a_scaling.y);float sdwdz=sign(step(0.,dwdz)-0.5);offset-=offset*abs(dwdz)*((1.-step(0.,sdwdz))-(dz*-sdwdz));float ssz=exp2(-dz-(u_tile_origin.z-u_tile_origin.w));extrude*=ssz;offset*=ssz;
#ifdef TANGRAM_BLOCK_WIDTH
float width=1.;
#pragma tangram: width
extrude*=width;
#endif
position.xy+=extrude+offset;
#endif
v_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;
#pragma tangram: position
v_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);v_color=a_color;
#if defined(TANGRAM_LIGHTING_VERTEX)
vec3 normal=v_normal;
#pragma tangram: normal
v_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));
#endif
cameraProjection(position);applyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);
#if defined(SNAP_TO_PIXEL_GRID)
snapToPixelGrid(position);
#endif
gl_Position=position;}`,shaderSrc_polygonsFragment=`uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;
#ifdef TANGRAM_EXTRUDE_LINES
uniform bool u_has_line_texture;uniform sampler2D u_texture;uniform float u_texture_ratio;uniform vec4 u_dash_background_color;
#endif
#define TANGRAM_NORMAL v_normal
#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)
varying vec2 v_texcoord;
#endif
#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING
varying vec4 v_modelpos_base_zoom;
#endif
#if defined(TANGRAM_LIGHTING_VERTEX)
varying vec4 v_lighting;
#endif
#pragma tangram: camera
#pragma tangram: material
#pragma tangram: lighting
#pragma tangram: raster
#pragma tangram: global
#pragma tangram: utils
void main(void){
#pragma tangram: setup
vec4 color=v_color;vec3 normal=TANGRAM_NORMAL;
#ifdef TANGRAM_CROP_BY_TILE
if(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}
#endif
#ifdef TANGRAM_RASTER_TEXTURE_COLOR
color*=sampleRaster();
#endif
#ifdef TANGRAM_EXTRUDE_LINES
if(u_has_line_texture){vec2 _line_st=vec2(v_texcoord.x,fract(v_texcoord.y/u_texture_ratio));vec4 _line_color=texture2D(u_texture,_line_st);if(_line_color.a<TANGRAM_ALPHA_TEST){
#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY)
if(u_dash_background_color.a==0.){discard;}color=u_dash_background_color;
#else
color=vec4(u_dash_background_color.rgb,color.a*step(TANGRAM_EPSILON,u_dash_background_color.a));
#endif
}else{color*=_line_color;}}
#endif
#ifdef TANGRAM_RASTER_TEXTURE_NORMAL
normal=normalize(sampleRaster().rgb*2.-1.);
#endif
#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)
calculateNormal(normal);
#endif
#if !defined(TANGRAM_LIGHTING_VERTEX)
#pragma tangram: normal
#endif
#pragma tangram: color
#if defined(TANGRAM_LIGHTING_FRAGMENT)
color=calculateLighting(v_position.xyz-u_eye,normal,color);
#elif defined(TANGRAM_LIGHTING_VERTEX)
color*=v_lighting;
#endif
#pragma tangram: filter
gl_FragColor=color;}`,Polygons=Object.create(Style);Object.assign(Polygons,{name:"polygons",built_in:!0,vertex_shader_src:shaderSrc_polygonsVertex,fragment_shader_src:shaderSrc_polygonsFragment,selection:!0,init:function(){Style.init.apply(this,arguments),this.defines.TANGRAM_NORMAL_ATTRIBUTE=!0,this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.texcoords&&(this.defines.TANGRAM_TEXTURE_COORDS=!0)},vertexLayoutForMeshVariant:function(){var e;return this.vertex_layout||(e=[{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_normal",size:3,type:gl$1.BYTE,normalized:!0},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0}],this.texcoords&&e.push({name:"a_texcoord",size:2,type:gl$1.UNSIGNED_SHORT,normalized:!0}),this.vertex_layout=new VertexLayout(e)),this.vertex_layout},_parseFeature:function(e,o,h){var d=this.feature_style;return d.color=this.parseColor(o.color,h),d.color?(d.z=o.z&&StyleParser.evalCachedDistanceProperty(o.z,h)||StyleParser.defaults.z,d.z*=Geo$1.height_scale,d.extrude=StyleParser.evalProperty(o.extrude,h),d.extrude&&(d.extrude===!0?(d.height=e.properties.height!==void 0?e.properties.height:StyleParser.defaults.height,d.min_height=e.properties.min_height!==void 0?e.properties.min_height:StyleParser.defaults.min_height):typeof d.extrude=="number"?(d.height=d.extrude,d.min_height=0):Array.isArray(d.extrude)&&(d.min_height=d.extrude[0],d.height=d.extrude[1]),d.height*=Geo$1.height_scale,d.min_height*=Geo$1.height_scale),d.tile_edges=o.tile_edges,d):null},_preprocess:function(e){return e.color=StyleParser.createColorPropertyCache(e.color),e.z=StyleParser.createPropertyCache(e.z,StyleParser.parseUnits),e},makeVertexTemplate:function(e){var o=0;return this.vertex_template[o++]=0,this.vertex_template[o++]=0,this.vertex_template[o++]=e.z||0,this.vertex_template[o++]=this.scaleOrder(e.order),this.vertex_template[o++]=0,this.vertex_template[o++]=0,this.vertex_template[o++]=127,this.vertex_template[o++]=255*e.color[0],this.vertex_template[o++]=255*e.color[1],this.vertex_template[o++]=255*e.color[2],this.vertex_template[o++]=255*e.color[3],this.selection&&(this.vertex_template[o++]=255*e.selection_color[0],this.vertex_template[o++]=255*e.selection_color[1],this.vertex_template[o++]=255*e.selection_color[2],this.vertex_template[o++]=255*e.selection_color[3]),this.texcoords&&(this.vertex_template[o++]=0,this.vertex_template[o++]=0),this.vertex_template},buildPolygons:function(e,o,h,d){var g=this.makeVertexTemplate(o),_={texcoord_index:this.vertex_layout.index.a_texcoord,texcoord_normalize:65535,remove_tile_edges:!o.tile_edges,tile_edge_tolerance:Geo$1.tile_scale*d.tile.pad_scale*4,winding:d.winding};return o.extrude&&o.height?buildExtrudedPolygons(e,o.z,o.height,o.min_height,h.vertex_data,g,this.vertex_layout.index.a_normal,127,_):buildPolygons(e,h.vertex_data,g,_)}});var zero_vec2=[0,0],CAP_TYPE={butt:0,square:1,round:2},JOIN_TYPE={miter:0,bevel:1,round:2},DEFAULT={MITER_LIMIT:3,TEXCOORD_NORMALIZE:1,TEXCOORD_RATIO:1,MIN_FAN_WIDTH:5},v_scale_adjust=Geo$1.tile_scale,zero_v=[0,0],one_v=[1,0],mid_v=[.5,0];function buildPolylines(e,o,h,d,g){var _,$,j=g.closed_polygon,_t=g.remove_tile_edges,_e=g.tile_edge_tolerance,_r=g.texcoord_index,_n=(g.texcoord_scale,g.texcoord_width),_i=g.texcoord_ratio,_o=g.texcoord_normalize,_a=g.extrude_index,_u=g.offset_index,_f=g.join,_h=g.cap,_d=g.miter_limit,ty=g.offset,ey=g.crop_by_tile,sy=_h?CAP_TYPE[_h]:CAP_TYPE.butt,ny=_f?JOIN_TYPE[_f]:JOIN_TYPE.miter;ny===JOIN_TYPE.miter&&(_=(_d=_d||DEFAULT.MITER_LIMIT)*_d),_r&&(_o=_o||DEFAULT.TEXCOORD_NORMALIZE,$=1/(_n*(_i=_i||DEFAULT.TEXCOORD_RATIO)*v_scale_adjust));for(var uy={closed_polygon:j,remove_tile_edges:_t,tile_edge_tolerance:_e,miter_len_sq:_,join_type:ny,cap_type:sy,vertex_data:h,vertex_template:d,half_width:o/2,extrude_index:_a,offset_index:_u,v_scale:$,texcoord_index:_r,texcoord_width:_n,texcoord_normalize:_o,offset:ty,geom_count:0,crop_by_tile:ey},fy=0;fy<e.length;fy++)buildPolyline(e[fy],uy);if(uy.extra_lines)for(var yy=0;yy<uy.extra_lines.length;yy++)buildPolyline(uy.extra_lines[yy],uy);return uy.geom_count}function buildPolyline(e,o){if(!(e.length<2)){var h,d,g=o.join_type,_=o.cap_type,$=o.closed_polygon,j=o.remove_tile_edges,_t=o.tile_edge_tolerance,_e=o.v_scale,_r=o.miter_len_sq,_n=o.crop_by_tile,_i=o.texcoord_index!=null,_o=0;if($&&g===JOIN_TYPE.miter){var _a=getTileBoundaryIndex(e);if(_a!==0){var _u=permuteLine(e,_a);return o.extra_lines=o.extra_lines||[],void o.extra_lines.push(_u)}}var _f=0,_h=e.length-1,_d=0;for(uy=e[_f],fy=e[_f+1];Vector$1.isEqual(uy,fy);)if(uy=fy,fy=e[++_f+1],_d++,_f===e.length-1)return;for(;Vector$1.isEqual(e[_h],e[_h-1]);)if(_d++,--_h===0)return;if(!(e.length<2+_d))if(d=Vector$1.normalize(Vector$1.perp(uy,fy)),j&&outsideTile(uy,fy,_t)){var ty=getNextNonBoundarySegment(e,_f,_t);ty&&(o.extra_lines=o.extra_lines||[],o.extra_lines.push(ty))}else{$?startPolygon(uy,h=Vector$1.normalize(Vector$1.perp(e[_h-1],uy)),d,g,o):(!_n&&isCoordOutsideTile(uy)||(addCap(uy,_o,d,_,!0,o),_i&&_!==CAP_TYPE.butt&&(_o+=.5*_e*o.texcoord_width)),addVertex(uy,d,d,1,_o,o,1),addVertex(uy,d,d,0,_o,o,-1)),_i&&(_o+=_e*Vector$1.length(Vector$1.sub(fy,uy)));for(var ey=_f+1;ey<_h;ey++){var sy=ey,ny=ey+1,uy=e[sy],fy=e[ny];if(!Vector$1.isEqual(uy,fy)){if(j&&outsideTile(uy,fy,_t)){addVertex(uy,d,d,1,_o,o,1),addVertex(uy,d,d,0,_o,o,-1),indexPairs(1,o);var yy=getNextNonBoundarySegment(e,sy+1,_t);return void(yy&&(o.extra_lines=o.extra_lines||[],o.extra_lines.push(yy)))}h=d,d=Vector$1.normalize(Vector$1.perp(uy,fy)),g===JOIN_TYPE.miter?addMiter(_o,uy,h,d,_r,!1,o):addJoin(g,_o,uy,h,d,!1,o),_i&&(_o+=_e*Vector$1.length(Vector$1.sub(fy,uy)))}}uy=fy,h=d,$?endPolygon(uy,h,d=Vector$1.normalize(Vector$1.perp(uy,e[1])),g,_o,o):(addVertex(uy,h,d,1,_o,o,1),addVertex(uy,h,d,0,_o,o,-1),indexPairs(1,o),!_n&&isCoordOutsideTile(uy)||addCap(uy,_o,h,_,!1,o))}}}function getTileBoundaryIndex(e){if(isCoordOutsideTile(e[0]))return 0;for(var o=0;o<e.length;o++)if(isCoordOutsideTile(e[e.length-1-o]))return e.length-1-o;return 0}function getNextNonBoundarySegment(e,o,h){for(var d=o;e[d+1]&&outsideTile(e[d],e[d+1],h);)d++;return 2<=e.length-d&&e.slice(d)}function startPolygon(e,o,h,d,g){d===void 0||isCoordOutsideTile(e)&&!g.crop_by_tile?(addVertex(e,h,h,1,0,g,1),addVertex(e,h,h,0,0,g,-1)):d===JOIN_TYPE.miter?addMiter(0,e,o,h,g.miter_len_sq,!0,g):addJoin(d,0,e,o,h,!0,g)}function endPolygon(e,o,h,d,g,_){var $;isCoordOutsideTile(e)&&!_.crop_by_tile?(addVertex(e,o,o,1,g,_,1),addVertex(e,o,o,0,g,_,-1)):($=createMiterVec(o,h),d===JOIN_TYPE.miter&&Vector$1.lengthSq($)>_.miter_len_sq&&(d=JOIN_TYPE.bevel),d===JOIN_TYPE.miter?(addVertex(e,$,o,1,g,_,1),addVertex(e,$,o,0,g,_,-1)):(addVertex(e,o,o,1,g,_,1),addVertex(e,o,o,0,g,_,-1))),indexPairs(1,_)}function createMiterVec(e,o){var h=Vector$1.normalize(Vector$1.add(e,o)),d=2/(1+Math.abs(Vector$1.dot(e,h)));return Vector$1.mult(h,d*d)}function addMiter(e,o,h,d,g,_,$){var j=createMiterVec(h,d);Vector$1.lengthSq(j)>g?addJoin(JOIN_TYPE.bevel,e,o,h,d,_,$):(addVertex(o,j,j,1,e,$,1),addVertex(o,j,j,0,e,$,-1),_||indexPairs(1,$))}function addJoin(e,o,h,d,g,_,$){var j=createMiterVec(d,g),_t=0<g[0]*d[1]-g[1]*d[0];$.texcoord_index!=null&&(zero_v[1]=o,one_v[1]=o),_t?(addVertex(h,j,j,1,o,$,1),addVertex(h,d,j,0,o,$,-1),_||indexPairs(1,$),addFan(h,Vector$1.neg(d),j,Vector$1.neg(g),j,zero_v,one_v,zero_v,!1,e===JOIN_TYPE.bevel,$),addVertex(h,j,j,1,o,$,1),addVertex(h,g,j,0,o,$,-1)):(addVertex(h,d,j,1,o,$,1),addVertex(h,j,j,0,o,$,-1),_||indexPairs(1,$),addFan(h,d,Vector$1.neg(j),g,j,one_v,zero_v,one_v,!1,e===JOIN_TYPE.bevel,$),addVertex(h,g,j,1,o,$,1),addVertex(h,j,j,0,o,$,-1))}function indexPairs(e,o){for(var h=o.vertex_data.vertex_elements,d=o.vertex_data.vertex_count-2*e-2,g=0;g<e;g++)h.push(d+2*g+2),h.push(d+2*g+1),h.push(d+2*g),h.push(d+2*g+2),h.push(d+2*g+3),h.push(d+2*g+1),o.geom_count+=2}function addVertex(e,o,h,d,g,_,$){var j=_.vertex_template,_t=_.vertex_data;j[0]=e[0],j[1]=e[1];var _e=_.half_width*$;j[_.extrude_index+0]=o[0]*_e,j[_.extrude_index+1]=o[1]*_e,_.offset&&(j[_.offset_index+0]=h[0]*_.offset,j[_.offset_index+1]=h[1]*_.offset),_.texcoord_index!=null&&(j[_.texcoord_index+0]=d*_.texcoord_normalize,j[_.texcoord_index+1]=g*_.texcoord_normalize),_t.addVertex(j)}var uvCurr=[0,0];function addFan(e,o,h,d,g,_,$,j,_t,_e,_r){for(var _n=o[0]*d[1]-o[1]*d[0],_i=Vector$1.dot(o,d),_o=Math.atan2(_n,_i);_o>=Math.PI;)_o-=2*Math.PI;if(_e)_a=1;else{var _a=trianglesPerArc(_o,_r.half_width);if(_a<1)return}var _u=_r.vertex_data.vertex_count,_f=_r.vertex_data.vertex_elements;addVertex(e,h,g,$[0],$[1],_r,1),addVertex(e,o,g,_[0],_[1],_r,1);var _h,_d,ty=o,ey=_r.texcoord_index!=null;ey&&(_t?_h=Vector$1.sub(_,$):(uvCurr=Vector$1.copy(_),_d=Vector$1.div(Vector$1.sub(j,_),_a)));for(var sy,ny=_o/_a,uy=_o<0?-1:1,fy=0<_n?(sy=2,1):(sy=1,2),yy=0;yy<_a;yy++)yy===0&&_o<0&&(ty=Vector$1.neg(ty)),ty=Vector$1.rot(ty,ny),ey&&(_t?(_h=Vector$1.rot(_h,ny),uvCurr[0]=_h[0]+$[0],uvCurr[1]=_h[1]*_r.texcoord_width*_r.v_scale+$[1]):uvCurr=Vector$1.add(uvCurr,_d)),addVertex(e,ty,g,uvCurr[0],uvCurr[1],_r,uy),_f.push(_u+yy+sy),_f.push(_u),_f.push(_u+yy+fy)}function addCap(e,o,h,d,g,_){var $,j=Vector$1.neg(h),_t=_.texcoord_index!=null;switch(d){case CAP_TYPE.square:g?($=[h[1],-h[0]],addVertex(e,Vector$1.add(h,$),h,1,o,_,1),addVertex(e,Vector$1.add(j,$),h,0,o,_,1),_t&&(o+=.5*_.texcoord_width*_.v_scale),addVertex(e,h,h,1,o,_,1),addVertex(e,j,h,0,o,_,1)):($=[-h[1],h[0]],addVertex(e,h,h,1,o,_,1),addVertex(e,j,h,0,o,_,1),_t&&(o+=.5*_.texcoord_width*_.v_scale),addVertex(e,Vector$1.add(h,$),h,1,o,_,1),addVertex(e,Vector$1.add(j,$),h,0,o,_,1)),indexPairs(1,_);break;case CAP_TYPE.round:var _e,_r,_n=zero_v,_i=one_v,_o=mid_v;g?(_e=h,_r=j,_t&&(o+=.5*_.texcoord_width*_.v_scale,_n=one_v,_i=zero_v,_o=mid_v)):(_e=j,_r=h),_t&&(zero_v[1]=o,one_v[1]=o,mid_v[1]=o),addFan(e,_e,zero_vec2,_r,h,_n,_o,_i,!0,!1,_);break;case CAP_TYPE.butt:return}}function trianglesPerArc(e,o){e<0&&(e=-e);var h=o>2*DEFAULT.MIN_FAN_WIDTH?Math.log2(o/DEFAULT.MIN_FAN_WIDTH):1;return Math.ceil(e/Math.PI*h)}function permuteLine(e,o){for(var h=[],d=0;d<e.length;d++){var g=(d+o)%e.length;g!=0&&h.push(e[g])}return h.push(h[0]),h}var default_dash_color=[255,255,255,255],default_background_color=[0,0,0,0];function renderDashArray(e){var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},h=o.dash_color||default_dash_color,d=o.background_color||default_background_color,g=e,_=o.scale||1;g.length%2==1&&Array.prototype.push.apply(g,g);for(var $=!0,j=[],_t=0;_t<g.length;_t++){for(var _e=Math.floor(g[_t]*_),_r=0;_r<_e;_r++)Array.prototype.push.apply(j,$?h:d);$=!$}return{pixels:j=new Uint8Array(j),length:j.length/4}}var Lines=Object.create(Style);Lines.vertex_layouts=[[],[]],Lines.dash_textures={};var DASH_SCALE=20;function buildPolylines$1(e,o,h,d,g,_){for(var $={closed:_,vertex_data:h,vertex_template:d,half_width:o/2,vertex_layout_index:g,geom_count:0},j=0,_t=e.length;j<_t;j++)buildPolyline$1(e[j],$);return $.geom_count}function buildPolyline$1(e,o){if(!(e.length<2)){for(var h,d,g=[e[0]],_=0,$=[],j=[],_t=1,_e=e.length;_t<_e;_t++)e[_t][0]===e[_t-1][0]&&e[_t][1]===e[_t-1][1]||(g.push(e[_t]),h=Vector$1.sub(e[_t],e[_t-1]),d=Vector$1.length(h),$.push(h),j.push([_,_+d]),_+=d);if(!(g.length<2)){var _r=0,_n=$[$.length-1],_i=$[0],_o=$[1],_a=[0,0];2<g.length&&(o.closed&&(_a[0]=Vector$1.signedAngleBetween(_n,_i)),_a[1]=Vector$1.signedAngleBetween(_i,_o));var _u=g[0],_f=j[0];o.closed?(addVertex$1(_u,o,_r++,_f,_,_a,[_n,_i]),addVertex$1(_u,o,_r++,_f,_,_a,[_n,_i])):(addVertex$1(_u,o,_r++,_f,_,_a,[_i,_i]),addVertex$1(_u,o,_r++,_f,_,_a,[_i,_i]));for(var _h=1,_d=g.length-1;_h<_d;_h++)_u=g[_h],_n=$[_h-1],_i=$[_h],_o=$[_h+1],addVertex$1(_u,o,_r++,_f=j[_h-1],_,_a,[_n,_i]),addVertex$1(_u,o,_r++,_f,_,_a,[_n,_i]),triangulate(o),_f=j[_h],_a[0]=_a[1],_a[1]=_h!==_d-1?Vector$1.signedAngleBetween(_i,_o):o.closed?Vector$1.signedAngleBetween(_i,$[0]):0,addVertex$1(_u,o,_r++,_f,_,_a,[_n,_i]),addVertex$1(_u,o,_r++,_f,_,_a,[_n,_i]);_u=g[g.length-1],_f=j[j.length-1],_i=$[$.length-1],o.closed?(addVertex$1(_u,o,_r++,_f,_,_a,[_i,$[0]]),addVertex$1(_u,o,_r++,_f,_,_a,[_i,$[0]])):(addVertex$1(_u,o,_r++,_f,_,_a,[_i,_i]),addVertex$1(_u,o,_r++,_f,_,_a,[_i,_i])),triangulate(o)}}}function triangulate(e){var o=e.vertex_data.vertex_elements,h=e.vertex_data.vertex_count-4;o.push(2+h),o.push(1+h),o.push(h),o.push(2+h),o.push(3+h),o.push(1+h),e.geom_count+=2}Object.assign(Lines,{name:"lines",built_in:!0,vertex_shader_src:shaderSrc_polygonsVertex,fragment_shader_src:shaderSrc_polygonsFragment,selection:!0,init:function(){Style.init.apply(this,arguments),this.styles=this.styles||{},this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_EXTRUDE_LINES=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_TEXTURE_COORDS=!0,this.outline_feature_style={},this.inline_feature_style=this.feature_style},calcDistance:function(e,o){return e&&StyleParser.evalCachedDistanceProperty(e,o)||0},calcDistanceNextZoom:function(e,o){o.zoom++;var h=this.calcDistance(e,o);return o.zoom--,h},calcWidth:function(e,o,h){var d=this.calcDistance(e.width,h);if(!(d<0)){var g,_=e.next_width?this.calcDistanceNextZoom(e.next_width,h):d/2;return d===0&&_===0||_<0?!1:(o.width_unscaled=d,o.next_width_unscaled=_,e.next_width?(g=.5*(d+(_*=2)),o.width=g*h.units_per_meter_overzoom,o.width_scale=1-_/g):(o.width=d*h.units_per_meter_overzoom,o.width_scale=0),e.texcoords&&(e.inline_texcoord_width?o.texcoord_width=e.inline_texcoord_width:o.texcoord_width=(o.width_unscaled||o.next_width_unscaled)*h.units_per_meter_overzoom/h.tile.overzoom2),!0)}},calcOffset:function(e,o,h){var d,g;e.offset_precalc?(o.offset=e.offset_precalc,o.offset_scale=e.offset_scale_precalc):e.offset?(d=this.calcDistance(e.offset,h),e.next_offset?(g=2*this.calcDistanceNextZoom(e.next_offset,h),Math.abs(d)>=Math.abs(g)?(o.offset=d*h.units_per_meter_overzoom,o.offset_scale=d!==0?1-g/d:0):(o.offset=g*h.units_per_meter_overzoom,o.offset_scale=g!=0?-1*(1-d/g):0)):(o.offset=d*h.units_per_meter_overzoom,o.offset_scale=0)):(o.offset=0,o.offset_scale=0),StyleParser.evalProperty(e.offset_reverse,h)&&(o.offset*=-1)},_parseFeature:function(e,o,h){var d,g,_=this.feature_style;if(this.calcWidth(o,_,h)!==!1&&(this.calcOffset(o,_,h),_.color=this.parseColor(o.color,h),_.color))return _.variantKey=o.variantKey,_.z=o.z&&StyleParser.evalCachedDistanceProperty(o.z||0,h)||StyleParser.defaults.z,_.height=e.properties.height||StyleParser.defaults.height,_.extrude=StyleParser.evalProperty(o.extrude,h),_.extrude&&(typeof _.extrude=="number"?_.height=_.extrude:Array.isArray(_.extrude)&&(_.height=_.extrude[1])),_.extrude&&_.height&&(_.z+=_.height),_.z*=Geo$1.height_scale,_.height*=Geo$1.height_scale,_.cap=StyleParser.evalProperty(o.cap,h),_.join=StyleParser.evalProperty(o.join,h),_.miter_limit=StyleParser.evalProperty(o.miter_limit,h),_.tile_edges=o.tile_edges,_.outline=_.outline||{width:{},next_width:{},preprocessed:!0},o.outline&&o.outline.visible!==!1&&o.outline.color&&o.outline.width?(d=2*this.calcDistance(o.outline.width,h),g=2*this.calcDistanceNextZoom(o.outline.next_width,h),d==0&&g==0||d<0||g<0?(_.outline.width.value=null,_.outline.next_width.value=null,_.outline.color=null,_.outline.inline_texcoord_width=null,_.outline.texcoords=!1):(_.outline.width.value=d+_.width_unscaled,_.outline.next_width.value=g+_.next_width_unscaled,_.outline.inline_texcoord_width=_.texcoord_width,_.outline.offset_precalc=_.offset,_.outline.offset_scale_precalc=_.offset_scale,_.outline.color=o.outline.color,_.outline.cap=o.outline.cap,_.outline.join=o.outline.join,_.outline.miter_limit=o.outline.miter_limit,_.outline.texcoords=o.outline.texcoords,_.outline.style=o.outline.style,_.outline.variantKey=o.outline.variantKey,o.outline.order?_.outline.order=this.parseOrder(o.outline.order,h):_.outline.order=_.order,_.outline.order>_.order&&(_.outline.order=_.order),_.outline.order-=.5,_.outline.variant_order=0)):(_.outline.width.value=null,_.outline.next_width.value=null,_.outline.color=null,_.outline.inline_texcoord_width=null),_},_preprocess:function(e,o){var h,d=this.sources[o]?this.sources[o].config.uid:"";return e.color=StyleParser.createColorPropertyCache(e.color),e.width=StyleParser.createPropertyCache(e.width,StyleParser.parseUnits),e.width&&e.width.type!==StyleParser.CACHE_TYPE.STATIC&&(e.next_width=StyleParser.createPropertyCache(e.width,StyleParser.parseUnits)),e.offset=e.offset&&StyleParser.createPropertyCache(e.offset,StyleParser.parseUnits),e.offset&&e.offset.type!==StyleParser.CACHE_TYPE.STATIC&&(e.next_offset=StyleParser.createPropertyCache(e.offset,StyleParser.parseUnits)),e.z=StyleParser.createPropertyCache(e.z,StyleParser.parseUnits),e.dash=e.dash!==void 0?e.dash:this.dash,e.dash_key=e.dash&&this.dashTextureKey(e.dash,d),e.dash_background_color=e.dash_background_color!==void 0?e.dash_background_color:this.dash_background_color,e.dash_background_color=e.dash_background_color&&StyleParser.parseColor(e.dash_background_color),e.texture_merged=e.dash_key||(e.texture!==void 0?e.texture:this.texture),e.texcoords=this.texcoords||e.texture_merged?1:0,this.addMeshVariantForDraw(this.base,e),e.outline&&(e.outline.style=e.outline.style||this.name,e.outline.color=StyleParser.createColorPropertyCache(e.outline.color),e.outline.width=StyleParser.createPropertyCache(e.outline.width,StyleParser.parseUnits),e.outline.next_width=StyleParser.createPropertyCache(e.outline.width,StyleParser.parseUnits),e.outline.cap=e.outline.cap||e.cap,e.outline.join=e.outline.join||e.join,e.outline.miter_limit=e.outline.miter_limit||e.miter_limit,e.outline.offset=e.offset,(h=this.styles[e.outline.style])?(e.outline.dash=e.outline.dash!==void 0?e.outline.dash:h.dash,e.outline.texture=e.outline.texture!==void 0?e.outline.texture:h.texture,e.outline.dash!=null?(e.outline.dash_key=e.outline.dash&&this.dashTextureKey(e.outline.dash,d),e.outline.texture_merged=e.outline.dash_key):e.outline.dash===null||e.outline.texture!=null?(e.outline.dash_key=null,e.outline.texture_merged=e.outline.texture):(e.outline.dash=e.dash,e.outline.dash_key=e.outline.dash&&this.dashTextureKey(e.outline.dash,d),e.outline.texture_merged=e.outline.dash_key),e.outline.dash_background_color=e.outline.dash_background_color!==void 0?e.outline.dash_background_color:h.dash_background_color,e.outline.dash_background_color=e.outline.dash_background_color!==void 0?e.outline.dash_background_color:e.dash_background_color,e.outline.dash_background_color=e.outline.dash_background_color&&StyleParser.parseColor(e.outline.dash_background_color),e.outline.texcoords=h.texcoords||e.outline.texture_merged?1:0,this.addMeshVariantForDraw(this.base,e.outline)):(log({level:"warn",once:!0},"Layer '".concat(e.layers[e.layers.length-1],"': ")+"line 'outline' specifies non-existent draw style '".concat(e.outline.style,"' (or maybe the style is ")+"defined but is missing a 'base' or has another error), skipping outlines in layer"),e.outline=null)),e},dashTextureKey:function(e,o){return"__dash_"+o+"_"+this.scene_id+"_"+JSON.stringify(e)},getDashTexture:function(e,o){var h,d=this.dashTextureKey(e,this.sources[o].config.uid);Lines.dash_textures[d]==null&&(Lines.dash_textures[d]=!0,h=renderDashArray(e,{scale:DASH_SCALE}),this.textureManager.create(this.gl,d,{data:h.pixels,height:h.length,width:1,filtering:"nearest"}))},endData:function(e){var o=this;return Style.endData.call(this,e).then(function(h){if(h){h.uniforms.u_has_line_texture=!1,h.uniforms.u_texture=o.textureManager.default,h.uniforms.u_v_scale_adjust=Geo$1.tile_scale;var d=[];for(var g in h.meshes)(function(_){var $,j,_t=h.meshes[_].variant;_t.texture&&(($=h.meshes[_].uniforms=h.meshes[_].uniforms||{}).u_has_line_texture=!0,$.u_texture=_t.texture,$.u_texture_ratio=1,_t.dash&&($.u_v_scale_adjust=Geo$1.tile_scale*DASH_SCALE,$.u_dash_background_color=_t.dash_background_color||[0,0,0,0]),_t.dash_key&&Lines.dash_textures[_t.dash_key]==null&&(Lines.dash_textures[_t.dash_key]=!0,WorkerBroker.postMessage(o.main_thread_target+".getDashTexture",_t.dash,e.source)),o.textureManager.textures[_t.texture]==null?d.push(o.textureManager.syncTexturesToWorker([_t.texture]).then(function(_e){var _r=_e[_t.texture];_r&&($.u_texture_ratio=_r.height/_r.width)})):(j=o.textureManager.textures[_t.texture],$.u_texture_ratio=j.height/j.width))})(g);return e.mesh_data[o.name]=h,Promise.all(d).then(function(){return h})}return h})},computeVariantForDraw:function(e){var o=e.offset?1:0;return e.dash_key&&(o+=e.dash_key,e.dash_background_color&&(o+=e.dash_background_color)),e.texture_merged&&(o+=e.texture_merged),o=hashString(o+="/"+e.texcoords),{key:e.variantKey=o,order:e.variant_order,offset:e.offset?1:0,texcoords:e.texcoords,texture:e.texture_merged,dash:e.dash,dash_key:e.dash_key,dash_background_color:e.dash_background_color}},vertexLayoutForMeshVariant:function(e){var o;return Lines.vertex_layouts[e.key]==null&&(o=[{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_extrude",size:2,type:gl$1.SHORT,normalized:!1},{name:"a_offset",size:2,type:gl$1.SHORT,normalized:!1,static:e.offset?null:[0,0]},{name:"a_scaling",size:2,type:gl$1.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:gl$1.UNSIGNED_SHORT,normalized:!0,static:e.texcoords?null:[0,0]},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0}],Lines.vertex_layouts[e.key]=new VertexLayout(o)),Lines.vertex_layouts[e.key]},makeVertexTemplate:function(e,o){var h=0;return this.vertex_template[h++]=0,this.vertex_template[h++]=0,this.vertex_template[h++]=e.z||0,this.vertex_template[h++]=this.scaleOrder(e.order),this.vertex_template[h++]=0,this.vertex_template[h++]=0,o.variant.offset&&(this.vertex_template[h++]=0,this.vertex_template[h++]=0),this.vertex_template[h++]=1024*e.width_scale,this.vertex_template[h++]=1024*e.offset_scale,o.variant.texcoords&&(this.vertex_template[h++]=0,this.vertex_template[h++]=0),this.vertex_template[h++]=255*e.color[0],this.vertex_template[h++]=255*e.color[1],this.vertex_template[h++]=255*e.color[2],this.vertex_template[h++]=255*e.color[3],this.selection&&(this.vertex_template[h++]=255*e.selection_color[0],this.vertex_template[h++]=255*e.selection_color[1],this.vertex_template[h++]=255*e.selection_color[2],this.vertex_template[h++]=255*e.selection_color[3]),this.vertex_template},buildLines:function(e,o,h,d,g){var _;this.feature_style=this.outline_feature_style,!o.outline||o.outline.color==null||o.outline.width.value==null||(_=this.styles[o.outline.style])&&_.addFeature(d.feature,o.outline,d),this.feature_style=this.inline_feature_style;var $=h.vertex_data,j=$.vertex_layout,_t=this.makeVertexTemplate(o,h);return buildPolylines(e,o.width,$,_t,{cap:o.cap,join:o.join,miter_limit:o.miter_limit,extrude_index:j.index.a_extrude,offset_index:j.index.a_offset,texcoord_index:j.index.a_texcoord,texcoord_width:o.texcoord_width,texcoord_normalize:65535,closed_polygon:g&&g.closed_polygon,remove_tile_edges:!o.tile_edges&&g&&g.remove_tile_edges,tile_edge_tolerance:Geo$1.tile_scale*d.tile.pad_scale*2,offset:o.offset,crop_by_tile:this.crop_by_tile})},buildPolygons:function(e,o,h,d){for(var g=0,_=0;_<e.length;_++)g+=this.buildLines(e[_],o,h,d,{closed_polygon:!0,remove_tile_edges:!this.crop_by_tile});return g}});var TEX_COORDS=[[1,1],[1,-1],[-1,1],[-1,-1]];function addVertex$1(e,o,h,d,g,_,$){var j,_t=o.vertex_template,_e=o.vertex_data;setAttribute(o,"a_position",e),setAttribute(o,"a_width",o.half_width),o.vertex_layout_index.a_barycentric&&((j=[0,0,0])[h%3]=1,setAttribute(o,"a_barycentric",j)),setAttribute(o,"a_tangents",$[0].concat($[1])),setAttribute(o,"a_segment",d),setAttribute(o,"a_texcoord",TEX_COORDS[h%4]),setAttribute(o,"a_length",g),setAttribute(o,"a_closed",o.closed?1:0),setAttribute(o,"a_angles",_),_e.addVertex(_t)}function setAttribute(e,o,h){var d=h.length,g=e.vertex_template,_=e.vertex_layout_index[o],$=0;if(d)for(;$!==d;)g[_+$]=h[$],$++;else g[_+$]=h}function buildPatternBuffer(e,o){for(var h=e.reduce(function(_i,_o){return _i+_o}),d=0,g=[],_=0,$=e.length;_<=$;_+=2){var j=Math.max(1e-4,e[_%$]),_t=Math.max(1e-4,e[(_+1)%$]);g.push(d,d+j),d+=j+_t}for(var _e=new Uint8Array(4*o),_r=0,_n=0;_n<o;_n++)(function(_i){var _o=h*_i/(o-1),_a=minIdx(g.map(function(_d){return Math.abs(_d-_o)})),_u=void 0,_f=void 0,_h=void 0,_h=_a%2==0?(_u=_o<=g[_a]?1:0,_f=g[_a],g[_a+1]):(_u=_o>g[_a]?2:0,_f=g[_a-1],g[_a]);_e[_r++]=g[_a],_e[_r++]=_u,_e[_r++]=_f,_e[_r++]=_h})(_n);return _e}function minIdx(e){for(var o=e[0],h=0,d=1,g=e.length;d<g;d++)e[d]<o&&(o=e[h=d]);return h}var vertex_shader_src=`uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform sampler2D u_uniforms;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform vec3 u_map_position;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_index;uniform vec2 u_dash_caps;uniform float u_dash_phase;uniform float u_dash_period;attribute vec4 a_position;attribute vec4 a_color;attribute float a_width;
#ifdef TANGRAM_DEBUG_TRIANGLES
attribute vec3 a_barycentric;
#endif
attribute vec2 a_normal;attribute float a_length;attribute vec2 a_segment;attribute vec2 a_texcoord;attribute vec2 a_angles;attribute vec4 a_tangents;attribute float a_closed;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;
#ifdef TANGRAM_DEBUG_TRIANGLES
varying vec3 v_barycentric;
#endif
varying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;
#define TANGRAM_NORMAL vec3(0., 0., 1.)
#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING
varying vec4 v_modelpos_base_zoom;
#endif
#if defined(TANGRAM_LIGHTING_VERTEX)
varying vec4 v_lighting;
#endif
#ifndef TANGRAM_HEIGHT_SCALE
float TANGRAM_HEIGHT_SCALE=16.0;
#endif
#define UNPACK_SCALING(x) (x / 1024.)
#pragma tangram: camera
#pragma tangram: material
#pragma tangram: lighting
#pragma tangram: global
const float PI=3.141592653589793;const float THETA=15.0*PI/180.0;float cross(in vec2 v1,in vec2 v2){return v1.x*v2.y-v1.y*v2.x;}float signed_distance(in vec2 v1,in vec2 v2,in vec2 v3){return cross(v2-v1,v1-v3)/length(v2-v1);}void rotate(in vec2 v,in float angle,out vec2 result){float cosine=cos(angle);float sine=sin(angle);result=vec2(cosine*v.x-sine*v.y,sine*v.x+cosine*v.y);}void main(){
#pragma tangram: setup
#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING
v_modelpos_base_zoom=modelPositionBaseZoom();
#endif
float linewidth=a_width*2.0;v_angles=a_angles;v_segment=a_segment;v_color=a_color;v_length=a_length;v_texcoord=a_texcoord;
#ifdef TANGRAM_DEBUG_TRIANGLES
v_barycentric=a_barycentric;
#endif
v_color.a=min(linewidth,v_color.a);linewidth=max(linewidth,1.0);linewidth/=exp2(u_map_position.z-u_tile_origin.w);v_linewidth_and_closed=linewidth*(a_closed>0.0 ?-1.0 : 1.0);if(v_color.a<=0.0){gl_Position=vec4(0.0,0.0,0.0,1.0);return;}float width=ceil(1.25*u_antialias+linewidth)/2.0;vec2 t1=normalize(a_tangents.xy);vec2 t2=normalize(a_tangents.zw);float u=a_texcoord.x;u*=-1.0;float v=a_texcoord.y;vec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.0);if(t1!=t2){float angle=a_texcoord.x==1.0 ? a_angles.x : a_angles.y;vec2 t=normalize(t1+t2);vec2 o=vec2(+t.y,-t.x);float segmentLength=a_segment.y-a_segment.x;float magnitude=width/cos(angle/2.0);float sqMagnitude=magnitude*magnitude;float seg1SqMagnitude=dot(a_tangents.xy,a_tangents.xy);float seg2SqMagnitude=dot(a_tangents.zw,a_tangents.zw);if((abs(magnitude)>linewidth)&&(sqMagnitude>=min(seg1SqMagnitude,seg2SqMagnitude))){if(u==1.0){o=vec2(-t2.y,+t2.x);}else{o=vec2(-t1.y,+t1.x);}magnitude=width;angle=0.0;v_angles.x=0.0;v_angles.y=0.0;}if(u_dash_index>0.0){if((abs(angle)>THETA)){position.xy+=v*width*o/cos(angle/2.0);float s=sign(angle);if(angle<0.0){if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==1.0){position.xy-=2.0*width*t1/sin(angle);u-=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==1.0){position.xy+=2.0*width*t2/sin(angle);u+=2.0*width/sin(angle);}}}else{if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==-1.0){position.xy+=2.0*width*t1/sin(angle);u+=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==-1.0){position.xy-=2.0*width*t2/sin(angle);u-=2.0*width/sin(angle);}}}}else{position.xy+=v*width*o/cos(angle/2.0);if(u==+1.0){u=v_segment.y;}else{u=v_segment.x;}}}else{position.xy+=v*o*magnitude;if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);}else{u=v_segment.x-v*width*tan(angle/2.0);}}v_joinIndicator=(segmentLength+v*width*tan(angle/2.0))/segmentLength;}else{v_joinIndicator=-1.0;vec2 o=vec2(+t1.y,-t1.x);position.xy+=v*width*o;if(u==-1.0){u=v_segment.x-width;position.xy-=width*t1;}else{u=v_segment.y+width;position.xy+=width*t2;}}vec2 t;vec2 curr=a_position.xy;if(a_texcoord.x>=0.0){vec2 next=curr+t2*(v_segment.y-v_segment.x);rotate(t1,+a_angles.x/2.0,t);v_miter.x=signed_distance(curr,curr+t,position.xy);rotate(t2,+a_angles.y/2.0,t);v_miter.y=signed_distance(next,next+t,position.xy);}else{vec2 prev=curr-t1*(v_segment.y-v_segment.x);rotate(t1,-a_angles.x/2.0,t);v_miter.x=signed_distance(prev,prev+t,position.xy);rotate(t2,-a_angles.y/2.0,t);v_miter.y=signed_distance(curr,curr+t,position.xy);}v_distances=vec2(u,v*width);v_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;
#pragma tangram: position
v_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);
#if defined(TANGRAM_LIGHTING_VERTEX)
vec3 normal=v_normal;
#pragma tangram: normal
v_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));
#endif
cameraProjection(position);
#ifdef TANGRAM_LAYER_ORDER
applyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);
#endif
gl_Position=position;}`,fragment_shader_src=`uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_dash_atlas;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_phase;uniform float u_dash_period;uniform float u_dash_index;uniform vec2 u_dash_caps;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;
#ifdef TANGRAM_DEBUG_TRIANGLES
varying vec3 v_barycentric;
#endif
varying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;
#define TANGRAM_NORMAL v_normal
#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING
varying vec4 v_modelpos_base_zoom;
#endif
#if defined(TANGRAM_LIGHTING_VERTEX)
varying vec4 v_lighting;
#endif
#pragma tangram: camera
#pragma tangram: material
#pragma tangram: lighting
#pragma tangram: global
#pragma tangram: utils
const float PI=3.141592653589793;const float HALF_PI=PI/2.0;const float THETA=15.0*PI/180.0;/***Compute distance to cap.*@param{int}type The Type of the cap(see CAP_TYPE in pattern_lines)*@param{float}dx The distance of the pixel from the beginning of the line(not straight distance,but along the legs)*@param{float}dy The distance of the pixel from the midline(see v_distances in vertex shader,aka ±1*half_line_width)*@param{float}aa_radius The distance from the mid-line from where antialiasing starts.*For example for a linewidth 10px width and 2px filter radius it is 10px/2-2px=3px.*@return{float}distance*/float cap(int type,float dx,float dy,float aa_radius){float dist=0.0;dx=abs(dx);dy=abs(dy);if(type==1)dist=sqrt(dx*dx+dy*dy);else if(type==3)dist=(dx+abs(dy));else if(type==2)dist=max(abs(dy),(aa_radius+dx-abs(dy)));else if(type==4)dist=max(dx,dy);else if(type==5)dist=max(dx+aa_radius,dy);return dist;}/***Compute distance to join.*@param{int}type The type of the join(see JOIN_TYPE in pattern_lines)*@param{vec2}segment Interpolated a_segment attribute from the vertex shader*@param{vec2}texcoord Pair of u/v coordinates to identify the 4 different extruded points of the segment.*@param{vec2}distances 2 component vector where:*x is the distance of the pixel from the beginning of the line(along the legs)*y is the  distance of the pixel from the midline(see v_distances in vertex shader,±1*half_line_width)*@param{vec2}miter Miter point coordiante*@param{float}miter_limit The miter limit*@param{float}linewidth The width of the line*@return{float}computed distance*/float join(in int type,in vec2 segment,in vec2 texcoord,in vec2 distances,in vec2 miter,in float miter_limit,in float linewidth){float dx=distances.x;float result=abs(distances.y);if((dx<segment.x)||(dx>segment.y)){if(type==1){float s=dx<segment.x ? segment.x : segment.y;result=max(result,length(distances-vec2(s,0.0)));}else{float m=abs(texcoord.x>=0.0 ? miter.x : miter.y);if(type==2){result=max(result,m);}else if(type==0){result=max(result,m-miter_limit*linewidth/2.0);}}}return result;}void main(void){
#pragma tangram: setup
vec4 color=v_color;vec3 normal=TANGRAM_NORMAL;
#ifdef TANGRAM_CROP_BY_TILE
if(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}
#endif
#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)
calculateNormal(normal);
#endif
#if !defined(TANGRAM_LIGHTING_VERTEX)
#pragma tangram: normal
#endif
#pragma tangram: color
#if defined(TANGRAM_LIGHTING_FRAGMENT)
color=calculateLighting(v_position.xyz-u_eye,normal,color);
#elif defined(TANGRAM_LIGHTING_VERTEX)
color*=v_lighting;
#endif
#pragma tangram: filter
if(v_color.a<=0.0){discard;}bool solid=(u_dash_index==0.0);bool closed=v_linewidth_and_closed<0.0;float dx=v_distances.x;float dy=v_distances.y;float linewidth=abs(v_linewidth_and_closed);float aa_radius=linewidth/2.0-u_antialias;float dist=0.0;vec2 linecaps=u_linecaps;vec2 dash_caps=u_dash_caps;float line_start=0.0;float line_stop=v_length;if(solid){dist=abs(dy);bool potentialCap=!closed&&v_joinIndicator<0.0;if(potentialCap&&dx<line_start){dist=cap(int(u_linecaps.x),abs(dx),abs(dy),aa_radius);}else if(potentialCap&&dx>line_stop){dist=cap(int(u_linecaps.y),abs(dx)-line_stop,abs(dy),aa_radius);}else{dist=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);}}else{float segment_start=v_segment.x;float segment_stop=v_segment.y;float segment_center=(segment_start+segment_stop)/2.0;float freq=u_dash_period*linewidth;float dash_phase=u_dash_phase-1e-5;float u=mod(dx+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));float dash_center=float(tex.x)*255.0*linewidth;float dash_type=floor(float(tex.y)*255.0+0.5);float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;float dash_start=dx-u+_start;float dash_stop=dx-u+_stop;if((dash_stop<segment_start)&&(dash_caps.x!=5.0)){float u=mod(segment_start+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_start-u+_start;dash_stop=segment_start-u+_stop;}else if((dash_start>segment_stop)&&(dash_caps.y!=5.0)){float u=mod(segment_stop+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_stop-u+_start;dash_stop=segment_stop-u+_stop;}bool discontinuous=((dx<segment_center)&&abs(v_angles.x)>THETA)||((dx>=segment_center)&&abs(v_angles.y)>THETA);float d_join=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);if(closed){line_start+=linewidth/2.0;line_stop-=linewidth/2.0;}if(dash_stop<=line_start){discard;}if(dash_start>=line_stop){discard;}if(discontinuous){if((dash_start>segment_stop)){discard;}if((dash_stop<segment_start)){discard;}if(dash_caps.x==1.0){if((u>_stop)&&(dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){discard;}}if(dash_caps.y==1.0){if((u<_start)&&(dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){discard;}}if((dash_caps.x!=1.0)&&(dash_caps.x!=5.0)){if((dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){float a=v_angles.x/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(segment_start-dx)*cos_a-dy*sin_a;float y=(segment_start-dx)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.x=4.0;}}if((dash_caps.y!=1.0)&&(dash_caps.y!=5.0)){if((dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){float a=v_angles.y/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(dx-segment_stop)*cos_a-dy*sin_a;float y=(dx-segment_stop)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.y=4.0;}}}if((dx<line_start)&&(dash_start<=line_start)&&(dash_stop>line_start)){dist=cap(int(linecaps.x),dx-line_start,dy,aa_radius);}else if((dx>line_stop)&&(dash_stop>line_stop)&&(dash_start<line_stop)){dist=cap(int(linecaps.y),dx-line_stop,dy,aa_radius);}else if(dash_type==1.0){dist=cap(int(dash_caps.x),abs(dash_center-u),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}else if(dash_type==0.0){dist=abs(dy);}else if(dash_type==2.0){dist=cap(int(dash_caps.y),abs(u-dash_center),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}if((dx>line_start)&&(dx<line_stop)){if((dx<=segment_start)&&(dash_start<=segment_start)&&(dash_stop>=segment_start)){dist=d_join;float angle=HALF_PI+v_angles.x;float f=abs((segment_start-dx)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if((dx>segment_stop)&&(dash_start<=segment_stop)&&(dash_stop>=segment_stop)){dist=d_join;float angle=HALF_PI+v_angles.y;float f=abs((dx-segment_stop)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}dist=dist-aa_radius;if(dist>=0.0){if(u_antialias==0.0){discard;}else{color=vec4(color.rgb,exp(-dist*dist)*color.a);}}
#ifdef TANGRAM_DEBUG_TRIANGLES
if(any(lessThan(v_barycentric,vec3(0.0085)))){color=vec4(0.0,1.0,0.0,1.0);}
#endif
gl_FragColor=color;}`,PatternLines=Object.create(Style),CAP_TYPE$1={round:1,"arrow-tail":2,"arrow-head":3,square:4,butt:5},JOIN_TYPE$1={miter:0,round:1,bevel:2},PATTERN_MAX_WIDTH=1024,DEFAULT_LINE_CAP=CAP_TYPE$1.round,DEFAULT_JOIN_TYPE=JOIN_TYPE$1.miter,DEFAULT_DASH_PATTERN=[0,0],VARIANT_UNIQUE_PROP_NAMES="antialias join linecaps miter_limit dash_index dash dash_caps dash_phase".split(" ");function getHashForStyle(e){for(var o=[],h=0,d=VARIANT_UNIQUE_PROP_NAMES.length;h<d;h++){var g=e[VARIANT_UNIQUE_PROP_NAMES[h]];Array.isArray(g)?o.push(g.join("_")):typeof g=="boolean"?o.push(g?1:0):g&&o.push(g.toString())}return o.join("/")}Object.assign(PatternLines,{name:"pattern-lines",built_in:!0,vertex_shader_src,fragment_shader_src,selection:!0,init:function(){Style.init.apply(this,arguments),this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_DEBUG_TRIANGLES=!1,this.defines.TANGRAM_DEBUG_NO_TEXTURE_FLOAT_SUPPORT=!1,this.styles=this.styles||{},PatternLines.vertex_layouts=[]},calcDistance:function(e,o){return e&&StyleParser.evalCachedDistanceProperty(e,o)||0},calcDash:function(e,o){var h=StyleParser.evalProperty(e.dash,o),d=0;return h&&((h=Array.isArray(h)&&h.length?h:DEFAULT_DASH_PATTERN).length%2==1&&(h=h.concat(h)),d=+(d=h.reduce(function(g,_){return g+_}))||0),{dash:h,dash_period:d}},calcWidth:function(e,o,h){var d=this.calcDistance(e.width,h);return!(d<0)&&(o.width=d*h.units_per_meter_overzoom,!0)},getCapType:function(e,o,h){var d=StyleParser.evalProperty(e,o);return CAP_TYPE$1[d]!==void 0?CAP_TYPE$1[d]:h},_parseFeature:function(e,o,h){if(this.calcWidth(o,this.feature_style,h)!==!1){var d=this.parseColor(o.color,h);if(d&&d[3]!==0){var g=this.getCapType(o.cap,h,DEFAULT_LINE_CAP),_=StyleParser.evalProperty(o.join,h),$=+StyleParser.evalProperty(o.miter_limit,h),j=this.calcDash(o,h),_t=j.dash,_e=j.dash_period,_r=Object.assign({color:d,antialias:o.antialias,linecaps:[this.getCapType(o.tail_cap,h,g),this.getCapType(o.head_cap,h,g)],join:JOIN_TYPE$1[_]!==void 0?JOIN_TYPE$1[_]:DEFAULT_JOIN_TYPE,miter_limit:0<=$?$:3,dash_index:_e===0?0:1,dash:_t,dash_caps:[this.getCapType(o.tail_cap,h,g),this.getCapType(o.head_cap,h,g)],dash_phase:+StyleParser.evalProperty(o.dash_phase,h)||0,dash_period:_e},this.feature_style);return _r.z=o.z&&StyleParser.evalCachedDistanceProperty(o.z||0,h)||StyleParser.defaults.z,_r.z*=Geo$1.height_scale,_r.extrude=StyleParser.evalProperty(o.extrude,h),_r.extrude&&(_r.extrude===!0?(_r.height=e.properties.height!==void 0?e.properties.height:StyleParser.defaults.height,_r.min_height=e.properties.min_height!==void 0?e.properties.min_height:StyleParser.defaults.min_height):typeof _r.extrude=="number"?(_r.height=_r.extrude,_r.min_height=0):Array.isArray(_r.extrude)&&(_r.min_height=_r.extrude[0],_r.height=_r.extrude[1]),_r.height*=Geo$1.height_scale,_r.min_height*=Geo$1.height_scale),this.addMeshVariantForDraw(this.base,_r),_r}}},_preprocess:function(e){e.color=StyleParser.createColorPropertyCache(e.color),e.width=StyleParser.createPropertyCache(e.width,StyleParser.parseUnits),e.width&&e.width.type!==StyleParser.CACHE_TYPE.STATIC&&(e.next_width=StyleParser.createPropertyCache(e.width,StyleParser.parseUnits)),e.z=StyleParser.createPropertyCache(e.z,StyleParser.parseUnits);var o=+e.antialias;return e.antialias=isNaN(o)?0:o,e},buildRasterTextures:function(e,o){var h=[];for(var d in o.meshes){var g,_=this.getMeshVariantTypeForDraw({variantKey:d}),$=_.uniforms,j=_.pattern;$.u_dash_index&&(g="__dash_"+j.join("_")+"_"+e.key+"_"+e.id,h.push({name:g,data:buildPatternBuffer(j,PATTERN_MAX_WIDTH)}),$.u_dash_atlas=g,o.meshes[d].textures=[g]),o.meshes[d].uniforms=$}return o.uniforms=o.uniforms||{},h.length?WorkerBroker.postMessage(this.main_thread_target+".loadTextures",h).then(function(_t){return o}):Promise.resolve(o)},loadTextures:function(e){for(var o=[],h=0;h<e.length;h++){var d=e[h],g=(g=this.textureManager.textures[d.name])||this.textureManager.create(this.gl,d.name,{filtering:"nearest",repeat:!0,width:PATTERN_MAX_WIDTH,height:1,data:d.data});o.push(g.loading)}return Promise.all(o).then(function(_){return _.map(function($){return $.retain(),$.name})})},computeVariantForDraw:function(e){var o=getHashForStyle(e);return{key:e.variantKey=o,order:e.variant_order,uniforms:{u_antialias:e.antialias,u_linecaps:e.linecaps,u_linejoin:e.join,u_miter_limit:e.miter_limit,u_dash_index:e.dash_index,u_dash_caps:e.dash_caps,u_dash_phase:e.dash_phase,u_dash_period:e.dash_period},pattern:e.dash}},vertexLayoutForMeshVariant:function(e){var o;return PatternLines.vertex_layouts[e.key]==null&&(o=[{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_width",size:1,type:gl$1.FLOAT,normalized:!1},{name:"a_tangents",size:4,type:gl$1.FLOAT,normalized:!1},{name:"a_segment",size:2,type:gl$1.FLOAT,normalized:!1},{name:"a_angles",size:2,type:gl$1.FLOAT,normalized:!1},{name:"a_texcoord",size:2,type:gl$1.FLOAT,normalized:!0},{name:"a_length",size:1,type:gl$1.FLOAT,normalized:!1},{name:"a_closed",size:1,type:gl$1.FLOAT,normalized:!1},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0}],this.defines.TANGRAM_DEBUG_TRIANGLES&&o.push({name:"a_barycentric",size:3,type:gl$1.SHORT,normalized:!1}),PatternLines.vertex_layouts[e.key]=new VertexLayout(o)),PatternLines.vertex_layouts[e.key]},makeVertexTemplate:function(e){var o=0;return this.vertex_template[o++]=0,this.vertex_template[o++]=0,this.vertex_template[o++]=e.z+e.height||0,this.vertex_template[o++]=this.scaleOrder(e.order),this.vertex_template[o++]=255*e.color[0],this.vertex_template[o++]=255*e.color[1],this.vertex_template[o++]=255*e.color[2],this.vertex_template[o++]=255*e.color[3],this.vertex_template[o++]=0,this.vertex_template[o++]=0,this.vertex_template[o++]=0,this.vertex_template[o++]=0,this.vertex_template[o++]=0,this.vertex_template[o++]=0,this.vertex_template[o++]=0,this.vertex_template[o++]=0,this.vertex_template[o++]=0,this.vertex_template[o++]=0,this.vertex_template[o++]=0,this.vertex_template[o++]=0,this.vertex_template[o++]=0,this.selection&&(this.vertex_template[o++]=255*e.selection_color[0],this.vertex_template[o++]=255*e.selection_color[1],this.vertex_template[o++]=255*e.selection_color[2],this.vertex_template[o++]=255*e.selection_color[3]),this.defines.TANGRAM_DEBUG_TRIANGLES&&(this.vertex_template[o++]=0,this.vertex_template[o++]=0,this.vertex_template[o++]=0),this.vertex_template},buildLines:function(e,o,h,d,g){var _=4<arguments.length&&g!==void 0&&g,$=h.vertex_data,j=$.vertex_layout,_t=this.makeVertexTemplate(o,h);return buildPolylines$1(e,o.width,$,_t,j.index,_)},buildPolygons:function(e,o,h,d){for(var g=0,_=0,$=e.length;_<$;_++)g+=this.buildLines(e[_],o,h,d,!0);return g}});var STICK_WIDTH=1;function buildQuadsForPoints(e,o,h,d){var g,_,$,j,_t,_e,_r=d.quad,Ly=d.quad_normalize,_n=d.offset,_i=d.offsets,_o=d.offsets_alt,_a=d.pre_angles,_u=d.pre_angles_alt,_f=d.angle,_h=d.angles,_d=d.angles_alt,ty=d.is_flat,ey=d.elevate_by_altitude,sy=d.build_stick_points,ny=d.color,uy=d.stick_color,fy=d.curve,yy=d.texcoord_scale,xy=d.texcoord_normalize,Ey=d.pre_angles_normalize,Oy=d.angles_normalize,Gy=d.offsets_normalize,Ly=Ly||1,g0=_r[0]/2*Ly,a0=_r[1]/2*Ly,e0=[[-g0,-a0],[g0,-a0],[g0,a0],[-g0,a0]],Ay=o.vertex_elements,$y=o.vertex_count,Hy=o.vertex_layout.index,i0=Hy.a_texcoord,m0=Hy.a_position,d0=Hy.a_shape,A0=Hy.a_offset,W0=Hy.a_offsets,D0=Hy.a_offsets_alt,X0=Hy.a_pre_angles,l1=Hy.a_pre_angles_alt,Q0=Hy.a_angles,O0=Hy.a_angles_alt,H0=Hy.a_is_flat,c1=Hy.a_is_stick,e1=Hy.a_color;i0&&(xy=xy||1,_e=[[_=(g=_slicedToArray(yy||default_uvs,4))[0],$=g[1]],[j=g[2],$],[j,_t=g[3]],[_,_t]]);for(var i1=0,p1=e.length,a1=0;a1<p1;a1++){var Y0=e[a1];if(sy){for(var o1=STICK_WIDTH/2*Ly,E1=+Ly,R1=[[-o1,0],[+o1,0],[+o1,E1],[-o1,E1]],Z0=0;Z0<4;Z0++)i0&&(h[i0+0]=_e[Z0][0]*xy,h[i0+1]=_e[Z0][1]*xy),h[m0+0]=Y0[0],h[m0+1]=Y0[1],ey&&(h[m0+2]=MathUtils$1.clamp(Y0[2],0,32767)),h[d0+0]=R1[Z0][0],h[d0+1]=R1[Z0][1],h[d0+2]=0,h[e1+0]=uy[0],h[e1+1]=uy[1],h[e1+2]=uy[2],h[e1+3]=uy[3],h[c1+0]=255,o.addVertex(h);Ay.push($y+0),Ay.push($y+1),Ay.push($y+2),Ay.push($y+2),Ay.push($y+3),Ay.push($y+0),$y+=4,i1+=2}for(var u1=0;u1<4;u1++)i0&&(h[i0+0]=_e[u1][0]*xy,h[i0+1]=_e[u1][1]*xy),h[m0+0]=Y0[0],h[m0+1]=Y0[1],ey&&(h[m0+2]=MathUtils$1.clamp(Y0[2],0,32767)),h[d0+0]=e0[u1][0],h[d0+1]=e0[u1][1],h[d0+2]=_f,h[e1+0]=ny[0],h[e1+1]=ny[1],h[e1+2]=ny[2],h[e1+3]=ny[3],h[A0+0]=_n[0],h[A0+1]=_n[1],h[H0+0]=ty?255:0,sy&&(h[c1+0]=0),fy&&(h[X0+0]=Ey*_a[0],h[X0+1]=Ey*_a[1],h[X0+2]=Ey*_a[2],h[X0+3]=Ey*_a[3],h[Q0+0]=Oy*_h[0],h[Q0+1]=Oy*_h[1],h[Q0+2]=Oy*_h[2],h[Q0+3]=Oy*_h[3],h[W0+0]=Gy*_i[0],h[W0+1]=Gy*_i[1],h[W0+2]=Gy*_i[2],h[W0+3]=Gy*_i[3],_o&&(h[D0+0]=Gy*_o[0],h[D0+1]=Gy*_o[1],h[D0+2]=Gy*_o[2],h[D0+3]=Gy*_o[3],h[l1+0]=Ey*_u[0],h[l1+1]=Ey*_u[1],h[l1+2]=Ey*_u[2],h[l1+3]=Ey*_u[3],h[O0+0]=Oy*_d[0],h[O0+1]=Oy*_d[1],h[O0+2]=Oy*_d[2],h[O0+3]=Oy*_d[3])),o.addVertex(h);Ay.push($y+0),Ay.push($y+1),Ay.push($y+2),Ay.push($y+2),Ay.push($y+3),Ay.push($y+0),$y+=4,i1+=2}return i1}var id$2=0,Label={id_prefix:"",nextLabelId:function(){return"".concat(Label.id_prefix,"/").concat(id$2++)}};function textLayoutToJSON(e){return{priority:e.priority,collide:e.collide,repeat_distance:e.repeat_distance,repeat_group:e.repeat_group,buffer:e.buffer,italic:e.italic}}var lefts=["left","top-left","bottom-left"],rights=["right","top-right","bottom-right"],tops=["top","top-left","top-right"],bottoms=["bottom","bottom-left","bottom-right"],PointAnchor$1={computeOffset:function(e,o,h,d){var _=3<arguments.length&&d!==void 0?d:null;if(!h||h==="center")return e;var g=[e[0],e[1]],_=_||this.default_buffer;return this.isLeftAnchor(h)?(g[0]-=o[0]/2,h==="left"&&(g[0]-=_[0])):this.isRightAnchor(h)&&(g[0]+=o[0]/2,h==="right"&&(g[0]+=_[1])),this.isTopAnchor(h)?(g[1]-=o[1]/2,h==="top"&&(g[1]-=_[2])):this.isBottomAnchor(h)&&(g[1]+=o[1]/2,h==="bottom"&&(g[1]+=_[3])),g},alignForAnchor:function(e){if(e&&e!=="center"){if(this.isLeftAnchor(e))return"right";if(this.isRightAnchor(e))return"left"}return"center"},isLeftAnchor:function(e){return-1<lefts.indexOf(e)},isRightAnchor:function(e){return-1<rights.indexOf(e)},isTopAnchor:function(e){return-1<tops.indexOf(e)},isBottomAnchor:function(e){return-1<bottoms.indexOf(e)},default_buffer:[2.5,2.5,1.5,.75],zero_buffer:[0,0,0,0]};function encircleLine(e,o,h,d,g){var _=[],$=h-e,j=d-o,_t=MathUtils$1.getLineLength(e,o,h,d),_e=2*g;if((_r=_t/_e)<=1)_.push(e+$/2,o+j/2,g);else{var _r,_n=_e/_t,_i=$*_n,_o=j*_n;(_r=_t/g/2)%1&&_.push(h-_i/2,d-_o/2,g),_r|=0;for(var _a=e+_i/2,_u=o+_o/2;_r--;)_.push(_a,_u,g),_a+=_i,_u+=_o}return _}var LabelPoint=function(){function e(o,h,d,g){_classCallCheck(this,e),this.id=Label.nextLabelId(),this.position=[o[0],o[1]],o[2]!==void 0&&this.position.push(o[2]),this.size=h,this.layout=g,this.anchor=Array.isArray(this.layout.anchor)?this.layout.anchor[0]:this.layout.anchor,this.placed=null,this.type="point",this.parent=this.layout.parent,this.offset=this.computeOffset(),this.align=this.layout.align||PointAnchor$1.alignForAnchor(this.anchor),this._is_flat=d}return _createClass(e,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,align:this.align,sides:this.getSides(),breach:!this.inTileBounds(),layout:textLayoutToJSON(this.layout)}}},{key:"inTileBounds",value:function(){var o=this.getAABB(),h=o.left,d=o.top,g=o.right,_=o.bottom;return Utils$1.pointInTile([h,d])&&Utils$1.pointInTile([g,_])}},{key:"isFlat",value:function(){return this._is_flat}},{key:"setAnchor",value:function(o){this._circles=void 0,this._aabb=void 0,this.anchor=o,this.offset=this.computeOffset()}},{key:"computeOffset",value:function(){var o,h=[this.layout.offset[0],this.layout.offset[1]];return this.parent&&(o=this.parent,h=PointAnchor$1.computeOffset(h,o.size,o.anchor,PointAnchor$1.zero_buffer),h=PointAnchor$1.computeOffset(h,o.size,this.anchor,PointAnchor$1.zero_buffer),o.offset!==StyleParser.zeroPair&&(h===StyleParser.zeroPair?h=o.offset:(h[0]+=o.offset[0],h[1]+=o.offset[1]))),PointAnchor$1.computeOffset(h,this.size,this.anchor)}},{key:"getBoundingCircles",value:function(){return this.angle?(this._circles||(o=this.layout.units_per_pixel,_=-(d=(h=this.size[0]/2*o)*Math.cos(this.angle)),$=-(g=h*Math.sin(this.angle)),_t=(j=_slicedToArray(this.position,2))[0],_e=j[1],d+=_t,g+=_e*=-1,_+=_t,$+=_e,_r=this.size[1]/2*o,this._circles=encircleLine(d,g,_,$,_r)),this._circles):[];var o,h,d,g,_,$,j,_t,_e,_r}},{key:"getAABB",value:function(){var o,h,d,g,_;return this._aabb||(o=this.layout.units_per_pixel,h=(this.size[0]/2+this.layout.buffer[0])*o,d=(this.size[1]/2+this.layout.buffer[1])*o,g=this.position[0]+this.offset[0]*o,_=this.position[1]-this.offset[1]*o,this._aabb={left:g-h,top:_+d,right:g+h,bottom:_-d}),this._aabb}},{key:"getSides",value:function(){var o=this.getAABB(),h=o.left,d=o.top,g=o.right,_=(d+o.bottom)/2;return[h,_,g,_]}}]),e}();LabelPoint.PLACEMENT={VERTEX:0,MIDPOINT:1,SPACED:2,CENTROID:3};var PLACEMENT=LabelPoint.PLACEMENT,default_spacing=80;function placePointsOnLine(e,o,h,d){var g=[],_=d.placement,$=Math.max(o[0],o[1])*d.placement_min_length_ratio*d.units_per_pixel;switch(_){case PLACEMENT.SPACED:var j=getPositionsAndAngles(e,$,d);if(!j)return[];for(var _t=j.positions,_e=j.angles,_r=0;_r<_t.length;_r++){var _n,_i=_t[_r],_o=_e[_r];d.tile_edges!==!0&&isCoordOutsideTile(_i)||((_n=new LabelPoint(_i,o,h,d)).angle=_o,g.push(_n))}break;case PLACEMENT.VERTEX:for(var _a,_u,_f,_h=0;_h<e.length-1;_h++)_a=e[_h],_u=e[_h+1],d.tile_edges!==!0&&isCoordOutsideTile(_a)||((_f=new LabelPoint(_a,o,h,d)).angle=getAngle(_a,_u,d.angle),g.push(_f));(_f=new LabelPoint(_u,o,h,d)).angle=getAngle(_a,_u,d.angle),g.push(_f);break;case PLACEMENT.MIDPOINT:for(var _d=0;_d<e.length-1;_d++){var ty,ey=e[_d],sy=e[_d+1],ny=[.5*(ey[0]+sy[0]),.5*(ey[1]+sy[1])];d.tile_edges!==!0&&isCoordOutsideTile(ny)||(!$||norm(ey,sy)>$)&&((ty=new LabelPoint(ny,o,h,d)).angle=getAngle(ey,sy,d.angle),g.push(ty))}}return g}function getPositionsAndAngles(e,o,h){var d=h.units_per_pixel,g=(h.placement_spacing||default_spacing)*d,_=getLineLength(e);if(_<=o)return!1;for(var $=Math.max(Math.floor(_/g),1),j=[],_t=[],_e=.5*(_-($-1)*g),_r=0;_r<$;_r++){var _n=interpolateLine(e,_e,o,h),_i=_n.position,_o=_n.angle;_i!=null&&_o!=null&&(j.push(_i),_t.push(_o)),_e+=g}return{positions:j,angles:_t}}function getAngle(e,o){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;return h==="auto"?Math.atan2(o[0]-e[0],o[1]-e[1]):h}function getLineLength(e){for(var o=0,h=0;h<e.length-1;h++)o+=norm(e[h],e[h+1]);return o}function norm(e,o){return Math.sqrt(Math.pow(e[0]-o[0],2)+Math.pow(e[1]-o[1],2))}function interpolateLine(e,o,h,d){for(var g,_,$=0,j=0;j<e.length-1;j++){var _t=e[j],_e=e[j+1],_r=norm(_t,_e);if(!(_r<=h)&&o<($+=_r)){g=interpolateSegment(_t,_e,$-o),_=getAngle(_t,_e,d.angle);break}}return{position:g,angle:_}}function interpolateSegment(e,o,h){var d=h/norm(e,o);return[d*e[0]+(1-d)*o[0],d*e[1]+(1-d)*o[1]]}var TextSettings$1={key:function(e){return[e.style,e.weight,e.family,e.px_size,e.fill,e.stroke,e.stroke_width,e.transform,e.text_wrap,e.max_lines,e.supersample,e.background_color,e.outline_color,e.outline_width,e.padding,Utils$1.device_pixel_ratio].join("/")},defaults:{style:"normal",weight:null,size:"12px",px_size:12,family:"Helvetica",fill:"white",text_wrap:15,max_lines:5,align:"center",stroke:null,stroke_width:0,background_color:null,outline_color:null,outline_width:0,padding:[0,0,0,0]},compute:function(e,o,h){var d={};if(o.font=o.font||this.defaults,d.can_articulate=o.can_articulate,d.fill=o.font.fill&&Utils$1.toCSSColor(StyleParser.evalCachedColorProperty(o.font.fill,h))||this.defaults.fill,d.style=o.font.style||this.defaults.style,d.weight=o.font.weight||this.defaults.weight,o.font.family?(d.family=o.font.family,d.family!==this.defaults.family&&(d.family+=", "+this.defaults.family)):d.family=this.defaults.family,d.transform=o.font.transform,d.size=o.font.size||this.defaults.size,d.supersample=o.supersample_text?1.5:1,d.px_size=StyleParser.evalCachedProperty(o.font.px_size,h)*d.supersample,d.px_size!==0){o.font.stroke&&o.font.stroke.color&&(d.stroke=Utils$1.toCSSColor(StyleParser.evalCachedColorProperty(o.font.stroke.color,h)||this.defaults.stroke),d.stroke_width=StyleParser.evalCachedProperty(o.font.stroke.width,h)||this.defaults.stroke_width),d.font_css=this.fontCSS(d);var g=o.text_wrap;return g==null&&Geo$1.geometryType(e.geometry.type)!=="line"&&(g=!0),g===!0&&(g=this.defaults.text_wrap),d.text_wrap=g,d.max_lines=o.max_lines||this.defaults.max_lines,d.background_color=o.background&&o.background.color&&!o.can_articulate?Utils$1.toCSSColor(StyleParser.evalCachedColorProperty(o.background.color,h)):this.defaults.background_color,d.outline_color=o.outline&&o.outline.color&&!o.can_articulate?Utils$1.toCSSColor(StyleParser.evalCachedColorProperty(o.outline.color,h)):this.defaults.outline_color,d.outline_width=o.outline&&o.outline.width&&!o.can_articulate?StyleParser.evalCachedProperty(o.outline.width,h):this.defaults.outline_width,d.padding=o.padding&&!o.can_articulate?StyleParser.evalCachedProperty(o.padding,h):this.defaults.padding,d}},fontCSS:function(e){return[e.style,e.weight,e.px_size+"px",e.family].filter(function(o){return o}).join(" ")}},fontfaceobserver_standalone=createCommonjsModule(function(e){function o(_i,_o){document.addEventListener?_i.addEventListener("scroll",_o,!1):_i.attachEvent("scroll",_o)}function h(_i){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(_i)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function d(_i,_o){_i.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+_o+";"}function g(_i){var _o=_i.a.offsetWidth,_a=_o+100;return _i.f.style.width=_a+"px",_i.c.scrollLeft=_a,_i.b.scrollLeft=_i.b.scrollWidth+100,_i.g!==_o&&(_i.g=_o,1)}function _(_i,_o){function _a(){var _f=_u;g(_f)&&_f.a.parentNode&&_o(_f.g)}var _u=_i;o(_i.b,_a),o(_i.c,_a),g(_i)}function $(_i,_o){var _a=_o||{};this.family=_i,this.style=_a.style||"normal",this.weight=_a.weight||"normal",this.stretch=_a.stretch||"normal"}function j(_i,_o){return[_i.style,_i.weight,function(){if(_r===null){var _a=document.createElement("div");try{_a.style.font="condensed 100px sans-serif"}catch{}_r=_a.style.font!==""}return _r}()?_i.stretch:"","100px",_o].join(" ")}var _t,_e,_r,_n;_n=_r=_e=_t=null,$.prototype.load=function(_i,_o){var _a=this,_u=_i||"BESbswy",_f=0,_h=_o||3e3,_d=new Date().getTime();return new Promise(function(ty,ey){var sy,ny,uy;_n===null&&(_n=!!document.fonts),(sy=_n)&&(_e===null&&(_e=/OS X.*Version\/10\..*Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),sy=!_e),sy?(sy=new Promise(function(fy,yy){(function xy(){new Date().getTime()-_d>=_h?yy():document.fonts.load(j(_a,'"'+_a.family+'"'),_u).then(function(Ey){1<=Ey.length?fy():setTimeout(xy,25)},function(){yy()})})()}),ny=new Promise(function(fy,yy){_f=setTimeout(yy,_h)}),Promise.race([ny,sy]).then(function(){clearTimeout(_f),ty(_a)},function(){ey(_a)})):(uy=function(){function fy(){var $y;($y=Oy!=-1&&Gy!=-1||Oy!=-1&&Ly!=-1||Gy!=-1&&Ly!=-1)&&(($y=Oy!=Gy&&Oy!=Ly&&Gy!=Ly)||(_t===null&&($y=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),_t=!!$y&&(parseInt($y[1],10)<536||parseInt($y[1],10)===536&&parseInt($y[2],10)<=11)),$y=_t&&(Oy==g0&&Gy==g0&&Ly==g0||Oy==a0&&Gy==a0&&Ly==a0||Oy==e0&&Gy==e0&&Ly==e0)),$y=!$y),$y&&(Ay.parentNode&&Ay.parentNode.removeChild(Ay),clearTimeout(_f),ty(_a))}var yy=new h(_u),xy=new h(_u),Ey=new h(_u),Oy=-1,Gy=-1,Ly=-1,g0=-1,a0=-1,e0=-1,Ay=document.createElement("div");Ay.dir="ltr",d(yy,j(_a,"sans-serif")),d(xy,j(_a,"serif")),d(Ey,j(_a,"monospace")),Ay.appendChild(yy.a),Ay.appendChild(xy.a),Ay.appendChild(Ey.a),document.body.appendChild(Ay),g0=yy.a.offsetWidth,a0=xy.a.offsetWidth,e0=Ey.a.offsetWidth,function $y(){var Hy;new Date().getTime()-_d>=_h?(Ay.parentNode&&Ay.parentNode.removeChild(Ay),ey(_a)):((Hy=document.hidden)!==!0&&Hy!==void 0||(Oy=yy.a.offsetWidth,Gy=xy.a.offsetWidth,Ly=Ey.a.offsetWidth,fy()),_f=setTimeout($y,50))}(),_(yy,function($y){Oy=$y,fy()}),d(yy,j(_a,'"'+_a.family+'",sans-serif')),_(xy,function($y){Gy=$y,fy()}),d(xy,j(_a,'"'+_a.family+'",serif')),_(Ey,function($y){Ly=$y,fy()}),d(Ey,j(_a,'"'+_a.family+'",monospace'))},document.body?uy():document.addEventListener?document.addEventListener("DOMContentLoaded",function fy(){document.removeEventListener("DOMContentLoaded",fy),uy()}):document.attachEvent("onreadystatechange",function fy(){document.readyState!="interactive"&&document.readyState!="complete"||(document.detachEvent("onreadystatechange",fy),uy())}))})},e.exports=$}),FontManager={fonts_loaded:Promise.resolve(),last_loaded:null,loadFonts:function(e){var o=this,h=JSON.stringify(e)===this.last_loaded;return e&&!h&&function(){var d=[];for(var g in e)(function(_){Array.isArray(e[_])?e[_].forEach(function($){return d.push(o.loadFontFace(_,$))}):d.push(o.loadFontFace(_,e[_]))})(g);o.last_loaded=JSON.stringify(e),o.fonts_loaded=Promise.all(d.filter(function(_){return _}))}(),this.fonts_loaded},loadFontFace:function(e,o){if(o!=null&&(_typeof(o)==="object"||o==="external")){var h={family:e},d=Promise.resolve();_typeof(o)==="object"&&(Object.assign(h,o),typeof o.url=="string"&&(d=this.injectFontFace(h)));var g=new fontfaceobserver_standalone(e,h);return d.then(function(){return g.load()}).then(function(){log("debug","Font face '".concat(e,"' is available"),h)},function(){log("debug","Font face '".concat(e,"' is NOT available"),h)})}},injectFontFace:function(e){var o=this,h=e.family,d=e.url,g=e.weight,_=e.style;this.supports_native_font_loading===void 0&&(this.supports_native_font_loading=window.FontFace!==void 0);var $=Promise.resolve(d);return d.slice(0,5)==="blob:"&&($=Utils$1.io(d,6e4,"arraybuffer").then(function(j){var _t=new Uint8Array(j);if(o.supports_native_font_loading)return _t;for(var _e="",_r=0;_r<_t.length;_r++)_e+=String.fromCharCode(_t[_r]);return"data:font/opentype;base64,"+btoa(_e)})),$.then(function(j){var _t,_e,_r;o.supports_native_font_loading?(typeof j=="string"?_t=new FontFace(h,"url(".concat(encodeURI(j),")"),{weight:g,style:_}):j instanceof Uint8Array&&(_t=new FontFace(h,j,{weight:g,style:_})),document.fonts.add(_t),log("trace","Adding FontFace to document.fonts:",_t)):(_e=`
                    @font-face {
                        font-family: '`.concat(h,`';
                        font-weight: `).concat(g||"normal",`;
                        font-style: `).concat(_||"normal",`;
                        src: url(`).concat(encodeURI(j),`);
                    }
                `),(_r=document.createElement("style")).appendChild(document.createTextNode("")),document.head.appendChild(_r),_r.sheet.insertRule(_e,0),log("trace","Injecting CSS font face:",_e))})}},CanvasText=function(){function e(){_classCallCheck(this,e),this.vertical_text_buffer=1,this.horizontal_text_buffer=1,this.layout=layout("binary-tree")}return _createClass(e,[{key:"createCanvas",value:function(o,h){var d=document.createElement("canvas");return o&&h&&(d.width=o,d.height=h),d.style.backgroundColor="transparent",d}},{key:"setFont",value:function(o,h){var d=h.font_css,g=h.fill,_=h.stroke,$=h.stroke_width,j=h.px_size,_t=h.supersample;this.px_size=j;var _e=Utils$1.device_pixel_ratio*_t;_&&0<$&&(o.strokeStyle=_,o.lineWidth=$*_e),o.fillStyle=g,o.textBaseline="bottom",o.font=d,o.miterLimit=2}},{key:"textSizes",value:function(o,h,d){var g=this;return FontManager.loadFonts().then(function(){return Task.add({type:"textSizes",run:g.processTextSizesTask.bind(g),texts:h,tile_id:o,cursor:{ctx:d,styles:Object.keys(h),texts:null,style_idx:null,text_idx:null}})})}},{key:"processTextSizesTask",value:function(o){var h=o.cursor,d=o.texts,g=h.ctx;for(h.style_idx=h.style_idx||0;h.style_idx<h.styles.length;){var _=h.styles[h.style_idx];h.text_idx==null&&(h.text_idx=0,h.texts=Object.keys(d[_]));for(var $=d[_],j=!0;h.text_idx<h.texts.length;){var _t=h.texts[h.text_idx],_e=$[_t],_r=_e.text_settings;if(j&&(this.setFont(g,_r),j=!1),_e.size=this.textSize(g,_,_t,_r).size,_r.can_articulate){var _n=!1,_i=!1;if(isTextRTL(_t)&&(isTextNeutral(_t)?_n=!0:_i=!0),_e.isRTL=_n,_e.no_curving=_i||isTextCurveBlacklisted(_t),_e.vertical_buffer=this.vertical_text_buffer+_r.outline_width+(_r.padding[0]+_r.padding[2])/2,_e.segment_sizes=[],!_e.no_curving){var _o=splitLabelText(_t,_n);_e.segments=_o;for(var _a=0;_a<_o.length;_a++)_e.segment_sizes.push(this.textSize(g,_,_o[_a],_r).size)}}if(h.text_idx++,!Task.shouldContinue(o))return!1}h.text_idx=null,h.style_idx++}return Task.finish(o,{texts:d}),!0}},{key:"textSize",value:function(o,h,d,g){var _=g.transform,$=g.text_wrap,j=g.max_lines,_t=g.stroke_width,_e=_t===void 0?0:_t,_r=g.supersample,_n=g.padding,_i=g.outline_width,_o=g.can_articulate;if(e.cache.text[h]=e.cache.text[h]||{},e.cache.text[h][d])return e.cache.stats.text_hits++,e.cache.text[h][d];e.cache.stats.text_misses++,e.cache.text_count++;var _a=Utils$1.device_pixel_ratio*_r,_u=this.applyTextTransform(d,_),_f=_a*(this.vertical_text_buffer+_i+(_n[0]+_n[2])/2),_h=_a*(this.horizontal_text_buffer+_i+_e+(_n[1]+_n[3])/2),_d=2*_a,ty=this.px_size+_d,ey=MultiLine.parse(_u,$,j,ty,o),sy=ey.height,ny=ey.width,uy=ey.lines,fy=[ny/_a,sy/_a];_o||(fy[0]+=2*_h/_a,fy[1]+=2*_f/_a);var yy=[ny+2*_h,sy+2*_f],xy=[yy[0]/_a,yy[1]/_a];return e.cache.text[h][d]={lines:uy,size:{collision_size:fy,texture_size:yy,logical_size:xy,line_height:ty}},e.cache.text[h][d]}},{key:"drawTextMultiLine",value:function(o,h,d,g,_,$){var j=_slicedToArray(d,2),_t=j[0],_e=j[1],_r=Utils$1.device_pixel_ratio*_.supersample,_n=_.stroke_width||0,_i=_.stroke;_.background_color&&(o.fillStyle=_.background_color,o.fillRect(_t,_e,g.texture_size[0],g.texture_size[1]));var _o=_.outline_width*_r,_a=_.outline_color;_o&&_a&&(o.strokeStyle=_a,o.lineWidth=_o,o.strokeRect(_t+_o/2,_e+_o/2,g.texture_size[0]-_o,g.texture_size[1]-_o)),(_.background_color||_o&&_a)&&this.setFont(o,_);for(var _u,_f,_h,_d,ty=g.line_height,ey=_e,sy=0;sy<h.length;sy++){var ny=h[sy];this.drawTextLine(o,ny,[_t,ey],g,_,$),ey+=ty}debugSettings$1.draw_label_collision_boxes&&(o.save(),_u=_r*(this.horizontal_text_buffer+_.outline_width+_n+(_.padding[1]+_.padding[3])/2),_f=_r*(this.vertical_text_buffer+_.outline_width+(_.padding[0]+_.padding[2])/2),_h=g.collision_size,o.strokeStyle="blue",o.lineWidth=2,o.strokeRect(_t+_u,_e+_f,_r*_h[0],_r*_h[1]),$==="curved"&&_i&&0<_n&&o.strokeRect(_t+g.texture_size[0]+_u,_e+_f,_r*_h[0],_r*_h[1]),o.restore()),debugSettings$1.draw_label_texture_boxes&&(o.save(),_d=g.texture_size,o.strokeStyle="green",o.lineWidth=2,o.strokeRect(_t+2,_e+2,_d[0]-4,_d[1]-4),$==="curved"&&_i&&0<_n&&o.strokeRect(_t+2+g.texture_size[0],_e+2,_d[0]-4,_d[1]-4),o.restore())}},{key:"drawTextLine",value:function(o,h,d,g,_,$){var j,_t=_slicedToArray(d,2),_e=_t[0],_r=_t[1],_n=_.stroke,_i=_.stroke_width,_o=_i===void 0?0:_i,_a=_.transform,ty=_.align,_u=_.supersample,_f=_.padding,_h=_.outline_width,_d=Utils$1.device_pixel_ratio*_u,ty=ty||"center",ey=g.texture_size,sy=g.line_height,ny=_d*(this.vertical_text_buffer+_h),uy=_d*(this.horizontal_text_buffer+_h+_o),fy=this.applyTextTransform(h.text,_a);ty==="left"?j=_e+uy+_f[3]*_d:ty==="center"?j=_e+ey[0]/2-h.width/2-(_f[1]-_f[3])*_d/2:ty==="right"&&(j=_e+ey[0]-h.width-uy-_f[1]*_d);var yy,xy=_r+ny+sy+_f[0]*_d;_n&&0<_o&&(yy=$==="curved"?ey[0]:0,o.strokeText(fy,j+yy,xy)),o.fillText(fy,j,xy)}},{key:"rasterize",value:function(o,h,d,g,_,$){return Task.removeForTile(d),Task.add({type:"rasterizeLabels",run:this.processRasterizeTask.bind(this),cancel:e.returnNoTextures,pause_factor:2,user_moving_view:!1,texts:o,textures:h,texture_prefix:g,gl:_,tile_id:d,texture_manager:$,cursor:{styles:Object.keys(o),texts:null,style_idx:0,text_idx:null,texture_idx:0,texture_names:[]}})}},{key:"processRasterizeTask",value:function(o){if(!Task.shouldContinue(o))return!1;for(var h=o.cursor,d=o.texts,g=o.textures;h.texture_idx<o.textures.length;){for(var _=!1,$=g[h.texture_idx],j=this.createCanvas.apply(this,_toConsumableArray($.texture_size)),_t=j.getContext("2d");h.style_idx<h.styles.length;){var _e=h.styles[h.style_idx];h.text_idx==null&&(h.text_idx=0,h.texts=Object.keys(d[_e]));for(var _r=d[_e],_n=!0;h.text_idx<h.texts.length;){var _i=h.texts[h.text_idx],_o=_r[_i],_a=_o.text_settings;if(_n&&(this.setFont(_t,_a),_n=!1),_a.can_articulate){_o.texcoords=_o.texcoords||{};for(var _u=0;_u<_o.type.length;_u++){var _f=_o.type[_u];switch(_f){case"straight":if(_o.textures[_u]!==h.texture_idx)continue;var _h,_d,ty,ey,sy=_o.isRTL?_i.split().reverse().join():_i,ny=$.texcoord_cache[_e][sy],uy=void 0;ny.texcoord?uy=ny.texcoord:(_h=ny.texture_position,ty=(_d=this.textSize(_t,_e,sy,_a)).size,ey=_d.lines,this.drawTextMultiLine(_t,ey,_h,ty,_a,_f),uy=o.texture_manager.getTexcoordsForSprite(_h,ty.texture_size,$.texture_size),ny.texcoord=uy),_o.texcoords[_f]={texcoord:uy,texture_id:ny.texture_id};break;case"curved":var fy=_o.segments;_o.texcoords.curved=[],_o.texcoords_stroke=[];for(var yy,xy,Ey,Oy,Gy,Ly,g0,a0,e0=0;e0<fy.length;e0++)_o.textures[_u][e0]===h.texture_idx&&(yy=fy[e0],Oy=Ey=void 0,(xy=$.texcoord_cache[_e][yy]).texcoord&&xy.texcoord_stroke?(Ey=xy.texcoord,Oy=xy.texcoord_stroke):(Gy=xy.texture_position,g0=(Ly=this.textSize(_t,_e,yy,_a)).size,a0=Ly.lines,this.drawTextMultiLine(_t,a0,Gy,g0,_a,_f),Ey=o.texture_manager.getTexcoordsForSprite(Gy,g0.texture_size,$.texture_size),Oy=_a.stroke&&0<_a.stroke_width?o.texture_manager.getTexcoordsForSprite([Gy[0]+g0.texture_size[0],Gy[1]],g0.texture_size,$.texture_size):(_=!0,o.texture_manager.getTexcoordsForSprite([$.texture_size[0],$.texture_size[1]],[0,0],$.texture_size)),xy.texcoord=Ey,xy.texcoord_stroke=Oy),_o.texcoords_stroke.push(Oy),_o.texcoords.curved.push({texcoord:Ey,texture_id:xy.texture_id}))}}}else{var Ay=this.textSize(_t,_e,_i,_a).lines;for(var $y in _o.align)_o.align[$y].texture_id===h.texture_idx&&(this.drawTextMultiLine(_t,Ay,_o.align[$y].texture_position,_o.size,{stroke:_a.stroke,stroke_width:_a.stroke_width,transform:_a.transform,supersample:_a.supersample,align:$y,background_color:_a.background_color,outline_width:_a.outline_width,outline_color:_a.outline_color,padding:_a.padding,fill:_a.fill,font_css:_a.font_css,px_size:_a.px_size}),_o.align[$y].texcoords=o.texture_manager.getTexcoordsForSprite(_o.align[$y].texture_position,_o.size.texture_size,$.texture_size))}h.text_idx++}h.text_idx=null,h.style_idx++}_===!0&&(_t.fillStyle="rgba(0, 0, 0, 0)",_t.fillRect(j.width-1,j.height-1,1,1));var Hy=o.texture_prefix+h.texture_idx;o.texture_manager.create(o.gl,Hy,{element:j,filtering:"linear",UNPACK_PREMULTIPLY_ALPHA_WEBGL:!0}),h.texture_names.push(Hy),h.texture_idx++,h.style_idx=0,j.width=0,j.height=0}return Task.finish(o,h.texture_names),!0}},{key:"setTextureTextPositions",value:function(o){var h={texture_id:0,texcoord_cache:{}},d=[];for(var g in o){var _=o[g];for(var $ in _){var j=_[$],_t=j.text_settings,_e=_t.can_articulate,_r=_t.stroke,_n=_t.stroke_width;if(_e){j.textures=[],h.texcoord_cache[g]=h.texcoord_cache[g]||{};for(var _i=0;_i<j.type.length;_i++)switch(j.type[_i]){case"straight":var _o,_a=j.isRTL?$.split().reverse().join():$;h.texcoord_cache[g][_a]||(_o=j.size.texture_size,h.texcoord_cache[g][_a]={},this.placeText(_o[0],_o[1],{can_articulate:_e,style:g,word:_a})),j.textures[_i]=h.texture_id;break;case"curved":j.textures[_i]=[];for(var _u=0;_u<j.segment_sizes.length;_u++){var _f,_h,_d=j.segments[_u];h.texcoord_cache[g][_d]||(_h=(_f=j.segment_sizes[_u].texture_size)[0],_r&&0<_n&&(_h*=2),h.texcoord_cache[g][_d]={},this.placeText(_h,_f[1],{can_articulate:_e,style:g,word:_d})),j.textures[_i].push(h.texture_id)}}}else{var ty=j.size.texture_size;this.placeText(ty[0],ty[1],{can_articulate:_e,text_info:j})}}}var ey=this.layout.export(),sy=ey.items,ny=ey.width,uy=ey.height;h.texcoord_cache={};for(var fy=0,yy=sy.length;fy<yy;fy++){var xy=sy[fy],Ey=xy.x,Oy=xy.y;if(xy.meta.can_articulate){var g0=xy.meta,a0=g0.style,e0=g0.word;h.texcoord_cache[a0]=h.texcoord_cache[a0]||{},h.texcoord_cache[a0][e0]||(h.texcoord_cache[a0][e0]={texture_id:h.texture_id,texture_position:[Ey,Oy]})}else{var Gy=xy.meta.text_info;for(var Ly in Gy.align)Gy.align[Ly].texture_id=h.texture_id,Gy.align[Ly].texture_position=[Ey,Oy]}}return 0<ny&&0<uy&&(d[h.texture_id]={texture_size:[ny,uy],texcoord_cache:h.texcoord_cache}),d}},{key:"placeText",value:function(o,h,d){this.layout.addItem({width:o+this.vertical_text_buffer,height:h+this.vertical_text_buffer,meta:d})}},{key:"applyTextTransform",value:function(o,h){return h==="capitalize"?o.replace(/\w\S*/g,function(d){return d.charAt(0).toUpperCase()+d.substr(1)}):h==="uppercase"?o.toUpperCase():h==="lowercase"?o.toLowerCase():o}}],[{key:"fontPixelSize",value:function(o){if(o!=null){var h=_slicedToArray((o=typeof o=="string"?o:String(o)).match(e.font_size_re)||[],3),d=h[1],g=h[2];return(g=g||"px")==="em"?d*=16:g==="pt"?d/=.75:g==="%"&&(d/=6.25),d=StyleParser.parsePositiveNumber(d),d*=Utils$1.device_pixel_ratio}}},{key:"pruneTextCache",value:function(){e.cache.text_count>e.cache.text_count_max&&(e.cache.text={},e.cache.text_count=0,log("debug","CanvasText: pruning text cache")),Object.keys(e.cache.segment).length>e.cache.segment_count_max&&(e.cache.segment={},log("debug","CanvasText: pruning segment cache"))}}]),e}();CanvasText.font_size_re=/((?:[0-9]*\.)?[0-9]+)\s*(px|pt|em|%)?/,CanvasText.cache={text:{},text_count:0,text_count_max:2e3,segment:{},segment_count_max:2e3,stats:{text_hits:0,text_misses:0,segment_hits:0,segment_misses:0}},CanvasText.EMPTY_TEXTURES_ARR=[],CanvasText.returnNoTextures=function(){return CanvasText.EMPTY_TEXTURES_ARR};var rtlDirCheck=new RegExp("[֑-߿‏‫‮יִ-﷽ﹰ-ﻼ]");function isTextRTL(e){return rtlDirCheck.test(e)}var neutral_chars="\0-/:-@[-`{-¿×÷ʹ-˿ -⯿‐-\u2029‬ -⯿",neutralDirCheck=new RegExp("["+neutral_chars+"]+");function isTextNeutral(e){return neutralDirCheck.test(e)}var markRTL="‏",arabic_range=new RegExp("^["+neutral_chars+"؀-ۿ]+"),arabic_splitters=new RegExp("["+neutral_chars+"آ-إاد-زوٱ-ٷڈ-ڙۄ-ۋۏےۓۮۯ]"),arabic_vowels=new RegExp("^[ؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ۭ]+"),accents_and_vowels="[̀-֑ͯ-ׇֽֿׁׂׅׄަ-ްऀ-ःऺ-ौॎॏ॑-ॗॢॣঁ-ঃ়া-ৌৗৢৣਁ-ਃ਼-ੌੑઁ-ઃ઼ા-ૌૢૣଁ-ଃ଼ା-ୌୖୗୢୣஂா-்ௗఀ-ఃా-ౌౕౖౢౣಁ-ಃ಼ಾ-ೌೕೖೢೣഁ-ഃാ-ൌൎൗൢൣංඃ්-ෟෲෳัิ-ฺ็-๎ັິ-ຼ່-ໍ༹༘༙༵༷༾༿ཱ-ྃ྆྇ྍ-ྼ࿆ါ-း်-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ឴-៑៓ᩕ-ᩞᩡ-᩼᷀-᷿⃐-⃿]",combo_characters="[्্੍્୍్್്྄္្᩠᩿]",graphemeRegex=new RegExp("^.(?:"+accents_and_vowels+"+)?("+combo_characters+"\\W(?:"+accents_and_vowels+"+)?)*"),curve_blacklist={Mongolian:"᠀-᢯"},curve_blacklist_range=Object.keys(curve_blacklist).map(function(e){return curve_blacklist[e]}).join(""),curve_blacklist_test=new RegExp("["+curve_blacklist_range+"]");function isTextCurveBlacklisted(e){return curve_blacklist_test.test(e)}var default_segment_length=2;function splitLabelText(e,o){var h=o?1:default_segment_length;if(e.length<h)return[e];var d=e;if(CanvasText.cache.segment[d])return CanvasText.cache.stats.segment_hits++,CanvasText.cache.segment[d];var g=[];if(arabic_range.exec(e)){g=e.split(arabic_splitters);for(var _,$=-1,j=0;j<g.length-1;j++)0<j&&(_=arabic_vowels.exec(g[j]))&&(g[j]=g[j].substring(_[0].length),g[j-1]+=_[0],$+=_[0].length),$+=1+g[j].length,g[j]+=e.slice($,$+1);e=""}for(;e.length;){for(var _t="",_e=e,_r=0;_r<h&&_e.length;_r++){var _n=(graphemeRegex.exec(_e)||_e)[0];_t+=_n,_e=_e.substring(_n.length)}g.push(_t),e=e.substring(_t.length)}return o&&g.reverse(),CanvasText.cache.stats.segment_misses++,CanvasText.cache.segment[d]=g}var MultiLine=function(){function e(o){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1/0,d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1/0;_classCallCheck(this,e),this.width=0,this.height=0,this.lines=[],this.max_lines=h,this.text_wrap=d,this.context=o}return _createClass(e,[{key:"createLine",value:function(o){return this.lines.length<this.max_lines&&new Line(o,this.text_wrap)}},{key:"push",value:function(o){if(this.lines.length<this.max_lines){var h=this.context.measureText(o.text).width;return(o.width=h)>this.width&&(this.width=Math.ceil(h)),this.lines.push(o),this.height+=o.height,!0}return this.addEllipsis(),!1}},{key:"advance",value:function(o,h){return!!this.push(o)&&this.createLine(h)}},{key:"addEllipsis",value:function(){var o=this.lines[this.lines.length-1],h=Math.ceil(this.context.measureText(e.ellipsis).width);o.append(e.ellipsis),o.width+=h,o.width>this.width&&(this.width=o.width)}},{key:"finish",value:function(o){o?this.push(o):this.addEllipsis()}}],[{key:"parse",value:function(o,h,d,g,_){for(var $=typeof h=="number"?o.split(" "):[o],j=new e(_,d,h),_t=j.createLine(g),_e=0;_e<$.length;_e++){for(var _r=$[_e].split(`
`),_n=_e===0,_i=0;_i<_r.length&&_t;_i++){var _o=_r[_i];isTextRTL(_o)&&isTextNeutral(_o[_o.length-1])&&(_o+=markRTL);var _a=_n?_o:" "+_o;if(h&&0<_e&&_t.exceedsTextwrap(_a)){if(!(_t=j.advance(_t,g)))break;_t.append(_o),_n=!0}else _t.append(_a);_i<_r.length-1&&(_t=j.advance(_t,g),_n=!0)}_e===$.length-1&&j.finish(_t)}return j}}]),e}();MultiLine.ellipsis="...";var Line=function(){function e(){var o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0;_classCallCheck(this,e),this.chars=0,this.text="",this.height=Math.ceil(o),this.text_wrap=h}return _createClass(e,[{key:"append",value:function(o){this.chars+=o.length,this.text+=o}},{key:"exceedsTextwrap",value:function(o){return o.length+this.chars>this.text_wrap}}]),e}(),TextLabels={resetText:function(){this.texts={}},freeText:function(e){delete this.texts[e.id]},parseTextFeature:function(e,o,h,d){var g=this.parseTextSource(e,o,h);if(g!=null&&g!==""){var _=TextSettings$1.compute(e,o,h);if(_){var $=TextSettings$1.key(_);this.texts[d.id]=this.texts[d.id]||{};var j=this.texts[d.id][$]=this.texts[d.id][$]||{};if(g instanceof Object){var _t=[],_e=g.left+"-"+g.right;for(var _r in g){var _n,_i=g[_r];_i&&(_n=this.computeTextLayout({},e,o,h,d,_i,_,_e,_r),j[_i]||(j[_i]={text_settings:_,ref:0}),_t.push({draw:o,text:_i,text_settings_key:$,layout:_n}))}return 0<_t.length&&_t}var _o=this.computeTextLayout({},e,o,h,d,g,_);return j[g]||(j[g]={text_settings:_,ref:0}),{draw:o,text:g,text_settings_key:$,layout:_o}}}},parseTextSource:function(e,o,h){var d,g=o.text_source||"name";if(g!=null&&_typeof(g)==="object")for(var _ in d={},g)d[_]=this.parseTextSourceValue(g[_],e,h);else d=this.parseTextSourceValue(g,e,h);return d},parseTextSourceValue:function(e,o,h){var d;if(Array.isArray(e)){for(var g=0;g<e.length;g++)if(typeof e[g]=="string"?d=o.properties[e[g]]:typeof e[g]=="function"&&(d=e[g](h)),d)return d}else typeof e=="string"?d=o.properties[e]:e instanceof Function&&(d=e(h));return d},prepareTextLabels:function(e,o,h){var d=this;return Object.keys(this.texts[e.id]||{}).length===0?Promise.resolve([]):WorkerBroker.postMessage(this.main_thread_target+".calcTextSizes",e.id,this.texts[e.id]).then(function(g){var _=g.texts;return e.canceled?(log("trace","Style ".concat(d.name,": stop tile build because tile was canceled: ").concat(e.key,", post-calcTextSizes()")),[]):(d.texts[e.id]=_||[],_?d.buildTextLabels(e,h):(Collision.abortTile(e.id),[]))})},collideAndRenderTextLabels:function(e,o,h){var d=this;return this.prepareTextLabels(e,o,h).then(function(g){return g.length===0?(Collision.collide([],o,e.id),Promise.resolve({})):Collision.collide(g,o,e.id).then(function(_){if(e.canceled)return log("trace","stop tile build because tile was canceled: ".concat(e.key,", post-collide()")),{};var $=d.texts[e.id];return $==null||_.length===0?{}:(d.cullTextStyles($,_),_.forEach(function(j){var _t=j.text_settings_key,_e=$[_t]&&$[_t][j.text];_e.text_settings.can_articulate?(_e.type||(_e.type=[]),_e.type.indexOf(j.label.type)===-1&&_e.type.push(j.label.type)):(_e.align=_e.align||{},_e.align[j.label.align]={})}),{labels:_,texts:$,textures:[]})})})},cullTextStyles:function(e,o){for(var h=0;h<o.length;h++){var d=o[h];e[d.text_settings_key][d.text].ref++}for(var g in e)for(var _ in e[g])e[g][_].ref<1&&delete e[g][_];for(var $ in e)Object.keys(e[$]).length===0&&delete e[$]},calcTextSizes:function(e,o){return this._canvas_text||(this._canvas_text=new CanvasText,this._canvas_ctx_for_sizes=this._canvas_text.createCanvas().getContext("2d")),this._canvas_text.textSizes(e,o,this._canvas_ctx_for_sizes)},preprocessText:function(e){if(e&&e.font&&_typeof(e.font)==="object")return e.font.fill=StyleParser.createPropertyCache(e.font.fill),e.font.stroke&&(e.font.stroke.color=StyleParser.createPropertyCache(e.font.stroke.color)),e.background&&e.background.color&&(e.background.color=StyleParser.createPropertyCache(e.background.color)),e.outline&&(e.outline.color&&(e.outline.color=StyleParser.createPropertyCache(e.outline.color)),e.outline.width&&(e.outline.width=StyleParser.createPropertyCache(e.outline.width,StyleParser.parsePositiveNumber))),e.padding&&(Array.isArray(e.padding)?e.padding.length===2&&(e.padding=[e.padding[0],e.padding[1],e.padding[0],e.padding[1]]):e.padding=Array(4).fill(e.padding),e.padding=StyleParser.createPropertyCache(e.padding,function(o){return o.map(StyleParser.parsePositiveNumber)})),e.font.px_size=StyleParser.createPropertyCache(e.font.size||TextSettings$1.defaults.size,CanvasText.fontPixelSize),e.font.stroke&&e.font.stroke.width!=null&&(e.font.stroke.width=StyleParser.createPropertyCache(e.font.stroke.width,StyleParser.parsePositiveNumber)),e.offset=StyleParser.createPropertyCache(e.offset,function(o){return Array.isArray(o)&&o.map(StyleParser.parseNumber)}),e.buffer=StyleParser.createPropertyCache(e.buffer,function(o){return(Array.isArray(o)?o:[o,o]).map(StyleParser.parsePositiveNumber)}),e.repeat_distance=StyleParser.createPropertyCache(e.repeat_distance||Geo$1.tile_size,StyleParser.parsePositiveNumber),e},computeTextLayout:function(e,o,h,d,g,_,$,j,_t){var _e=e||{};return(_e=this.computeLayout(_e,o,h,d,g)).repeat_distance&&(j&&(_e.repeat_group+="/"+j),_e.repeat_group+="/"+_),_e.subdiv=g.overzoom2,_e.align=h.align,_e.italic=$.style!=="normal",_t==="right"?_e.orientation=1:_t==="left"&&(_e.orientation=-1),_e}};function degToRad(e){return e*Math.PI/180}var PI_OVER_180=Math.PI/180,HORIZON_THRESHOLD_MULTIPLIER=.75,ZOOM_FOR_BOUNDS_EPSILON=.001,NEAR_PLANE=1,LookAtManipulator=function(){function e(o,h){_classCallCheck(this,e),this._min_zoom=H.util.constants.DEFAULT_MIN_ZOOM_LEVEL,this._max_zoom=H.util.constants.DEFAULT_MAX_ZOOM_LEVEL,this._viewport=o,this._center_offset=[],this._center_offset_normalized=[],this._viewport_aspect_ratio=1,this._focal_length=[[16,2],[17,2.5],[18,3],[19,4],[20,6]],this._view_matrix=new Float64Array(16),this._projection_matrix=new Float64Array(16),this._heading_matrix=new Float64Array(16),this._tilt_matrix=new Float64Array(16),this._transformation_matrix=new Float64Array(16),this._camera_matrix=new Float64Array(16),this._lookAtData={position:[0,0,0],zoom:0,tile_level:0,tetragon:void 0,bounds:void 0,unpadded_bounds:void 0,distance:void 0,tilt:0,incline:0,heading:180},this._zoom_direction=0,this._horizon=0,this.handleViewportUpdate(!0),h?this.setLookAtData(h):this._updateMatrices(),ShaderProgram.replaceBlock("camera",`
            uniform mat4 u_projection;
            uniform vec3 u_eye;
            uniform vec2 u_center_offset;

            void cameraProjection (inout vec4 position) {
                position = u_projection * position;
            }`)}return _createClass(e,[{key:"getZoomForBounds",value:function(o,h,d,g){var _,$=this.clone(),j=this._max_zoom,_t=this._min_zoom,_e=(j-_t)/2,_r=j-_e,_n=h,_i=MathUtils$1.getBBoxCenter(MathUtils$1.getBBox(o));for(_n===void 0?_n=_i:(_=_i[0]-_n[0],Math.abs(_)>Geo$1.half_circumference_meters+1e-8&&(_n[0]+=Math.round(_/Geo$1.circumference_meters)*Geo$1.circumference_meters));ZOOM_FOR_BOUNDS_EPSILON<_e;)(function(){$.setLookAtData({zoom:_r,position:_n,tilt:d,heading:g});var _o,_a,_u,_f,_h,_d=$.getLookAtData().bounds;o.every(function(ty){return MathUtils$1.isPointInsidePolygon(ty,_d)})?_t=_r:(_a=(_o=_slicedToArray(MathUtils$1.getBBox(_d),4))[0],_u=_o[1],_f=_o[2],_h=_o[3],_f-_a+1e-8>=Geo$1.circumference_meters&&_h-_u+1e-8>=Geo$1.circumference_meters?_t=_r:j=_r),_r=j-(_e=(j-_t)/2)})();return _t}},{key:"setZoomConstraints",value:function(o,h){this._min_zoom=o,this._max_zoom=h,this.setLookAtData(this.getLookAtData())}},{key:"setLookAtData",value:function(o,h){var d,g,_,$,j,_t=o.position,_e=o.zoom;_t===d&&o.bounds!==d&&(_t=MathUtils$1.getBBoxCenter(MathUtils$1.getBBox(o.bounds))),_e===d&&o.bounds!==d&&(_e=this.getZoomForBounds(o.bounds,_t,o.tilt,o.heading)),h!==d&&(g=_t||this.screenToWorld(h)),_e!==d&&(_e=MathUtils$1.clamp(_e,this._min_zoom,this._max_zoom),(_=Utils$1.zoomToTileLevel(_e))!==($=this._lookAtData.tile_level)&&(this._zoom_direction=$<_?1:-1),this._lookAtData.zoom=_e,this._lookAtData.tile_level=_),o.tilt!==d&&(this._lookAtData.tilt=o.tilt),o.heading!==d&&(this._lookAtData.heading=o.heading),h!==d?(this._updateMatrices(),j=this.screenToWorld(h),this._lookAtData.position[0]-=j[0]-g[0],this._lookAtData.position[1]-=j[1]-g[1]):_t&&(this._lookAtData.position=_t),this._lookAtData.position[2]=0,this._lookAtData.position[1]=MathUtils$1.clamp(this._lookAtData.position[1],-Geo$1.half_circumference_meters,Geo$1.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"getZoomDirection",value:function(){return this._zoom_direction}},{key:"resetZoomDirection",value:function(){this._zoom_direction=0}},{key:"getLookAtData",value:function(){return this._lookAtData}},{key:"handleViewportUpdate",value:function(o){var h=0<arguments.length&&o!==void 0&&o,d=this._viewport,g=d.width,_=d.height;this._viewport_aspect_ratio=g/_;var $=this._viewport.center.x-(g/2<<0),j=this._viewport.center.y-(_/2<<0);this._center_offset[0]=$,this._center_offset[1]=j,this._center_offset_normalized[0]=$/g,this._center_offset_normalized[1]=j/-_,h||(this._updateMatrices(),this._updateVisibleBounds())}},{key:"setupMatrices",value:function(o,h){mat4.multiply(o.model_view32,this._view_matrix,o.model),h.uniform("Matrix4fv","u_modelView",o.model_view32),mat3.normalFromMat4(o.normal32,o.model_view32),mat3.invert(o.inverse_normal32,o.normal32),h.uniform("Matrix3fv","u_normalMatrix",o.normal32),h.uniform("Matrix3fv","u_inverseNormalMatrix",o.inverse_normal32)}},{key:"_updateMatrices",value:function(){var o=this._viewport.height*Geo$1.metersPerPixel(this._lookAtData.zoom),h=Utils$1.interpolate(this._lookAtData.zoom,this._focal_length);this._lookAtData.distance=o/2*h;var d=this._lookAtData.position[0],g=this._lookAtData.position[1];mat4.lookAt(this._view_matrix,vec3.fromValues(d,g,0),vec3.fromValues(d,g,-1),vec3.fromValues(0,1,0)),this._heading_matrix=mat4.identity(this._heading_matrix);var _=180-this._lookAtData.heading;_*=PI_OVER_180,this._heading_matrix[0]=Math.cos(_),this._heading_matrix[1]=-Math.sin(_),this._heading_matrix[4]=Math.sin(_),this._heading_matrix[5]=Math.cos(_),this._tilt_matrix=mat4.identity(this._tilt_matrix),_=0<(_=this._lookAtData.tilt?this._lookAtData.tilt*PI_OVER_180:0)?-_:_,this._tilt_matrix[5]=Math.cos(_),this._tilt_matrix[6]=Math.sin(_),this._tilt_matrix[9]=-Math.sin(_),this._tilt_matrix[10]=Math.cos(_),mat4.multiply(this._transformation_matrix,this._tilt_matrix,this._heading_matrix),mat4.multiply(this._view_matrix,this._transformation_matrix,this._view_matrix);var $=2*Math.atan(1/h),j=2*this._lookAtData.distance;this._depth_buffer_adjustment=2/Math.log(j/NEAR_PLANE),mat4.perspective(this._projection_matrix,$,this._viewport_aspect_ratio,NEAR_PLANE,j),this._projection_matrix[8]=2*-this._center_offset_normalized[0],this._projection_matrix[9]=2*-this._center_offset_normalized[1],mat4.translate(this._projection_matrix,this._projection_matrix,vec3.fromValues(0,0,-this._lookAtData.distance)),this._camera_matrix=mat4.multiply(this._camera_matrix,this._projection_matrix,this._view_matrix)}},{key:"_updateVisibleBounds",value:function(){var o,h,d,g,_,$=this._viewport,j=$.width,_t=$.height,_e=$.padding,_r=degToRad(this._lookAtData.tilt);this._horizon=Math.max((_e.top+_t)/2-Math.cos(_r)*(_e.top*(1-Math.sin(_r))+_t*HORIZON_THRESHOLD_MULTIPLIER),0),this._lookAtData.tetragon=[this.screenToWorld([0,this._horizon]),this.screenToWorld([j,this._horizon]),this.screenToWorld([j,_t]),this.screenToWorld([0,_t])],this._lookAtData.unpadded_bounds=this._clipAgainstGeoBounds(this._lookAtData.tetragon),_e.left===0&&_e.top===0&&_e.right===0&&_e.bottom===0?this._lookAtData.bounds=this._lookAtData.unpadded_bounds:(o=_e.left,h=Math.max(this._horizon,_e.top),d=j-_e.right,g=_t-_e.bottom,_=[this.screenToWorld([o,h]),this.screenToWorld([d,h]),this.screenToWorld([d,g]),this.screenToWorld([o,g])],this._lookAtData.bounds=this._clipAgainstGeoBounds(_))}},{key:"_clipAgainstGeoBounds",value:function(o){var h,d=_slicedToArray(MathUtils$1.getBBox(o),4),_t=d[0],_e=d[1],_r=d[2],_n=d[3],g=Geo$1.half_circumference_meters,_=[[_t-1,+g],[_r+1,+g],[_r+1,-g],[_t-1,-g]],$=MathUtils$1.clipPolygon(_,o)[0],j=_slicedToArray(MathUtils$1.getBBox($),4),_t=j[0],_e=j[1],_r=j[2],_n=j[3];_r-_t>=Geo$1.circumference_meters&&($=[[(h=(_r-_t)/2)-g,_n],[h+g,_n],[h+g,_e],[h-g,_e]]);var _i=[];return $&&(_i=MathUtils$1.splitLegs($,g)),_i}},{key:"applyPxOffset",value:function(o){var h=_slicedToArray(o,2),d=h[0],g=h[1],_=Math.PI-this._lookAtData.heading*PI_OVER_180,$=Geo$1.metersPerPixel(this._lookAtData.zoom);this._lookAtData.position[0]+=(d*Math.cos(_)+g*Math.sin(_))*$,this._lookAtData.position[1]-=(g*Math.cos(_)-d*Math.sin(_))*$,this._lookAtData.position[1]=MathUtils$1.clamp(this._lookAtData.position[1],-Geo$1.half_circumference_meters,Geo$1.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"screenToWorld",value:function(o){var h=_slicedToArray(o,2),d=h[0],g=h[1],_=this._viewport,$=_.width,j=_.height;return $===0||j===0?[0,0]:(d-=$/2,g-=j/2,this._clipCoordsToWorldPlaneCoords([2*(d+$/2)/$-1,1-2*(g+j/2)/j,-1,1]))}},{key:"_clipToScreenCoords",value:function(o){var h=this._viewport,d=h.width,g=h.height;return[(.5*o[0]+.5)*d,g-(.5*o[1]+.5)*g]}},{key:"_isScreenPointInViewPort",value:function(o){var h=this._viewport,d=h.width,g=h.height;return 0<=o[0]&&o[0]<=d&&0<=o[1]&&o[1]<=g}},{key:"worldToScreen",value:function(o,h){var d,g,_,$,j,_t,_e=1<arguments.length&&h!==void 0&&h;return o[2]||(o[2]=0),_e?(d=this._worldToClipCoords(o),j=this._clipToScreenCoords(d)):(g=Math.sign(this._lookAtData.position[0]),_=Math.trunc(this._lookAtData.position[0]/Geo$1.circumference_meters+g/2),o[0]+=Geo$1.circumference_meters*_,$=this._worldToClipCoords(o),_t=j=this._clipToScreenCoords($),this._isScreenPointInViewPort(j)||($=this._worldToClipCoords([o[0]+Geo$1.circumference_meters,o[1],o[2]]),j=this._clipToScreenCoords($),this._isScreenPointInViewPort(j)||($=this._worldToClipCoords([o[0]-Geo$1.circumference_meters,o[1],o[2]]),j=this._clipToScreenCoords($)),this._isScreenPointInViewPort(j)||(j=_t))),j}},{key:"getHorizon",value:function(){return this._horizon}},{key:"_clipCoordsToWorldPlaneCoords",value:function(o){var h=[],d=this._lookAtData.distance,g=this._lookAtData.position,_=[0,0,d,0],$=0,j=d*Math.sin(PI_OVER_180*this._lookAtData.tilt)*Math.cos(PI_OVER_180*this._lookAtData.heading),_t=d*Math.sin(PI_OVER_180*this._lookAtData.tilt)*Math.sin(PI_OVER_180*this._lookAtData.heading),_e=new Float64Array(16),_r=new Float64Array(16);return mat4.invert(_e,this._projection_matrix),vec4.transformMat4(h,o,_e),h[2]=-1,h[3]=0,mat4.invert(_r,this._view_matrix),vec4.transformMat4(h,h,_r),vec4.normalize(h,h),vec4.transformMat4(_,_,this._transformation_matrix),h[2]!==0&&($=-_[2]/h[2]),vec4.scale(h,h,$),[g[0]+(h[0]+_t),g[1]+(h[1]+j)]}},{key:"_worldToClipCoords",value:function(o){var h=[o[0],o[1],o[2],1];return vec4.transformMat4(h,h,this._view_matrix),vec4.transformMat4(h,h,this._projection_matrix),vec4.scale(h,h,1/h[3]),h}},{key:"setupProgram",value:function(o){o.uniform("Matrix4fv","u_projection",this._projection_matrix),o.uniform("3f","u_eye",[0,0,this._lookAtData.distance]),o.uniform("2fv","u_center_offset",this._center_offset_normalized),o.uniform("1f","u_tilt",this._lookAtData.tilt*PI_OVER_180),o.uniform("1f","u_heading",this._lookAtData.heading*PI_OVER_180),o.uniform("1f","u_near_plane",NEAR_PLANE),o.uniform("1f","u_depth_buffer_adjustment",this._depth_buffer_adjustment)}},{key:"getTransformationMatrix",value:function(){return this._transformation_matrix}},{key:"getCameraMatrix",value:function(){return this._camera_matrix}},{key:"clone",value:function(){var o=new e(this._viewport,this._lookAtData);return o.setZoomConstraints(this._min_zoom,this._max_zoom),o}},{key:"getViewport",value:function(){return this._viewport}}]),e}();function getX(e){return e.x===void 0?e[0]:e.x}function getY(e){return e.y===void 0?e[1]:e.y}function xAscendingComparator(e,o){return getX(e)-getX(o)}function yAscendingComparator(e,o){return getY(e)-getY(o)}function sortByX(e){return e.sort(xAscendingComparator)}function sortByY(e){return e.sort(yAscendingComparator)}function getMinMax(e,o){for(var h,d=e[0],g=d,_=0;_<e.length;_+=1)o(h=e[_],d)<0?d=h:0<o(h,g)&&(g=h);return[d,g]}function groupByCoord(e,o){return Object.values(o.reduce(function(h,d){var g=d[+e];return h[g]||(h[g]=[]),h[g].push(d),h},{}))}function groupByX(e){return groupByCoord(!1,e)}function groupByY(e){return groupByCoord(!0,e)}function createTileRangeByCoord(e,o,h){var d=+e,g=o[d],_=h[d];if(_<g)return[];var $=[o];if(_<g)return $;for(var j=o[(1+d)%2],_t=e?function(_r){return $.push([j,_r])}:function(_r){return $.push([_r,j])},_e=g+1;_e<_;_e+=1)_t(_e);return $.push(h),$}function createTileRangeByX(e,o){return createTileRangeByCoord(!1,e,o)}function createTileRangeByY(e,o){return createTileRangeByCoord(!0,e,o)}function deduplicate(e){var o={},h=[];return e.forEach(function(d){var g=d.key||(Array.isArray(d)?"".concat(d[0],"/").concat(d[1]):"".concat(d.x,"/").concat(d.y));o[g]||(o[g]=!0,h.push(d))}),h}function flat(e){return e.reduce(function(o,h){return o.concat(h)})}function applyMargin(e,o){if(o<=0)return e;var h,d=function(_){var $=_slicedToArray(getMinMax(_,xAscendingComparator),2),j=$[0],_t=$[1],_e=[j[0]-o,j[1]],_r=[_t[0]+o,_t[1]];return _.concat(createTileRangeByX(_e,j),createTileRangeByX(_t,_r))},g=function(_){var $=_slicedToArray(getMinMax(_,yAscendingComparator),2),j=$[0],_t=$[1],_e=[j[0],j[1]-o],_r=[_t[0],_t[1]+o];return _.concat(createTileRangeByY(_e,j),createTileRangeByY(_t,_r))};return deduplicate((h=groupByY(flat(groupByX(e).map(g))),flat(h.map(d))))}function constructTiles(e,o,h){return e.map(function(d){var g=_slicedToArray(d,2),_=g[0],$=g[1];return Tile.coord(Geo$1.wrapTile({x:_,y:$,z:o},{x:!h,y:!0}))})}function getTileGrid(e,o,h){function d(g){return Object.values(Geo$1.metersToExactTileCoords(g,e.tile_level))}return deduplicate(constructTiles(applyMargin(rasterizeTetragon(d(e.tetragon[0]),d(e.tetragon[1]),d(e.tetragon[3]),d(e.tetragon[2])),o),e.tile_level,h))}function rasterizeTetragon(e,o,h,d){var g=rasterizeTriangle(o,e,h),_=rasterizeTriangle(h,d,o);return deduplicate(g.concat(_))}function rasterizeTriangle(e,o,h){var d=_slicedToArray(sliceTriangle.apply(void 0,_toConsumableArray(sortByY([e,o,h]))),2),g=d[0],_=d[1];return deduplicate(rasterizeBottomFlatTriangle.apply(void 0,_toConsumableArray(g)).concat(rasterizeTopFlatTriangle.apply(void 0,_toConsumableArray(_))))}function sliceTriangle(e,o,h){var d=_slicedToArray(e,2),g=d[0],_=d[1],$=_slicedToArray(o,2),j=$[0],_t=$[1],_e=_slicedToArray(h,2),_r=_e[0],_n=_e[1],_i=g+(_t-_)/(_n-_)*(_r-g);return[[[g,_]].concat(_toConsumableArray(sortByX([[j,_t],[_i,_t]]))),[].concat(_toConsumableArray(sortByX([[j,_t],[_i,_t]])),[[_r,_n]])]}function rasterizeBottomFlatTriangle(e,o,h){var d=_slicedToArray(e,2),g=d[0],_=d[1],$=_slicedToArray(o,2),j=$[0],_t=$[1];return scanFlatTriangle(g,j,_slicedToArray(h,1)[0],_,_t)}function rasterizeTopFlatTriangle(e,o,h){var d=_slicedToArray(e,2),g=d[0],_=d[1],$=_slicedToArray(o,1)[0],j=_slicedToArray(h,2);return scanFlatTriangle(j[0],g,$,j[1],_)}var scanStepStatic=.125;function getScanStep(e,o){return scanStepStatic*(o-e)/(Math.ceil(o)-Math.floor(e))}function scanFlatTriangle(e,o,h,d,g){var _=Math.min(e,o),$=Math.max(e,h),j=Math.min(d,g),_t=Math.max(d,g);if(Math.floor(d)===Math.floor(g))return scanRow(_,$,d);if(_t-j<scanStepStatic)return scanRectangle([_,j],[$,_t]);function _e(ty){_a=_a.concat(scanRow(_u,_f,Math.floor(ty))),_u+=_i,_f+=_o}var _r=getScanStep(j,_t),_n=(_t-j)/_r,_i=(o-e)/_n,_o=(h-e)/_n,_a=[],_u=e,_f=e;if(d<g)for(var _h=j;_h<=_t;_h+=_r)_e(_h);else for(var _d=_t;j<=_d;_d-=_r)_e(_d);return deduplicate(_a)}function xCoordsToPoints(e,o){return e.map(function(h){return[h,o]})}function createCoordRange(e,o){var h=Math.floor(e),d=Math.floor(o);if(d<h)return[];if(h===d)return[h];for(var g=[],_=h;_<=d;_+=1)g.push(_);return g}function scanRow(e,o,h){return xCoordsToPoints(createCoordRange(e,o),h)}function scanRectangle(e,o){var h=_slicedToArray(e,2),d=h[0],g=h[1],_=_slicedToArray(o,2),$=_[0],j=_[1],_t=createCoordRange(d,$),_e=xCoordsToPoints(_t,g),_r=xCoordsToPoints(_t,j);return _e.concat(_r)}var VIEW_PAN_SNAP_TIME=.5,Z_PRECISION=1e5,View=function(){function e(o,h){_classCallCheck(this,e),subscribeMixin(this),this.scene=o,this.createMatrices(),this.bounds=null,this.center_tile=null,this.panning=!1,this.panning_stop_at=0,this.pan_snap_timer=0,this.user_input_at=0,this.user_input_timeout=50,this.user_input_active=!1,this.size={},this.buffer=0,this.wrap=h.wrapView!==!1,this.preserve_tiles_within_zoom=1,this.lookAtManipulator=new LookAtManipulator(h.viewport),this._viewport=h.viewport,this._offset_buffer=[0,0],this.handleViewportUpdate(!0)}return _createClass(e,[{key:"update",value:function(){this.pan_snap_timer=(new Date-this.panning_stop_at)/1e3,this.user_input_active=new Date-this.user_input_at<this.user_input_timeout,this.scene.tile_manager.updateTilesVisibilityCounters()}},{key:"handleViewportUpdate",value:function(o){var h=0<arguments.length&&o!==void 0&&o,d=this._viewport,g=d.width,_=d.height;this.size.css={width:g,height:_},this.size.device={width:Math.round(g*Utils$1.device_pixel_ratio),height:Math.round(_*Utils$1.device_pixel_ratio)},this.lookAtManipulator.handleViewportUpdate(),h||this.updateBounds()}},{key:"setLookAtData",value:function(o,h){e._setLookAtDataForManipulator(this.lookAtManipulator,o,h),this.updateBounds()}},{key:"getLookAtData",value:function(o){var h=0<arguments.length&&o!==void 0&&o;return e._getLookAtDataFromManipulator(this.lookAtManipulator,h)}},{key:"getBestLookAtData",value:function(o,h,d){var g=2<arguments.length&&d!==void 0&&d,_=this.lookAtManipulator.clone();return e._setLookAtDataForManipulator(_,o,h),e._getLookAtDataFromManipulator(_,g)}},{key:"getTileLevel",value:function(){return this.lookAtManipulator.getLookAtData().tile_level}},{key:"applyPxOffset",value:function(o){var h=this._offset_buffer;h[0]+=o[0],h[1]+=o[1];var d,g,_=Math.abs(h[0]),$=Math.abs(h[1]);(1<=_||1<=$)&&(d=~~h[0],g=~~h[1],this.lookAtManipulator.applyPxOffset([_<1?0:d,$<1?0:g]),1<=_&&(h[0]-=d),1<=$&&(h[1]-=g),this.updateBounds())}},{key:"setPanning",value:function(o){this.panning=o,this.panning||(this.panning_stop_at=+new Date)}},{key:"markUserInput",value:function(){this.user_input_at=+new Date}},{key:"ready",value:function(){return typeof this.size.css.width=="number"&&typeof this.size.css.height=="number"}},{key:"updateBounds",value:function(){var o,h;this.markUserInput(),this.ready()&&(this.center_tile=Geo$1.tileForMeters(this.lookAtManipulator.getLookAtData().position,this.lookAtManipulator.getLookAtData().tile_level),o=this.lookAtManipulator.screenToWorld([0,this.size.css.height]),h=this.lookAtManipulator.screenToWorld([this.size.css.width,0]),this.bounds={sw:{x:o[0],y:o[1]},ne:{x:h[0],y:h[1]}},this.scene.tile_manager.updateTilesForView(!0),this.trigger("move"),this.scene.requestRedraw())}},{key:"getTileGridFlatForBBox",value:function(o,h,d,g,_,$){var j,_t=4<arguments.length&&_!==void 0?_:0,_e=!(5<arguments.length&&$!==void 0)||$,_r=this.lookAtManipulator.getLookAtData().tile_level,_n=Geo$1.tileForMeters([h,o],_r),_i=Geo$1.tileForMeters([g,d],_r);_n.x-=_t,_n.y-=_t,_i.x+=_t,_i.y+=_t,_e===!1&&(j=(1<<_r)-1,_n.x=Math.min(Math.max(0,_n.x),j),_n.y=Math.min(Math.max(0,_n.y),j),_i.x=Math.min(Math.max(0,_i.x),j),_i.y=Math.min(Math.max(0,_i.y),j));for(var _o=[],_a={},_u=_n.x;_u<=_i.x;_u++)for(var _f=_n.y;_f<=_i.y;_f++){var _h=Tile.coord(Geo$1.wrapTile({x:_u,y:_f,z:_r},{x:!_e,y:!0}));_a[_h.key]||(_a[_h.key]=!0,_o.push(_h))}return _o}},{key:"getTileGridFlat",value:function(){return this.getTileGridFlatForBBox(this.bounds.ne.y,this.bounds.sw.x,this.bounds.sw.y,this.bounds.ne.x,this.buffer,this.wrap)}},{key:"getTileGridDistorted",value:function(){return getTileGrid(this.lookAtManipulator.getLookAtData(),this.buffer,this.wrap)}},{key:"findVisibleTileCoordinates",value:function(){if(!this.bounds)return[];var o=this.lookAtManipulator.getLookAtData(),h=o.tilt,d=o.heading;return h===0&&d===180?this.getTileGridFlat():this.getTileGridDistorted()}},{key:"createMatrices",value:function(){this.matrices={},this.matrices.model=new Float64Array(16),this.matrices.model32=new Float32Array(16),this.matrices.model_view=new Float64Array(16),this.matrices.model_view32=new Float32Array(16),this.matrices.normal=new Float64Array(9),this.matrices.normal32=new Float32Array(9),this.matrices.inverse_normal32=new Float32Array(9)}},{key:"setupTile",value:function(o,h){o.setupProgram(this.matrices,h),this.lookAtManipulator.setupMatrices(this.matrices,h)}},{key:"setupProgram",value:function(o){var h=this.lookAtManipulator.getLookAtData();o.uniform("2fv","u_resolution",[this.size.device.width,this.size.device.height]),o.uniform("3fv","u_map_position",[h.position[0],h.position[1],Math.trunc(h.zoom*Z_PRECISION)/Z_PRECISION]),o.uniform("1f","u_meters_per_pixel",Geo$1.metersPerPixel(h.zoom)),o.uniform("1f","u_device_pixel_ratio",Utils$1.device_pixel_ratio),o.uniform("1f","u_view_pan_snap_timer",this.pan_snap_timer),o.uniform("1i","u_view_panning",this.panning),o.uniform("1f","u_horizon",this.lookAtManipulator.getHorizon()/(this.size.css.height/2)),this.lookAtManipulator.setupProgram(o)}},{key:"isAnimating",value:function(){return this.pan_snap_timer<=VIEW_PAN_SNAP_TIME}},{key:"xyToGeo",value:function(o,h){var d=this.lookAtManipulator.screenToWorld([o,h]),g=_slicedToArray(Geo$1.metersToLatLng(d),2),_=g[0];return{lat:g[1],lng:_}}},{key:"geoToPixel",value:function(o){var h=Geo$1.latLngToMeters([o.lng,o.lat]);h.push(o.alt||0);var d=this.lookAtManipulator.worldToScreen(h);return{x:Math.floor(d[0]),y:Math.floor(d[1])}}},{key:"geoToMeters",value:function(o){var h=_slicedToArray(Geo$1.latLngToMeters([o.lng,o.lat]),2);return{x:h[0],y:h[1],z:o.alt||0}}},{key:"metersToGeo",value:function(o){var h=_slicedToArray(Geo$1.metersToLatLng([o.x,o.y]),2),d=h[0];return{lat:h[1],lng:d,alt:o.z||0}}},{key:"setZoomConstraints",value:function(o,h){this.lookAtManipulator.setZoomConstraints(o,h)}}],[{key:"_setLookAtDataForManipulator",value:function(o,h,d){var g=h.position,_=h.zoom,$=h.tilt,j=h.heading,_t=h.bounds,_e={zoom:_,tilt:$,heading:j};if(g&&typeof g.lng=="number"&&typeof g.lat=="number"&&(_e.position=Geo$1.latLngToMeters([g.lng,g.lat])),_t){var _r=_t.getExterior().getLatLngAltArray(),_n=_r.length/3,_i=Array(_n);if(_t.getBoundingBox().isCDB())for(var _o=_r[1],_a=0,_u=0;_u<_n;_u++){var _f,_h=_r[3*_u+1];0<_u&&(_f=_h-_o,180<Math.abs(_f)&&(_a+=_o<_h?-360:360)),_o=_h,_i[_u]=Geo$1.latLngToMeters([_h+_a,_r[3*_u]])}else for(var _d=0;_d<_n;_d++)_i[_d]=Geo$1.latLngToMeters([_r[3*_d+1],_r[3*_d]]);_e.bounds=_i}o.setLookAtData(_e,d)}},{key:"_getLookAtDataFromManipulator",value:function(o,h){var d=1<arguments.length&&h!==void 0&&h,g=o.getLookAtData(),_=g.heading,$=g.incline,j=g.tilt,_t=g.zoom,_e=g.position,_r=g.bounds,_n=g.unpadded_bounds,_i=_slicedToArray(Geo$1.metersToLatLng(_e),2),_o=_i[0],_a=_i[1],_u=new H.geo.LineString;return(d?_n:_r).forEach(function(_f){var _h=Geo$1.metersToLatLng(_f);_u.pushLatLngAlt(_h[1],_h[0],0)}),{heading:_,incline:$,tilt:j,zoom:_t,bounds:new H.geo.Polygon(_u),position:{lat:_a,lng:_o,alt:_e[2]}}}}]),e}(),shaderSrc_pointsVertex=`uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform bool u_tile_fade_in;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform bool u_view_panning;uniform float u_tilt;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform float u_heading;uniform float u_near_plane;uniform float u_depth_buffer_adjustment;attribute vec4 a_position;attribute vec4 a_shape;attribute vec4 a_color;attribute vec2 a_texcoord;attribute vec2 a_offset;uniform float u_point_type;attribute float a_is_flat;
#ifdef TANGRAM_IS_TEXT_STYLE
attribute vec4 a_offsets_alt;attribute vec4 a_pre_angles_alt;attribute vec4 a_angles_alt;attribute vec4 a_offsets;attribute vec4 a_pre_angles;attribute vec4 a_angles;
#endif
#ifdef TANGRAM_POINT_DRAW_STICK
attribute float a_is_stick;attribute float a_stick_height;varying float v_is_stick;
#endif
varying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;
#ifdef TANGRAM_HAS_SHADER_POINTS
attribute float a_outline_edge;attribute vec4 a_outline_color;varying float v_outline_edge;varying vec4 v_outline_color;varying float v_aa_offset;
#endif
#ifdef TANGRAM_SHOW_HIDDEN_LABELS
varying float v_label_hidden;
#endif
#define PI 3.14159265359
#define TANGRAM_NORMAL vec3(0., 0., 1.)
#pragma tangram: camera
#pragma tangram: material
#pragma tangram: lighting
#pragma tangram: raster
#pragma tangram: global
vec2 rotate2D(vec2 _st,float _angle){return mat2(cos(_angle),-sin(_angle),sin(_angle),cos(_angle))*_st;}vec3 rotateX3D(vec3 _st,float _angle){return mat3(1.,0.,0.,0.,cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle))*_st;}vec3 rotateZ3D(vec3 _st,float _angle){return mat3(cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle),0.,0.,0.,1.)*_st;}
#ifdef TANGRAM_IS_TEXT_STYLE
float mix4linear(float a,float b,float c,float d,float x){return mix(mix(a,b,3.*x),mix(b,mix(c,d,3.*(max(x,.66)-.66)),3.*(clamp(x,.33,.66)-.33)),step(0.33,x));}
#endif
void main(){
#pragma tangram: setup
#ifndef TANGRAM_SHOW_HIDDEN_LABELS
if(a_shape.w==0.){gl_Position=vec4(0.,0.,0.,1.);return;}
#else
if(a_shape.w==0.){v_label_hidden=1.;}else{v_label_hidden=0.;}
#endif
v_alpha_factor=1.0;v_color=a_color;v_texcoord=a_texcoord;
#ifdef TANGRAM_HAS_SHADER_POINTS
v_outline_color=a_outline_color;v_outline_edge=a_outline_edge;if(u_point_type==TANGRAM_POINT_TYPE_SHADER){v_outline_color=a_outline_color;v_outline_edge=a_outline_edge;float size=abs(a_shape.x/128.);v_texcoord=sign(a_shape.xy)*(size+1.0)/size;size+=2.0;v_aa_offset=2.0/size;}
#endif
vec4 position=u_modelView*vec4(a_position.xyz,1.);vec4 shape=vec4(a_shape.xy,0.,0.);vec2 offset=vec2(a_offset.x,-a_offset.y);
#ifdef TANGRAM_POINT_DRAW_STICK
v_is_stick=a_is_stick;float scaled_stick_height=(sin(u_tilt+(1.5*PI))+1.0)*a_stick_height;offset.y+=(1.0-a_is_stick)*scaled_stick_height;
#endif
float zoom=clamp(u_map_position.z-u_tile_origin.z,0.,1.);float theta=a_shape.z/4096.;float heading=u_heading;float delta=(heading-PI);float new_theta=theta-delta;float reversed=abs(new_theta)>PI/2. ? 1. : 0.;if(a_is_flat==1.0){
#ifdef TANGRAM_IS_TEXT_STYLE
if(a_offsets[0]!=0.){vec4 angles_scaled;vec4 pre_angles_scaled;vec4 offsets_scaled;if(reversed==1.){offsets_scaled=a_offsets_alt*4.;angles_scaled=(PI/16384.)*a_angles_alt;pre_angles_scaled=(PI/128.)*a_pre_angles_alt;}else{offsets_scaled=a_offsets*4.;angles_scaled=(PI/16384.)*a_angles;pre_angles_scaled=(PI/128.)*a_pre_angles;}float pre_angle=mix4linear(pre_angles_scaled[0],pre_angles_scaled[1],pre_angles_scaled[2],pre_angles_scaled[3],zoom);float angle=mix4linear(angles_scaled[0],angles_scaled[1],angles_scaled[2],angles_scaled[3],zoom);float offset_curve=mix4linear(offsets_scaled[0],offsets_scaled[1],offsets_scaled[2],offsets_scaled[3],zoom);shape.xy=rotate2D(shape.xy,pre_angle+PI*reversed);shape.x+=offset_curve;shape.xy=rotate2D(shape.xy,angle);shape.xy+=rotate2D(offset,theta);}else{shape.xy=rotate2D(shape.xy+offset*256.,theta+(PI*reversed));}
#else
shape.xy=rotate2D(shape.xy+offset*256.,theta);
#endif
shape.xy/=pow(2.,4.+(u_map_position.z-u_tile_origin.w));shape=u_modelView*shape;position+=shape;}else{shape.xy/=256.;
#ifdef TANGRAM_POINT_DRAW_STICK
shape.y*=1.0+(scaled_stick_height-1.0)*a_is_stick;
#endif
shape.xy=rotate2D(shape.xy+offset,theta);}
#ifdef TANGRAM_FADE_IN_RATE
if(u_tile_fade_in){v_alpha_factor*=clamp(u_visible_time*TANGRAM_FADE_IN_RATE,0.,1.);}
#endif
#ifdef TANGRAM_FADE_ON_ZOOM_OUT
v_alpha_factor*=clamp(1.+TANGRAM_FADE_ON_ZOOM_OUT_RATE*(u_map_position.z-u_tile_origin.z),0.,1.);
#endif
v_world_position=u_model*position;v_world_position.xy+=shape.xy*u_meters_per_pixel;v_world_position=wrapWorldPosition(v_world_position);
#pragma tangram: position
cameraProjection(position);
#ifdef TANGRAM_LAYER_ORDER
applyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);/***Due to the precision loss on depth buffer,we had a z-fighting of translucent points when the distance to the camera was big.*For more information about the problem see: https:*For more information about the fix see: https:*position.z=(2.0*log(position.w/u_near_plane)/log(u_far_plane/u_near_plane)-1.0)*position.w;*/position.z=(log(position.w/u_near_plane)*u_depth_buffer_adjustment-1.0)*position.w;
#endif
if(a_is_flat!=1.){position.xy+=shape.xy*position.w*2.*u_device_pixel_ratio/u_resolution;}
#ifdef TANGRAM_HAS_SHADER_POINTS
if(u_point_type==TANGRAM_POINT_TYPE_SHADER){position.xy+=sign(shape.xy)*position.w*u_device_pixel_ratio/u_resolution;}
#endif
if(!u_view_panning){snapToPixelGrid(position);}gl_Position=position;}`,shaderSrc_pointsFragment=`uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_texture;uniform float u_point_type;uniform bool u_apply_color_blocks;varying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;
#ifdef TANGRAM_HAS_SHADER_POINTS
varying vec4 v_outline_color;varying float v_outline_edge;varying float v_aa_offset;
#endif
#ifdef TANGRAM_SHOW_HIDDEN_LABELS
varying float v_label_hidden;
#endif
#ifdef TANGRAM_POINT_DRAW_STICK
varying float v_is_stick;
#endif
#define TANGRAM_NORMAL vec3(0., 0., 1.)
#pragma tangram: camera
#pragma tangram: material
#pragma tangram: lighting
#pragma tangram: raster
#pragma tangram: global
#ifdef TANGRAM_HAS_SHADER_POINTS
float _tangram_antialias(float l,float R){float low=R-v_aa_offset;float high=R+v_aa_offset;return 1.-smoothstep(low,high,l);}
#endif
void mixTextureColor(inout vec4 color){
#ifdef TANGRAM_HAS_SHADER_POINTS
if(u_point_type==TANGRAM_POINT_TYPE_TEXTURE){color*=texture2D(u_texture,v_texcoord);}else if(u_point_type==TANGRAM_POINT_TYPE_LABEL){color=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);}else if(u_point_type==TANGRAM_POINT_TYPE_SHADER){float outline_edge=v_outline_edge;vec4 outlineColor=v_outline_color;float l=length(v_texcoord);float outer_alpha=_tangram_antialias(l,1.);float fill_alpha=_tangram_antialias(l,1.-v_outline_edge*0.5)*color.a;float stroke_alpha=(outer_alpha-_tangram_antialias(l,1.-v_outline_edge))*outlineColor.a;
#ifdef TANGRAM_BLEND_ADD
color.a=stroke_alpha+fill_alpha;color.rgb=color.rgb*fill_alpha+outlineColor.rgb*stroke_alpha;
#else
color.a=stroke_alpha+fill_alpha*(1.-stroke_alpha);color.rgb=mix(color.rgb*fill_alpha,outlineColor.rgb,stroke_alpha)/max(color.a,0.001);
#endif
}
#else
color=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);
#endif
if(u_apply_color_blocks){
#pragma tangram: color
#pragma tangram: filter
}color.a*=v_alpha_factor;
#ifdef TANGRAM_SHOW_HIDDEN_LABELS
if(v_label_hidden>0.){color.a*=0.5;color.rgb=vec3(1.,0.,0.);}
#endif
#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY) && !defined(TANGRAM_BLEND_ADD)
if(color.a<TANGRAM_ALPHA_TEST){discard;}
#endif
}void main(void){
#pragma tangram: setup
vec4 color=v_color;
#ifdef TANGRAM_POINT_DRAW_STICK
if(v_is_stick==0.0){mixTextureColor(color);}
#else
mixTextureColor(color);
#endif
gl_FragColor=color;}`,PLACEMENT$1=LabelPoint.PLACEMENT,pre_angles_normalize=128/Math.PI,angles_normalize=16384/Math.PI,offsets_normalize=64,texcoord_normalize=65535,Points=Object.create(Style),TANGRAM_POINT_TYPE_TEXTURE=1,TANGRAM_POINT_TYPE_LABEL=2,TANGRAM_POINT_TYPE_SHADER=3,DEFAULT_POINT_SIZE=16;Object.assign(Points,TextLabels),Object.assign(Points,{name:"points",built_in:!0,vertex_shader_src:shaderSrc_pointsVertex,fragment_shader_src:shaderSrc_pointsFragment,selection:!0,collision:!0,blend:"overlay",init:function(e){var o=0<arguments.length&&e!==void 0?e:{};Style.init.call(this,o),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!0,this.defines.TANGRAM_POINT_TYPE_TEXTURE=TANGRAM_POINT_TYPE_TEXTURE,this.defines.TANGRAM_POINT_TYPE_LABEL=TANGRAM_POINT_TYPE_LABEL,this.defines.TANGRAM_POINT_TYPE_SHADER=TANGRAM_POINT_TYPE_SHADER,this.defines.TANGRAM_POINT_DRAW_STICK=!!this.stick,this.collision_group_points=this.name+"-points",this.collision_group_text=this.name+"-text",this.reset()},setupDefines:function(){this.blend!=="overlay"&&(this.defines.TANGRAM_LAYER_ORDER=!0),this.defines.TANGRAM_FADE_ON_ZOOM_OUT=!0,this.defines.TANGRAM_FADE_ON_ZOOM_OUT_RATE=2,debugSettings$1.suppress_label_fade_in||this.suppress_fade?(this.fade_in_time=0,this.defines.TANGRAM_FADE_IN_RATE=null):(this.fade_in_time=.15,this.defines.TANGRAM_FADE_IN_RATE=1/this.fade_in_time),debugSettings$1.suppress_snap_animation||(this.defines.TANGRAM_VIEW_PAN_SNAP_RATE=1/VIEW_PAN_SNAP_TIME),debugSettings$1.show_hidden_labels&&(this.defines.TANGRAM_SHOW_HIDDEN_LABELS=!0)},reset:function(){this.queues={},this.resetText(),this.texture_missing_sprites={}},addFeature:function(e,o,h){var d,g,_,$=h.tile,j={};if(j.color=this.parseColor(o.color,h),j.texture=o.texture,j.label_texture=null,j.color||j.texture){if(this.hasSprites(j)){if(!(d=this.parseSprite(j,o,h)))return;j.texcoords=d.texcoords}if(j.size=o.size,j.size){if(j.size=StyleParser.evalCachedPointSizeProperty(o.size,d,h),j.size==null)return void log({level:"warn",once:!0},"Layer '".concat(o.layers[o.layers.length-1],"': ")+"'size' includes % and/or ratio-based scaling (".concat(JSON.stringify(o.size.value),"); ")+"these can only applied to sprites, but no sprite was specified, skipping features in layer");typeof j.size=="number"&&(j.size=[j.size,j.size])}else j.size=d&&d.css_size||[DEFAULT_POINT_SIZE,DEFAULT_POINT_SIZE];o.outline&&(j.outline_width=StyleParser.evalCachedProperty(o.outline.width,h)||StyleParser.defaults.outline.width,j.outline_color=this.parseColor(o.outline.color,h)),j.outline_edge_pct=0,j.outline_width&&j.outline_color&&(g=j.outline_width,j.size[0]+=g,j.size[1]+=g,j.outline_edge_pct=g/Math.min(j.size[0],j.size[1])*2),j.size[0]=Math.min(j.size[0],256),j.size[1]=Math.min(j.size[1],256),j.placement=o.placement,j.placement_min_length_ratio=StyleParser.evalCachedProperty(o.placement_min_length_ratio,h),j.placement===PLACEMENT$1.SPACED&&o.placement_spacing&&(j.placement_spacing=StyleParser.evalCachedProperty(o.placement_spacing,h)),j.angle=StyleParser.evalProperty(o.angle,h)||0,j.elevate_by_altitude=!!o.elevate_by_altitude,j.z=o.z?MathUtils$1.clamp(StyleParser.evalCachedDistanceProperty(o.z,h),0,32767):StyleParser.defaults.z,j.flat=o.flat,j.tile_edges=o.tile_edges,this.computeLayout(j,e,o,h,$),o.stick&&!j.flat&&(_=StyleParser.parseNumber(StyleParser.evalProperty(o.stick.height,h)),j.stick={color:this.parseColor(o.stick.color,h)||StyleParser.defaults.color,height:_?Math.max(_,0):0});var _t=o.text&&StyleParser.evalProperty(o.text.visible,h)!==!1&&this.parseTextFeature(e,o.text,h,$);Array.isArray(_t)&&log({level:"warn",once:!(_t=null)},"Layer '".concat(o.layers[o.layers.length-1],"': ")+"cannot use boundary labels (e.g. 'text_source: { left: ..., right: ... }') for 'text' labels attached to 'points'; "+"provided 'text_source' value was ".concat(JSON.stringify(o.text.text_source))),_t&&(_t.layout.parent=j,_t.layout.priority=o.text.priority?Math.max(_t.layout.priority,j.priority+.5):j.priority+.5,_t.layout.move_into_tile=!1,Collision.addStyle(this.collision_group_text,$.id)),this.queueFeature({feature:e,draw:o,context:h,style:j,text_feature:_t},$),Collision.addStyle(this.collision_group_points,$.id)}},hasSprites:function(e){return e.texture&&this.textureManager.textures[e.texture]&&this.textureManager.textures[e.texture].sprites},getSpriteInfo:function(e,o){var h=this.textureManager.textures[e.texture].sprites[o]&&this.textureManager.getSpriteInfo(e.texture,o);return o&&!h?(this.texture_missing_sprites[e.texture]=this.texture_missing_sprites[e.texture]||{},this.texture_missing_sprites[e.texture][o]||(log("debug","Style: in style '".concat(this.name,"', could not find sprite '").concat(o,"' for texture '").concat(e.texture,"'")),this.texture_missing_sprites[e.texture][o]=!0)):h&&(h.sprite=o),h},parseSprite:function(e,o,h){var d=StyleParser.evalProperty(o.sprite,h);return this.getSpriteInfo(e,d)||this.getSpriteInfo(e,o.sprite_default)},queueFeature:function(e,o){this.tile_data[o.id]&&this.queues[o.id]||this.startData(o),this.queues[o.id]=this.queues[o.id]||[],this.queues[o.id].push(e)},endData:function(e){var o=this;if(e.canceled)return log("trace","Style ".concat(this.name,": stop tile build because tile was canceled: ").concat(e.key)),Promise.resolve();var h=this.queues[e.id];delete this.queues[e.id];var d=[],g=[];return h.forEach(function(_){for(var $=_.style,j=_.feature,_t=j.geometry,_e=o.buildLabels($.size,_t,$),_r=0;_r<_e.length;_r++){var _n,_i=_e[_r],_o={feature:j,draw:_.draw,context:_.context,style:$,label:_i};g.push(_o),_.text_feature&&(_n={feature:j,draw:_.text_feature.draw,context:_.context,text:_.text_feature.text,text_settings_key:_.text_feature.text_settings_key,layout:_.text_feature.layout,point_label:_i,linked:_o},d.push(_n),_.draw.text.optional||(_o.linked=_n))}}),Promise.all([Collision.collide(g,this.collision_group_points,e.id).then(function(_){_.forEach(function($){o.feature_style=$.style,o.feature_style.label=$.label,o.feature_style.linked=$.linked,Style.addFeature.call(o,$.feature,$.draw,$.context)})}),this.collideAndRenderTextLabels(e,this.collision_group_text,d)]).then(function(_){var $=_slicedToArray(_,2)[1],j=$.labels,_t=$.texts;return j&&_t&&j.forEach(function(_e){var _r=_e.text_settings_key,_n=_t[_r]&&_t[_r][_e.text],_i=o.feature_style;_i.label=_e.label,_i.linked=_e.linked,_i.size=_n.size.logical_size,_i.angle=0,_e.label.text_data={text_info:_n,text_settings_key:_r,text:_e.text},_i.label_texture=o.textureManager.default,Style.addFeature.call(o,_e.feature,_e.draw,_e.context)}),o.freeText(e),Style.endData.call(o,e)})},_preprocess:function(e){e.color=StyleParser.createColorPropertyCache(e.color),e.texture=e.texture!==void 0?e.texture:this.texture,e.outline&&(e.outline.color=StyleParser.createColorPropertyCache(e.outline.color),e.outline.width=StyleParser.createPropertyCache(e.outline.width,StyleParser.parsePositiveNumber)),e.z=StyleParser.createPropertyCache(e.z,StyleParser.parseUnits);try{e.size=StyleParser.createPointSizePropertyCache(e.size)}catch(o){return log({level:"warn",once:!0},"Layer '".concat(e.layers[e.layers.length-1],"': ")+"".concat(o," (").concat(JSON.stringify(e.size),"), skipping features in layer")),null}return e.offset=StyleParser.createPropertyCache(e.offset,function(o){return Array.isArray(o)&&o.map(StyleParser.parseNumber)}),e.buffer=StyleParser.createPropertyCache(e.buffer,function(o){return(Array.isArray(o)?o:[o,o]).map(StyleParser.parsePositiveNumber)}),e.repeat_distance=StyleParser.createPropertyCache(e.repeat_distance,StyleParser.parseNumber),e.repeat_group==null&&(e.repeat_group=e.layers.join("-")),e.placement=PLACEMENT$1[e.placement&&e.placement.toUpperCase()],e.placement==null&&(e.placement=PLACEMENT$1.VERTEX),e.placement_spacing=e.placement_spacing!=null?e.placement_spacing:80,e.placement_spacing=StyleParser.createPropertyCache(e.placement_spacing,StyleParser.parsePositiveNumber),e.placement_min_length_ratio=e.placement_min_length_ratio!=null?e.placement_min_length_ratio:1,e.placement_min_length_ratio=StyleParser.createPropertyCache(e.placement_min_length_ratio,StyleParser.parsePositiveNumber),typeof e.angle=="number"?e.angle=e.angle*Math.PI/180:e.angle=e.angle||0,e.text=this.preprocessText(e.text),e.text&&(e.text.variantKey=e.variantKey,e.text.group=e.group,e.text.layers=e.layers,e.text.order=e.order,e.text.repeat_group=e.text.repeat_group||e.repeat_group,e.text.anchor=e.text.anchor||this.default_anchor,e.text.optional=typeof e.text.optional=="boolean"&&e.text.optional,e.text.interactive=e.text.interactive||e.interactive),e.stick&&(e.stick.color=StyleParser.createColorPropertyCache(e.stick.color)),e},default_anchor:["bottom","top","right","left"],computeLayout:function(e,o,h,d,g){var _=e||{};_.id=o,_.units_per_pixel=g.units_per_pixel||1,_.collide=h.collide!==!1,_.anchor=h.anchor,_.offset=StyleParser.evalCachedProperty(h.offset,d)||StyleParser.zeroPair,_.buffer=StyleParser.evalCachedProperty(h.buffer,d)||StyleParser.zeroPair,_.repeat_distance=StyleParser.evalCachedProperty(h.repeat_distance,d),_.repeat_distance&&(_.repeat_distance*=_.units_per_pixel,_.repeat_scale=1,typeof h.repeat_group=="function"?_.repeat_group=h.repeat_group(d):_.repeat_group=h.repeat_group);var $=h.priority;return $!=null?typeof $=="function"&&($=$(d)):$=4294967295,_.priority=$,_},buildTextLabels:function(e,o){for(var h=[],d=0;d<o.length;d++){var g=o[d],_=this.texts[e.id][g.text_settings_key][g.text].size.collision_size;g.label=new LabelPoint(g.point_label.position,_,g.point_label.isFlat(),g.layout),h.push(g)}return h},buildLabels:function(e,o,h){var d=!!h.flat,g=[];if(o.type==="Point")g.push(new LabelPoint(o.coordinates,e,d,h));else if(o.type==="MultiPoint")for(var _=o.coordinates,$=0;$<_.length;++$){var j=_[$];g.push(new LabelPoint(j,e,d,h))}else if(o.type==="LineString")for(var _t=placePointsOnLine(o.coordinates,e,d,h),_e=0;_e<_t.length;++_e)g.push(_t[_e]);else if(o.type==="MultiLineString")for(var _r=o.coordinates,_n=0;_n<_r.length;_n++)for(var _i=placePointsOnLine(_r[_n],e,d,h),_o=0;_o<_i.length;++_o)g.push(_i[_o]);else if(o.type==="Polygon")if(h.placement===PLACEMENT$1.CENTROID){var _a=Geo$1.centroid(o.coordinates);g.push(new LabelPoint(_a,e,d,h))}else for(var _u=o.coordinates,_f=0;_f<_u.length;_f++)for(var _h=placePointsOnLine(_u[_f],e,d,h),_d=0;_d<_h.length;++_d)g.push(_h[_d]);else if(o.type==="MultiPolygon")if(h.placement===PLACEMENT$1.CENTROID){var ty=Geo$1.multiCentroid(o.coordinates);g.push(new LabelPoint(ty,e,d,h))}else for(var ey=o.coordinates,sy=0;sy<ey.length;sy++)for(var ny=ey[sy],uy=0;uy<ny.length;uy++)for(var fy=placePointsOnLine(ny[uy],e,d,h),yy=0;yy<fy.length;++yy)g.push(fy[yy]);return g},makeVertexTemplate:function(e,o){var h,d=e.color||StyleParser.defaults.color,g=o.vertex_data.vertex_layout;return this.fillVertexTemplate(g,"a_position",0,{size:2}),this.fillVertexTemplate(g,"a_position",e.z||0,{size:1,offset:2}),this.fillVertexTemplate(g,"a_position",this.scaleOrder(e.order),{size:1,offset:3}),this.fillVertexTemplate(g,"a_shape",0,{size:4}),this.fillVertexTemplate(g,"a_shape",e.label.layout.collide?0:1,{size:1,offset:3}),this.fillVertexTemplate(g,"a_texcoord",0,{size:2}),this.fillVertexTemplate(g,"a_offset",0,{size:2}),this.fillVertexTemplate(g,"a_color",Vector$1.mult(d,255),{size:4}),this.defines.TANGRAM_HAS_SHADER_POINTS&&o.variant.shader_point&&(h=e.outline_color||StyleParser.defaults.outline.color,this.fillVertexTemplate(g,"a_outline_color",Vector$1.mult(h,255),{size:4}),this.fillVertexTemplate(g,"a_outline_edge",e.outline_edge_pct||StyleParser.defaults.outline.width,{size:1})),this.selection&&this.fillVertexTemplate(g,"a_selection_color",Vector$1.mult(e.selection_color,255),{size:4}),this.fillVertexTemplate(g,"a_is_flat",0,{size:1}),this.defines.TANGRAM_POINT_DRAW_STICK&&e.stick&&(this.fillVertexTemplate(g,"a_is_stick",0,{size:1}),this.fillVertexTemplate(g,"a_stick_height",e.stick.height,{size:1})),this.vertex_template},buildQuad:function(e,o,h,d,g,_,$,j,_t,_e,_r,_n,_i,_o,_a,_u,_f,_h,_d){return o[0]<=0||o[1]<=0?0:buildQuadsForPoints(e,_a,_u,{quad:o,quad_normalize:256,offset:j,offsets:_t,offsets_alt:_e,pre_angles:_,pre_angles_alt:$,angle:4096*h,angles:d,angles_alt:g,is_flat:_i,elevate_by_altitude:_o,build_stick_points:_f,stick_color:_f&&Vector$1.mult(_h,255),color:Vector$1.mult(_d||StyleParser.defaults.color,255),curve:_n,texcoord_scale:_r,texcoord_normalize,pre_angles_normalize,angles_normalize,offsets_normalize})},build:function(e,o,h){var d=e.label;return d.type==="curved"?this.buildCurvedLabel(d,e,o,h):this.buildStraightLabel(d,e,o,h)},buildStraightLabel:function(e,o,h,d){var g,_=this.makeVertexTemplate(o,h),$=e.angle||o.angle,j=e.type!=="point"?(g=o.size[e.type],default_uvs):(g=o.size,o.texcoords||default_uvs);h.uniforms=h.uniforms||{},o.label_texture?(h.uniforms.u_texture=o.label_texture,h.uniforms.u_point_type=TANGRAM_POINT_TYPE_LABEL,h.uniforms.u_apply_color_blocks=!1):(o.texture?(h.uniforms.u_texture=o.texture,h.uniforms.u_point_type=TANGRAM_POINT_TYPE_TEXTURE):(h.uniforms.u_texture=this.textureManager.default,h.uniforms.u_point_type=TANGRAM_POINT_TYPE_SHADER),h.uniforms.u_apply_color_blocks=!0);var _t=e.offset,_e=this.defines.TANGRAM_POINT_DRAW_STICK&&!o.label_texture&&o.stick&&0<o.stick.height,_r=this.buildQuad([e.position],g,$,null,null,null,null,_t,null,null,j,!1,e.isFlat(),o.elevate_by_altitude,h.vertex_data,_,_e,_e&&o.stick.color,o.color),_n=o.linked&&o.linked.label.id;return this.trackLabel(e,_n,h,_r,d,_e),_r},buildCurvedLabel:function(e,o,h,d){for(var g=this.makeVertexTemplate(o,h),_=e.angle,$=0,j=0;j<2;j++)for(var _t=0;_t<e.num_segments;_t++){var _e=o.size[e.type][_t],_r=default_uvs,_n=this.getTileMesh(d.tile,this.getMeshVariantTypeForDraw(o));_n.uniforms=_n.uniforms||{},_n.uniforms.u_texture=o.label_texture,_n.uniforms.u_point_type=TANGRAM_POINT_TYPE_LABEL,_n.uniforms.u_apply_color_blocks=!1;var _i=e.offset||[0,0],_o=e.position,_a=e.angles[_t],_u=e.offsets[_t],_f=e.pre_angles[_t],_h=e.num_segments-_t-1,_d=e.alt_angles[_h],ty=e.alt_pre_angles[_h],ey=e.alt_offsets[_h],sy=this.buildQuad([_o],_e,_,_a,_d,_f,ty,_i,_u,ey,_r,!0,e.isFlat(),o.elevate_by_altitude,_n.vertex_data,g,!1,!1,o.color);$+=sy;var ny=o.linked&&o.linked.label.id;this.trackLabel(e,ny,h,sy,d,!1)}return $},trackLabel:function(e,o,h,d,g,_){var $=5<arguments.length&&_!==void 0&&_;h.labels=h.labels||{},h.labels.collision=h.labels.collision||{},h.labels["non-collision"]=h.labels["non-collision"]||{};var j=e.layout.collide?h.labels.collision:h.labels["non-collision"];j[e.id]=j[e.id]||{container:{label:e.text_data?Object.assign(e.toJSON(),{text_data:e.text_data}):e.toJSON(),linked:o},ranges:[]};var _t=2*d,_e=h.vertex_data.offset-h.vertex_data.stride*_t;j[e.id].ranges.push([_e,_t,$])},buildLines:function(e,o,h,d){return this.build(o,h,d)},buildPoints:function(e,o,h,d){return this.build(o,h,d)},buildPolygons:function(e,o,h,d){return this.build(o,h,d)},vertexLayoutForMeshVariant:function(e){var o;return this.vertex_layout||(o=[{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_shape",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:gl$1.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:gl$1.SHORT,normalized:!1},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_outline_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0,static:[0,0,0,0]},{name:"a_outline_edge",size:1,type:gl$1.FLOAT,normalized:!1,static:0},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:gl$1.UNSIGNED_BYTE,normalized:!0}],this.defines&&this.defines.TANGRAM_POINT_DRAW_STICK&&o.push({name:"a_is_stick",size:1,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_stick_height",size:1,type:gl$1.FLOAT,normalized:!1}),this.vertex_layout=new VertexLayout(o),(o=o.map(function(h){return Object.assign({},h)})).forEach(function(h){h.name!=="a_outline_color"&&h.name!=="a_outline_edge"||(h.static=null)}),this.vertex_layout_shader_point=new VertexLayout(o)),e.shader_point?this.vertex_layout_shader_point:this.vertex_layout},computeVariantForDraw:function(e){var o=e.label_texture||e.texture||this.default_mesh_variant.key;return{key:o,shader_point:o===this.default_mesh_variant.key,order:e.label_texture?1:0}},makeMesh:function(e,o,h){var d=2<arguments.length&&h!==void 0?h:{},d=Object.assign({},d,{fade_in_time:this.fade_in_time});return Style.makeMesh.call(this,e,o,d)}});var STOPS=[0,.33,.66,.99],LINE_EXCEED_STRAIGHT=1.5,LINE_EXCEED_STRAIGHT_NO_CURVE=1.8,LINE_EXCEED_STAIGHT_LOOSE=2.3,STRAIGHT_ANGLE_TOLERANCE=.1,CURVE_MIN_TOTAL_COST=1.3,CURVE_MIN_AVG_COST=.4,CURVE_MAX_ANGLE=1,ORIENTED_LABEL_OFFSET_FACTOR=1.2,VERTICAL_ANGLE_TOLERANCE=.01,LabelLine={create:function(e,o,h,d,g){for(var _=[{type:"straight",tolerance:g.no_curving?LINE_EXCEED_STRAIGHT_NO_CURVE:LINE_EXCEED_STRAIGHT},{type:"curved"},{type:"straight",tolerance:LINE_EXCEED_STAIGHT_LOOSE}],$=0;$<_.length;$++){var j=_[$],_t=void 0;if(j.type==="straight"?_t=new LabelLineStraight(o,h,d,g,j.tolerance):j.type==="curved"&&!g.no_curving&&2<h.length&&(_t=new LabelLineCurved(e,h,d,g)),_t&&!_t.throw_away)return _t}return!1}},LabelLineBase=function(){function e(o,h){_classCallCheck(this,e),this.id=Label.nextLabelId(),this.layout=h,this.position=[],this.angle=0,this.offset=h.offset.slice(),this.unit_scale=this.layout.units_per_pixel,this.type="",this.throw_away=!1,this._is_flat=o,this._circles=void 0,this.placed=null}return _createClass(e,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,angle:this.angle,breach:this.breach,layout:textLayoutToJSON(this.layout),circles:this.getBoundingCircles()}}},{key:"inTileBounds",value:function(){var o=this.getAABB(),h=o.left,d=o.top,g=o.right,_=o.bottom;return Utils$1.pointInTile([h,d])&&Utils$1.pointInTile([g,_])}},{key:"getAABBForSegment",value:function(o,h,d,g){var _,$=this.unit_scale,j=h/2,_t=d/2,_e=_slicedToArray(o,2),_r=_e[0],_n=_e[1];this.offset[0]===0&&this.offset[1]===0||(_r+=(_=Vector$1.rot(this.offset,this.angle))[0]*$,_n-=_[1]*$);var _i=[[Math.cos(g),-Math.sin(g)],[Math.sin(g),Math.cos(g)]],_o=Vector$1.multMatrix(_i,[-j,-_t]),_a=Vector$1.multMatrix(_i,[j,-_t]),_u=Vector$1.multMatrix(_i,[j,_t]),_f=Vector$1.multMatrix(_i,[-j,_t]);return{left:_r+Math.min(_o[0],_a[0],_u[0],_f[0]),top:_n+Math.max(_o[1],_a[1],_u[1],_f[1]),right:_r+Math.max(_o[0],_a[0],_u[0],_f[0]),bottom:_n+Math.min(_o[1],_a[1],_u[1],_f[1])}}},{key:"isFlat",value:function(){return this._is_flat}},{key:"getBoundingCircles",value:function(){}},{key:"getAABB",value:function(){}}],[{key:"splitLineByOrientation",value:function(o){for(var h=[o[0]],d=0,g=0,_=0,$=h,j=!1,_t=1;_t<o.length;_t++){var _e=o[_t],_r=o[_t-1],_n=Vector$1.length(Vector$1.sub(_e,_r));_e[0]>_r[0]?_===1?(h.push(_e),g<(d+=_n)&&($=h,g=d,j=!1)):(h=[_r,_e],g<(d=_n)&&($=h,g=d,j=!1),_=1):_e[0]<_r[0]?_===-1?(h.unshift(_e),g<(d+=_n)&&($=h,g=d,j=!0)):(h=[_e,_r],g<(d=_n)&&($=h,g=d,j=!0),_=-1):(_===-1?h.unshift(_e):(h.push(_e),_=1),g<(d+=_n)&&($=h,g=d,j=_===-1))}return[$,j]}}]),e}(),LabelLineStraight=function(){_inherits(o,LabelLineBase);var e=_createSuper(o);function o(h,d,g,_,$){var j;return _classCallCheck(this,o),(j=e.call(this,g,_)).type="straight",j.size=h,j.throw_away=!j.fit(h,d,_,$),j}return _createClass(o,[{key:"fit",value:function(h,d,g,_){var $,j=this.unit_scale,_t=_slicedToArray(LabelLineBase.splitLineByOrientation(d),2);d=_t[0],$=_t[1],typeof g.orientation=="number"&&(this.offset[1]+=ORIENTED_LABEL_OFFSET_FACTOR*(h[1]-g.vertical_buffer),$&&(this.offset[1]*=-1),g.orientation===-1&&(this.offset[1]*=-1));for(var _e=getLineLengths(d),_r=h[0]*j,_n=0;_n<d.length-1;_n++)for(var _i=d[_n],_o=0,_a=0,_u=_n+1,_f=void 0;_u<d.length;){var _h=d[_u-1],_d=d[_u],ty=getAngleForSegment(_h,_d);if(_u!==_n+1&&(_o+=getAbsAngleDiff(ty,_f)),Math.abs(_o)>STRAIGHT_ANGLE_TOLERANCE)break;if(calcFitness(_a+=_e[_u-1],_r)<_){var ey=Vector$1.mult(Vector$1.add(_i,_d),.5);return this.angle=-ty,Math.abs(this.angle-Math.PI/2)<VERTICAL_ANGLE_TOLERANCE&&(this.angle=-Math.PI/2,typeof g.orientation=="number"&&(this.offset[1]*=-1)),this.position=ey,this.breach=!this.inTileBounds(),!0}_f=ty,_u++}return!1}},{key:"getBoundingCircles",value:function(){var h,d,g,_,$,j,_t,_e,_r,_n,_i,_o,_a,_u;return this._circles||(h=this.unit_scale,$=-(g=(d=this.size[0]/2*h)*Math.cos(this.angle)),j=-(_=d*Math.sin(this.angle)),_t=this.offset[0]*h,_e=this.offset[1]*h,_n=(_r=_slicedToArray(this.position,2))[0],_i=_r[1],_i*=-1,_t&&(_o=[g,_],Vector$1.normalize(_o),_o[0]*=_t,_o[1]*=_t,_n+=_o[0],_i+=_o[1]),_e&&(_a=[_,-g],Vector$1.normalize(_a),_a[0]*=_e,_a[1]*=_e,_n-=_a[0],_i-=_a[1]),g+=_n,_+=_i,$+=_n,j+=_i,_u=this.size[1]/2*h,this._circles=encircleLine(g,_,$,j,_u)),this._circles}},{key:"getAABB",value:function(){var h,d,g,_,$;return this._aabb||(h=this.unit_scale,d=this.size,g=this.layout.buffer,_=(d[0]+2*g[0])*h,$=(d[1]+2*g[1])*h,this._aabb=this.getAABBForSegment(this.position,_,$,this.angle)),this._aabb}}]),o}(),LabelLineCurved=function(){_inherits(o,LabelLineBase);var e=_createSuper(o);function o(h,d,g,_){var $;return _classCallCheck(this,o),($=e.call(this,g,_)).type="curved",$.positions=[],$.angles=[],$._aabbs=[],$.pre_angles=[],$.offsets=[],$.num_segments=h.length,$.sizes=h,$.alt_angles=[],$.alt_pre_angles=[],$.alt_offsets=[],$.throw_away=!$.fit($.sizes,d,_),$}return _createClass(o,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,breach:this.breach,layout:textLayoutToJSON(this.layout),circles:this.getBoundingCircles()}}},{key:"fit",value:function(h,d,g){var _,$=this.unit_scale,j=Math.max.apply(Math,_toConsumableArray(h.map(function(Q0){return Q0[1]}))),_t=j*$,_e=_slicedToArray(LabelLineBase.splitLineByOrientation(d),2);d=_e[0],_=_e[1],typeof g.orientation=="number"&&(this.offset[1]+=ORIENTED_LABEL_OFFSET_FACTOR*(j-g.vertical_buffer),_&&(this.offset[1]*=-1),g.orientation===-1&&(this.offset[1]*=-1));var _r=getLineLengths(d),_n=h.map(function(Q0){return Q0[0]*$}),_i=_r.reduce(function(Q0,O0){return Q0+O0},0),_o=_n.reduce(function(Q0,O0){return Q0+O0},0);if(_i<_o)return!1;var _a=d.length-1;if(_a<2)return!1;var _u=o.curvaturePlacement(d,_i,_r,_o,0,_a),_f=d[_u];if(_u===-1||_a-_u<2)return!1;this.position=_f;for(var _h=0;_h<_n.length;_h++){this.positions[_h]=[],this.offsets[_h]=[],this.angles[_h]=[],this.pre_angles[_h]=[];for(var _d=0;_d<STOPS.length;_d++){var ty=STOPS[_d],ey=_slicedToArray(o.scaleLine(ty,d),2),sy=ey[0],ny=ey[1],_f=sy[_u],uy=o.placeAtIndex(_u,sy,ny,_n),fy=uy.positions,yy=uy.offsets,xy=uy.angles,Ey=uy.pre_angles,Oy=yy.map(function(O0){return Math.sqrt(O0[0]*O0[0]+O0[1]*O0[1])/$});if(ty===0){this.angle=1/xy.length*xy.reduce(function(O0,H0){return O0+H0});for(var Gy=0;Gy<fy.length;Gy++){var Ly=fy[Gy],g0=Ey[Gy],a0=_n[Gy],e0=g0+xy[Gy];this._aabbs.push(this.getAABBForSegment(Ly,a0,_t,e0))}}this.positions[_h].push(fy[_h]),this.offsets[_h].push(Oy[_h]),this.angles[_h].push(xy[_h]),this.pre_angles[_h].push(Ey[_h])}}for(var _n=h.slice().reverse().map(function(O0){return O0[0]*$}),Ay=0;Ay<_n.length;Ay++){this.alt_offsets[Ay]=[],this.alt_angles[Ay]=[],this.alt_pre_angles[Ay]=[];for(var $y=0;$y<STOPS.length;$y++){var Hy=STOPS[$y],i0=_slicedToArray(o.scaleLine(Hy,d),2),m0=i0[0],d0=i0[1];_f=m0[_u];var A0=o.placeAtIndex(_u,m0,d0,_n),W0=A0.offsets,D0=A0.angles,X0=A0.pre_angles,l1=W0.map(function(O0){return Math.sqrt(O0[0]*O0[0]+O0[1]*O0[1])/$});Hy===0&&(this.alt_angle=1/D0.length*D0.reduce(function(O0,H0){return O0+H0})),this.alt_offsets[Ay].push(l1[Ay]),this.alt_angles[Ay].push(D0[Ay]),this.alt_pre_angles[Ay].push(X0[Ay])}}return!0}},{key:"getBoundingCircles",value:function(){if(!this._circles){for(var h=[],d=this.unit_scale,g=0;g<this.positions.length;g++){var _=this.sizes[g],$=this.angles[g][0],j=this.positions[g][0],_t=_[0]/2*d,_e=_t*Math.cos($),_r=_t*Math.sin($),_n=-_e,_i=-_r,_o=_slicedToArray(j,2),_a=_o[0],_u=_o[1],_f=encircleLine(_e+=_a,_r+=_u*=-1,_n+=_a,_i+=_u,_[1]/2*d);Array.prototype.push.apply(h,_f)}this._circles=h}return this._circles}},{key:"getAABB",value:function(){if(!this._aabb){for(var g=1/0,_=-1/0,$=-1/0,j=1/0,h=0;h<this._aabbs.length;h++)var d=this._aabbs[h],g=Math.min(g,d.left),_=Math.max(_,d.top),$=Math.max($,d.right),j=Math.min(j,d.bottom);this._aabb={left:g,top:_,right:$,bottom:j}}return this._aabb}}],[{key:"curvaturePlacement",value:function(h,d,g,_,$,j){$=$||0,j=j||h.length-1;for(var _t=[],_e=$+1;_e<j;_e++){var _r=h[_e-1],_n=h[_e],_i=h[_e+1],_o=Vector$1.perp(_n,_r),_a=Vector$1.perp(_i,_n),_u=Vector$1.angleBetween(_o,_a);CURVE_MAX_ANGLE<_u&&(_u=1/0),_t.push(_u)}_t.push(1/0);for(var _f=[],_h=[],_d=$,ty=0,ey=0;ey<$;ey++)ty+=g[ey];for(;ty+_<d;){for(var sy=ty+_,ny=ty,uy=_d,fy=0;uy<j&&ny+g[uy]<sy&&(fy+=_t[uy])!==1/0;)ny+=g[uy],uy++;if(fy===0)return _d;var yy=fy/(uy-_d);_f.push(fy),_h.push(yy),ty+=g[_d],_d++}if(_f.length===0)return-1;var xy=Math.min.apply(null,_f),Ey=_h[_f.indexOf(xy)];return xy<CURVE_MIN_TOTAL_COST&&Ey<CURVE_MIN_AVG_COST?_f.indexOf(xy):-1}},{key:"scaleLine",value:function(h,d){var g=[d[0]],_=[];return d.forEach(function($,j){var _t,_e;j!==d.length-1&&(_t=Vector$1.sub(d[j+1],d[j]),_e=Vector$1.mult(_t,1+h),g.push(Vector$1.add(g[j],_e)),_.push(Vector$1.length(_e)))}),[g,_]}},{key:"placeAtIndex",value:function(h,d,g,_){var $=d[h],j=_slicedToArray(o.getIndicesAndOffsets(h,g,_),2),_t=j[0],_e=j[1],_r=o.getPositionsFromIndicesAndOffsets(d,_t,_e),_n=_slicedToArray(o.getAnglesFromIndicesAndOffsets($,_t,d,_r),3);return{positions:_r,offsets:_n[0],angles:_n[1],pre_angles:_n[2]}}},{key:"getIndicesAndOffsets",value:function(h,d,g){for(var _=g.length,$=[],j=[],_t=0,_e=0,_r=0;_t<_;){for(var _n=g[_t];_t<_&&_e+.5*_n<=_r+d[h];){var _i=_e-_r+.5*_n;j.push(_i),$.push(h),_e+=_n,_n=g[++_t]}_r+=d[h],h++}return[$,j]}},{key:"getPositionsFromIndicesAndOffsets",value:function(h,d,g){for(var _=[],$=0;$<d.length;$++){var j=d[$],_t=g[$],_e=getAngleForSegment(h[j],h[j+1]),_r=Vector$1.rot([_t,0],_e),_n=Vector$1.add(h[j],_r);_.push(_n)}return _}},{key:"getAnglesFromIndicesAndOffsets",value:function(h,d,g,_){for(var $=[],j=[],_t=[],_e=0;_e<_.length;_e++){var _r,_n,_i=_[_e],_o=d[_e],_a=Vector$1.sub(_i,h),_u=-Vector$1.angle(_a),_f=getTextAngleForSegment(g[_o],g[_o+1])-_u;0<_e&&(_r=$[_e-1],_n=j[_e-1],Math.abs(_u-_r)>Math.PI&&(_u+=_r<_u?-2*Math.PI:2*Math.PI),Math.abs(_n-_f)>Math.PI&&(_f+=_n<_f?-2*Math.PI:2*Math.PI)),$.push(_u),j.push(_f),_t.push(_a)}return[_t,$,j]}}]),o}();function calcFitness(e,o){return o/e}function getAngleForSegment(e,o){var h=Vector$1.sub(o,e);return Vector$1.angle(h)}function getTextAngleForSegment(e,o){return-getAngleForSegment(e,o)}function getLineLengths(e){for(var o=[],h=0;h<e.length-1;h++){var d=e[h],g=e[h+1],_=Math.hypot(d[0]-g[0],d[1]-g[1]);o.push(_)}return o}function getAbsAngleDiff(e,o){for(var h,d=o<e?(h=o,e):(h=e,o);d-h>Math.PI;)h+=2*Math.PI;return Math.abs(d-h)}var TextStyle=Object.create(Points);Object.assign(TextStyle,{name:"text",super:Points,built_in:!0,init:function(e){var o=0<arguments.length&&e!==void 0?e:{};Style.init.call(this,o),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!1,this.defines.TANGRAM_IS_TEXT_STYLE=!0,this.reset()},makeVertexTemplate:function(e,o){this.super.makeVertexTemplate.apply(this,arguments);var h=o.vertex_data.vertex_layout;return this.fillVertexTemplate(h,"a_pre_angles",0,{size:4}),this.fillVertexTemplate(h,"a_offsets",0,{size:4}),this.fillVertexTemplate(h,"a_angles",0,{size:4}),this.fillVertexTemplate(h,"a_offsets_alt",0,{size:4}),this.fillVertexTemplate(h,"a_pre_angles_alt",0,{size:4}),this.fillVertexTemplate(h,"a_angles_alt",0,{size:4}),this.vertex_template},reset:function(){this.queues={},this.resetText()},addFeature:function(e,o,h){var d=this,g=h.tile,_=e.geometry.type;o.can_articulate=_==="LineString"||_==="MultiLineString",o.supersample_text=_==="LineString"||_==="MultiLineString";var $=this.parseTextFeature(e,o,h,g);$&&($ instanceof Array?$.forEach(function(j){j.feature=e,j.context=h,j.layout.vertex=!1,d.queueFeature(j,g)}):($.feature=e,$.context=h,$.layout.vertex=!1,this.queueFeature($,g)),Collision.addStyle(this.name,g.id))},endData:function(e){var o=this,h=this.queues[e.id];return delete this.queues[e.id],this.collideAndRenderTextLabels(e,this.name,h).then(function(d){var g=d.labels,_=d.texts;return g&&_&&(o.texts[e.id]=_,g.forEach(function($){var j=$.text_settings_key,_t=o.texts[e.id][j]&&o.texts[e.id][j][$.text],_e=o.feature_style;_e.label=$.label,$.label.text_data={text_info:_t,text_settings_key:j,text:$.text},_e.label_texture=o.textureManager.default,_t.text_settings.can_articulate?(_e.size={},$.label.type==="straight"?_e.size.straight=_t.size.logical_size:_e.size.curved=_t.segment_sizes.map(function(_r){return _r.logical_size})):_e.size=_t.size.logical_size,Style.addFeature.call(o,$.feature,$.draw,$.context)})),o.freeText(e),Style.endData.call(o,e).then(function($){if($){for(var j in $.meshes)$.meshes[j].uniforms.u_apply_color_blocks=!0;e.mesh_data[o.name]=$}return $})})},_preprocess:function(e){return this.preprocessText(e)},buildTextLabels:function(e,o){for(var h=[],d=0;d<o.length;d++){var g,_=o[d],$=this.texts[e.id][_.text_settings_key][_.text],j=void 0;_.layout.vertical_buffer=$.vertical_buffer,j=$.text_settings.can_articulate?(g=$.segment_sizes.map(function(_r){return _r.collision_size}),_.layout.no_curving=$.no_curving,this.buildLabels(g,_.feature.geometry,_.layout,$.size.collision_size)):this.buildLabels($.size.collision_size,_.feature.geometry,_.layout);for(var _t=0;_t<j.length;_t++){var _e=Object.create(_);_e.label=j[_t],h.push(_e)}}return h},buildLabels:function(e,o,h,d){var g,_,$=o.type!=="Point",j=[];if(o.type==="LineString")Array.prototype.push.apply(j,this.buildLineLabels(o.coordinates,e,$,h,d));else if(o.type==="MultiLineString")for(var _t=o.coordinates,_e=0;_e<_t.length;++_e)Array.prototype.push.apply(j,this.buildLineLabels(_t[_e],e,$,h,d));else if(o.type==="Point")j.push(new LabelPoint(o.coordinates,e,$,h));else if(o.type==="MultiPoint")for(var _r=o.coordinates,_n=0;_n<_r.length;++_n)j.push(new LabelPoint(_r[_n],e,$,h));else o.type==="Polygon"?(g=Geo$1.centroid(o.coordinates),j.push(new LabelPoint(g,e,$,h))):o.type==="MultiPolygon"&&(_=Geo$1.multiCentroid(o.coordinates),j.push(new LabelPoint(_,e,$,h)));return j},buildLineLabels:function(e,o,h,d,g){var _,$=[],j=Math.min(d.subdiv,e.length-1);if(1<j)for(var _t=(e.length-1)/j,_e=0;_e<j;_e++){var _r=Math.floor(_e*_t),_n=Math.floor((_e+1)*_t)+1,_i=e.slice(_r,_n),_o=LabelLine.create(o,g,_i,h,d);_o&&$.push(_o)}return $.length<j&&(_=LabelLine.create(o,g,e,h,d))&&$.push(_),$},vertexLayoutForMeshVariant:function(){var e;return this.vertex_layout||(e=[{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_shape",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:gl$1.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:gl$1.SHORT,normalized:!1},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_angles",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_offsets",size:4,type:gl$1.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles",size:4,type:gl$1.BYTE,normalized:!1},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_offsets_alt",size:4,type:gl$1.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles_alt",size:4,type:gl$1.BYTE,normalized:!1},{name:"a_angles_alt",size:4,type:gl$1.SHORT,normalized:!1}],this.vertex_layout=new VertexLayout(e)),this.vertex_layout},getMeshVariantTypeForDraw:Points.getMeshVariantTypeForDraw}),TextStyle.texture_id=0;var RasterStyle=Object.create(Polygons);Object.assign(RasterStyle,{name:"raster",super:Polygons,built_in:!0,init:function(){this.raster=this.raster||"color",this.super.init.apply(this,arguments),this.selection=!1,this.defines.SNAP_TO_PIXEL_GRID=!0},_preprocess:function(e){return e.color=e.color||StyleParser.defaults.color,this.super._preprocess.apply(this,arguments)}});var CustomIcons=Object.create(Points);Object.assign(CustomIcons,{name:"custom_icons",collision:!1,init:function(e){var o=0<arguments.length&&e!==void 0?e:{};Points.init.call(this,o)},loadTexture:function(e,o,h){var d,g=e.width,_=e.height,$=e.items,j=document.createElement("canvas"),_t=Utils$1.device_pixel_ratio,_e=this.sources[o],_r={sprites:{}};if(j.width=g*_t,j.height=_*_t,_e){var _n,_i=$.length,_o=j.getContext("2d");for(_o.scale(_t,_t);_n=$[--_i];){var _a,_u=_e.getIconBitmapByObjectId(_n.meta.objectId,_n.meta.id);_u&&((_a=isTainting(_u))?log("error",_a):(_o.drawImage(_u,_n.x,_n.y,_n.width,_n.height),_r.sprites[_n.meta.id]=[_n.x,_n.y,_n.width,_n.height]))}}return _r.element=j,(d=this.textureManager.create(this.gl,h,_r)).retain(),d.loading.then(function(_f){return _f.name})},buildRasterTextures:function(e,o){return WorkerBroker.postMessage(this.main_thread_target+".loadTexture",e.rasters,e.source,e.texture_name).then(function(h){return o.textures.push(h),o})},addFeature:function(e,o,h){var d=h.tile.rasters,g={};d.items.forEach(function(j){g[j.meta.id]=[j.x,j.y,j.width,j.height]});var _="".concat(h.tile.source,"_dyn_").concat(h.tile.coords.key,"_").concat(this.generation,"_").concat(h.tile.id);o.texture=h.tile.texture_name=_;var $=Object.assign({},DEFAULT_TEXTURE_INFO,{name:_,width:d.width,height:d.height,sprites:g,manager:this.textureManager});Texture.prototype.calculateSprites.apply($),this.textureManager.textures[_]=$,Points.addFeature.apply(this,arguments),delete this.textureManager.textures[_]}});var DEFAULT_TEXTURE_INFO={filtering:"linear",density:1,valid:!0,power_of_2:!1,texcoords:{},sizes:{},css_sizes:{},aspects:{}},OverlayStyle=Object.create(Polygons);Object.assign(OverlayStyle,{name:"overlays",super:Polygons,init:function(e){var o=0<arguments.length&&e!==void 0?e:{};this.selection=o.selection||!0,this.raster=this.raster||"color",this.super.init.apply(this,arguments)},setupRasters:function(){if(!Thread.is_main)return!1;if(this.super.setupRasters.call(this))return!0;var e=!1;for(var o in this.sources)if(this.sources[o]instanceof ObjectSource){e=!0;break}return!!e&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",shaderSrc_rasters,"Raster"),!0)},loadTextures:function(e,o){var h,d,g,_=this.sources[o],$=e.name;if(e.overlays_config.forEach(function(_e){var _r,_n=_e.texcoords,_i=_e.id,_o=_.getMapObjectById(_i),_a=_o.getBitmap();_a&&((_r=isTainting(_a=bitmapToCanvas(_a,_a.width,_a.height)))?log("error",_r):(h||((h=document.createElement("canvas")).width=e.width,h.height=e.height,d=h.getContext("2d")),d.save(),d.globalAlpha=_o.getOpacity(),_n.forEach(function(_u){return d.drawImage(_a,_u[0],_u[1],_u[2],_u[3])}),d.restore(),g=!0))}),g){e.element=h;var j={};return j[$]=e,this.super.loadTextures.call(this,j)}var _t=this.textureManager.textures[this.textureManager.default];return Promise.resolve([{name:_t.name,width:_t.width,height:_t.height,loaded:_t.loaded}])},buildRasterTextures:function(e,o){var h=this.sources[e.source].tileTexture(e);return h?WorkerBroker.postMessage(this.main_thread_target+".loadTextures",h,e.source).then(function(d){if(!d||d.length<1)return o;if(d.some(function(_){return!_.loaded}))return null;var g=d[0].name;return o.uniforms=o.uniforms||{},o.textures=o.textures||[],o.uniforms.u_raster=g,o.uniforms.u_raster_offset=[0,0,1],o.textures.push(g),o}):Promise.resolve(o)}});var shaderSrc_Vertex="uniform float u_horizon;uniform float u_tilt;uniform float u_zoom;attribute vec2 a_position;attribute float a_is_sky;attribute float a_is_top;attribute vec4 a_color;varying vec4 v_color;const float SIN_THRESHOLD_ANGLE=0.96126069082;void main(){v_color=a_color;float sin_tilt=sin(u_tilt);float sky_bottom_alpha=1.-max(sin_tilt-SIN_THRESHOLD_ANGLE,0.)*3.;if((a_position.y==1.&&a_is_sky==0.)||(a_position.y==0.&&a_is_sky==1.)){v_color.w=sky_bottom_alpha;}float fog_height=max((22.-u_zoom)*0.04,0.)*(sin_tilt-.7);float position_z=u_zoom<17. ? .942 : .9418;gl_Position=vec4(a_position.x,a_is_sky*(a_position.y+a_is_top)+1.0-u_horizon-(1.0-a_is_sky)*(1.0-a_position.y)*fog_height,position_z,1.0);}",shaderSrc_Fragment="varying vec4 v_color;void main(void){gl_FragColor=v_color;}",STYLE_NAME="skybox",SkyBox=Object.create(Style),positions=[-1,0,1,0,-1,1,-1,1,1,0,1,1,-1,0,1,0,-1,1,-1,1,1,0,1,1];Object.assign(SkyBox,{name:STYLE_NAME,built_in:!0,vertex_shader_src:shaderSrc_Vertex,fragment_shader_src:shaderSrc_Fragment,selection:!1,blend:"inlay",blend_order:1,init:function(){Style.init.apply(this,arguments),this.selection=!1},_preprocess:function(e){return e.color={top:StyleParser.createColorPropertyCache(e.color.zenith),bottom:StyleParser.createColorPropertyCache(e.color.horizon),fog:StyleParser.createColorPropertyCache(e.color.fog)},e},vertexLayoutForMeshVariant:function(){var e;return this.vertex_layout||(e=[{name:"a_position",size:2,type:gl$1.FLOAT,normalized:!1},{name:"a_is_sky",size:1,type:gl$1.FLOAT,normalized:!0},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_is_top",size:1,type:gl$1.FLOAT,normalized:!0}],this.vertex_layout=new VertexLayout(e)),this.vertex_layout},makeVertexTemplate:function(){var e=0;return this.vertex_template[e++]=0,this.vertex_template[1]=0,this.vertex_template},parseFeature:function(e,o,h){var d=this.feature_style;return o.color&&o.color.top&&o.color.bottom&&(d.color_top=this.parseColor(o.color.top,h),d.color_bottom=this.parseColor(o.color.bottom,h),d.color_fog=this.parseColor(o.color.fog||"white",h),Array.isArray(d.color_fog)&&(d.color_fog=d.color_fog.slice(),d.color_fog[3]=0)),d},buildGeometry:function(e,o,h){for(var d=this.makeVertexTemplate(o),g=h.vertex_data,_=h.vertex_data.vertex_layout,$=g.vertex_layout.index.a_position,j={top:o.color_top,bottom:o.color_bottom},_t={top:o.color_bottom,bottom:o.color_fog},_e=0,_r=positions.length-1;_e<_r;_e+=2){d[$+0]=positions[_e],d[$+1]=positions[_e+1];var _n=_e<12,_i=0<positions[_e+1],_o=_n?j:_t;this.fillVertexTemplate(_,"a_is_sky",_n?1:0,{size:1}),this.fillVertexTemplate(_,"a_is_top",_i?1:0,{size:1}),this.fillVertexTemplate(_,"a_color",Vector$1.mult(_i?_o.top:_o.bottom,255),{size:4}),g.addVertex(d)}return 4}});var shaderSrc_accessors=`#ifdef TANGRAM_VERTEX_SHADER
vec4 modelPosition(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE*exp2(u_tile_origin.z-u_tile_origin.w),1.)+vec4(0.,1.,0.,0.);}vec4 modelPositionBaseZoom(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE,1.)+vec4(0.,1.,0.,0.);}
#endif
vec4 worldPosition(){return v_world_position;}
#ifdef TANGRAM_VERTEX_SHADER
vec4 wrapWorldPosition(vec4 world_position){
#if defined(TANGRAM_WORLD_POSITION_WRAP)
vec2 anchor=u_tile_origin.xy-mod(u_tile_origin.xy,TANGRAM_WORLD_POSITION_WRAP);world_position.xy-=anchor;
#endif
return world_position;}
#endif
#if defined(TANGRAM_VERTEX_SHADER)
vec3 worldNormal(){return TANGRAM_NORMAL;}
#elif defined(TANGRAM_FRAGMENT_SHADER)
vec3 worldNormal(){return u_inverseNormalMatrix*TANGRAM_NORMAL;}
#endif
`,shaderSrc_layerOrder="void applyLayerOrder(float layer,inout vec4 position){position.z-=layer*TANGRAM_LAYER_DELTA*position.w;}",shaderSrc_selectionGlobals=`
#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)
attribute vec4 a_selection_color;varying vec4 v_selection_color;uniform vec4 u_selection_discard0;uniform vec4 u_selection_discard1;uniform vec4 u_selection_discard2;uniform vec4 u_selection_discard3;uniform vec4 u_selection_discard4;uniform vec4 u_selection_discard5;uniform vec4 u_selection_discard6;uniform vec4 u_selection_discard7;uniform vec4 u_selection_discard8;uniform vec4 u_selection_discard9;
#endif
`,shaderSrc_selectionVertex=`
#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)
if(a_selection_color.rgb==vec3(0.)||a_selection_color==u_selection_discard0||a_selection_color==u_selection_discard1||a_selection_color==u_selection_discard2||a_selection_color==u_selection_discard3||a_selection_color==u_selection_discard4||a_selection_color==u_selection_discard5||a_selection_color==u_selection_discard6||a_selection_color==u_selection_discard7||a_selection_color==u_selection_discard8||a_selection_color==u_selection_discard9){gl_Position=vec4(0.,0.,0.,1.);return;}v_selection_color=a_selection_color;
#endif
`,shaderSrc_utils=`#ifndef UTILS
#define UTILS
bool isLocalSpacePixelOutsideTile(vec4 pixel_local_space_position,float tile_scale){return pixel_local_space_position.x<0.||pixel_local_space_position.x>=tile_scale||pixel_local_space_position.y>0.||pixel_local_space_position.y<=-tile_scale;}
#endif
`,shaderSrc_snapToPixelGrid=`uniform float u_view_pan_snap_timer;void snapToPixelGrid(inout vec4 position){vec2 position_fract=fract((((position.xy/position.w)+1.)*.5)*u_resolution);vec2 position_snap=position.xy+((step(0.5,position_fract)-position_fract)*position.w*2./u_resolution);
#ifdef TANGRAM_VIEW_PAN_SNAP_RATE
position.xy=mix(position.xy,position_snap,clamp(u_view_pan_snap_timer*TANGRAM_VIEW_PAN_SNAP_RATE,0.,1.));
#else
position.xy=position_snap;
#endif
}`,StyleManager=function(){function e(){_classCallCheck(this,e),this.styles={},this.base_styles={},this.register(Object.create(Polygons)),this.register(Object.create(Lines)),this.register(Object.create(PatternLines)),this.register(Object.create(Points)),this.register(Object.create(TextStyle)),this.register(Object.create(RasterStyle)),this.register(Object.create(CustomIcons)),this.register(Object.create(OverlayStyle)),this.register(Object.create(SkyBox))}return _createClass(e,[{key:"init",value:function(){ShaderProgram.removeBlock("global"),ShaderProgram.removeBlock("setup"),ShaderProgram.addBlock("global",shaderSrc_accessors),ShaderProgram.addBlock("global",shaderSrc_layerOrder),ShaderProgram.addBlock("global",shaderSrc_selectionGlobals),ShaderProgram.addBlock("global",shaderSrc_snapToPixelGrid),ShaderProgram.replaceBlock("utils",shaderSrc_utils),ShaderProgram.replaceBlock("setup",shaderSrc_selectionVertex),ShaderProgram.defines.TANGRAM_EPSILON=1e-5,ShaderProgram.defines.TANGRAM_LAYER_DELTA=1/16384,ShaderProgram.defines.TANGRAM_TILE_SCALE="vec3(".concat(Geo$1.tile_scale,"., ").concat(Geo$1.tile_scale,"., u_meters_per_pixel * ").concat(Geo$1.tile_size,".)"),ShaderProgram.defines.TANGRAM_HEIGHT_SCALE=Geo$1.height_scale,ShaderProgram.defines.TANGRAM_ALPHA_TEST=.1,Lines.dash_textures={}}},{key:"destroy",value:function(o){var h=this;Object.keys(this.styles).forEach(function(d){var g=h.styles[d];g.gl===o&&(log("trace","StyleManager.destroy: destroying render style ".concat(g.name)),g.base&&h.remove(g.name),g.destroy())})}},{key:"register",value:function(o){this.styles[o.name]=o,this.base_styles[o.name]=o}},{key:"remove",value:function(o){delete this.styles[o]}},{key:"mix",value:function(o,h){if(o.mixed)return o;o.mixed={};var d=[];o.mix&&(Array.isArray(o.mix)?d.push.apply(d,_toConsumableArray(o.mix)):d.push(o.mix),(d=d.map(function(_){return h[_]}).filter(function(_){return _&&_!==o})).forEach(function(_){return o.mixed[_.name]=!0})),d.push(o),o.animated=d.some(function(_){return _&&_.animated}),o.texcoords=d.some(function(_){return _&&_.texcoords}),o.base=d.map(function(_){return _.base}).filter(function(_){return _}).pop(),o.lighting=d.map(function(_){return _.lighting}).filter(function(_){return _!=null}).pop(),o.texture=d.map(function(_){return _.texture}).filter(function(_){return _}).pop(),o.raster=d.map(function(_){return _.raster}).filter(function(_){return _!=null}).pop(),o.dash=d.map(function(_){return _.dash}).filter(function(_){return _!=null}).pop(),o.dash_background_color=d.map(function(_){return _.dash_background_color}).filter(function(_){return _!=null}).pop(),d.some(function(_){return _.hasOwnProperty("blend")&&_.blend})&&(o.blend=d.map(function(_){return _.hasOwnProperty("blend")&&_.blend}).filter(function(_){return _}).pop()),o.blend_order=d.map(function(_){return _.blend_order}).filter(function(_){return _!=null}).pop(),o.defines=Object.assign.apply(Object,[{}].concat(_toConsumableArray(d.map(function(_){return _.defines}).filter(function(_){return _})))),o.material=Object.assign.apply(Object,[{}].concat(_toConsumableArray(d.map(function(_){return _.material}).filter(function(_){return _}))));var g=d.map(function(_){return _.draw}).filter(function(_){return _});return 0<g.length&&(o.draw=mergeObjects.apply(void 0,[{}].concat(_toConsumableArray(g)))),this.mixShaders(o,h,d),o}},{key:"mixShaders",value:function(o,h,d){var g={},_=d.map(function(_r){return _r.shaders}).filter(function(_r){return _r});if(g.defines=Object.assign.apply(Object,[{}].concat(_toConsumableArray(_.map(function(_r){return _r.defines}).filter(function(_r){return _r})))),g.uniforms={},g._uniforms=o.shaders&&o.shaders.uniforms||{},g._uniform_scopes={},d.filter(function(_r){return _r.shaders&&_r.shaders.uniforms}).forEach(function(_r){for(var _n in _r.shaders.uniforms)(function(_i){g._uniform_scopes[_i]=_r.name,Object.defineProperty(g.uniforms,_i,{enumerable:!0,configurable:!0,get:function(){return g._uniforms[_i]!==void 0?g._uniforms[_i]:h[g._uniform_scopes[_i]].shaders.uniforms!==g.uniforms?h[g._uniform_scopes[_i]].shaders.uniforms[_i]:void 0},set:function(_o){g._uniforms[_i]=_o}})})(_n)}),g.extensions=Object.keys(_.map(function(_r){return _r.extensions}).filter(function(_r){return _r}).reduce(function(_r,_n){return typeof _n=="string"?_r[_n]=!0:_n.forEach(function(_i){return _r[_i]=!0}),_r},{})||{}),o.shaders&&o.shaders.blocks)for(var $ in o.shaders.block_scopes=o.shaders.block_scopes||{},o.shaders.blocks){var j,_t=o.shaders.blocks[$];o.shaders.block_scopes[$]=o.shaders.block_scopes[$]||[],Array.isArray(_t)?(j=o.shaders.block_scopes[$]).push.apply(j,_toConsumableArray(_t.map(function(){return o.name}))):o.shaders.block_scopes[$].push(o.name)}var _e={};return _.forEach(function(_r){if(_r.blocks){g.blocks=g.blocks||{},g.block_scopes=g.block_scopes||{};var _n={};for(var _i in _r.blocks){var _o=_r.blocks[_i],_a=_r.block_scopes[_i];g.blocks[_i]=g.blocks[_i]||[],g.block_scopes[_i]=g.block_scopes[_i]||[],_o=Array.isArray(_o)?_o:[_o],_a=Array.isArray(_a)?_a:[_a];for(var _u=0;_u<_o.length;_u++)_e[_a[_u]]||(_n[_a[_u]]=!0,g.blocks[_i].push(_o[_u]),g.block_scopes[_i].push(_a[_u]))}Object.assign(_e,_n)}}),Object.assign(o.mixed,_e),o.shaders=g,o}},{key:"create",value:function(o,h,d){var g=2<arguments.length&&d!==void 0?d:{},_=mergeObjects({},h);return _.name=o,(_=this.mix(_,g)).base&&this.base_styles[_.base]?this.styles[o]=_=Object.assign(Object.create(this.base_styles[_.base]),_):_.base=null,_}},{key:"build",value:function(o){var h=this,d=Object.keys(o).sort(function($,j){return h.inheritanceDepth($,o)-h.inheritanceDepth(j,o)});for(var g in this.styles)this.base_styles[g]?this.styles[g].reset():delete this.styles[g];var _={};return d.forEach(function($){_[$]=h.create($,o[$],_)}),this.styles}},{key:"initStyles",value:function(o){var h=0<arguments.length&&o!==void 0?o:{};for(var d in this.styles)this.styles[d].init(h)}},{key:"inheritanceDepth",value:function(o,h){for(var d=this,g=0;;){var _=h[o];if(!_||!_.mix)break;if(g++,Array.isArray(_.mix)){g+=Math.max.apply(Math,_toConsumableArray(_.mix.map(function($){if(o!==$)return d.inheritanceDepth($,h)})));break}if(o===_.mix)break;o=_.mix}return g}}]),e}();function isNothing(e){return e==null}function isObject$2(e){return typeof e=="object"&&e!==null}function toArray(e){return Array.isArray(e)?e:isNothing(e)?[]:[e]}function extend$1(e,o){var h,d,g,_;if(o)for(h=0,d=(_=Object.keys(o)).length;h<d;h+=1)e[g=_[h]]=o[g];return e}function repeat(e,o){for(var h="",d=0;d<o;d+=1)h+=e;return h}function isNegativeZero(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var isNothing_1=isNothing,isObject_1=isObject$2,toArray_1=toArray,repeat_1=repeat,isNegativeZero_1=isNegativeZero,extend_1=extend$1,common={isNothing:isNothing_1,isObject:isObject_1,toArray:toArray_1,repeat:repeat_1,isNegativeZero:isNegativeZero_1,extend:extend_1};function YAMLException(e,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name="YAMLException",this.reason=e,this.mark=o,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():"")}YAMLException.prototype=Object.create(Error.prototype),YAMLException.prototype.constructor=YAMLException,YAMLException.prototype.toString=function(e){var o=this.name+": ";return o+=this.reason||"(unknown reason)",!e&&this.mark&&(o+=" "+this.mark.toString()),o};var exception=YAMLException;function Mark(e,o,h,d,g){this.name=e,this.buffer=o,this.position=h,this.line=d,this.column=g}Mark.prototype.getSnippet=function(e,o){var h,d,g,_,$;if(!this.buffer)return null;for(e=e||4,o=o||75,h="",d=this.position;0<d&&`\0\r
\u2028\u2029`.indexOf(this.buffer.charAt(d-1))===-1;)if(--d,this.position-d>o/2-1){h=" ... ",d+=5;break}for(g="",_=this.position;_<this.buffer.length&&`\0\r
\u2028\u2029`.indexOf(this.buffer.charAt(_))===-1;)if((_+=1)-this.position>o/2-1){g=" ... ",_-=5;break}return $=this.buffer.slice(d,_),common.repeat(" ",e)+h+$+g+`
`+common.repeat(" ",e+this.position-d+h.length)+"^"},Mark.prototype.toString=function(e){var o,h="";return this.name&&(h+='in "'+this.name+'" '),h+="at line "+(this.line+1)+", column "+(this.column+1),e||(o=this.getSnippet())&&(h+=`:
`+o),h};var mark=Mark,TYPE_CONSTRUCTOR_OPTIONS=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],YAML_NODE_KINDS=["scalar","sequence","mapping"];function compileStyleAliases(e){var o={};return e!==null&&Object.keys(e).forEach(function(h){e[h].forEach(function(d){o[String(d)]=h})}),o}function Type(e,o){if(o=o||{},Object.keys(o).forEach(function(h){if(TYPE_CONSTRUCTOR_OPTIONS.indexOf(h)===-1)throw new exception('Unknown option "'+h+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=o.kind||null,this.resolve=o.resolve||function(){return!0},this.construct=o.construct||function(h){return h},this.instanceOf=o.instanceOf||null,this.predicate=o.predicate||null,this.represent=o.represent||null,this.defaultStyle=o.defaultStyle||null,this.styleAliases=compileStyleAliases(o.styleAliases||null),YAML_NODE_KINDS.indexOf(this.kind)===-1)throw new exception('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var type=Type;function compileList(e,o,h){var d=[];return e.include.forEach(function(g){h=compileList(g,o,h)}),e[o].forEach(function(g){h.forEach(function(_,$){_.tag===g.tag&&d.push($)}),h.push(g)}),h.filter(function(g,_){return d.indexOf(_)===-1})}function compileMap(){var e,o,h={};function d(g){h[g.tag]=g}for(e=0,o=arguments.length;e<o;e+=1)arguments[e].forEach(d);return h}function Schema(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(o){if(o.loadKind&&o.loadKind!=="scalar")throw new exception("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=compileList(this,"implicit",[]),this.compiledExplicit=compileList(this,"explicit",[]),this.compiledTypeMap=compileMap(this.compiledImplicit,this.compiledExplicit)}Schema.DEFAULT=null,Schema.create=function(e,o){var h,d;switch(arguments.length){case 1:h=Schema.DEFAULT,d=e;break;case 2:h=e,d=o;break;default:throw new exception("Wrong number of arguments for Schema.create function")}if(h=common.toArray(h),d=common.toArray(d),!h.every(function(g){return g instanceof Schema}))throw new exception("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!d.every(function(g){return g instanceof type}))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new Schema({include:h,explicit:d})};var schema=Schema,str=new type("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),seq=new type("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),map=new type("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),failsafe=new schema({explicit:[str,seq,map]});function resolveYamlNull(e){if(e===null)return!0;var o=e.length;return o===1&&e==="~"||o===4&&(e==="null"||e==="Null"||e==="NULL")}function constructYamlNull(){return null}function isNull$1(e){return e===null}var _null=new type("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull,construct:constructYamlNull,predicate:isNull$1,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"});function resolveYamlBoolean(e){if(e===null)return!1;var o=e.length;return o===4&&(e==="true"||e==="True"||e==="TRUE")||o===5&&(e==="false"||e==="False"||e==="FALSE")}function constructYamlBoolean(e){return e==="true"||e==="True"||e==="TRUE"}function isBoolean$1(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var bool=new type("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean,construct:constructYamlBoolean,predicate:isBoolean$1,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function isHexCode(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function isOctCode(e){return 48<=e&&e<=55}function isDecCode(e){return 48<=e&&e<=57}function resolveYamlInteger(e){if(e===null)return!1;var o,h=e.length,d=0,g=!1;if(!h)return!1;if((o=e[d])!=="-"&&o!=="+"||(o=e[++d]),o==="0"){if(d+1===h)return!0;if((o=e[++d])==="b"){for(d++;d<h;d++)if((o=e[d])!=="_"){if(o!=="0"&&o!=="1")return!1;g=!0}return g}if(o==="x"){for(d++;d<h;d++)if((o=e[d])!=="_"){if(!isHexCode(e.charCodeAt(d)))return!1;g=!0}return g}for(;d<h;d++)if((o=e[d])!=="_"){if(!isOctCode(e.charCodeAt(d)))return!1;g=!0}return g}for(;d<h;d++)if((o=e[d])!=="_"){if(o===":")break;if(!isDecCode(e.charCodeAt(d)))return!1;g=!0}return!!g&&(o!==":"||/^(:[0-5]?[0-9])+$/.test(e.slice(d)))}function constructYamlInteger(e){var o,h,d=e,g=1,_=[];return d.indexOf("_")!==-1&&(d=d.replace(/_/g,"")),(o=d[0])!=="-"&&o!=="+"||(o==="-"&&(g=-1),o=(d=d.slice(1))[0]),d==="0"?0:o==="0"?d[1]==="b"?g*parseInt(d.slice(2),2):d[1]==="x"?g*parseInt(d,16):g*parseInt(d,8):d.indexOf(":")!==-1?(d.split(":").forEach(function($){_.unshift(parseInt($,10))}),d=0,h=1,_.forEach(function($){d+=$*h,h*=60}),g*d):g*parseInt(d,10)}function isInteger(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1==0&&!common.isNegativeZero(e)}var int_1=new type("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger,construct:constructYamlInteger,predicate:isInteger,represent:{binary:function(e){return"0b"+e.toString(2)},octal:function(e){return"0"+e.toString(8)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return"0x"+e.toString(16).toUpperCase()}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?|\\.[0-9_]+(?:[eE][-+][0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function resolveYamlFloat(e){return e!==null&&!!YAML_FLOAT_PATTERN.test(e)}function constructYamlFloat(e){var o,h=e.replace(/_/g,"").toLowerCase(),d=h[0]==="-"?-1:1,g=[];return 0<="+-".indexOf(h[0])&&(h=h.slice(1)),h===".inf"?d==1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:h===".nan"?NaN:0<=h.indexOf(":")?(h.split(":").forEach(function(_){g.unshift(parseFloat(_,10))}),h=0,o=1,g.forEach(function(_){h+=_*o,o*=60}),d*h):d*parseFloat(h,10)}var SCIENTIFIC_WITHOUT_DOT=/^[-+]?[0-9]+e/;function representYamlFloat(e,o){var h;if(isNaN(e))switch(o){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(o){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(o){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common.isNegativeZero(e))return"-0.0";return h=e.toString(10),SCIENTIFIC_WITHOUT_DOT.test(h)?h.replace("e",".e"):h}function isFloat(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!=0||common.isNegativeZero(e))}var float_1$1=new type("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat,construct:constructYamlFloat,predicate:isFloat,represent:representYamlFloat,defaultStyle:"lowercase"}),json=new schema({include:[failsafe],implicit:[_null,bool,int_1,float_1$1]}),core=new schema({include:[json]}),YAML_TIMESTAMP_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?)?$");function resolveYamlTimestamp(e){return e!==null&&YAML_TIMESTAMP_REGEXP.exec(e)!==null}function constructYamlTimestamp(e){var o,h,d,g,_,$,j,_t=0,_e=null,_r=YAML_TIMESTAMP_REGEXP.exec(e);if(_r===null)throw new Error("Date resolve error");if(o=+_r[1],h=_r[2]-1,d=+_r[3],!_r[4])return new Date(Date.UTC(o,h,d));if(g=+_r[4],_=+_r[5],$=+_r[6],_r[7]){for(_t=_r[7].slice(0,3);_t.length<3;)_t+="0";_t=+_t}return _r[9]&&(_e=6e4*(60*+_r[10]+ +(_r[11]||0)),_r[9]==="-"&&(_e=-_e)),j=new Date(Date.UTC(o,h,d,g,_,$,_t)),_e&&j.setTime(j.getTime()-_e),j}function representYamlTimestamp(e){return e.toISOString()}var timestamp=new type("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp,construct:constructYamlTimestamp,instanceOf:Date,represent:representYamlTimestamp});function resolveYamlMerge(e){return e==="<<"||e===null}var merge=new type("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge}),NodeBuffer=bufferEs6.Buffer,BASE64_MAP=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function resolveYamlBinary(e){if(e===null)return!1;for(var o,h=0,d=e.length,g=BASE64_MAP,_=0;_<d;_++)if(!(64<(o=g.indexOf(e.charAt(_))))){if(o<0)return!1;h+=6}return h%8==0}function constructYamlBinary(e){for(var o,h=e.replace(/[\r\n=]/g,""),d=h.length,g=BASE64_MAP,_=0,$=[],j=0;j<d;j++)j%4==0&&j&&($.push(_>>16&255),$.push(_>>8&255),$.push(255&_)),_=_<<6|g.indexOf(h.charAt(j));return(o=d%4*6)==0?($.push(_>>16&255),$.push(_>>8&255),$.push(255&_)):o==18?($.push(_>>10&255),$.push(_>>2&255)):o==12&&$.push(_>>4&255),NodeBuffer?new NodeBuffer($):$}function representYamlBinary(e){for(var o,h="",d=0,g=e.length,_=BASE64_MAP,$=0;$<g;$++)$%3==0&&$&&(h+=_[d>>18&63],h+=_[d>>12&63],h+=_[d>>6&63],h+=_[63&d]),d=(d<<8)+e[$];return(o=g%3)==0?(h+=_[d>>18&63],h+=_[d>>12&63],h+=_[d>>6&63],h+=_[63&d]):o==2?(h+=_[d>>10&63],h+=_[d>>4&63],h+=_[d<<2&63],h+=_[64]):o==1&&(h+=_[d>>2&63],h+=_[d<<4&63],h+=_[64],h+=_[64]),h}function isBinary(e){return NodeBuffer&&NodeBuffer.isBuffer(e)}var binary=new type("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary,construct:constructYamlBinary,predicate:isBinary,represent:representYamlBinary}),_hasOwnProperty=Object.prototype.hasOwnProperty,_toString=Object.prototype.toString;function resolveYamlOmap(e){if(e===null)return!0;for(var o,h,d,g=[],_=e,$=0,j=_.length;$<j;$+=1){if(o=_[$],d=!1,_toString.call(o)!=="[object Object]")return!1;for(h in o)if(_hasOwnProperty.call(o,h)){if(d)return!1;d=!0}if(!d||g.indexOf(h)!==-1)return!1;g.push(h)}return!0}function constructYamlOmap(e){return e!==null?e:[]}var omap=new type("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap,construct:constructYamlOmap}),_toString$1=Object.prototype.toString;function resolveYamlPairs(e){if(e===null)return!0;for(var o,h,d=e,g=new Array(d.length),_=0,$=d.length;_<$;_+=1){if(o=d[_],_toString$1.call(o)!=="[object Object]"||(h=Object.keys(o)).length!==1)return!1;g[_]=[h[0],o[h[0]]]}return!0}function constructYamlPairs(e){if(e===null)return[];for(var o,h,d=e,g=new Array(d.length),_=0,$=d.length;_<$;_+=1)o=d[_],h=Object.keys(o),g[_]=[h[0],o[h[0]]];return g}var pairs=new type("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs,construct:constructYamlPairs}),_hasOwnProperty$1=Object.prototype.hasOwnProperty;function resolveYamlSet(e){if(e===null)return!0;var o,h=e;for(o in h)if(_hasOwnProperty$1.call(h,o)&&h[o]!==null)return!1;return!0}function constructYamlSet(e){return e!==null?e:{}}var set$2=new type("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet,construct:constructYamlSet}),default_safe=new schema({include:[core],implicit:[timestamp,merge],explicit:[binary,omap,pairs,set$2]});function resolveJavascriptUndefined(){return!0}function constructJavascriptUndefined(){}function representJavascriptUndefined(){return""}function isUndefined$1(e){return e===void 0}var _undefined=new type("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:resolveJavascriptUndefined,construct:constructJavascriptUndefined,predicate:isUndefined$1,represent:representJavascriptUndefined});function resolveJavascriptRegExp(e){if(e===null||e.length===0)return!1;var o=e,h=/\/([gim]*)$/.exec(e),d="";return!(o[0]==="/"&&(h&&(d=h[1]),3<d.length||o[o.length-d.length-1]!=="/"))}function constructJavascriptRegExp(e){var o=e,h=/\/([gim]*)$/.exec(e),d="";return o[0]==="/"&&(h&&(d=h[1]),o=o.slice(1,o.length-d.length-1)),new RegExp(o,d)}function representJavascriptRegExp(e){var o="/"+e.source+"/";return e.global&&(o+="g"),e.multiline&&(o+="m"),e.ignoreCase&&(o+="i"),o}function isRegExp$1(e){return Object.prototype.toString.call(e)==="[object RegExp]"}var regexp=new type("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:resolveJavascriptRegExp,construct:constructJavascriptRegExp,predicate:isRegExp$1,represent:representJavascriptRegExp}),esprima;try{var _require=commonjsRequire,esprima=_require("esprima")}catch(e){typeof window<"u"&&(esprima=window.esprima)}function resolveJavascriptFunction(e){if(e===null)return!1;try{var o="("+e+")",h=esprima.parse(o,{range:!0});return!(h.type!=="Program"||h.body.length!==1||h.body[0].type!=="ExpressionStatement"||h.body[0].expression.type!=="FunctionExpression")}catch{return!1}}function constructJavascriptFunction(e){var o,h="("+e+")",d=esprima.parse(h,{range:!0}),g=[];if(d.type!=="Program"||d.body.length!==1||d.body[0].type!=="ExpressionStatement"||d.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return d.body[0].expression.params.forEach(function(_){g.push(_.name)}),o=d.body[0].expression.body.range,new Function(g,h.slice(o[0]+1,o[1]-1))}function representJavascriptFunction(e){return e.toString()}function isFunction$1(e){return Object.prototype.toString.call(e)==="[object Function]"}var _function=new type("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:resolveJavascriptFunction,construct:constructJavascriptFunction,predicate:isFunction$1,represent:representJavascriptFunction}),default_full=schema.DEFAULT=new schema({include:[default_safe],explicit:[_undefined,regexp,_function]}),_hasOwnProperty$2=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN=1,CONTEXT_FLOW_OUT=2,CONTEXT_BLOCK_IN=3,CONTEXT_BLOCK_OUT=4,CHOMPING_CLIP=1,CHOMPING_STRIP=2,CHOMPING_KEEP=3,PATTERN_NON_PRINTABLE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function is_EOL(e){return e===10||e===13}function is_WHITE_SPACE(e){return e===9||e===32}function is_WS_OR_EOL(e){return e===9||e===32||e===10||e===13}function is_FLOW_INDICATOR(e){return e===44||e===91||e===93||e===123||e===125}function fromHexCode(e){var o;return 48<=e&&e<=57?e-48:97<=(o=32|e)&&o<=102?o-97+10:-1}function escapedHexLen(e){return e===120?2:e===117?4:e===85?8:0}function fromDecimalCode(e){return 48<=e&&e<=57?e-48:-1}function simpleEscapeSequence(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}function charFromCodepoint(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var simpleEscapeCheck=new Array(256),simpleEscapeMap=new Array(256),i=0;i<256;i++)simpleEscapeCheck[i]=simpleEscapeSequence(i)?1:0,simpleEscapeMap[i]=simpleEscapeSequence(i);function State$1(e,o){this.input=e,this.filename=o.filename||null,this.schema=o.schema||default_full,this.onWarning=o.onWarning||null,this.legacy=o.legacy||!1,this.json=o.json||!1,this.listener=o.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function generateError(e,o){return new exception(o,new mark(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function throwError(e,o){throw generateError(e,o)}function throwWarning(e,o){e.onWarning&&e.onWarning.call(null,generateError(e,o))}var directiveHandlers={YAML:function(e,o,h){var d,g,_;e.version!==null&&throwError(e,"duplication of %YAML directive"),h.length!==1&&throwError(e,"YAML directive accepts exactly one argument"),(d=/^([0-9]+)\.([0-9]+)$/.exec(h[0]))===null&&throwError(e,"ill-formed argument of the YAML directive"),g=parseInt(d[1],10),_=parseInt(d[2],10),g!==1&&throwError(e,"unacceptable YAML version of the document"),e.version=h[0],e.checkLineBreaks=_<2,_!==1&&_!==2&&throwWarning(e,"unsupported YAML version of the document")},TAG:function(e,o,h){var d,g;h.length!==2&&throwError(e,"TAG directive accepts exactly two arguments"),d=h[0],g=h[1],PATTERN_TAG_HANDLE.test(d)||throwError(e,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$2.call(e.tagMap,d)&&throwError(e,'there is a previously declared suffix for "'+d+'" tag handle'),PATTERN_TAG_URI.test(g)||throwError(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[d]=g}};function captureSegment(e,o,h,d){var g,_,$,j;if(o<h){if(j=e.input.slice(o,h),d)for(g=0,_=j.length;g<_;g+=1)($=j.charCodeAt(g))===9||32<=$&&$<=1114111||throwError(e,"expected valid JSON character");else PATTERN_NON_PRINTABLE.test(j)&&throwError(e,"the stream contains non-printable characters");e.result+=j}}function mergeMappings(e,o,h,d){var g,_,$,j;for(common.isObject(h)||throwError(e,"cannot merge mappings; the provided source object is unacceptable"),$=0,j=(g=Object.keys(h)).length;$<j;$+=1)_=g[$],_hasOwnProperty$2.call(o,_)||(o[_]=h[_],d[_]=!0)}function storeMappingPair(e,o,h,d,g,_){var $,j;if(g=String(g),o===null&&(o={}),d==="tag:yaml.org,2002:merge")if(Array.isArray(_))for($=0,j=_.length;$<j;$+=1)mergeMappings(e,o,_[$],h);else mergeMappings(e,o,_,h);else e.json||_hasOwnProperty$2.call(h,g)||!_hasOwnProperty$2.call(o,g)||throwError(e,"duplicated mapping key"),o[g]=_,delete h[g];return o}function readLineBreak(e){var o=e.input.charCodeAt(e.position);o===10?e.position++:o===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):throwError(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function skipSeparationSpace(e,o,h){for(var d=0,g=e.input.charCodeAt(e.position);g!==0;){for(;is_WHITE_SPACE(g);)g=e.input.charCodeAt(++e.position);if(o&&g===35)for(;(g=e.input.charCodeAt(++e.position))!==10&&g!==13&&g!==0;);if(!is_EOL(g))break;for(readLineBreak(e),g=e.input.charCodeAt(e.position),d++,e.lineIndent=0;g===32;)e.lineIndent++,g=e.input.charCodeAt(++e.position)}return h!==-1&&d!==0&&e.lineIndent<h&&throwWarning(e,"deficient indentation"),d}function testDocumentSeparator(e){var o=e.position,h=e.input.charCodeAt(o);return h!==45&&h!==46||h!==e.input.charCodeAt(o+1)||h!==e.input.charCodeAt(o+2)||(o+=3,(h=e.input.charCodeAt(o))!==0&&!is_WS_OR_EOL(h))?void 0:1}function writeFoldedLines(e,o){o===1?e.result+=" ":1<o&&(e.result+=common.repeat(`
`,o-1))}function readPlainScalar(e,o,h){var d,g,_,$,j,_t,_e,_r=e.kind,_n=e.result,_i=e.input.charCodeAt(e.position);if(!is_WS_OR_EOL(_i)&&!is_FLOW_INDICATOR(_i)&&_i!==35&&_i!==38&&_i!==42&&_i!==33&&_i!==124&&_i!==62&&_i!==39&&_i!==34&&_i!==37&&_i!==64&&_i!==96&&(_i!==63&&_i!==45||!(is_WS_OR_EOL(d=e.input.charCodeAt(e.position+1))||h&&is_FLOW_INDICATOR(d)))){for(e.kind="scalar",e.result="",g=_=e.position,$=!1;_i!==0;){if(_i===58){if(is_WS_OR_EOL(d=e.input.charCodeAt(e.position+1))||h&&is_FLOW_INDICATOR(d))break}else if(_i===35){if(is_WS_OR_EOL(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&testDocumentSeparator(e)||h&&is_FLOW_INDICATOR(_i))break;if(is_EOL(_i)){if(j=e.line,_t=e.lineStart,_e=e.lineIndent,skipSeparationSpace(e,!1,-1),e.lineIndent>=o){$=!0,_i=e.input.charCodeAt(e.position);continue}e.position=_,e.line=j,e.lineStart=_t,e.lineIndent=_e;break}}$&&(captureSegment(e,g,_,!1),writeFoldedLines(e,e.line-j),g=_=e.position,$=!1),is_WHITE_SPACE(_i)||(_=e.position+1),_i=e.input.charCodeAt(++e.position)}if(captureSegment(e,g,_,!1),e.result)return 1;e.kind=_r,e.result=_n}}function readSingleQuotedScalar(e,o){var h,d,g=e.input.charCodeAt(e.position);if(g===39){for(e.kind="scalar",e.result="",e.position++,h=d=e.position;(g=e.input.charCodeAt(e.position))!==0;)if(g===39){if(captureSegment(e,h,e.position,!0),(g=e.input.charCodeAt(++e.position))!==39)return 1;h=d=e.position,e.position++}else is_EOL(g)?(captureSegment(e,h,d,!0),writeFoldedLines(e,skipSeparationSpace(e,!1,o)),h=d=e.position):e.position===e.lineStart&&testDocumentSeparator(e)?throwError(e,"unexpected end of the document within a single quoted scalar"):(e.position++,d=e.position);throwError(e,"unexpected end of the stream within a single quoted scalar")}}function readDoubleQuotedScalar(e,o){var h,d,g,_,$,j=e.input.charCodeAt(e.position);if(j===34){for(e.kind="scalar",e.result="",e.position++,h=d=e.position;(j=e.input.charCodeAt(e.position))!==0;){if(j===34)return captureSegment(e,h,e.position,!0),e.position++,1;if(j===92){if(captureSegment(e,h,e.position,!0),is_EOL(j=e.input.charCodeAt(++e.position)))skipSeparationSpace(e,!1,o);else if(j<256&&simpleEscapeCheck[j])e.result+=simpleEscapeMap[j],e.position++;else if(0<($=escapedHexLen(j))){for(g=$,_=0;0<g;g--)0<=($=fromHexCode(j=e.input.charCodeAt(++e.position)))?_=(_<<4)+$:throwError(e,"expected hexadecimal character");e.result+=charFromCodepoint(_),e.position++}else throwError(e,"unknown escape sequence");h=d=e.position}else is_EOL(j)?(captureSegment(e,h,d,!0),writeFoldedLines(e,skipSeparationSpace(e,!1,o)),h=d=e.position):e.position===e.lineStart&&testDocumentSeparator(e)?throwError(e,"unexpected end of the document within a double quoted scalar"):(e.position++,d=e.position)}throwError(e,"unexpected end of the stream within a double quoted scalar")}}function readFlowCollection(e,o){var h,d,g,_,$,j,_t,_e,_r,_n=!0,_i=e.tag,_o=e.anchor,_a={},_u=e.input.charCodeAt(e.position);if(_u===91)j=!(g=93),d=[];else{if(_u!==123)return;g=125,j=!0,d={}}for(e.anchor!==null&&(e.anchorMap[e.anchor]=d),_u=e.input.charCodeAt(++e.position);_u!==0;){if(skipSeparationSpace(e,!0,o),(_u=e.input.charCodeAt(e.position))===g)return e.position++,e.tag=_i,e.anchor=_o,e.kind=j?"mapping":"sequence",e.result=d,1;_n||throwError(e,"missed comma between flow collection entries"),_r=null,_=$=!1,_u===63&&is_WS_OR_EOL(e.input.charCodeAt(e.position+1))&&(_=$=!0,e.position++,skipSeparationSpace(e,!0,o)),h=e.line,composeNode(e,o,CONTEXT_FLOW_IN,!1,!0),_e=e.tag,_t=e.result,skipSeparationSpace(e,!0,o),_u=e.input.charCodeAt(e.position),!$&&e.line!==h||_u!==58||(_=!0,_u=e.input.charCodeAt(++e.position),skipSeparationSpace(e,!0,o),composeNode(e,o,CONTEXT_FLOW_IN,!1,!0),_r=e.result),j?storeMappingPair(e,d,_a,_e,_t,_r):_?d.push(storeMappingPair(e,null,_a,_e,_t,_r)):d.push(_t),skipSeparationSpace(e,!0,o),(_u=e.input.charCodeAt(e.position))===44?(_n=!0,_u=e.input.charCodeAt(++e.position)):_n=!1}throwError(e,"unexpected end of the stream within a flow collection")}function readBlockScalar(e,o){var h,d,g,_=CHOMPING_CLIP,$=!1,j=o,_t=0,_e=!1,_r=e.input.charCodeAt(e.position);if(_r===124)d=!1;else{if(_r!==62)return;d=!0}for(e.kind="scalar",e.result="";_r!==0;)if((_r=e.input.charCodeAt(++e.position))===43||_r===45)CHOMPING_CLIP===_?_=_r===43?CHOMPING_KEEP:CHOMPING_STRIP:throwError(e,"repeat of a chomping mode identifier");else{if(!(0<=(g=fromDecimalCode(_r))))break;g===0?throwError(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):$?throwError(e,"repeat of an indentation width identifier"):(j=o+g-1,$=!0)}if(is_WHITE_SPACE(_r)){for(;is_WHITE_SPACE(_r=e.input.charCodeAt(++e.position)););if(_r===35)for(;!is_EOL(_r=e.input.charCodeAt(++e.position))&&_r!==0;);}for(;_r!==0;){for(readLineBreak(e),e.lineIndent=0,_r=e.input.charCodeAt(e.position);(!$||e.lineIndent<j)&&_r===32;)e.lineIndent++,_r=e.input.charCodeAt(++e.position);if(!$&&e.lineIndent>j&&(j=e.lineIndent),is_EOL(_r))_t++;else{if(e.lineIndent<j){_===CHOMPING_KEEP?e.result+=common.repeat(`
`,_t):_===CHOMPING_CLIP&&$&&(e.result+=`
`);break}for(d?is_WHITE_SPACE(_r)?(_e=!0,e.result+=common.repeat(`
`,_t+1)):_e?(_e=!1,e.result+=common.repeat(`
`,_t+1)):_t===0?$&&(e.result+=" "):e.result+=common.repeat(`
`,_t):e.result+=$?common.repeat(`
`,_t+1):common.repeat(`
`,_t),$=!0,_t=0,h=e.position;!is_EOL(_r)&&_r!==0;)_r=e.input.charCodeAt(++e.position);captureSegment(e,h,e.position,!1)}}return 1}function readBlockSequence(e,o){var h,d,g=e.tag,_=e.anchor,$=[],j=!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=$),d=e.input.charCodeAt(e.position);d!==0&&d===45&&is_WS_OR_EOL(e.input.charCodeAt(e.position+1));)if(j=!0,e.position++,skipSeparationSpace(e,!0,-1)&&e.lineIndent<=o)$.push(null),d=e.input.charCodeAt(e.position);else if(h=e.line,composeNode(e,o,CONTEXT_BLOCK_IN,!1,!0),$.push(e.result),skipSeparationSpace(e,!0,-1),d=e.input.charCodeAt(e.position),(e.line===h||e.lineIndent>o)&&d!==0)throwError(e,"bad indentation of a sequence entry");else if(e.lineIndent<o)break;return!!j&&(e.tag=g,e.anchor=_,e.kind="sequence",e.result=$,!0)}function readBlockMapping(e,o,h){var d,g,_,$,j=e.tag,_t=e.anchor,_e={},_r={},_n=null,_i=null,_o=null,_a=!1,_u=!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=_e),$=e.input.charCodeAt(e.position);$!==0;){if(d=e.input.charCodeAt(e.position+1),_=e.line,$!==63&&$!==58||!is_WS_OR_EOL(d)){if(!composeNode(e,h,CONTEXT_FLOW_OUT,!1,!0))break;if(e.line===_){for($=e.input.charCodeAt(e.position);is_WHITE_SPACE($);)$=e.input.charCodeAt(++e.position);if($===58)is_WS_OR_EOL($=e.input.charCodeAt(++e.position))||throwError(e,"a whitespace character is expected after the key-value separator within a block mapping"),_a&&(storeMappingPair(e,_e,_r,_n,_i,null),_n=_i=_o=null),g=_a=!(_u=!0),_n=e.tag,_i=e.result;else{if(!_u)return e.tag=j,e.anchor=_t,1;throwError(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!_u)return e.tag=j,e.anchor=_t,1;throwError(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else $===63?(_a&&(storeMappingPair(e,_e,_r,_n,_i,null),_n=_i=_o=null),g=_a=_u=!0):_a?g=!(_a=!1):throwError(e,"incomplete explicit mapping pair; a key node is missed"),e.position+=1,$=d;if((e.line===_||e.lineIndent>o)&&(composeNode(e,o,CONTEXT_BLOCK_OUT,!0,g)&&(_a?_i=e.result:_o=e.result),_a||(storeMappingPair(e,_e,_r,_n,_i,_o),_n=_i=_o=null),skipSeparationSpace(e,!0,-1),$=e.input.charCodeAt(e.position)),e.lineIndent>o&&$!==0)throwError(e,"bad indentation of a mapping entry");else if(e.lineIndent<o)break}return _a&&storeMappingPair(e,_e,_r,_n,_i,null),_u&&(e.tag=j,e.anchor=_t,e.kind="mapping",e.result=_e),_u}function readTagProperty(e){var o,h,d,g=!1,_=!1,$=e.input.charCodeAt(e.position);if($===33){if(e.tag!==null&&throwError(e,"duplication of a tag property"),($=e.input.charCodeAt(++e.position))===60?(g=!0,$=e.input.charCodeAt(++e.position)):$===33?(_=!0,h="!!",$=e.input.charCodeAt(++e.position)):h="!",o=e.position,g){for(;($=e.input.charCodeAt(++e.position))!==0&&$!==62;);e.position<e.length?(d=e.input.slice(o,e.position),$=e.input.charCodeAt(++e.position)):throwError(e,"unexpected end of the stream within a verbatim tag")}else{for(;$!==0&&!is_WS_OR_EOL($);)$===33&&(_?throwError(e,"tag suffix cannot contain exclamation marks"):(h=e.input.slice(o-1,e.position+1),PATTERN_TAG_HANDLE.test(h)||throwError(e,"named tag handle cannot contain such characters"),_=!0,o=e.position+1)),$=e.input.charCodeAt(++e.position);d=e.input.slice(o,e.position),PATTERN_FLOW_INDICATORS.test(d)&&throwError(e,"tag suffix cannot contain flow indicator characters")}return d&&!PATTERN_TAG_URI.test(d)&&throwError(e,"tag name cannot contain such characters: "+d),g?e.tag=d:_hasOwnProperty$2.call(e.tagMap,h)?e.tag=e.tagMap[h]+d:h==="!"?e.tag="!"+d:h==="!!"?e.tag="tag:yaml.org,2002:"+d:throwError(e,'undeclared tag handle "'+h+'"'),1}}function readAnchorProperty(e){var o,h=e.input.charCodeAt(e.position);if(h===38){for(e.anchor!==null&&throwError(e,"duplication of an anchor property"),h=e.input.charCodeAt(++e.position),o=e.position;h!==0&&!is_WS_OR_EOL(h)&&!is_FLOW_INDICATOR(h);)h=e.input.charCodeAt(++e.position);return e.position===o&&throwError(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(o,e.position),1}}function readAlias(e){var o,h,d=e.input.charCodeAt(e.position);if(d===42){for(d=e.input.charCodeAt(++e.position),o=e.position;d!==0&&!is_WS_OR_EOL(d)&&!is_FLOW_INDICATOR(d);)d=e.input.charCodeAt(++e.position);return e.position===o&&throwError(e,"name of an alias node must contain at least one character"),h=e.input.slice(o,e.position),e.anchorMap.hasOwnProperty(h)||throwError(e,'unidentified alias "'+h+'"'),e.result=e.anchorMap[h],skipSeparationSpace(e,!0,-1),1}}function composeNode(e,o,h,d,g){var _,$,j,_t,_e,_r,_n,_i,_o=1,_a=!1,_u=!1;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,_=$=j=CONTEXT_BLOCK_OUT===h||CONTEXT_BLOCK_IN===h,d&&skipSeparationSpace(e,!0,-1)&&(_a=!0,e.lineIndent>o?_o=1:e.lineIndent===o?_o=0:e.lineIndent<o&&(_o=-1)),_o===1)for(;readTagProperty(e)||readAnchorProperty(e);)skipSeparationSpace(e,!0,-1)?(_a=!0,j=_,e.lineIndent>o?_o=1:e.lineIndent===o?_o=0:e.lineIndent<o&&(_o=-1)):j=!1;if(j=j&&(_a||g),_o!==1&&CONTEXT_BLOCK_OUT!==h||(_n=CONTEXT_FLOW_IN===h||CONTEXT_FLOW_OUT===h?o:o+1,_i=e.position-e.lineStart,_o===1?j&&(readBlockSequence(e,_i)||readBlockMapping(e,_i,_n))||readFlowCollection(e,_n)?_u=!0:($&&readBlockScalar(e,_n)||readSingleQuotedScalar(e,_n)||readDoubleQuotedScalar(e,_n)?_u=!0:readAlias(e)?(_u=!0,e.tag===null&&e.anchor===null||throwError(e,"alias node should not have any properties")):readPlainScalar(e,_n,CONTEXT_FLOW_IN===h)&&(_u=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):_o===0&&(_u=j&&readBlockSequence(e,_i))),e.tag!==null&&e.tag!=="!")if(e.tag==="?"){for(_t=0,_e=e.implicitTypes.length;_t<_e;_t+=1)if((_r=e.implicitTypes[_t]).resolve(e.result)){e.result=_r.construct(e.result),e.tag=_r.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else _hasOwnProperty$2.call(e.typeMap,e.tag)?(_r=e.typeMap[e.tag],e.result!==null&&_r.kind!==e.kind&&throwError(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+_r.kind+'", not "'+e.kind+'"'),_r.resolve(e.result)?(e.result=_r.construct(e.result),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):throwError(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):throwError(e,"unknown tag !<"+e.tag+">");return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||_u}function readDocument(e){var o,h,d,g,_=e.position,$=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};(g=e.input.charCodeAt(e.position))!==0&&(skipSeparationSpace(e,!0,-1),g=e.input.charCodeAt(e.position),!(0<e.lineIndent||g!==37));){for($=!0,g=e.input.charCodeAt(++e.position),o=e.position;g!==0&&!is_WS_OR_EOL(g);)g=e.input.charCodeAt(++e.position);for(d=[],(h=e.input.slice(o,e.position)).length<1&&throwError(e,"directive name must not be less than one character in length");g!==0;){for(;is_WHITE_SPACE(g);)g=e.input.charCodeAt(++e.position);if(g===35){for(;(g=e.input.charCodeAt(++e.position))!==0&&!is_EOL(g););break}if(is_EOL(g))break;for(o=e.position;g!==0&&!is_WS_OR_EOL(g);)g=e.input.charCodeAt(++e.position);d.push(e.input.slice(o,e.position))}g!==0&&readLineBreak(e),_hasOwnProperty$2.call(directiveHandlers,h)?directiveHandlers[h](e,h,d):throwWarning(e,'unknown document directive "'+h+'"')}skipSeparationSpace(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,skipSeparationSpace(e,!0,-1)):$&&throwError(e,"directives end mark is expected"),composeNode(e,e.lineIndent-1,CONTEXT_BLOCK_OUT,!1,!0),skipSeparationSpace(e,!0,-1),e.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS.test(e.input.slice(_,e.position))&&throwWarning(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&testDocumentSeparator(e)?e.input.charCodeAt(e.position)===46&&(e.position+=3,skipSeparationSpace(e,!0,-1)):e.position<e.length-1&&throwError(e,"end of the stream or a document separator is expected")}function loadDocuments(e,o){o=o||{},(e=String(e)).length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var h=new State$1(e,o);for(h.input+="\0";h.input.charCodeAt(h.position)===32;)h.lineIndent+=1,h.position+=1;for(;h.position<h.length-1;)readDocument(h);return h.documents}function loadAll(e,o,h){for(var d=loadDocuments(e,h),g=0,_=d.length;g<_;g+=1)o(d[g])}function load(e,o){var h=loadDocuments(e,o);if(h.length!==0){if(h.length===1)return h[0];throw new exception("expected a single document in the stream, but found more")}}function safeLoadAll(e,o,h){loadAll(e,o,common.extend({schema:default_safe},h))}function safeLoad(e,o){return load(e,common.extend({schema:default_safe},o))}var loadAll_1=loadAll,load_1=load,safeLoadAll_1=safeLoadAll,safeLoad_1=safeLoad,loader={loadAll:loadAll_1,load:load_1,safeLoadAll:safeLoadAll_1,safeLoad:safeLoad_1},_toString$2=Object.prototype.toString,_hasOwnProperty$3=Object.prototype.hasOwnProperty,CHAR_TAB=9,CHAR_LINE_FEED=10,CHAR_CARRIAGE_RETURN=13,CHAR_SPACE=32,CHAR_EXCLAMATION=33,CHAR_DOUBLE_QUOTE=34,CHAR_SHARP=35,CHAR_PERCENT=37,CHAR_AMPERSAND=38,CHAR_SINGLE_QUOTE=39,CHAR_ASTERISK=42,CHAR_COMMA=44,CHAR_MINUS=45,CHAR_COLON=58,CHAR_GREATER_THAN=62,CHAR_QUESTION=63,CHAR_COMMERCIAL_AT=64,CHAR_LEFT_SQUARE_BRACKET=91,CHAR_RIGHT_SQUARE_BRACKET=93,CHAR_GRAVE_ACCENT=96,CHAR_LEFT_CURLY_BRACKET=123,CHAR_VERTICAL_LINE=124,CHAR_RIGHT_CURLY_BRACKET=125,ESCAPE_SEQUENCES={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},DEPRECATED_BOOLEANS_SYNTAX=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function compileStyleMap(e,o){var h,d,g,_,$,j,_t;if(o===null)return{};for(h={},g=0,_=(d=Object.keys(o)).length;g<_;g+=1)$=d[g],j=String(o[$]),$.slice(0,2)==="!!"&&($="tag:yaml.org,2002:"+$.slice(2)),(_t=e.compiledTypeMap[$])&&_hasOwnProperty$3.call(_t.styleAliases,j)&&(j=_t.styleAliases[j]),h[$]=j;return h}function encodeHex(e){var o,h,d=e.toString(16).toUpperCase();if(e<=255)o="x",h=2;else if(e<=65535)o="u",h=4;else{if(!(e<=4294967295))throw new exception("code point within a string may not be greater than 0xFFFFFFFF");o="U",h=8}return"\\"+o+common.repeat("0",h-d.length)+d}function State$2(e){this.schema=e.schema||default_full,this.indent=Math.max(1,e.indent||2),this.skipInvalid=e.skipInvalid||!1,this.flowLevel=common.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=compileStyleMap(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function indentString(e,o){for(var h,d=common.repeat(" ",o),g=0,_=-1,$="",j=e.length;g<j;)g=(_=e.indexOf(`
`,g))===-1?(h=e.slice(g),j):(h=e.slice(g,_+1),_+1),h.length&&h!==`
`&&($+=d),$+=h;return $}function generateNextLine(e,o){return`
`+common.repeat(" ",e.indent*o)}function testImplicitResolving(e,o){for(var h=0,d=e.implicitTypes.length;h<d;h+=1)if(e.implicitTypes[h].resolve(o))return 1}function StringBuilder(e){this.source=e,this.result="",this.checkpoint=0}function writeScalar(e,o,h,d){var g,_,$,j,_t,_e,_r,_n,_i,_o,_a,_u,_f,_h,_d,ty,ey,sy,ny,uy;if(o.length!==0)if(DEPRECATED_BOOLEANS_SYNTAX.indexOf(o)===-1){for(g=!0,_=o.length?o.charCodeAt(0):0,$=CHAR_SPACE===_||CHAR_SPACE===o.charCodeAt(o.length-1),CHAR_MINUS!==_&&CHAR_QUESTION!==_&&CHAR_COMMERCIAL_AT!==_&&CHAR_GRAVE_ACCENT!==_||(g=!1),_t=j=$||-1<e.flowLevel&&e.flowLevel<=h?($&&(g=!1),!1):!d,_e=!0,_r=new StringBuilder(o),_n=!1,_o=_i=0,_a=e.indent*h,(_u=e.lineWidth)===-1&&(_u=9007199254740991),_a<40?_u-=_a:_u=40,_h=0;_h<o.length;_h++){if(_f=o.charCodeAt(_h),g){if(simpleChar(_f))continue;g=!1}_e&&_f===CHAR_SINGLE_QUOTE&&(_e=!1),_d=ESCAPE_SEQUENCES[_f],ty=needsHexEscape(_f),(_d||ty)&&(_f!==CHAR_LINE_FEED&&_f!==CHAR_DOUBLE_QUOTE&&_f!==CHAR_SINGLE_QUOTE?_t=j=!1:_f===CHAR_LINE_FEED&&(_e=!(_n=!0),0<_h&&o.charCodeAt(_h-1)===CHAR_SPACE&&(j=_t=!1),j&&(ey=_h-_i,_i=_h,_o<ey&&(_o=ey))),_f!==CHAR_DOUBLE_QUOTE&&(_e=!1),_r.takeUpTo(_h),_r.escapeChar())}if(g&&testImplicitResolving(e,o)&&(g=!1),sy="",(j||_t)&&(ny=0,o.charCodeAt(o.length-1)===CHAR_LINE_FEED&&(ny+=1,o.charCodeAt(o.length-2)===CHAR_LINE_FEED&&(ny+=1)),ny===0?sy="-":ny===2&&(sy="+")),(_t&&_o<_u||e.tag!==null)&&(j=!1),_n||(_t=!1),g)e.dump=o;else if(_e)e.dump="'"+o+"'";else if(j)uy=fold(o,_u),e.dump=">"+sy+`
`+indentString(uy,_a);else if(_t)sy||(o=o.replace(/\n$/,"")),e.dump="|"+sy+`
`+indentString(o,_a);else{if(!_r)throw new Error("Failed to dump scalar value");_r.finish(),e.dump='"'+_r.result+'"'}}else e.dump="'"+o+"'";else e.dump="''"}function fold(e,o){var h,d="",g=0,_=e.length,$=/\n+$/.exec(e);for($&&(_=$.index+1);g<_;)g=_<(h=e.indexOf(`
`,g))||h===-1?(d&&(d+=`

`),d+=foldLine(e.slice(g,_),o),_):(d&&(d+=`

`),d+=foldLine(e.slice(g,h),o),h+1);return $&&$[0]!==`
`&&(d+=$[0]),d}function foldLine(e,o){if(e==="")return e;for(var h,d,g=/[^\s] [^\s]/g,_="",$=0,j=0,_t=g.exec(e);_t;)o<(h=_t.index)-j&&(d=$!==j?$:h,_&&(_+=`
`),_+=e.slice(j,d),j=d+1),$=h+1,_t=g.exec(e);return _&&(_+=`
`),j!==$&&e.length-j>o?_+=e.slice(j,$)+`
`+e.slice($+1):_+=e.slice(j),_}function simpleChar(e){return CHAR_TAB!==e&&CHAR_LINE_FEED!==e&&CHAR_CARRIAGE_RETURN!==e&&CHAR_COMMA!==e&&CHAR_LEFT_SQUARE_BRACKET!==e&&CHAR_RIGHT_SQUARE_BRACKET!==e&&CHAR_LEFT_CURLY_BRACKET!==e&&CHAR_RIGHT_CURLY_BRACKET!==e&&CHAR_SHARP!==e&&CHAR_AMPERSAND!==e&&CHAR_ASTERISK!==e&&CHAR_EXCLAMATION!==e&&CHAR_VERTICAL_LINE!==e&&CHAR_GREATER_THAN!==e&&CHAR_SINGLE_QUOTE!==e&&CHAR_DOUBLE_QUOTE!==e&&CHAR_PERCENT!==e&&CHAR_COLON!==e&&!ESCAPE_SEQUENCES[e]&&!needsHexEscape(e)}function needsHexEscape(e){return!(32<=e&&e<=126||e===133||160<=e&&e<=55295||57344<=e&&e<=65533||65536<=e&&e<=1114111)}function writeFlowSequence(e,o,h){for(var d="",g=e.tag,_=0,$=h.length;_<$;_+=1)writeNode(e,o,h[_],!1,!1)&&(_!==0&&(d+=", "),d+=e.dump);e.tag=g,e.dump="["+d+"]"}function writeBlockSequence(e,o,h,d){for(var g="",_=e.tag,$=0,j=h.length;$<j;$+=1)writeNode(e,o+1,h[$],!0,!0)&&(d&&$===0||(g+=generateNextLine(e,o)),g+="- "+e.dump);e.tag=_,e.dump=g||"[]"}function writeFlowMapping(e,o,h){for(var d,g,_,$="",j=e.tag,_t=Object.keys(h),_e=0,_r=_t.length;_e<_r;_e+=1)_="",_e!==0&&(_+=", "),g=h[d=_t[_e]],writeNode(e,o,d,!1,!1)&&(1024<e.dump.length&&(_+="? "),_+=e.dump+": ",writeNode(e,o,g,!1,!1)&&($+=_+=e.dump));e.tag=j,e.dump="{"+$+"}"}function writeBlockMapping(e,o,h,d){var g,_,$,j,_t,_e,_r="",_n=e.tag,_i=Object.keys(h);if(e.sortKeys===!0)_i.sort();else if(typeof e.sortKeys=="function")_i.sort(e.sortKeys);else if(e.sortKeys)throw new exception("sortKeys must be a boolean or a function");for(g=0,_=_i.length;g<_;g+=1)_e="",d&&g===0||(_e+=generateNextLine(e,o)),j=h[$=_i[g]],writeNode(e,o+1,$,!0,!0,!0)&&((_t=e.tag!==null&&e.tag!=="?"||e.dump&&1024<e.dump.length)&&(e.dump&&CHAR_LINE_FEED===e.dump.charCodeAt(0)?_e+="?":_e+="? "),_e+=e.dump,_t&&(_e+=generateNextLine(e,o)),writeNode(e,o+1,j,!0,_t)&&(e.dump&&CHAR_LINE_FEED===e.dump.charCodeAt(0)?_e+=":":_e+=": ",_r+=_e+=e.dump));e.tag=_n,e.dump=_r||"{}"}function detectType(e,o,h){for(var d,g,_,$=h?e.explicitTypes:e.implicitTypes,j=0,_t=$.length;j<_t;j+=1)if(((g=$[j]).instanceOf||g.predicate)&&(!g.instanceOf||typeof o=="object"&&o instanceof g.instanceOf)&&(!g.predicate||g.predicate(o))){if(e.tag=h?g.tag:"?",g.represent){if(_=e.styleMap[g.tag]||g.defaultStyle,_toString$2.call(g.represent)==="[object Function]")d=g.represent(o,_);else{if(!_hasOwnProperty$3.call(g.represent,_))throw new exception("!<"+g.tag+'> tag resolver accepts not "'+_+'" style');d=g.represent[_](o,_)}e.dump=d}return 1}}function writeNode(e,o,h,d,g,_){e.tag=null,e.dump=h,detectType(e,h,!1)||detectType(e,h,!0);var $=_toString$2.call(e.dump);d=d&&(e.flowLevel<0||e.flowLevel>o);var j,_t,_e=$==="[object Object]"||$==="[object Array]";if(_e&&(_t=(j=e.duplicates.indexOf(h))!==-1),(e.tag!==null&&e.tag!=="?"||_t||e.indent!==2&&0<o)&&(g=!1),_t&&e.usedDuplicates[j])e.dump="*ref_"+j;else{if(_e&&_t&&!e.usedDuplicates[j]&&(e.usedDuplicates[j]=!0),$==="[object Object]")d&&Object.keys(e.dump).length!==0?(writeBlockMapping(e,o,e.dump,g),_t&&(e.dump="&ref_"+j+e.dump)):(writeFlowMapping(e,o,e.dump),_t&&(e.dump="&ref_"+j+" "+e.dump));else if($==="[object Array]")d&&e.dump.length!==0?(writeBlockSequence(e,o,e.dump,g),_t&&(e.dump="&ref_"+j+e.dump)):(writeFlowSequence(e,o,e.dump),_t&&(e.dump="&ref_"+j+" "+e.dump));else{if($!=="[object String]"){if(e.skipInvalid)return;throw new exception("unacceptable kind of an object to dump "+$)}e.tag!=="?"&&writeScalar(e,e.dump,o,_)}e.tag!==null&&e.tag!=="?"&&(e.dump="!<"+e.tag+"> "+e.dump)}return 1}function getDuplicateReferences(e,o){var h,d,g=[],_=[];for(inspectNode(e,g,_),h=0,d=_.length;h<d;h+=1)o.duplicates.push(g[_[h]]);o.usedDuplicates=new Array(d)}function inspectNode(e,o,h){var d,g,_;if(e!==null&&typeof e=="object")if((g=o.indexOf(e))!==-1)h.indexOf(g)===-1&&h.push(g);else if(o.push(e),Array.isArray(e))for(g=0,_=e.length;g<_;g+=1)inspectNode(e[g],o,h);else for(g=0,_=(d=Object.keys(e)).length;g<_;g+=1)inspectNode(e[d[g]],o,h)}function dump(e,o){var h=new State$2(o=o||{});return h.noRefs||getDuplicateReferences(e,h),writeNode(h,0,e,!0,!0)?h.dump+`
`:""}function safeDump(e,o){return dump(e,common.extend({schema:default_safe},o))}StringBuilder.prototype.takeUpTo=function(e){var o;if(e<this.checkpoint)throw(o=new Error("position should be > checkpoint")).position=e,o.checkpoint=this.checkpoint,o;return this.result+=this.source.slice(this.checkpoint,e),this.checkpoint=e,this},StringBuilder.prototype.escapeChar=function(){var e=this.source.charCodeAt(this.checkpoint),o=ESCAPE_SEQUENCES[e]||encodeHex(e);return this.result+=o,this.checkpoint+=1,this},StringBuilder.prototype.finish=function(){this.source.length>this.checkpoint&&this.takeUpTo(this.source.length)};var dump_1=dump,safeDump_1=safeDump,dumper={dump:dump_1,safeDump:safeDump_1};function deprecated(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}var Type$1=type,Schema$1=schema,FAILSAFE_SCHEMA=failsafe,JSON_SCHEMA=json,CORE_SCHEMA=core,DEFAULT_SAFE_SCHEMA=default_safe,DEFAULT_FULL_SCHEMA=default_full,load$1=loader.load,loadAll$1=loader.loadAll,safeLoad$1=loader.safeLoad,safeLoadAll$1=loader.safeLoadAll,dump$1=dumper.dump,safeDump$1=dumper.safeDump,YAMLException$1=exception,MINIMAL_SCHEMA=failsafe,SAFE_SCHEMA=default_safe,DEFAULT_SCHEMA=default_full,scan=deprecated("scan"),parse=deprecated("parse"),compose=deprecated("compose"),addConstructor=deprecated("addConstructor"),jsYaml={Type:Type$1,Schema:Schema$1,FAILSAFE_SCHEMA,JSON_SCHEMA,CORE_SCHEMA,DEFAULT_SAFE_SCHEMA,DEFAULT_FULL_SCHEMA,load:load$1,loadAll:loadAll$1,safeLoad:safeLoad$1,safeLoadAll:safeLoadAll$1,dump:dump$1,safeDump:safeDump$1,YAMLException:YAMLException$1,MINIMAL_SCHEMA,SAFE_SCHEMA,DEFAULT_SCHEMA,scan,parse,compose,addConstructor},jsYaml$1=jsYaml,SceneBundle=function(){function e(o,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;_classCallCheck(this,e),this.url=o,!h||isRelativeURL(h)&&!isRelativeURL(this.url)?this.path=pathForURL(this.url):this.path=h,this.path_for_parent=h||this.path,this.parent=d,this.container=null,this.parent&&(this.parent.container?this.container=this.parent.container:this.parent.isContainer()&&(this.container=this.parent))}return _createClass(e,[{key:"load",value:function(){return loadResource(this.url)}},{key:"resourceFor",value:function(o){return{url:this.urlFor(o),path:this.pathFor(o),type:this.typeFor(o)}}},{key:"urlFor",value:function(o){return isGlobal(o)?o:isRelativeURL(o)&&this.container?this.parent.urlFor(this.path_for_parent+o):addBaseURL(o,this.path)}},{key:"pathFor",value:function(o){return pathForURL(o)}},{key:"typeFor",value:function(o){return extensionForURL(o)}},{key:"isContainer",value:function(){return!1}}]),e}();function createSceneBundle(e,o,h){return new SceneBundle(e,o,h)}function isGlobal(e){return!(!e||e.slice(0,7)!=="global.")}function parseResource(e){var o;try{o=jsYaml$1.safeLoad(e,{json:!0})}catch(h){throw h}return o}function loadResource(e){return new Promise(function(o,h){typeof e=="string"?Utils$1.io(e).then(function(d){try{var g=parseResource(d);o(g)}catch(_){h(_)}},h):(e=Object.assign({},e),o(e))})}function notNull(e){return e!=null}function wrap$1(e){return"("+e+")"}function maybeQuote(e){return typeof e=="string"?'"'+e+'"':e}function lookUp(e){return e[0]==="$"?"context['"+e.substring(1)+"']":"context.feature.properties['"+e+"']"}function nullValue(e,o){return" true "}function propertyEqual(e,o){return wrap$1(maybeQuote(o)+" === "+lookUp(e))}function propertyOr(e,o){return wrap$1(o.map(function(h){return propertyEqual(e,h)}).join(" || "))}function printNested(e,o){return wrap$1(e.filter(notNull).map(function(h){return wrap$1(h.join(" && "))}).join(" "+o+" "))}function any(e,o,h){return o&&0<o.length?printNested(o.map(function(d){return parseFilter(d,h)}),"||"):"true"}function all(e,o,h){return o&&0<o.length?printNested(o.map(function(d){return parseFilter(d,h)}),"&&"):"true"}function not(e,o,h){return"!"+wrap$1(parseFilter(o,h).join(" && "))}function none(e,o,h){return"!"+wrap$1(any(null,o,h))}function propertyMatchesBoolean(e,o){return wrap$1(lookUp(e)+(o?" != ":" == ")+"null")}function rangeMatch(e,o,h){var d,g,_=[],$=h&&typeof h.rangeTransform=="function"&&h.rangeTransform;return o.max&&(d=$?$(o.max):o.max,_.push(lookUp(e)+" < "+d)),o.min&&(g=$?g=$(o.min):o.min,_.push(lookUp(e)+" >= "+g)),wrap$1(_.join(" && "))}function parseFilter(e,o){var h=[];if(typeof e=="function")return[wrap$1(e.toString()+"(context)")];if(Array.isArray(e))return[any(null,e,o)];if(e==null)return["true"];for(var d=Object.keys(e),g=0;g<d.length;g++){var _=d[g],$=e[_],j=_typeof($);if(j==="string"||j==="number")h.push(propertyEqual(_,$));else if(j==="boolean")h.push(propertyMatchesBoolean(_,$));else if(_==="not")h.push(not(_,$,o));else if(_==="any")h.push(any(_,$,o));else if(_==="all")h.push(all(_,$,o));else if(_==="none")h.push(none(_,$,o));else if(Array.isArray($))h.push(propertyOr(_,$));else if(j==="object"&&$!=null)($.max||$.min)&&h.push(rangeMatch(_,$,o));else{if($!=null)throw new Error("Unknown Query syntax: "+$);h.push(nullValue())}}return d.length===0?["true"]:h}function filterToString(e){return wrap$1(e.join(" && "))}function buildFilter(e,o){return e==null?function(){return!0}:new Function("context","return "+filterToString(parseFilter(e,o))+";")}var reserved=["filter","draw","visible","enabled","data"],layer_cache={};function cacheKey(e){if(1<e.length){for(var o=e[0],h=1;h<e.length;h++)o+="/"+e[h];return o}return e[0]}function mergeTrees(e,o){for(var h,d=0,g=0;g<e.length;g++)e[g].length>d&&(d=e[g].length);if(d===0)return null;for(var _={visible:!0},$=0;$<d;$++)(function(j){h=[],e.forEach(function(_t){_t[j]&&_t[j][o]&&h.indexOf(_t[j][o])===-1&&h.push(_t[j][o])}),h.length!==0&&(h.sort(function(_t,_e){return(_t&&_t.layer_name)>(_e&&_e.layer_name)?1:-1}),mergeObjects.apply(void 0,[_].concat(_toConsumableArray(h))),delete _.layer_name)})($);return _.visible===!1?null:_}var blacklist=["any","all","not","none"],Layer=function(){function e(o){var h,d=o.layer,g=o.name,_=o.parent,$=o.draw,j=o.visible,_t=o.enabled,_e=o.filter,_r=o.styles;if(_classCallCheck(this,e),this.id=e.id++,this.config_data=d.data,this.parent=_,this.name=g,this.full_name=this.parent?this.parent.full_name+":"+this.name:this.name,this.draw=$,this.filter=_e,this.styles=_r,this.is_built=!1,_t=_t===void 0?j:_t,this.parent&&this.parent.visible===!1?this.enabled=!1:this.enabled=_t!==!1,this.draw)for(var _n in this.draw)this.draw[_n]=this.draw[_n]==null?{}:this.draw[_n],_typeof(this.draw[_n])!=="object"?(h="Draw group '".concat(_n,"' for layer ").concat(this.full_name," is invalid, must be an object, "),log("warn",h+="but was set to `".concat(_n,": ").concat(this.draw[_n],"` instead")),delete this.draw[_n]):this.draw[_n].layer_name=this.full_name}return _createClass(e,[{key:"build",value:function(){log("trace","Building layer '".concat(this.full_name,"'")),this.buildFilter(),this.buildDraw(),this.is_built=!0}},{key:"buildDraw",value:function(){this.draw=Utils$1.stringsToFunctions(this.draw,StyleParser.wrapFunction),this.calculatedDraw=calculateDraw(this)}},{key:"buildFilter",value:function(){this.filter_original=this.filter,this.filter=Utils$1.stringsToFunctions(this.filter,StyleParser.wrapFunction);var o=_typeof(this.filter);if(this.filter==null||o==="object"||o==="function")try{this.buildZooms(),this.buildPropMatches(),this.filter!=null&&(typeof this.filter=="function"||0<Object.keys(this.filter).length)?this.filter=buildFilter(this.filter,FilterOptions):this.filter=null}catch(g){var h="Filter for layer ".concat(this.full_name," is invalid, `filter: ").concat(JSON.stringify(this.filter),"` ");log("warn",h+="failed with error '".concat(g.message,"', stack trace: ").concat(g.stack))}else{var d="Filter for layer ".concat(this.full_name," is invalid, filter value must be an object or function, ");log("warn",d+="but was set to `filter: ".concat(this.filter,"` instead"))}}},{key:"buildZooms",value:function(){var o=this.filter&&this.filter.$zoom,h=_typeof(o);if(o!=null&&h!=="function"){if(this.zooms={},h==="number")this.zooms[o]=!0;else if(Array.isArray(o))for(var d=0;d<o.length;d++)this.zooms[o[d]]=!0;else if(h==="object"&&(o.min!=null||o.max!=null))for(var g=o.min||0,_=o.max||25,$=g;$<_;$++)this.zooms[$]=!0;delete this.filter.$zoom}}},{key:"buildPropMatches",value:function(){var o=this;this.filter&&!Array.isArray(this.filter)&&typeof this.filter!="function"&&Object.keys(this.filter).forEach(function(h){if(blacklist.indexOf(h)===-1){var d=o.filter[h],g=_typeof(d),_=Array.isArray(d);if(!_&&g!=="string"&&g!=="number")return;h[0]==="$"?(o.context_prop_matches=o.context_prop_matches||[],o.context_prop_matches.push([h.substring(1),_?d:[d]])):(o.feature_prop_matches=o.feature_prop_matches||[],o.feature_prop_matches.push([h,_?d:[d]])),delete o.filter[h]}})}},{key:"doPropMatches",value:function(o){if(this.feature_prop_matches)for(var h=0;h<this.feature_prop_matches.length;h++){var d=this.feature_prop_matches[h],g=o.feature.properties[d[0]];if(g==null||d[1].indexOf(g)===-1)return!1}if(this.context_prop_matches)for(var _=0;_<this.context_prop_matches.length;_++){var $=this.context_prop_matches[_],j=o[$[0]];if(j==null||$[1].indexOf(j)===-1)return!1}return!0}},{key:"doesMatch",value:function(o){if(!this.enabled||(this.is_built||this.build(),this.zooms!=null&&!this.zooms[o.zoom])||!this.doPropMatches(o))return!1;var h;if(this.filter instanceof Function)try{h=this.filter(o)}catch(g){var d="Filter for this ".concat(this.full_name,": `filter: ").concat(this.filter_original,"` ");log("error",d+="failed with error '".concat(g.message,"', stack trace: ").concat(g.stack),o.feature)}else h=this.filter==null;return!!h&&(this.children_to_parse&&(parseLayerChildren(this,this.children_to_parse,this.styles),delete this.children_to_parse),!0)}}]),e}();Layer.id=0;var LayerLeaf=function(){_inherits(o,Layer);var e=_createSuper(o);function o(h){var d;return _classCallCheck(this,o),(d=e.call(this,h)).is_leaf=!0,d}return o}(),LayerTree=function(){_inherits(o,Layer);var e=_createSuper(o);function o(h){var d;return _classCallCheck(this,o),(d=e.call(this,h)).is_tree=!0,d.layers=h.layers||[],d}return _createClass(o,[{key:"addLayer",value:function(h){this.layers.push(h)}},{key:"buildDrawGroups",value:function(h){var d=[],g=[];if(matchFeature(h,[this],d,g),0<d.length){var _=cacheKey(g);if(layer_cache[_]===void 0){for(var $=d.map(function(_a){return _a&&_a.visible!==!1&&_a.calculatedDraw}),j={},_t=0;_t<$.length;_t++){var _e=$[_t];if(_e)for(var _r=0;_r<_e.length;_r++){var _n=_e[_r];for(var _i in _n)j[_i]=!0}}for(var _o in j)layer_cache[_]=layer_cache[_]||{},layer_cache[_][_o]=mergeTrees($,_o),layer_cache[_][_o]?(layer_cache[_][_o].key=_+"/"+_o,layer_cache[_][_o].layers=d.map(function(_a){return _a&&_a.full_name}),layer_cache[_][_o].group=_o):delete layer_cache[_][_o];layer_cache[_]&&Object.keys(layer_cache[_]).length===0&&(layer_cache[_]=null)}return layer_cache[_]}}}]),o}(),FilterOptions={rangeTransform:function(e){return typeof e=="string"&&e.trim().slice(-3)==="px2"?"".concat(parseFloat(e)," * context.meters_per_pixel_sq"):e}},SceneLoader;function isReserved(e){return-1<reserved.indexOf(e)}function isEmpty(e){return Object.keys(e).length===0}function groupProps(e){var o={},h={};for(var d in e)isReserved(d)?o[d]=e[d]:h[d]=e[d];return[o,h]}function calculateDraw(e){var o,h=[];return e.parent&&(o=e.parent.calculatedDraw||[],h.push.apply(h,_toConsumableArray(o))),h.push(e.draw),h}function parseLayerNode(e,o,h,d){var g={name:e,layer:o=o??{},parent:h,styles:d},_=_slicedToArray(groupProps(o),2),$=_[0],j=_[1],_t=isEmpty(j),_e=_t&&h!=null?LayerLeaf:LayerTree,_r=new _e(Object.assign(g,$));return _r.enabled&&(h&&h.addLayer(_r),_r.children_to_parse=_t?null:j),_r}function parseLayerChildren(e,o,h){for(var d in o){var g,_=o[d];_typeof(_)!=="object"||Array.isArray(_)?(g="Layer value must be an object: cannot create layer '".concat(d,": ").concat(JSON.stringify(_),"'"),g+=", under parent layer '".concat(e.full_name,"'."),h[e.name]&&(g+=" The parent name '".concat(e.name,"' is also the name of a style, did you mean to create a 'draw' group"),e.parent&&(g+=" under '".concat(e.parent.name,"'")),g+=" instead?"),log("warn",g)):parseLayerNode(d,_,e,h)}}function parseLayers(e,o){layer_cache={};var h={};for(var d in e){var g=e[d];g&&(h[d]=parseLayerNode(d,g,null,o))}return h}function matchFeature(e,o,h,d){var g=!1;if(o.length!==0){for(var _=0;_<o.length;_++){var $=o[_];$.is_leaf?$.doesMatch(e)&&(g=!0,h.push($),d.push($.id)):$.is_tree&&$.doesMatch(e)&&(g=!0,matchFeature(e,$.layers,h,d)||(h.push($),d.push($.id)))}return g}}var GLOBAL_PROP_RGX=/^global\.(.+)$/,SceneLoader$1=SceneLoader={loadScene:function(e,o){var h=this,d=1<arguments.length&&o!==void 0?o:{},g=d.path,_=d.type,$=[];return this.loadSceneRecursive({url:e,path:g,type:_},null,$).then(function(j){return h.finalize(j)}).then(function(j){var _t=j.config,_e=j.bundle;return _t?(0<$.length&&$.forEach(function(_r){var _n="Failed to import scene: ".concat(_r.url);log("error",_n,_r),h.trigger("error",{type:"scene_import",message:_n,error:_r,url:_r.url})}),{config:_t,bundle:_e}):Promise.reject($[0])})},loadSceneRecursive:function(e,o,h){var d=this,g=e.url,_=e.path;e.type;var $=2<arguments.length&&h!==void 0?h:[];if(!g)return Promise.resolve({});var j=createSceneBundle(g,_,o);return j.load().then(function(_t){if(_t.import==null)return d.normalize(_t,j),{config:_t,bundle:j};Array.isArray(_t.import)||(_t.import=[_t.import]);var _e=[];return _t.import.forEach(function(_r){_typeof(_r)==="object"&&(_r=createObjectURL(new Blob([JSON.stringify(_r)]))),_e.push(j.resourceFor(_r))}),delete _t.import,Promise.all(_e.map(function(_r){return d.loadSceneRecursive(_r,j,$)})).then(function(_r){_r.forEach(function(_i){return d.normalize(_i.config,_i.bundle)});var _n=_r.map(function(_i){return _i.config});return _t=mergeObjects.apply(void 0,_toConsumableArray(_n).concat([_t])),d.normalize(_t,j),{config:_t,bundle:j}})}).catch(function(_t){return _t.url=g,$.push(_t),{}})},normalize:function(e,o){return this.normalizeDataSources(e,o),this.normalizeFonts(e,o),this.normalizeTextures(e,o),this.hoistTextures(e,o),{config:e,bundle:o}},normalizeDataSources:function(e,o){for(var h in e.sources=e.sources||{},e.sources)this.normalizeDataSource(e.sources[h],o);return e},normalizeDataSource:function(e,o){if(e.url&&(e.url=o.urlFor(e.url)),e.scripts)for(var h in Array.isArray(e.scripts)&&(e.scripts=e.scripts.reduce(function(d,g){return d[g]=g,d},{})),e.scripts)e.scripts[h]=o.urlFor(e.scripts[h]);return e},normalizeFonts:function(e,o){for(var h in e.fonts=e.fonts||{},e.fonts){var d;Array.isArray(e.fonts[h])?e.fonts[h].forEach(function(g){g.url=g.url&&o.urlFor(g.url)}):(d=e.fonts[h]).url=d.url&&o.urlFor(d.url)}return e},normalizeTextures:function(e,o){if(e.textures=e.textures||{},e.textures)for(var h in e.textures){var d=e.textures[h];d.url&&(d.url=o.urlFor(d.url))}},hoistTextures:function(e,o){var h=this;if(e.styles)for(var d in e.styles)(function(_n){var _i=e.styles[_n],_o=_i.texture;typeof _o!="string"||e.textures[_o]||(_i.texture=h.hoistTexture(_o,e,o)),_i.material&&["emission","ambient","diffuse","specular","normal"].forEach(function(_a){var _u=_i.material[_a]!=null&&_i.material[_a].texture;typeof _u!="string"||e.textures[_u]||(_i.material[_a].texture=h.hoistTexture(_u,e,o))})})(d);if(this.hoistStyleShaderUniformTextures(e,o,{include_globals:!1}),e.layers)for(var g=[e.layers];0<g.length;){var _=g.pop();if(_typeof(_)==="object"&&!Array.isArray(_))for(var $ in _)if($==="draw"){var j,_t,_e=_[$];for(var _r in _e)_e[_r].texture&&(typeof(j=_e[_r].texture)!="string"||e.textures[j]||(_e[_r].texture=this.hoistTexture(j,e,o))),_e[_r].outline&&_e[_r].outline.texture&&(typeof(_t=_e[_r].outline.texture)!="string"||e.textures[_t]||(_e[_r].outline.texture=this.hoistTexture(_t,e,o)))}else{if(isReserved($))continue;g.push(_[$])}}},hoistStyleShaderUniformTextures:function(e,o,h){var d=this,g=h.include_globals;if(e.styles)for(var _ in e.styles){var $=e.styles[_];$.shaders&&$.shaders.uniforms&&GLSL.parseUniforms($.shaders.uniforms).forEach(function(j){var _t=j.type,_e=j.value,_r=j.key,_n=j.uniforms;_t!=="sampler2D"||typeof _e!="string"||e.textures[_e]||!g&&isGlobal(_e)||(_n[_r]=d.hoistTexture(_e,e,o))})}},hoistTexture:function(e,o,h){var d=isGlobal(e),g=d?e:h.urlFor(e),_=d?"texture-".concat(g):g;return o.textures[_]={url:g},_},applyGlobalProperties:function(e){if(!e.global||Object.keys(e.global).length===0)return e;var o=flattenProperties(e.global);return function h(d){if(typeof d=="string"){var g=function j(_t,_e,_r){var _n=2<arguments.length&&_r!==void 0?_r:[];if(-1<_n.indexOf(_t))log({level:"warn",once:!0},"Global properties: cyclical reference detected",_n);else{_n.push(_t);var _i=GLOBAL_PROP_RGX.exec(_t);if(_i){var _o=_i[1];if(_o){var _a=_e[_o];if(_a!==void 0)return typeof _a=="string"&&GLOBAL_PROP_RGX.exec(_a)?j(_a,_e,_n):_a;log({level:"warn",once:!0},"Global property not found: "+_t)}else log({level:"warn",once:!0},"Invalid global property reference: "+_t)}}}(d,o);g!==void 0&&(d=g)}else if(Array.isArray(d))for(var _=0;_<d.length;_++)d[_]=h(d[_]);else if(_typeof(d)==="object")for(var $ in d)d[$]=h(d[$]);return d}(e)},finalize:function(e){var o=e.config,h=e.bundle;return o?(o.global=o.global||{},o.scene=o.scene||{},o.cameras=o.cameras||{},o.lights=o.lights||{},o.styles=o.styles||{},o.layers=o.layers||{},o.camera&&(o.cameras.default=o.camera),Object.keys(o.cameras).length===0&&(o.cameras.default={}),Object.keys(o.lights).length!==0&&!Object.keys(o.lights).every(function(d){return o.lights[d].visible===!1})||(o.lights.default_light={type:"directional"}),{config:o,bundle:h}):{}}};function flattenProperties(e){var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:".",h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},d=(d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)?d+o:"";for(var g in e){var _=d+g,$=e[g];_typeof(h[_]=$)!=="object"||Array.isArray($)||flattenProperties($,o,_,h)}return h}subscribeMixin(SceneLoader);var TilePyramid=function(){function e(){_classCallCheck(this,e),this.coords={},this.max_proxy_descendant_depth=6,this.max_proxy_ancestor_depth=10}return _createClass(e,[{key:"sourceTiles",value:function(o,h){return this.coords[o.key]&&this.coords[o.key].sources&&this.coords[o.key].sources[h.name]}},{key:"addTile",value:function(o){var h=o.coords.key,d=this.coords[h];(d=d||(this.coords[h]={descendants:0})).sources||(d.sources={}),d.sources[o.source.name]||(d.sources[o.source.name]={});for(var g=(d.sources[o.source.name][o.style_zoom]=o).coords.z-1;0<=g;g--){var _=Tile.coordinateAtZoom(o.coords,g);this.coords[_.key]||(this.coords[_.key]={descendants:0}),this.coords[_.key].descendants++}}},{key:"removeTile",value:function(o){var h=this.sourceTiles(o.coords,o.source),d=o.coords.key;h&&(delete h[o.style_zoom],Object.keys(h).length===0&&(delete this.coords[d].sources[o.source.name],Object.keys(this.coords[d].sources).length===0&&(delete this.coords[d].sources,this.coords[d].descendants===0&&delete this.coords[d])));for(var g=o.coords.z-1;0<=g;g--){var _=Tile.coordinateAtZoom(o.coords,g);this.coords[_.key]&&0<this.coords[_.key].descendants&&(this.coords[_.key].descendants--,this.coords[_.key].descendants!==0||this.coords[_.key].sources||delete this.coords[_.key])}}},{key:"getAncestor",value:function(o,h){var d=o.coords,g=o.style_zoom,_=o.source,$=1<arguments.length&&h!==void 0?h:1;if(!($>this.max_proxy_ancestor_depth)){if(g>_.max_coord_zoom){var j=this.sourceTiles(d,_);if(j){for(var _t=g-1;_t>=_.max_coord_zoom;_t--)if(j[_t]&&j[_t].loaded)return j[_t]}g=_.max_coord_zoom}g--;var _e=Tile.coordinateAtZoom(d,d.z-1),_r=this.sourceTiles(_e,_);return _r&&_r[g]&&_r[g].loaded?_r[g]:0<_e.z?this.getAncestor({coords:_e,style_zoom:g,source:_},$+1):void 0}}},{key:"getDescendants",value:function(o,h){var d=o.coords,g=o.style_zoom,_=o.source,$=1<arguments.length&&h!==void 0?h:1,j=[];if(g>=_.max_coord_zoom){var _t=this.sourceTiles(d,_);if(_t){for(var _e=Math.max(Geo$1.default_view_max_zoom,g+this.max_proxy_descendant_depth),_r=g+1;_r<=_e;_r++)if(_t[_r]&&_t[_r].loaded)return j.push(_t[_r]),j}return j}if(this.coords[d.key]&&0<this.coords[d.key].descendants){g++;for(var _n=Tile.childrenForCoordinate(d),_i=0;_i<_n.length;_i++){var _o=_n[_i],_a=this.sourceTiles(_o,_);_a&&_a[g]&&_a[g].loaded?j.push(_a[g]):$<=this.max_proxy_descendant_depth&&_o.z<=_.max_coord_zoom&&j.push.apply(j,_toConsumableArray(this.getDescendants({coords:_o,source:_,style_zoom:g},$+1)))}}return j}}]),e}(),LabelMainPass=function(){function e(o,h,d,g){_classCallCheck(this,e),Object.assign(this,o),this.placed=null,this._tile=g;var _=Geo$1.unitsPerMeter(g.coords.z)*Math.pow(2,d-g.style_zoom);this.layout=Object.assign({},o.layout),this.layout.repeat_scale=.75,this.layout.repeat_distance=this.layout.repeat_distance||0,this.layout.repeat_distance/=_,this.position=Geo$1.tileSpaceToMeters(this.position,g.coords.z,g.min),this._worldToScreen=h,this._screenSpaceBoundingBox=void 0,this._boundingCircles=void 0}return _createClass(e,[{key:"getTile",value:function(){return this._tile}},{key:"isFlat",value:function(){return this.is_flat}},{key:"getScreenSpaceBoundingBox",value:function(){var o,h,d,g,_,$,j;return this._screenSpaceBoundingBox||((o=this._worldToScreen(this.position,!0))[0]+=this.offset[0],o[1]+=this.offset[1],h=this.size[0]/2+this.layout.buffer[0],d=this.size[1]/2+this.layout.buffer[1],g=o[0]-h,_=o[0]+h,$=o[1]-d,j=o[1]+d,this._screenSpaceBoundingBox={left:g,bottom:j,right:_,top:$}),this._screenSpaceBoundingBox}},{key:"getBoundingCircles",value:function(){return this._boundingCircles||(this._boundingCircles=this.type==="point"?this._convertSidesToScreenSpaceCircles():this._convertCirclesToScreenSpace()),this._boundingCircles}},{key:"_convertSidesToScreenSpaceCircles",value:function(){var o=this._tile.coords.z,h=this._tile.min,d=Geo$1.tileSpaceToMeters([this.sides[0],this.sides[1]],o,h),g=Geo$1.tileSpaceToMeters([this.sides[2],this.sides[3]],o,h),_=_slicedToArray(this._worldToScreen(d,!0),2),$=_[0],j=_[1],_t=_slicedToArray(this._worldToScreen(g,!0),2);return encircleLine($,j,_t[0],_t[1],this.size[1]/2+this.layout.buffer[1])}},{key:"_convertCirclesToScreenSpace",value:function(){for(var o=[],h=this.circles,d=this._tile.coords.z,g=this._tile.min,_=0;_<h.length-2;_+=3){var $=Geo$1.tileSpaceToMeters([h[_],-h[_+1]],d,g),j=h[_+2]/Geo$1.unitsPerMeter(d),_t=[$[0]+j,$[1]],_e=this._worldToScreen($,!0),_r=this._worldToScreen(_t,!0),_n=MathUtils$1.getLineLength(_e[0],_e[1],_r[0],_r[1]);o.push(_e[0],_e[1],_n)}return o}}]),e}(),labelsMainPass={mainThreadLabelCollisionPass},visible={},prev_visible={},IS_LITTLE_ENDIAN=new Uint8Array(new Uint32Array([305419896]).buffer)[0]===120;function _createContainer(e,o,h,d,g){var _=e.container,$=_.label,j=_.linked,_t=e.ranges;return{label:new LabelMainPass($,h,d,g),linked:j,ranges:_t,mesh:o}}function mainThreadLabelCollisionPass(e,o,h,d,g,_){prev_visible=visible,visible={};var $={},j={},_t=[],_e=h.worldToScreen.bind(h),_r=new TextMeshHelper(_);for(var _n in e.forEach(function(_f){for(var _h in _f.meshes)_f.meshes[_h].forEach(function(_d){if(_d.labels){for(var ty in _r.trackMesh(_d),_d.labels["non-collision"]){var ey=_createContainer(_d.labels["non-collision"][ty],_d,_e,o,_f);ey.label.text_data&&_r.insertLabel(ey,_f)}for(var sy in _d.labels.collision){var ny;$[sy]||(ny=_createContainer(_d.labels.collision[sy],_d,_e,o,_f),$[sy]=ny.label,j[sy]=ny)}}})}),j){var _i=j[_n];_i.linked&&(_i.linked=j[_i.linked]),_t.push(_i)}var _o=h.getViewport(),_a=_o.width,_u=_o.height;return Collision.startTile("main",{apply_repeat_groups:!0,return_hidden:!0,grid_index:new GridIndex(_a,_u,30)}),Collision.addStyle("main","main"),Collision.collide(_t,"main","main").then(function(_f){return _f.forEach(function(_h){var _d,ty,ey,sy,ny,uy,fy=_h.mesh,yy=_h.label.getTile();fy.valid&&(!(_d=0)!==_h.show||d&&_h.label.breach&&!prev_visible[_h.label.id]||(_d=1),_d&&(visible[_h.label.id]=!0),_h.label.text_data&&_r.insertLabel(_h,yy),ty=fy.vertex_layout.offset.a_shape,ey=fy.vertex_layout.stride,ny=(sy=fy.vertex_layout.attribs.find(function(xy){return xy.name==="a_shape"})).byte_size/sy.size,ty+=3*ny,uy=!0,_h.ranges.forEach(function(xy){if(uy){for(var Ey=0;Ey<xy[1];Ey++){if(fy.vertex_data[xy[0]+Ey*ey+ty]===_d)return void(uy=!1);fy.vertex_data[xy[0]+Ey*ey+ty]=_d}_r.trackMesh(fy)}}))}),_r.createTextures(g).then(function(){return _r.updateMeshes()})}).then(function(_f){_f.forEach(function(_h){return _h.valid&&_h.upload()}),e.forEach(function(_h){_h.labeled=!0}),_t=[],j={},$={}})}var TextMeshHelper=function(){function e(o){_classCallCheck(this,e),this.textureManager=getTextureManager(o),this.tiles={},this.meshes=[],this.containers=[]}return _createClass(e,[{key:"insertLabel",value:function(o,h){var d=o.label.text_data,g=d.text_settings_key,_=d.text,$=d.text_info;this.containers.push(o);var j=this._ensureTextSection(h,g);j[_]?o.label.text_data.text_info=j[_]:j[_]=$}},{key:"trackMesh",value:function(o){this.meshes.indexOf(o)===-1&&this.meshes.push(o)}},{key:"updateMeshes",value:function(){var o=this;return this.containers.forEach(function(h){var d,g,_,$,j,_t,_e,_r,_n,_i;h.label.text_data&&(d=h.label.getTile(),(g=h.mesh).valid?(_=h.label.type,$=h.label.text_data.text_info,o.tiles[d.id]&&o.tiles[d.id].textures&&(j=o.tiles[d.id].textures[0],g.uniforms.u_texture=j,g.textures.indexOf(j)===-1&&g.textures.push(j),_==="point"||_==="straight"?(_t=_==="point"?$.align[h.label.align].texcoords:$.texcoords[_].texcoord,o.setTexCoords(g,h,_t)):_==="curved"&&(_e=$.segments.length,_r=$.texcoords_stroke,_n=$.texcoords.curved,o.setTexCoords(g,h,function(_o){return _o<_e?_r[_o]:_n[_o-_e].texcoord})))):o.tiles[d.id]&&o.tiles[d.id].textures&&(_i=o.tiles[d.id].textures[0],o.textureManager.release(_i)))}),this.meshes}},{key:"setTexCoords",value:function(o,h,d){var g,_,$,j,_t,_e,_r=d instanceof Function;_r||(_=(g=_slicedToArray(d,4))[0],$=g[1],j=g[2],_t=g[3],_e=[[_,$],[j,$],[j,_t],[_,_t]]);var _n=o.vertex_layout.stride,_i=new DataView(o.vertex_data.buffer),_o=o.vertex_layout.offset.a_texcoord;h.ranges.forEach(function(_a,_u){var _f,_h,_d,ty,ey,sy=_slicedToArray(_a,3),ny=sy[0],uy=sy[1],fy=sy[2];_r&&(_h=(_f=_slicedToArray(d(_u),4))[0],_d=_f[1],ty=_f[2],ey=_f[3],_e=[[_h,_d],[ty,_d],[ty,ey],[_h,ey]]);for(var yy=fy?uy/2:0;yy<uy;yy++){var xy=_e[yy%4],Ey=ny+yy*_n;_i.setUint16(Ey+_o,xy[0]*texcoord_normalize,IS_LITTLE_ENDIAN),_i.setUint16(Ey+_o+2,xy[1]*texcoord_normalize,IS_LITTLE_ENDIAN)}})}},{key:"createTextures",value:function(o){var h=this;return Promise.all(Object.values(this.tiles).map(function(d){var g=d.id,_=d.key,$=d.texts;return h._createTexturesForTile(o,$,"labels-".concat(_,"-").concat(g),g,h.textureManager).then(function(j){j.length&&(j.forEach(function(_t){h.textureManager.retain(_t),1<h.textureManager.getRetainCount(_t)&&h.textureManager.release(_t)}),h.tiles[g].textures=j)})}))}},{key:"_createTexturesForTile",value:function(o,h,d,g,_){var $=new CanvasText,j=$.setTextureTextPositions(h);return $.rasterize(h,j,g,d,o,_)}},{key:"_ensureTile",value:function(o){var h=o.id,d=o.key;return this.tiles[h]||(this.tiles[h]={id:h,key:d,texts:{}}),this.tiles[h]}},{key:"_ensureTextSection",value:function(o,h){var d=this._ensureTile(o).texts;return d[h]||(d[h]={}),d[h]}}]),e}(),TILE_VISIBILITY_COUNTER_THRESHOLD=30,TileManager=function(){function e(o){var h=this,d=o.scene,g=o.view;_classCallCheck(this,e),this._scene=d,this._view=g,this._visible_tiles={},this._pyramid=new TilePyramid,this._visible_coords={},this._building_tiles=null,this._renderable_tiles=[],this._active_styles=[],this._tile_visibility_counters={},this._update_labels_on_queue_check=!1,this._all_visible_tiles_are_cached=!1,this._debouncedUpdateLabels=debounce(this._updateLabels.bind(this),100,200),this._main_thread_target=["TileManager",this._scene.id].join("_"),WorkerBroker.addTarget(this._main_thread_target,this),this._keepCoordinate=this._keepCoordinate.bind(this),this._removeTilesFilter=this._removeTilesFilter.bind(this),this._removeCachedTilesFilter=this._removeCachedTilesFilter.bind(this),this._is_labeled=!1,this._tile_cache=new H.util.Cache(getMaxTileCacheSize(),function(_,$,j){h._visible_tiles[_]&&h._visible_tiles[_]===$||$.destroy()})}return _createClass(e,[{key:"destroy",value:function(){this._tile_cache.removeAll(),this.forEachVisibleTile(function(o){return o.destroy()}),this._visible_tiles={},this._pyramid=null,this._visible_coords={},this._scene=null,this._view=null}},{key:"keepTile",value:function(o){this._visible_tiles[o.key]=o,this._pyramid.addTile(o)}},{key:"hasTile",value:function(o){return this._visible_tiles[o]!==void 0}},{key:"_forgetTile",value:function(o){var h,d;this.hasTile(o)&&(h=this._visible_tiles[o],this._pyramid.removeTile(h),delete this._visible_tiles[o],h.loaded?this._tile_cache.add(h.key,h,getTileByteLength(h)):(d=this._tile_cache.get(h.key))?this._tile_cache.drop(d.key):h.destroy(),this._tileBuildStop(h))}},{key:"removeTile",value:function(o){this._forgetTile(o),this._scene.requestRedraw()}},{key:"forEachVisibleTile",value:function(o){for(var h in this._visible_tiles)o(this._visible_tiles[h])}},{key:"removeTiles",value:function(o){for(var h in this._visible_tiles)o(this._visible_tiles[h])&&this.removeTile(h)}},{key:"removeCachedTiles",value:function(o){var h=this;this._tile_cache.forEach(function(d,g){o(g)&&h._tile_cache.drop(d)})}},{key:"updateTilesForView",value:function(o){var h=0<arguments.length&&o!==void 0&&o;this._visible_coords={};for(var d=this._view.findVisibleTileCoordinates(),g=0;g<d.length;g++){var _=d[g];this._visible_coords[_.key]=_}this.updateTileStates(h)}},{key:"updateTileStates",value:function(o){var h=0<arguments.length&&o!==void 0&&o;for(var d in this._all_visible_tiles_are_cached=!0,this._visible_coords)this._keepCoordinate(d,h);this._all_visible_tiles_are_cached&&(this._is_labeled=!1,this._debouncedUpdateLabels()),this._tile_cache.removeAll(this._removeCachedTilesFilter),this._updateProxyTiles(),this.removeTiles(this._removeTilesFilter),this._updateRenderableTiles(),this._updateActiveStyles()}},{key:"_removeTilesFilter",value:function(o){if(o.style_zoom===this._view.lookAtManipulator.getLookAtData().tile_level){if(this._visible_coords[o.coords.key])return!1;for(var h in this._visible_coords)if(Tile.isDescendant(o.coords,this._visible_coords[h]))return!1}return!o.isProxy()}},{key:"_updateLabels",value:function(){var o,h=this;this._building_tiles&&Object.keys(this._building_tiles).length!==0||(CanvasText.pruneTextCache(),o=this._renderable_tiles.sort(compareTileCoords),labelsMainPass.mainThreadLabelCollisionPass(o,roundPrecision(this._view.lookAtManipulator.getLookAtData().zoom,2),this._view.lookAtManipulator,this.isLoadingVisibleTiles(),this._scene.gl,this._scene.id).then(function(){h._is_labeled=!Task.hasPendingTasks(),h._scene&&h._scene.immediateRedraw(),h._update_labels_on_queue_check=!1}))}},{key:"_updateProxyTiles",value:function(){var o,h=this,d=this._view.lookAtManipulator.getZoomDirection();d!==0&&(o=!1,this.forEachVisibleTile(function(g){var _;if(g.setProxyFor(null),d===1)g.built||(_=h._pyramid.getAncestor(g))&&(_.setProxyFor(g),o=!0);else if(d===-1&&!g.built)for(var $=h._pyramid.getDescendants(g),j=0;j<$.length;j++)$[j].setProxyFor(g),o=!0}),o||this._view.lookAtManipulator.resetZoomDirection())}},{key:"getRenderableTiles",value:function(){return this._renderable_tiles}},{key:"_updateRenderableTiles",value:function(){for(var o in this._renderable_tiles=[],this._visible_tiles){var h=this._visible_tiles[o],d=this._tile_cache.get(o);h.loaded?(this._renderable_tiles.push(h),d&&d!==h&&this._tile_cache.drop(o)):d&&(d.generation===this._scene.generation?this._renderable_tiles.push(d):this._tile_cache.drop(o))}return this._renderable_tiles}},{key:"getWorkerForTile",value:function(o,h){var d=h.has_volatile_data?this._scene.getWorkers(WorkerType.FAKE)[0]:h.tiled?this._scene.getWorkers(WorkerType.NATIVE)[Math.abs(o.x+o.y+o.z)%this._scene.num_workers]:this._scene.getWorkers(WorkerType.NATIVE)[h.id%this._scene.num_workers];return d}},{key:"getActiveStyles",value:function(){return this._active_styles}},{key:"_updateActiveStyles",value:function(){for(var o=this._renderable_tiles,h={},d=0;d<o.length;d++){var g=o[d];Object.keys(g.meshes).forEach(function(_){return h[_]=!0})}return this._active_styles=Object.keys(h),this._active_styles}},{key:"isLoadingVisibleTiles",value:function(){var o=!1;for(var h in this._visible_tiles)if(!this._visible_tiles[h].built){o=!0;break}return o}},{key:"updateTilesVisibilityCounters",value:function(){var o=this;Object.keys(this._visible_coords).forEach(function(g){g in o._tile_visibility_counters||(o._tile_visibility_counters[g]=0)});var h=Object.keys(this._tile_visibility_counters),d=[];h.forEach(function(g){g in o._visible_coords?(o._tile_visibility_counters[g]++,o._tile_visibility_counters[g]>=TILE_VISIBILITY_COUNTER_THRESHOLD&&d.push(o._visible_coords[g])):(o._tile_visibility_counters[g]--,o._tile_visibility_counters[g]<=0&&delete o._tile_visibility_counters[g])}),d.length&&this.loadCoordinates(d)}},{key:"loadCoordinates",value:function(o){var h=this;o.sort(function(d,g){var _=h._view.lookAtManipulator.getLookAtData().position,$=Geo$1.metersPerTile(d.z)/2,j=Geo$1.metersForTile(d);j.x+=$,j.y-=$;var _t=Geo$1.metersForTile(g);_t.x+=$,_t.y-=$;var _e=Math.abs(_[0]-j.x)+Math.abs(_[1]-j.y),_r=Math.abs(_[0]-_t.x)+Math.abs(_[1]-_t.y);return(d.center_dist=_e)<(g.center_dist=_r)?-1:_r===_e?0:1}),o.forEach(function(d){return h.loadCoordinate(d)})}},{key:"_keepCoordinate",value:function(o,h){var d=1<arguments.length&&h!==void 0&&h,g=this._visible_coords[o];if(g.z===this._view.center_tile.z)for(var _ in this._scene.sources){var $,j,_t,_e=this._scene.sources[_];_e.builds_geometry_tiles&&_e.includesTile(g,this._view.lookAtManipulator.getLookAtData().tile_level)&&($=Tile.normalizedKey(g,_e,this._view.lookAtManipulator.getLookAtData().tile_level))&&!this.hasTile($)&&((j=d&&this._tile_cache.get($))||(this._all_visible_tiles_are_cached=!1),_t=j||new Tile({source:_e,coords:g,worker:this.getWorkerForTile(g,_e),style_zoom:Utils$1.zoomToTileLevel(g.z),view:this._view,sceneId:this._scene.id}),_e.config.type==="ObjectSource"&&(_t.syncedAt=_e.getSyncedAt()),this.keepTile(_t))}}},{key:"loadCoordinate",value:function(o){if(o.z===this._view.center_tile.z)for(var h in this._scene.sources){var d,g=this._scene.sources[h];g.builds_geometry_tiles&&g.includesTile(o,this._view.lookAtManipulator.getLookAtData().tile_level)&&(d=Tile.normalizedKey(o,g,this._view.lookAtManipulator.getLookAtData().tile_level),this.hasTile(d)&&this.buildTile(this._visible_tiles[d]))}}},{key:"buildTile",value:function(o,h){this._building_tiles&&this._building_tiles[o.key]||o.built&&o.generation===this._scene.generation||(this._tileBuildStart(o.key),o.build(this._scene.generation,h))}},{key:"buildTileStylesCompleted",value:function(o){var h=o.tile,d=o.progress;if(this._visible_tiles[h.key]==null)Tile.abortBuild(h,this._scene.id);else if(h.generation!==this._scene.generation)Tile.abortBuild(h,this._scene.id);else{if(h.id<this._visible_tiles[h.key].id)return void Tile.abortBuild(h,this._scene.id);h=this._visible_tiles[h.key].merge(h),d.done&&(h.built=!0),h.buildMeshes(this._scene.styles,d),this.updateTileStates(),this._scene.requestRedraw()}d.done&&this._tileBuildStop(h)}},{key:"buildTileError",value:function(o){this._forgetTile(o.key),Tile.abortBuild(o,this._scene.id)}},{key:"_tileBuildStart",value:function(o){this._is_labeled=!1,this._building_tiles=this._building_tiles||{},this._building_tiles[o]=!0}},{key:"_tileBuildStop",value:function(o){this._building_tiles&&(o.source&&o.source.hasLabeledData()&&(this._update_labels_on_queue_check=!0),delete this._building_tiles[o.key],Task.removeForTile(o.id),this.checkBuildQueue())}},{key:"isReady",value:function(){return this._is_labeled&&!this.isLoadingVisibleTiles()}},{key:"checkBuildQueue",value:function(){this._building_tiles&&Object.keys(this._building_tiles).length!==0||(this._building_tiles=null,this._update_labels_on_queue_check?this._updateLabels():(this._is_labeled=!Task.hasPendingTasks(),this._scene.immediateRedraw()))}},{key:"_removeCachedTilesFilter",value:function(o,h){var d=h.source;return!this._visible_tiles[o]&&(h.generation!==this._scene.generation||d.config.type==="ObjectSource"&&d.getSyncedAt()>h.syncedAt)}}]),e}();function compareTileCoords(e,o){var h=e.coords,d=o.coords;return h.z-d.z||h.x-d.x||h.y-d.y}function roundPrecision(e,o){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2,d=Math.pow(10,h);return Math.round(Math.floor(e*o)/o*d)/d}function getTileByteLength(e){var o=0;for(var h in e.meshes)for(var d=e.meshes[h],g=0;g<d.length;g++){var _=d[g];o+=_.buffer_size;for(var $=0;$<_.textures.length;$++)o+=e.textureManager.getByteLength(_.textures[$])}return o}function getMaxTileCacheSize(){var e=.1;return navigator&&navigator.deviceMemory?e=5*navigator.deviceMemory/100:window&&window.screen&&(e=window.screen.width/512*window.screen.height/512*.03*3,e=Math.min(e,1)),1024*e*1024*1024}var RenderState=function(){function e(o,h){_classCallCheck(this,e),h(o),this.value=o,this.setup=h}return _createClass(e,[{key:"get",value:function(){return this.value}},{key:"set",value:function(o){JSON.stringify(this.value)!==JSON.stringify(o)&&(this.setup(o),this.value=o)}}]),e}(),RenderStateManager=function e(o){_classCallCheck(this,e),this.defaults={},this.defaults.culling=!0,this.defaults.culling_face=o.BACK,this.defaults.blending=!1,this.defaults.blending_src=o.ONE_MINUS_SRC_ALPHA,this.defaults.blending_dst=o.ONE_MINUS_SRC_ALPHA,this.defaults.blending_src_alpha=o.ONE,this.defaults.blending_dst_alpha=o.ONE_MINUS_SRC_ALPHA,this.defaults.depth_write=!0,this.defaults.depth_test=!0,o.depthFunc(o.LESS),this.culling=new RenderState({cull:this.defaults.culling,face:this.defaults.culling_face},function(h){h.cull?(o.enable(o.CULL_FACE),o.cullFace(h.face)):o.disable(o.CULL_FACE)}),this.blending=new RenderState({blend:this.defaults.blending,src:this.defaults.blending_src,dst:this.defaults.blending_dst,src_alpha:this.defaults.blending_src_alpha,dst_alpha:this.defaults.blending_dst_alpha},function(h){h.blend?(o.enable(o.BLEND),h.src_alpha&&h.dst_alpha?o.blendFuncSeparate(h.src,h.dst,h.src_alpha,h.dst_alpha):o.blendFunc(h.src,h.dst)):o.disable(o.BLEND)}),this.depth_write=new RenderState({depth_write:this.defaults.depth_write},function(h){o.depthMask(h.depth_write)}),this.depth_test=new RenderState({depth_test:this.defaults.depth_test},function(h){h.depth_test?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST)})},MediaCapture=function(){function e(){_classCallCheck(this,e),this.canvas=null,this.gl=null,this.screenshot_canvas=null,this.screenshot_context=null,this.queue_screenshot=null,this.video_capture=null}return _createClass(e,[{key:"setCanvas",value:function(o,h){this.canvas=o,this.gl=h}},{key:"screenshot",value:function(o){var h=this,d=(0<arguments.length&&o!==void 0?o:{}).background;return this.queue_screenshot!=null||(this.queue_screenshot={background:d},this.queue_screenshot.promise=new Promise(function(g,_){h.queue_screenshot.resolve=g,h.queue_screenshot.reject=_})),this.queue_screenshot.promise}},{key:"completeScreenshot",value:function(){if(this.queue_screenshot!=null){var o=this.canvas.width,h=this.canvas.height,d=new Uint8Array(o*h*4);this.gl.readPixels(0,0,o,h,this.gl.RGBA,this.gl.UNSIGNED_BYTE,d);for(var g=(g=this.queue_screenshot.background)&&g!=="transparent"?StyleParser.parseColor(g).slice(0,3).map(function(ty){return 255*ty}):null,_=new Uint8ClampedArray(o*h*4),$=0;$<h;$++)for(var j=0;j<o;j++){var _t=4*((h-$-1)*o+j),_e=4*($*o+j),_r=d[3+_t];_[0+_e]=255*d[0+_t]/_r,_[1+_e]=255*d[1+_t]/_r,_[2+_e]=255*d[2+_t]/_r,_[3+_e]=_r,g&&(_r/=255,_[0+_e]=_[0+_e]*_r+g[0]*(1-_r),_[1+_e]=_[1+_e]*_r+g[1]*(1-_r),_[2+_e]=_[2+_e]*_r+g[2]*(1-_r),_[3+_e]=255)}this.screenshot_canvas=this.screenshot_canvas||document.createElement("canvas");var _n=this.screenshot_canvas;_n.width=o,_n.height=h,this.screenshot_context=this.screenshot_context||_n.getContext("2d");var _i=this.screenshot_context,_o=new ImageData(_,o,h);_i.putImageData(_o,0,0);for(var _a=_n.toDataURL("image/png"),_u=atob(_a.slice(22)),_f=new Uint8Array(_u.length),_h=0;_h<_u.length;++_h)_f[_h]=_u.charCodeAt(_h);var _d=new Blob([_f],{type:"image/png"});this.queue_screenshot.resolve({url:_a,blob:_d,type:"png"}),this.queue_screenshot=null}}},{key:"startVideoCapture",value:function(){var o=this;if(typeof window.MediaRecorder!="function"||!this.canvas||typeof this.canvas.captureStream!="function")return log("warn","Video capture (Canvas.captureStream and/or MediaRecorder APIs) not supported by browser"),!1;if(this.video_capture)return log("warn","Video capture already in progress, call Scene.stopVideoCapture() first"),!1;try{var h=this.video_capture={};h.chunks=[],h.stream=this.canvas.captureStream(),h.options={mimeType:"video/webm"},h.media_recorder=new MediaRecorder(h.stream,h.options),h.media_recorder.ondataavailable=function(d){var g,_;0<d.data.size&&h.chunks.push(d.data),h.resolve&&(_=createObjectURL(g=new Blob(h.chunks,{type:h.options.mimeType})),h.stream&&(h.stream.getTracks()||[]).forEach(function($){$.stop(),h.stream.removeTrack($)}),h.stream=null,h.media_recorder=null,o.video_capture=null,h.resolve({url:_,blob:g,type:"webm"}))},h.media_recorder.start()}catch(d){return this.video_capture=null,log("error","Scene video capture failed",d),!1}return!0}},{key:"stopVideoCapture",value:function(){var o=this;return this.video_capture?(this.video_capture.promise=new Promise(function(h,d){o.video_capture.resolve=h,o.video_capture.reject=d}),this.video_capture.media_recorder.stop(),this.video_capture.promise):(log("warn","No scene video capture in progress, call Scene.startVideoCapture() first"),Promise.resolve({}))}}]),e}(),SceneWorker=function(){function e(){_classCallCheck(this,e),this.sources={},this.styles={},this.layers={},this.tiles={},this._isConfigured=!1}return _createClass(e,[{key:"init",value:function(o,h,d,g,_,$,j){return this.setMeshVariantMaxLife(j),this.scene_id=o,this.textureManager=getTextureManager(o),this._worker_id=h,log.setLevel(d),Utils$1.device_pixel_ratio=g,VertexElements.setElementIndexUint(_),FeatureSelection.setPrefix(this._worker_id),this._style_manager=new StyleManager,this._importExternalScripts($),Label.id_prefix=h,this._isConfigured=!1,h}},{key:"dispose",value:function(){this._last_config_sources=null,this._config_sources=null,this.sources=null,this._style_manager=null,this.styles=null,this.layers=null,this.tiles=null}},{key:"_importExternalScripts",value:function(o){var h;o.length!==0&&(log("debug","loading custom data source scripts in worker:",o),h=Object.getOwnPropertyNames(window),importScripts.apply(void 0,_toConsumableArray(o)),Object.getOwnPropertyNames(window).forEach(function(d){h.indexOf(d)===-1&&(self[d]=window[d])}))}},{key:"updateConfig",value:function(o,h){var _=o.config,d=o.generation,g=o.introspection,_=JSON.parse(_);for(var $ in mergeDebugSettings(h),this._generation=d,this._isConfigured=!1,_.layers)_.layers[$]&&(_.layers[$].data=Utils$1.stringsToFunctions(_.layers[$].data));this.global=Utils$1.stringsToFunctions(_.global),this._createDataSources(_),_.styles=Utils$1.stringsToFunctions(_.styles,StyleParser.wrapFunction),this.styles=this._style_manager.build(_.styles),self.is_fake_worker=Thread.is_main,this._style_manager.initStyles({generation:this._generation,styles:this.styles,sources:this.sources,introspection:g,id:this.scene_id}),delete self.is_fake_worker,this.layers=parseLayers(_.layers,this._style_manager.styles),this._configuring=this._syncTextures(_.textures)}},{key:"setMeshVariantMaxLife",value:function(o){this.meshVariantMaxLife=o}},{key:"_createDataSources",value:function(o){var h=this;this._last_config_sources=this._config_sources||{},this._config_sources=o.sources;var d=this.sources,g=[];for(var _ in o.sources=Utils$1.stringsToFunctions(o.sources),this.sources={},self.is_fake_worker=Thread.is_main,o.sources)if(JSON.stringify(this._last_config_sources[_])!==JSON.stringify(o.sources[_])){var $=void 0;try{$=DataSource.create(Object.assign({},o.sources[_],{name:_}),this.sources)}catch(j){log("error","Error creating source.",j.message,o.sources[_]);continue}$&&(this.sources[_]=$,g.push(_))}else this.sources[_]=d[_];delete self.is_fake_worker,g.forEach(function(j){for(var _t in h.tiles)h.tiles[_t].source===j&&delete h.tiles[_t]})}},{key:"awaitConfiguration",value:function(){return this._configuring}},{key:"_onConfig",value:function(o){var h=this;if((this._isConfigured=!0)!==o.loaded)o.loading=!0,o.loaded=!1,o.error=null,this._loadTileSourceData(o).then(function(){if(h.getTile(o.id)){o.loading=!1,o.loaded=!0;try{Tile.buildGeometry(o,h)}catch(d){o.error=d.toString(),WorkerBroker.postMessage("TileManager_".concat(h.scene_id,".buildTileError"),Tile.slice(o))}}else log("trace","stop tile build after data source load because tile was removed. Key: ".concat(o.key,", id: ").concat(o.id))},function(d){o.loading=!1,o.loaded=!1,o.error=d.stack,log("error","tile load error for tile with key ".concat(o.key," and id ").concat(o.id,": ").concat(o.error)),WorkerBroker.postMessage("TileManager_".concat(h.scene_id,".buildTileError"),Tile.slice(o))});else{log("trace","used worker cache for tile with key ".concat(o.key," and id ").concat(o.id));try{Tile.buildGeometry(o,this)}catch(d){o.error=d.toString(),WorkerBroker.postMessage("TileManager_".concat(this.scene_id,".buildTileError"),Tile.slice(o))}}}},{key:"buildTile",value:function(o){var h,d=o.tile,g=this.getTile(d.id);g&&g.loading||(d=this.tiles[d.id]=Object.assign(g||{},d),this._isConfigured?this._onConfig(d):(h=this).awaitConfiguration().then(function(){return h._onConfig(d)}))}},{key:"_loadTileSourceData",value:function(o){return this.sources[o.source]?this.sources[o.source].load(o):(o.source_data={},Promise.resolve(o))}},{key:"getTile",value:function(o){return this.tiles[o]}},{key:"removeTile",value:function(o){var h=this.tiles[o];h!=null&&(h.loading===!0&&(log("trace","cancel tile load for tile id ".concat(o)),h.loading=!1,Tile.cancel(h)),delete this.tiles[o],log("trace","remove tile from cache, tile id: ".concat(o)))}},{key:"queryFeatures",value:function(o){var h=this,d=o.filter,g=o.visible,_=o.geometry,$=o.tile_ids,j=[],_t=$.map(function(_e){return h.tiles[_e]}).filter(function(_e){return _e});return d!=null&&(d=-1<["{","["].indexOf(d[0])?JSON.parse(d):d,d=Utils$1.stringsToFunctions(d,StyleParser.wrapFunction)),d=buildFilter(d,FilterOptions),_t.forEach(function(_e){for(var _r in _e.source_data.layers)(function(_n){_e.source_data.layers[_n].features.forEach(function(_i){var _o,_a;g===!0&&_i.generation!==h._generation||g===!1&&_i.generation===h._generation||((_o=StyleParser.getFeatureParseContext(_i,_e,h.global)).source=_e.source,_o.layer=_n,d(_o)&&(_a={type:_i.type,properties:_i.properties},_===!0&&(_a.geometry=Geo$1.copyGeometry(_i.geometry),Geo$1.tileSpaceToLatlng(_a.geometry,_e.coords.z,_e.min)),j.push(_a)))})})(_r)}),j}},{key:"resetFeatureSelection",value:function(){FeatureSelection.reset()}},{key:"_syncTextures",value:function(o){var h=[];return o&&h.push.apply(h,_toConsumableArray(Object.keys(o))),log("trace","sync textures to worker:",h),0<h.length?this.textureManager.syncTexturesToWorker(h):Promise.resolve()}},{key:"profile",value:function(o){console.profile("worker ".concat(this._worker_id,": ").concat(o))}},{key:"profileEnd",value:function(o){console.profileEnd("worker ".concat(this._worker_id,": ").concat(o))}},{key:"terminate",value:function(){this.dispose()}}]),e}();(Thread.is_worker||self.H&&self.H.DEBUG)&&WorkerBroker.addTarget("self",new SceneWorker);var Scene=function(){function e(o,h){_classCallCheck(this,e),h=h||{},subscribeMixin(this),this.id=e.id++,this.textureManager=getTextureManager(this.id),this.initialized=!1,this.initializing=null,this.sources={},this.view=new View(this,h),this.tile_manager=new TileManager({scene:this,view:this.view}),this.num_workers=h.numWorkers||2,h.disableVertexArrayObjects===!0&&(VertexArrayObject.disabled=!0),Utils$1.device_pixel_ratio=h.devicePixelRatio,this.config=null,this.config_source=o,this.config_bundle=null,this.last_valid_config_source=null,this.styles=null,this.style_manager=new StyleManager,this.building=null,this.dirty=!0,h.preUpdate&&this.subscribe({pre_update:h.preUpdate}),h.postUpdate&&this.subscribe({post_update:h.postUpdate}),this.render_loop=!h.disableRenderLoop,this.render_loop_active=!1,this.render_loop_stop=!1,this.render_count=0,this.last_render_count=0,this.render_count_changed=!1,this.frame=0,this.last_main_render=-1,this.last_selection_render=-1,this.media_capture=new MediaCapture,this.selection=null,this.introspection=h.introspection===!0,this.viewport=h.viewport,this.adjustMeshVariantMaxLife(),this.container=h.container,this.canvas=null,this.contextOptions=h.webGLContextOptions,this.lights=null,this.background=null,this.createListeners(),this.updating=0,this.generation=e.generation,this.last_complete_generation=e.generation,this.log_level=h.logLevel||"warn",log.setLevel(this.log_level),log.reset()}return _createClass(e,[{key:"load",value:function(o,h){var d=this,g=0<arguments.length&&o!==void 0?o:null,_=1<arguments.length&&h!==void 0?h:{};return this.initializing||(log.reset(),this.updating++,this.initialized=!1,this.initial_build_time=null,(_=typeof _=="string"?{base_path:_}:_).blocking=_.blocking===void 0||_.blocking,this.render_loop!==!1&&this.setupRenderLoop(),this.createCanvas(),this.textureManager.destroy(this.gl),this.initializing=this.loadScene(g,_).then(function(){return d.createWorkers()}).then(function(){d.resetFeatureSelection();var $=_typeof(d.config_source)==="object"||d.hasSubscribersFor("load"),j=d.updateConfig({serialize_funcs:$,normalize:!1,load_event:!0,fade_in:!0});if(_.blocking===!0)return j}).then(function(){d.updating--,d.initializing=null,d.initialized=!0,d.last_valid_config_source=d.config_source,d.last_valid_options={base_path:_.base_path,file_type:_.file_type},d.requestRedraw()}).catch(function($){var j,_t;if(d.initializing=null,d.updating=0,_t=$.name==="YAMLException"?(j="yaml","Error parsing scene YAML"):"Error initializing scene",d.trigger("error",{type:j,message:_t,error:$,url:d.config_source}),_t="Scene.load() failed to load ".concat(d.config_source,": ").concat($.message),d.last_valid_config_source)return log("warn",_t,$),log("info","Scene.load() reverting to last valid configuration"),d.load(d.last_valid_config_source,d.last_valid_base_path);throw log("error",_t,$),$})),this.initializing}},{key:"destroy",value:function(){var o;this.initialized=!1,this.render_loop_stop=!0,this.destroyListeners(),this.canvas&&this.canvas.parentNode&&(this.canvas.parentNode.removeChild(this.canvas),this.canvas=null),this.container=null,this.selection&&this.selection.destroy(),this.gl&&(this.textureManager.destroy(this.gl),this.style_manager.destroy(this.gl),this.styles={},ShaderProgram.reset(),(o=this.gl.getExtension("WEBGL_lose_context"))&&o.loseContext(),this.gl=null),this.sources={},this.tile_manager.destroy(),this.tile_manager=null,this.destroyWorkers(),log.reset()}},{key:"createCanvas",value:function(){if(!this.canvas){this.container=this.container||document.body,this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.container.style.backgroundColor="transparent",this.container.appendChild(this.canvas);try{this.gl=Context$1.getContext(this.canvas,Object.assign({alpha:!0,premultipliedAlpha:!1,stencil:!0,device_pixel_ratio:Utils$1.device_pixel_ratio},this.contextOptions))}catch{throw new Error("Couldn't create WebGL context. Your browser may not support WebGL, or it's turned off? Visit http://webglreport.com/ for more info.")}this.handleViewportUpdate(),VertexArrayObject.init(this.gl),this.render_states=new RenderStateManager(this.gl),this.media_capture.setCanvas(this.canvas,this.gl)}}},{key:"getWorkerUrl",value:function(){var o,h;if(__worker_src__!==void 0&&(h="("+__worker_src__+")()",__worker_src_origin__&&__worker_src_map__!==""&&(h+=`
//# sourceMappingURL=`+__worker_src_origin__.slice(0,__worker_src_origin__.lastIndexOf("/")+1)+__worker_src_map__),o=createObjectURL(new Blob([h],{type:"application/javascript"}))),!o)throw new Error("Couldn't find internal Tangram source variable (may indicate the library did not build correctly)");return o}},{key:"updateExternalScripts",value:function(){var o=_toConsumableArray(this.external_scripts||[]),h=[];if(this.config.scene.scripts)for(var d in this.config.scene.scripts)h.indexOf(this.config.scene.scripts[d])===-1&&h.push(this.config.scene.scripts[d]);for(var g in this.config.sources){var _=this.config.sources[g];if(_.scripts)for(var $ in _.scripts)h.indexOf(_.scripts[$])===-1&&h.push(_.scripts[$])}return this.external_scripts=h,!(this.external_scripts.length===o.length&&this.external_scripts.every(function(j,_t){return j===o[_t]}))}},{key:"createWorkers",value:function(){return this.updateExternalScripts()&&this.destroyWorkers(),this._workers?Promise.resolve():this.makeWorkers(this.getWorkerUrl())}},{key:"makeWorkers",value:function(o){var h=this,d=!!this.gl.getExtension("OES_element_index_uint"),g=[];this._workers=[];for(var _=0;_<this.num_workers;_++)(function(){var j=new Worker(o);h._workers[_]=j,WorkerBroker.addWorker(j),log("debug","Scene.makeWorkers: initializing worker ".concat(_));var _t=_;g.push(WorkerBroker.postMessage(j,"self.init",h.id,_,h.log_level,Utils$1.device_pixel_ratio,d,h.external_scripts,h.meshVariantMaxLife).then(function(_e){return log("debug","Scene.makeWorkers: initialized worker ".concat(_e)),_e},function(_e){return log("error","Scene.makeWorkers: failed to initialize worker ".concat(_t,":"),_e),Promise.reject(_e)}))})();var $=new SceneWorker;return this._workers.push($),g.push($.init(this.id,_,this.log_level,Utils$1.device_pixel_ratio,d,[],this.meshVariantMaxLife)),this.next_worker=0,Promise.all(g).then(function(){log.setWorkers(h._workers.slice(0,h.num_workers)),revokeObjectURL(o)})}},{key:"getWorkers",value:function(o){return this._workers.filter(function(h){switch(o){case WorkerType.NATIVE:return h instanceof Worker;case WorkerType.FAKE:return h instanceof SceneWorker;default:return!0}})}},{key:"destroyWorkers",value:function(){this.selection=null,Array.isArray(this._workers)&&(log.setWorkers(null),this._workers.forEach(function(o){o.terminate()}),this._workers=null)}},{key:"ready",value:function(){return!(!this.view.ready()||Object.keys(this.sources).length===0)}},{key:"handleViewportUpdate",value:function(){var o=this.viewport,h=o.width,d=o.height;0<h&&0<d&&(this.dirty=!0,this.view.handleViewportUpdate(),this.gl&&Context$1.resize(this.gl,h,d,Utils$1.device_pixel_ratio)),this.adjustMeshVariantMaxLife()&&this.syncMeshVariantMaxLife()}},{key:"adjustMeshVariantMaxLife",value:function(){var o=this.viewport,h=o.width,d=o.height,g=Utils$1.device_pixel_ratio,_=h/g/256*(d/g/256),$=Math.max(Math.ceil(2*_),8);if(this.meshVariantMaxLife!==$)return this.meshVariantMaxLife=$,!0}},{key:"syncMeshVariantMaxLife",value:function(){this._workers&&WorkerBroker.postMessage(this._workers,"self.setMeshVariantMaxLife",this.meshVariantMaxLife)}},{key:"requestRedraw",value:function(){this.dirty=!0}},{key:"immediateRedraw",value:function(){this.dirty=!0,this.update()}},{key:"renderLoop",value:function(){this.render_loop_active=!0,this.initialized&&this.update(),Task.setState({user_moving_view:this.view.user_input_active}),Task.processAll(),this.render_loop_stop?(this.render_loop_stop=!1,this.render_loop_active=!1):window.requestAnimationFrame(this.renderLoop.bind(this))}},{key:"setupRenderLoop",value:function(){var o=this;this.render_loop_active||setTimeout(function(){o.renderLoop()},0)}},{key:"update",value:function(){var o=this.dirty,h=!!this.selection&&this.selection.hasPendingRequests(),d=!(o===!1&&h===!1||this.initialized===!1||0<this.updating||this.ready()===!1);return this.trigger("pre_update",d),this.view.update(),d&&(this.dirty=!1,this.render({main:o,selection:h}),this.updateViewComplete(),this.media_capture.completeScreenshot(),this.trigger("post_update",d),this.animated!==!0&&!this.view.isAnimating()||(this.dirty=!0),this.frame++,log("trace","Scene.render()"),!0)}},{key:"render",value:function(o){var h=this,d=o.main,g=o.selection,_=this.gl;if(Object.keys(this.lights).forEach(function($){return h.lights[$].update()}),d&&(this.render_count=this.renderPass(),this.last_main_render=this.frame),g){if(this.view.panning||this.view.user_input_active)return void this.selection.clearPendingRequests();(this.last_selection_render<this.last_main_render||this.selection.has_dirty_buffer)&&(this.selection.bind(),this.renderPass("selection_program",{allow_blend:!1}),_.bindFramebuffer(_.FRAMEBUFFER,null),_.viewport(0,0,this.canvas.width,this.canvas.height),_.clearColor.apply(_,_toConsumableArray(this.background.color)),this.last_selection_render=this.frame,this.selection.has_dirty_buffer=!1),this.selection.read(this.tile_manager.getRenderableTiles()),this.selection.has_dirty_buffer&&this.render({main:!1,selection:g})}return this.render_count_changed=!1,this.render_count!==this.last_render_count&&(this.render_count_changed=!0),this.last_render_count=this.render_count,!0}},{key:"renderPass",value:function(o,h){var d=this,g=0<arguments.length&&o!==void 0?o:"program",$=(1<arguments.length&&h!==void 0?h:{}).allow_blend,_=this.gl,$=$==null||$;this.clearFrame();for(var j,_t=Style.sortByBlendOrderWithinLayers(this.tile_manager.getActiveStyles().map(function(_h){return d.styles[_h]}).filter(function(_h){return _h})),_e=0,_r=0,_n=0;_n<_t.length;_n++){var _i,_o,_a=_t[_n],_u=_r-(_i=parseInt(_a.name));(_a.clean_depth||_u)&&(this.render_states.depth_write.value.depth_write?_.clear(_.DEPTH_BUFFER_BIT):(_.depthMask(!0),_.clear(_.DEPTH_BUFFER_BIT),_.depthMask(!1)),_u&&(_r=_i)),_a.blend!==j&&(_o=Object.assign({},Style.render_states[_a.blend],{blend:$&&_a.blend}),this.setRenderState(_o));var _f=_a.blend==="translucent"&&g==="program";_f&&(this.gl.colorMask(!1,!1,!1,!1),this.renderStyle(_a.name,g),this.gl.colorMask(!0,!0,!0,!0),this.gl.depthFunc(this.gl.EQUAL),this.gl.enable(this.gl.STENCIL_TEST),this.gl.clear(this.gl.STENCIL_BUFFER_BIT),this.gl.stencilFunc(this.gl.EQUAL,this.gl.ZERO,255),this.gl.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.INCR)),_e+=this.renderStyle(_a.name,g),_f&&(this.gl.disable(this.gl.STENCIL_TEST),this.gl.depthFunc(this.gl.LESS)),j=_a.blend}return _e}},{key:"renderStyle",value:function(o,h){for(var d,g=this,_=this.styles[o],$=!0,j=0,_t=this.tile_manager.getRenderableTiles(),_e=Math.max.apply(Math,_toConsumableArray(_t.map(function(_i){return _i.meshes[o]?Math.max.apply(Math,_toConsumableArray(_i.meshes[o].map(function(_o){return _o.variant.order}))):-1}))),_r=0;_r<_e+1;_r++){var _n=function(_i){for(var _o=0;_o<_t.length;_o++){var _a=_t[_o];if(_a.meshes[o]!=null&&_a.shouldProxyForStyle(o))for(var _u=_a.meshes[o].filter(function(ty){return ty.variant.order===_i}),_f=0,_h=_u.length;_f<_h;_f+=1){var _d=_u[_f];if($===!0&&($=!1,!(d=g.setupStyle(_,h))))return{v:0};g.view.setupTile(_a,d),g.selection.setupDiscards(d),_.render(_d)&&g.requestRedraw(),j+=_d.geometry_count}}}(_r);if(_typeof(_n)==="object")return _n.v}return j}},{key:"setupStyle",value:function(o,h){var d;try{if(!(d=o.getProgram(h)))return}catch{return void this.trigger("warning",{type:"styles",message:"Error compiling style ".concat(o.name),style:o,shader_errors:o.program&&o.program.shader_errors})}for(var g in d.use(),o.setup(),this.view.setupProgram(d),this.lights)this.lights[g].setupProgram(d);return d}},{key:"clearFrame",value:function(){this.initialized&&(this.render_states.depth_write.set({depth_write:!0}),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT))}},{key:"setRenderState",value:function(o){var h,d,g=0<arguments.length&&o!==void 0?o:{},_=g.depth_test,$=g.depth_write,j=g.cull_face,_t=g.blend;this.initialized&&(h=this.render_states,_=_!==!1&&h.defaults.depth_test,$=$!==!1&&h.defaults.depth_write,j=j!==!1&&h.defaults.culling,_t=_t??h.defaults.blending,d=this.gl,h.depth_test.set({depth_test:_}),h.depth_write.set({depth_write:$}),h.culling.set({cull:j,face:h.defaults.culling_face}),!_t||_t==="opaque"?h.blending.set({blend:!1}):_t==="overlay"||_t==="inlay"||_t==="translucent"?h.blending.set({blend:!0,src:d.SRC_ALPHA,dst:d.ONE_MINUS_SRC_ALPHA,src_alpha:d.ONE,dst_alpha:d.ONE_MINUS_SRC_ALPHA}):_t==="add"?h.blending.set({blend:!0,src:d.ONE,dst:d.ONE}):_t==="multiply"&&h.blending.set({blend:!0,src:d.ZERO,dst:d.SRC_COLOR}))}},{key:"getFeatureAt",value:function(o,h,d){var g,_=h.radius,$=h.top_most_only;this.initialized?(g={x:o.x/this.view.size.css.width,y:o.y/this.view.size.css.height},_=0<_?{x:_/this.view.size.css.width,y:_/this.view.size.css.height}:null,this.selection.getFeatureAt(g,{radius:_,top_most_only:$},d)):log("debug","Scene.getFeatureAt() called before scene was initialized")}},{key:"queryFeatures",value:function(o){var h=0<arguments.length&&o!==void 0?o:{},_n=h.filter,d=h.unique,g=d===void 0||d,_=h.group_by,$=_===void 0?null:_,j=h.visible,_t=j===void 0?null:j,_e=h.geometry,_r=_e!==void 0&&_e,_n=Utils$1.serializeWithFunctions(_n),_i=this.tile_manager.getRenderableTiles().map(function(_o){return _o.id});return WorkerBroker.postMessage(this._workers,"self.queryFeatures",{filter:_n,visible:_t,geometry:_r,tile_ids:_i}).then(function(_o){var _a=[],_u={},_f={},_h=(g=typeof g=="string"?[g]:g)&&function(ty){return JSON.stringify(Array.isArray(g)?sliceObject(ty,g):ty)},_d=($=(typeof $=="string"||Array.isArray($))&&$)&&function(ty){return Array.isArray($)?JSON.stringify(sliceObject(ty,$)):ty[$]};return _o.forEach(function(ty){return ty.forEach(function(ey){if(_h){var sy=_h(ey);if(_u[sy])return;_u[sy]=!0}var ny;_d?(ny=_d(ey.properties),_f[ny]=_f[ny]||[],_f[ny].push(ey)):_a.push(ey)})}),_d?_f:_a})}},{key:"loadScene",value:function(o,h){var d=this,g=0<arguments.length&&o!==void 0?o:null,_=1<arguments.length&&h!==void 0?h:{},$=_.base_path,j=_.file_type;return this.config_source=g||this.config_source,typeof this.config_source=="string"?this.base_path=pathForURL($||this.config_source):this.base_path=pathForURL($),this.config_path=this.base_path,SceneLoader$1.loadScene(this.config_source,{path:this.base_path,type:j}).then(function(_t){var _e=_t.config,_r=_t.bundle;return d.config=_e,d.config_bundle=_r,d.config})}},{key:"createDataSources",value:function(){var o=this,h=[],d=Object.keys(this.sources),g=0;for(var _ in this.config.sources){var $=this.config.sources[_],j=this.sources[_];try{var _t=Object.assign({},$,{name:_,id:g++});if(this.sources[_]=DataSource.create(_t,this.sources),!this.sources[_])throw{}}catch(_i){delete this.sources[_];var _e="Could not create data source: ".concat(_i.message);log("warn","Scene: ".concat(_e),$),this.trigger("warning",{type:"sources",source:$,message:_e})}DataSource.sameConfig(this.sources[_],j)||h.push(_)}for(var _r in d.forEach(function(_i){o.config.sources[_i]||(delete o.sources[_i],h.push(_i))}),0<h.length&&this.tile_manager.removeTiles(function(_i){return-1<h.indexOf(_i.source.name)}),this.config.layers){var _n=this.config.layers[_r];_n.enabled!==!1&&_n.data&&this.sources[_n.data.source]&&(this.sources[_n.data.source].builds_geometry_tiles=!0)}}},{key:"loadTextures",value:function(){var o=this;return this.textureManager.createFromObject(this.gl,this.config.textures).then(function(){return o.textureManager.createDefault(o.gl)})}},{key:"updateStyles",value:function(){if(!this.initialized&&!this.initializing)throw new Error("Scene.updateStyles() called before scene was initialized");for(var o in this.styles=this.style_manager.build(this.config.styles),this.style_manager.initStyles(this),this.styles)this.styles[o].setGL(this.gl);this.dirty=!0}},{key:"createLights",value:function(){for(var o in this.lights={},this.config.lights){var h;this.config.lights[o]&&_typeof(this.config.lights[o])==="object"&&((h=this.config.lights[o]).name=o.replace("-","_"),h.visible=h.visible!==!1,h.visible&&(this.lights[h.name]=Light.create(this.view,h)))}Light.inject(this.lights)}},{key:"setBackground",value:function(){var o,h=this.config.scene.background;this.background={},h&&h.color&&(this.background.color=StyleParser.parseColor(h.color)),this.background.color||(this.background.color=[0,0,0,0]),this.background.color[3]===1?this.canvas.style.backgroundColor="rgba(".concat(this.background.color.map(function(d){return Math.floor(255*d)}).join(", "),")"):this.canvas.style.backgroundColor="transparent",(o=this.gl).clearColor.apply(o,_toConsumableArray(this.background.color))}},{key:"setIntrospection",value:function(o){var h=this;return o!==this.introspection?(this.introspection=o||!1,this.updating++,this.updateConfig({normalize:!1}).then(function(){return h.updating--})):Promise.resolve()}},{key:"updateConfig",value:function(o){var h=0<arguments.length&&o!==void 0?o:{},d=h.load_event,g=d!==void 0&&d,_=h.serialize_funcs,$=h.normalize,j=$===void 0||$;h.fade_in,this.generation=++e.generation,this.updating++,this.config=SceneLoader$1.applyGlobalProperties(this.config),j?SceneLoader$1.normalize(this.config,this.config_bundle):(SceneLoader$1.hoistStyleShaderUniformTextures(this.config,this.config_bundle,{include_globals:!0}),SceneLoader$1.normalizeTextures(this.config,this.config_bundle)),this.trigger(g?"load":"update",{config:this.config}),this.style_manager.init(),this.createLights(),this.createDataSources(),this.loadTextures(),this.setBackground(),FontManager.loadFonts(this.config.fonts),this.updateStyles();var _t=this.syncConfigToWorker({serialize_funcs:_});return this.updating--,this.view.updateBounds(),this.requestRedraw(),_t}},{key:"syncConfigToWorker",value:function(o){var h=(0<arguments.length&&o!==void 0?o:{}).serialize_funcs,d=h===void 0||h?Utils$1.serializeWithFunctions(this.config):JSON.stringify(this.config);return WorkerBroker.postMessage(this._workers,"self.updateConfig",{config:d,generation:this.generation,introspection:this.introspection},debugSettings$1)}},{key:"createListeners",value:function(){var o=this;this.listeners={},this.listeners.view={move:function(){return o.trigger("move")}},this.view.subscribe(this.listeners.view),this.listeners.texture={update:function(){return o.dirty=!0},warning:function(h){return o.trigger("warning",Object.assign({type:"textures"},h))}},this.textureManager.subscribe(this.listeners.texture),this.listeners.scene_loader={error:function(h){return o.trigger("error",Object.assign({type:"scene"},h))}},SceneLoader$1.subscribe(this.listeners.scene_loader)}},{key:"destroyListeners",value:function(){this.unsubscribeAll(),this.view.unsubscribe(this.listeners.view),this.textureManager.unsubscribe(this.listeners.texture),SceneLoader$1.unsubscribe(this.listeners.scene_loader),this.listeners=null}},{key:"resetFeatureSelection",value:function(){this.selection?this._workers&&WorkerBroker.postMessage(this._workers,"self.resetFeatureSelection"):this.selection=new FeatureSelection(this.gl,this.id)}},{key:"updateViewComplete",value:function(){(this.render_count_changed||this.generation!==this.last_complete_generation)&&this.tile_manager.isReady()&&(this.last_complete_generation=this.generation,this.trigger("view_complete"))}},{key:"resetViewComplete",value:function(){this.last_complete_generation=null}},{key:"screenshot",value:function(o){var h=(0<arguments.length&&o!==void 0?o:{}).background,d=h===void 0?"white":h;return this.requestRedraw(),this.media_capture.screenshot({background:d})}},{key:"pixelRatio",value:function(){return Utils$1.device_pixel_ratio}},{key:"startVideoCapture",value:function(){return this.requestRedraw(),this.media_capture.startVideoCapture()}},{key:"stopVideoCapture",value:function(){return this.media_capture.stopVideoCapture()}},{key:"_profile",value:function(o){console.profile("main thread: ".concat(o)),WorkerBroker.postMessage(this._workers,"self.profile",o)}},{key:"_profileEnd",value:function(o){console.profileEnd("main thread: ".concat(o)),WorkerBroker.postMessage(this._workers,"self.profileEnd",o)}},{key:"getCameraMatrix",value:function(){return this.view.lookAtManipulator.getCameraMatrix()}},{key:"animated",get:function(){var o=this;return this.config.scene.animated!==void 0?this.config.scene.animated:this.tile_manager.getActiveStyles().some(function(h){return o.styles[h]&&o.styles[h].animated})}}],[{key:"create",value:function(o,h){return new e(o,1<arguments.length&&h!==void 0?h:{})}}]),e}();Scene.id=0,Scene.generation=0;var RemoteTexture=function(){_inherits(o,Texture);var e=_createSuper(o);function o(h,d,g){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};_classCallCheck(this,o);var $=Math.pow(2,_.coords.z),j=Math.abs(Math.floor(_.coords.x/$)),_t=Math.abs($*j-Math.abs(_.coords.x)),_e=_.coords;return _.coords={x:_t,y:_e.y,z:_e.z},e.call(this,h,d,g,_)}return _createClass(o,[{key:"load",value:function(h){var d=this;if(!h||!h.uid)return _get(_getPrototypeOf(o.prototype),"load",this).call(this,h);var g=h.coords,_=new Uint8Array([0,0,0,0]);return this.loading=new Promise(function($,j){var _t=H.map.DataModel.invoke(h.uid,"requestTileAsPromise",[g.x,g.y,g.z])||null;_t?_t.then(function(_e){var _r=_e.data;d.loaded=!0,_r&&!(_r instanceof ArrayBuffer)&&(_r.tagName.toUpperCase()==="IMG"||_r.tagName.toUpperCase()==="CANVAS")?d.setElement(_r,h):d.setData(1,1,_,{filtering:"nearest"})},function(){d.loaded=!1}).then($,function(_e){return j(_e)}):j(new Error("Unable to invoke on target "+h.uid))}),this.loading}}]),o}();TextureManager.register(RemoteTexture,function(e){return e&&e.uid}),self.H=self.H||{},self.H.gl={DataSource,Geo:Geo$1,MathUtils:MathUtils$1,Scene,Task,Tile,WorkerBroker,log,SceneLoader:SceneLoader$1,yaml:jsYaml$1}}()};f()}(),this.H=this.H||{},this.H.venues=function(e){function o(ry,_c){var ga,_l,_c=(_c=_c===void 0?{}:_c).insertAt;ry&&typeof document<"u"&&(ga=document.head||document.getElementsByTagName("head")[0],(_l=document.createElement("style")).type="text/css",_c==="top"&&ga.firstChild?ga.insertBefore(_l,ga.firstChild):ga.appendChild(_l),_l.styleSheet?_l.styleSheet.cssText=ry:_l.appendChild(document.createTextNode(ry)))}function h(ry,_s){var ga,_l=Object.keys(ry);return Object.getOwnPropertySymbols&&(ga=Object.getOwnPropertySymbols(ry),_s&&(ga=ga.filter(function(_c){return Object.getOwnPropertyDescriptor(ry,_c).enumerable})),_l.push.apply(_l,ga)),_l}function d(ry){for(var _s=1;_s<arguments.length;_s++){var ga=arguments[_s]!=null?arguments[_s]:{};_s%2?h(Object(ga),!0).forEach(function(_l){_r(ry,_l,ga[_l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ry,Object.getOwnPropertyDescriptors(ga)):h(Object(ga)).forEach(function(_l){Object.defineProperty(ry,_l,Object.getOwnPropertyDescriptor(ga,_l))})}return ry}function g(){g=function(){return ry};var ry={},_s=Object.prototype,ga=_s.hasOwnProperty,By=typeof Symbol=="function"?Symbol:{},_l=By.iterator||"@@iterator",_c=By.asyncIterator||"@@asyncIterator",_g=By.toStringTag||"@@toStringTag";function iy(ky,jy,Ky){return Object.defineProperty(ky,jy,{value:Ky,enumerable:!0,configurable:!0,writable:!0}),ky[jy]}try{iy({},"")}catch{iy=function(jy,Ky,Uy){return jy[Ky]=Uy}}function ay(ky,S0,Ky,$0){var Zy,c0,r0,N0,S0=S0&&S0.prototype instanceof gy?S0:gy,S0=Object.create(S0.prototype),$0=new Cy($0||[]);return S0._invoke=(Zy=ky,c0=Ky,r0=$0,N0="suspendedStart",function(j0,G0){if(N0==="executing")throw new Error("Generator is already running");if(N0==="completed"){if(j0==="throw")throw G0;return Qy()}for(r0.method=j0,r0.arg=G0;;){var x0=r0.delegate;if(x0&&(x0=function b0(K0,w0){var s1=K0.iterator[w0.method];if(s1===void 0){if(w0.delegate=null,w0.method==="throw"){if(K0.iterator.return&&(w0.method="return",w0.arg=void 0,b0(K0,w0),w0.method==="throw"))return cy;w0.method="throw",w0.arg=new TypeError("The iterator does not provide a 'throw' method")}return cy}return s1=ly(s1,K0.iterator,w0.arg),s1.type==="throw"?(w0.method="throw",w0.arg=s1.arg,w0.delegate=null,cy):(s1=s1.arg,s1?s1.done?(w0[K0.resultName]=s1.value,w0.next=K0.nextLoc,w0.method!=="return"&&(w0.method="next",w0.arg=void 0),w0.delegate=null,cy):s1:(w0.method="throw",w0.arg=new TypeError("iterator result is not an object"),w0.delegate=null,cy))}(x0,r0),x0)){if(x0===cy)continue;return x0}if(r0.method==="next")r0.sent=r0._sent=r0.arg;else if(r0.method==="throw"){if(N0==="suspendedStart")throw N0="completed",r0.arg;r0.dispatchException(r0.arg)}else r0.method==="return"&&r0.abrupt("return",r0.arg);if(N0="executing",x0=ly(Zy,c0,r0),x0.type==="normal"){if(N0=r0.done?"completed":"suspendedYield",x0.arg===cy)continue;return{value:x0.arg,done:r0.done}}x0.type==="throw"&&(N0="completed",r0.method="throw",r0.arg=x0.arg)}}),S0}function ly(ky,jy,Ky){try{return{type:"normal",arg:ky.call(jy,Ky)}}catch(Uy){return{type:"throw",arg:Uy}}}ry.wrap=ay;var cy={};function gy(){}function _y(){}function by(){}var By={},Vy=(iy(By,_l,function(){return this}),Object.getPrototypeOf),Vy=Vy&&Vy(Vy(Dy([]))),My=(Vy&&Vy!==_s&&ga.call(Vy,_l)&&(By=Vy),by.prototype=gy.prototype=Object.create(By));function Xy(ky){["next","throw","return"].forEach(function(jy){iy(ky,jy,function(Ky){return this._invoke(jy,Ky)})})}function zy(ky,jy){var Ky;this._invoke=function(Uy,Zy){function c0(){return new jy(function(r0,N0){(function S0(K0,j0,G0,x0){var b0,K0=ly(ky[K0],ky,j0);if(K0.type!=="throw")return(j0=(b0=K0.arg).value)&&typeof j0=="object"&&ga.call(j0,"__await")?jy.resolve(j0.__await).then(function(w0){S0("next",w0,G0,x0)},function(w0){S0("throw",w0,G0,x0)}):jy.resolve(j0).then(function(w0){b0.value=w0,G0(b0)},function(w0){return S0("throw",w0,G0,x0)});x0(K0.arg)})(Uy,Zy,r0,N0)})}return Ky=Ky?Ky.then(c0,c0):c0()}}function Iy(ky){var jy={tryLoc:ky[0]};1 in ky&&(jy.catchLoc=ky[1]),2 in ky&&(jy.finallyLoc=ky[2],jy.afterLoc=ky[3]),this.tryEntries.push(jy)}function Ry(ky){var jy=ky.completion||{};jy.type="normal",delete jy.arg,ky.completion=jy}function Cy(ky){this.tryEntries=[{tryLoc:"root"}],ky.forEach(Iy,this),this.reset(!0)}function Dy(ky){if(ky){var jy,Ky=ky[_l];if(Ky)return Ky.call(ky);if(typeof ky.next=="function")return ky;if(!isNaN(ky.length))return jy=-1,(Ky=function Uy(){for(;++jy<ky.length;)if(ga.call(ky,jy))return Uy.value=ky[jy],Uy.done=!1,Uy;return Uy.value=void 0,Uy.done=!0,Uy}).next=Ky}return{next:Qy}}function Qy(){return{value:void 0,done:!0}}return iy(My,"constructor",_y.prototype=by),iy(by,"constructor",_y),_y.displayName=iy(by,_g,"GeneratorFunction"),ry.isGeneratorFunction=function(ky){return ky=typeof ky=="function"&&ky.constructor,!!ky&&(ky===_y||(ky.displayName||ky.name)==="GeneratorFunction")},ry.mark=function(ky){return Object.setPrototypeOf?Object.setPrototypeOf(ky,by):(ky.__proto__=by,iy(ky,_g,"GeneratorFunction")),ky.prototype=Object.create(My),ky},ry.awrap=function(ky){return{__await:ky}},Xy(zy.prototype),iy(zy.prototype,_c,function(){return this}),ry.AsyncIterator=zy,ry.async=function(ky,jy,Ky,Uy,Zy){Zy===void 0&&(Zy=Promise);var c0=new zy(ay(ky,jy,Ky,Uy),Zy);return ry.isGeneratorFunction(jy)?c0:c0.next().then(function(r0){return r0.done?r0.value:c0.next()})},Xy(My),iy(My,_g,"Generator"),iy(My,_l,function(){return this}),iy(My,"toString",function(){return"[object Generator]"}),ry.keys=function(ky){var jy,Ky=[];for(jy in ky)Ky.push(jy);return Ky.reverse(),function Uy(){for(;Ky.length;){var Zy=Ky.pop();if(Zy in ky)return Uy.value=Zy,Uy.done=!1,Uy}return Uy.done=!0,Uy}},ry.values=Dy,Cy.prototype={constructor:Cy,reset:function(ky){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Ry),!ky)for(var jy in this)jy.charAt(0)==="t"&&ga.call(this,jy)&&!isNaN(+jy.slice(1))&&(this[jy]=void 0)},stop:function(){this.done=!0;var ky=this.tryEntries[0].completion;if(ky.type==="throw")throw ky.arg;return this.rval},dispatchException:function(ky){if(this.done)throw ky;var jy=this;function Ky(S0,$0){return c0.type="throw",c0.arg=ky,jy.next=S0,$0&&(jy.method="next",jy.arg=void 0),!!$0}for(var Uy=this.tryEntries.length-1;0<=Uy;--Uy){var Zy=this.tryEntries[Uy],c0=Zy.completion;if(Zy.tryLoc==="root")return Ky("end");if(Zy.tryLoc<=this.prev){var r0=ga.call(Zy,"catchLoc"),N0=ga.call(Zy,"finallyLoc");if(r0&&N0){if(this.prev<Zy.catchLoc)return Ky(Zy.catchLoc,!0);if(this.prev<Zy.finallyLoc)return Ky(Zy.finallyLoc)}else if(r0){if(this.prev<Zy.catchLoc)return Ky(Zy.catchLoc,!0)}else{if(!N0)throw new Error("try statement without catch or finally");if(this.prev<Zy.finallyLoc)return Ky(Zy.finallyLoc)}}}},abrupt:function(ky,jy){for(var Ky=this.tryEntries.length-1;0<=Ky;--Ky){var Uy=this.tryEntries[Ky];if(Uy.tryLoc<=this.prev&&ga.call(Uy,"finallyLoc")&&this.prev<Uy.finallyLoc){var Zy=Uy;break}}var c0=(Zy=Zy&&(ky==="break"||ky==="continue")&&Zy.tryLoc<=jy&&jy<=Zy.finallyLoc?null:Zy)?Zy.completion:{};return c0.type=ky,c0.arg=jy,Zy?(this.method="next",this.next=Zy.finallyLoc,cy):this.complete(c0)},complete:function(ky,jy){if(ky.type==="throw")throw ky.arg;return ky.type==="break"||ky.type==="continue"?this.next=ky.arg:ky.type==="return"?(this.rval=this.arg=ky.arg,this.method="return",this.next="end"):ky.type==="normal"&&jy&&(this.next=jy),cy},finish:function(ky){for(var jy=this.tryEntries.length-1;0<=jy;--jy){var Ky=this.tryEntries[jy];if(Ky.finallyLoc===ky)return this.complete(Ky.completion,Ky.afterLoc),Ry(Ky),cy}},catch:function(ky){for(var jy=this.tryEntries.length-1;0<=jy;--jy){var Ky,Uy,Zy=this.tryEntries[jy];if(Zy.tryLoc===ky)return(Ky=Zy.completion).type==="throw"&&(Uy=Ky.arg,Ry(Zy)),Uy}throw new Error("illegal catch attempt")},delegateYield:function(ky,jy,Ky){return this.delegate={iterator:Dy(ky),resultName:jy,nextLoc:Ky},this.method==="next"&&(this.arg=void 0),cy}},ry}function _(ry){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_s){return typeof _s}:function(_s){return _s&&typeof Symbol=="function"&&_s.constructor===Symbol&&_s!==Symbol.prototype?"symbol":typeof _s})(ry)}function $(ry,_s,ga,_l,_c,_g,iy){try{var ay=ry[_g](iy),ly=ay.value}catch(cy){return void ga(cy)}ay.done?_s(ly):Promise.resolve(ly).then(_l,_c)}function j(ry,_s){if(!(ry instanceof _s))throw new TypeError("Cannot call a class as a function")}function _t(ry,_s){for(var ga=0;ga<_s.length;ga++){var _l=_s[ga];_l.enumerable=_l.enumerable||!1,_l.configurable=!0,"value"in _l&&(_l.writable=!0),Object.defineProperty(ry,_l.key,_l)}}function _e(ry,_s,ga){return _s&&_t(ry.prototype,_s),ga&&_t(ry,ga),Object.defineProperty(ry,"prototype",{writable:!1}),ry}function _r(ry,_s,ga){return _s in ry?Object.defineProperty(ry,_s,{value:ga,enumerable:!0,configurable:!0,writable:!0}):ry[_s]=ga,ry}function _n(ry,_s){if(typeof _s!="function"&&_s!==null)throw new TypeError("Super expression must either be null or a function");ry.prototype=Object.create(_s&&_s.prototype,{constructor:{value:ry,writable:!0,configurable:!0}}),Object.defineProperty(ry,"prototype",{writable:!1}),_s&&_o(ry,_s)}function _i(ry){return(_i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_s){return _s.__proto__||Object.getPrototypeOf(_s)})(ry)}function _o(ry,_s){return(_o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ga,_l){return ga.__proto__=_l,ga})(ry,_s)}function _a(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _u(ry,_s,ga){return(_u=_a()?Reflect.construct.bind():function(_l,_c,_g){var iy=[null];return iy.push.apply(iy,_c),_c=new(Function.bind.apply(_l,iy)),_g&&_o(_c,_g.prototype),_c}).apply(null,arguments)}function _f(ry,_s){if(ry==null)return{};var ga,_l=function(iy,ay){if(iy==null)return{};for(var ly,cy={},gy=Object.keys(iy),_y=0;_y<gy.length;_y++)ly=gy[_y],0<=ay.indexOf(ly)||(cy[ly]=iy[ly]);return cy}(ry,_s);if(Object.getOwnPropertySymbols)for(var _c=Object.getOwnPropertySymbols(ry),_g=0;_g<_c.length;_g++)ga=_c[_g],0<=_s.indexOf(ga)||Object.prototype.propertyIsEnumerable.call(ry,ga)&&(_l[ga]=ry[ga]);return _l}function _h(ry){if(ry===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ry}function _d(ry){var _s=_a();return function(){var ga,_l=_i(ry),_l=(ga=_s?(ga=_i(this).constructor,Reflect.construct(_l,arguments,ga)):_l.apply(this,arguments),this);if(ga&&(typeof ga=="object"||typeof ga=="function"))return ga;if(ga!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _h(_l)}}function ty(){return(ty=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(ry,_s,ga){var _l=function(_c,_g){for(;!Object.prototype.hasOwnProperty.call(_c,_g)&&(_c=_i(_c))!==null;);return _c}(ry,_s);if(_l)return _l=Object.getOwnPropertyDescriptor(_l,_s),_l.get?_l.get.call(arguments.length<3?ry:ga):_l.value}).apply(this,arguments)}function ey(ry,_s){return function(ga){if(Array.isArray(ga))return ga}(ry)||function(ga,_l){var _c=ga==null?null:typeof Symbol<"u"&&ga[Symbol.iterator]||ga["@@iterator"];if(_c!=null){var _g,iy,ay=[],ly=!0,cy=!1;try{for(_c=_c.call(ga);!(ly=(_g=_c.next()).done)&&(ay.push(_g.value),!_l||ay.length!==_l);ly=!0);}catch(gy){cy=!0,iy=gy}finally{try{ly||_c.return==null||_c.return()}finally{if(cy)throw iy}}return ay}}(ry,_s)||ny(ry,_s)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function sy(ry){return function(_s){if(Array.isArray(_s))return uy(_s)}(ry)||function(_s){if(typeof Symbol<"u"&&_s[Symbol.iterator]!=null||_s["@@iterator"]!=null)return Array.from(_s)}(ry)||ny(ry)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ny(ry,_s){if(ry){if(typeof ry=="string")return uy(ry,_s);var ga=Object.prototype.toString.call(ry).slice(8,-1);return(ga=ga==="Object"&&ry.constructor?ry.constructor.name:ga)==="Map"||ga==="Set"?Array.from(ry):ga==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ga)?uy(ry,_s):void 0}}function uy(ry,_s){(_s==null||_s>ry.length)&&(_s=ry.length);for(var ga=0,_l=new Array(_s);ga<_s;ga++)_l[ga]=ry[ga];return _l}o(`.H_l_right .venues-ui__drawings .trigger.button--active .arrow {
  transform: rotate(90deg);
}
.H_l_right .venues-ui__drawings .drawings {
  right: 45px;
  left: initial;
}`);var fy=function(){_n(_s,H.map.Feature);var ry=_d(_s);function _s(ga){var _l;return j(this,_s),(_l=ry.call(this)).id=ga.id,_l.model=ga,_l}return _e(_s,[{key:"getData",value:function(){return this.model}},{key:"getAddress",value:function(){return this.model.getInternalAddress()}},{key:"getCenter",value:function(){var _l=ey(this.model.getCenter(),2),ga=_l[0],_l=_l[1];return new H.geo.Point(_l,ga)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"toGeoJSON",value:function(){return this.model.toJSON()}},{key:"getLevel",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getLevel().getDrawing().getParentEventTarget()}}]),_s}(),yy=function(){_n(_s,H.map.Feature);var ry=_d(_s);function _s(ga){var _l;return j(this,_s),(_l=ry.call(this)).id=ga.id,_l.model=ga,_l}return _e(_s,[{key:"getData",value:function(){return this.model}},{key:"getBoundingBox",value:function(){return _u(H.geo.Rect,sy(this.model.getBoundingBox()))}},{key:"getCenter",value:function(){var _l=ey(this.model.getCenter(),2),ga=_l[0],_l=_l[1];return new H.geo.Point(_l,ga)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getLevel",value:function(ga){return this.getLevels().find(function(_l){return _l.getIdentifier()===ga})}},{key:"getLevels",value:function(){var ga=this.getData().getLevels().map(function(_l){return _l.getIdentifier()});return this.getVenue().getLevels().filter(function(_l){return ga.indexOf(_l.id)!==-1})}},{key:"getMainLevel",value:function(){return this.getLevel(this.model.getMainLevel().getIdentifier())}},{key:"getVenue",value:function(){return this.getParentEventTarget()}}]),_s}(),xy=function(){_n(_s,H.map.Feature);var ry=_d(_s);function _s(ga){var _l;return j(this,_s),(_l=ry.call(this)).id=ga.id,_l.model=ga,_l}return _e(_s,[{key:"getGeometry",value:function(ga){return this.getGeometries().find(function(_l){return _l.getIdentifier()===ga})}},{key:"getGeometries",value:function(){var ga=this.getData().getGeometries().map(function(_l){return _l.getIdentifier()});return this.getDrawing().getVenue().getGeometries().filter(function(_l){return ga.indexOf(_l.id)!==-1})}},{key:"getData",value:function(){return this.model}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getShortName",value:function(){return this.model.getShortName()}},{key:"getZIndex",value:function(){return this.model.getZIndex()}},{key:"isMain",value:function(){return this.model.isMain()}},{key:"getDrawing",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getDrawing().getParentEventTarget()}}]),_s}();function Ey(ry,_s,ga,_l){for(var _c,_g=_l,iy=ga-_s>>1,ay=ga-_s,ly=ry[_s],cy=ry[_s+1],gy=ry[ga],_y=ry[ga+1],by=_s+3;by<ga;by+=3){var By=function(Vy,My,Xy,zy,Iy,Ry){var Cy=Iy-Xy,Dy=Ry-zy;{var Qy;Cy===0&&Dy===0||(1<(Qy=((Vy-Xy)*Cy+(My-zy)*Dy)/(Cy*Cy+Dy*Dy))?(Xy=Iy,zy=Ry):0<Qy&&(Xy+=Cy*Qy,zy+=Dy*Qy))}return(Cy=Vy-Xy)*Cy+(Dy=My-zy)*Dy}(ry[by],ry[by+1],ly,cy,gy,_y);_g<By?(_c=by,_g=By):By===_g&&(By=Math.abs(by-iy))<ay&&(_c=by,ay=By)}_l<_g&&(3<_c-_s&&Ey(ry,_s,_c,_l),ry[_c+2]=_g,3<ga-_c&&Ey(ry,_c,ga,_l))}function Oy(_c,ay,ga,_l){var _c={id:_c===void 0?null:_c,type:ay,geometry:ga,tags:_l,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},_g=_c,iy=_g.geometry,ay=_g.type;if(ay==="Point"||ay==="MultiPoint"||ay==="LineString")Gy(_g,iy);else if(ay==="Polygon"||ay==="MultiLineString")for(var ly=0;ly<iy.length;ly++)Gy(_g,iy[ly]);else if(ay==="MultiPolygon")for(ly=0;ly<iy.length;ly++)for(var cy=0;cy<iy[ly].length;cy++)Gy(_g,iy[ly][cy]);return _c}function Gy(ry,_s){for(var ga=0;ga<_s.length;ga+=3)ry.minX=Math.min(ry.minX,_s[ga]),ry.minY=Math.min(ry.minY,_s[ga+1]),ry.maxX=Math.max(ry.maxX,_s[ga]),ry.maxY=Math.max(ry.maxY,_s[ga+1])}function Ly(ry,_s,ga,_l){if(_s.geometry){var _c=_s.geometry.coordinates,_g=_s.geometry.type,iy=Math.pow(ga.tolerance/((1<<ga.maxZoom)*ga.extent),2),ay=[],ly=_s.id;if(ga.promoteId?ly=_s.properties[ga.promoteId]:ga.generateId&&(ly=_l||0),_g==="Point")g0(_c,ay);else if(_g==="MultiPoint")for(var cy=0;cy<_c.length;cy++)g0(_c[cy],ay);else if(_g==="LineString")a0(_c,ay,iy,!1);else if(_g==="MultiLineString"){if(ga.lineMetrics){for(cy=0;cy<_c.length;cy++)a0(_c[cy],ay=[],iy,!1),ry.push(Oy(ly,"LineString",ay,_s.properties));return}e0(_c,ay,iy,!1)}else if(_g==="Polygon")e0(_c,ay,iy,!0);else{if(_g!=="MultiPolygon"){if(_g!=="GeometryCollection")throw new Error("Input data is not a valid GeoJSON object.");for(cy=0;cy<_s.geometry.geometries.length;cy++)Ly(ry,{id:ly,geometry:_s.geometry.geometries[cy],properties:_s.properties},ga,_l);return}for(cy=0;cy<_c.length;cy++){var gy=[];e0(_c[cy],gy,iy,!0),ay.push(gy)}}ry.push(Oy(ly,_g,ay,_s.properties))}}function g0(ry,_s){_s.push(Ay(ry[0])),_s.push($y(ry[1])),_s.push(0)}function a0(ry,_s,ga,_l){for(var _c,_g,iy=0,ay=0;ay<ry.length;ay++){var ly=Ay(ry[ay][0]),cy=$y(ry[ay][1]);_s.push(ly),_s.push(cy),_s.push(0),0<ay&&(iy+=_l?(_c*cy-ly*_g)/2:Math.sqrt(Math.pow(ly-_c,2)+Math.pow(cy-_g,2))),_c=ly,_g=cy}var gy=_s.length-3;_s[2]=1,Ey(_s,0,gy,ga),_s[2+gy]=1,_s.size=Math.abs(iy),_s.start=0,_s.end=_s.size}function e0(ry,_s,ga,_l){for(var _c=0;_c<ry.length;_c++){var _g=[];a0(ry[_c],_g,ga,_l),_s.push(_g)}}function Ay(ry){return ry/360+.5}function $y(ry){return ry=Math.sin(ry*Math.PI/180),ry=.5-.25*Math.log((1+ry)/(1-ry))/Math.PI,ry<0?0:1<ry?1:ry}function Hy(ry,_s,ga,_l,_c,_g,iy,ay){if(_l/=_s,(ga/=_s)<=_g&&iy<_l)return ry;if(iy<ga||_l<=_g)return null;for(var ly=[],cy=0;cy<ry.length;cy++){var gy=ry[cy],_y=gy.geometry,by=gy.type,By=_c===0?gy.minX:gy.minY,Vy=_c===0?gy.maxX:gy.maxY;if(ga<=By&&Vy<_l)ly.push(gy);else if(!(Vy<ga||_l<=By)){var My=[];if(by==="Point"||by==="MultiPoint"){Qy=Dy=Cy=Ry=Iy=zy=Xy=void 0;for(var Xy=_y,zy=My,Iy=ga,Ry=_l,Cy=_c,Dy=0;Dy<Xy.length;Dy+=3){var Qy=Xy[Dy+Cy];Iy<=Qy&&Qy<=Ry&&(zy.push(Xy[Dy]),zy.push(Xy[Dy+1]),zy.push(Xy[Dy+2]))}}else if(by==="LineString")i0(_y,My,ga,_l,_c,!1,ay.lineMetrics);else if(by==="MultiLineString")d0(_y,My,ga,_l,_c,!1);else if(by==="Polygon")d0(_y,My,ga,_l,_c,!0);else if(by==="MultiPolygon")for(var ky=0;ky<_y.length;ky++){var jy=[];d0(_y[ky],jy,ga,_l,_c,!0),jy.length&&My.push(jy)}if(My.length)if(ay.lineMetrics&&by==="LineString")for(ky=0;ky<My.length;ky++)ly.push(Oy(gy.id,by,My[ky],gy.tags));else by!=="LineString"&&by!=="MultiLineString"||(My.length===1?(by="LineString",My=My[0]):by="MultiLineString"),by!=="Point"&&by!=="MultiPoint"||(by=My.length===3?"Point":"MultiPoint"),ly.push(Oy(gy.id,by,My,gy.tags))}}return ly.length?ly:null}function i0(ry,_s,ga,_l,_c,_g,iy){for(var ay,ly,cy=m0(ry),gy=_c===0?W0:D0,_y=ry.start,by=0;by<ry.length-3;by+=3){var Ry=ry[by],Cy=ry[by+1],Dy=ry[by+2],By=ry[by+3],Vy=ry[by+4],My=_c===0?Ry:Cy,Xy=_c===0?By:Vy,zy=!1;iy&&(ay=Math.sqrt(Math.pow(Ry-By,2)+Math.pow(Cy-Vy,2))),My<ga?ga<Xy&&(ly=gy(cy,Ry,Cy,By,Vy,ga),iy&&(cy.start=_y+ay*ly)):_l<My?Xy<_l&&(ly=gy(cy,Ry,Cy,By,Vy,_l),iy&&(cy.start=_y+ay*ly)):A0(cy,Ry,Cy,Dy),Xy<ga&&ga<=My&&(ly=gy(cy,Ry,Cy,By,Vy,ga),zy=!0),_l<Xy&&My<=_l&&(ly=gy(cy,Ry,Cy,By,Vy,_l),zy=!0),!_g&&zy&&(iy&&(cy.end=_y+ay*ly),_s.push(cy),cy=m0(ry)),iy&&(_y+=ay)}var Iy=ry.length-3,Ry=ry[Iy],Cy=ry[1+Iy],Dy=ry[2+Iy];ga<=(My=_c===0?Ry:Cy)&&My<=_l&&A0(cy,Ry,Cy,Dy),Iy=cy.length-3,_g&&3<=Iy&&(cy[Iy]!==cy[0]||cy[1+Iy]!==cy[1])&&A0(cy,cy[0],cy[1],cy[2]),cy.length&&_s.push(cy)}function m0(ry){var _s=[];return _s.size=ry.size,_s.start=ry.start,_s.end=ry.end,_s}function d0(ry,_s,ga,_l,_c,_g){for(var iy=0;iy<ry.length;iy++)i0(ry[iy],_s,ga,_l,_c,_g,!1)}function A0(ry,_s,ga,_l){ry.push(_s),ry.push(ga),ry.push(_l)}function W0(ry,_s,ga,_l,_c,_g){return _l=(_g-_s)/(_l-_s),ry.push(_g),ry.push(ga+(_c-ga)*_l),ry.push(1),_l}function D0(ry,_s,ga,_l,_c,_g){return _c=(_g-ga)/(_c-ga),ry.push(_s+(_l-_s)*_c),ry.push(_g),ry.push(1),_c}function X0(ry,_s){for(var ga=[],_l=0;_l<ry.length;_l++){var _c=ry[_l],_g=_c.type;if(_g==="Point"||_g==="MultiPoint"||_g==="LineString")iy=l1(_c.geometry,_s);else if(_g==="MultiLineString"||_g==="Polygon")for(var iy=[],ay=0;ay<_c.geometry.length;ay++)iy.push(l1(_c.geometry[ay],_s));else if(_g==="MultiPolygon")for(iy=[],ay=0;ay<_c.geometry.length;ay++){for(var ly=[],cy=0;cy<_c.geometry[ay].length;cy++)ly.push(l1(_c.geometry[ay][cy],_s));iy.push(ly)}ga.push(Oy(_c.id,_g,iy,_c.tags))}return ga}function l1(ry,_s){var ga=[];ga.size=ry.size,ry.start!==void 0&&(ga.start=ry.start,ga.end=ry.end);for(var _l=0;_l<ry.length;_l+=3)ga.push(ry[_l]+_s,ry[_l+1],ry[_l+2]);return ga}function Q0(ry,_s){if(!ry.transformed){for(var ga,_l=1<<ry.z,_c=ry.x,_g=ry.y,iy=0;iy<ry.features.length;iy++){var ay=ry.features[iy],ly=ay.geometry,cy=ay.type;if(ay.geometry=[],cy===1)for(ga=0;ga<ly.length;ga+=2)ay.geometry.push(O0(ly[ga],ly[ga+1],_s,_l,_c,_g));else for(ga=0;ga<ly.length;ga++){for(var gy=[],_y=0;_y<ly[ga].length;_y+=2)gy.push(O0(ly[ga][_y],ly[ga][_y+1],_s,_l,_c,_g));ay.geometry.push(gy)}}ry.transformed=!0}return ry}function O0(ry,_s,ga,_l,_c,_g){return[Math.round(ga*(ry*_l-_c)),Math.round(ga*(_s*_l-_g))]}function H0(ry,_s,ga,_l,_c){for(var _g=_s===_c.maxZoom?0:_c.tolerance/((1<<_s)*_c.extent),iy={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ga,y:_l,z:_s,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ay=0;ay<ry.length;ay++){iy.numFeatures++,Ry=Iy=zy=Xy=My=Vy=By=by=_y=Ry=gy=cy=ly=void 0;var ly=iy,cy=ry[ay],gy=_g,Ry=_c,_y=cy.geometry,by=cy.type,By=[];if(by==="Point"||by==="MultiPoint")for(var Vy=0;Vy<_y.length;Vy+=3)By.push(_y[Vy]),By.push(_y[Vy+1]),ly.numPoints++,ly.numSimplified++;else if(by==="LineString")c1(By,_y,ly,gy,!1,!1);else if(by==="MultiLineString"||by==="Polygon")for(Vy=0;Vy<_y.length;Vy++)c1(By,_y[Vy],ly,gy,by==="Polygon",Vy===0);else if(by==="MultiPolygon")for(var My=0;My<_y.length;My++){var Xy=_y[My];for(Vy=0;Vy<Xy.length;Vy++)c1(By,Xy[Vy],ly,gy,!0,Vy===0)}if(By.length){var zy=cy.tags||null;if(by==="LineString"&&Ry.lineMetrics){for(var Iy in zy={},cy.tags)zy[Iy]=cy.tags[Iy];zy.mapbox_clip_start=_y.start/_y.size,zy.mapbox_clip_end=_y.end/_y.size}Ry={geometry:By,type:by==="Polygon"||by==="MultiPolygon"?3:by==="LineString"||by==="MultiLineString"?2:1,tags:zy},cy.id!==null&&(Ry.id=cy.id),ly.features.push(Ry)}var Ry=ry[ay].minX,Cy=ry[ay].minY,Dy=ry[ay].maxX,Qy=ry[ay].maxY;Ry<iy.minX&&(iy.minX=Ry),Cy<iy.minY&&(iy.minY=Cy),Dy>iy.maxX&&(iy.maxX=Dy),Qy>iy.maxY&&(iy.maxY=Qy)}return iy}function c1(ry,_s,ga,_l,_c,_g){var iy=_l*_l;if(0<_l&&_s.size<(_c?iy:_l))ga.numPoints+=_s.length/3;else{for(var ay=[],ly=0;ly<_s.length;ly+=3)(_l===0||_s[ly+2]>iy)&&(ga.numSimplified++,ay.push(_s[ly]),ay.push(_s[ly+1])),ga.numPoints++;if(_c){for(var cy=ay,_c=_g,gy=0,_y=0,by=cy.length,By=by-2;_y<by;By=_y,_y+=2)gy+=(cy[_y]-cy[By])*(cy[_y+1]+cy[By+1]);if(0<gy===_c)for(_y=0,by=cy.length;_y<by/2;_y+=2){var Vy=cy[_y],My=cy[_y+1];cy[_y]=cy[by-2-_y],cy[_y+1]=cy[by-1-_y],cy[by-2-_y]=Vy,cy[by-1-_y]=My}}ry.push(ay)}}function e1(ly,_s){var ga=(_s=this.options=function(cy,gy){for(var _y in gy)cy[_y]=gy[_y];return cy}(Object.create(this.options),_s)).debug;if(ga&&console.time("preprocess data"),_s.maxZoom<0||24<_s.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(_s.promoteId&&_s.generateId)throw new Error("promoteId and generateId cannot be used together.");var _l,_c,_g,iy,ay,ly=function(cy,gy){var _y=[];if(cy.type==="FeatureCollection")for(var by=0;by<cy.features.length;by++)Ly(_y,cy.features[by],gy,by);else cy.type==="Feature"?Ly(_y,cy,gy):Ly(_y,{geometry:cy},gy);return _y}(ly,_s);this.tiles={},this.tileCoords=[],ga&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",_s.indexMaxZoom,_s.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),_l=ly,_c=(_s=_s).buffer/_s.extent,iy=Hy(_g=_l,1,-1-_c,_c,0,-1,2,_s),ay=Hy(_l,1,1-_c,2+_c,0,-1,2,_s),(iy||ay)&&(_g=Hy(_l,1,-_c,1+_c,0,-1,2,_s)||[],iy&&(_g=X0(iy,1).concat(_g)),ay&&(_g=_g.concat(X0(ay,-1)))),(ly=_g).length&&this.splitTile(ly,0,0,0),ga&&(ly.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function i1(ry,_s,ga){return 32*((1<<ry)*ga+_s)+ry}e1.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},e1.prototype.splitTile=function(ry,_s,ga,_l,_c,_g,iy){for(var ay=[ry,_s,ga,_l],ly=this.options,cy=ly.debug;ay.length;){_l=ay.pop(),ga=ay.pop(),_s=ay.pop(),ry=ay.pop();var gy,_y,by,By,Vy,My,Xy,zy,Iy,Ry=1<<_s,Cy=i1(_s,ga,_l),Dy=this.tiles[Cy];if(Dy||(1<cy&&console.time("creation"),Dy=this.tiles[Cy]=H0(ry,_s,ga,_l,ly),this.tileCoords.push({z:_s,x:ga,y:_l}),cy&&(1<cy&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",_s,ga,_l,Dy.numFeatures,Dy.numPoints,Dy.numSimplified),console.timeEnd("creation")),this.stats[Cy="z"+_s]=(this.stats[Cy]||0)+1,this.total++)),Dy.source=ry,_c){if(_s===ly.maxZoom||_s===_c)continue;var Cy=1<<_c-_s;if(ga!==Math.floor(_g/Cy)||_l!==Math.floor(iy/Cy))continue}else if(_s===ly.indexMaxZoom||Dy.numPoints<=ly.indexMaxPoints)continue;Dy.source=null,ry.length!==0&&(1<cy&&console.time("clipping"),gy=.5-(Cy=.5*ly.buffer/ly.extent),by=1+Cy,Xy=By=Vy=My=null,zy=Hy(ry,Ry,ga-Cy,ga+(_y=.5+Cy),0,Dy.minX,Dy.maxX,ly),Iy=Hy(ry,Ry,ga+gy,ga+by,0,Dy.minX,Dy.maxX,ly),ry=null,zy&&(Xy=Hy(zy,Ry,_l-Cy,_l+_y,1,Dy.minY,Dy.maxY,ly),By=Hy(zy,Ry,_l+gy,_l+by,1,Dy.minY,Dy.maxY,ly),zy=null),Iy&&(Vy=Hy(Iy,Ry,_l-Cy,_l+_y,1,Dy.minY,Dy.maxY,ly),My=Hy(Iy,Ry,_l+gy,_l+by,1,Dy.minY,Dy.maxY,ly),Iy=null),1<cy&&console.timeEnd("clipping"),ay.push(Xy||[],_s+1,2*ga,2*_l),ay.push(By||[],_s+1,2*ga,2*_l+1),ay.push(Vy||[],_s+1,2*ga+1,2*_l),ay.push(My||[],_s+1,2*ga+1,2*_l+1))}},e1.prototype.getTile=function(ry,_s,ga){var _c=this.options,_l=_c.extent,_c=_c.debug;if(ry<0||24<ry)return null;var _g=1<<ry,_g=i1(ry,_s=(_s%_g+_g)%_g,ga);if(this.tiles[_g])return Q0(this.tiles[_g],_l);1<_c&&console.log("drilling down to z%d-%d-%d",ry,_s,ga);for(var iy,ay=ry,ly=_s,cy=ga;!iy&&0<ay;)ay--,ly=Math.floor(ly/2),cy=Math.floor(cy/2),iy=this.tiles[i1(ay,ly,cy)];return iy&&iy.source?(1<_c&&console.log("found parent tile z%d-%d-%d",ay,ly,cy),1<_c&&console.time("drilling down"),this.splitTile(iy.source,ay,ly,cy,ry,_s,ga),1<_c&&console.timeEnd("drilling down"),this.tiles[_g]?Q0(this.tiles[_g],_l):null):null};function p1(ry){var _s=[],ga=ry&&ry.features;if(ga)for(var _l=0,_c=ga.length;_l<_c;_l+=1){var _g=ga[_l],iy=_g.type,ay=void 0,ly=!1;switch(iy){case N1:ay={type:Y0.MULTI_POINT,coordinates:_g.geometry.map(function(cy){return cy.slice()})};break;case F0:case f1:ay={type:Y0.MULTI_LINESTRING,coordinates:_g.geometry.map(function(cy){return cy.map(function(gy){return gy.slice()})})},iy===f1&&(ay=function(cy){for(var gy,_y=[],by=[],By=0,Vy=cy.coordinates.length;By<Vy;By+=1){var My=cy.coordinates[By],Xy=t1(My);Xy!==null&&(Xy===(gy=gy||Xy)&&by.length&&(_y.push(by),by=[]),by.push(My))}return 0<by.length&&_y.push(by),_y.length===1?(cy.type=Y0.POLYGON,cy.coordinates=_y[0]):1<_y.length?(cy.type=Y0.MULTI_POLYGON,cy.coordinates=_y):cy=null,cy}(ay))==null&&(ly=!0);break;default:ly=!0}ly||_s.push({geometry:ay,id:_g.id,properties:_g.tags,type:"Feature"})}return{type:"FeatureCollection",features:_s}}function a1(ry,_s,iy,_l,_c){_l=_l,_c=_c,_s=1<<(_s=_s),(_g=[])[0]=((ry=ry)[0]/_c+iy)/_s,_g[1]=(ry[1]/_c+_l)/_s;var _g,iy={x:_g[0],y:_g[1]};return _c=(ry=iy).x,ry=ry.y,_c=360*(_c-.5),_l=Math.exp(Math.PI*(.5-ry)/.25)-1,ry=Math.exp(Math.PI*(.5-ry)/.25)+1,[_c,180*Math.asin(_l/ry)/Math.PI]}var Y0={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINESTRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection"},o1={fillColor:"#e0e0e0",outlineColor:"#829DB4",outlineWidth:1},E1={fill:"#333333",size:13},R1={fillColor:"#F2F285",outlineColor:"#0088BF",outlineWidth:1.2},Z0=16,u1=18,P1=24,T0={FOOTPRINT:"FOOTPRINT",ICON:"ICON",TEXT:"TEXT",VECTOR:"VECTOR"},S1=Object.freeze({v1:1,v2:2}),N1=1,F0=2,f1=3,r1="CW",O1="CCW",t1=function(ry){return ry=function(_s){for(var ga=0,_l=_s.length,_c=0;_c<_l-1;_c+=1){var _g=_s[_c],iy=_s[_c+1];ga+=_g[0]*iy[1]-iy[0]*_g[1]}return ga+=_s[_l-1][0]*_s[0][1]-_s[0][0]*_s[_l-1][1]}(ry),0<ry?r1:ry<0?O1:void 0};(function(ry){function _s(_c){if(_l[_c])return _l[_c].exports;var _g=_l[_c]={i:_c,l:!1,exports:{}};return ga[_c].call(_g.exports,_g,_g.exports,_s),_g.l=!0,_g.exports}var ga,_l;ry.exports=(ga=[function(_c,_g,_y){function ay(by){return(ay=typeof Symbol=="function"&&_(Symbol.iterator)=="symbol"?function(By){return _(By)}:function(By){return By&&typeof Symbol=="function"&&By.constructor===Symbol&&By!==Symbol.prototype?"symbol":_(By)})(by)}var ly=_y(1),_y=_y(7),cy=_y.get,gy=(_y.deepValue,_y.isArray),_y=function(){function by(zy,b0){var Ry=b0.location,Ry=Ry===void 0?0:Ry,Cy=b0.distance,Cy=Cy===void 0?100:Cy,Dy=b0.threshold,Dy=Dy===void 0?.6:Dy,Qy=b0.maxPatternLength,Qy=Qy===void 0?32:Qy,ky=b0.caseSensitive,ky=ky!==void 0&&ky,jy=b0.tokenSeparator,jy=jy===void 0?/ +/g:jy,Ky=b0.findAllMatches,Ky=Ky!==void 0&&Ky,Uy=b0.minMatchCharLength,Uy=Uy===void 0?1:Uy,Zy=b0.id,Zy=Zy===void 0?null:Zy,c0=b0.keys,c0=c0===void 0?[]:c0,r0=b0.shouldSort,r0=r0===void 0||r0,N0=b0.getFn,N0=N0===void 0?cy:N0,S0=b0.sortFn,S0=S0===void 0?function(K0,w0){return K0.score-w0.score}:S0,$0=b0.tokenize,$0=$0!==void 0&&$0,j0=b0.matchAllTokens,j0=j0!==void 0&&j0,G0=b0.includeMatches,G0=G0!==void 0&&G0,x0=b0.includeScore,x0=x0!==void 0&&x0,b0=b0.verbose,b0=b0!==void 0&&b0;if(!(this instanceof by))throw new TypeError("Cannot call a class as a function");this.options={location:Ry,distance:Cy,threshold:Dy,maxPatternLength:Qy,isCaseSensitive:ky,tokenSeparator:jy,findAllMatches:Ky,minMatchCharLength:Uy,id:Zy,keys:c0,includeMatches:G0,includeScore:x0,shouldSort:r0,getFn:N0,sortFn:S0,verbose:b0,tokenize:$0,matchAllTokens:j0},this.setCollection(zy),this._processKeys(c0)}for(var By=by.prototype,Vy=[{key:"setCollection",value:function(zy){return this.list=zy}},{key:"_processKeys",value:function(zy){if(this._keyWeights={},this._keyNames=[],zy.length&&typeof zy[0]=="string")for(var Iy=0,Ry=zy.length;Iy<Ry;Iy+=1){var Cy=zy[Iy];this._keyWeights[Cy]=1,this._keyNames.push(Cy)}else{for(var Dy=null,Qy=null,ky=0,jy=0,Ky=zy.length;jy<Ky;jy+=1){var Uy=zy[jy];if(!Uy.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var Zy=Uy.name;if(this._keyNames.push(Zy),!Uy.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');if(Uy=Uy.weight,Uy<0||1<Uy)throw new Error('"weight" property in key must bein the range of [0, 1)');Qy=Qy==null?Uy:Math.max(Qy,Uy),Dy=Dy==null?Uy:Math.min(Dy,Uy),ky+=this._keyWeights[Zy]=Uy}if(1<ky)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(Ry){var Iy=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{limit:!1},Ry=(this._log(`---------
Search pattern: "`.concat(Ry,'"')),this._prepareSearchers(Ry)),Cy=Ry.tokenSearchers,Ry=Ry.fullSearcher,Cy=this._search(Cy,Ry);return this._computeScore(Cy),this.options.shouldSort&&this._sort(Cy),Iy.limit&&typeof Iy.limit=="number"&&(Cy=Cy.slice(0,Iy.limit)),this._format(Cy)}},{key:"_prepareSearchers",value:function(){var zy=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",Iy=[];if(this.options.tokenize)for(var Ry=zy.split(this.options.tokenSeparator),Cy=0,Dy=Ry.length;Cy<Dy;Cy+=1)Iy.push(new ly(Ry[Cy],this.options));return{tokenSearchers:Iy,fullSearcher:new ly(zy,this.options)}}},{key:"_search",value:function(){var zy=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],Iy=1<arguments.length?arguments[1]:void 0,Ry=this.list,Cy={},Dy=[];if(typeof Ry[0]=="string")for(var Qy=0,ky=Ry.length;Qy<ky;Qy+=1)this._analyze({key:"",value:Ry[Qy],record:Qy,index:Qy},{resultMap:Cy,results:Dy,tokenSearchers:zy,fullSearcher:Iy});else for(var jy=0,Ky=Ry.length;jy<Ky;jy+=1)for(var Uy=Ry[jy],Zy=0,c0=this._keyNames.length;Zy<c0;Zy+=1){var r0=this._keyNames[Zy];this._analyze({key:r0,value:this.options.getFn(Uy,r0),record:Uy,index:jy},{resultMap:Cy,results:Dy,tokenSearchers:zy,fullSearcher:Iy})}return Dy}},{key:"_analyze",value:function(jy,Iy){var Ry=this,Cy=jy.key,Dy=jy.arrayIndex,Qy=jy.value,ky=jy.record,jy=jy.index,c0=Iy.tokenSearchers,Ky=c0===void 0?[]:c0,Uy=Iy.fullSearcher,c0=Iy.resultMap,Zy=c0===void 0?{}:c0,c0=Iy.results,r0=c0===void 0?[]:c0;(function N0(S0,$0,j0,G0){if($0!=null){if(typeof $0=="string"){var x0=!1,b0=-1,K0=0,w0=(Ry._log(`
Key: `.concat(Cy===""?"--":Cy)),Uy.search($0));if(Ry._log('Full text: "'.concat($0,'", score: ').concat(w0.score)),Ry.options.tokenize){for(var s1=$0.split(Ry.options.tokenSeparator),K1=s1.length,C1=[],X1=0,x_=Ky.length;X1<x_;X1+=1){var i_=Ky[X1];Ry._log(`
Pattern: "`.concat(i_.pattern,'"'));for(var o_=!1,Z1=0;Z1<K1;Z1+=1){var z1=s1[Z1],J1=i_.search(z1),Q1={};J1.isMatch?(Q1[z1]=J1.score,o_=x0=!0,C1.push(J1.score)):(Q1[z1]=1,Ry.options.matchAllTokens||C1.push(1)),Ry._log('Token: "'.concat(z1,'", score: ').concat(Q1[z1]))}o_&&(K0+=1)}for(var b0=C1[0],s_=C1.length,t_=1;t_<s_;t_+=1)b0+=C1[t_];Ry._log("Token score average:",b0/=s_)}var G1=w0.score,$1=(Ry._log("Score average:",G1=-1<b0?(G1+b0)/2:G1),!Ry.options.tokenize||!Ry.options.matchAllTokens||K0>=Ky.length);Ry._log(`
Check Matches: `.concat($1)),(x0||w0.isMatch)&&$1&&($1={key:Cy,arrayIndex:S0,value:$0,score:G1},Ry.options.includeMatches&&($1.matchedIndices=w0.matchedIndices),(S0=Zy[G0])?S0.output.push($1):(Zy[G0]={item:j0,output:[$1]},r0.push(Zy[G0])))}else if(gy($0))for(var H1=0,w_=$0.length;H1<w_;H1+=1)N0(H1,$0[H1],j0,G0)}})(Dy===void 0?-1:Dy,Qy,ky,jy)}},{key:"_computeScore",value:function(zy){this._log(`

Computing score:
`);for(var Iy=this._keyWeights,Ry=!!Object.keys(Iy).length,Cy=0,Dy=zy.length;Cy<Dy;Cy+=1){for(var Qy=zy[Cy],ky=Qy.output,jy=ky.length,Ky=1,Uy=0;Uy<jy;Uy+=1){var Zy=ky[Uy],r0=Zy.key,c0=Ry?Iy[r0]:1,r0=Zy.score===0&&Iy&&0<Iy[r0]?Number.EPSILON:Zy.score;Ky*=Math.pow(r0,c0)}Qy.score=Ky,this._log(Qy)}}},{key:"_sort",value:function(zy){this._log(`

Sorting....`),zy.sort(this.options.sortFn)}},{key:"_format",value:function(zy){var Iy,Ry=[],Cy=(this.options.verbose&&(Iy=[],this._log(`

Output:

`,JSON.stringify(zy,function(Zy,c0){if(ay(c0)==="object"&&c0!==null){if(Iy.indexOf(c0)!==-1)return;Iy.push(c0)}return c0},2)),Iy=null),[]);this.options.includeMatches&&Cy.push(function(Zy,c0){var r0=Zy.output;c0.matches=[];for(var N0=0,S0=r0.length;N0<S0;N0+=1){var $0,j0=r0[N0];j0.matchedIndices.length!==0&&($0={indices:j0.matchedIndices,value:j0.value},j0.key&&($0.key=j0.key),j0.hasOwnProperty("arrayIndex")&&-1<j0.arrayIndex&&($0.arrayIndex=j0.arrayIndex),c0.matches.push($0))}}),this.options.includeScore&&Cy.push(function(Zy,c0){c0.score=Zy.score});for(var Dy=0,Qy=zy.length;Dy<Qy;Dy+=1){var ky=zy[Dy];if(this.options.id&&(ky.item=this.options.getFn(ky.item,this.options.id)[0]),Cy.length){for(var jy={item:ky.item},Ky=0,Uy=Cy.length;Ky<Uy;Ky+=1)Cy[Ky](ky,jy);Ry.push(jy)}else Ry.push(ky.item)}return Ry}},{key:"_log",value:function(){var zy;this.options.verbose&&(zy=console).log.apply(zy,arguments)}}],My=0;My<Vy.length;My++){var Xy=Vy[My];Xy.enumerable=Xy.enumerable||!1,Xy.configurable=!0,"value"in Xy&&(Xy.writable=!0),Object.defineProperty(By,Xy.key,Xy)}return by}();_c.exports=_y},function(_c,_g,gy){var ay=gy(2),ly=gy(3),cy=gy(6),gy=function(){function _y(Xy,Uy){var Iy=Uy.location,Iy=Iy===void 0?0:Iy,Ry=Uy.distance,Ry=Ry===void 0?100:Ry,Cy=Uy.threshold,Cy=Cy===void 0?.6:Cy,Dy=Uy.maxPatternLength,Dy=Dy===void 0?32:Dy,Qy=Uy.isCaseSensitive,Qy=Qy!==void 0&&Qy,ky=Uy.tokenSeparator,ky=ky===void 0?/ +/g:ky,jy=Uy.findAllMatches,jy=jy!==void 0&&jy,Ky=Uy.minMatchCharLength,Ky=Ky===void 0?1:Ky,Uy=Uy.includeMatches,Uy=Uy!==void 0&&Uy;if(!(this instanceof _y))throw new TypeError("Cannot call a class as a function");this.options={location:Iy,distance:Ry,threshold:Cy,maxPatternLength:Dy,isCaseSensitive:Qy,tokenSeparator:ky,findAllMatches:jy,includeMatches:Uy,minMatchCharLength:Ky},this.pattern=Qy?Xy:Xy.toLowerCase(),this.pattern.length<=Dy&&(this.patternAlphabet=cy(this.pattern))}for(var by=_y.prototype,By=[{key:"search",value:function(Xy){var zy=this.options,Iy=zy.isCaseSensitive,zy=zy.includeMatches;if(Iy||(Xy=Xy.toLowerCase()),this.pattern===Xy)return Iy={isMatch:!0,score:0},zy&&(Iy.matchedIndices=[[0,Xy.length-1]]),Iy;var Iy=this.options,Qy=Iy.maxPatternLength,Iy=Iy.tokenSeparator;if(this.pattern.length>Qy)return ay(Xy,this.pattern,Iy);var Qy=this.options,Iy=Qy.location,Ry=Qy.distance,Cy=Qy.threshold,Dy=Qy.findAllMatches,Qy=Qy.minMatchCharLength;return ly(Xy,this.pattern,this.patternAlphabet,{location:Iy,distance:Ry,threshold:Cy,findAllMatches:Dy,minMatchCharLength:Qy,includeMatches:zy})}}],Vy=0;Vy<By.length;Vy++){var My=By[Vy];My.enumerable=My.enumerable||!1,My.configurable=!0,"value"in My&&(My.writable=!0),Object.defineProperty(by,My.key,My)}return _y}();_c.exports=gy},function(_c,_g){var iy=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;_c.exports=function(ay,cy){var _y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:/ +/g,cy=new RegExp(cy.replace(iy,"\\$&").replace(_y,"|")),gy=ay.match(cy),_y=!!gy,by=[];if(_y)for(var By=0,Vy=gy.length;By<Vy;By+=1){var My=gy[By];by.push([ay.indexOf(My),My.length-1])}return{score:_y?.5:1,isMatch:_y,matchedIndices:by}}},function(_c,_g,iy){var ay=iy(4),ly=iy(5);_c.exports=function(cy,gy,_y,by){for(var By=by.location,My=by.distance,Vy=My===void 0?100:My,My=by.threshold,zy=by.findAllMatches,Xy=zy!==void 0&&zy,zy=by.minMatchCharLength,zy=zy===void 0?1:zy,by=by.includeMatches,by=by!==void 0&&by,Iy=By===void 0?0:By,Ry=cy.length,Cy=My===void 0?.6:My,Dy=cy.indexOf(gy,Iy),Qy=gy.length,ky=[],jy=0;jy<Ry;jy+=1)ky[jy]=0;Dy!==-1&&(By=ay(gy,{errors:0,currentLocation:Dy,expectedLocation:Iy,distance:Vy}),Cy=Math.min(By,Cy),(Dy=cy.lastIndexOf(gy,Iy+Qy))!==-1&&(My=ay(gy,{errors:0,currentLocation:Dy,expectedLocation:Iy,distance:Vy}),Cy=Math.min(My,Cy)));for(var Dy=-1,Ky=[],Uy=1,Zy=Qy+Ry,c0=1<<(Qy<=31?Qy-1:30),r0=0;r0<Qy;r0+=1){for(var N0=0,S0=Zy;N0<S0;)ay(gy,{errors:r0,currentLocation:Iy+S0,expectedLocation:Iy,distance:Vy})<=Cy?N0=S0:Zy=S0,S0=Math.floor((Zy-N0)/2+N0);var Zy=S0,$0=Math.max(1,Iy-S0+1),j0=Xy?Ry:Math.min(Iy+S0,Ry)+Qy,G0=Array(j0+2);G0[j0+1]=(1<<r0)-1;for(var x0=j0;$0<=x0;--x0){var b0=x0-1,K0=_y[cy.charAt(b0)];if(K0&&(ky[b0]=1),G0[x0]=(G0[x0+1]<<1|1)&K0,r0!==0&&(G0[x0]|=(Ky[x0+1]|Ky[x0])<<1|1|Ky[x0+1]),G0[x0]&c0&&(Uy=ay(gy,{errors:r0,currentLocation:b0,expectedLocation:Iy,distance:Vy}))<=Cy){if(Cy=Uy,(Dy=b0)<=Iy)break;$0=Math.max(1,2*Iy-Dy)}}if(ay(gy,{errors:r0+1,currentLocation:Iy,expectedLocation:Iy,distance:Vy})>Cy)break;Ky=G0}return By={isMatch:0<=Dy,score:Uy===0?.001:Uy},by&&(By.matchedIndices=ly(ky,zy)),By}},function(_c,_g){_c.exports=function(by,gy){var _y=gy.errors,ly=gy.currentLocation,cy=gy.expectedLocation,gy=gy.distance,gy=gy===void 0?100:gy,_y=(_y===void 0?0:_y)/by.length,by=Math.abs((cy===void 0?0:cy)-(ly===void 0?0:ly));return gy?_y+by/gy:by?1:_y}},function(_c,_g){_c.exports=function(){for(var iy=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],ay=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,ly=[],cy=-1,gy=0,_y=iy.length;gy<_y;gy+=1){var by=iy[gy];by&&cy===-1?cy=gy:by||cy===-1||((by=gy-1)-cy+1>=ay&&ly.push([cy,by]),cy=-1)}return iy[gy-1]&&ay<=gy-cy&&ly.push([cy,gy-1]),ly}},function(_c,_g){_c.exports=function(iy){for(var ay={},ly=iy.length,cy=0;cy<ly;cy+=1)ay[iy.charAt(cy)]=0;for(var gy=0;gy<ly;gy+=1)ay[iy.charAt(gy)]|=1<<ly-gy-1;return ay}},function(_c,_g){function iy(gy){return Array.isArray?Array.isArray(gy):Object.prototype.toString.call(gy)==="[object Array]"}function ay(gy){if(gy==null)return"";if(typeof gy=="string")return gy;var _y=gy+"";return _y=="0"&&1/gy==-1/0?"-0":_y}function ly(gy){return typeof gy=="string"}function cy(gy){return typeof gy=="number"}_c.exports={get:function(gy,_y){var by=[];return function By(Vy,My){if(My){var Xy=My.indexOf("."),zy=My,Iy=null,Ry=(Xy!==-1&&(zy=My.slice(0,Xy),Iy=My.slice(Xy+1)),Vy[zy]);if(Ry!=null)if(Iy||!ly(Ry)&&!cy(Ry))if(iy(Ry))for(var Cy=0,Dy=Ry.length;Cy<Dy;Cy+=1)By(Ry[Cy],Iy);else Iy&&By(Ry,Iy);else by.push(ay(Ry))}else by.push(Vy)}(gy,_y),by},isArray:iy,isString:ly,isNum:cy,toString:ay}}],_l={},_s.m=ga,_s.c=_l,_s.d=function(_c,_g,iy){_s.o(_c,_g)||Object.defineProperty(_c,_g,{enumerable:!0,get:iy})},_s.r=function(_c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_c,"__esModule",{value:!0})},_s.t=function(_c,_g){if(1&_g&&(_c=_s(_c)),8&_g||4&_g&&_(_c)=="object"&&_c&&_c.__esModule)return _c;var iy=Object.create(null);if(_s.r(iy),Object.defineProperty(iy,"default",{enumerable:!0,value:_c}),2&_g&&typeof _c!="string")for(var ay in _c)_s.d(iy,ay,(function(ly){return _c[ly]}).bind(null,ay));return iy},_s.n=function(_c){var _g=_c&&_c.__esModule?function(){return _c.default}:function(){return _c};return _s.d(_g,"a",_g),_g},_s.o=function(_c,_g){return Object.prototype.hasOwnProperty.call(_c,_g)},_s.p="",_s(_s.s=0))})(p0={exports:{}});var p0=p0.exports,I0=(u0=p0)&&u0.__esModule&&Object.prototype.hasOwnProperty.call(u0,"default")?u0.default:u0,v1=(p0.Fuse,_e(function ry(iy){var ga=iy.addressList,ga=ga===void 0?[]:ga,_l=iy.geometries,_l=_l===void 0?[]:_l,_c=iy.entity,_c=_c===void 0?null:_c,_g=iy.name,_g=_g===void 0?"":_g,iy=iy.icon,iy=iy===void 0?"":iy;j(this,ry),this.addressList=ga,this.geometries=_l,this.icon=iy,this.entity=_c,this.name=_g})),Wy={keys:[{name:"name",weight:.6},{name:"addressList",weight:.4}],threshold:.2},T1=function(){function ry(_s){j(this,ry),this.fuseSearch=null,this.levels_=null,this.searchListEntities_=[],this.searchListIcons_=[],this.searchList_=[],this.venueModel=_s,this.init()}return _e(ry,[{key:"init",value:function(){var _s=this.venueModel.getGeometries().reduce(function(ga,_l){return ga[_l.getId()]=_l,ga},{}),_s=(this.initEntityList(this.venueModel.getOccupant()),this.initIconList(_s),this.levels_=this.venueModel.getLevels().map(function(ga){return{levelId:ga.getId(),levelName:ga.getName(),drawingId:ga.getDrawing().getId(),drawingName:ga.getDrawing().getName()}}),[].concat(sy(this.searchListEntities_),sy(this.searchListIcons_)));this.searchList_=_s.sort(function(ga,_l){return ga.name.localeCompare(_l.name)}),this.fuseSearch_=new I0(this.searchList_,Wy)}},{key:"initEntityList",value:function(){var _s=(0<arguments.length&&arguments[0]!==void 0?arguments[0]:[]).map(function(ga){return ga.spaceIds?new v1({geometries:ga.space,addressList:ga.spaceIds||[],name:ga.properties.name||"",entity:ga}):null}).filter(function(ga){return ga!==null});this.searchListEntities_=_s}},{key:"initIconList",value:function(){this.searchListIcons_=Object.values(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{}).filter(function(_s){return _s.isIcon()}).map(function(_s){var ga=_s.getIcon();return new v1({geometries:[_s],icon:ga,name:_s.properties.name||""})})}},{key:"all",value:function(){return this.searchList_}},{key:"allIconTypes",value:function(){var _s=this.searchListIcons_.reduce(function(ga,_l){return ga[_l.name]=_l.name,ga},{});return Object.keys(_s)}},{key:"find",value:function(){var _s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"";return _s===""?this.searchList_:this.fuseSearch_.search(_s)}}]),ry}(),h1=Object.freeze({SITE:"SITE",IMAGES:"IMAGES",THEME:"THEME"}),m1="indoor.Site",L1="indoor.Structure",k1="indoor.Occupant",A1="indoor.Space",I1="indoor.SpaceGroups",M1="Address",vy="indoor.Level",wy="indoor.Entrance",Ty="OCCUPANT_NAMES",Yy="SPACE_NAME",_m="INTERNAL_ADDRESS_SHORT",f0="INTERNAL_ADDRESS",h0="INTERNAL_ADDRESS_LONG",s0="SPACE_TYPE_NAME",t0="SPACE_CATEGORY_NAME",y0="Point",R0="LineString",_v="Polygon",P0="MultiPoint",q0="MultiLineString",n1="MultiPolygon",B0=Object.freeze({STANDARD:"STANDARD",FLATTEN:"FLATTEN",OUTDOOR_MAIN:"OUTDOOR_MAIN",INDOOR_MAIN:"INDOOR_MAIN",NO_OUTDOORS:"NO_OUTDOORS",FLATTEN_INDOOR_MAIN:"FLATTEN_INDOOR_MAIN",FLATTEN_OUTDOOR_COPY:"FLATTEN_OUTDOOR_COPY"}),g1="9999999999999",_p="icons",oy="config",hy="https://interactive.data.api.platform.here.com/interactive/v1/catalogs",u0=Object.freeze({THEME:"THEME",THEME_MAP:"THEME_MAP",PRESETS:"PRESETS",SDK_STRINGS:"SDK_STRINGS",ICON_FILE:"ICON_FILE",INPUT_COLORS:"INPUT_COLORS",BASE_MAP_INFO:"BASE_MAP_INFO",CONFIG_PROFILE:"CONFIG_PROFILE",NAV_THEME:"NAV_THEME",NAV_NAME_THEME:"NAV_NAME_THEME",NAV_PROP_MAP:"NAV_PROP_MAP",NAV_STRINGS:"NAV_STRINGS",NAV_THEME_MAP:"NAV_THEME_MAP",NAV_NAME_THEME_MAP:"NAV_NAME_THEME_MAP",V4_THEME_FAMILY:"V4_THEME_FAMILY",V4_MAPTYPE_THEME:"V4_MAPTYPE_THEME",ICON:"ICON",MARKER:"MARKER",PERMISSIONS:"PERMISSIONS",NAICS_ARRAY:"NAICS_ARRAY",NAICS_MAP:"NAICS_MAP"}),u0=(Object.freeze((_r(p0={},u0.THEME,"themeUrls"),_r(p0,u0.THEME_MAP,"themeMapUrl"),_r(p0,u0.PRESETS,"presetsUrl"),_r(p0,u0.SDK_STRINGS,"stringsUrl"),p0)),Object.freeze((_r(p0={},u0.THEME,"themeOverrides"),_r(p0,u0.THEME_MAP,"themeMapOverrides"),_r(p0,u0.PRESETS,"presetOverrides"),_r(p0,u0.SDK_STRINGS,"stringsOverrides"),_r(p0,u0.INPUT_COLORS,"inputColorOverrides"),p0)),Object.freeze((_r(p0={},u0.THEME,["Modern","Standard","Factory","Navteq","TheBase","Westfield_noLabels","Westfield","TDM_noLabel"]),_r(p0,u0.SDK_STRINGS,["Standard","SDK","sdk/standard"]),_r(p0,u0.V4_THEME_FAMILY,["modern","standard"]),_r(p0,u0.V4_MAPTYPE_THEME,["Airport Terminal","Airport","Casino","College Building","College Campus","Convention","General","Hospital","Outdoor","Retail","School Building","School Campus","Shopping Mall","Traffic","Train Station"]),_r(p0,u0.NAV_THEME,["Factory","MapEditor"]),_r(p0,u0.ICON,["Multicolor","Standard","TheBase","Factory"]),p0)),Object.freeze((_r(p0={},u0.THEME,"Modern"),_r(p0,u0.THEME_MAP,"Standard"),_r(p0,u0.PRESETS,"Standard"),_r(p0,u0.SDK_STRINGS,"Standard"),_r(p0,u0.ICON_FILE,"Standard"),_r(p0,u0.INPUT_COLORS,"Standard"),_r(p0,u0.BASE_MAP_INFO,"Standard"),_r(p0,u0.CONFIG_PROFILE,"factory"),_r(p0,u0.NAV_THEME,"Factory"),_r(p0,u0.NAV_NAME_THEME,"FactoryName"),_r(p0,u0.NAV_PROP_MAP,"Standard"),_r(p0,u0.NAV_STRINGS,"Standard"),_r(p0,u0.NAV_THEME_MAP,"Standard"),_r(p0,u0.NAV_NAME_THEME_MAP,"StandardName"),_r(p0,u0.V4_THEME_FAMILY,"Standard"),_r(p0,u0.V4_MAPTYPE_THEME,"Standard"),_r(p0,u0.ICON,"Multicolor"),_r(p0,u0.MARKER,"Standard"),p0)),Object.freeze({GEO_JSON:"GEO_JSON",V5_MAP:"V5_MAP",V5_NAV:"V5_NAV",V5_INFO:"V5_INFO",KML:"KML",SVG:"SVG",PNG:"PNG"})),py=(Object.freeze(_r({},u0.GEO_JSON,{COMMUNITY_MAP:"COMMUNITY_MAP",COMMUNITY_ENTITY:"COMMUNITY_ENTITY",PATH_LEVEL_GEOMETRY:"PATH_LEVEL_GEOMETRY",GEOJSON_LEVEL_GEOMETRY:"GEOJSON_LEVEL_GEOMETRY"})),Object.freeze({ACCOUNT_API:"ACCOUNT_API",DEFAULT_COLLECTION:"DEFAULT_COLLECTION",CATALOG_LAYER:"CATALOG_LAYER"})),dy=Object.freeze((_r(p0={},py.ACCOUNT_API,{BASE_URL:"https://account.api.here.com/authorization/v1.1/projects/me"}),_r(p0,py.DEFAULT_COLLECTION,{BASE_URL:"https://config.data.api.platform.here.com/config/v1/catalogs",PARAMS:{CREATED_BY:"created",COLLECTION:"-collection"}}),_r(p0,py.CATALOG_LAYER,{BASE_URL:"https://interactive.data.api.platform.here.com/interactive/v1/catalogs",MOMDATA_LAYER:"9999999999999",ICON_LAYER:"icons",THEMERULE_LAYER:"config",COLLECTION_LAYER:"layers/9999999999999/search",PARAMS:{FEATURE_TYPE:{KEY:"p.featureType",VALUE:"indoor.Site"}}}),p0)),my=Object.freeze({isIconsEnabled:!0,isMetaEnabled:!0,metaOptions:{},iconOptions:{}}),Py=Object.freeze({GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",PATCH:"PATCH",OPTIONS:"OPTIONS",HEAD:"HEAD"});function Sy(){}function Ny(){Ny.init.call(this)}function Fy(ry){return ry._maxListeners===void 0?Ny.defaultMaxListeners:ry._maxListeners}function qy(ry,_s,ga,_l){var _c,_g;if(typeof ga!="function")throw new TypeError('"listener" argument must be a function');return(_c=ry._events)?(_c.newListener&&(ry.emit("newListener",_s,ga.listener||ga),_c=ry._events),_g=_c[_s]):(_c=ry._events=new Sy,ry._eventsCount=0),_g?(typeof _g=="function"?_g=_c[_s]=_l?[ga,_g]:[_g,ga]:_l?_g.unshift(ga):_g.push(ga),_g.warned||(_l=Fy(ry))&&0<_l&&_g.length>_l&&(_g.warned=!0,(_l=new Error("Possible EventEmitter memory leak detected. "+_g.length+" "+_s+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",_l.emitter=ry,_l.type=_s,_l.count=_g.length,_l=_l,typeof console.warn=="function"?console.warn(_l):console.log(_l))):(_g=_c[_s]=ga,++ry._eventsCount),ry}function Jy(ry,_s,ga){var _l=!1;function _c(){ry.removeListener(_s,_c),_l||(_l=!0,ga.apply(ry,arguments))}return _c.listener=ga,_c}function v0(ry){var _s=this._events;if(_s){if(_s=_s[ry],typeof _s=="function")return 1;if(_s)return _s.length}return 0}function k0(ry,_s){for(var ga=new Array(_s);_s--;)ga[_s]=ry[_s];return ga}Sy.prototype=Object.create(null),(Ny.EventEmitter=Ny).usingDomains=!1,Ny.prototype.domain=void 0,Ny.prototype._events=void 0,Ny.prototype._maxListeners=void 0,Ny.defaultMaxListeners=10,Ny.init=function(){this.domain=null,Ny.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Sy,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ny.prototype.setMaxListeners=function(ry){if(typeof ry!="number"||ry<0||isNaN(ry))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=ry,this},Ny.prototype.getMaxListeners=function(){return Fy(this)},Ny.prototype.emit=function(ry){var _s,ga,_l,_c=ry==="error",_g=this._events;if(_g)_c=_c&&_g.error==null;else if(!_c)return!1;if(iy=this.domain,_c){var iy,_c=arguments[1];if(iy)return(_c=_c||new Error('Uncaught, unspecified "error" event')).domainEmitter=this,_c.domain=iy,_c.domainThrown=!1,iy.emit("error",_c),!1;throw _c instanceof Error?_c:((iy=new Error('Uncaught, unspecified "error" event. ('+_c+")")).context=_c,iy)}if(!(_s=_g[ry]))return!1;var ay,ly=typeof _s=="function";switch(ay=arguments.length){case 1:var Vy=_s,By=ly,cy=this;if(By)Vy.call(cy);else for(var gy=Vy.length,_y=k0(Vy,gy),by=0;by<gy;++by)_y[by].call(cy);break;case 2:var By=_s,Vy=ly,My=this,Xy=arguments[1];if(Vy)By.call(My,Xy);else for(var zy=By.length,Iy=k0(By,zy),Ry=0;Ry<zy;++Ry)Iy[Ry].call(My,Xy);break;case 3:var Zy=_s,Uy=ly,Cy=this,Dy=arguments[1],Qy=arguments[2];if(Uy)Zy.call(Cy,Dy,Qy);else for(var ky=Zy.length,jy=k0(Zy,ky),Ky=0;Ky<ky;++Ky)jy[Ky].call(Cy,Dy,Qy);break;case 4:var Uy=_s,Zy=ly,c0=this,r0=arguments[1],N0=arguments[2],S0=arguments[3];if(Zy)Uy.call(c0,r0,N0,S0);else for(var $0=Uy.length,j0=k0(Uy,$0),G0=0;G0<$0;++G0)j0[G0].call(c0,r0,N0,S0);break;default:for(ga=new Array(ay-1),_l=1;_l<ay;_l++)ga[_l-1]=arguments[_l];var x0=_s,b0=ly,K0=this,w0=ga;if(b0)x0.apply(K0,w0);else for(var s1=x0.length,K1=k0(x0,s1),C1=0;C1<s1;++C1)K1[C1].apply(K0,w0)}return!0},Ny.prototype.on=Ny.prototype.addListener=function(ry,_s){return qy(this,ry,_s,!1)},Ny.prototype.prependListener=function(ry,_s){return qy(this,ry,_s,!0)},Ny.prototype.once=function(ry,_s){if(typeof _s!="function")throw new TypeError('"listener" argument must be a function');return this.on(ry,Jy(this,ry,_s)),this},Ny.prototype.prependOnceListener=function(ry,_s){if(typeof _s!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(ry,Jy(this,ry,_s)),this},Ny.prototype.removeListener=function(ry,_s){var ga,_l,_c,_g,iy;if(typeof _s!="function")throw new TypeError('"listener" argument must be a function');if((_l=this._events)&&(ga=_l[ry])){if(ga===_s||ga.listener&&ga.listener===_s)--this._eventsCount==0?this._events=new Sy:(delete _l[ry],_l.removeListener&&this.emit("removeListener",ry,ga.listener||_s));else if(typeof ga!="function"){for(_c=-1,_g=ga.length;0<_g--;)if(ga[_g]===_s||ga[_g].listener&&ga[_g].listener===_s){iy=ga[_g].listener,_c=_g;break}if(_c<0)return this;if(ga.length===1){if(ga[0]=void 0,--this._eventsCount==0)return this._events=new Sy,this;delete _l[ry]}else{for(var ay=ga,ly=_c,cy=ly+1,gy=ay.length;cy<gy;ly+=1,cy+=1)ay[ly]=ay[cy];ay.pop()}_l.removeListener&&this.emit("removeListener",ry,iy||_s)}}return this},Ny.prototype.removeAllListeners=function(ry){var _s,ga=this._events;if(ga){if(!ga.removeListener)return arguments.length===0?(this._events=new Sy,this._eventsCount=0):ga[ry]&&(--this._eventsCount==0?this._events=new Sy:delete ga[ry]),this;if(arguments.length===0){for(var _l,_c=Object.keys(ga),_g=0;_g<_c.length;++_g)(_l=_c[_g])!=="removeListener"&&this.removeAllListeners(_l);return this.removeAllListeners("removeListener"),this._events=new Sy,this._eventsCount=0,this}if(typeof(_s=ga[ry])=="function")this.removeListener(ry,_s);else if(_s)for(;this.removeListener(ry,_s[_s.length-1]),_s[0];);}return this},Ny.prototype.listeners=function(ga){var _s=this._events,ga=_s&&(_s=_s[ga])?typeof _s=="function"?[_s.listener||_s]:function(_l){for(var _c=new Array(_l.length),_g=0;_g<_c.length;++_g)_c[_g]=_l[_g].listener||_l[_g];return _c}(_s):[];return ga},Ny.listenerCount=function(ry,_s){return typeof ry.listenerCount=="function"?ry.listenerCount(_s):v0.call(ry,_s)},Ny.prototype.listenerCount=v0,Ny.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};function V0(ry,_s,ga){return ga===B1.ObjectType.SEGMENT_START_MARKER?ry===0?__:null:ga===B1.ObjectType.SEGMENT_FINISH_MARKER?_s.length===1||ry===_s.length-1?b_:null:_s[ry].departure.place.type==="indoor"?v_:m_}var o0="venues-ui-button--active",l0="venues-ui-button",n0="venues-ui__drawings",_0="data-drawing",C0=function(){function ry(_s,ga,iy){var _c=this,_g=(j(this,ry),this.clickHandler=iy,this.containerDiv=document.createElement("div"),this.containerDiv.setAttribute("class",n0),document.createElement("div")),iy=(_g.setAttribute("class","trigger ".concat(l0)),document.createElement("div"));iy.setAttribute("class","arrow arrow--down"),_g.appendChild(iy),_g.addEventListener("click",function(){_g.classList.toggle(o0),_c.containerButtons.classList.toggle("drawings--open")}),this.containerDiv.appendChild(_g),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","drawings"),this.containerDiv.appendChild(this.containerButtons),ga&&this.update(ga),_s.appendChild(this.containerDiv)}return _e(ry,[{key:"drawButton",value:function(_s,ga,iy){var _c=this,_g=document.createElement("div"),iy=Number(iy)===Number(_s);_g.setAttribute("class",iy?"".concat(l0," ").concat(o0):l0),_g.innerHTML=ga,_g.setAttribute(_0,_s),_g.addEventListener("click",function(){_c.switch(_s),_c.clickHandler(_s)}),this.containerButtons.appendChild(_g)}},{key:"switch",value:function(_s){this.containerButtons.querySelectorAll(".".concat(n0," .").concat(o0)).forEach(function(ga){return ga.setAttribute("class",l0)}),_s=this.containerButtons.querySelector("[".concat(_0,"='").concat(_s,"']")),_s&&_s.setAttribute("class","".concat(l0," ").concat(o0))}},{key:"update",value:function(_s){var ga=this,_l=(this.containerButtons.innerHTML="",function(_c){return _c=_c.getDrawings(),new Map(_c.map(function(_g){var iy=_g.getDisplayName()||_g.getName();return[_g.getId(),iy]}))}(_s));0<_l.size&&_l.forEach(function(_c,_g){return ga.drawButton(_g,_c,_s.getRootDrawing().getId())})}}]),ry}(),z0="venues-ui-button--active",L0="venues-ui-button",M0="data-level",E0="venues-ui__levels",y1=function(){function ry(_s,ga,_l,_c){var _g=4<arguments.length&&arguments[4]!==void 0?arguments[4]:4;j(this,ry),this.clickHandler=_c,this.levelButtonCount=_g,this.currentScrollIndex=0,this.containerUI=document.createElement("div"),this.containerUI.setAttribute("class","".concat(E0)),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","levels"),this.containerUI.appendChild(this.containerButtons),ga&&this.update(ga,_l),_s.appendChild(this.containerUI)}return _e(ry,[{key:"clear",value:function(){this.containerButtons.innerHTML="",this.buttonScrollUp&&(this.containerUI.removeChild(this.buttonScrollUp),this.buttonScrollUp=null),this.buttonScrollDown&&(this.containerUI.removeChild(this.buttonScrollDown),this.buttonScrollDown=null)}},{key:"drawLevelButton",value:function(_s,ga){var _l=this,_c=document.createElement("div");_c.innerHTML=ga,_c.style.fontSize="".concat(Math.max(Math.min(28.8/ga.length,11.52),10),"px"),_c.style.display="block",_c.setAttribute("class",L0),_c.setAttribute(M0,_s),_c.addEventListener("click",function(){_l.switch(_s),_l.clickHandler(_s)}),this.containerButtons.appendChild(_c)}},{key:"drawScrollButtons",value:function(){var _s=this,ga=(this.buttonScrollUp=document.createElement("div"),this.buttonScrollUp.setAttribute("class","".concat(L0," ").concat(L0,"--up")),document.createElement("div")),ga=(ga.setAttribute("class","arrow arrow--up"),this.buttonScrollUp.appendChild(ga),this.buttonScrollUp.addEventListener("click",function(){return _s.scroll(1)}),this.containerUI.insertBefore(this.buttonScrollUp,this.containerButtons),this.buttonScrollDown=document.createElement("div"),this.buttonScrollDown.setAttribute("class","".concat(L0," ").concat(L0,"--down")),document.createElement("div"));ga.setAttribute("class","arrow arrow--down"),this.buttonScrollDown.appendChild(ga),this.buttonScrollDown.addEventListener("click",function(){return _s.scroll(-1)}),this.containerUI.appendChild(this.buttonScrollDown)}},{key:"scroll",value:function(){var _s,ga,_l=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,_c=Array.from(this.containerButtons.querySelectorAll(".".concat(L0))).reverse(),_g=[];0<=_l?(this.currentScrollIndex=Math.min(this.currentScrollIndex+_l,_c.length-this.levelButtonCount),_s=Math.min(this.currentScrollIndex,_c.length-this.levelButtonCount),ga=Math.min(this.currentScrollIndex+this.levelButtonCount,_c.length),_g=_c.slice(_s,ga)):_l<0&&(this.currentScrollIndex=Math.max(this.currentScrollIndex+_l,0),_s=Math.max(0,this.currentScrollIndex),ga=Math.min(_c.length,this.currentScrollIndex+this.levelButtonCount),_g=_c.slice(_s,ga)),_c.forEach(function(iy){_g.indexOf(iy)!==-1?iy.style.display="block":iy.style.display="none"}),this.buttonScrollDown&&(this.currentScrollIndex===0?this.buttonScrollDown.setAttribute("disabled","disabled"):this.buttonScrollDown.removeAttribute("disabled")),this.buttonScrollUp&&(this.currentScrollIndex===_c.length-this.levelButtonCount?this.buttonScrollUp.setAttribute("disabled","disabled"):this.buttonScrollUp.removeAttribute("disabled"))}},{key:"switch",value:function(_l){this.containerButtons.querySelectorAll(".".concat(z0)).forEach(function(_c){return _c.setAttribute("class",L0)});var ga,_l=this.containerButtons.querySelector(".".concat(E0," [").concat(M0,"='").concat(_l,"']"));_l&&(ga=Array.from(this.containerButtons.querySelectorAll(".".concat(L0))).reverse(),_l.setAttribute("class","".concat(L0," ").concat(z0)),((ga=ga.indexOf(_l))<this.currentScrollIndex||ga>=this.currentScrollIndex+4)&&this.scroll(ga-this.currentScrollIndex))}},{key:"update",value:function(_s,_g){var _l,_c=this,_g=function(){return new Map((0<arguments.length&&arguments[0]!==void 0?arguments[0]:[]).map(function(ay){return[ay.getZIndex(),ay.getShortName()||ay.getDisplayName()||ay.getName()]}))}((_l=_s,((_g=_g)===B0.FLATTEN?(_g=_l.getVenueModel().getLevelMapFlattenedByZIndex_(),Object.values(_g).map(function(ay){return ay[0]})):_l.getLevels()).sort(function(ay,ly){return ly.getZIndex()-ay.getZIndex()}))),iy=_s.getMainLevel().getZIndex();this.clear(),_g.forEach(function(ay,ly){return _c.drawLevelButton(ly,ay)}),_g.size>this.levelButtonCount&&(_g.size>this.levelButtonCount+1?this.currentScrollIndex=Math.min(Array.from(_g).reverse().findIndex(function(ay){return ay[0]===iy}),_g.size-this.levelButtonCount):this.currentScrollIndex=0,this.drawScrollButtons(),this.scroll(0)),this.switch(iy)}}]),ry}(),J0=function(){function ry(_s,ga){j(this,ry),this.baseTheme=_s,this.metaInformation=ga,this.labelStyleMap={},this.styleMap={},this.setStyleMap()}return _e(ry,[{key:"setStyleMap",value:function(){this.styleMap.ENTRANCE=this.baseTheme.entranceRules.default.styleProperties,this.labelStyleMap.ENTRANCE=this.baseTheme.entranceRules.default.textLabelStyleProperties;for(var _s=0,ga=Object.entries(this.baseTheme.spaceRules);_s<ga.length;_s++){var _c=ey(ga[_s],2),_l=_c[0],_c=_c[1],_g=_c.properties.behavioralAppearance.default.styleProperties,iy=_c.properties.behavioralAppearance.default.textLabelStyleProperties;if(this.styleMap[_l]=_g,this.labelStyleMap[_l]=iy,_c.spaceTypes)for(var ay=0,ly=Object.entries(_c.spaceTypes);ay<ly.length;ay++){var _y=ey(ly[ay],2),cy=_y[0],_y=_y[1],gy=_y.behavioralAppearance.default.styleProperties,_y=_y.behavioralAppearance.default.textLabelStyleProperties;this.styleMap["".concat(_l,"_").concat(cy)]=gy&&Object.keys(gy)!==0?gy:_g,this.labelStyleMap["".concat(_l,"_").concat(cy)]=_y&&Object.keys(_y)!==0?_y:iy}}}},{key:"getBaseTheme",value:function(){return this.baseTheme}},{key:"getStyleMap",value:function(){return this.styleMap}},{key:"getGeometryStyle",value:function(_s){return this.styleMap&&Object.getOwnPropertyNames(this.styleMap)?this.styleMap[_s]:null}},{key:"getLabelStyle",value:function(_s){return this.labelStyleMap&&Object.getOwnPropertyNames(this.labelStyleMap)?this.labelStyleMap[_s]:null}}],[{key:"getGeometryDefaultStyle",value:function(){return{fill:"#e5e5e5",fillOpacity:1,stroke:"#6c7a89",strokeOpacity:1,strokeWidth:2}}},{key:"getLabelDefaultStyle",value:function(){return{stroke:"#6c7a89",zmin:15}}}]),ry}(),_1=function(){function ry(){j(this,ry),this.config=Object.seal({emitEventOnOverrideUpdate:!0}),this.imageCache={},this.releaseSettings_={displayOptions:{},mom:[]},this.theme={}}return _e(ry,[{key:"getMomData",value:function(){return this.releaseSettings_.mom}},{key:"getTheme",value:function(){return this.theme||{}}},{key:"getStyle",value:function(iy){var ga=1<arguments.length&&arguments[1]!==void 0&&arguments[1],_l=this.getTheme(),_c=J0.getGeometryDefaultStyle(),_g=iy.properties.spaceType,iy=iy.properties.spaceCategory,ay=iy;return _g&&(ay="".concat(iy,"_").concat(_g)),{m:(iy=(iy=_l.getGeometryStyle(ay))&&!ga?iy:_c).fill&&iy.fill.toLowerCase()||"#fff",w:iy.strokeWidth/10||.1,o:iy.stroke&&iy.stroke.toLowerCase()||"#fff",l:"Dark"}}},{key:"getLabelStyle",value:function(_s){this.getTheme();var ga=J0.getLabelDefaultStyle();return{fill:ga.stroke,zmin:ga.zmin}}}]),ry}(),b1=Math.PI/180,V1=180/Math.PI,x1=function(){function ry(){j(this,ry)}return _e(ry,null,[{key:"toRadians",value:function(_s){return _s*b1}},{key:"toDegrees",value:function(_s){return _s*V1}},{key:"getBoundingBox",value:function(_s,ga){var _l=[];switch(_s){case y0:_l=[ga,ga];break;case P0:case R0:_l=ga;break;case q0:case _v:_l=ga.reduce(function(_c,_g){return _c.concat(_g)},[]);break;case n1:_l=ga.reduce(function(_c,_g){return _c.concat(_g)},[]).reduce(function(_c,_g){return _c.concat(_g)},[])}return ry.getBoundingBoxVertices(_l)}},{key:"getInverseTransform",value:function(_s){var ga=_s[0]*_s[3]-_s[1]*_s[2],ga=[_s[3]/ga,-_s[1]/ga,-_s[2]/ga,_s[0]/ga,0,0];return ga[4]=-(ga[0]*_s[4]+ga[2]*_s[5]),ga[5]=-(ga[1]*_s[4]+ga[3]*_s[5]),ga}},{key:"applyTransformToPoint",value:function(_s,ga){return[ga[0]*_s[0]+ga[1]*_s[2]+_s[4],ga[0]*_s[1]+ga[1]*_s[3]+_s[5]]}},{key:"transformProduct",value:function(_s,ga){var _l=[0,0,0,0,0,0];return _l[0]=ga[0]*_s[0]+ga[2]*_s[1],_l[1]=ga[1]*_s[0]+ga[3]*_s[1],_l[2]=ga[0]*_s[2]+ga[2]*_s[3],_l[3]=ga[1]*_s[2]+ga[3]*_s[3],_l[4]=ga[0]*_s[4]+ga[2]*_s[5]+ga[4],_l[5]=ga[1]*_s[4]+ga[3]*_s[5]+ga[5],_l}},{key:"convertLonLatToMerc",value:function(_l){var ga=_l[0]*b1,_l=_l[1]*b1,_l=Math.sin(_l);return[.5+ga/(2*Math.PI),.5-Math.log((1+_l)/(1-_l))/(4*Math.PI)]}},{key:"convertMercToLatLon",value:function(_l){var ga=2*Math.PI*(_l[0]-.5),_l=Math.atan(Math.sinh(2*Math.PI*(.5-_l[1])));return[ga/b1,_l/b1]}},{key:"getTransformScale",value:function(_s){return Math.sqrt(_s[0]*_s[3]-_s[1]*_s[2])}},{key:"getLonLatToMercTransform",value:function(_c){var ga=[.002777777777777778,0,0,-1/(360*Math.cos(_c[1]*b1)),0,0],_l=ry.applyTransformToPoint(ga,_c),_c=ry.convertLonLatToMerc(_c);return ga[4]=_c[0]-_l[0],ga[5]=_c[1]-_l[1],ga}},{key:"getNatToMercTransform",value:function(_s){var ga=[_s[4],_s[5]],ga=ry.getLonLatToMercTransform(ga);return ry.transformProduct(_s,ga)}},{key:"convertMxMy2LonLat",value:function(_s,ga){return _s.length&&ga.length?ry.applyTransformToPoint(_s,ga):[]}},{key:"convertLonLat2MxMy",value:function(_s,ga){return!_s.length||!ga.length?[]:(_s=ry.getInverseTransform(_s),ry.applyTransformToPoint(_s,ga))}},{key:"getFlattenedQuadraticBezierCurve",value:function(_s,ga,_l){var _c=[],_g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:10;_g<1&&(_g=6);for(var iy=0;iy<=_g;iy+=1){var ly=iy/_g,gy=(1-ly)*(1-ly),ay=2*ly*(1-ly),ly=ly*ly,cy=gy*_s[0]+ay*ga[0]+ly*_l[0],gy=gy*_s[1]+ay*ga[1]+ly*_l[1];_c.push([cy,gy])}return _c}},{key:"getFlattenedCubicBezierCurve",value:function(_s,ga,_l,_c){var _g=[],iy=4<arguments.length&&arguments[4]!==void 0?arguments[4]:10;iy<1&&(iy=6);for(var ay=0;ay<=iy;ay+=1){var gy=ay/iy,by=(1-gy)*(1-gy)*(1-gy),ly=3*gy*(1-gy)*(1-gy),cy=3*gy*gy*(1-gy),gy=gy*gy*gy,_y=by*_s[0]+ly*ga[0]+cy*_l[0]+gy*_c[0],by=by*_s[1]+ly*ga[1]+cy*_l[1]+gy*_c[1];_g.push([_y,by])}return _g}},{key:"getRectangularCoordinatesOfLabelArea",value:function(gy,ga){var _l=!(2<arguments.length&&arguments[2]!==void 0)||arguments[2],ly=ey(gy,6),_c=ly[0],_g=ly[1],iy=ly[2],ay=ly[3],ly=ly[5],cy=ry.getDeltaLonLatForMeterAtGivenLonLat(_c,_g),gy=gy[4];return _l?(ly&&(gy*=-1),ga!=null&&(gy=(gy+=ga<0?2*Math.PI+ga:ga)<0?2*Math.PI+gy:gy)):gy=0,ry.getRectVerticesFromSignatureRectRepresentation([_c,_g],{xLength:iy,yLength:ay},gy,cy)}},{key:"getRotatedPoint",value:function(ly,iy){var _l=!(2<arguments.length&&arguments[2]!==void 0)||arguments[2],_c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:[0,0],_g=Math.cos(iy),iy=Math.sin(iy),ay=ly[0]-_c[0],ly=ly[1]-_c[1],cy=[];return[(cy=_l?[ay*_g+ly*iy,ly*_g-ay*iy]:[ay*_g-ly*iy,ly*_g+ay*iy])[0]+_c[0],cy[1]+_c[1]]}},{key:"getRectVerticesFromSignatureRectRepresentation",value:function(by,iy,_l,_c){var _g=iy.xLength,iy=iy.yLength,ay=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],by=ey(by,2),ly=by[0],cy=by[1],gy=_g/2,_y=iy/2,by=ey(_c,2),By=by[0],Vy=by[1];return[[1,1],[-1,1],[-1,-1],[1,-1]].map(function(My){return[My[0]*gy,My[1]*_y]}).map(function(My){return ry.getRotatedPoint(My,_l,ay)}).map(function(My){return[My[0]*By,My[1]*Vy]}).map(function(My){return[My[0]+ly,My[1]+cy]})}},{key:"getScaleFactorForRectInSpace",value:function(_s,ga,_l,_c){return _s/=_l,_l=ga/_c,_l<_s?_l:_s}},{key:"getDeltaLonLatForMeterAtGivenLonLat",value:function(_s,ga){return[1/6371e3*(180/Math.PI)/Math.cos(ga*Math.PI/180),1/6371e3*(180/Math.PI)]}},{key:"getBoundingBoxVertices",value:function(){var _s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],ga=[[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]];return _s.reduce(function(_l,_c){return[[Math.min(_c[0],_l[0][0]),Math.min(_c[1],_l[0][1])],[Math.max(_c[0],_l[1][0]),Math.max(_c[1],_l[1][1])]]},ga)}},{key:"isPointInBoundingBox",value:function(_s,ga){var _l,_c,_g,iy;if(_s&&ga)return _s=ey(_s,2),_l=_s[0],_s=_s[1],ga=ey(ga,2),_g=ey(ga[0],2),_c=_g[0],_g=_g[1],ga=ey(ga[1],2),iy=ga[0],ga=ga[1],_l<=iy&&_c<=_l&&_s<=ga&&_g<=_s}},{key:"isPointOnLineSegment",value:function(_g,ay,cy){var _g=ey(_g,2),_c=_g[0],_g=_g[1],ay=ey(ay,2),iy=ay[0],ay=ay[1],cy=ey(cy,2),ly=cy[0],cy=cy[1],gy=(ay-_g)*(cy-_g)<=0;return iy===ly?iy===_c&&gy:_g-cy==(cy-ay)/(ly-iy)*(_c-ly)&&gy}},{key:"rayIntersectLineSegment",value:function(_g,ay,cy){var _g=ey(_g,2),_c=_g[0],_g=_g[1],ay=ey(ay,2),iy=ay[0],ay=ay[1],cy=ey(cy,2),ly=cy[0],cy=cy[1];return iy===ly?!1:(_c=(_c-iy)/(ly-iy),0<=_c&&_c<1&&_g<(cy-ay)*_c+ay)}},{key:"isPointInPolygon",value:function(_g,ga){var _g=ey(_g,2),_l=_g[0],_c=_g[1],_g=ga.length;if(_g<3)return!1;var iy=0,ay=ga[_g-1];return ga.forEach(function(ly){ry.rayIntersectLineSegment([_l,_c],ay,ly)&&(iy+=1),ay=ly}),iy%2!=0}},{key:"isPointOnLineString",value:function(_l,ga){var _l=ey(_l,2),_c=_l[0],_g=_l[1],iy=ga.length;if(!(iy<2))for(var ay=ga[iy-1],ly=0;ly<iy;ly+=1){var cy=ga[ly];if(ry.isPointOnLineSegment([_c,_g],ay,cy))return!0;ay=ga[ly]}return!1}},{key:"getAreaOfPolygon",value:function(_s){var ga=_s.length;if(ga<3)return null;var _l=0,_c=_s[ga-1];return _s.forEach(function(_g){var iy,ay,ly,cy;_l+=.5*(ay=_g,iy=ey(iy=_c,2),ly=iy[0],iy=iy[1],ay=ey(ay,2),cy=ay[0],ly*ay[1]-iy*cy),_c=_g}),_l}},{key:"getDistanceBetweenPoints",value:function(_g,_l){var _g=ey(_g,2),_c=_g[0],_g=_g[1],_l=ey(_l,2),_c=_c-_l[0],_g=_g-_l[1];return Math.sqrt(_c*_c+_g*_g)}}]),ry}(),e_=function(){function ry(){j(this,ry),this.spaceRules={}}return _e(ry,null,[{key:"getDataEntriesOne",value:function(_c,ga){var _l,_c=[_c,""];return ga!==null&&Array.isArray(ga)?_c[1]=ga.toString():ga!==null&&_(ga)==="object"?0<(_l=Object.entries(ga)).length&&(_l=this.getDataEntriesOne(_l[0][0],_l[0][1]),_c[0]="".concat(_c[0],".").concat(_l[0]),_c[1]=_l[1]):_c[1]=ga,_c}},{key:"getDataEntriesAll",value:function(_s){for(var ga=[],_l=0,_c=Object.entries(_s);_l<_c.length;_l++){var _g=ey(_c[_l],2),iy=_g[0],_g=_g[1],iy=this.getDataEntriesOne(iy,_g);ga.push(iy)}return ga}},{key:"doFindComboMatch",value:function(_s,ga){var _l="";if(_s&&_s.configuration&&_s.configuration.combinations)for(var _c=this.getDataEntriesAll(ga),ga=Object.entries(_s.configuration.combinations),_g=0,iy=0,ay=ga;iy<ay.length;iy++)(function(){var cy=ay[iy],gy=Object.keys(cy[1]).filter(function(_y){return _c.some(function(by){return _y===by[0]&&cy[1][_y]===by[1]})});gy.length===Object.keys(cy[1]).length&&gy.length>_g&&(_l=cy[0],_g=gy.length)})();return _l}},{key:"getIconFromCombinations",value:function(_s,ga){if(_s&&_s.configuration.combinations&&ga&&0<Object.keys(ga).length&&_s.behavioralAppearance.combinations&&0<Object.keys(_s.behavioralAppearance.combinations).length){if(ga=this.doFindComboMatch(_s,ga),ga===""||!_s.behavioralAppearance.combinations[ga].labelIcon)return"";if(_s.behavioralAppearance.combinations&&_s.behavioralAppearance.combinations[ga]&&_s.behavioralAppearance.combinations[ga].labelIcon)return _s.behavioralAppearance.combinations[ga].labelIcon.referenceUri}return""}},{key:"findSpace",value:function(_s,ga){if(ga.spaceTypes&&ga.spaceTypes[_s])return ga.spaceTypes[_s]}},{key:"findCategory",value:function(_s){if(this.spaceRules[_s])return this.spaceRules[_s]}},{key:"setSpaceRules",value:function(_s){this.spaceRules=_s}},{key:"getSpaceIcon",value:function(_s,iy,_l){var _c,_g="",iy=this.findCategory(iy);return iy&&(_s=this.findSpace(_s,iy))&&(_c="",(_c=_l?this.getIconFromCombinations(_s,_l):_c)&&_c!==""?_g=_c:_s.behavioralAppearance.default.labelIcon?_g=_s.behavioralAppearance.default.labelIcon.referenceUri:iy.properties.behavioralAppearance.default.labelIcon&&(_g=iy.properties.behavioralAppearance.default.labelIcon.referenceUri)),_g}}]),ry}(),d1=function(){function ry(){j(this,ry),this.themeRule={},this.svgList={},this.defaultLang="ENG"}return _e(ry,null,[{key:"getNumberFromAlphaNumeric",value:function(_s){try{var ga=_s.split("").reverse().join("").replace(/[^0-9]/g,"").substr(0,6);return parseInt(ga,10)}catch{return null}}},{key:"extractNumFromSting",value:function(_s){try{var ga=_s.replace(/[^0-9]/g,"");return parseInt(ga,10)}catch{return console.warn("Exception in converting string to Id"),this.getNumberFromAlphaNumeric(_s)}}},{key:"getVenueId",value:function(_s){var ga;return typeof _s!="number"?(ga=_s.substr(_s.length-6),parseInt(ga,10)):_s}},{key:"getStringFormatIdentifier",value:function(_s){return typeof _s=="number"||_s.length<13?"indoormap-00000000-0000-4000-a000-".concat(_s.toString().padStart(12,"0")):_s}},{key:"setSite",value:function(_c,ga){var _l=this.getName(_c),_c={id:this.getStringFormatIdentifier(ga),location:_c.referencePoint,properties:_c.properties,geometry:_c.geometry,map_version:_c.properties.indoorSiteMetadata.legacyVersion.mapVersion,identifier:this.getVenueId(ga),obj_type:"CommunityMap"};return _c.properties.name=_l,_c.properties.display_name=_l,_c}},{key:"setEntrance",value:function(_s){var ga=this.themeRule.entranceRules.default.labelIcon.referenceUri,_l=this.extractNumFromSting(_s.id),_c=this.getName(_s),_g=_s.properties;return _g.icon=!0,_g.svg=this.svgList[ga.toLowerCase()],_g.name=_c||"entrance",_g.display_name=_c||"entrance",_g.level={id:_s.properties.level.id},{id:_s.id,levelId:_s.properties.level.id,momType:wy,geometry:_s.geometry,location:_s.geometry,properties:_g,identifier:_l,label_area:[_s.referencePoint.coordinates[0],_s.referencePoint.coordinates[1],50,50,180]}}},{key:"setStructure",value:function(_s){var ga=this.extractNumFromSting(_s.id),_l=this.getName(_s),_c=_s.properties;return _c.is_root=_s.properties.drawOrder===0,_c.display_name=_l,_c.map_type=_s.properties.structureType,_c.name=_l,{id:_s.id,obj_type:"Drawing",identifier:ga,properties:_c}}},{key:"getNameByPriority",value:function(_s,ga){for(var _l,_c=this,_g="",iy=0;iy<_s.length;iy++){var ay=_s[iy];if(((_l=ay).nameType==="OFFICIAL"&&_l.languageCode&&_l.languageCode===_c.defaultLang||_l.nameType==="OFFICIAL")&&(ga&&ga===ay.nameType||!ga)){_g=ay.name;break}if(ay.nameType==="ABBREVIATION"&&(ga&&ga===ay.nameType||!ga)){_g=ay.name;break}if(ay.nameType==="UNCLASSIFIED"&&(ga&&ga===ay.nameType||!ga)){_g=ay.name;break}if(!ay.nameType&&ay.name){_g=ay.name;break}}return _g}},{key:"getName",value:function(_s,ga){return _s.properties&&_s.properties.names?this.getNameByPriority(_s.properties.names,ga):_s.properties.placeProperties&&_s.properties.placeProperties&&_s.properties.placeProperties.names?this.getNameByPriority(_s.properties.placeProperties.names,ga):_s.properties.locationDetails&&_s.properties.locationDetails[0]&&_s.properties.locationDetails[0].names?this.getNameByPriority(_s.properties.locationDetails[0].names,ga):""}},{key:"setLevel",value:function(_s){var ga=this.extractNumFromSting(_s.id),_l=_s.properties.names,_c=_s.properties;return _c["short name"]=this.getNameByPriority(_l,_l&&_l.length!==1?"ABBREVIATION":""),_c.name=this.getNameByPriority(_l,_l&&_l.length!==1?"ABBREVIATION":""),{id:_s.id,obj_type:"Level",identifier:ga,properties:_c}}},{key:"setLevelConnector",value:function(_s){var ga=this.extractNumFromSting(_s.id);return{id:_s.id,obj_type:"LevelConnector",properties:_s.properties,geometry:_s.geometry,identifier:ga,location:_s.geometry}}},{key:"setOccupant",value:function(_s){var ga=this.getName(_s),_l=this.extractNumFromSting(_s.id),_c=_s.properties;return _c.occupantName=ga,_c.email=_s.properties.placeProperties&&_s.properties.placeProperties.contacts&&_s.properties.placeProperties.contacts.find(function(_g){return _g.contactType==="EMAIL"})&&_s.properties.placeProperties.contacts.find(function(_g){return _g.contactType==="EMAIL"}).value,_c.name=ga,_c.tags=_s.properties.attributes&&_s.properties.attributes.tags,{geometry:_s.geometry,id:_s.id,obj_type:"Geometry",properties:_c,identifier:_l,spaceIds:_s.properties.spaces||[],type:"Feature",momType:k1}}},{key:"getIcon",value:function(_s){var ga=!1,_l="";return this.svgList[_s]&&(ga=!0,_l=this.svgList[_s]),{icon:ga,svg:_l}}},{key:"setSpace",value:function(_s){var _l=e_.getSpaceIcon(_s.properties.spaceType,_s.properties.spaceCategory,_s.properties.spaceTypeProperties),ay=this.getName(_s),_l=this.getIcon(_l),ga=_l.icon,_l=_l.svg,_c=this.extractNumFromSting(_s.id),_g=(_s.properties.level.id.includes("out"),_s.properties.level.id),iy=_s.properties,ay=(iy.spaceName=ay,iy[_s.properties.spaceCategory]=_s.properties.spaceType,iy.spaceType=_s.properties.spaceType,iy.spaceCategory=_s.properties.spaceCategory,iy.icon=ga,iy.svg=_l,{geometry:_s.geometry,id:_s.id,levelId:_g,label_area:[_s.referencePoint.coordinates[0],_s.referencePoint.coordinates[1],50,50,180],location:_s.referencePoint,obj_type:"Geometry",identifier:_c,properties:iy,momType:A1,type:"Feature"});return _s.properties.spaceAddress&&_s.properties.spaceAddress.id&&(ay.addressId=_s.properties.spaceAddress.id),ay}},{key:"setSpaceGroups",value:function(_s){var ga=this.extractNumFromSting(_s.id);return{id:_s.id,obj_type:"SpaceGroups",properties:_s.properties,geometry:_s.geometry,location:_s.referencePoint,identifier:ga}}},{key:"setTopology",value:function(_s){var ga=this.extractNumFromSting(_s.id);return{id:_s.id,obj_type:"Topology",properties:_s.properties,geometry:_s.geometry,identifier:ga}}},{key:"setAddress",value:function(_s){var ga=this.extractNumFromSting(_s.id),_l=this.getName(_s),_c=_s.properties;return _c.addressName=_l,_c.name=_l,{id:_s.id,properties:_c,obj_type:"Address",identifier:ga}}},{key:"manageSvgDimensions",value:function(_s){for(var ga={},_l=0,_c=Object.entries(_s);_l<_c.length;_l++){var _g,iy,ly=ey(_c[_l],2),ay=ly[0],ly=ly[1];typeof ly=="string"&&(_g=ly.indexOf("<g")!==-1&&ly.indexOf("<g")||ly.indexOf("<p"),iy=ly.indexOf("</s"),_g&&iy&&(ly=ly.substring(_g-1,iy-1),ga[ay]="<svg width='64' height='64' viewBox='0 0 24 32' fill='none' xmlns='http://www.w3.org/2000/svg'>".concat(ly,"</svg>")))}return ga}},{key:"getSiteBoundingBox",value:function(_s){if(_s){var _s=ey(x1.getBoundingBox(_s.geometry.type,_s.geometry.coordinates),2),ga=_s[0],_s=_s[1];if(ga)return"".concat(ga[0],",").concat(ga[1],",").concat(_s[0],",").concat(_s[1])}return"null, null, null, null"}}]),ry}(),j1=function(){function ry(){j(this,ry)}return _e(ry,null,[{key:"get",value:function(_s){return fetch(_s,1<arguments.length&&arguments[1]!==void 0?arguments[1]:{method:"GET"}).then(function(ga){return ga.ok?ga.json():Promise.reject(new Error("Call failed for ".concat(_s," : ").concat(ga.status," ").concat(ga.statusText)))})}},{key:"getFormattedIndoorMapId",value:function(_s){return typeof _s=="number"?"indoormap-00000000-0000-4000-a000-".concat(_s.toString().padStart(12,"0")):_s.includes("indoormap")?_s:"indoormap-00000000-0000-4000-a000-".concat(_s.padStart(12,"0"))}},{key:"getConfigUrl",value:function(_s,ga,ly){var _c=ly.apiKey,ay=ly.url,_g=ly.token,ly=ly.hrn,iy={method:"GET",mode:"cors",cache:"default"},ay="".concat(ay||hy,"/").concat(ly),ly="";return ga===h1.SITE&&(ly="".concat(ay,"/layers/").concat(g1,"/search?p.featureType=indoor.Site&p.indoorMapId='").concat(this.getFormattedIndoorMapId(_s),"'")),ga===h1.IMAGES&&(ly="".concat(ay,"/layers/").concat(_p,"/features/svg")),ga===h1.Theme&&(ly="".concat(ay,"/layers/").concat(oy,"/features/indoorMapRules")),_g?iy.headers={Authorization:"Bearer ".concat(_g)}:ly=ly.concat("".concat(ga===h1.SITE?"&":"?","apiKey=").concat(_c)),this.get(ly,iy)}},{key:"getMomData",value:function(ay,iy){var _l=iy.apiKey,ly=iy.url,_c=iy.token,iy=iy.hrn,_g={method:"GET",mode:"cors",cache:"default"},ly="".concat(ly||hy,"/").concat(iy),iy=ay&&ay.features&&ay.features.find(function(cy){return cy.momType===m1}),ay=d1.getSiteBoundingBox(iy),ly="".concat(ly,"/layers/").concat(g1,"/bbox?bbox=").concat(ay,"&f.momType=indoor.Level,indoor.Space,indoor.Site,indoor.Structure,indoor.Occupant,indoor.SpaceGroups,Address,indoor.Entrance");return _c?_g.headers={Authorization:"Bearer ".concat(_c)}:ly=ly.concat("&apiKey=".concat(_l)),{mom:this.get(ly,_g),site:iy}}},{key:"getDefaultCollection",value:function(ga){var ga=ga.token,_c=dy[py.DEFAULT_COLLECTION],_l=_c.PARAMS,_c=_c.BASE_URL,_c=encodeURI("".concat(_c,"?sortBy=").concat(_l.CREATED_BY,"&q=").concat(_l.COLLECTION));return ga?(_l={method:"GET",headers:{Authorization:"Bearer ".concat(ga)}},this.get(_c,_l)):Promise.reject(new Error("Please provide valid token"))}},{key:"getProjectAccountDetails",value:function(ga){var ga=ga.token,_l=dy[py.ACCOUNT_API].BASE_URL;return ga?(ga={method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(ga)}},this.get(_l,ga)):Promise.reject(new Error("Please provide valid token"))}},{key:"fetchIndoorMapList",value:function(){var _s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},ga=_s.hrn,_g=_s.url,_c=dy[py.CATALOG_LAYER],_l=_c.PARAMS,_c=_c.COLLECTION_LAYER,_g=_g||hy;return ga?(_g=encodeURI("".concat(_g,"/").concat(ga,"/").concat(_c,"?").concat(_l.FEATURE_TYPE.KEY,"=").concat(_l.FEATURE_TYPE.VALUE)),_c=(ga=this.createBaseUrl(_g,Py.GET,{},_s)).URL,_l=ga.options,this.get(_c,_l)):Promise.reject(new Error("Please provide valid hrn"))}},{key:"createBaseUrl",value:function(){var _s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",iy=1<arguments.length&&arguments[1]!==void 0?arguments[1]:Py.GET,ga=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},_c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},_l=_c.token,_c=_c.apiKey,_g=_s,iy={method:iy,mode:"cors"};return _l?iy.headers=d({Authorization:"Bearer ".concat(_l)},ga):_g=_s.concat("&apiKey=".concat(_c)),{URL:_g,options:iy}}}]),ry}(),D1=function(){function ry(){j(this,ry)}return _e(ry,null,[{key:"isPointOnGeoJSONLineString",value:function(_s,ga){var _l=!1;if(ga&&1<ga.length){for(var _c,_g,iy=1;iy<ga.length;iy+=1)if(_c=ga[iy-1],_g=ga[iy],x1.isPointOnLineSegment(_s,_c,_g)){_l=!0;break}}return _l}},{key:"isPointOnGeoJSONMultiLineString",value:function(_s,ga){for(var _l=!1,_c=0;_c<ga.length;_c+=1)if(ry.isPointOnGeoJSONLineString(_s,ga[_c])){_l=!0;break}return _l}},{key:"isPointInsideGeoJSONPolygon",value:function(_s,ga){var _l=!1;if(_l=x1.isPointInPolygon(_s,ga[0])?!0:_l){for(var _c=1;_c<ga.length;_c+=1)if(x1.isPointInPolygon(_s,ga[_c])){_l=!1;break}}return _l}},{key:"isPointInsideGeoJSONMultiPolygon",value:function(_s,ga){for(var _l=ga.length,_c=0;_c<_l;_c+=1)if(ry.isPointInsideGeoJSONPolygon(_s,ga[_c]))return!0;return!1}},{key:"getGeometriesByLonLat",value:function(_s,ga){for(var _l=2<arguments.length&&arguments[2]!==void 0&&arguments[2],_c=[],_g=ga.filter(function(ly){return x1.isPointInBoundingBox(_s,ly.getBoundingBox())}),iy=0;iy<_g.length;iy+=1){var ay=_g[iy];if(ay.isPointInsideGeometry(_s,!0)&&(_c.push(ay),!_l))break}return _c.sort(function(ly,cy){return cy.getZIndex()-ly.getZIndex()})}}]),ry}(),a_=function(){function ry(){var _s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},ga=1<arguments.length?arguments[1]:void 0,_l=2<arguments.length?arguments[2]:void 0;j(this,ry),this.id=_s.id,this.properties=_s.properties||{},this.labelArea=_s.label_area||[],this.geometry=_s.geometry||{},this.location=_s.location||{},this.address=_s.address||{},this.level=ga,this.zIndex=_l,this.spaceId=_s.spaceId,this.state_={isHighlighted:!1,highlightedStyle:{}},this.geometryData=_s}return _e(ry,[{key:"getId",value:function(){return this.geometryData&&this.geometryData.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getInternalAddress",value:function(){return this.address?this.address.properties&&this.address.properties.name:null}},{key:"getCenter",value:function(){return this.location.coordinates||[]}},{key:"getCoordinates",value:function(){return this.geometry.coordinates||[]}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getStyle",value:function(){return this.getMetaInformation_().getStyle(this)}},{key:"getIcon",value:function(){return this.properties.svg}},{key:"getLabelArea",value:function(){return this.labelArea||[]}},{key:"getLabelStyle",value:function(){return this.getMetaInformation_().getLabelStyle(this)||null}},{key:"getLevel",value:function(){return this.level}},{key:"getType",value:function(){return this.geometry.type}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"getBoundingBox",value:function(){var _s=this.getType(),ga=this.getCoordinates(),_l=[];switch(_s){case y0:_l=[ga,ga];break;case P0:case R0:_l=ga;break;case q0:case _v:_l=ga.reduce(function(_c,_g){return _c.concat(_g)},[]);break;case n1:_l=ga.reduce(function(_c,_g){return _c.concat(_g)},[]).reduce(function(_c,_g){return _c.concat(_g)},[])}return x1.getBoundingBoxVertices(_l)}},{key:"isIcon",value:function(){return!!this.properties.icon}},{key:"isPointInsideGeometry",value:function(_s){var ga,_l=1<arguments.length&&arguments[1]!==void 0&&arguments[1],_c=!1;switch(this.getType()){case y0:ga=this.getLabelArea()&&x1.getRectangularCoordinatesOfLabelArea(this.getLabelArea()),_c=x1.isPointInPolygon(_s,ga);break;case P0:break;case R0:_c=_l&&D1.isPointOnGeoJSONLineString(_s,this.getCoordinates());break;case q0:_c=_l&&D1.isPointOnGeoJSONMultiLineString(_s,this.getCoordinates());break;case _v:_c=D1.isPointInsideGeoJSONPolygon(_s,this.getCoordinates());break;case n1:_c=D1.isPointInsideGeoJSONMultiPolygon(_s,this.getCoordinates())}return _c}},{key:"highlight",value:function(){var _s=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],ga=1<arguments.length?arguments[1]:void 0;this.state_.isHighlighted=_s,this.state_.highlightedStyle=_s?ga:{}}},{key:"isHighlighted",value:function(){return!!this.state_.isHighlighted}},{key:"getHighlightedStyle",value:function(){return this.state_.highlightedStyle||{}}},{key:"toJSON",value:function(){return d({},this.geometry)}},{key:"getMetaInformation_",value:function(){return this.getLevel()?this.getLevel().getDrawing().getVenueModel().metaInformation_:null}}]),ry}(),l_=function(){function ry(_s,ga){var _l=this;j(this,ry),this.id=_s&&_s.id,this.properties=_s&&_s.properties,this.zIndexCount=0,this.geometries=_s&&_s.features&&Object.values(_s.features).reduce(function(_c,_g){return _c[[_g.id]]=new a_(_g,_l,_g.properties.drawOrder),_c},{}),this.drawing=ga,this.levelData=_s}return _e(ry,[{key:"getId",value:function(){return this.levelData&&this.levelData.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getName",value:function(){return this.properties&&this.properties.name||""}},{key:"getDisplayName",value:function(){return this.properties&&this.properties.display_name||""}},{key:"getDrawing",value:function(){return this.drawing}},{key:"getShortName",value:function(){return this.properties&&this.properties["short name"]||""}},{key:"getZIndex",value:function(){return this.properties&&this.properties.zLevel}},{key:"getFeatureCollectionArray",value:function(){return this.getGeometries().map(function(_s){return _s.toJSON()})}},{key:"getGeometryById",value:function(_s){return this.geometries[_s]}},{key:"getGeometries",value:function(){return 0<arguments.length&&arguments[0]!==void 0&&arguments[0]?this.geometries&&Object.values(this.geometries).sort(function(_s,ga){return ga.getZIndex()-_s.getZIndex()}):this.geometries&&Object.values(this.geometries).sort(function(_s,ga){return _s.getZIndex()-ga.getZIndex()})}},{key:"getGeometriesByAddress",value:function(_s){return Object.values(this.geometries).filter(function(ga){return ga.address&&ga.address.properties&&ga.address.properties.name&&ga.address.properties.name===_s})}},{key:"isMain",value:function(){return!!this.properties.isMain}}]),ry}(),u_=function(){function ry(_s){var ga=this,_l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},_c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:[],_g=3<arguments.length?arguments[3]:void 0;j(this,ry),this.venueModel=_g,this.levels=_c.map(function(iy){return new l_(iy,ga)}),this.structure=_s,this.id=_s&&_s.id,this.properties=_l}return _e(ry,[{key:"getId",value:function(){return this.structure&&this.structure&&this.structure.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"isRoot",value:function(){return!!this.properties.is_root}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getBoundingBox",value:function(){if(this.structure&&this.structure.geometry){var ga=ey(x1.getBoundingBox(this.structure.geometry.type,this.structure.geometry.coordinates),2),_s=ga[0],ga=ga[1];if(_s)return[ga[1],_s[0],_s[1],ga[0]]}return[null,null,null,null]}},{key:"getCenter",value:function(){return this.structure&&this.structure.location&&this.structure.location.coordinates}},{key:"getGeometryById",value:function(_s){return this.getGeometries().find(function(ga){return ga.getId()===_s||ga.getIdentifier()===_s})}},{key:"getGeometries",value:function(){return this.levels.flatMap(function(_s){return _s.getGeometries()})}},{key:"getLevelById",value:function(_s){return this.levels.find(function(ga){return ga.getId()===_s||ga.getIdentifier()===_s})}},{key:"getLevelByZIndex",value:function(_s){return this.levels.find(function(ga){return ga.getZIndex()===_s})}},{key:"getLevels",value:function(){return this.levels}},{key:"getMainLevel",value:function(){return this.levels.find(function(_s){return _s.isMain()})}},{key:"getVenueModel",value:function(){return this.venueModel}}]),ry}(),c_=B0.STANDARD,r_=function(){function ry(_s){var ga=this,_l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:new _1;j(this,ry),this.metaInformation_=_l,this.momStructure=_s,this.id=_s&&_s.site&&_s.site.id,this.location=_s&&_s.site&&_s.site.location||{},this.properties=_s&&_s.site&&d({},_s.site.properties),this.drawings=_s&&_s.structure&&Object.values(_s.structure).map(function(_c){var _g=_s.getStructureWiseGeometry(_c.id);return new u_(_c,_c.properties,Object.values(_g),ga)})}return _e(ry,[{key:"getDisplaySettings",value:function(){return(this.metaInformation_.releaseSettings_?this.metaInformation_.releaseSettings_.displayOptions:"").display||c_}},{key:"getId",value:function(){return this.momStructure&&this.momStructure.site&&this.momStructure.site.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getName",value:function(){return this.properties.name}},{key:"getBoundingBox",value:function(){if(this.momStructure){var ga=ey(x1.getBoundingBox(this.momStructure.site.geometry.type,this.momStructure.site.geometry.coordinates),2),_s=ga[0],ga=ga[1];if(_s)return[ga[1],_s[0],_s[1],ga[0]]}return[null,null,null,null]}},{key:"getCenter",value:function(){return this.location.coordinates}},{key:"getGeometryById",value:function(_s){return this.getGeometries().find(function(ga){return ga.getId()===_s||ga.getIdentifier()===_s})}},{key:"getGeometries",value:function(){return this.getLevels().sort(function(_s,ga){return _s.getZIndex()-ga.getZIndex()}).flatMap(function(_s){return _s.getGeometries()})}},{key:"getGeometriesByLonLat",value:function(_s){var ga=this,_c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],_l=!(2<arguments.length&&arguments[2]!==void 0)||arguments[2],_c=_c.map(function(_g){return ga.getLevelById(_g)});return _c.length===0&&(_c=this.drawings.filter(function(_g){return _g=_g.getBoundingBox(),x1.isPointInBoundingBox(_s,_g)}).flatMap(function(_g){return _g.getLevels()})),D1.getGeometriesByLonLat(_s,_c.flatMap(function(_g){return _g.getGeometries(!0)}),_l)}},{key:"getDrawingById",value:function(_s){return this.drawings.find(function(ga){return ga.getId()===_s||ga.getIdentifier()===_s})}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getRootDrawing",value:function(){return this.drawings.find(function(_s){return _s.isRoot()})}},{key:"getLevelById",value:function(_s){return this.getLevels().find(function(ga){return ga.getId()===_s||ga.getIdentifier()===_s})}},{key:"getLevelsByZIndex",value:function(){var _s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0;return this.getLevels().filter(function(ga){return Number(ga.getZIndex())===Number(_s)})}},{key:"getLevels",value:function(){return this.drawings.flatMap(function(_s){return _s.getLevels()})}},{key:"getMomStructure",value:function(){return this.momStructure}},{key:"getLevelMapFlattenedByZIndex_",value:function(){return this.getLevels().reduce(function(_s,ga){var _l=ga.getZIndex();return _s[_l]||(_s[_l]=[]),_s[_l].push(ga),_s},{})}},{key:"getOccupant",value:function(){var _s=this.momStructure.occupant;return Object.values(_s)}}]),ry}(),h_=function(){function ry(_s){j(this,ry),this.theme=_s&&_s.theme,this.level=_s&&_s.level,this.site=_s&&_s.site,this.spaces=_s&&_s.spaces,this.address=_s&&_s.address,this.levelConnector=_s&&_s.levelConnector,this.topology=_s&&_s.topology,this.entrance=_s&&_s.entrance,this.occupant=_s&&_s.occupant,this.structure=_s&&_s.structure,this.spaceGroups=_s&&_s.spaceGroups,this.levelWiseGeometry={},this.levelStructureMapping=_s&&_s.levelStructureMapping,this.outdoorLevelMapping=_s&&_s.outdoorLevelMapping||{},this.labelTextPreference=_s&&_s.labelTextPreference||null}return _e(ry,[{key:"setSpaceWithLevel",value:function(){var _s=this;this.spaces&&Object.values(this.spaces).forEach(function(ga){var _l="",_c=(ga.addressId&&(_l=_s.address&&_s.address[ga.addressId]&&_s.address[ga.addressId].properties.addressName),ga.properties),_l=(_c.addressName=_l,_s.getLabelAsPerPreference(d(d({},ga),{},{properties:_c}))),_c=ga.properties,_l=(_c.name=_l,_c.display_name=_l,ga.properties.icon&&(_c.name=ga.id,_c.display_name=ga.id),ga),_c=(_l.properties=_c,_l.address=_s.address[ga.addressId],(_s.spaces[ga.id]=ga).levelId);_s.outdoorLevelMapping[_c]&&(_c=_s.outdoorLevelMapping[_c]),_s.levelWiseGeometry[_c]||(_s.levelWiseGeometry[_c]={}),_s.levelWiseGeometry[_c][_l.id]=_l})}},{key:"setOccupantWithLevel",value:function(){var _s=this;this.occupant&&Object.values(this.occupant).forEach(function(ga){var _l,_c;ga.spaceIds&&ga.properties.occupantName&&(_l=[],_c=[],ga.spaceIds.forEach(function(_g){function iy(cy){var by=!1,by=(_s.labelTextPreference&&_s.labelTextPreference.length&&(by=_s.labelTextPreference.indexOf("OCCUPANT_NAMES")!==-1),_s.labelTextPreference===null||by),gy=cy,_y=cy.properties,by=(_y.name=cy.properties.icon||!by?cy.properties.name:ga.properties.occupantName,_y.display_name=cy.properties.icon||!by?cy.properties.display_name:ga.properties.occupantName,_y.address=cy.address,_y.occupantName=ga.properties.occupantName,cy.levelId);_s.outdoorLevelMapping[by]&&(by=_s.outdoorLevelMapping[by]),_s.levelWiseGeometry[by]||(_s.levelWiseGeometry[by]={}),_s.levelWiseGeometry[by][cy.id]=gy,_l.push(gy),_c.push(cy.id)}var ay=_g.id,ay=_s.spaces[ay],ly=null;_s.spaceGroups&&Object.values(_s.spaceGroups).forEach(function(cy){cy.properties.spaceGroups&&cy.properties.spaceGroups&&cy.properties.spaceGroups.forEach(function(gy){gy.mainSpace&&gy.mainSpace.id===_g.id&&(ly=gy.spaces.map(function(_y){return _y.id}))})}),ly&&0<ly.length&&ly.forEach(function(cy){iy(_s.spaces[cy])}),ay&&iy(ay)}),_s.occupant[ga.id]=ga,_s.occupant[ga.id].space=_l,_s.occupant[ga.id].spaceIds=_c)})}},{key:"setEntrance",value:function(){var _s=this;this.entrance&&Object.values(this.entrance).forEach(function(ga){var _l=ga.properties.level.id;_s.levelWiseGeometry[_l]||(_s.levelWiseGeometry[ga.properties.level.id]={}),_s.outdoorLevelMapping[_l]&&(_l=_s.outdoorLevelMapping[_l]),_s.levelWiseGeometry[_l][ga.id]=ga})}},{key:"setLevelWiseGeometry",value:function(){var _s=this;this.level&&Object.keys(this.level).forEach(function(ga){_s.levelWiseGeometry[ga]={}}),this.setSpaceWithLevel(),this.setOccupantWithLevel(),this.setEntrance()}},{key:"getStructureWiseGeometry",value:function(_s){for(var ga={},_l=0,_c=Object.entries(this.levelWiseGeometry);_l<_c.length;_l++){var iy=ey(_c[_l],2),_g=iy[0],iy=iy[1];_s===this.levelStructureMapping[_g]&&(ga[_g]=this.level[_g],ga[_g].features=iy)}return ga}},{key:"getLabelAsPerPreference",value:function(_c){var _c=_c.properties,ga=_c.spaceType,iy=_c.occupantName,ly=_c.spaceName,_l=_c.addressName,_c=_c.spaceCategory,_g=(_r(cy={},Ty,iy),_r(cy,Yy,ly),_r(cy,s0,ga?ga.charAt(0).toUpperCase()+ga.slice(1).toLowerCase():""),_r(cy,t0,_c?_c.charAt(0).toUpperCase()+_c.slice(1).toLowerCase():""),_r(cy,_m,_l),_r(cy,f0,_l),_r(cy,h0,_l),cy),iy=this.theme.spaceRules,ay="",ly=_c&&ga&&iy[_c]&&iy[_c].spaceTypes&&iy[_c].spaceTypes[ga].behavioralAppearance.default.labelType;if(ly==="NONE"){if(!this.labelTextPreference)return"";_g[s0]=""}if(_l=_c&&ga&&iy[_c]&&iy[_c].properties&&iy[_c].properties.behavioralAppearance&&iy[_c].properties.behavioralAppearance.default&&iy[_c].properties.behavioralAppearance.default.labelType,(_l==="NONE"||_l===void 0)&&ly===void 0){if(!this.labelTextPreference)return"";_g[s0]="",_g[t0]=""}var cy=_c&&ga&&iy[_c]&&iy[_c].properties&&iy[_c].properties.behavioralAppearance&&iy[_c].properties.behavioralAppearance.default&&iy[_c].properties.behavioralAppearance.default.labelTextPreference,gy=cy&&this.labelTextPreference?this.labelTextPreference:cy;if(gy){for(var _y=0;_y<gy.length;_y++)if(_g[gy[_y]]){ay=_g[gy[_y]];break}}return ay}}]),ry}(),n_=function(){function ry(ay){var _c=ay.apiKey,_g=ay.baseUrl,iy=ay.token,ay=ay.hrn;j(this,ry),this.hostOptions_={apiKey:_c,url:_g,token:iy,hrn:ay},this.momData=[],this.theme={},this.loadOptions={}}var _s,ga;return _e(ry,[{key:"setHostOptions",value:function(_l){Object.keys(_l).length!==0&&(this.hostOptions_=d(d({},this.hostOptions_),_l))}},{key:"getToken",value:function(){return this.hostOptions_.token}},{key:"getHrn",value:function(){return this.hostOptions_.hrn}},{key:"load",value:function(_l){var _c=this,_g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return this.loadOptions=d(d(d({},my),_g),{},{venueId:_l}),this.hostOptions_.mapData=_g.mapData,this.hostOptions_.themeRule=_g.themeRule,this.hostOptions_.svgList=_g.svgList,this.hostOptions_.labelTextPreference=_g.labelTextPreferenceOverride,this.getHrn()?this.getVenueModalInstance():this.getToken()?this.getDefaultCollectionWithToken().then(function(){return _c.getVenueModalInstance()}).catch(function(){return Promise.reject(new Error("Unable to find indoor map collection. Please contact your administrator"))}):Promise.reject(new Error("In order to load indoor map, Please provide either hrn or token"))}},{key:"getVenueModalInstance",value:function(){var _l=this;return Promise.resolve().then(function(){return _l.loadOptions.isMetaEnabled?_l.getMeta_(_l.loadOptions.isIconsEnabled).catch(function(_c){return console.warn(_c),Promise.resolve()}):Promise.reject()}).then(function(_c){return _l.getVenue_(_c)}).then(function(_c){return _c}).catch(function(_c){console.debug("Captured event VENUE_ERROR_STATE",_c)})}},{key:"createMomStructure",value:function(){var _l=this,_c={site:{},structure:{},level:{},levelConnector:{},occupant:{},spaces:{},spaceGroups:{},topology:{},address:{},outdoorLevelMapping:{},entrance:{},levelStructureMapping:{}};return this.momData.forEach(function(_g){var iy="indoormap-00000000-0000-4000-a000-".concat(_l.loadOptions.venueId.toString().padStart(12,"0")),ay=_g.id;_g.momType!==M1&&!_l.hostOptions_.mapData&&_g.properties.indoorMapId!=_l.loadOptions.venueId&&_g.properties.indoorMapId!==iy||(_g.momType===m1?_c.site=d1.setSite(_g,_l.loadOptions.venueId):_g.momType===L1?_c.structure[ay]=d1.setStructure(_g):_g.momType!==vy||_g.properties.isOutdoor&&(!_g.properties.isOutdoor||_g.properties.parentIndoorLevel)?_g.momType===vy&&_g.properties.isOutdoor&&_g.properties.parentIndoorLevel?_c.outdoorLevelMapping[_g.id]=_g.properties.parentIndoorLevel.id:_g.momType===wy?_c.entrance[ay]=d1.setEntrance(_g):_g.momType===k1?_c.occupant[ay]=d1.setOccupant(_g):_g.momType===A1?_c.spaces[ay]=d1.setSpace(_g):_g.momType===I1?_c.spaceGroups[ay]=d1.setSpaceGroups(_g):_g.momType===M1&&(_c.address[ay]=d1.setAddress(_g)):(_c.level[ay]=d1.setLevel(_g),_c.levelStructureMapping[ay]=_g.properties.structure.id))}),_c.theme=this.theme,_c.labelTextPreference=this.hostOptions_.labelTextPreference,new h_(_c)}},{key:"getVenue_",value:function(_l){this.momData=_l.getMomData();var _c=this.createMomStructure();return _c.setLevelWiseGeometry(),new r_(_c,_l)}},{key:"setConfigData",value:function(iy){var _c=iy.themeRule,_g=iy.svgList,iy=iy.defaultLang;e_.setSpaceRules(_c.spaceRules),d1.svgList=_g,d1.themeRule=_c,d1.defaultLang=iy,this.theme=_c}},{key:"getMeta_",value:function(){var _l=this,_c=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],_g=new _1,iy=this.hostOptions_.mapData?{}:this.getMetaConfig_(this.loadOptions.venueId,h1.SITE),ay=this.hostOptions_.themeRule||this.getMetaConfig_(this.loadOptions.venueId,h1.Theme),ly=[];return _c&&(ly=this.hostOptions_.svgList||this.getMetaConfig_(this.loadOptions.venueId,h1.IMAGES)),new Promise(function(cy){Promise.all([iy,ay,ly]).then(function(_y){var _y=ey(_y,3),by=_y[0],By=_y[1],Vy=_y[2],My=_l.hostOptions_.mapData?{mom:new Promise(function(Xy){return Xy(_l.hostOptions_.mapData)}),site:_l.hostOptions_.mapData.features.find(function(Xy){return Xy.momType===m1})}:j1.getMomData(by,_l.hostOptions_);My.mom.then(function(Xy){var zy=By.properties;_g.imageCache=_c?d1.manageSvgDimensions(Vy.properties):[],_l.setConfigData({themeRule:zy,svgList:_g.imageCache,defaultLang:My&&My.site&&My.site.properties.defaultLanguageCode}),_g.releaseSettings_={displayOptions:{display:zy.entranceRules.default.displayName||B0.STANDARD},mom:Xy.features},_g.theme=new J0(zy,_g),cy(_g)})})})}},{key:"getMetaConfig_",value:function(_l,_c){return j1.getConfigUrl(_l,_c,this.hostOptions_)}},{key:"fetchCollections",value:function(){return j1.getDefaultCollection(this.hostOptions_)}},{key:"fetchUserProjects",value:function(){return j1.getProjectAccountDetails(this.hostOptions_)}},{key:"getDefaultCollectionWithToken",value:(_s=g().mark(function _l(){var _c=this;return g().wrap(function(_g){for(;;)switch(_g.prev=_g.next){case 0:return _g.abrupt("return",Promise.all([this.fetchCollections(),this.fetchUserProjects()]).then(function(ay){var ay=ey(ay,2),ly=ay[0],ay=ay[1],ly=_c.getHrnFromDefaultCollection(ly,ay);return ly.hrn?(ay={hrn:ly.hrn},_c.setHostOptions(ay),Promise.resolve()):Promise.reject()}).catch(function(iy){return Promise.reject(iy)}));case 1:case"end":return _g.stop()}},_l,this)}),ga=function(){var _l=this,_c=arguments;return new Promise(function(_g,iy){var ay=_s.apply(_l,_c);function ly(gy){$(ay,_g,iy,ly,cy,"next",gy)}function cy(gy){$(ay,_g,iy,ly,cy,"throw",gy)}ly(void 0)})},function(){return ga.apply(this,arguments)})},{key:"getHrnFromDefaultCollection",value:function(iy,_c){var _g,iy=iy.results.items;return Array.isArray(iy)&&iy.length?(_g=this.getProjectRealm(_c),iy.find(function(ay){return ay.hrn.includes(_g)})):Promise.reject(new Error("Error while accessing default collection"))}},{key:"getProjectRealm",value:function(_l){return Array.isArray(_l.items)&&_l.items.length&&_l.items[0].id.includes("indoor-")?(_l=_l.items[0].hrn,this.getRealmNameFromHrn(_l)):""}},{key:"getRealmNameFromHrn",value:function(_l){return _l?(_l=_l.split(":")).length&&_l[4]:""}},{key:"getSupportedMapList",value:function(){var _l=this,_g=this.hostOptions_,_c=_g.hrn,_g=_g.token;return _c?this.fetchMapInfoList():_g?this.getDefaultCollectionWithToken().then(function(){return _l.fetchMapInfoList()}).catch(function(){return Promise.reject(new Error("Unable to find indoor map collection. Please contact your administrator"))}):Promise.reject(new Error("In order to load map list, Please provide either hrn or token"))}},{key:"fetchMapInfoList",value:function(){var _l=this;return j1.fetchIndoorMapList(this.hostOptions_).then(function(_c){return _c=_c.features,0<_c.length?_c.map(function(ay){var ay=ay.properties,iy=ay.placeProperties,ay=ay.indoorMapId,ly=ay.split("-").pop(),ly=ly.substring(ly.length-5);return{mapIdentifier:ay,mapName:_l.getMapName(iy.names).name,mapId:ly}}):[]}).catch(function(_c){Promise.reject(new Error("".concat(_c,": Error while fetching map list")))})}},{key:"getMapName",value:function(_l){return Array.isArray(_l)&&0<_l.length?_l.find(function(_c){return _c.nameType==="OFFICIAL"}):{}}}]),ry}(),p_=["origin","destination"],f_=function(){function ry(){var _s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(j(this,ry),!_s.apiKey&&!_s.token)throw new Error("API key or Token is missing");this.config_=d({baseUrl:"https://meta-indoor-routing.api-gateway.ls.hereapi.com"},_s)}return _e(ry,[{key:"calculateRoute",value:function(_c){var ga=_c.origin,ga=ga===void 0?{}:ga,_l=_c.destination,_l=_l===void 0?{}:_l,_c=_f(_c,p_);if(!ga.coordinates||!_l.coordinates)throw new Error("Waypoint coordinates are missing");function _g(gy){var _y=gy.coordinates,cy=gy.venueId,gy=gy.levelId,_y=_y.join(",");return cy&&gy?_y.concat(";indoorMapId=",cy,";levelId=",gy):_y}var iy=new URL("".concat(this.config_.baseUrl,"/v1/routes")),ay=new URLSearchParams({origin:_g(ga),destination:_g(_l),apiKey:this.config_.apiKey});return Object.entries(_c).forEach(function(gy){var gy=ey(gy,2),cy=gy[0],gy=gy[1];ay.append(cy,_(gy)==="object"?JSON.stringify(gy):gy)}),iy.search=ay,fetch(iy,{headers:{"X-Api-Key":this.config_.apiKey}}).then(function(ly){return ly.json()})}}]),ry}(),w1={VENUE_DATA_LOADED:"VENUE_DATA_LOADED",VENUE_THEME_LOADED:"VENUE_THEME_LOADED",VENUE_ICONS_LOADED:"VENUE_ICONS_LOADED",VENUE_MOM_DATA_LOADED:"VENUE_MOM_DATA_LOADED",VENUE_ERROR_STATE:"VENUE_ERROR_STATE",VENUE_MAP_DATA_LOADED:"VENUE_MAP_DATA_LOADED",VENUE_ENTITY_DATA_LOADED:"VENUE_ENTITY_DATA_LOADED",VENUE_DATA_MODEL_LOADED:"VENUE_DATA_MODEL_LOADED",VENUE_NAV_DATA_LOADED:"VENUE_NAV_DATA_LOADED",META_DATA_LOADED:"META_DATA_LOADED",META_DATA_MODEL_LOADED:"META_DATA_MODEL_LOADED",META_DATA_MODEL_UPDATED:"META_DATA_MODEL_UPDATED"},p0=(Object.freeze((_r(u0={},w1.VENUE_DATA_LOADED,{description:"event fired when all requested files along with metadata & overrides are loaded",emitTemplate:{}}),_r(u0,w1.VENUE_MAP_DATA_LOADED,{description:"event fired when requested levels, drawings & community files are loaded",emitTemplate:{}}),_r(u0,w1.VENUE_ENTITY_DATA_LOADED,{description:"event fired when requested entity data is loaded",emitTemplate:{}}),_r(u0,w1.VENUE_DATA_MODEL_LOADED,{description:"event fired when a map file is loaded",emitTemplate:{}}),_r(u0,w1.VENUE_NAV_DATA_LOADED,{description:"event fired when requested navigation product is loaded",emitTemplate:{}}),_r(u0,w1.META_DATA_LOADED,{description:"event fired when all requested meta files are loaded except icon & marker",emitTemplate:{}}),_r(u0,w1.META_DATA_MODEL_LOADED,{description:"event fired when a specific model is loaded except icon & marker",emitTemplate:{}}),_r(u0,w1.META_DATA_MODEL_UPDATED,{description:"event fired when a specific meta override is added or removed",emitTemplate:{}}),_r(u0,w1.VENUE_ICONS_LOADED,{description:"event fired when all icons of venue are loaded",emitTemplate:{}}),u0)),new Ny),U0=(p0.EVENT_NAME=w1,p0.on("newListener",function(ry){w1[ry]||console.warn("subscribing for un-registered/documented event")}),function(){_n(_s,H.map.Feature);var ry=_d(_s);function _s(ga){var _l;if(j(this,_s),_l=ry.call(this),ga instanceof r_)return _l.venueModel=ga,_l.search_=new T1(ga),_l.status_={activeDrawingId:ga.getRootDrawing().getIdentifier(),activeLevelIndex:ga.getRootDrawing().getMainLevel().getZIndex()},_l.mapObjectStore_=_l.getDefaultMapObjectsStore_(),_l.drawings=ga.getDrawings().map(function(_c){return _c=new yy(_c),_c.setParentEventTarget(_h(_l)),_c}),_l.levels=ga.getLevels().map(function(_c){var _g=new xy(_c);return _g.setParentEventTarget(_l.drawings.find(function(iy){return iy.getIdentifier()===_g.getData().getDrawing().getIdentifier()})),_g}),_l.geometries=ga.getGeometries().map(function(_c){var _g=new fy(_c);return _g.setParentEventTarget(_l.levels.find(function(iy){return iy.getIdentifier()===_g.getData().getLevel().getIdentifier()})),_g}),_l.mutualExclusiveHighlight_=!1,_l;throw new Error("It is mandatory to provide valid instance of venueModel")}return _e(_s,[{key:"getData",value:function(){return this.venueModel}},{key:"getBoundingBox",value:function(){return _u(H.geo.Rect,sy(this.venueModel.getBoundingBox()))}},{key:"getCenter",value:function(){var _l=ey(this.venueModel.getCenter(),2),ga=_l[0],_l=_l[1];return new H.geo.Point(_l,ga)}},{key:"getId",value:function(){return this.venueModel.getId()}},{key:"getIdentifier",value:function(){return this.venueModel.getIdentifier()}},{key:"getName",value:function(){return this.venueModel.getName()}},{key:"getDrawing",value:function(ga){return this.drawings.find(function(_l){return _l.getIdentifier()===ga})}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getLevel",value:function(ga){return this.levels.find(function(_l){return _l.getIdentifier()===ga})}},{key:"getLevels",value:function(){return this.levels}},{key:"getGeometry",value:function(ga){return this.getGeometries().find(function(_l){return _l.getIdentifier()===ga})}},{key:"getGeometries",value:function(){return this.geometries}},{key:"getActiveLevels",value:function(){var ga=this;return this.getData().getDisplaySettings()===B0.FLATTEN?this.venueModel.getLevelsByZIndex(this.status_.activeLevelIndex).map(function(_l){return ga.getLevel(_l.getIdentifier())}):[this.venueModel.getDrawingById(this.status_.activeDrawingId).getLevelByZIndex(this.status_.activeLevelIndex)].map(function(_l){return ga.getLevel(_l.getIdentifier())})}},{key:"getActiveDrawing",value:function(){return this.getDrawing(this.status_.activeDrawingId)}},{key:"setActiveDrawing",value:function(ga){if(this.status_.activeDrawingId!==ga){var _l=this.venueModel.getDrawingById(ga);if(!_l)throw new Error("Drawing ".concat(ga," was not found"));var _c=this.status_.activeDrawingId;this.status_.activeDrawingId=_l.id,this.setActiveLevelIndex(_l.getMainLevel().getZIndex()),this.dispatchEvent(new H.util.ChangeEvent(_s.EVENTS.DRAWING_CHANGE,ga,_c))}}},{key:"getActiveLevelIndex",value:function(){return this.status_.activeLevelIndex}},{key:"setActiveLevelIndex",value:function(ga){var _l;this.venueModel.getLevelsByZIndex(ga)&&(_l=this.status_.activeLevelIndex,this.status_.activeLevelIndex=ga,this.dispatchEvent(new H.util.ChangeEvent(_s.EVENTS.LEVEL_CHANGE,ga,_l)))}},{key:"isActive",value:function(){var ga=this.getParentEventTarget();return!!ga&&this===ga.activeVenue}},{key:"getHighlightedGeometries",value:function(){var ga=this;return this.venueModel.getGeometries().filter(function(_l){return _l.isHighlighted()}).map(function(_l){return ga.getGeometry(_l.getIdentifier())})}},{key:"setHighlightedGeometries",value:function(){var ga=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],_l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],_g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},_c=3<arguments.length&&arguments[3]!==void 0&&arguments[3],_g=d(d({},R1),_g),iy=_g.fillColor,ay=_g.outlineColor,ly=_g.outlineWidth;this.mutualExclusiveHighlight_=!!_c,this.mutualExclusiveHighlight_&&this.getHighlightedGeometries().forEach(function(cy){cy.getData().highlight(!1)}),_l.forEach(function(cy){cy.getData().highlight(ga,{m:iy,o:ay,w:ly})}),this.dispatchEvent(_s.EVENTS.GEOMETRY_HIGHLIGHT)}},{key:"getMapObjects",value:function(){var ga=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.getActiveLevelIndex(),_l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.getActiveDrawing();return this.mapObjectStore_[ga][_l.getIdentifier()]}},{key:"setMapObjects",value:function(){var ga=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],_l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.getActiveLevelIndex(),_c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:this.getActiveDrawing();this.mapObjectStore_[_l]&&this.mapObjectStore_[_l][_c.getIdentifier()]&&(this.mapObjectStore_[_l][_c.getIdentifier()]=sy(ga)),this.updateMapObjectsVisibility_()}},{key:"search",value:function(){var ga=this;return this.search_.find(0<arguments.length&&arguments[0]!==void 0?arguments[0]:"").flatMap(function(_l){return _l.geometries.map(function(_c){return ga.getGeometry(_c.id)})})}},{key:"updateMapObjectsVisibility_",value:function(){Object.values(this.mapObjectStore_).forEach(function(ga){Object.values(ga).forEach(function(_l){return _l.forEach(function(_c){return _c.setVisibility(!1)})})}),this.isActive()&&this.mapObjectStore_[this.getActiveLevelIndex()][this.getActiveDrawing().getIdentifier()].forEach(function(ga){return ga.setVisibility(!0)})}},{key:"getDefaultMapObjectsStore_",value:function(){var ga=this,_l=this.getData().getDisplaySettings()===B0.FLATTEN;return this.venueModel.getLevels().reduce(function(ay,_g){var iy=_g.getZIndex(),ay=d({},ay);return ay[iy]||(ay[iy]={}),ay[iy][_g.getDrawing().getIdentifier()]=[],_l&&(ay[iy][ga.venueModel.getRootDrawing().getIdentifier()]=[]),ay},{})}}]),_s}()),F1=(U0.EVENTS={ACTIVE_VENUE_CHANGE:"activevenuechange",DRAWING_CHANGE:"drawingchange",LEVEL_CHANGE:"levelchange",GEOMETRY_HIGHLIGHT:"geometryhighlight"},function(){function ry(){j(this,ry)}return _e(ry,null,[{key:"getIconLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&arguments[0]!==void 0?arguments[0]:[]).flatMap(function(_s){return _s.getData().getGeometries()}).filter(function(_s){return _s.isIcon()&&_s.getIcon()}).map(function(_s){var _l=ey(_s.getLabelArea(),2),ga=_l[0],_l=_l[1],_c=_s.getLevel(),_g=_s.getIcon(),iy=_s.properties.spaceType||_s.properties.spaceCategory||_s.getDisplayName();return{type:"Feature",properties:{id:_s.getIdentifier(),geometryId:_s.getIdentifier(),levelId:_c.getIdentifier(),name:iy,venueId:_c.getDrawing().getVenueModel().getIdentifier(),url:_g?"data:image/svg+xml;utf8,".concat(encodeURIComponent(_g)):""},geometry:{type:Y0.POINT,coordinates:[ga,_l]}}})}}},{key:"getLabelLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&arguments[0]!==void 0?arguments[0]:[]).flatMap(function(_s){return _s.getData().getGeometries()}).filter(function(_s){return _s.getDisplayName()&&!_s.isIcon()}).map(function(_s){var _l=ey(_s.getLabelArea(),2),ga=_l[0],_l=_l[1],_g=_s.getLabelStyle(),_c=_g.fill,_g=_g.zmin,iy=_s.getLevel();return{type:"Feature",properties:{id:_s.getIdentifier(),geometryId:_s.getIdentifier(),levelId:iy.getIdentifier(),venueId:iy.getDrawing().getVenueModel().getIdentifier(),name:_s.getDisplayName(),minZoom:_g||15,textFillColor:_c.toLowerCase()},geometry:{type:Y0.POINT,coordinates:[ga,_l]}}})}}},{key:"getGeometryLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&arguments[0]!==void 0?arguments[0]:[]).flatMap(function(_s){return _s.getData().getGeometries()}).filter(function(_s){return _s.getType()!==Y0.POINT}).map(function(_s){var _c=_s.getHighlightedStyle()||{},ga=_c.m,_l=_c.o,_c=_c.w,ay=d({},_s.getStyle()),_g=ay.m,iy=ay.o,ay=ay.w,gy=o1,ly=gy.fillColor,cy=gy.outlineColor,gy=gy.outlineWidth,_y=_s.getLevel();return{type:"Feature",properties:{id:_s.getIdentifier(),fillColor:(ga||_g||ly).toLowerCase(),geometryId:_s.getIdentifier(),levelId:_y.getIdentifier(),venueId:_y.getDrawing().getVenueModel().getIdentifier(),outlineColor:(_l||iy||cy).toLowerCase(),outlineWidth:Number(((_c||ay||gy)/3).toFixed(2)),zIndex:_s.getZIndex()},geometry:{type:_s.getType(),coordinates:_s.getCoordinates()}}})}}},{key:"getFootprintLayer",value:function(_s){return{type:"FeatureCollection",features:_s.flatMap(function(ga){var _l=ga.getData().getRootDrawing().getMainLevel().getIdentifier(),_c=ga.getLevel(_l).getData().getGeometries().filter(function(_g){return _g.getType()===Y0.POLYGON});return[{type:"Feature",properties:{isFootprint:!0,levelId:_l,venueId:ga.getIdentifier(),zIndex:1},geometry:{type:"MultiPolygon",coordinates:_c.map(function(_g){return _g.getCoordinates()})}},{type:"Feature",properties:{isFootprint:!0,levelId:_l,venueId:ga.getIdentifier(),zIndex:2,venueName:ga.getName()},geometry:{type:"Point",coordinates:ga.getCenter().toGeoJSON().coordinates.slice(0,2)}}]})}}}]),ry}()),d_=function(){function ry(){j(this,ry)}return _e(ry,null,[{key:"getStyle",value:function(){var _s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],ga=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],_l={styles:[{layer:T0.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#613F8E",lineWidth:"2px",renderOrder:1},{layer:T0.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#AF91B4",renderOrder:2},{layer:T0.FOOTPRINT,when:["==",["geometry-type"],"Point"],technique:"text",color:"black",size:16,text:["get","venueName"],priority:61},{layer:T0.VECTOR,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:["get","fillColor"],renderOrder:["get","zIndex"]},{layer:T0.VECTOR,technique:"solid-line",color:["get","outlineColor"],lineWidth:["get","outlineWidth"],renderOrder:["get","zIndex"]},{layer:T0.TEXT,minZoomLevel:["get","minZoom"],technique:"text",color:["get","textFillColor"],size:E1.size,text:["get","name"],priority:60},{layer:T0.ICON,minZoomLevel:Z0,when:["==",["geometry-type"],"Point"],technique:"labeled-icon",textIsOptional:!0,size:0,imageTexture:["concat","texture",["get","name"]],screenWidth:["interpolate",["linear"],["zoom"],15,3,21,70],screenHeight:["interpolate",["linear"],["zoom"],15,3,21,70],priority:61}],images:{},imageTextures:[]};return _s.forEach(function(_c){var _g="texture"+_c.properties.name;_l.images[_g]||(_l.images[_g]={url:_c.properties.url,preload:!0},_l.imageTextures.push({name:_g,image:_g}))}),ga.forEach(function(_c){var _g,ly=_c.getData().getHighlightedStyle(),iy=ly.m,ay=ly.o,ly=ly.w;(_g=_l.styles).push.apply(_g,[{layer:T0.VECTOR,when:["==",["get","id"],_c.id],technique:"fill",color:iy,renderOrder:["get","zIndex"]},{layer:T0.VECTOR,when:["==",["get","id"],_c.id],technique:"solid-line",color:ay,lineWidth:ly,renderOrder:["get","zIndex"]}])}),new H.map.render.harp.Style(_l)}}]),ry}(),g_=function(){function ry(){j(this,ry)}return _e(ry,null,[{key:"getIconsTextures",value:function(){var _s={},ga={},_l=(0<arguments.length&&arguments[0]!==void 0?arguments[0]:[]).reduce(function(_c,_g){var iy=_g.properties.name;return _c[iy]||(_c[iy]=[]),_c[iy].push(_g),_c},{});return Object.keys(_l).forEach(function(_c){var _g="texture".concat(_c),iy="sprite".concat(_c),ay=_l[_c][0].properties.url;_s[_g]={url:ay,sprites:_r({},iy,[0,0,50,50])},_l[_c].forEach(function(ly){ly=ly.properties,ga["icon".concat(ly.name)]={filter:{name:ly.name,$zoom:{min:Z0}},draw:{points:{interactive:!0,priority:1,size:[[15,"50%"],[16,"55%"],[17,"60%"],[18,"65%"],[19,"75%"],[20,"80%"],[21,"100%"]],texture:_g,sprite:iy}}}})}),{textures:_s,iconLayers:ga}}},{key:"getFootprintLayer",value:function(){return{data:{source:"venues",layer:T0.FOOTPRINT},draw:{polygons:{interactive:!0,color:"#AF91B4",order:2},lines:{color:"#613F8E",width:"2px",order:1},points:{color:"[0, 0, 0, 0]",size:"0px",order:3,priority:1,text:{anchor:"center",collide:!1,font:{fill:"black",size:"16px"},text_source:"function() { return feature.venueName }"}}}}}},{key:"getGeometryLayer",value:function(){var _s,ga,_l,_c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],_g={};return _c.length&&(_s=(_l=_c[0].getData().getHighlightedStyle()).m,ga=_l.o,_l=_l.w,_g={filter:{id:_c.map(function(iy){return iy.id})},draw:{polygons:{interactive:!0,color:_s},lines:{color:ga,width:_l}}}),{data:{source:"venues",layer:T0.VECTOR},draw:{polygons:{interactive:!0,color:"function() { return feature.fillColor }",order:"function() { return feature.zIndex }"},lines:{color:"function() { return feature.outlineColor }",order:"function() { return feature.zIndex }",width:"function() { return feature.outlineWidth }"}},highlighted:_g}}},{key:"getTextLayer",value:function(){return{filter:{$zoom:{min:u1}},data:{source:"venues",layer:T0.TEXT},draw:{points:{filter:"function() { return $zoom > feature.minZoom }",color:"[0, 0, 0, 0]",size:"0px",offset:["0px","-10px"],priority:2,text:{font:{fill:"function() { return feature.textFillColor }",size:E1.size},text_source:"function() { return feature.name }"}}}}}},{key:"getIconLayer",value:function(_s){return d({data:{source:"venues",layer:T0.ICON}},_s)}},{key:"getStyle",value:function(){var _l=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],ga=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],_l=ry.getIconsTextures(_l),_s=_l.textures,_l=_l.iconLayers,ga={venue_footprints:ry.getFootprintLayer(),venue_geometries:ry.getGeometryLayer(ga),venue_labels:ry.getTextLayer(),venue_icons:ry.getIconLayer(_l)},_l=H.gl.yaml.safeDump({sources:{venues:{max_zoom:P1,type:"GeoJSONTileSource"}},layers:ga,textures:_s});return new H.map.render.webgl.Style(_l)}}]),ry}(),y_={type:"FeatureCollection",features:[]},q1={extent:4096,indexMaxZoom:0,maxZoom:24,tolerance:3},u0=function(){_n(_s,H.map.provider.RemoteTileProvider);var ry=_d(_s);function _s(ga){return j(this,_s),(ga=ry.call(this,ga)).venues=[],ga.activeVenue=null,ga.dataLayers_={},ga.tileIndexes_={},ga.addEventListener(U0.EVENTS.ACTIVE_VENUE_CHANGE,ga.activeVenueChangeHandler_,void 0,_h(ga)),ga}return _e(_s,[{key:"setStyle",value:function(ga){return this.setStyleInternal(ga)}},{key:"getStyle",value:function(){return this.getStyleInternal()}},{key:"isFeatureVisible_",value:function(ga,_l){var _c=ga.properties;return this.activeVenue&&_c.venueId===this.activeVenue.getIdentifier()?_l!==T0.FOOTPRINT&&this.activeVenue.getActiveLevels().some(function(_g){return _g.id===_c.levelId}):_c.isFootprint===!0&&_l===T0.FOOTPRINT}},{key:"requestInternal",value:function(ga,_l,_c,_g){function iy(cy){for(var gy=0;gy<cy.length;gy+=1)cy[gy]=cy[gy].map(function(_y){return a1(_y,_c,ga,_l,q1.extent)})}var ay=this,ly={};return Object.keys(this.tileIndexes_).forEach(function(cy){var gy=ay.tileIndexes_[cy].getTile(_c,ga,_l);ly[cy]=gy?p1(gy):y_,ly[cy].features=ly[cy].features.filter(function(Xy){return ay.isFeatureVisible_(Xy,cy)});for(var _y=0;_y<ly[cy].features.length;_y+=1){var by=ly[cy].features[_y],By=by.geometry.type;if(By===Y0.POLYGON||By===Y0.MULTI_LINESTRING)iy(by.geometry.coordinates);else if(By===Y0.MULTI_POLYGON)by.geometry.coordinates.map(iy);else for(var Vy=by.geometry.coordinates,My=0;My<Vy.length;My+=1)Vy[My]=a1(Vy[My],_c,ga,_l,q1.extent)}}),_g(ly),{cancel:function(){}}}},{key:"getActiveVenue",value:function(){return this.activeVenue}},{key:"getVenue",value:function(ga){return ga?this.venues.find(function(_l){return _l.getIdentifier()===ga}):this.activeVenue}},{key:"setActiveVenue",value:function(ga){var _l=this.activeVenue;this.activeVenue=ga,this.dispatchEvent(new H.util.ChangeEvent(U0.EVENTS.ACTIVE_VENUE_CHANGE,ga,_l)),this.reload()}},{key:"addVenue",value:function(ga){var _l=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(!(ga instanceof U0))throw new Error("Invalid argument");var _c=ga.getIdentifier();if(this.getVenue(_c))throw new Error("Please invoke provider.removeVenue to remove old instance of venue ".concat(_c," before adding new"));ga.setParentEventTarget(this),this.venues.push(ga),_l||(this.reloadData_(),this.reloadStyle_())}},{key:"addVenues",value:function(){var ga=this,_l=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[];0<_l.length&&(_l.forEach(function(_c){_c instanceof U0&&ga.addVenue(_c,!0)}),this.reloadData_(),this.reloadStyle_())}},{key:"removeVenue",value:function(ga){var _l;ga instanceof U0&&-1<this.venues.indexOf(ga)&&(_l=ga.getIdentifier(),this.activeVenue&&this.activeVenue.getIdentifier()===_l&&this.setActiveVenue(null),this.venues.splice(this.venues.indexOf(ga),1),this.reloadData_(),this.reloadStyle_(),this.reload())}},{key:"getFeatureProxy",value:function(iy,_l,_c){var _g=iy.geometryId,iy=iy.venueId,iy=this.getVenue(iy);return _g?_c(iy.getGeometries().find(function(ay){return ay.id===_g})):iy&&_c(iy),!0}},{key:"addVenueEventListeners_",value:function(ga){ga&&(ga.addEventListener(U0.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),ga.addEventListener(U0.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),ga.addEventListener(U0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"removeVenueEventListeners_",value:function(ga){ga&&(ga.removeEventListener(U0.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),ga.removeEventListener(U0.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),ga.removeEventListener(U0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"activeVenueChangeHandler_",value:function(_c){var _l=_c.oldValue,_c=_c.newValue;_l&&(this.removeVenueEventListeners_(_l),_l.updateMapObjectsVisibility_()),_c&&(this.addVenueEventListeners_(_c),_c.updateMapObjectsVisibility_())}},{key:"drawingChangeHandler_",value:function(){this.reload()}},{key:"levelChangeHandler_",value:function(){this.activeVenue&&(this.activeVenue.updateMapObjectsVisibility_(),this.reload())}},{key:"geometryHighlightHandler_",value:function(){this.reloadStyle_(this.activeVenue.getHighlightedGeometries())}},{key:"createDataLayers_",value:function(){var ga=this,_l=0<arguments.length&&arguments[0]!==void 0?arguments[0]:Object.keys(T0),_c=T0.FOOTPRINT,_g=T0.ICON,iy=T0.TEXT,ay=T0.VECTOR;_l.forEach(function(ly){switch(ly){case ay:ga.dataLayers_[ay]=F1.getGeometryLayer(ga.venues);break;case _c:ga.dataLayers_[_c]=F1.getFootprintLayer(ga.venues);break;case _g:ga.dataLayers_[_g]=F1.getIconLayer(ga.venues);break;case iy:ga.dataLayers_[iy]=F1.getLabelLayer(ga.venues);break;default:throw new Error("Unsupported Layer ".concat(ly))}})}},{key:"createTileIndexes_",value:function(){var ga=this;(0<arguments.length&&arguments[0]!==void 0?arguments[0]:Object.keys(T0)).forEach(function(_l){ga.tileIndexes_[_l]=new e1(ga.dataLayers_[_l],q1)})}},{key:"reloadData_",value:function(){var ga=0<arguments.length&&arguments[0]!==void 0?arguments[0]:Object.keys(T0);this.createDataLayers_(ga),this.createTileIndexes_(ga)}},{key:"reloadStyle_",value:function(ga){var _l=this.dataLayers_[T0.ICON]?this.dataLayers_[T0.ICON].features:[];this.getEngineType()===H.Map.EngineType.WEBGL?this.setStyle(g_.getStyle(_l,ga)):this.getEngineType()===H.Map.EngineType.HARP&&this.setStyle(d_.getStyle(_l,ga))}},{key:"providesGeoJSON",value:function(){return!0}}]),_s}(),v_=new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3}),m_=new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3}),__=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImIiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PG1hc2sgaWQ9ImMiIHdpZHRoPSIzOCIgaGVpZ2h0PSI0NiIgeD0iMCIgeT0iMCIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZWxsaXBzZSBjeD0iMjAiIGN5PSI0NS4xNiIgZmlsbD0iI0ZGRiIgc3Ryb2tlPSIjOTc5Nzk3IiBzdHJva2Utd2lkdGg9Ii4yNSIgcng9IjMuNSIgcnk9IjMuNSIvPjx1c2UgZmlsbD0iIzAxQjZCMiIgeGxpbms6aHJlZj0iI2IiLz48cGF0aCBmaWxsPSIjMzIzMjMyIiBmaWxsLW9wYWNpdHk9Ii41IiBkPSJNMTEuODEgMzcuNjZoMTYuMzhsLTguMiA4eiIvPjx1c2Ugc3Ryb2tlPSIjNDE2QTg2IiBzdHJva2Utd2lkdGg9Ii41IiBtYXNrPSJ1cmwoI2MpIiB4bGluazpocmVmPSIjYSIvPjxlbGxpcHNlIGN4PSIxOS44MSIgY3k9IjE5LjE5IiBmaWxsPSIjRkZGIiByeD0iNC44MSIgcnk9IjQuODEiLz48L2c+PC9zdmc+"),b_=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzMi44MyAzMy4xMDRjLjQwNy0uMzc0IDEuNDE5LTEuNDUyIDEuNDE5LTEuNDUyeiIvPjxtYXNrIGlkPSJjIiB3aWR0aD0iMzgiIGhlaWdodD0iNDYiIHg9IjAiIHk9IjAiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PGVsbGlwc2UgaWQ9ImIiIGN4PSIxOS44MDciIGN5PSIxOS4xNjgiIHJ4PSIxMi4zNjMiIHJ5PSIxMi4xOTciLz48bWFzayBpZD0iZCIgd2lkdGg9IjI1LjcyNSIgaGVpZ2h0PSIyNS4zOTQiIHg9Ii0uNSIgeT0iLS41Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNi45NDQgNi40NzFoMjUuNzI1djI1LjM5NEg2Ljk0NHoiLz48dXNlIHhsaW5rOmhyZWY9IiNiIi8+PC9tYXNrPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxlbGxpcHNlIGN4PSIyMCIgY3k9IjQ1LjE2IiBmaWxsPSIjRkZGIiBzdHJva2U9IiM5Nzk3OTciIHN0cm9rZS13aWR0aD0iLjI1IiByeD0iMy41IiByeT0iMy41Ii8+PHVzZSBmaWxsPSIjMzIzMjMyIiB4bGluazpocmVmPSIjYSIvPjxwYXRoIGZpbGw9IiM3RDdEN0QiIGQ9Ik0xMi4wMTEgMzcuODA1aDE1Ljk3OGwtNy45MTYgOHoiLz48dXNlIHN0cm9rZT0iIzdDN0M3QyIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNlKSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIHN0cm9rZT0iI0ZGRiIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNjKSIgeGxpbms6aHJlZj0iI2EiLz48ZWxsaXBzZSBmaWxsPSIjRkZGIiBjeD0iMTkuODA3IiBjeT0iMTkuMTY4IiByeD0iMTIuMzYzIiByeT0iMTIuMTk3Ii8+PHBhdGggZmlsbD0iIzMyMzIzMiIgZD0iTTYuODEyIDYuOTQ4aDYuNDV2Ni4zNjRoLTYuNDV6bTAgMTIuNzI3aDYuNDV2Ni4zNjRoLTYuNDV6bTYuNDUtNi4zNjNoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS0xOS4wOTFoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS02LjM2M2g2LjQ1djYuMzY0aC02LjQ1em0wIDEyLjcyN2g2LjQ1djYuMzY0aC02LjQ1eiIvPjx1c2Ugc3Ryb2tlPSIjRkZGIiBtYXNrPSJ1cmwoI2QpIiB4bGluazpocmVmPSIjYiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIvPjwvZz48L3N2Zz4="),B1=function(){function ry(_s,ga){j(this,ry),this.indoorMapObjects_=null,this.outdoorMapObjects_=null,this.createRouteObjects_(_s,ga)}return _e(ry,[{key:"createRouteObjects_",value:function(_s){for(var ga=this,_s=_s.sections,_l=_s===void 0?[]:_s,_c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:V0,_g=(this.indoorMapObjects_={},this.outdoorMapObjects_=new H.map.Group,function(ly){var cy,gy=_l[ly],by=gy.departure.place,_y=by.id,by=by.type,By=H.util.flexiblePolyline.decode(gy.polyline).polyline,Vy=void 0,My=void 0,Xy=_c(ly,_l,ry.ObjectType.SEGMENT_START_MARKER),Xy=(Xy&&(Vy=new H.map.Marker(gy.departure.place.location,{icon:Xy})),_c(ly,_l,ry.ObjectType.SEGMENT_FINISH_MARKER)),zy=(Xy&&(My=new H.map.Marker(gy.arrival.place.location,{icon:Xy})),_c(ly,_l,ry.ObjectType.SEGMENT_POLYLINE));by==="indoor"?(Xy=function(){var Iy=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],Ry=new Map,Cy=new H.geo.LineString,Dy=ey(Iy[0],3)[2];return Ry.set(Dy,[Cy]),Iy.forEach(function(Qy){Qy[2]!==Dy&&(Dy=Qy[2],Cy=new H.geo.LineString,Ry.has(Dy)?Ry.get(Dy).push(Cy):Ry.set(Dy,[Cy])),Cy.pushLatLngAlt.apply(Cy,sy(Qy))}),Ry}(By),cy=Array.from(Xy.keys()).reduce(function(Iy,Ry){return Iy[Ry]||(Iy[Ry]=new H.map.Group),Iy},{}),zy&&Xy.forEach(function(Iy,Ry){Iy.forEach(function(Cy){1<Cy.getPointCount()&&(Cy=new H.map.Polyline(Cy,{style:zy}),cy[Ry].addObject(Cy))})}),Vy&&cy[gy.departure.place.location.lvl].addObject(Vy),My&&cy[gy.arrival.place.location.lvl].addObject(My),ga.indoorMapObjects_[_y]=d(d({},ga.indoorMapObjects_[_y]||{}),cy)):(zy&&(ly=new H.geo.LineString(By.flatMap(function(Iy){return[Iy[0],Iy[1],0]})),by=new H.map.Polyline(ly,{style:zy}),ga.outdoorMapObjects_.addObject(by)),Vy&&ga.outdoorMapObjects_.addObject(Vy),My&&ga.outdoorMapObjects_.addObject(My))}),iy=0;iy<_l.length;iy++)_g(iy)}},{key:"getIndoorObjects",value:function(){return this.indoorMapObjects_}},{key:"getOutdoorObjects",value:function(){return this.outdoorMapObjects_}}]),ry}(),W1=(B1.ObjectType={SEGMENT_START_MARKER:1,SEGMENT_FINISH_MARKER:2,SEGMENT_POLYLINE:3},function(){_n(_s,H.service.Service);var ry=_d(_s);function _s(ga){j(this,_s),_l=ry.call(this,_s,d(d({},ga),{},{baseUrl:void 0}));var _l,_c={apiKey:ga.apikey,baseUrl:ga.baseUrl,token:ga.token},_g={apiKey:_c.apiKey,token:_c.token},iy=(_c.apiKey||(_c.apiKey=_l.getUrl().getQuery().apikey),ga.useLegacy||!1);return _l.venueService_=new n_(_c,iy),_g.apiKey||(_g.apiKey=_l.getUrl().getQuery().apikey),ga.routingBaseUrl&&(_g.baseUrl=ga.routingBaseUrl),_l.routingService_=new f_(_g),_l}return _e(_s,[{key:"loadVenue",value:function(ga){return console.warn("Venue service version 1 is no longer supported hence "+ga+" could not be loaded"),Promise.resolve()}},{key:"calculateRoute",value:function(ga){return console.warn("HERE Indoor Routing is deprecated and will be removed soon."),this.routingService_.calculateRoute(ga)}}]),_s}()),U1=(W1.CONFIG_KEY="venues",function(){_n(_s,H.service.Service);var ry=_d(_s);function _s(_g){j(this,_s),_l=ry.call(this,_s,d(d({},_g),{},{baseUrl:void 0}));var _l,_c={apiKey:_g.apikey,baseUrl:_g.baseUrl,token:_g.token,hrn:_g.hrn},_g=(_c.apiKey||(_c.apiKey=_l.getUrl().getQuery().apikey),_g.useLegacy||!1);return _l.venueService_=new n_(_c,_g),_l}return _e(_s,[{key:"loadVenue",value:function(ga){return this.venueService_.load(ga,1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).then(function(_l){return new U0(_l)})}},{key:"getMapInfoList",value:function(){return this.venueService_.getSupportedMapList()}}]),_s}()),p0=(U1.CONFIG_KEY="indoorMaps",H.service.Platform.prototype.getVenuesService=function(ry,_s){var ga=U1;return _s!==1&&_s?_s!==S1.v2||ry.token||(ry.hrn?ry.apikey||console.error("Venue Service version 2 requires either apikey or token"):console.error("Token is mandatory when Hrn is not provided in Venue Service version 2")):(console.warn("Venue service version 1 is no longer supported"),ga=W1),this.createService(ga,ry)},U1.LABEL_TEXT_PREFERENCE_OVERRIDE={OCCUPANT_NAMES:"OCCUPANT_NAMES",SPACE_NAME:"SPACE_NAME",SPACE_TYPE_NAME:"SPACE_TYPE_NAME",SPACE_CATEGORY_NAME:"SPACE_CATEGORY_NAME",INTERNAL_ADDRESS:"INTERNAL_ADDRESS"},function(){_n(_s,H.ui.Control);var ry=_d(_s);function _s(ga){var _l,_c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return j(this,_s),(_l=ry.call(this)).provider_=null,_l.levelSelectorUI_=null,_l.setAlignment(_c&&_c.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),_l.addClass("venues-ui"),ga instanceof U0&&_l.setVenue(ga),_l}return _e(_s,[{key:"renderInternal",value:function(ga,_l){ty(_i(_s.prototype),"renderInternal",this).call(this,ga,_l),this.createLevelSelectorUI_(ga),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(ga){ga instanceof U0&&(this.removeEventListeners_(),this.venue=ga,this.provider_=ga.getParentEventTarget(),this.update_(),this.addEventListeners_())}},{key:"createLevelSelectorUI_",value:function(ga){var _l=this;ga.innerHTML="",this.levelSelectorUI_=null,this.levelSelectorUI_=new y1(ga,null,null,function(_c){return _l.venue.setActiveLevelIndex(_c)})}},{key:"update_",value:function(){var ga,_l;this.levelSelectorUI_&&(ga=this.venue.getActiveDrawing().getData(),_l=this.venue.getData().getDisplaySettings(),this.levelSelectorUI_.update(ga,_l),this.levelChangeHandler_())}},{key:"addEventListeners_",value:function(){this.venue&&(this.venue.addEventListener(U0.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.addEventListener(U0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.addEventListener(U0.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&(this.venue.removeEventListener(U0.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.removeEventListener(U0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.removeEventListener(U0.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"levelChangeHandler_",value:function(){this.levelSelectorUI_.switch(this.venue.getActiveLevelIndex())}},{key:"drawingChangeHandler_",value:function(){this.update_()}},{key:"activeVenueChangeHandler_",value:function(ga){this.setVenue(ga.newValue)}}]),_s}()),Y1=function(){_n(_s,H.ui.Control);var ry=_d(_s);function _s(ga){var _l,_c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return j(this,_s),(_l=ry.call(this)).provider_=null,_l.drawingSelectorUI_=null,_l.addClass("venues-ui"),_l.setAlignment(_c&&_c.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),ga instanceof U0&&_l.setVenue(ga),_l}return _e(_s,[{key:"renderInternal",value:function(ga,_l){ty(_i(_s.prototype),"renderInternal",this).call(this,ga,_l),this.createDrawingSelectorUI_(ga),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(ga){ga instanceof U0&&(this.removeEventListeners_(),this.venue=ga,this.provider_=ga.getParentEventTarget(),this.drawingSelectorUI_&&this.drawingSelectorUI_.update(ga.getData()),this.addEventListeners_())}},{key:"createDrawingSelectorUI_",value:function(ga){var _l=this;ga.innerHTML="",this.drawingSelectorUI_=null,this.drawingSelectorUI_=new C0(ga,null,function(_c){return _l.venue.setActiveDrawing(_c)})}},{key:"addEventListeners_",value:function(){this.venue&&this.venue.addEventListener(U0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.addEventListener(U0.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&this.venue.removeEventListener(U0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.removeEventListener(U0.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"drawingChangeHandler_",value:function(){this.drawingSelectorUI_.switch(this.venue.getActiveDrawing().id)}},{key:"activeVenueChangeHandler_",value:function(ga){this.setVenue(ga.newValue)}}]),_s}(),Y1=Object.freeze({__proto__:null,DrawingControl:Y1,LevelControl:p0});return o(`.venues-ui * {
  font-family: "Fira Sans", "Helvetica Neue", Helvetica, sans-serif;
  color: #0F1621;
}
.venues-ui .arrow {
  display: block;
  width: 100%;
  height: 100%;
  background-repeat: no-repeat;
  background-position: center;
}
.venues-ui .arrow--up {
  background-image: url("data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-426.000000, -584.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls-Copy' transform='translate(417.753906, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(15.000000, 16.499023) rotate(-180.000000) translate(-15.000000, -16.499023) translate(9.000000, 12.749023)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}
.venues-ui .arrow--down {
  background-image: url("data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-347.000000, -704.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls' transform='translate(338.251953, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(9.000000, 132.746094)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}
.venues-ui .venues-ui-button {
  display: block;
  width: 40px;
  height: 40px;
  line-height: 40px;
  font-size: 16px;
  font-weight: 600;
  background-color: #fff;
  border: none;
  border-bottom: 1px solid #9FA2A6;
  cursor: pointer;
  overflow: hidden;
  color: #6e737a;
  text-align: center;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.venues-ui .venues-ui-button:hover, .venues-ui .venues-ui-button--active {
  background-color: #f0f0f0;
  color: #0F1621;
}
@keyframes fade {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}
.venues-ui__drawings .drawings {
  position: absolute;
  top: 0;
  right: 45px;
  display: none;
  opacity: 0;
  border-radius: 5px;
  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);
}
.venues-ui__drawings .drawings--open {
  display: block;
  opacity: 1;
  animation: fade 1s;
}
.venues-ui__drawings .drawings .venues-ui-button {
  width: auto;
  padding: 0 10px;
}
.venues-ui__drawings .drawings .venues-ui-button:first-of-type {
  border-top-left-radius: 5px;
  border-top-right-radius: 5px;
}
.venues-ui__drawings .drawings .venues-ui-button:last-of-type {
  border-bottom-left-radius: 5px;
  border-bottom-right-radius: 5px;
}
.venues-ui__drawings .trigger {
  border-radius: 5px;
  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);
}
.venues-ui__drawings .trigger .arrow {
  transform: rotate(0);
  transition: 0.4s;
}
.venues-ui__drawings .trigger.venues-ui-button--active .arrow {
  transform: rotate(90deg);
  transition: 0.4s;
}
.venues-ui__levels {
  border-radius: 5px;
  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);
}
.venues-ui__levels .levels {
  overflow: hidden;
}
.venues-ui__levels .venues-ui-button--up + .levels .venues-ui-button {
  border-radius: 0;
}
.venues-ui__levels .venues-ui-button:first-of-type {
  border-top-left-radius: 5px;
  border-top-right-radius: 5px;
}
.venues-ui__levels .venues-ui-button:last-of-type {
  border-bottom-left-radius: 5px;
  border-bottom-right-radius: 5px;
}
.venues-ui__levels .venues-ui-button[disabled=disabled] .arrow {
  opacity: 0.5;
}
.venues-ui__directory {
  position: absolute;
  top: 10px;
  right: 60px;
  bottom: calc(100% - 45px);
  width: 350px;
  overflow: hidden;
  background: white;
  border-radius: 5px;
  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);
}
.venues-ui__directory.active {
  bottom: 10px;
}
.venues-ui__directory .directory__list {
  top: 80px;
  bottom: 20px;
  position: absolute;
  overflow-y: scroll;
  right: 10px;
  left: 10px;
  font-size: 12px;
}
.venues-ui__directory .directory__list svg {
  width: 25px;
  height: 25px;
}
.venues-ui__directory .directory__heading {
  margin: 8px;
  font-size: 15px;
  font-weight: normal;
  cursor: pointer;
}
.venues-ui__directory .directory__input {
  margin: 10px;
}
.venues-ui__directory .directory__input input {
  width: 100%;
  padding: 5px 0;
}
.venues-ui__directory .directory__trigger {
  position: absolute;
  right: 10px;
  top: 15px;
  width: 10px;
  height: 10px;
}
.venues-ui__directory .directory__trigger .arrow {
  transform: rotate(0);
  transition: 0.4s;
}
.venues-ui__directory .directory__trigger--active .arrow {
  transform: rotate(-180deg);
  transition: 0.4s;
}`),e.Drawing=yy,e.Geometry=fy,e.Level=xy,e.Provider=u0,e.Route=B1,e.Service=W1,e.Service2=U1,e.Venue=U0,e.ui=Y1,Object.defineProperty(e,"__esModule",{value:!0}),e}({})}).call(self);const H$3=H;var reactDomServerLegacy_browser_production_min={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$1=reactExports;function l$2(e){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+e,h=1;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+e+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p$1=Object.prototype.hasOwnProperty,fa$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ha$1={},ia$1={};function ja$1(e){return p$1.call(ia$1,e)?!0:p$1.call(ha$1,e)?!1:fa$1.test(e)?ia$1[e]=!0:(ha$1[e]=!0,!1)}function r(e,o,h,d,g,_,$){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=g,this.mustUseProperty=h,this.propertyName=e,this.type=o,this.sanitizeURL=_,this.removeEmptyString=$}var t$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){t$1[e]=new r(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var o=e[0];t$1[o]=new r(o,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){t$1[e]=new r(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){t$1[e]=new r(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){t$1[e]=new r(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){t$1[e]=new r(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){t$1[e]=new r(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){t$1[e]=new r(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){t$1[e]=new r(e,5,!1,e.toLowerCase(),null,!1,!1)});var ka$1=/[\-:]([a-z])/g;function la$1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var o=e.replace(ka$1,la$1);t$1[o]=new r(o,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var o=e.replace(ka$1,la$1);t$1[o]=new r(o,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var o=e.replace(ka$1,la$1);t$1[o]=new r(o,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){t$1[e]=new r(e,1,!1,e.toLowerCase(),null,!1,!1)});t$1.xlinkHref=new r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){t$1[e]=new r(e,1,!1,e.toLowerCase(),null,!0,!0)});var u$1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ma=["Webkit","ms","Moz","O"];Object.keys(u$1).forEach(function(e){ma.forEach(function(o){o=o+e.charAt(0).toUpperCase()+e.substring(1),u$1[o]=u$1[e]})});var na=/["'&<>]/;function v(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var o=na.exec(e);if(o){var h="",d,g=0;for(d=o.index;d<e.length;d++){switch(e.charCodeAt(d)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 39:o="&#x27;";break;case 60:o="&lt;";break;case 62:o="&gt;";break;default:continue}g!==d&&(h+=e.substring(g,d)),g=d+1,h+=o}e=g!==d?h+e.substring(g,d):h}return e}var oa$1=/([A-Z])/g,pa$1=/^ms-/,qa$1=Array.isArray;function w$1(e,o){return{insertionMode:e,selectedValue:o}}function ra$1(e,o,h){switch(o){case"select":return w$1(1,h.value!=null?h.value:h.defaultValue);case"svg":return w$1(2,null);case"math":return w$1(3,null);case"foreignObject":return w$1(1,null);case"table":return w$1(4,null);case"thead":case"tbody":case"tfoot":return w$1(5,null);case"colgroup":return w$1(7,null);case"tr":return w$1(6,null)}return 4<=e.insertionMode||e.insertionMode===0?w$1(1,null):e}var sa$1=new Map;function ta$1(e,o,h){if(typeof h!="object")throw Error(l$2(62));o=!0;for(var d in h)if(p$1.call(h,d)){var g=h[d];if(g!=null&&typeof g!="boolean"&&g!==""){if(d.indexOf("--")===0){var _=v(d);g=v((""+g).trim())}else{_=d;var $=sa$1.get(_);$!==void 0||($=v(_.replace(oa$1,"-$1").toLowerCase().replace(pa$1,"-ms-")),sa$1.set(_,$)),_=$,g=typeof g=="number"?g===0||p$1.call(u$1,d)?""+g:g+"px":v((""+g).trim())}o?(o=!1,e.push(' style="',_,":",g)):e.push(";",_,":",g)}}o||e.push('"')}function x$1(e,o,h,d){switch(h){case"style":ta$1(e,o,d);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N"){if(o=t$1.hasOwnProperty(h)?t$1[h]:null,o!==null){switch(typeof d){case"function":case"symbol":return;case"boolean":if(!o.acceptsBooleans)return}switch(h=o.attributeName,o.type){case 3:d&&e.push(" ",h,'=""');break;case 4:d===!0?e.push(" ",h,'=""'):d!==!1&&e.push(" ",h,'="',v(d),'"');break;case 5:isNaN(d)||e.push(" ",h,'="',v(d),'"');break;case 6:!isNaN(d)&&1<=d&&e.push(" ",h,'="',v(d),'"');break;default:o.sanitizeURL&&(d=""+d),e.push(" ",h,'="',v(d),'"')}}else if(ja$1(h)){switch(typeof d){case"function":case"symbol":return;case"boolean":if(o=h.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-")return}e.push(" ",h,'="',v(d),'"')}}}function y$1(e,o,h){if(o!=null){if(h!=null)throw Error(l$2(60));if(typeof o!="object"||!("__html"in o))throw Error(l$2(61));o=o.__html,o!=null&&e.push(""+o)}}function ua$1(e){var o="";return aa$1.Children.forEach(e,function(h){h!=null&&(o+=h)}),o}function va$1(e,o,h,d){e.push(A(h));var g=h=null,_;for(_ in o)if(p$1.call(o,_)){var $=o[_];if($!=null)switch(_){case"children":h=$;break;case"dangerouslySetInnerHTML":g=$;break;default:x$1(e,d,_,$)}}return e.push(">"),y$1(e,g,h),typeof h=="string"?(e.push(v(h)),null):h}var wa$1=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,xa$1=new Map;function A(e){var o=xa$1.get(e);if(o===void 0){if(!wa$1.test(e))throw Error(l$2(65,e));o="<"+e,xa$1.set(e,o)}return o}function ya$1(e,o,h,d,g){switch(o){case"select":e.push(A("select"));var _=null,$=null;for(_r in h)if(p$1.call(h,_r)){var j=h[_r];if(j!=null)switch(_r){case"children":_=j;break;case"dangerouslySetInnerHTML":$=j;break;case"defaultValue":case"value":break;default:x$1(e,d,_r,j)}}return e.push(">"),y$1(e,$,_),_;case"option":$=g.selectedValue,e.push(A("option"));var _t=j=null,_e=null,_r=null;for(_ in h)if(p$1.call(h,_)){var _n=h[_];if(_n!=null)switch(_){case"children":j=_n;break;case"selected":_e=_n;break;case"dangerouslySetInnerHTML":_r=_n;break;case"value":_t=_n;default:x$1(e,d,_,_n)}}if($!=null)if(h=_t!==null?""+_t:ua$1(j),qa$1($)){for(d=0;d<$.length;d++)if(""+$[d]===h){e.push(' selected=""');break}}else""+$===h&&e.push(' selected=""');else _e&&e.push(' selected=""');return e.push(">"),y$1(e,_r,j),j;case"textarea":e.push(A("textarea")),_r=$=_=null;for(j in h)if(p$1.call(h,j)&&(_t=h[j],_t!=null))switch(j){case"children":_r=_t;break;case"value":_=_t;break;case"defaultValue":$=_t;break;case"dangerouslySetInnerHTML":throw Error(l$2(91));default:x$1(e,d,j,_t)}if(_===null&&$!==null&&(_=$),e.push(">"),_r!=null){if(_!=null)throw Error(l$2(92));if(qa$1(_r)&&1<_r.length)throw Error(l$2(93));_=""+_r}return typeof _=="string"&&_[0]===`
`&&e.push(`
`),_!==null&&e.push(v(""+_)),null;case"input":e.push(A("input")),_t=_r=j=_=null;for($ in h)if(p$1.call(h,$)&&(_e=h[$],_e!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(l$2(399,"input"));case"defaultChecked":_t=_e;break;case"defaultValue":j=_e;break;case"checked":_r=_e;break;case"value":_=_e;break;default:x$1(e,d,$,_e)}return _r!==null?x$1(e,d,"checked",_r):_t!==null&&x$1(e,d,"checked",_t),_!==null?x$1(e,d,"value",_):j!==null&&x$1(e,d,"value",j),e.push("/>"),null;case"menuitem":e.push(A("menuitem"));for(var _i in h)if(p$1.call(h,_i)&&(_=h[_i],_!=null))switch(_i){case"children":case"dangerouslySetInnerHTML":throw Error(l$2(400));default:x$1(e,d,_i,_)}return e.push(">"),null;case"title":e.push(A("title")),_=null;for(_n in h)if(p$1.call(h,_n)&&($=h[_n],$!=null))switch(_n){case"children":_=$;break;case"dangerouslySetInnerHTML":throw Error(l$2(434));default:x$1(e,d,_n,$)}return e.push(">"),_;case"listing":case"pre":e.push(A(o)),$=_=null;for(_t in h)if(p$1.call(h,_t)&&(j=h[_t],j!=null))switch(_t){case"children":_=j;break;case"dangerouslySetInnerHTML":$=j;break;default:x$1(e,d,_t,j)}if(e.push(">"),$!=null){if(_!=null)throw Error(l$2(60));if(typeof $!="object"||!("__html"in $))throw Error(l$2(61));h=$.__html,h!=null&&(typeof h=="string"&&0<h.length&&h[0]===`
`?e.push(`
`,h):e.push(""+h))}return typeof _=="string"&&_[0]===`
`&&e.push(`
`),_;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(A(o));for(var _o in h)if(p$1.call(h,_o)&&(_=h[_o],_!=null))switch(_o){case"children":case"dangerouslySetInnerHTML":throw Error(l$2(399,o));default:x$1(e,d,_o,_)}return e.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return va$1(e,h,o,d);case"html":return g.insertionMode===0&&e.push("<!DOCTYPE html>"),va$1(e,h,o,d);default:if(o.indexOf("-")===-1&&typeof h.is!="string")return va$1(e,h,o,d);e.push(A(o)),$=_=null;for(_e in h)if(p$1.call(h,_e)&&(j=h[_e],j!=null))switch(_e){case"children":_=j;break;case"dangerouslySetInnerHTML":$=j;break;case"style":ta$1(e,d,j);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:ja$1(_e)&&typeof j!="function"&&typeof j!="symbol"&&e.push(" ",_e,'="',v(j),'"')}return e.push(">"),y$1(e,$,_),_}}function za$1(e,o,h){if(e.push('<!--$?--><template id="'),h===null)throw Error(l$2(395));return e.push(h),e.push('"></template>')}function Aa$1(e,o,h,d){switch(h.insertionMode){case 0:case 1:return e.push('<div hidden id="'),e.push(o.segmentPrefix),o=d.toString(16),e.push(o),e.push('">');case 2:return e.push('<svg aria-hidden="true" style="display:none" id="'),e.push(o.segmentPrefix),o=d.toString(16),e.push(o),e.push('">');case 3:return e.push('<math aria-hidden="true" style="display:none" id="'),e.push(o.segmentPrefix),o=d.toString(16),e.push(o),e.push('">');case 4:return e.push('<table hidden id="'),e.push(o.segmentPrefix),o=d.toString(16),e.push(o),e.push('">');case 5:return e.push('<table hidden><tbody id="'),e.push(o.segmentPrefix),o=d.toString(16),e.push(o),e.push('">');case 6:return e.push('<table hidden><tr id="'),e.push(o.segmentPrefix),o=d.toString(16),e.push(o),e.push('">');case 7:return e.push('<table hidden><colgroup id="'),e.push(o.segmentPrefix),o=d.toString(16),e.push(o),e.push('">');default:throw Error(l$2(397))}}function Ba$1(e,o){switch(o.insertionMode){case 0:case 1:return e.push("</div>");case 2:return e.push("</svg>");case 3:return e.push("</math>");case 4:return e.push("</table>");case 5:return e.push("</tbody></table>");case 6:return e.push("</tr></table>");case 7:return e.push("</colgroup></table>");default:throw Error(l$2(397))}}var Ca$1=/[<\u2028\u2029]/g;function Da$1(e){return JSON.stringify(e).replace(Ca$1,function(o){switch(o){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function Ea$1(e,o){return o=o===void 0?"":o,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:o+"P:",segmentPrefix:o+"S:",boundaryPrefix:o+"B:",idPrefix:o,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:e}}function Fa$1(e,o,h,d){return h.generateStaticMarkup?(e.push(v(o)),!1):(o===""?e=d:(d&&e.push("<!-- -->"),e.push(v(o)),e=!0),e)}var B$1=Object.assign,Ga$1=Symbol.for("react.element"),Ha$1=Symbol.for("react.portal"),Ia$1=Symbol.for("react.fragment"),Ja$1=Symbol.for("react.strict_mode"),Ka$1=Symbol.for("react.profiler"),La$1=Symbol.for("react.provider"),Ma$1=Symbol.for("react.context"),Na$1=Symbol.for("react.forward_ref"),Oa$1=Symbol.for("react.suspense"),Pa$1=Symbol.for("react.suspense_list"),Qa$1=Symbol.for("react.memo"),Ra$1=Symbol.for("react.lazy"),Sa$1=Symbol.for("react.scope"),Ta$1=Symbol.for("react.debug_trace_mode"),Ua$1=Symbol.for("react.legacy_hidden"),Va$1=Symbol.for("react.default_value"),Wa$1=Symbol.iterator;function Xa$1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ia$1:return"Fragment";case Ha$1:return"Portal";case Ka$1:return"Profiler";case Ja$1:return"StrictMode";case Oa$1:return"Suspense";case Pa$1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ma$1:return(e.displayName||"Context")+".Consumer";case La$1:return(e._context.displayName||"Context")+".Provider";case Na$1:var o=e.render;return e=e.displayName,e||(e=o.displayName||o.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Qa$1:return o=e.displayName||null,o!==null?o:Xa$1(e.type)||"Memo";case Ra$1:o=e._payload,e=e._init;try{return Xa$1(e(o))}catch{}}return null}var Ya$1={};function Za$1(e,o){if(e=e.contextTypes,!e)return Ya$1;var h={},d;for(d in e)h[d]=o[d];return h}var E$1=null;function F(e,o){if(e!==o){e.context._currentValue2=e.parentValue,e=e.parent;var h=o.parent;if(e===null){if(h!==null)throw Error(l$2(401))}else{if(h===null)throw Error(l$2(401));F(e,h)}o.context._currentValue2=o.value}}function $a$1(e){e.context._currentValue2=e.parentValue,e=e.parent,e!==null&&$a$1(e)}function ab$1(e){var o=e.parent;o!==null&&ab$1(o),e.context._currentValue2=e.value}function bb$1(e,o){if(e.context._currentValue2=e.parentValue,e=e.parent,e===null)throw Error(l$2(402));e.depth===o.depth?F(e,o):bb$1(e,o)}function cb$1(e,o){var h=o.parent;if(h===null)throw Error(l$2(402));e.depth===h.depth?F(e,h):cb$1(e,h),o.context._currentValue2=o.value}function G(e){var o=E$1;o!==e&&(o===null?ab$1(e):e===null?$a$1(o):o.depth===e.depth?F(o,e):o.depth>e.depth?bb$1(o,e):cb$1(o,e),E$1=e)}var db$1={isMounted:function(){return!1},enqueueSetState:function(e,o){e=e._reactInternals,e.queue!==null&&e.queue.push(o)},enqueueReplaceState:function(e,o){e=e._reactInternals,e.replace=!0,e.queue=[o]},enqueueForceUpdate:function(){}};function eb$1(e,o,h,d){var g=e.state!==void 0?e.state:null;e.updater=db$1,e.props=h,e.state=g;var _={queue:[],replace:!1};e._reactInternals=_;var $=o.contextType;if(e.context=typeof $=="object"&&$!==null?$._currentValue2:d,$=o.getDerivedStateFromProps,typeof $=="function"&&($=$(h,g),g=$==null?g:B$1({},g,$),e.state=g),typeof o.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(o=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),o!==e.state&&db$1.enqueueReplaceState(e,e.state,null),_.queue!==null&&0<_.queue.length)if(o=_.queue,$=_.replace,_.queue=null,_.replace=!1,$&&o.length===1)e.state=o[0];else{for(_=$?o[0]:e.state,g=!0,$=$?1:0;$<o.length;$++){var j=o[$];j=typeof j=="function"?j.call(e,_,h,d):j,j!=null&&(g?(g=!1,_=B$1({},_,j)):B$1(_,j))}e.state=_}else _.queue=null}var fb$1={id:1,overflow:""};function gb$1(e,o,h){var d=e.id;e=e.overflow;var g=32-H$2(d)-1;d&=~(1<<g),h+=1;var _=32-H$2(o)+g;if(30<_){var $=g-g%5;return _=(d&(1<<$)-1).toString(32),d>>=$,g-=$,{id:1<<32-H$2(o)+g|h<<g|d,overflow:_+e}}return{id:1<<_|h<<g|d,overflow:e}}var H$2=Math.clz32?Math.clz32:hb$1,ib$1=Math.log,jb$1=Math.LN2;function hb$1(e){return e>>>=0,e===0?32:31-(ib$1(e)/jb$1|0)|0}function kb$1(e,o){return e===o&&(e!==0||1/e===1/o)||e!==e&&o!==o}var lb$1=typeof Object.is=="function"?Object.is:kb$1,I$1=null,ob$1=null,J$1=null,K$1=null,L$1=!1,M$1=!1,N$1=0,O$1=null,P$1=0;function Q$1(){if(I$1===null)throw Error(l$2(321));return I$1}function pb$1(){if(0<P$1)throw Error(l$2(312));return{memoizedState:null,queue:null,next:null}}function qb$1(){return K$1===null?J$1===null?(L$1=!1,J$1=K$1=pb$1()):(L$1=!0,K$1=J$1):K$1.next===null?(L$1=!1,K$1=K$1.next=pb$1()):(L$1=!0,K$1=K$1.next),K$1}function rb$1(){ob$1=I$1=null,M$1=!1,J$1=null,P$1=0,K$1=O$1=null}function sb$1(e,o){return typeof o=="function"?o(e):o}function tb$1(e,o,h){if(I$1=Q$1(),K$1=qb$1(),L$1){var d=K$1.queue;if(o=d.dispatch,O$1!==null&&(h=O$1.get(d),h!==void 0)){O$1.delete(d),d=K$1.memoizedState;do d=e(d,h.action),h=h.next;while(h!==null);return K$1.memoizedState=d,[d,o]}return[K$1.memoizedState,o]}return e=e===sb$1?typeof o=="function"?o():o:h!==void 0?h(o):o,K$1.memoizedState=e,e=K$1.queue={last:null,dispatch:null},e=e.dispatch=ub$1.bind(null,I$1,e),[K$1.memoizedState,e]}function vb$1(e,o){if(I$1=Q$1(),K$1=qb$1(),o=o===void 0?null:o,K$1!==null){var h=K$1.memoizedState;if(h!==null&&o!==null){var d=h[1];t:if(d===null)d=!1;else{for(var g=0;g<d.length&&g<o.length;g++)if(!lb$1(o[g],d[g])){d=!1;break t}d=!0}if(d)return h[0]}}return e=e(),K$1.memoizedState=[e,o],e}function ub$1(e,o,h){if(25<=P$1)throw Error(l$2(301));if(e===I$1)if(M$1=!0,e={action:h,next:null},O$1===null&&(O$1=new Map),h=O$1.get(o),h===void 0)O$1.set(o,e);else{for(o=h;o.next!==null;)o=o.next;o.next=e}}function wb$1(){throw Error(l$2(394))}function R$1(){}var xb$1={readContext:function(e){return e._currentValue2},useContext:function(e){return Q$1(),e._currentValue2},useMemo:vb$1,useReducer:tb$1,useRef:function(e){I$1=Q$1(),K$1=qb$1();var o=K$1.memoizedState;return o===null?(e={current:e},K$1.memoizedState=e):o},useState:function(e){return tb$1(sb$1,e)},useInsertionEffect:R$1,useLayoutEffect:function(){},useCallback:function(e,o){return vb$1(function(){return e},o)},useImperativeHandle:R$1,useEffect:R$1,useDebugValue:R$1,useDeferredValue:function(e){return Q$1(),e},useTransition:function(){return Q$1(),[!1,wb$1]},useId:function(){var e=ob$1.treeContext,o=e.overflow;e=e.id,e=(e&~(1<<32-H$2(e)-1)).toString(32)+o;var h=S$1;if(h===null)throw Error(l$2(404));return o=N$1++,e=":"+h.idPrefix+"R"+e,0<o&&(e+="H"+o.toString(32)),e+":"},useMutableSource:function(e,o){return Q$1(),o(e._source)},useSyncExternalStore:function(e,o,h){if(h===void 0)throw Error(l$2(407));return h()}},S$1=null,yb$1=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function zb$1(e){return console.error(e),null}function T$1(){}function Ab$1(e,o,h,d,g,_,$,j,_t){var _e=[],_r=new Set;return o={destination:null,responseState:o,progressiveChunkSize:d===void 0?12800:d,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:_r,pingedTasks:_e,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:g===void 0?zb$1:g,onAllReady:_===void 0?T$1:_,onShellReady:$===void 0?T$1:$,onShellError:j===void 0?T$1:j,onFatalError:_t===void 0?T$1:_t},h=U$1(o,0,null,h,!1,!1),h.parentFlushed=!0,e=Bb$1(o,e,null,h,_r,Ya$1,null,fb$1),_e.push(e),o}function Bb$1(e,o,h,d,g,_,$,j){e.allPendingTasks++,h===null?e.pendingRootTasks++:h.pendingTasks++;var _t={node:o,ping:function(){var _e=e.pingedTasks;_e.push(_t),_e.length===1&&Cb$1(e)},blockedBoundary:h,blockedSegment:d,abortSet:g,legacyContext:_,context:$,treeContext:j};return g.add(_t),_t}function U$1(e,o,h,d,g,_){return{status:0,id:-1,index:o,parentFlushed:!1,chunks:[],children:[],formatContext:d,boundary:h,lastPushedText:g,textEmbedded:_}}function V$1(e,o){if(e=e.onError(o),e!=null&&typeof e!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function W$1(e,o){var h=e.onShellError;h(o),h=e.onFatalError,h(o),e.destination!==null?(e.status=2,e.destination.destroy(o)):(e.status=1,e.fatalError=o)}function Db$1(e,o,h,d,g){for(I$1={},ob$1=o,N$1=0,e=h(d,g);M$1;)M$1=!1,N$1=0,P$1+=1,K$1=null,e=h(d,g);return rb$1(),e}function Eb$1(e,o,h,d){var g=h.render(),_=d.childContextTypes;if(_!=null){var $=o.legacyContext;if(typeof h.getChildContext!="function")d=$;else{h=h.getChildContext();for(var j in h)if(!(j in _))throw Error(l$2(108,Xa$1(d)||"Unknown",j));d=B$1({},$,h)}o.legacyContext=d,X$1(e,o,g),o.legacyContext=$}else X$1(e,o,g)}function Fb(e,o){if(e&&e.defaultProps){o=B$1({},o),e=e.defaultProps;for(var h in e)o[h]===void 0&&(o[h]=e[h]);return o}return o}function Gb$1(e,o,h,d,g){if(typeof h=="function")if(h.prototype&&h.prototype.isReactComponent){g=Za$1(h,o.legacyContext);var _=h.contextType;_=new h(d,typeof _=="object"&&_!==null?_._currentValue2:g),eb$1(_,h,d,g),Eb$1(e,o,_,h)}else{_=Za$1(h,o.legacyContext),g=Db$1(e,o,h,d,_);var $=N$1!==0;if(typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0)eb$1(g,h,d,_),Eb$1(e,o,g,h);else if($){d=o.treeContext,o.treeContext=gb$1(d,1,0);try{X$1(e,o,g)}finally{o.treeContext=d}}else X$1(e,o,g)}else if(typeof h=="string"){switch(g=o.blockedSegment,_=ya$1(g.chunks,h,d,e.responseState,g.formatContext),g.lastPushedText=!1,$=g.formatContext,g.formatContext=ra$1($,h,d),Hb$1(e,o,_),g.formatContext=$,h){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:g.chunks.push("</",h,">")}g.lastPushedText=!1}else{switch(h){case Ua$1:case Ta$1:case Ja$1:case Ka$1:case Ia$1:X$1(e,o,d.children);return;case Pa$1:X$1(e,o,d.children);return;case Sa$1:throw Error(l$2(343));case Oa$1:t:{h=o.blockedBoundary,g=o.blockedSegment,_=d.fallback,d=d.children,$=new Set;var j={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:$,errorDigest:null},_t=U$1(e,g.chunks.length,j,g.formatContext,!1,!1);g.children.push(_t),g.lastPushedText=!1;var _e=U$1(e,0,null,g.formatContext,!1,!1);_e.parentFlushed=!0,o.blockedBoundary=j,o.blockedSegment=_e;try{if(Hb$1(e,o,d),e.responseState.generateStaticMarkup||_e.lastPushedText&&_e.textEmbedded&&_e.chunks.push("<!-- -->"),_e.status=1,Y$1(j,_e),j.pendingTasks===0)break t}catch(_r){_e.status=4,j.forceClientRender=!0,j.errorDigest=V$1(e,_r)}finally{o.blockedBoundary=h,o.blockedSegment=g}o=Bb$1(e,_,h,_t,$,o.legacyContext,o.context,o.treeContext),e.pingedTasks.push(o)}return}if(typeof h=="object"&&h!==null)switch(h.$$typeof){case Na$1:if(d=Db$1(e,o,h.render,d,g),N$1!==0){h=o.treeContext,o.treeContext=gb$1(h,1,0);try{X$1(e,o,d)}finally{o.treeContext=h}}else X$1(e,o,d);return;case Qa$1:h=h.type,d=Fb(h,d),Gb$1(e,o,h,d,g);return;case La$1:if(g=d.children,h=h._context,d=d.value,_=h._currentValue2,h._currentValue2=d,$=E$1,E$1=d={parent:$,depth:$===null?0:$.depth+1,context:h,parentValue:_,value:d},o.context=d,X$1(e,o,g),e=E$1,e===null)throw Error(l$2(403));d=e.parentValue,e.context._currentValue2=d===Va$1?e.context._defaultValue:d,e=E$1=e.parent,o.context=e;return;case Ma$1:d=d.children,d=d(h._currentValue2),X$1(e,o,d);return;case Ra$1:g=h._init,h=g(h._payload),d=Fb(h,d),Gb$1(e,o,h,d,void 0);return}throw Error(l$2(130,h==null?h:typeof h,""))}}function X$1(e,o,h){if(o.node=h,typeof h=="object"&&h!==null){switch(h.$$typeof){case Ga$1:Gb$1(e,o,h.type,h.props,h.ref);return;case Ha$1:throw Error(l$2(257));case Ra$1:var d=h._init;h=d(h._payload),X$1(e,o,h);return}if(qa$1(h)){Ib$1(e,o,h);return}if(h===null||typeof h!="object"?d=null:(d=Wa$1&&h[Wa$1]||h["@@iterator"],d=typeof d=="function"?d:null),d&&(d=d.call(h))){if(h=d.next(),!h.done){var g=[];do g.push(h.value),h=d.next();while(!h.done);Ib$1(e,o,g)}return}throw e=Object.prototype.toString.call(h),Error(l$2(31,e==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":e))}typeof h=="string"?(d=o.blockedSegment,d.lastPushedText=Fa$1(o.blockedSegment.chunks,h,e.responseState,d.lastPushedText)):typeof h=="number"&&(d=o.blockedSegment,d.lastPushedText=Fa$1(o.blockedSegment.chunks,""+h,e.responseState,d.lastPushedText))}function Ib$1(e,o,h){for(var d=h.length,g=0;g<d;g++){var _=o.treeContext;o.treeContext=gb$1(_,d,g);try{Hb$1(e,o,h[g])}finally{o.treeContext=_}}}function Hb$1(e,o,h){var d=o.blockedSegment.formatContext,g=o.legacyContext,_=o.context;try{return X$1(e,o,h)}catch(_t){if(rb$1(),typeof _t=="object"&&_t!==null&&typeof _t.then=="function"){h=_t;var $=o.blockedSegment,j=U$1(e,$.chunks.length,null,$.formatContext,$.lastPushedText,!0);$.children.push(j),$.lastPushedText=!1,e=Bb$1(e,o.node,o.blockedBoundary,j,o.abortSet,o.legacyContext,o.context,o.treeContext).ping,h.then(e,e),o.blockedSegment.formatContext=d,o.legacyContext=g,o.context=_,G(_)}else throw o.blockedSegment.formatContext=d,o.legacyContext=g,o.context=_,G(_),_t}}function Jb$1(e){var o=e.blockedBoundary;e=e.blockedSegment,e.status=3,Kb$1(this,o,e)}function Lb$1(e,o,h){var d=e.blockedBoundary;e.blockedSegment.status=3,d===null?(o.allPendingTasks--,o.status!==2&&(o.status=2,o.destination!==null&&o.destination.push(null))):(d.pendingTasks--,d.forceClientRender||(d.forceClientRender=!0,e=h===void 0?Error(l$2(432)):h,d.errorDigest=o.onError(e),d.parentFlushed&&o.clientRenderedBoundaries.push(d)),d.fallbackAbortableTasks.forEach(function(g){return Lb$1(g,o,h)}),d.fallbackAbortableTasks.clear(),o.allPendingTasks--,o.allPendingTasks===0&&(d=o.onAllReady,d()))}function Y$1(e,o){if(o.chunks.length===0&&o.children.length===1&&o.children[0].boundary===null){var h=o.children[0];h.id=o.id,h.parentFlushed=!0,h.status===1&&Y$1(e,h)}else e.completedSegments.push(o)}function Kb$1(e,o,h){if(o===null){if(h.parentFlushed){if(e.completedRootSegment!==null)throw Error(l$2(389));e.completedRootSegment=h}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=T$1,o=e.onShellReady,o())}else o.pendingTasks--,o.forceClientRender||(o.pendingTasks===0?(h.parentFlushed&&h.status===1&&Y$1(o,h),o.parentFlushed&&e.completedBoundaries.push(o),o.fallbackAbortableTasks.forEach(Jb$1,e),o.fallbackAbortableTasks.clear()):h.parentFlushed&&h.status===1&&(Y$1(o,h),o.completedSegments.length===1&&o.parentFlushed&&e.partialBoundaries.push(o)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function Cb$1(e){if(e.status!==2){var o=E$1,h=yb$1.current;yb$1.current=xb$1;var d=S$1;S$1=e.responseState;try{var g=e.pingedTasks,_;for(_=0;_<g.length;_++){var $=g[_],j=e,_t=$.blockedSegment;if(_t.status===0){G($.context);try{X$1(j,$,$.node),j.responseState.generateStaticMarkup||_t.lastPushedText&&_t.textEmbedded&&_t.chunks.push("<!-- -->"),$.abortSet.delete($),_t.status=1,Kb$1(j,$.blockedBoundary,_t)}catch(_a){if(rb$1(),typeof _a=="object"&&_a!==null&&typeof _a.then=="function"){var _e=$.ping;_a.then(_e,_e)}else{$.abortSet.delete($),_t.status=4;var _r=$.blockedBoundary,_n=_a,_i=V$1(j,_n);if(_r===null?W$1(j,_n):(_r.pendingTasks--,_r.forceClientRender||(_r.forceClientRender=!0,_r.errorDigest=_i,_r.parentFlushed&&j.clientRenderedBoundaries.push(_r))),j.allPendingTasks--,j.allPendingTasks===0){var _o=j.onAllReady;_o()}}}finally{}}}g.splice(0,_),e.destination!==null&&Mb$1(e,e.destination)}catch(_a){V$1(e,_a),W$1(e,_a)}finally{S$1=d,yb$1.current=h,h===xb$1&&G(o)}}}function Z$1(e,o,h){switch(h.parentFlushed=!0,h.status){case 0:var d=h.id=e.nextSegmentId++;return h.lastPushedText=!1,h.textEmbedded=!1,e=e.responseState,o.push('<template id="'),o.push(e.placeholderPrefix),e=d.toString(16),o.push(e),o.push('"></template>');case 1:h.status=2;var g=!0;d=h.chunks;var _=0;h=h.children;for(var $=0;$<h.length;$++){for(g=h[$];_<g.index;_++)o.push(d[_]);g=Nb$1(e,o,g)}for(;_<d.length-1;_++)o.push(d[_]);return _<d.length&&(g=o.push(d[_])),g;default:throw Error(l$2(390))}}function Nb$1(e,o,h){var d=h.boundary;if(d===null)return Z$1(e,o,h);if(d.parentFlushed=!0,d.forceClientRender)return e.responseState.generateStaticMarkup||(d=d.errorDigest,o.push("<!--$!-->"),o.push("<template"),d&&(o.push(' data-dgst="'),d=v(d),o.push(d),o.push('"')),o.push("></template>")),Z$1(e,o,h),e=e.responseState.generateStaticMarkup?!0:o.push("<!--/$-->"),e;if(0<d.pendingTasks){d.rootSegmentID=e.nextSegmentId++,0<d.completedSegments.length&&e.partialBoundaries.push(d);var g=e.responseState,_=g.nextSuspenseID++;return g=g.boundaryPrefix+_.toString(16),d=d.id=g,za$1(o,e.responseState,d),Z$1(e,o,h),o.push("<!--/$-->")}if(d.byteSize>e.progressiveChunkSize)return d.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(d),za$1(o,e.responseState,d.id),Z$1(e,o,h),o.push("<!--/$-->");if(e.responseState.generateStaticMarkup||o.push("<!--$-->"),h=d.completedSegments,h.length!==1)throw Error(l$2(391));return Nb$1(e,o,h[0]),e=e.responseState.generateStaticMarkup?!0:o.push("<!--/$-->"),e}function Ob$1(e,o,h){return Aa$1(o,e.responseState,h.formatContext,h.id),Nb$1(e,o,h),Ba$1(o,h.formatContext)}function Pb$1(e,o,h){for(var d=h.completedSegments,g=0;g<d.length;g++)Qb$1(e,o,h,d[g]);if(d.length=0,e=e.responseState,d=h.id,h=h.rootSegmentID,o.push(e.startInlineScript),e.sentCompleteBoundaryFunction?o.push('$RC("'):(e.sentCompleteBoundaryFunction=!0,o.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),d===null)throw Error(l$2(395));return h=h.toString(16),o.push(d),o.push('","'),o.push(e.segmentPrefix),o.push(h),o.push('")<\/script>')}function Qb$1(e,o,h,d){if(d.status===2)return!0;var g=d.id;if(g===-1){if((d.id=h.rootSegmentID)===-1)throw Error(l$2(392));return Ob$1(e,o,d)}return Ob$1(e,o,d),e=e.responseState,o.push(e.startInlineScript),e.sentCompleteSegmentFunction?o.push('$RS("'):(e.sentCompleteSegmentFunction=!0,o.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),o.push(e.segmentPrefix),g=g.toString(16),o.push(g),o.push('","'),o.push(e.placeholderPrefix),o.push(g),o.push('")<\/script>')}function Mb$1(e,o){try{var h=e.completedRootSegment;if(h!==null&&e.pendingRootTasks===0){Nb$1(e,o,h),e.completedRootSegment=null;var d=e.responseState.bootstrapChunks;for(h=0;h<d.length-1;h++)o.push(d[h]);h<d.length&&o.push(d[h])}var g=e.clientRenderedBoundaries,_;for(_=0;_<g.length;_++){var $=g[_];d=o;var j=e.responseState,_t=$.id,_e=$.errorDigest,_r=$.errorMessage,_n=$.errorComponentStack;if(d.push(j.startInlineScript),j.sentClientRenderFunction?d.push('$RX("'):(j.sentClientRenderFunction=!0,d.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),_t===null)throw Error(l$2(395));if(d.push(_t),d.push('"'),_e||_r||_n){d.push(",");var _i=Da$1(_e||"");d.push(_i)}if(_r||_n){d.push(",");var _o=Da$1(_r||"");d.push(_o)}if(_n){d.push(",");var _a=Da$1(_n);d.push(_a)}if(!d.push(")<\/script>")){e.destination=null,_++,g.splice(0,_);return}}g.splice(0,_);var _u=e.completedBoundaries;for(_=0;_<_u.length;_++)if(!Pb$1(e,o,_u[_])){e.destination=null,_++,_u.splice(0,_);return}_u.splice(0,_);var _f=e.partialBoundaries;for(_=0;_<_f.length;_++){var _h=_f[_];t:{g=e,$=o;var _d=_h.completedSegments;for(j=0;j<_d.length;j++)if(!Qb$1(g,$,_h,_d[j])){j++,_d.splice(0,j);var ty=!1;break t}_d.splice(0,j),ty=!0}if(!ty){e.destination=null,_++,_f.splice(0,_);return}}_f.splice(0,_);var ey=e.completedBoundaries;for(_=0;_<ey.length;_++)if(!Pb$1(e,o,ey[_])){e.destination=null,_++,ey.splice(0,_);return}ey.splice(0,_)}finally{e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&o.push(null)}}function Rb$1(e,o){try{var h=e.abortableTasks;h.forEach(function(d){return Lb$1(d,e,o)}),h.clear(),e.destination!==null&&Mb$1(e,e.destination)}catch(d){V$1(e,d),W$1(e,d)}}function Sb$1(){}function Tb$1(e,o,h,d){var g=!1,_=null,$="",j={push:function(_e){return _e!==null&&($+=_e),!0},destroy:function(_e){g=!0,_=_e}},_t=!1;if(e=Ab$1(e,Ea$1(h,o?o.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,Sb$1,void 0,function(){_t=!0},void 0,void 0),Cb$1(e),Rb$1(e,d),e.status===1)e.status=2,j.destroy(e.fatalError);else if(e.status!==2&&e.destination===null){e.destination=j;try{Mb$1(e,j)}catch(_e){V$1(e,_e),W$1(e,_e)}}if(g)throw _;if(!_t)throw Error(l$2(426));return $}reactDomServerLegacy_browser_production_min.renderToNodeStream=function(){throw Error(l$2(207))};reactDomServerLegacy_browser_production_min.renderToStaticMarkup=function(e,o){return Tb$1(e,o,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};reactDomServerLegacy_browser_production_min.renderToStaticNodeStream=function(){throw Error(l$2(208))};reactDomServerLegacy_browser_production_min.renderToString=function(e,o){return Tb$1(e,o,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};reactDomServerLegacy_browser_production_min.version="18.2.0";var reactDomServer_browser_production_min={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports;function k(e){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+e,h=1;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+e+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l$1=null,n=0;function p(e,o){if(o.length!==0)if(512<o.length)0<n&&(e.enqueue(new Uint8Array(l$1.buffer,0,n)),l$1=new Uint8Array(512),n=0),e.enqueue(o);else{var h=l$1.length-n;h<o.length&&(h===0?e.enqueue(l$1):(l$1.set(o.subarray(0,h),n),e.enqueue(l$1),o=o.subarray(h)),l$1=new Uint8Array(512),n=0),l$1.set(o,n),n+=o.length}}function t(e,o){return p(e,o),!0}function ba(e){l$1&&0<n&&(e.enqueue(new Uint8Array(l$1.buffer,0,n)),l$1=null,n=0)}var ca=new TextEncoder;function u(e){return ca.encode(e)}function w(e){return ca.encode(e)}function da(e,o){typeof e.error=="function"?e.error(o):e.close()}var x=Object.prototype.hasOwnProperty,ea=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fa={},ha={};function ia(e){return x.call(ha,e)?!0:x.call(fa,e)?!1:ea.test(e)?ha[e]=!0:(fa[e]=!0,!1)}function y(e,o,h,d,g,_,$){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=g,this.mustUseProperty=h,this.propertyName=e,this.type=o,this.sanitizeURL=_,this.removeEmptyString=$}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){z[e]=new y(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var o=e[0];z[o]=new y(o,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){z[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){z[e]=new y(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){z[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){z[e]=new y(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){z[e]=new y(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){z[e]=new y(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){z[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)});var ja=/[\-:]([a-z])/g;function ka(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var o=e.replace(ja,ka);z[o]=new y(o,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var o=e.replace(ja,ka);z[o]=new y(o,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var o=e.replace(ja,ka);z[o]=new y(o,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){z[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)});z.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){z[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)});var B={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},la=["Webkit","ms","Moz","O"];Object.keys(B).forEach(function(e){la.forEach(function(o){o=o+e.charAt(0).toUpperCase()+e.substring(1),B[o]=B[e]})});var oa=/["'&<>]/;function C(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var o=oa.exec(e);if(o){var h="",d,g=0;for(d=o.index;d<e.length;d++){switch(e.charCodeAt(d)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 39:o="&#x27;";break;case 60:o="&lt;";break;case 62:o="&gt;";break;default:continue}g!==d&&(h+=e.substring(g,d)),g=d+1,h+=o}e=g!==d?h+e.substring(g,d):h}return e}var pa=/([A-Z])/g,qa=/^ms-/,ra=Array.isArray,sa=w("<script>"),ta=w("<\/script>"),ua=w('<script src="'),va=w('<script type="module" src="'),wa=w('" async=""><\/script>'),xa=/(<\/|<)(s)(cript)/gi;function ya(e,o,h,d){return""+o+(h==="s"?"\\u0073":"\\u0053")+d}function za(e,o,h,d,g){e=e===void 0?"":e,o=o===void 0?sa:w('<script nonce="'+C(o)+'">');var _=[];if(h!==void 0&&_.push(o,u((""+h).replace(xa,ya)),ta),d!==void 0)for(h=0;h<d.length;h++)_.push(ua,u(C(d[h])),wa);if(g!==void 0)for(d=0;d<g.length;d++)_.push(va,u(C(g[d])),wa);return{bootstrapChunks:_,startInlineScript:o,placeholderPrefix:w(e+"P:"),segmentPrefix:w(e+"S:"),boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function D(e,o){return{insertionMode:e,selectedValue:o}}function Aa(e){return D(e==="http://www.w3.org/2000/svg"?2:e==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function Ba(e,o,h){switch(o){case"select":return D(1,h.value!=null?h.value:h.defaultValue);case"svg":return D(2,null);case"math":return D(3,null);case"foreignObject":return D(1,null);case"table":return D(4,null);case"thead":case"tbody":case"tfoot":return D(5,null);case"colgroup":return D(7,null);case"tr":return D(6,null)}return 4<=e.insertionMode||e.insertionMode===0?D(1,null):e}var Ca=w("<!-- -->");function Da(e,o,h,d){return o===""?d:(d&&e.push(Ca),e.push(u(C(o))),!0)}var Ea=new Map,Fa=w(' style="'),Ga=w(":"),Ha=w(";");function Ia(e,o,h){if(typeof h!="object")throw Error(k(62));o=!0;for(var d in h)if(x.call(h,d)){var g=h[d];if(g!=null&&typeof g!="boolean"&&g!==""){if(d.indexOf("--")===0){var _=u(C(d));g=u(C((""+g).trim()))}else{_=d;var $=Ea.get(_);$!==void 0||($=w(C(_.replace(pa,"-$1").toLowerCase().replace(qa,"-ms-"))),Ea.set(_,$)),_=$,g=typeof g=="number"?g===0||x.call(B,d)?u(""+g):u(g+"px"):u(C((""+g).trim()))}o?(o=!1,e.push(Fa,_,Ga,g)):e.push(Ha,_,Ga,g)}}o||e.push(E)}var H$1=w(" "),I=w('="'),E=w('"'),Ja=w('=""');function J(e,o,h,d){switch(h){case"style":Ia(e,o,d);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N"){if(o=z.hasOwnProperty(h)?z[h]:null,o!==null){switch(typeof d){case"function":case"symbol":return;case"boolean":if(!o.acceptsBooleans)return}switch(h=u(o.attributeName),o.type){case 3:d&&e.push(H$1,h,Ja);break;case 4:d===!0?e.push(H$1,h,Ja):d!==!1&&e.push(H$1,h,I,u(C(d)),E);break;case 5:isNaN(d)||e.push(H$1,h,I,u(C(d)),E);break;case 6:!isNaN(d)&&1<=d&&e.push(H$1,h,I,u(C(d)),E);break;default:o.sanitizeURL&&(d=""+d),e.push(H$1,h,I,u(C(d)),E)}}else if(ia(h)){switch(typeof d){case"function":case"symbol":return;case"boolean":if(o=h.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-")return}e.push(H$1,u(h),I,u(C(d)),E)}}}var K=w(">"),Ka=w("/>");function L(e,o,h){if(o!=null){if(h!=null)throw Error(k(60));if(typeof o!="object"||!("__html"in o))throw Error(k(61));o=o.__html,o!=null&&e.push(u(""+o))}}function La(e){var o="";return aa.Children.forEach(e,function(h){h!=null&&(o+=h)}),o}var Ma=w(' selected=""');function Na(e,o,h,d){e.push(M(h));var g=h=null,_;for(_ in o)if(x.call(o,_)){var $=o[_];if($!=null)switch(_){case"children":h=$;break;case"dangerouslySetInnerHTML":g=$;break;default:J(e,d,_,$)}}return e.push(K),L(e,g,h),typeof h=="string"?(e.push(u(C(h))),null):h}var Oa=w(`
`),Pa=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Qa=new Map;function M(e){var o=Qa.get(e);if(o===void 0){if(!Pa.test(e))throw Error(k(65,e));o=w("<"+e),Qa.set(e,o)}return o}var Ra=w("<!DOCTYPE html>");function Sa(e,o,h,d,g){switch(o){case"select":e.push(M("select"));var _=null,$=null;for(_r in h)if(x.call(h,_r)){var j=h[_r];if(j!=null)switch(_r){case"children":_=j;break;case"dangerouslySetInnerHTML":$=j;break;case"defaultValue":case"value":break;default:J(e,d,_r,j)}}return e.push(K),L(e,$,_),_;case"option":$=g.selectedValue,e.push(M("option"));var _t=j=null,_e=null,_r=null;for(_ in h)if(x.call(h,_)){var _n=h[_];if(_n!=null)switch(_){case"children":j=_n;break;case"selected":_e=_n;break;case"dangerouslySetInnerHTML":_r=_n;break;case"value":_t=_n;default:J(e,d,_,_n)}}if($!=null)if(h=_t!==null?""+_t:La(j),ra($)){for(d=0;d<$.length;d++)if(""+$[d]===h){e.push(Ma);break}}else""+$===h&&e.push(Ma);else _e&&e.push(Ma);return e.push(K),L(e,_r,j),j;case"textarea":e.push(M("textarea")),_r=$=_=null;for(j in h)if(x.call(h,j)&&(_t=h[j],_t!=null))switch(j){case"children":_r=_t;break;case"value":_=_t;break;case"defaultValue":$=_t;break;case"dangerouslySetInnerHTML":throw Error(k(91));default:J(e,d,j,_t)}if(_===null&&$!==null&&(_=$),e.push(K),_r!=null){if(_!=null)throw Error(k(92));if(ra(_r)&&1<_r.length)throw Error(k(93));_=""+_r}return typeof _=="string"&&_[0]===`
`&&e.push(Oa),_!==null&&e.push(u(C(""+_))),null;case"input":e.push(M("input")),_t=_r=j=_=null;for($ in h)if(x.call(h,$)&&(_e=h[$],_e!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(k(399,"input"));case"defaultChecked":_t=_e;break;case"defaultValue":j=_e;break;case"checked":_r=_e;break;case"value":_=_e;break;default:J(e,d,$,_e)}return _r!==null?J(e,d,"checked",_r):_t!==null&&J(e,d,"checked",_t),_!==null?J(e,d,"value",_):j!==null&&J(e,d,"value",j),e.push(Ka),null;case"menuitem":e.push(M("menuitem"));for(var _i in h)if(x.call(h,_i)&&(_=h[_i],_!=null))switch(_i){case"children":case"dangerouslySetInnerHTML":throw Error(k(400));default:J(e,d,_i,_)}return e.push(K),null;case"title":e.push(M("title")),_=null;for(_n in h)if(x.call(h,_n)&&($=h[_n],$!=null))switch(_n){case"children":_=$;break;case"dangerouslySetInnerHTML":throw Error(k(434));default:J(e,d,_n,$)}return e.push(K),_;case"listing":case"pre":e.push(M(o)),$=_=null;for(_t in h)if(x.call(h,_t)&&(j=h[_t],j!=null))switch(_t){case"children":_=j;break;case"dangerouslySetInnerHTML":$=j;break;default:J(e,d,_t,j)}if(e.push(K),$!=null){if(_!=null)throw Error(k(60));if(typeof $!="object"||!("__html"in $))throw Error(k(61));h=$.__html,h!=null&&(typeof h=="string"&&0<h.length&&h[0]===`
`?e.push(Oa,u(h)):e.push(u(""+h)))}return typeof _=="string"&&_[0]===`
`&&e.push(Oa),_;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(M(o));for(var _o in h)if(x.call(h,_o)&&(_=h[_o],_!=null))switch(_o){case"children":case"dangerouslySetInnerHTML":throw Error(k(399,o));default:J(e,d,_o,_)}return e.push(Ka),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Na(e,h,o,d);case"html":return g.insertionMode===0&&e.push(Ra),Na(e,h,o,d);default:if(o.indexOf("-")===-1&&typeof h.is!="string")return Na(e,h,o,d);e.push(M(o)),$=_=null;for(_e in h)if(x.call(h,_e)&&(j=h[_e],j!=null))switch(_e){case"children":_=j;break;case"dangerouslySetInnerHTML":$=j;break;case"style":Ia(e,d,j);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:ia(_e)&&typeof j!="function"&&typeof j!="symbol"&&e.push(H$1,u(_e),I,u(C(j)),E)}return e.push(K),L(e,$,_),_}}var Ta=w("</"),Ua=w(">"),Va=w('<template id="'),Wa=w('"></template>'),Xa=w("<!--$-->"),Ya=w('<!--$?--><template id="'),Za=w('"></template>'),$a=w("<!--$!-->"),ab=w("<!--/$-->"),bb=w("<template"),cb=w('"'),db=w(' data-dgst="');w(' data-msg="');w(' data-stck="');var eb=w("></template>");function fb(e,o,h){if(p(e,Ya),h===null)throw Error(k(395));return p(e,h),t(e,Za)}var gb=w('<div hidden id="'),hb=w('">'),ib=w("</div>"),jb=w('<svg aria-hidden="true" style="display:none" id="'),kb=w('">'),lb=w("</svg>"),mb=w('<math aria-hidden="true" style="display:none" id="'),nb=w('">'),ob=w("</math>"),pb=w('<table hidden id="'),qb=w('">'),rb=w("</table>"),sb=w('<table hidden><tbody id="'),tb=w('">'),ub=w("</tbody></table>"),vb=w('<table hidden><tr id="'),wb=w('">'),xb=w("</tr></table>"),yb=w('<table hidden><colgroup id="'),zb=w('">'),Ab=w("</colgroup></table>");function Bb(e,o,h,d){switch(h.insertionMode){case 0:case 1:return p(e,gb),p(e,o.segmentPrefix),p(e,u(d.toString(16))),t(e,hb);case 2:return p(e,jb),p(e,o.segmentPrefix),p(e,u(d.toString(16))),t(e,kb);case 3:return p(e,mb),p(e,o.segmentPrefix),p(e,u(d.toString(16))),t(e,nb);case 4:return p(e,pb),p(e,o.segmentPrefix),p(e,u(d.toString(16))),t(e,qb);case 5:return p(e,sb),p(e,o.segmentPrefix),p(e,u(d.toString(16))),t(e,tb);case 6:return p(e,vb),p(e,o.segmentPrefix),p(e,u(d.toString(16))),t(e,wb);case 7:return p(e,yb),p(e,o.segmentPrefix),p(e,u(d.toString(16))),t(e,zb);default:throw Error(k(397))}}function Cb(e,o){switch(o.insertionMode){case 0:case 1:return t(e,ib);case 2:return t(e,lb);case 3:return t(e,ob);case 4:return t(e,rb);case 5:return t(e,ub);case 6:return t(e,xb);case 7:return t(e,Ab);default:throw Error(k(397))}}var Db=w('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),Eb=w('$RS("'),Gb=w('","'),Hb=w('")<\/script>'),Ib=w('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),Jb=w('$RC("'),Kb=w('","'),Lb=w('")<\/script>'),Mb=w('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),Nb=w('$RX("'),Ob=w('"'),Pb=w(")<\/script>"),Qb=w(","),Rb=/[<\u2028\u2029]/g;function Sb(e){return JSON.stringify(e).replace(Rb,function(o){switch(o){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var N=Object.assign,Tb=Symbol.for("react.element"),Ub=Symbol.for("react.portal"),Vb=Symbol.for("react.fragment"),Wb=Symbol.for("react.strict_mode"),Xb=Symbol.for("react.profiler"),Yb=Symbol.for("react.provider"),Zb=Symbol.for("react.context"),$b=Symbol.for("react.forward_ref"),ac=Symbol.for("react.suspense"),bc=Symbol.for("react.suspense_list"),cc=Symbol.for("react.memo"),dc=Symbol.for("react.lazy"),ec=Symbol.for("react.scope"),fc=Symbol.for("react.debug_trace_mode"),gc=Symbol.for("react.legacy_hidden"),hc=Symbol.for("react.default_value"),ic=Symbol.iterator;function jc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Vb:return"Fragment";case Ub:return"Portal";case Xb:return"Profiler";case Wb:return"StrictMode";case ac:return"Suspense";case bc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Zb:return(e.displayName||"Context")+".Consumer";case Yb:return(e._context.displayName||"Context")+".Provider";case $b:var o=e.render;return e=e.displayName,e||(e=o.displayName||o.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case cc:return o=e.displayName||null,o!==null?o:jc(e.type)||"Memo";case dc:o=e._payload,e=e._init;try{return jc(e(o))}catch{}}return null}var kc={};function lc(e,o){if(e=e.contextTypes,!e)return kc;var h={},d;for(d in e)h[d]=o[d];return h}var O=null;function P(e,o){if(e!==o){e.context._currentValue=e.parentValue,e=e.parent;var h=o.parent;if(e===null){if(h!==null)throw Error(k(401))}else{if(h===null)throw Error(k(401));P(e,h)}o.context._currentValue=o.value}}function mc(e){e.context._currentValue=e.parentValue,e=e.parent,e!==null&&mc(e)}function nc(e){var o=e.parent;o!==null&&nc(o),e.context._currentValue=e.value}function oc(e,o){if(e.context._currentValue=e.parentValue,e=e.parent,e===null)throw Error(k(402));e.depth===o.depth?P(e,o):oc(e,o)}function pc(e,o){var h=o.parent;if(h===null)throw Error(k(402));e.depth===h.depth?P(e,h):pc(e,h),o.context._currentValue=o.value}function Q(e){var o=O;o!==e&&(o===null?nc(e):e===null?mc(o):o.depth===e.depth?P(o,e):o.depth>e.depth?oc(o,e):pc(o,e),O=e)}var qc={isMounted:function(){return!1},enqueueSetState:function(e,o){e=e._reactInternals,e.queue!==null&&e.queue.push(o)},enqueueReplaceState:function(e,o){e=e._reactInternals,e.replace=!0,e.queue=[o]},enqueueForceUpdate:function(){}};function rc(e,o,h,d){var g=e.state!==void 0?e.state:null;e.updater=qc,e.props=h,e.state=g;var _={queue:[],replace:!1};e._reactInternals=_;var $=o.contextType;if(e.context=typeof $=="object"&&$!==null?$._currentValue:d,$=o.getDerivedStateFromProps,typeof $=="function"&&($=$(h,g),g=$==null?g:N({},g,$),e.state=g),typeof o.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(o=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),o!==e.state&&qc.enqueueReplaceState(e,e.state,null),_.queue!==null&&0<_.queue.length)if(o=_.queue,$=_.replace,_.queue=null,_.replace=!1,$&&o.length===1)e.state=o[0];else{for(_=$?o[0]:e.state,g=!0,$=$?1:0;$<o.length;$++){var j=o[$];j=typeof j=="function"?j.call(e,_,h,d):j,j!=null&&(g?(g=!1,_=N({},_,j)):N(_,j))}e.state=_}else _.queue=null}var sc={id:1,overflow:""};function tc(e,o,h){var d=e.id;e=e.overflow;var g=32-uc(d)-1;d&=~(1<<g),h+=1;var _=32-uc(o)+g;if(30<_){var $=g-g%5;return _=(d&(1<<$)-1).toString(32),d>>=$,g-=$,{id:1<<32-uc(o)+g|h<<g|d,overflow:_+e}}return{id:1<<_|h<<g|d,overflow:e}}var uc=Math.clz32?Math.clz32:vc,wc=Math.log,xc=Math.LN2;function vc(e){return e>>>=0,e===0?32:31-(wc(e)/xc|0)|0}function yc(e,o){return e===o&&(e!==0||1/e===1/o)||e!==e&&o!==o}var zc=typeof Object.is=="function"?Object.is:yc,R=null,Ac=null,Bc=null,S=null,T=!1,Cc=!1,U=0,V=null,Dc=0;function W(){if(R===null)throw Error(k(321));return R}function Ec(){if(0<Dc)throw Error(k(312));return{memoizedState:null,queue:null,next:null}}function Fc(){return S===null?Bc===null?(T=!1,Bc=S=Ec()):(T=!0,S=Bc):S.next===null?(T=!1,S=S.next=Ec()):(T=!0,S=S.next),S}function Gc(){Ac=R=null,Cc=!1,Bc=null,Dc=0,S=V=null}function Hc(e,o){return typeof o=="function"?o(e):o}function Ic(e,o,h){if(R=W(),S=Fc(),T){var d=S.queue;if(o=d.dispatch,V!==null&&(h=V.get(d),h!==void 0)){V.delete(d),d=S.memoizedState;do d=e(d,h.action),h=h.next;while(h!==null);return S.memoizedState=d,[d,o]}return[S.memoizedState,o]}return e=e===Hc?typeof o=="function"?o():o:h!==void 0?h(o):o,S.memoizedState=e,e=S.queue={last:null,dispatch:null},e=e.dispatch=Jc.bind(null,R,e),[S.memoizedState,e]}function Kc(e,o){if(R=W(),S=Fc(),o=o===void 0?null:o,S!==null){var h=S.memoizedState;if(h!==null&&o!==null){var d=h[1];t:if(d===null)d=!1;else{for(var g=0;g<d.length&&g<o.length;g++)if(!zc(o[g],d[g])){d=!1;break t}d=!0}if(d)return h[0]}}return e=e(),S.memoizedState=[e,o],e}function Jc(e,o,h){if(25<=Dc)throw Error(k(301));if(e===R)if(Cc=!0,e={action:h,next:null},V===null&&(V=new Map),h=V.get(o),h===void 0)V.set(o,e);else{for(o=h;o.next!==null;)o=o.next;o.next=e}}function Lc(){throw Error(k(394))}function Mc(){}var Oc={readContext:function(e){return e._currentValue},useContext:function(e){return W(),e._currentValue},useMemo:Kc,useReducer:Ic,useRef:function(e){R=W(),S=Fc();var o=S.memoizedState;return o===null?(e={current:e},S.memoizedState=e):o},useState:function(e){return Ic(Hc,e)},useInsertionEffect:Mc,useLayoutEffect:function(){},useCallback:function(e,o){return Kc(function(){return e},o)},useImperativeHandle:Mc,useEffect:Mc,useDebugValue:Mc,useDeferredValue:function(e){return W(),e},useTransition:function(){return W(),[!1,Lc]},useId:function(){var e=Ac.treeContext,o=e.overflow;e=e.id,e=(e&~(1<<32-uc(e)-1)).toString(32)+o;var h=Nc;if(h===null)throw Error(k(404));return o=U++,e=":"+h.idPrefix+"R"+e,0<o&&(e+="H"+o.toString(32)),e+":"},useMutableSource:function(e,o){return W(),o(e._source)},useSyncExternalStore:function(e,o,h){if(h===void 0)throw Error(k(407));return h()}},Nc=null,Pc=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Qc(e){return console.error(e),null}function X(){}function Rc(e,o,h,d,g,_,$,j,_t){var _e=[],_r=new Set;return o={destination:null,responseState:o,progressiveChunkSize:d===void 0?12800:d,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:_r,pingedTasks:_e,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:g===void 0?Qc:g,onAllReady:_===void 0?X:_,onShellReady:$===void 0?X:$,onShellError:j===void 0?X:j,onFatalError:_t===void 0?X:_t},h=Sc(o,0,null,h,!1,!1),h.parentFlushed=!0,e=Tc(o,e,null,h,_r,kc,null,sc),_e.push(e),o}function Tc(e,o,h,d,g,_,$,j){e.allPendingTasks++,h===null?e.pendingRootTasks++:h.pendingTasks++;var _t={node:o,ping:function(){var _e=e.pingedTasks;_e.push(_t),_e.length===1&&Uc(e)},blockedBoundary:h,blockedSegment:d,abortSet:g,legacyContext:_,context:$,treeContext:j};return g.add(_t),_t}function Sc(e,o,h,d,g,_){return{status:0,id:-1,index:o,parentFlushed:!1,chunks:[],children:[],formatContext:d,boundary:h,lastPushedText:g,textEmbedded:_}}function Y(e,o){if(e=e.onError(o),e!=null&&typeof e!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function Vc(e,o){var h=e.onShellError;h(o),h=e.onFatalError,h(o),e.destination!==null?(e.status=2,da(e.destination,o)):(e.status=1,e.fatalError=o)}function Wc(e,o,h,d,g){for(R={},Ac=o,U=0,e=h(d,g);Cc;)Cc=!1,U=0,Dc+=1,S=null,e=h(d,g);return Gc(),e}function Xc(e,o,h,d){var g=h.render(),_=d.childContextTypes;if(_!=null){var $=o.legacyContext;if(typeof h.getChildContext!="function")d=$;else{h=h.getChildContext();for(var j in h)if(!(j in _))throw Error(k(108,jc(d)||"Unknown",j));d=N({},$,h)}o.legacyContext=d,Z(e,o,g),o.legacyContext=$}else Z(e,o,g)}function Yc(e,o){if(e&&e.defaultProps){o=N({},o),e=e.defaultProps;for(var h in e)o[h]===void 0&&(o[h]=e[h]);return o}return o}function Zc(e,o,h,d,g){if(typeof h=="function")if(h.prototype&&h.prototype.isReactComponent){g=lc(h,o.legacyContext);var _=h.contextType;_=new h(d,typeof _=="object"&&_!==null?_._currentValue:g),rc(_,h,d,g),Xc(e,o,_,h)}else{_=lc(h,o.legacyContext),g=Wc(e,o,h,d,_);var $=U!==0;if(typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0)rc(g,h,d,_),Xc(e,o,g,h);else if($){d=o.treeContext,o.treeContext=tc(d,1,0);try{Z(e,o,g)}finally{o.treeContext=d}}else Z(e,o,g)}else if(typeof h=="string"){switch(g=o.blockedSegment,_=Sa(g.chunks,h,d,e.responseState,g.formatContext),g.lastPushedText=!1,$=g.formatContext,g.formatContext=Ba($,h,d),$c(e,o,_),g.formatContext=$,h){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:g.chunks.push(Ta,u(h),Ua)}g.lastPushedText=!1}else{switch(h){case gc:case fc:case Wb:case Xb:case Vb:Z(e,o,d.children);return;case bc:Z(e,o,d.children);return;case ec:throw Error(k(343));case ac:t:{h=o.blockedBoundary,g=o.blockedSegment,_=d.fallback,d=d.children,$=new Set;var j={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:$,errorDigest:null},_t=Sc(e,g.chunks.length,j,g.formatContext,!1,!1);g.children.push(_t),g.lastPushedText=!1;var _e=Sc(e,0,null,g.formatContext,!1,!1);_e.parentFlushed=!0,o.blockedBoundary=j,o.blockedSegment=_e;try{if($c(e,o,d),_e.lastPushedText&&_e.textEmbedded&&_e.chunks.push(Ca),_e.status=1,ad(j,_e),j.pendingTasks===0)break t}catch(_r){_e.status=4,j.forceClientRender=!0,j.errorDigest=Y(e,_r)}finally{o.blockedBoundary=h,o.blockedSegment=g}o=Tc(e,_,h,_t,$,o.legacyContext,o.context,o.treeContext),e.pingedTasks.push(o)}return}if(typeof h=="object"&&h!==null)switch(h.$$typeof){case $b:if(d=Wc(e,o,h.render,d,g),U!==0){h=o.treeContext,o.treeContext=tc(h,1,0);try{Z(e,o,d)}finally{o.treeContext=h}}else Z(e,o,d);return;case cc:h=h.type,d=Yc(h,d),Zc(e,o,h,d,g);return;case Yb:if(g=d.children,h=h._context,d=d.value,_=h._currentValue,h._currentValue=d,$=O,O=d={parent:$,depth:$===null?0:$.depth+1,context:h,parentValue:_,value:d},o.context=d,Z(e,o,g),e=O,e===null)throw Error(k(403));d=e.parentValue,e.context._currentValue=d===hc?e.context._defaultValue:d,e=O=e.parent,o.context=e;return;case Zb:d=d.children,d=d(h._currentValue),Z(e,o,d);return;case dc:g=h._init,h=g(h._payload),d=Yc(h,d),Zc(e,o,h,d,void 0);return}throw Error(k(130,h==null?h:typeof h,""))}}function Z(e,o,h){if(o.node=h,typeof h=="object"&&h!==null){switch(h.$$typeof){case Tb:Zc(e,o,h.type,h.props,h.ref);return;case Ub:throw Error(k(257));case dc:var d=h._init;h=d(h._payload),Z(e,o,h);return}if(ra(h)){bd(e,o,h);return}if(h===null||typeof h!="object"?d=null:(d=ic&&h[ic]||h["@@iterator"],d=typeof d=="function"?d:null),d&&(d=d.call(h))){if(h=d.next(),!h.done){var g=[];do g.push(h.value),h=d.next();while(!h.done);bd(e,o,g)}return}throw e=Object.prototype.toString.call(h),Error(k(31,e==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":e))}typeof h=="string"?(d=o.blockedSegment,d.lastPushedText=Da(o.blockedSegment.chunks,h,e.responseState,d.lastPushedText)):typeof h=="number"&&(d=o.blockedSegment,d.lastPushedText=Da(o.blockedSegment.chunks,""+h,e.responseState,d.lastPushedText))}function bd(e,o,h){for(var d=h.length,g=0;g<d;g++){var _=o.treeContext;o.treeContext=tc(_,d,g);try{$c(e,o,h[g])}finally{o.treeContext=_}}}function $c(e,o,h){var d=o.blockedSegment.formatContext,g=o.legacyContext,_=o.context;try{return Z(e,o,h)}catch(_t){if(Gc(),typeof _t=="object"&&_t!==null&&typeof _t.then=="function"){h=_t;var $=o.blockedSegment,j=Sc(e,$.chunks.length,null,$.formatContext,$.lastPushedText,!0);$.children.push(j),$.lastPushedText=!1,e=Tc(e,o.node,o.blockedBoundary,j,o.abortSet,o.legacyContext,o.context,o.treeContext).ping,h.then(e,e),o.blockedSegment.formatContext=d,o.legacyContext=g,o.context=_,Q(_)}else throw o.blockedSegment.formatContext=d,o.legacyContext=g,o.context=_,Q(_),_t}}function cd(e){var o=e.blockedBoundary;e=e.blockedSegment,e.status=3,dd(this,o,e)}function ed(e,o,h){var d=e.blockedBoundary;e.blockedSegment.status=3,d===null?(o.allPendingTasks--,o.status!==2&&(o.status=2,o.destination!==null&&o.destination.close())):(d.pendingTasks--,d.forceClientRender||(d.forceClientRender=!0,e=h===void 0?Error(k(432)):h,d.errorDigest=o.onError(e),d.parentFlushed&&o.clientRenderedBoundaries.push(d)),d.fallbackAbortableTasks.forEach(function(g){return ed(g,o,h)}),d.fallbackAbortableTasks.clear(),o.allPendingTasks--,o.allPendingTasks===0&&(d=o.onAllReady,d()))}function ad(e,o){if(o.chunks.length===0&&o.children.length===1&&o.children[0].boundary===null){var h=o.children[0];h.id=o.id,h.parentFlushed=!0,h.status===1&&ad(e,h)}else e.completedSegments.push(o)}function dd(e,o,h){if(o===null){if(h.parentFlushed){if(e.completedRootSegment!==null)throw Error(k(389));e.completedRootSegment=h}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=X,o=e.onShellReady,o())}else o.pendingTasks--,o.forceClientRender||(o.pendingTasks===0?(h.parentFlushed&&h.status===1&&ad(o,h),o.parentFlushed&&e.completedBoundaries.push(o),o.fallbackAbortableTasks.forEach(cd,e),o.fallbackAbortableTasks.clear()):h.parentFlushed&&h.status===1&&(ad(o,h),o.completedSegments.length===1&&o.parentFlushed&&e.partialBoundaries.push(o)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function Uc(e){if(e.status!==2){var o=O,h=Pc.current;Pc.current=Oc;var d=Nc;Nc=e.responseState;try{var g=e.pingedTasks,_;for(_=0;_<g.length;_++){var $=g[_],j=e,_t=$.blockedSegment;if(_t.status===0){Q($.context);try{Z(j,$,$.node),_t.lastPushedText&&_t.textEmbedded&&_t.chunks.push(Ca),$.abortSet.delete($),_t.status=1,dd(j,$.blockedBoundary,_t)}catch(_a){if(Gc(),typeof _a=="object"&&_a!==null&&typeof _a.then=="function"){var _e=$.ping;_a.then(_e,_e)}else{$.abortSet.delete($),_t.status=4;var _r=$.blockedBoundary,_n=_a,_i=Y(j,_n);if(_r===null?Vc(j,_n):(_r.pendingTasks--,_r.forceClientRender||(_r.forceClientRender=!0,_r.errorDigest=_i,_r.parentFlushed&&j.clientRenderedBoundaries.push(_r))),j.allPendingTasks--,j.allPendingTasks===0){var _o=j.onAllReady;_o()}}}finally{}}}g.splice(0,_),e.destination!==null&&fd(e,e.destination)}catch(_a){Y(e,_a),Vc(e,_a)}finally{Nc=d,Pc.current=h,h===Oc&&Q(o)}}}function gd(e,o,h){switch(h.parentFlushed=!0,h.status){case 0:var d=h.id=e.nextSegmentId++;return h.lastPushedText=!1,h.textEmbedded=!1,e=e.responseState,p(o,Va),p(o,e.placeholderPrefix),e=u(d.toString(16)),p(o,e),t(o,Wa);case 1:h.status=2;var g=!0;d=h.chunks;var _=0;h=h.children;for(var $=0;$<h.length;$++){for(g=h[$];_<g.index;_++)p(o,d[_]);g=hd(e,o,g)}for(;_<d.length-1;_++)p(o,d[_]);return _<d.length&&(g=t(o,d[_])),g;default:throw Error(k(390))}}function hd(e,o,h){var d=h.boundary;if(d===null)return gd(e,o,h);if(d.parentFlushed=!0,d.forceClientRender)d=d.errorDigest,t(o,$a),p(o,bb),d&&(p(o,db),p(o,u(C(d))),p(o,cb)),t(o,eb),gd(e,o,h);else if(0<d.pendingTasks){d.rootSegmentID=e.nextSegmentId++,0<d.completedSegments.length&&e.partialBoundaries.push(d);var g=e.responseState,_=g.nextSuspenseID++;g=w(g.boundaryPrefix+_.toString(16)),d=d.id=g,fb(o,e.responseState,d),gd(e,o,h)}else if(d.byteSize>e.progressiveChunkSize)d.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(d),fb(o,e.responseState,d.id),gd(e,o,h);else{if(t(o,Xa),h=d.completedSegments,h.length!==1)throw Error(k(391));hd(e,o,h[0])}return t(o,ab)}function id(e,o,h){return Bb(o,e.responseState,h.formatContext,h.id),hd(e,o,h),Cb(o,h.formatContext)}function jd(e,o,h){for(var d=h.completedSegments,g=0;g<d.length;g++)kd(e,o,h,d[g]);if(d.length=0,e=e.responseState,d=h.id,h=h.rootSegmentID,p(o,e.startInlineScript),e.sentCompleteBoundaryFunction?p(o,Jb):(e.sentCompleteBoundaryFunction=!0,p(o,Ib)),d===null)throw Error(k(395));return h=u(h.toString(16)),p(o,d),p(o,Kb),p(o,e.segmentPrefix),p(o,h),t(o,Lb)}function kd(e,o,h,d){if(d.status===2)return!0;var g=d.id;if(g===-1){if((d.id=h.rootSegmentID)===-1)throw Error(k(392));return id(e,o,d)}return id(e,o,d),e=e.responseState,p(o,e.startInlineScript),e.sentCompleteSegmentFunction?p(o,Eb):(e.sentCompleteSegmentFunction=!0,p(o,Db)),p(o,e.segmentPrefix),g=u(g.toString(16)),p(o,g),p(o,Gb),p(o,e.placeholderPrefix),p(o,g),t(o,Hb)}function fd(e,o){l$1=new Uint8Array(512),n=0;try{var h=e.completedRootSegment;if(h!==null&&e.pendingRootTasks===0){hd(e,o,h),e.completedRootSegment=null;var d=e.responseState.bootstrapChunks;for(h=0;h<d.length-1;h++)p(o,d[h]);h<d.length&&t(o,d[h])}var g=e.clientRenderedBoundaries,_;for(_=0;_<g.length;_++){var $=g[_];d=o;var j=e.responseState,_t=$.id,_e=$.errorDigest,_r=$.errorMessage,_n=$.errorComponentStack;if(p(d,j.startInlineScript),j.sentClientRenderFunction?p(d,Nb):(j.sentClientRenderFunction=!0,p(d,Mb)),_t===null)throw Error(k(395));p(d,_t),p(d,Ob),(_e||_r||_n)&&(p(d,Qb),p(d,u(Sb(_e||"")))),(_r||_n)&&(p(d,Qb),p(d,u(Sb(_r||"")))),_n&&(p(d,Qb),p(d,u(Sb(_n)))),t(d,Pb)}g.splice(0,_);var _i=e.completedBoundaries;for(_=0;_<_i.length;_++)jd(e,o,_i[_]);_i.splice(0,_),ba(o),l$1=new Uint8Array(512),n=0;var _o=e.partialBoundaries;for(_=0;_<_o.length;_++){var _a=_o[_];t:{g=e,$=o;var _u=_a.completedSegments;for(j=0;j<_u.length;j++)if(!kd(g,$,_a,_u[j])){j++,_u.splice(0,j);var _f=!1;break t}_u.splice(0,j),_f=!0}if(!_f){e.destination=null,_++,_o.splice(0,_);return}}_o.splice(0,_);var _h=e.completedBoundaries;for(_=0;_<_h.length;_++)jd(e,o,_h[_]);_h.splice(0,_)}finally{ba(o),e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&o.close()}}function ld(e,o){try{var h=e.abortableTasks;h.forEach(function(d){return ed(d,e,o)}),h.clear(),e.destination!==null&&fd(e,e.destination)}catch(d){Y(e,d),Vc(e,d)}}reactDomServer_browser_production_min.renderToReadableStream=function(e,o){return new Promise(function(h,d){var g,_,$=new Promise(function(_r,_n){_=_r,g=_n}),j=Rc(e,za(o?o.identifierPrefix:void 0,o?o.nonce:void 0,o?o.bootstrapScriptContent:void 0,o?o.bootstrapScripts:void 0,o?o.bootstrapModules:void 0),Aa(o?o.namespaceURI:void 0),o?o.progressiveChunkSize:void 0,o?o.onError:void 0,_,function(){var _r=new ReadableStream({type:"bytes",pull:function(_n){if(j.status===1)j.status=2,da(_n,j.fatalError);else if(j.status!==2&&j.destination===null){j.destination=_n;try{fd(j,_n)}catch(_i){Y(j,_i),Vc(j,_i)}}},cancel:function(){ld(j)}},{highWaterMark:0});_r.allReady=$,h(_r)},function(_r){$.catch(function(){}),d(_r)},g);if(o&&o.signal){var _t=o.signal,_e=function(){ld(j,_t.reason),_t.removeEventListener("abort",_e)};_t.addEventListener("abort",_e)}Uc(j)})};reactDomServer_browser_production_min.version="18.2.0";var l,s;l=reactDomServerLegacy_browser_production_min,s=reactDomServer_browser_production_min;l.version;var renderToString=l.renderToString;l.renderToStaticMarkup;l.renderToNodeStream;l.renderToStaticNodeStream;s.renderToReadableStream;function Map$1({markers:e,polygon:o}){const{hereKey:h}=reactExports.useContext(SettingsContext),d=reactExports.useRef(null),g=reactExports.useRef(null),_=reactExports.useRef(null);function $(_e){const _r=_e.getObjects().filter(_n=>_n instanceof H$3.map.Marker);if(_e.removeObjects(_r),e){const _n=e.map(_o=>new H$3.map.Marker({lat:_o.location.lat,lng:_o.location.lng},{zIndex:_o.active?50:0,data:null,icon:new H$3.map.Icon(renderToString(jsxRuntimeExports.jsx(FaDotCircle,{color:_o.active?"red":"black"})))})),_i=new H$3.map.Group;_i.addObjects(_n),_e.addObject(_i)}}function j(_e){let _r=[];o.area.forEach(_i=>_r.push(_i[0],_i[1],100));const _n=new H$3.geo.LineString(_r);_e.removeObjects(_e.getObjects()),_e.addObject(new H$3.map.Polygon(_n))}function _t(_e){if(!d.current)throw new Error("Map not found on page");_.current=new H$3.service.Platform({apikey:h});const _r=_.current.getRasterTileService({queryParams:{style:"explore.day",size:512}}),_n=new H$3.service.rasterTile.Provider(_r),_i=new H$3.map.layer.TileLayer(_n),_o=new H$3.Map(d.current,_i,{pixelRatio:window.devicePixelRatio,center:{lat:_e.lat,lng:_e.lng}});return new H$3.mapevents.Behavior(new H$3.mapevents.MapEvents(_o)),_o.setZoom(11),_o}return reactExports.useEffect(()=>{!g.current&&(o!=null&&o.center)?(g.current=_t(o.center),window.addEventListener("resize",()=>g.current.getViewPort().resize()),j(g.current)):g.current&&(o!=null&&o.center)&&(g.current.setCenter(o.center),j(g.current))},[o,e]),reactExports.useEffect(()=>{g.current&&(o!=null&&o.center)&&$(g.current)},[e]),o?jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%"},ref:d}):jsxRuntimeExports.jsx("div",{className:"text-gray-500",children:"Enter an address.."})}function SearchBar({updateFilter:e}){const[o,h]=reactExports.useState(!1),d=reactExports.useRef({});return jsxRuntimeExports.jsxs("div",{className:"flex gap-4 justify-end w-full h-[10%] bg-slate-600 text-white",children:[!o&&jsxRuntimeExports.jsx("div",{className:"h-full pr-4 flex items-center",children:jsxRuntimeExports.jsx(FaFilter,{color:"white",onClick:()=>h(!0)})}),o&&jsxRuntimeExports.jsxs("div",{id:"filterBox",className:"flex flex-col gap-4 bg-slate-500 opacity-90 h-fit p-2 w-1/4 z-50",children:[jsxRuntimeExports.jsxs("div",{id:"filter_price",className:"flex gap-2 pr-2",children:[jsxRuntimeExports.jsx("div",{className:"w-1/2",children:jsxRuntimeExports.jsx(InputBox,{inputType:"number",labelText:"min price",inputUpdate:g=>{d.current.minPrice=g}})}),jsxRuntimeExports.jsx("div",{className:"w-1/2",children:jsxRuntimeExports.jsx(InputBox,{inputType:"number",labelText:"max price",inputUpdate:g=>{d.current.maxPrice=g}})})]}),jsxRuntimeExports.jsxs("div",{id:"filter_bed_bath",className:"flex gap-2 pr-2",children:[jsxRuntimeExports.jsx("div",{className:"w-1/2",children:jsxRuntimeExports.jsx(InputBox,{inputType:"number",labelText:"bedrooms",inputUpdate:g=>{d.current.beds=g}})}),jsxRuntimeExports.jsx("div",{className:"w-1/2",children:jsxRuntimeExports.jsx(InputBox,{inputType:"number",labelText:"baths",inputUpdate:g=>{d.current.baths=g}})})]}),jsxRuntimeExports.jsxs("div",{id:"filter_actions",className:"flex justify-around",children:[jsxRuntimeExports.jsx("button",{onClick:()=>h(!1),children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>{e(d.current),h(!1)},children:"Apply"})]})]})]})}function constructReverseCoordinates(e){const o=[];for(const h of e)o.push([h[1],h[0]]);return o}async function getIntersectingArea(e){var g,_,$;if(!e.orsKey)throw new MissingKeyError("API key not provided. Go to settings to save a key");if(!(e!=null&&e.locations)||!(e!=null&&e.range))throw new InvalidParameterError("Required parameters to get intersecting area were not present");const h={locations:e.locations.map(j=>[j.lng,j.lat]),range:[60*e.range[0]],smoothing:10},d={body:JSON.stringify(h),method:"POST",headers:{Authorization:e.orsKey,"content-type":"application/json"}};try{const j=await fetch("https://api.openrouteservice.org/v2/isochrones/driving-car",d);let _t;if((g=j.headers.get("content-type"))!=null&&g.includes("json")?_t=await j.json():_t=await j.text(),!_t.features)throw new Error("Invalid response for retrieving isochrone polygon");if(!(($=(_=_t==null?void 0:_t.features[0])==null?void 0:_.properties)!=null&&$.center))throw new Error("Did not receive required center location or poly coordinates");return{center:reverseLatAndLong(_t.features[0].properties.center),poly:constructReverseCoordinates(_t.features[0].geometry.coordinates[0])}}catch(j){throw j}}function reverseLatAndLong(e){return!e||e.length===0?{lat:0,lng:0}:{lat:e[1],lng:e[0]}}async function getListings(e){var h;if(!e.rapidKey)throw new MissingKeyError("API key not provided. Go to settings to save your keys");if(!e.polygon)throw new InvalidParameterError("Enter in a valid polygon");const o={method:"POST",headers:{"x-rapidapi-host":"realty-in-us.p.rapidapi.com","x-rapidapi-key":e.rapidKey,"content-type":"application/json"},body:JSON.stringify({offset:"0",limit:"10",status:["for_sale","ready_to_build"],boundary:{coordinates:[constructReverseCoordinates(e.polygon)]}})};try{const d=await fetch("https://realty-in-us.p.rapidapi.com/properties/v3/list",o);let g;return(h=d.headers.get("content-type"))!=null&&h.includes("json")?g=await d.json():g=await d.text(),g.data.home_search.results.filter($=>$.flags.is_contingent!=!0&&$.flags.is_pending!=!0)}catch(d){throw d}}function filterListings(e,o){return e.filter(h=>o.every(d=>d(h)))}const filterByMaxPrice=(e,o)=>o?e.list_price<parseInt(o):!0,filterByMinPrice=(e,o)=>o?e.list_price>parseInt(o):!0,filterByBedrooms=(e,o)=>o?e.description.beds>=parseInt(o):!0,filterByBaths=(e,o)=>o?e.description.baths_full>=parseInt(o):!0;function Search(){const{addresses:e}=reactExports.useContext(SearchContext),{rapidKey:o,openRouteServiceKey:h}=reactExports.useContext(SettingsContext),[d,g]=reactExports.useState(),[_,$]=reactExports.useState(),[j,_t]=reactExports.useState([]),[_e,_r]=reactExports.useState({}),_n=reactExports.useRef([]);reactExports.useEffect(()=>{_t(Array.prototype.concat({label:"poi",id:"",location:{lat:e[0].position.lat,lng:e[0].position.lng}},_==null?void 0:_.map(_f=>({id:_f.listing_id,label:"listing",location:{lat:_f.location.address.coordinate.lat,lng:_f.location.address.coordinate.lon}}))))},[_]),reactExports.useEffect(()=>{_i()},[]);async function _i(){if(e){const _f=await getIntersectingArea({locations:[e[0].position],range:[e[0].distance],orsKey:h});_a(_f.poly),g({area:_f.poly,center:_f.center})}}reactExports.useEffect(()=>{_o()},[_e]);function _o(){const _f=structuredClone(_n.current);$(filterListings(_f,[_h=>filterByMinPrice(_h,_e.minPrice),_h=>filterByMaxPrice(_h,_e.maxPrice),_h=>filterByBedrooms(_h,_e.beds),_h=>filterByBaths(_h,_e.baths)]))}async function _a(_f){try{_n.current=await getListings({polygon:_f,rapidKey:o}),$(_n.current)}catch{}}async function _u(_f,_h){const _d=j.findIndex(ty=>ty.id===_f);_d&&_t(ty=>{const ey=ty;return ey[_d].active=_h,[...ey]})}return jsxRuntimeExports.jsxs("div",{className:"w-full h-full flex flex-col",children:[jsxRuntimeExports.jsx(SearchBar,{updateFilter:_f=>{_r({..._f})}}),jsxRuntimeExports.jsxs("div",{id:"content",className:"flex grow h-[90%]",children:[jsxRuntimeExports.jsx("div",{id:"sidebar",className:"w-1/2 pt-6 flex flex-row flex-wrap gap-6 overflow-y-auto justify-around",children:_==null?void 0:_.map(_f=>jsxRuntimeExports.jsx("div",{onMouseEnter:()=>_u(_f.listing_id,!0),onMouseLeave:()=>_u(_f.listing_id,!1),className:"w-5/12",children:jsxRuntimeExports.jsx(ListingTile,{listing:_f})}))}),jsxRuntimeExports.jsx("div",{id:"map",className:"w-1/2 flex justify-center items-center bg-slate-300",children:jsxRuntimeExports.jsx(Map$1,{markers:j,polygon:d})})]})]})}function Settings(){const e=useNavigate(),o=reactExports.useRef(""),h=reactExports.useRef(""),d=reactExports.useRef(""),{hereKey:g,setHereKey:_,openRouteServiceKey:$,setOpenRouteServiceKey:j,rapidKey:_t,setRapidKey:_e}=reactExports.useContext(SettingsContext);return jsxRuntimeExports.jsxs("div",{id:"settings",className:"h-full flex flex-col justify-center items-center gap-6",children:[jsxRuntimeExports.jsxs("div",{id:"here",className:"text-left",children:[jsxRuntimeExports.jsx("a",{href:"https://www.here.com/docs/bundle/identity-and-access-management-developer-guide/page/topics/dev-apikey.html",className:"underline decoration-dashed",children:"Here Developer Key"}),jsxRuntimeExports.jsx(InputBox,{inputType:"text",labelText:"Key",value:g,inputUpdate:_r=>{o.current=_r}})]}),jsxRuntimeExports.jsxs("div",{id:"openRoute",children:[jsxRuntimeExports.jsx("a",{href:"https://openrouteservice.org/plans/",className:"underline decoration-dashed",children:"ORS Developer Key"}),jsxRuntimeExports.jsx(InputBox,{inputType:"text",labelText:"Key",value:$,inputUpdate:_r=>{h.current=_r}})]}),jsxRuntimeExports.jsxs("div",{id:"rapidAPI",children:[jsxRuntimeExports.jsx("a",{href:"https://rapidapi.com/apidojo/api/realty-in-us",className:"underline decoration-dashed",children:"RapidAPI Key"}),jsxRuntimeExports.jsx(InputBox,{inputType:"text",labelText:"Key",value:_t,inputUpdate:_r=>{d.current=_r}})]}),jsxRuntimeExports.jsx("button",{className:"border  py-1 px-4",onClick:()=>{_(o.current),j(h.current),_e(d.current),e("/")},children:"Save"})]})}const routes=[{path:"",element:jsxRuntimeExports.jsx(Home,{})},{path:"/search",element:jsxRuntimeExports.jsx(Search,{})},{path:"/settings",element:jsxRuntimeExports.jsx(Settings,{})},{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})}];function ErrorView(){return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col gap-4 justify-center items-center",children:[jsxRuntimeExports.jsx(PiSmileySadLight,{size:64}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"Something went wrong"})]})}const router=createHashRouter([{element:jsxRuntimeExports.jsx(RootLayout,{}),errorElement:jsxRuntimeExports.jsx(ErrorView,{}),children:routes}]);client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(RouterProvider,{router})}))});export default S_();
